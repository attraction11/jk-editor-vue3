var B1=Object.defineProperty,P1=Object.defineProperties;var H1=Object.getOwnPropertyDescriptors;var Ng=Object.getOwnPropertySymbols;var j1=Object.prototype.hasOwnProperty,W1=Object.prototype.propertyIsEnumerable;var Dg=(b,u,t)=>u in b?B1(b,u,{enumerable:!0,configurable:!0,writable:!0,value:t}):b[u]=t,hl=(b,u)=>{for(var t in u||(u={}))j1.call(u,t)&&Dg(b,t,u[t]);if(Ng)for(var t of Ng(u))W1.call(u,t)&&Dg(b,t,u[t]);return b},ud=(b,u)=>P1(b,H1(u));import{d as or,s as Od,o as ct,c as zt,v as ti,k as jt,t as pi,u as Td,x as U1,g as rr,e as cn,y as da,z as So,p as dm,l as cm,b as hr,_ as Jn,B as ca,C as Yt,E as Fe,G as Ie,H as Be,I as Hn,J as Qt,K as Ta,L as q1,M as Mp,w as Yh,N as Jh,O as fm,P as $1,a as Tn,f as Pn,Q as yn,r as Nd,i as Nc,R as sp,S as Jo,T as G1,q as xu,U as hm,V as Z1,W as Y1,X as K1,Y as V1,D as Q1,F as X1,h as J1}from"./vendor.d165c341.js";import{_ as ev,a as ek}from"./index.7a793ff8.js";const tk=["data-id"],nk=or({name:"diff-html"}),rk=or(ud(hl({},nk),{props:{id:{type:String,required:!0},origin:{type:String,required:!0},history:{type:String,required:!0}},setup(b){const u=b,t=document.querySelector(`.am-engine p[data-id=${u.id}]`);t.style.textDecoration="wavy underline orange";const n=()=>{t.scrollIntoView()};return Od(()=>{const e=Diff.diffChars(u.origin,u.history),r=document.createDocumentFragment();e.forEach(a=>{const o=/<("[^"]*"|'[^']*'|[^'">])*>/g;a.value=a.value.replace(o,"");const l=document.createElement("span");a.added&&(l.style.color="green"),a.removed&&(l.style.color="#999",l.style.textDecoration="line-through"),l.appendChild(document.createTextNode(a.value)),r.appendChild(l)});const i=document.querySelector(`.${u.id}`);i.innerHTML="",i.appendChild(r)}),(e,r)=>(ct(),zt("div",{class:ti(u.id),"data-id":u.id,onClick:n},null,10,tk))}}));const ik={class:"revise-list"},ak={class:"avatar"},ok={class:"editor-meta"},sk={class:"meta-info"},lk={class:"record-info"},uk=or({name:"revise-list"}),dk=or(ud(hl({},uk),{props:{record:{type:Object,default:()=>{}}},setup(b){const u=b;return(t,n)=>(ct(),zt("div",ik,[jt("div",ak,pi(u.record.editor_name.at(0)),1),jt("div",ok,[jt("div",sk,[jt("span",null,pi(u.record.editor_name),1),jt("span",null,pi(Td(U1)(u.record.editor_time).format("DD.MM.YYYY")),1),jt("span",null,pi(u.record.doc_version),1)]),jt("div",lk,[rr(rk,{origin:u.record.row_original,history:u.record.row_history,id:u.record.id},null,8,["origin","history","id"])])])]))}}));var ck=ev(dk,[["__scopeId","data-v-048d10ee"]]);const fk=b=>(dm("data-v-6db637d7"),b=b(),cm(),b),hk={class:"revise-record-wrap"},vk=fk(()=>jt("h4",null,"\u7AE0\u8282\u4FEE\u8BA2\u8BB0\u5F55",-1)),pk=or({name:"revise-record"}),gk=or(ud(hl({},pk),{setup(b){const u=cn([]);Od(()=>{t()});const t=async()=>{u.value=await[{id:"p6666-a001",doc_id:"doc-110",doc_version:"v1",row_purview:["user1","user2","user3","user4"],row_original:`<p data-id="p6666-a001" style="text-indent: 2em;">\u9152\uFF0C\u4ECE\u6765\u90FD\u662F\u4E00\u4E2A<strong>\u6742\u6742</strong>\u7684\u610F\u8C61\u3002
\u662F\u63A8\u676F\u6362\u76CF\uFF0C\u662F\u9169\u914A\u5927\u9189\uFF0C\u662F\u5931\u610F\u65F6<span style="color: rgb(255, 77, 79);">\u5FC3\u96E8\u503E\u76C6\u4E0B</span>\u3002\u4E70\u9189\u4E0E\u75DB\u82E6\uFF0C\u773C\u6CEA\u90C1\u9152\u7CBE\u9F50\u98DE\u3002</p>`,row_history:`<p data-id="p6666-a001" style="text-indent: 2em;">\u9152\uFF0C\u4ECE\u6765\u90FD\u662F\u4E00\u4E2A<strong>\u590D\u6742</strong>\u7684\u610F\u8C61\u3002
\u662F\u63A8\u676F\u6362\u76CF\uFF0C\u662F\u9169\u914A\u5927\u9189\uFF0C\u662F\u5F97\u610F\u65F6\u770B\u904D\u957F\u5B89\u82B1\uFF0C\u662F\u5931\u610F\u65F6<span style="color: rgb(255, 77, 79);">\u5FC3\u96E8\u503E\u76C6\u4E0B</span>\u3002\u4E70\u9189\u4E0E\u75DB\u82E6\uFF0C\u773C\u6CEA\u4E0E\u9152\u7CBE\u9F50\u98DE\u3002</p>`,editor_name:"user1",editor_time:1647652096877},{id:"p6666-a003",doc_id:"doc-110",doc_version:"v1",row_purview:["user1","user2","user3","user4"],row_original:'<p data-id="p6666-a003">\u6240\u8C13\u201C\u51E1\u5C14\u8D5B\u6587\u5B66\u201D\uFF0C\u4E00\u53E5\u8BDD\u6982\u62EC\u5C31\u662F\u4E0D\u7ECF\u610F\u95F4\u5730\u5BA3\u5996\u51FA\u5FE7\u90C1\u611F\u3002\u7528\u4E3B\u6301\u4EBA\u4F55\u7085\u7684\u8BDD\u8BF4\u5C31\u662F\u201C\u7528\u6700\u4F4E\u8C03\u7684\u8BDD\uFF0C\u70AB\u6700\u9AD8\u8C03\u7684\u8000\u3002\u201D</p>',row_history:'<p data-id="p6666-a003">\u6240\u8C13\u201C\u51E1\u5C14\u8D5B\u6587\u5B66\u201D\uFF0C\u4E00\u53E5\u8BDD\u6982\u62EC\u5C31\u662F\u4E0D\u7ECF\u610F\u95F4\u5730\u70AB\u8000\u51FA\u4F18\u8D8A\u611F\u3002\u7528\u4E3B\u6301\u4EBA\u4F55\u7085\u7684\u8BDD\u8BF4\u5C31\u662F\u201C\u7528\u6700\u4F4E\u8C03\u7684\u8BDD\uFF0C\u70AB\u6700\u9AD8\u8C03\u7684\u8000\u3002\u201D</p>',editor_name:"user1",editor_time:1647652096877}]};return(n,e)=>(ct(),zt("div",hk,[vk,(ct(!0),zt(da,null,So(u.value,r=>(ct(),hr(ck,{key:r.id,record:r},null,8,["record"]))),128))]))}}));var mk=ev(gk,[["__scopeId","data-v-6db637d7"]]),Ml={};Object.defineProperty(Ml,"__esModule",{value:!0});var bk=typeof window!="undefined"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),Yv={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},vm={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:bk?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},Tp={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};for(var Hh=1;Hh<20;Hh++)Tp["f"+Hh]=111+Hh;function tv(b,u,t){u&&!("byKey"in u)&&(t=u,u=null),Array.isArray(b)||(b=[b]);var n=b.map(function(i){return pm(i,u)}),e=function(a){return n.some(function(o){return gm(o,a)})},r=t==null?e:e(t);return r}function yk(b,u){return tv(b,u)}function wk(b,u){return tv(b,{byKey:!0},u)}function pm(b,u){var t=u&&u.byKey,n={};b=b.replace("++","+add");var e=b.split("+"),r=e.length;for(var i in Yv)n[Yv[i]]=!1;var a=!0,o=!1,l=void 0;try{for(var c=e[Symbol.iterator](),d;!(a=(d=c.next()).done);a=!0){var v=d.value,h=v.endsWith("?")&&v.length>1;h&&(v=v.slice(0,-1));var g=Ap(v),w=Yv[g];if(v.length>1&&!w&&!vm[v]&&!Tp[g])throw new TypeError('Unknown modifier: "'+v+'"');(r===1||!w)&&(t?n.key=g:n.which=mm(v)),w&&(n[w]=h?null:!0)}}catch(x){o=!0,l=x}finally{try{!a&&c.return&&c.return()}finally{if(o)throw l}}return n}function gm(b,u){for(var t in b){var n=b[t],e=void 0;if(n!=null&&(t==="key"&&u.key!=null?e=u.key.toLowerCase():t==="which"?e=n===91&&u.which===93?91:u.which:e=u[t],!(e==null&&n===!1)&&e!==n))return!1}return!0}function mm(b){b=Ap(b);var u=Tp[b]||b.toUpperCase().charCodeAt(0);return u}function Ap(b){return b=b.toLowerCase(),b=vm[b]||b,b}var yt=Ml.default=tv,jh=Ml.isHotkey=tv;Ml.isCodeHotkey=yk;Ml.isKeyHotkey=wk;Ml.parseHotkey=pm;Ml.compareHotkey=gm;Ml.toKeyCode=mm;Ml.toKeyName=Ap;function Ig(b,u,t,n,e,r,i){try{var a=b[r](i),o=a.value}catch(l){t(l);return}a.done?u(o):Promise.resolve(o).then(n,e)}function zr(b){return function(){var u=this,t=arguments;return new Promise(function(n,e){var r=b.apply(u,t);function i(o){Ig(r,n,e,i,a,"next",o)}function a(o){Ig(r,n,e,i,a,"throw",o)}i(void 0)})}}function Ye(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}function St(b){return St=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},St(b)}function kk(b,u){for(;!Object.prototype.hasOwnProperty.call(b,u)&&(b=St(b),b!==null););return b}function At(){return typeof Reflect!="undefined"&&Reflect.get?At=Reflect.get:At=function(u,t,n){var e=kk(u,t);if(!!e){var r=Object.getOwnPropertyDescriptor(e,t);return r.get?r.get.call(arguments.length<3?u:n):r.value}},At.apply(this,arguments)}function lp(b,u){return lp=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n},lp(b,u)}function ft(b,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(u&&u.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),Object.defineProperty(b,"prototype",{writable:!1}),u&&lp(b,u)}function xk(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ck(b,u){if(u&&(Jn(u)==="object"||typeof u=="function"))return u;if(u!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ye(b)}function ht(b){var u=xk();return function(){var n=St(b),e;if(u){var r=St(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Ck(this,e)}}function oe(b,u){if(!Object.prototype.hasOwnProperty.call(b,u))throw new TypeError("attempted to use private field on non-instance");return b}var Ek=0;function Mt(b){return"__private_"+Ek+++"_"+b}var bm={exports:{}};(function(b){(function(u){function t(S,D){var I=(S&65535)+(D&65535),P=(S>>16)+(D>>16)+(I>>16);return P<<16|I&65535}function n(S,D){return S<<D|S>>>32-D}function e(S,D,I,P,B,$){return t(n(t(t(D,S),t(P,$)),B),I)}function r(S,D,I,P,B,$,q){return e(D&I|~D&P,S,D,B,$,q)}function i(S,D,I,P,B,$,q){return e(D&P|I&~P,S,D,B,$,q)}function a(S,D,I,P,B,$,q){return e(D^I^P,S,D,B,$,q)}function o(S,D,I,P,B,$,q){return e(I^(D|~P),S,D,B,$,q)}function l(S,D){S[D>>5]|=128<<D%32,S[(D+64>>>9<<4)+14]=D;var I,P,B,$,q,G=1732584193,H=-271733879,z=-1732584194,O=271733878;for(I=0;I<S.length;I+=16)P=G,B=H,$=z,q=O,G=r(G,H,z,O,S[I],7,-680876936),O=r(O,G,H,z,S[I+1],12,-389564586),z=r(z,O,G,H,S[I+2],17,606105819),H=r(H,z,O,G,S[I+3],22,-1044525330),G=r(G,H,z,O,S[I+4],7,-176418897),O=r(O,G,H,z,S[I+5],12,1200080426),z=r(z,O,G,H,S[I+6],17,-1473231341),H=r(H,z,O,G,S[I+7],22,-45705983),G=r(G,H,z,O,S[I+8],7,1770035416),O=r(O,G,H,z,S[I+9],12,-1958414417),z=r(z,O,G,H,S[I+10],17,-42063),H=r(H,z,O,G,S[I+11],22,-1990404162),G=r(G,H,z,O,S[I+12],7,1804603682),O=r(O,G,H,z,S[I+13],12,-40341101),z=r(z,O,G,H,S[I+14],17,-1502002290),H=r(H,z,O,G,S[I+15],22,1236535329),G=i(G,H,z,O,S[I+1],5,-165796510),O=i(O,G,H,z,S[I+6],9,-1069501632),z=i(z,O,G,H,S[I+11],14,643717713),H=i(H,z,O,G,S[I],20,-373897302),G=i(G,H,z,O,S[I+5],5,-701558691),O=i(O,G,H,z,S[I+10],9,38016083),z=i(z,O,G,H,S[I+15],14,-660478335),H=i(H,z,O,G,S[I+4],20,-405537848),G=i(G,H,z,O,S[I+9],5,568446438),O=i(O,G,H,z,S[I+14],9,-1019803690),z=i(z,O,G,H,S[I+3],14,-187363961),H=i(H,z,O,G,S[I+8],20,1163531501),G=i(G,H,z,O,S[I+13],5,-1444681467),O=i(O,G,H,z,S[I+2],9,-51403784),z=i(z,O,G,H,S[I+7],14,1735328473),H=i(H,z,O,G,S[I+12],20,-1926607734),G=a(G,H,z,O,S[I+5],4,-378558),O=a(O,G,H,z,S[I+8],11,-2022574463),z=a(z,O,G,H,S[I+11],16,1839030562),H=a(H,z,O,G,S[I+14],23,-35309556),G=a(G,H,z,O,S[I+1],4,-1530992060),O=a(O,G,H,z,S[I+4],11,1272893353),z=a(z,O,G,H,S[I+7],16,-155497632),H=a(H,z,O,G,S[I+10],23,-1094730640),G=a(G,H,z,O,S[I+13],4,681279174),O=a(O,G,H,z,S[I],11,-358537222),z=a(z,O,G,H,S[I+3],16,-722521979),H=a(H,z,O,G,S[I+6],23,76029189),G=a(G,H,z,O,S[I+9],4,-640364487),O=a(O,G,H,z,S[I+12],11,-421815835),z=a(z,O,G,H,S[I+15],16,530742520),H=a(H,z,O,G,S[I+2],23,-995338651),G=o(G,H,z,O,S[I],6,-198630844),O=o(O,G,H,z,S[I+7],10,1126891415),z=o(z,O,G,H,S[I+14],15,-1416354905),H=o(H,z,O,G,S[I+5],21,-57434055),G=o(G,H,z,O,S[I+12],6,1700485571),O=o(O,G,H,z,S[I+3],10,-1894986606),z=o(z,O,G,H,S[I+10],15,-1051523),H=o(H,z,O,G,S[I+1],21,-2054922799),G=o(G,H,z,O,S[I+8],6,1873313359),O=o(O,G,H,z,S[I+15],10,-30611744),z=o(z,O,G,H,S[I+6],15,-1560198380),H=o(H,z,O,G,S[I+13],21,1309151649),G=o(G,H,z,O,S[I+4],6,-145523070),O=o(O,G,H,z,S[I+11],10,-1120210379),z=o(z,O,G,H,S[I+2],15,718787259),H=o(H,z,O,G,S[I+9],21,-343485551),G=t(G,P),H=t(H,B),z=t(z,$),O=t(O,q);return[G,H,z,O]}function c(S){var D,I="",P=S.length*32;for(D=0;D<P;D+=8)I+=String.fromCharCode(S[D>>5]>>>D%32&255);return I}function d(S){var D,I=[];for(I[(S.length>>2)-1]=void 0,D=0;D<I.length;D+=1)I[D]=0;var P=S.length*8;for(D=0;D<P;D+=8)I[D>>5]|=(S.charCodeAt(D/8)&255)<<D%32;return I}function v(S){return c(l(d(S),S.length*8))}function h(S,D){var I,P=d(S),B=[],$=[],q;for(B[15]=$[15]=void 0,P.length>16&&(P=l(P,S.length*8)),I=0;I<16;I+=1)B[I]=P[I]^909522486,$[I]=P[I]^1549556828;return q=l(B.concat(d(D)),512+D.length*8),c(l($.concat(q),512+128))}function g(S){var D="0123456789abcdef",I="",P,B;for(B=0;B<S.length;B+=1)P=S.charCodeAt(B),I+=D.charAt(P>>>4&15)+D.charAt(P&15);return I}function w(S){return unescape(encodeURIComponent(S))}function x(S){return v(w(S))}function _(S){return g(x(S))}function E(S,D){return h(w(S),w(D))}function M(S,D){return g(E(S,D))}function T(S,D,I){return D?I?E(D,S):M(D,S):I?x(S):_(S)}b.exports?b.exports=T:u.md5=T})(ca)})(bm);var _k=bm.exports,Kt={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(b,u){(function(){var t,n="4.17.21",e=200,r="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",a="Invalid `variable` option passed into `_.template`",o="__lodash_hash_undefined__",l=500,c="__lodash_placeholder__",d=1,v=2,h=4,g=1,w=2,x=1,_=2,E=4,M=8,T=16,S=32,D=64,I=128,P=256,B=512,$=30,q="...",G=800,H=16,z=1,O=2,Q=3,ie=1/0,L=9007199254740991,F=17976931348623157e292,X=0/0,se=4294967295,Y=se-1,j=se>>>1,fe=[["ary",I],["bind",x],["bindKey",_],["curry",M],["curryRight",T],["flip",B],["partial",S],["partialRight",D],["rearg",P]],ve="[object Arguments]",ae="[object Array]",J="[object AsyncFunction]",pe="[object Boolean]",Ee="[object Date]",Le="[object DOMException]",Re="[object Error]",Ce="[object Function]",ne="[object GeneratorFunction]",me="[object Map]",ue="[object Number]",Te="[object Null]",ze="[object Object]",We="[object Promise]",et="[object Proxy]",Ke="[object RegExp]",Ge="[object Set]",_e="[object String]",Ue="[object Symbol]",Ae="[object Undefined]",ot="[object WeakMap]",nt="[object WeakSet]",wt="[object ArrayBuffer]",bt="[object DataView]",Et="[object Float32Array]",Dt="[object Float64Array]",wn="[object Int8Array]",zn="[object Int16Array]",kr="[object Int32Array]",vt="[object Uint8Array]",bi="[object Uint8ClampedArray]",tr="[object Uint16Array]",Tt="[object Uint32Array]",Dn=/\b__p \+= '';/g,Rn=/\b(__p \+=) '' \+/g,pn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,sr=/&(?:amp|lt|gt|quot|#39);/g,dr=/[&<>"']/g,ha=RegExp(sr.source),Zr=RegExp(dr.source),ji=/<%-([\s\S]+?)%>/g,Wt=/<%([\s\S]+?)%>/g,Ut=/<%=([\s\S]+?)%>/g,In=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,lr=/^\w*$/,yi=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ni=/[\\^$.*+?()[\]{}|]/g,Yr=RegExp(Ni.source),ri=/^\s+/,Ia=/\s/,Fs=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,To=/\{\n\/\* \[wrapped with (.+)\] \*/,La=/,? & /,ii=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Zn=/[()=,{}\[\]\/\s]/,va=/\\(\\)?/g,cr=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,xr=/\w*$/,Ki=/^[-+]0x[0-9a-f]+$/i,Nr=/^0b[01]+$/i,Fr=/^\[object .+?Constructor\]$/,Br=/^0o[0-7]+$/i,Vi=/^(?:0|[1-9]\d*)$/,pa=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Fn=/($^)/,Ct=/['\n\r\u2028\u2029\\]/g,Pr="\\ud800-\\udfff",ro="\\u0300-\\u036f",Hr="\\ufe20-\\ufe2f",hn="\\u20d0-\\u20ff",Cr=ro+Hr+hn,ga="\\u2700-\\u27bf",Wi="a-z\\xdf-\\xf6\\xf8-\\xff",Ve="\\xac\\xb1\\xd7\\xf7",te="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",we="\\u2000-\\u206f",je=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Je="A-Z\\xc0-\\xd6\\xd8-\\xde",Ft="\\ufe0e\\ufe0f",gt=Ve+te+we+je,st="['\u2019]",Yn="["+Pr+"]",Wn="["+gt+"]",Di="["+Cr+"]",Kr="\\d+",Oa="["+ga+"]",Bs="["+Wi+"]",za="[^"+Pr+gt+Kr+ga+Wi+Je+"]",io="\\ud83c[\\udffb-\\udfff]",Ps="(?:"+Di+"|"+io+")",Al="[^"+Pr+"]",Nl="(?:\\ud83c[\\udde6-\\uddff]){2}",Hs="[\\ud800-\\udbff][\\udc00-\\udfff]",Ra="["+Je+"]",Dl="\\u200d",zd="(?:"+Bs+"|"+za+")",Rd="(?:"+Ra+"|"+za+")",js="(?:"+st+"(?:d|ll|m|re|s|t|ve))?",Qi="(?:"+st+"(?:D|LL|M|RE|S|T|VE))?",Tu=Ps+"?",Au="["+Ft+"]?",Il="(?:"+Dl+"(?:"+[Al,Nl,Hs].join("|")+")"+Au+Tu+")*",os="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ws="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Fd=Au+Tu+Il,ao="(?:"+[Oa,Nl,Hs].join("|")+")"+Fd,Ll="(?:"+[Al+Di+"?",Di,Nl,Hs,Yn].join("|")+")",Us=RegExp(st,"g"),Nu=RegExp(Di,"g"),Du=RegExp(io+"(?="+io+")|"+Ll+Fd,"g"),Bd=RegExp([Ra+"?"+Bs+"+"+js+"(?="+[Wn,Ra,"$"].join("|")+")",Rd+"+"+Qi+"(?="+[Wn,Ra+zd,"$"].join("|")+")",Ra+"?"+zd+"+"+js,Ra+"+"+Qi,Ws,os,Kr,ao].join("|"),"g"),Pd=RegExp("["+Dl+Pr+Cr+Ft+"]"),Ol=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,zl=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Iu=-1,Kn={};Kn[Et]=Kn[Dt]=Kn[wn]=Kn[zn]=Kn[kr]=Kn[vt]=Kn[bi]=Kn[tr]=Kn[Tt]=!0,Kn[ve]=Kn[ae]=Kn[wt]=Kn[pe]=Kn[bt]=Kn[Ee]=Kn[Re]=Kn[Ce]=Kn[me]=Kn[ue]=Kn[ze]=Kn[Ke]=Kn[Ge]=Kn[_e]=Kn[ot]=!1;var Un={};Un[ve]=Un[ae]=Un[wt]=Un[bt]=Un[pe]=Un[Ee]=Un[Et]=Un[Dt]=Un[wn]=Un[zn]=Un[kr]=Un[me]=Un[ue]=Un[ze]=Un[Ke]=Un[Ge]=Un[_e]=Un[Ue]=Un[vt]=Un[bi]=Un[tr]=Un[Tt]=!0,Un[Re]=Un[Ce]=Un[ot]=!1;var Rl={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Ao={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Lu={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Dr={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ui=parseFloat,No=parseInt,ss=typeof ca=="object"&&ca&&ca.Object===Object&&ca,Do=typeof self=="object"&&self&&self.Object===Object&&self,ir=ss||Do||Function("return this")(),qi=u&&!u.nodeType&&u,qn=qi&&!0&&b&&!b.nodeType&&b,ls=qn&&qn.exports===qi,qs=ls&&ss.process,pr=function(){try{var De=qn&&qn.require&&qn.require("util").types;return De||qs&&qs.binding&&qs.binding("util")}catch{}}(),$s=pr&&pr.isArrayBuffer,Ou=pr&&pr.isDate,zu=pr&&pr.isMap,oo=pr&&pr.isRegExp,Fl=pr&&pr.isSet,ma=pr&&pr.isTypedArray;function ai(De,$e,He){switch(He.length){case 0:return De.call($e);case 1:return De.call($e,He[0]);case 2:return De.call($e,He[0],He[1]);case 3:return De.call($e,He[0],He[1],He[2])}return De.apply($e,He)}function Ru(De,$e,He,_t){for(var Vt=-1,Ln=De==null?0:De.length;++Vt<Ln;){var jr=De[Vt];$e(_t,jr,He(jr),De)}return _t}function ar(De,$e){for(var He=-1,_t=De==null?0:De.length;++He<_t&&$e(De[He],He,De)!==!1;);return De}function Lc(De,$e){for(var He=De==null?0:De.length;He--&&$e(De[He],He,De)!==!1;);return De}function Gs(De,$e){for(var He=-1,_t=De==null?0:De.length;++He<_t;)if(!$e(De[He],He,De))return!1;return!0}function Fa(De,$e){for(var He=-1,_t=De==null?0:De.length,Vt=0,Ln=[];++He<_t;){var jr=De[He];$e(jr,He,De)&&(Ln[Vt++]=jr)}return Ln}function Ba(De,$e){var He=De==null?0:De.length;return!!He&&lo(De,$e,0)>-1}function Pa(De,$e,He){for(var _t=-1,Vt=De==null?0:De.length;++_t<Vt;)if(He($e,De[_t]))return!0;return!1}function kn(De,$e){for(var He=-1,_t=De==null?0:De.length,Vt=Array(_t);++He<_t;)Vt[He]=$e(De[He],He,De);return Vt}function Ha(De,$e){for(var He=-1,_t=$e.length,Vt=De.length;++He<_t;)De[Vt+He]=$e[He];return De}function Ir(De,$e,He,_t){var Vt=-1,Ln=De==null?0:De.length;for(_t&&Ln&&(He=De[++Vt]);++Vt<Ln;)He=$e(He,De[Vt],Vt,De);return He}function us(De,$e,He,_t){var Vt=De==null?0:De.length;for(_t&&Vt&&(He=De[--Vt]);Vt--;)He=$e(He,De[Vt],Vt,De);return He}function ja(De,$e){for(var He=-1,_t=De==null?0:De.length;++He<_t;)if($e(De[He],He,De))return!0;return!1}var gr=be("length");function ba(De){return De.split("")}function Bl(De){return De.match(ii)||[]}function so(De,$e,He){var _t;return He(De,function(Vt,Ln,jr){if($e(Vt,Ln,jr))return _t=Ln,!1}),_t}function Zs(De,$e,He,_t){for(var Vt=De.length,Ln=He+(_t?1:-1);_t?Ln--:++Ln<Vt;)if($e(De[Ln],Ln,De))return Ln;return-1}function lo(De,$e,He){return $e===$e?jf(De,$e,He):Zs(De,K,He)}function Fu(De,$e,He,_t){for(var Vt=He-1,Ln=De.length;++Vt<Ln;)if(_t(De[Vt],$e))return Vt;return-1}function K(De){return De!==De}function ce(De,$e){var He=De==null?0:De.length;return He?Rt(De,$e)/He:X}function be(De){return function($e){return $e==null?t:$e[De]}}function ye(De){return function($e){return De==null?t:De[$e]}}function tt(De,$e,He,_t,Vt){return Vt(De,function(Ln,jr,xn){He=_t?(_t=!1,Ln):$e(He,Ln,jr,xn)}),He}function at(De,$e){var He=De.length;for(De.sort($e);He--;)De[He]=De[He].value;return De}function Rt(De,$e){for(var He,_t=-1,Vt=De.length;++_t<Vt;){var Ln=$e(De[_t]);Ln!==t&&(He=He===t?Ln:He+Ln)}return He}function Zt(De,$e){for(var He=-1,_t=Array(De);++He<De;)_t[He]=$e(He);return _t}function Bt(De,$e){return kn($e,function(He){return[He,De[He]]})}function nn(De){return De&&De.slice(0,Ud(De)+1).replace(ri,"")}function gn(De){return function($e){return De($e)}}function Ii(De,$e){return kn($e,function(He){return De[He]})}function fr(De,$e){return De.has($e)}function Li(De,$e){for(var He=-1,_t=De.length;++He<_t&&lo($e,De[He],0)>-1;);return He}function uo(De,$e){for(var He=De.length;He--&&lo($e,De[He],0)>-1;);return He}function ya(De,$e){for(var He=De.length,_t=0;He--;)De[He]===$e&&++_t;return _t}var Pl=ye(Rl),Bu=ye(Ao);function Hd(De){return"\\"+Dr[De]}function Oc(De,$e){return De==null?t:De[$e]}function Wa(De){return Pd.test(De)}function co(De){return Ol.test(De)}function Bf(De){for(var $e,He=[];!($e=De.next()).done;)He.push($e.value);return He}function jd(De){var $e=-1,He=Array(De.size);return De.forEach(function(_t,Vt){He[++$e]=[Vt,_t]}),He}function Pf(De,$e){return function(He){return De($e(He))}}function ds(De,$e){for(var He=-1,_t=De.length,Vt=0,Ln=[];++He<_t;){var jr=De[He];(jr===$e||jr===c)&&(De[He]=c,Ln[Vt++]=He)}return Ln}function Wd(De){var $e=-1,He=Array(De.size);return De.forEach(function(_t){He[++$e]=_t}),He}function Hf(De){var $e=-1,He=Array(De.size);return De.forEach(function(_t){He[++$e]=[_t,_t]}),He}function jf(De,$e,He){for(var _t=He-1,Vt=De.length;++_t<Vt;)if(De[_t]===$e)return _t;return-1}function Pu(De,$e,He){for(var _t=He+1;_t--;)if(De[_t]===$e)return _t;return _t}function Ys(De){return Wa(De)?Wf(De):gr(De)}function wa(De){return Wa(De)?$d(De):ba(De)}function Ud(De){for(var $e=De.length;$e--&&Ia.test(De.charAt($e)););return $e}var qd=ye(Lu);function Wf(De){for(var $e=Du.lastIndex=0;Du.test(De);)++$e;return $e}function $d(De){return De.match(Du)||[]}function Ua(De){return De.match(Bd)||[]}var Uf=function De($e){$e=$e==null?ir:cs.defaults(ir.Object(),$e,cs.pick(ir,zl));var He=$e.Array,_t=$e.Date,Vt=$e.Error,Ln=$e.Function,jr=$e.Math,xn=$e.Object,fs=$e.RegExp,Hl=$e.String,$i=$e.TypeError,jl=He.prototype,qf=Ln.prototype,hs=xn.prototype,fo=$e["__core-js_shared__"],ho=qf.toString,Xt=hs.hasOwnProperty,vs=0,Io=function(){var p=/[^.]+$/.exec(fo&&fo.keys&&fo.keys.IE_PROTO||"");return p?"Symbol(src)_1."+p:""}(),Ks=hs.toString,lv=ho.call(xn),$f=ir._,Hu=fs("^"+ho.call(Xt).replace(Ni,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ju=ls?$e.Buffer:t,vo=$e.Symbol,Vs=$e.Uint8Array,Gf=ju?ju.allocUnsafe:t,Wl=Pf(xn.getPrototypeOf,xn),zc=xn.create,Gd=hs.propertyIsEnumerable,Ul=jl.splice,Qs=vo?vo.isConcatSpreadable:t,ps=vo?vo.iterator:t,gs=vo?vo.toStringTag:t,Xs=function(){try{var p=sl(xn,"defineProperty");return p({},"",{}),p}catch{}}(),uv=$e.clearTimeout!==ir.clearTimeout&&$e.clearTimeout,dv=_t&&_t.now!==ir.Date.now&&_t.now,cv=$e.setTimeout!==ir.setTimeout&&$e.setTimeout,ql=jr.ceil,$l=jr.floor,ms=xn.getOwnPropertySymbols,Wu=ju?ju.isBuffer:t,Zf=$e.isFinite,Zd=jl.join,Yf=Pf(xn.keys,xn),mr=jr.max,oi=jr.min,Js=_t.now,Uu=$e.parseInt,bs=jr.random,qu=jl.reverse,ys=sl($e,"DataView"),Gl=sl($e,"Map"),Yd=sl($e,"Promise"),el=sl($e,"Set"),$u=sl($e,"WeakMap"),qa=sl(xn,"create"),po=$u&&new $u,Zl={},fv=nr(ys),hv=nr(Gl),vv=nr(Yd),pv=nr(el),gv=nr($u),si=vo?vo.prototype:t,br=si?si.valueOf:t,li=si?si.toString:t;function le(p){if(Or(p)&&!rn(p)&&!(p instanceof vn)){if(p instanceof Oi)return p;if(Xt.call(p,"__wrapped__"))return _i(p)}return new Oi(p)}var go=function(){function p(){}return function(k){if(!Mr(k))return{};if(zc)return zc(k);p.prototype=k;var A=new p;return p.prototype=t,A}}();function Kd(){}function Oi(p,k){this.__wrapped__=p,this.__actions__=[],this.__chain__=!!k,this.__index__=0,this.__values__=t}le.templateSettings={escape:ji,evaluate:Wt,interpolate:Ut,variable:"",imports:{_:le}},le.prototype=Kd.prototype,le.prototype.constructor=le,Oi.prototype=go(Kd.prototype),Oi.prototype.constructor=Oi;function vn(p){this.__wrapped__=p,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=se,this.__views__=[]}function mv(){var p=new vn(this.__wrapped__);return p.__actions__=Xr(this.__actions__),p.__dir__=this.__dir__,p.__filtered__=this.__filtered__,p.__iteratees__=Xr(this.__iteratees__),p.__takeCount__=this.__takeCount__,p.__views__=Xr(this.__views__),p}function bv(){if(this.__filtered__){var p=new vn(this);p.__dir__=-1,p.__filtered__=!0}else p=this.clone(),p.__dir__*=-1;return p}function Rc(){var p=this.__wrapped__.value(),k=this.__dir__,A=rn(p),W=k<0,re=A?p.length:0,de=yc(0,re,this.__views__),xe=de.start,Se=de.end,Oe=Se-xe,Qe=W?Se:xe-1,Xe=this.__iteratees__,rt=Xe.length,xt=0,Lt=oi(Oe,this.__takeCount__);if(!A||!W&&re==Oe&&Lt==Oe)return ph(p,this.__actions__);var qt=[];e:for(;Oe--&&xt<Lt;){Qe+=k;for(var sn=-1,$t=p[Qe];++sn<rt;){var mn=Xe[sn],Cn=mn.iteratee,Za=mn.type,na=Cn($t);if(Za==O)$t=na;else if(!na){if(Za==z)continue e;break e}}qt[xt++]=$t}return qt}vn.prototype=go(Kd.prototype),vn.prototype.constructor=vn;function ws(p){var k=-1,A=p==null?0:p.length;for(this.clear();++k<A;){var W=p[k];this.set(W[0],W[1])}}function Fc(){this.__data__=qa?qa(null):{},this.size=0}function yv(p){var k=this.has(p)&&delete this.__data__[p];return this.size-=k?1:0,k}function Bc(p){var k=this.__data__;if(qa){var A=k[p];return A===o?t:A}return Xt.call(k,p)?k[p]:t}function Pc(p){var k=this.__data__;return qa?k[p]!==t:Xt.call(k,p)}function Kf(p,k){var A=this.__data__;return this.size+=this.has(p)?0:1,A[p]=qa&&k===t?o:k,this}ws.prototype.clear=Fc,ws.prototype.delete=yv,ws.prototype.get=Bc,ws.prototype.has=Pc,ws.prototype.set=Kf;function mo(p){var k=-1,A=p==null?0:p.length;for(this.clear();++k<A;){var W=p[k];this.set(W[0],W[1])}}function Hc(){this.__data__=[],this.size=0}function Vf(p){var k=this.__data__,A=tl(k,p);if(A<0)return!1;var W=k.length-1;return A==W?k.pop():Ul.call(k,A,1),--this.size,!0}function Gu(p){var k=this.__data__,A=tl(k,p);return A<0?t:k[A][1]}function wv(p){return tl(this.__data__,p)>-1}function Vd(p,k){var A=this.__data__,W=tl(A,p);return W<0?(++this.size,A.push([p,k])):A[W][1]=k,this}mo.prototype.clear=Hc,mo.prototype.delete=Vf,mo.prototype.get=Gu,mo.prototype.has=wv,mo.prototype.set=Vd;function ui(p){var k=-1,A=p==null?0:p.length;for(this.clear();++k<A;){var W=p[k];this.set(W[0],W[1])}}function Qf(){this.size=0,this.__data__={hash:new ws,map:new(Gl||mo),string:new ws}}function kv(p){var k=bc(this,p).delete(p);return this.size-=k?1:0,k}function Xf(p){return bc(this,p).get(p)}function Xi(p){return bc(this,p).has(p)}function Sn(p,k){var A=bc(this,p),W=A.size;return A.set(p,k),this.size+=A.size==W?0:1,this}ui.prototype.clear=Qf,ui.prototype.delete=kv,ui.prototype.get=Xf,ui.prototype.has=Xi,ui.prototype.set=Sn;function di(p){var k=-1,A=p==null?0:p.length;for(this.__data__=new ui;++k<A;)this.add(p[k])}function ks(p){return this.__data__.set(p,o),this}function xs(p){return this.__data__.has(p)}di.prototype.add=di.prototype.push=ks,di.prototype.has=xs;function ka(p){var k=this.__data__=new mo(p);this.size=k.size}function jc(){this.__data__=new mo,this.size=0}function Jf(p){var k=this.__data__,A=k.delete(p);return this.size=k.size,A}function xv(p){return this.__data__.get(p)}function Wc(p){return this.__data__.has(p)}function Zu(p,k){var A=this.__data__;if(A instanceof mo){var W=A.__data__;if(!Gl||W.length<e-1)return W.push([p,k]),this.size=++A.size,this;A=this.__data__=new ui(W)}return A.set(p,k),this.size=A.size,this}ka.prototype.clear=jc,ka.prototype.delete=Jf,ka.prototype.get=xv,ka.prototype.has=Wc,ka.prototype.set=Zu;function Uc(p,k){var A=rn(p),W=!A&&ld(p),re=!A&&!W&&fu(p),de=!A&&!W&&!re&&kc(p),xe=A||W||re||de,Se=xe?Zt(p.length,Hl):[],Oe=Se.length;for(var Qe in p)(k||Xt.call(p,Qe))&&!(xe&&(Qe=="length"||re&&(Qe=="offset"||Qe=="parent")||de&&(Qe=="buffer"||Qe=="byteLength"||Qe=="byteOffset")||U(Qe,Oe)))&&Se.push(Qe);return Se}function Qd(p){var k=p.length;return k?p[lc(0,k-1)]:t}function Cs(p,k){return Jr(Xr(p),nl(k,0,p.length))}function eh(p){return Jr(Xr(p))}function Xd(p,k,A){(A!==t&&!Bo(p[k],A)||A===t&&!(k in p))&&bo(p,k,A)}function Yu(p,k,A){var W=p[k];(!(Xt.call(p,k)&&Bo(W,A))||A===t&&!(k in p))&&bo(p,k,A)}function tl(p,k){for(var A=p.length;A--;)if(Bo(p[A][0],k))return A;return-1}function qc(p,k,A,W){return Ji(p,function(re,de,xe){k(W,re,A(re),xe)}),W}function $c(p,k){return p&&Gi(k,Mi(k),p)}function Cv(p,k){return p&&Gi(k,Sa(k),p)}function bo(p,k,A){k=="__proto__"&&Xs?Xs(p,k,{configurable:!0,enumerable:!0,value:A,writable:!0}):p[k]=A}function Gc(p,k){for(var A=-1,W=k.length,re=He(W),de=p==null;++A<W;)re[A]=de?t:Pv(p,k[A]);return re}function nl(p,k,A){return p===p&&(A!==t&&(p=p<=A?p:A),k!==t&&(p=p>=k?p:k)),p}function zi(p,k,A,W,re,de){var xe,Se=k&d,Oe=k&v,Qe=k&h;if(A&&(xe=re?A(p,W,re,de):A(p)),xe!==t)return xe;if(!Mr(p))return p;var Xe=rn(p);if(Xe){if(xe=y(p),!Se)return Xr(p,xe)}else{var rt=xi(p),xt=rt==Ce||rt==ne;if(fu(p))return rf(p,Se);if(rt==ze||rt==ve||xt&&!re){if(xe=Oe||xt?{}:m(p),!Se)return Oe?wh(p,Cv(xe,p)):Dv(p,$c(xe,p))}else{if(!Un[rt])return re?p:{};xe=C(p,rt,Se)}}de||(de=new ka);var Lt=de.get(p);if(Lt)return Lt;de.set(p,xe),pg(p)?p.forEach(function($t){xe.add(zi($t,k,A,$t,p,de))}):hg(p)&&p.forEach(function($t,mn){xe.set(mn,zi($t,k,A,mn,p,de))});var qt=Qe?Oe?mc:od:Oe?Sa:Mi,sn=Xe?t:qt(p);return ar(sn||p,function($t,mn){sn&&(mn=$t,$t=p[mn]),Yu(xe,mn,zi($t,k,A,mn,p,de))}),xe}function th(p){var k=Mi(p);return function(A){return nh(A,p,k)}}function nh(p,k,A){var W=A.length;if(p==null)return!W;for(p=xn(p);W--;){var re=A[W],de=k[re],xe=p[re];if(xe===t&&!(re in p)||!de(xe))return!1}return!0}function rh(p,k,A){if(typeof p!="function")throw new $i(i);return Qn(function(){p.apply(t,A)},k)}function Yl(p,k,A,W){var re=-1,de=Ba,xe=!0,Se=p.length,Oe=[],Qe=k.length;if(!Se)return Oe;A&&(k=kn(k,gn(A))),W?(de=Pa,xe=!1):k.length>=e&&(de=fr,xe=!1,k=new di(k));e:for(;++re<Se;){var Xe=p[re],rt=A==null?Xe:A(Xe);if(Xe=W||Xe!==0?Xe:0,xe&&rt===rt){for(var xt=Qe;xt--;)if(k[xt]===rt)continue e;Oe.push(Xe)}else de(k,rt,W)||Oe.push(Xe)}return Oe}var Ji=kh(ea),Jd=kh(nc,!0);function ec(p,k){var A=!0;return Ji(p,function(W,re,de){return A=!!k(W,re,de),A}),A}function Ku(p,k,A){for(var W=-1,re=p.length;++W<re;){var de=p[W],xe=k(de);if(xe!=null&&(Se===t?xe===xe&&!Ga(xe):A(xe,Se)))var Se=xe,Oe=de}return Oe}function Zc(p,k,A,W){var re=p.length;for(A=on(A),A<0&&(A=-A>re?0:re+A),W=W===t||W>re?re:on(W),W<0&&(W+=re),W=A>W?0:mg(W);A<W;)p[A++]=k;return p}function Yc(p,k){var A=[];return Ji(p,function(W,re,de){k(W,re,de)&&A.push(W)}),A}function ci(p,k,A,W,re){var de=-1,xe=p.length;for(A||(A=R),re||(re=[]);++de<xe;){var Se=p[de];k>0&&A(Se)?k>1?ci(Se,k-1,A,W,re):Ha(re,Se):W||(re[re.length]=Se)}return re}var tc=xh(),Vr=xh(!0);function ea(p,k){return p&&tc(p,k,Mi)}function nc(p,k){return p&&Vr(p,k,Mi)}function Vu(p,k){return Fa(k,function(A){return dl(p[A])})}function Es(p,k){k=$a(k,p);for(var A=0,W=k.length;p!=null&&A<W;)p=p[$n(k[A++])];return A&&A==W?p:t}function rl(p,k,A){var W=k(p);return rn(p)?W:Ha(W,A(p))}function Qr(p){return p==null?p===t?Ae:Te:gs&&gs in xn(p)?Er(p):kt(p)}function rc(p,k){return p>k}function ih(p,k){return p!=null&&Xt.call(p,k)}function ah(p,k){return p!=null&&k in xn(p)}function Kl(p,k,A){return p>=oi(k,A)&&p<mr(k,A)}function ic(p,k,A){for(var W=A?Pa:Ba,re=p[0].length,de=p.length,xe=de,Se=He(de),Oe=1/0,Qe=[];xe--;){var Xe=p[xe];xe&&k&&(Xe=kn(Xe,gn(k))),Oe=oi(Xe.length,Oe),Se[xe]=!A&&(k||re>=120&&Xe.length>=120)?new di(xe&&Xe):t}Xe=p[0];var rt=-1,xt=Se[0];e:for(;++rt<re&&Qe.length<Oe;){var Lt=Xe[rt],qt=k?k(Lt):Lt;if(Lt=A||Lt!==0?Lt:0,!(xt?fr(xt,qt):W(Qe,qt,A))){for(xe=de;--xe;){var sn=Se[xe];if(!(sn?fr(sn,qt):W(p[xe],qt,A)))continue e}xt&&xt.push(qt),Qe.push(Lt)}}return Qe}function ac(p,k,A,W){return ea(p,function(re,de,xe){k(W,A(re),de,xe)}),W}function Vl(p,k,A){k=$a(k,p),p=Nt(p,k);var W=p==null?p:p[$n(wo(k))];return W==null?t:ai(W,p,A)}function Ql(p){return Or(p)&&Qr(p)==ve}function Ev(p){return Or(p)&&Qr(p)==wt}function Xl(p){return Or(p)&&Qr(p)==Ee}function Jl(p,k,A,W,re){return p===k?!0:p==null||k==null||!Or(p)&&!Or(k)?p!==p&&k!==k:oh(p,k,A,W,Jl,re)}function oh(p,k,A,W,re,de){var xe=rn(p),Se=rn(k),Oe=xe?ae:xi(p),Qe=Se?ae:xi(k);Oe=Oe==ve?ze:Oe,Qe=Qe==ve?ze:Qe;var Xe=Oe==ze,rt=Qe==ze,xt=Oe==Qe;if(xt&&fu(p)){if(!fu(k))return!1;xe=!0,Xe=!1}if(xt&&!Xe)return de||(de=new ka),xe||kc(p)?df(p,k,A,W,re,de):Ah(p,k,Oe,A,W,re,de);if(!(A&g)){var Lt=Xe&&Xt.call(p,"__wrapped__"),qt=rt&&Xt.call(k,"__wrapped__");if(Lt||qt){var sn=Lt?p.value():p,$t=qt?k.value():k;return de||(de=new ka),re(sn,$t,A,W,de)}}return xt?(de||(de=new ka),Nh(p,k,A,W,re,de)):!1}function sh(p){return Or(p)&&xi(p)==me}function il(p,k,A,W){var re=A.length,de=re,xe=!W;if(p==null)return!de;for(p=xn(p);re--;){var Se=A[re];if(xe&&Se[2]?Se[1]!==p[Se[0]]:!(Se[0]in p))return!1}for(;++re<de;){Se=A[re];var Oe=Se[0],Qe=p[Oe],Xe=Se[1];if(xe&&Se[2]){if(Qe===t&&!(Oe in p))return!1}else{var rt=new ka;if(W)var xt=W(Qe,Xe,Oe,p,k,rt);if(!(xt===t?Jl(Xe,Qe,g|w,W,rt):xt))return!1}}return!0}function eu(p){if(!Mr(p)||Ne(p))return!1;var k=dl(p)?Hu:Fr;return k.test(nr(p))}function Qu(p){return Or(p)&&Qr(p)==Ke}function Xu(p){return Or(p)&&xi(p)==Ge}function lh(p){return Or(p)&&Fh(p.length)&&!!Kn[Qr(p)]}function uh(p){return typeof p=="function"?p:p==null?Ma:typeof p=="object"?rn(p)?Kc(p[0],p[1]):dh(p):Tg(p)}function oc(p){if(!Pe(p))return Yf(p);var k=[];for(var A in xn(p))Xt.call(p,A)&&A!="constructor"&&k.push(A);return k}function _s(p){if(!Mr(p))return dt(p);var k=Pe(p),A=[];for(var W in p)W=="constructor"&&(k||!Xt.call(p,W))||A.push(W);return A}function Ss(p,k){return p<k}function tu(p,k){var A=-1,W=_a(p)?He(p.length):[];return Ji(p,function(re,de,xe){W[++A]=k(re,de,xe)}),W}function dh(p){var k=uu(p);return k.length==1&&k[0][2]?it(k[0][0],k[0][1]):function(A){return A===p||il(A,p,k)}}function Kc(p,k){return ee(p)&&Ze(k)?it($n(p),k):function(A){var W=Pv(A,p);return W===t&&W===k?Hv(A,p):Jl(k,W,g|w)}}function sc(p,k,A,W,re){p!==k&&tc(k,function(de,xe){if(re||(re=new ka),Mr(de))_v(p,k,xe,A,sc,W,re);else{var Se=W?W(Bn(p,xe),de,xe+"",p,k,re):t;Se===t&&(Se=de),Xd(p,xe,Se)}},Sa)}function _v(p,k,A,W,re,de,xe){var Se=Bn(p,A),Oe=Bn(k,A),Qe=xe.get(Oe);if(Qe){Xd(p,A,Qe);return}var Xe=de?de(Se,Oe,A+"",p,k,xe):t,rt=Xe===t;if(rt){var xt=rn(Oe),Lt=!xt&&fu(Oe),qt=!xt&&!Lt&&kc(Oe);Xe=Oe,xt||Lt||qt?rn(Se)?Xe=Se:qr(Se)?Xe=Xr(Se):Lt?(rt=!1,Xe=rf(Oe,!0)):qt?(rt=!1,Xe=mh(Oe,!0)):Xe=[]:hf(Oe)||ld(Oe)?(Xe=Se,ld(Se)?Xe=bg(Se):(!Mr(Se)||dl(Se))&&(Xe=m(Oe))):rt=!1}rt&&(xe.set(Oe,Xe),re(Xe,Oe,W,de,xe),xe.delete(Oe)),Xd(p,A,Xe)}function ch(p,k){var A=p.length;if(!!A)return k+=k<0?A:0,U(k,A)?p[k]:t}function wi(p,k,A){k.length?k=kn(k,function(de){return rn(de)?function(xe){return Es(xe,de.length===1?de[0]:de)}:de}):k=[Ma];var W=-1;k=kn(k,gn(Ot()));var re=tu(p,function(de,xe,Se){var Oe=kn(k,function(Qe){return Qe(de)});return{criteria:Oe,index:++W,value:de}});return at(re,function(de,xe){return bh(de,xe,A)})}function fh(p,k){return hh(p,k,function(A,W){return Hv(p,W)})}function hh(p,k,A){for(var W=-1,re=k.length,de={};++W<re;){var xe=k[W],Se=Es(p,xe);A(Se,xe)&&Lo(de,$a(xe,p),Se)}return de}function Sv(p){return function(k){return Es(k,p)}}function Vc(p,k,A,W){var re=W?Fu:lo,de=-1,xe=k.length,Se=p;for(p===k&&(k=Xr(k)),A&&(Se=kn(p,gn(A)));++de<xe;)for(var Oe=0,Qe=k[de],Xe=A?A(Qe):Qe;(Oe=re(Se,Xe,Oe,W))>-1;)Se!==p&&Ul.call(Se,Oe,1),Ul.call(p,Oe,1);return p}function Qc(p,k){for(var A=p?k.length:0,W=A-1;A--;){var re=k[A];if(A==W||re!==de){var de=re;U(re)?Ul.call(p,re,1):td(p,re)}}return p}function lc(p,k){return p+$l(bs()*(k-p+1))}function vh(p,k,A,W){for(var re=-1,de=mr(ql((k-p)/(A||1)),0),xe=He(de);de--;)xe[W?de:++re]=p,p+=A;return xe}function Xc(p,k){var A="";if(!p||k<1||k>L)return A;do k%2&&(A+=p),k=$l(k/2),k&&(p+=p);while(k);return A}function an(p,k){return Ci(It(p,k,Ma),p+"")}function Mv(p){return Qd(xc(p))}function Ms(p,k){var A=xc(p);return Jr(A,nl(k,0,A.length))}function Lo(p,k,A,W){if(!Mr(p))return p;k=$a(k,p);for(var re=-1,de=k.length,xe=de-1,Se=p;Se!=null&&++re<de;){var Oe=$n(k[re]),Qe=A;if(Oe==="__proto__"||Oe==="constructor"||Oe==="prototype")return p;if(re!=xe){var Xe=Se[Oe];Qe=W?W(Xe,Oe,Se):t,Qe===t&&(Qe=Mr(Xe)?Xe:U(k[re+1])?[]:{})}Yu(Se,Oe,Qe),Se=Se[Oe]}return p}var Ju=po?function(p,k){return po.set(p,k),p}:Ma,ed=Xs?function(p,k){return Xs(p,"toString",{configurable:!0,enumerable:!1,value:Wv(k),writable:!0})}:Ma;function Oo(p){return Jr(xc(p))}function xa(p,k,A){var W=-1,re=p.length;k<0&&(k=-k>re?0:re+k),A=A>re?re:A,A<0&&(A+=re),re=k>A?0:A-k>>>0,k>>>=0;for(var de=He(re);++W<re;)de[W]=p[W+k];return de}function Tv(p,k){var A;return Ji(p,function(W,re,de){return A=k(W,re,de),!A}),!!A}function zo(p,k,A){var W=0,re=p==null?W:p.length;if(typeof k=="number"&&k===k&&re<=j){for(;W<re;){var de=W+re>>>1,xe=p[de];xe!==null&&!Ga(xe)&&(A?xe<=k:xe<k)?W=de+1:re=de}return re}return uc(p,k,Ma,A)}function uc(p,k,A,W){var re=0,de=p==null?0:p.length;if(de===0)return 0;k=A(k);for(var xe=k!==k,Se=k===null,Oe=Ga(k),Qe=k===t;re<de;){var Xe=$l((re+de)/2),rt=A(p[Xe]),xt=rt!==t,Lt=rt===null,qt=rt===rt,sn=Ga(rt);if(xe)var $t=W||qt;else Qe?$t=qt&&(W||xt):Se?$t=qt&&xt&&(W||!Lt):Oe?$t=qt&&xt&&!Lt&&(W||!sn):Lt||sn?$t=!1:$t=W?rt<=k:rt<k;$t?re=Xe+1:de=Xe}return oi(de,Y)}function Jc(p,k){for(var A=-1,W=p.length,re=0,de=[];++A<W;){var xe=p[A],Se=k?k(xe):xe;if(!A||!Bo(Se,Oe)){var Oe=Se;de[re++]=xe===0?0:xe}}return de}function ef(p){return typeof p=="number"?p:Ga(p)?X:+p}function ki(p){if(typeof p=="string")return p;if(rn(p))return kn(p,ki)+"";if(Ga(p))return li?li.call(p):"";var k=p+"";return k=="0"&&1/p==-ie?"-0":k}function ta(p,k,A){var W=-1,re=Ba,de=p.length,xe=!0,Se=[],Oe=Se;if(A)xe=!1,re=Pa;else if(de>=e){var Qe=k?null:ad(p);if(Qe)return Wd(Qe);xe=!1,re=fr,Oe=new di}else Oe=k?[]:Se;e:for(;++W<de;){var Xe=p[W],rt=k?k(Xe):Xe;if(Xe=A||Xe!==0?Xe:0,xe&&rt===rt){for(var xt=Oe.length;xt--;)if(Oe[xt]===rt)continue e;k&&Oe.push(rt),Se.push(Xe)}else re(Oe,rt,A)||(Oe!==Se&&Oe.push(rt),Se.push(Xe))}return Se}function td(p,k){return k=$a(k,p),p=Nt(p,k),p==null||delete p[$n(wo(k))]}function dc(p,k,A,W){return Lo(p,k,A(Es(p,k)),W)}function nu(p,k,A,W){for(var re=p.length,de=W?re:-1;(W?de--:++de<re)&&k(p[de],de,p););return A?xa(p,W?0:de,W?de+1:re):xa(p,W?de+1:0,W?re:de)}function ph(p,k){var A=p;return A instanceof vn&&(A=A.value()),Ir(k,function(W,re){return re.func.apply(re.thisArg,Ha([W],re.args))},A)}function al(p,k,A){var W=p.length;if(W<2)return W?ta(p[0]):[];for(var re=-1,de=He(W);++re<W;)for(var xe=p[re],Se=-1;++Se<W;)Se!=re&&(de[re]=Yl(de[re]||xe,p[Se],k,A));return ta(ci(de,1),k,A)}function tf(p,k,A){for(var W=-1,re=p.length,de=k.length,xe={};++W<re;){var Se=W<de?k[W]:t;A(xe,p[W],Se)}return xe}function nf(p){return qr(p)?p:[]}function cc(p){return typeof p=="function"?p:Ma}function $a(p,k){return rn(p)?p:ee(p,k)?[p]:Wr(Xn(p))}var Av=an;function Ts(p,k,A){var W=p.length;return A=A===t?W:A,!k&&A>=W?p:xa(p,k,A)}var ru=uv||function(p){return ir.clearTimeout(p)};function rf(p,k){if(k)return p.slice();var A=p.length,W=Gf?Gf(A):new p.constructor(A);return p.copy(W),W}function fc(p){var k=new p.constructor(p.byteLength);return new Vs(k).set(new Vs(p)),k}function Nv(p,k){var A=k?fc(p.buffer):p.buffer;return new p.constructor(A,p.byteOffset,p.byteLength)}function af(p){var k=new p.constructor(p.source,xr.exec(p));return k.lastIndex=p.lastIndex,k}function gh(p){return br?xn(br.call(p)):{}}function mh(p,k){var A=k?fc(p.buffer):p.buffer;return new p.constructor(A,p.byteOffset,p.length)}function of(p,k){if(p!==k){var A=p!==t,W=p===null,re=p===p,de=Ga(p),xe=k!==t,Se=k===null,Oe=k===k,Qe=Ga(k);if(!Se&&!Qe&&!de&&p>k||de&&xe&&Oe&&!Se&&!Qe||W&&xe&&Oe||!A&&Oe||!re)return 1;if(!W&&!de&&!Qe&&p<k||Qe&&A&&re&&!W&&!de||Se&&A&&re||!xe&&re||!Oe)return-1}return 0}function bh(p,k,A){for(var W=-1,re=p.criteria,de=k.criteria,xe=re.length,Se=A.length;++W<xe;){var Oe=of(re[W],de[W]);if(Oe){if(W>=Se)return Oe;var Qe=A[W];return Oe*(Qe=="desc"?-1:1)}}return p.index-k.index}function yh(p,k,A,W){for(var re=-1,de=p.length,xe=A.length,Se=-1,Oe=k.length,Qe=mr(de-xe,0),Xe=He(Oe+Qe),rt=!W;++Se<Oe;)Xe[Se]=k[Se];for(;++re<xe;)(rt||re<de)&&(Xe[A[re]]=p[re]);for(;Qe--;)Xe[Se++]=p[re++];return Xe}function hc(p,k,A,W){for(var re=-1,de=p.length,xe=-1,Se=A.length,Oe=-1,Qe=k.length,Xe=mr(de-Se,0),rt=He(Xe+Qe),xt=!W;++re<Xe;)rt[re]=p[re];for(var Lt=re;++Oe<Qe;)rt[Lt+Oe]=k[Oe];for(;++xe<Se;)(xt||re<de)&&(rt[Lt+A[xe]]=p[re++]);return rt}function Xr(p,k){var A=-1,W=p.length;for(k||(k=He(W));++A<W;)k[A]=p[A];return k}function Gi(p,k,A,W){var re=!A;A||(A={});for(var de=-1,xe=k.length;++de<xe;){var Se=k[de],Oe=W?W(A[Se],p[Se],Se,A,p):t;Oe===t&&(Oe=p[Se]),re?bo(A,Se,Oe):Yu(A,Se,Oe)}return A}function Dv(p,k){return Gi(p,cf(p),k)}function wh(p,k){return Gi(p,Dh(p),k)}function vc(p,k){return function(A,W){var re=rn(A)?Ru:qc,de=k?k():{};return re(A,p,Ot(W,2),de)}}function iu(p){return an(function(k,A){var W=-1,re=A.length,de=re>1?A[re-1]:t,xe=re>2?A[2]:t;for(de=p.length>3&&typeof de=="function"?(re--,de):t,xe&&Z(A[0],A[1],xe)&&(de=re<3?t:de,re=1),k=xn(k);++W<re;){var Se=A[W];Se&&p(k,Se,W,de)}return k})}function kh(p,k){return function(A,W){if(A==null)return A;if(!_a(A))return p(A,W);for(var re=A.length,de=k?re:-1,xe=xn(A);(k?de--:++de<re)&&W(xe[de],de,xe)!==!1;);return A}}function xh(p){return function(k,A,W){for(var re=-1,de=xn(k),xe=W(k),Se=xe.length;Se--;){var Oe=xe[p?Se:++re];if(A(de[Oe],Oe,de)===!1)break}return k}}function Ch(p,k,A){var W=k&x,re=ou(p);function de(){var xe=this&&this!==ir&&this instanceof de?re:p;return xe.apply(W?A:this,arguments)}return de}function Eh(p){return function(k){k=Xn(k);var A=Wa(k)?wa(k):t,W=A?A[0]:k.charAt(0),re=A?Ts(A,1).join(""):k.slice(1);return W[p]()+re}}function au(p){return function(k){return Ir(Sg(_g(k).replace(Us,"")),p,"")}}function ou(p){return function(){var k=arguments;switch(k.length){case 0:return new p;case 1:return new p(k[0]);case 2:return new p(k[0],k[1]);case 3:return new p(k[0],k[1],k[2]);case 4:return new p(k[0],k[1],k[2],k[3]);case 5:return new p(k[0],k[1],k[2],k[3],k[4]);case 6:return new p(k[0],k[1],k[2],k[3],k[4],k[5]);case 7:return new p(k[0],k[1],k[2],k[3],k[4],k[5],k[6])}var A=go(p.prototype),W=p.apply(A,k);return Mr(W)?W:A}}function sf(p,k,A){var W=ou(p);function re(){for(var de=arguments.length,xe=He(de),Se=de,Oe=lu(re);Se--;)xe[Se]=arguments[Se];var Qe=de<3&&xe[0]!==Oe&&xe[de-1]!==Oe?[]:ds(xe,Oe);if(de-=Qe.length,de<A)return Mh(p,k,nd,re.placeholder,t,xe,Qe,t,t,A-de);var Xe=this&&this!==ir&&this instanceof re?W:p;return ai(Xe,this,xe)}return re}function lf(p){return function(k,A,W){var re=xn(k);if(!_a(k)){var de=Ot(A,3);k=Mi(k),A=function(Se){return de(re[Se],Se,re)}}var xe=p(k,A,W);return xe>-1?re[de?k[xe]:xe]:t}}function _h(p){return Ro(function(k){var A=k.length,W=A,re=Oi.prototype.thru;for(p&&k.reverse();W--;){var de=k[W];if(typeof de!="function")throw new $i(i);if(re&&!xe&&sd(de)=="wrapper")var xe=new Oi([],!0)}for(W=xe?W:A;++W<A;){de=k[W];var Se=sd(de),Oe=Se=="wrapper"?Mn(de):t;Oe&&ke(Oe[0])&&Oe[1]==(I|M|S|P)&&!Oe[4].length&&Oe[9]==1?xe=xe[sd(Oe[0])].apply(xe,Oe[3]):xe=de.length==1&&ke(de)?xe[Se]():xe.thru(de)}return function(){var Qe=arguments,Xe=Qe[0];if(xe&&Qe.length==1&&rn(Xe))return xe.plant(Xe).value();for(var rt=0,xt=A?k[rt].apply(this,Qe):Xe;++rt<A;)xt=k[rt].call(this,xt);return xt}})}function nd(p,k,A,W,re,de,xe,Se,Oe,Qe){var Xe=k&I,rt=k&x,xt=k&_,Lt=k&(M|T),qt=k&B,sn=xt?t:ou(p);function $t(){for(var mn=arguments.length,Cn=He(mn),Za=mn;Za--;)Cn[Za]=arguments[Za];if(Lt)var na=lu($t),Ya=ya(Cn,na);if(W&&(Cn=yh(Cn,W,re,Lt)),de&&(Cn=hc(Cn,de,xe,Lt)),mn-=Ya,Lt&&mn<Qe){var $r=ds(Cn,na);return Mh(p,k,nd,$t.placeholder,A,Cn,$r,Se,Oe,Qe-mn)}var Po=rt?A:this,fl=xt?Po[p]:p;return mn=Cn.length,Se?Cn=en(Cn,Se):qt&&mn>1&&Cn.reverse(),Xe&&Oe<mn&&(Cn.length=Oe),this&&this!==ir&&this instanceof $t&&(fl=sn||ou(fl)),fl.apply(Po,Cn)}return $t}function ol(p,k){return function(A,W){return ac(A,p,k(W),{})}}function rd(p,k){return function(A,W){var re;if(A===t&&W===t)return k;if(A!==t&&(re=A),W!==t){if(re===t)return W;typeof A=="string"||typeof W=="string"?(A=ki(A),W=ki(W)):(A=ef(A),W=ef(W)),re=p(A,W)}return re}}function su(p){return Ro(function(k){return k=kn(k,gn(Ot())),an(function(A){var W=this;return p(k,function(re){return ai(re,W,A)})})})}function pc(p,k){k=k===t?" ":ki(k);var A=k.length;if(A<2)return A?Xc(k,p):k;var W=Xc(k,ql(p/Ys(k)));return Wa(k)?Ts(wa(W),0,p).join(""):W.slice(0,p)}function Iv(p,k,A,W){var re=k&x,de=ou(p);function xe(){for(var Se=-1,Oe=arguments.length,Qe=-1,Xe=W.length,rt=He(Xe+Oe),xt=this&&this!==ir&&this instanceof xe?de:p;++Qe<Xe;)rt[Qe]=W[Qe];for(;Oe--;)rt[Qe++]=arguments[++Se];return ai(xt,re?A:this,rt)}return xe}function Sh(p){return function(k,A,W){return W&&typeof W!="number"&&Z(k,A,W)&&(A=W=t),k=cl(k),A===t?(A=k,k=0):A=cl(A),W=W===t?k<A?1:-1:cl(W),vh(k,A,W,p)}}function Vn(p){return function(k,A){return typeof k=="string"&&typeof A=="string"||(k=ko(k),A=ko(A)),p(k,A)}}function Mh(p,k,A,W,re,de,xe,Se,Oe,Qe){var Xe=k&M,rt=Xe?xe:t,xt=Xe?t:xe,Lt=Xe?de:t,qt=Xe?t:de;k|=Xe?S:D,k&=~(Xe?D:S),k&E||(k&=~(x|_));var sn=[p,k,re,Lt,rt,qt,xt,Se,Oe,Qe],$t=A.apply(t,sn);return ke(p)&&Lr($t,sn),$t.placeholder=W,Ei($t,p,k)}function id(p){var k=jr[p];return function(A,W){if(A=ko(A),W=W==null?0:oi(on(W),292),W&&Zf(A)){var re=(Xn(A)+"e").split("e"),de=k(re[0]+"e"+(+re[1]+W));return re=(Xn(de)+"e").split("e"),+(re[0]+"e"+(+re[1]-W))}return k(A)}}var ad=el&&1/Wd(new el([,-0]))[1]==ie?function(p){return new el(p)}:$v;function Ca(p){return function(k){var A=xi(k);return A==me?jd(k):A==Ge?Hf(k):Bt(k,p(k))}}function Ea(p,k,A,W,re,de,xe,Se){var Oe=k&_;if(!Oe&&typeof p!="function")throw new $i(i);var Qe=W?W.length:0;if(Qe||(k&=~(S|D),W=re=t),xe=xe===t?xe:mr(on(xe),0),Se=Se===t?Se:on(Se),Qe-=re?re.length:0,k&D){var Xe=W,rt=re;W=re=t}var xt=Oe?t:Mn(p),Lt=[p,k,A,W,re,Xe,rt,de,xe,Se];if(xt&&pt(Lt,xt),p=Lt[0],k=Lt[1],A=Lt[2],W=Lt[3],re=Lt[4],Se=Lt[9]=Lt[9]===t?Oe?0:p.length:mr(Lt[9]-Qe,0),!Se&&k&(M|T)&&(k&=~(M|T)),!k||k==x)var qt=Ch(p,k,A);else k==M||k==T?qt=sf(p,k,Se):(k==S||k==(x|S))&&!re.length?qt=Iv(p,k,A,W):qt=nd.apply(t,Lt);var sn=xt?Ju:Lr;return Ei(sn(qt,Lt),p,k)}function gc(p,k,A,W){return p===t||Bo(p,hs[A])&&!Xt.call(W,A)?k:p}function uf(p,k,A,W,re,de){return Mr(p)&&Mr(k)&&(de.set(k,p),sc(p,k,t,uf,de),de.delete(k)),p}function Th(p){return hf(p)?t:p}function df(p,k,A,W,re,de){var xe=A&g,Se=p.length,Oe=k.length;if(Se!=Oe&&!(xe&&Oe>Se))return!1;var Qe=de.get(p),Xe=de.get(k);if(Qe&&Xe)return Qe==k&&Xe==p;var rt=-1,xt=!0,Lt=A&w?new di:t;for(de.set(p,k),de.set(k,p);++rt<Se;){var qt=p[rt],sn=k[rt];if(W)var $t=xe?W(sn,qt,rt,k,p,de):W(qt,sn,rt,p,k,de);if($t!==t){if($t)continue;xt=!1;break}if(Lt){if(!ja(k,function(mn,Cn){if(!fr(Lt,Cn)&&(qt===mn||re(qt,mn,A,W,de)))return Lt.push(Cn)})){xt=!1;break}}else if(!(qt===sn||re(qt,sn,A,W,de))){xt=!1;break}}return de.delete(p),de.delete(k),xt}function Ah(p,k,A,W,re,de,xe){switch(A){case bt:if(p.byteLength!=k.byteLength||p.byteOffset!=k.byteOffset)return!1;p=p.buffer,k=k.buffer;case wt:return!(p.byteLength!=k.byteLength||!de(new Vs(p),new Vs(k)));case pe:case Ee:case ue:return Bo(+p,+k);case Re:return p.name==k.name&&p.message==k.message;case Ke:case _e:return p==k+"";case me:var Se=jd;case Ge:var Oe=W&g;if(Se||(Se=Wd),p.size!=k.size&&!Oe)return!1;var Qe=xe.get(p);if(Qe)return Qe==k;W|=w,xe.set(p,k);var Xe=df(Se(p),Se(k),W,re,de,xe);return xe.delete(p),Xe;case Ue:if(br)return br.call(p)==br.call(k)}return!1}function Nh(p,k,A,W,re,de){var xe=A&g,Se=od(p),Oe=Se.length,Qe=od(k),Xe=Qe.length;if(Oe!=Xe&&!xe)return!1;for(var rt=Oe;rt--;){var xt=Se[rt];if(!(xe?xt in k:Xt.call(k,xt)))return!1}var Lt=de.get(p),qt=de.get(k);if(Lt&&qt)return Lt==k&&qt==p;var sn=!0;de.set(p,k),de.set(k,p);for(var $t=xe;++rt<Oe;){xt=Se[rt];var mn=p[xt],Cn=k[xt];if(W)var Za=xe?W(Cn,mn,xt,k,p,de):W(mn,Cn,xt,p,k,de);if(!(Za===t?mn===Cn||re(mn,Cn,A,W,de):Za)){sn=!1;break}$t||($t=xt=="constructor")}if(sn&&!$t){var na=p.constructor,Ya=k.constructor;na!=Ya&&"constructor"in p&&"constructor"in k&&!(typeof na=="function"&&na instanceof na&&typeof Ya=="function"&&Ya instanceof Ya)&&(sn=!1)}return de.delete(p),de.delete(k),sn}function Ro(p){return Ci(It(p,t,Xp),p+"")}function od(p){return rl(p,Mi,cf)}function mc(p){return rl(p,Sa,Dh)}var Mn=po?function(p){return po.get(p)}:$v;function sd(p){for(var k=p.name+"",A=Zl[k],W=Xt.call(Zl,k)?A.length:0;W--;){var re=A[W],de=re.func;if(de==null||de==p)return re.name}return k}function lu(p){var k=Xt.call(le,"placeholder")?le:p;return k.placeholder}function Ot(){var p=le.iteratee||Uv;return p=p===Uv?uh:p,arguments.length?p(arguments[0],arguments[1]):p}function bc(p,k){var A=p.__data__;return he(k)?A[typeof k=="string"?"string":"hash"]:A.map}function uu(p){for(var k=Mi(p),A=k.length;A--;){var W=k[A],re=p[W];k[A]=[W,re,Ze(re)]}return k}function sl(p,k){var A=Oc(p,k);return eu(A)?A:t}function Er(p){var k=Xt.call(p,gs),A=p[gs];try{p[gs]=t;var W=!0}catch{}var re=Ks.call(p);return W&&(k?p[gs]=A:delete p[gs]),re}var cf=ms?function(p){return p==null?[]:(p=xn(p),Fa(ms(p),function(k){return Gd.call(p,k)}))}:Gv,Dh=ms?function(p){for(var k=[];p;)Ha(k,cf(p)),p=Wl(p);return k}:Gv,xi=Qr;(ys&&xi(new ys(new ArrayBuffer(1)))!=bt||Gl&&xi(new Gl)!=me||Yd&&xi(Yd.resolve())!=We||el&&xi(new el)!=Ge||$u&&xi(new $u)!=ot)&&(xi=function(p){var k=Qr(p),A=k==ze?p.constructor:t,W=A?nr(A):"";if(W)switch(W){case fv:return bt;case hv:return me;case vv:return We;case pv:return Ge;case gv:return ot}return k});function yc(p,k,A){for(var W=-1,re=A.length;++W<re;){var de=A[W],xe=de.size;switch(de.type){case"drop":p+=xe;break;case"dropRight":k-=xe;break;case"take":k=oi(k,p+xe);break;case"takeRight":p=mr(p,k-xe);break}}return{start:p,end:k}}function s(p){var k=p.match(To);return k?k[1].split(La):[]}function f(p,k,A){k=$a(k,p);for(var W=-1,re=k.length,de=!1;++W<re;){var xe=$n(k[W]);if(!(de=p!=null&&A(p,xe)))break;p=p[xe]}return de||++W!=re?de:(re=p==null?0:p.length,!!re&&Fh(re)&&U(xe,re)&&(rn(p)||ld(p)))}function y(p){var k=p.length,A=new p.constructor(k);return k&&typeof p[0]=="string"&&Xt.call(p,"index")&&(A.index=p.index,A.input=p.input),A}function m(p){return typeof p.constructor=="function"&&!Pe(p)?go(Wl(p)):{}}function C(p,k,A){var W=p.constructor;switch(k){case wt:return fc(p);case pe:case Ee:return new W(+p);case bt:return Nv(p,A);case Et:case Dt:case wn:case zn:case kr:case vt:case bi:case tr:case Tt:return mh(p,A);case me:return new W;case ue:case _e:return new W(p);case Ke:return af(p);case Ge:return new W;case Ue:return gh(p)}}function N(p,k){var A=k.length;if(!A)return p;var W=A-1;return k[W]=(A>1?"& ":"")+k[W],k=k.join(A>2?", ":" "),p.replace(Fs,`{
/* [wrapped with `+k+`] */
`)}function R(p){return rn(p)||ld(p)||!!(Qs&&p&&p[Qs])}function U(p,k){var A=typeof p;return k=k==null?L:k,!!k&&(A=="number"||A!="symbol"&&Vi.test(p))&&p>-1&&p%1==0&&p<k}function Z(p,k,A){if(!Mr(A))return!1;var W=typeof k;return(W=="number"?_a(A)&&U(k,A.length):W=="string"&&k in A)?Bo(A[k],p):!1}function ee(p,k){if(rn(p))return!1;var A=typeof p;return A=="number"||A=="symbol"||A=="boolean"||p==null||Ga(p)?!0:lr.test(p)||!In.test(p)||k!=null&&p in xn(k)}function he(p){var k=typeof p;return k=="string"||k=="number"||k=="symbol"||k=="boolean"?p!=="__proto__":p===null}function ke(p){var k=sd(p),A=le[k];if(typeof A!="function"||!(k in vn.prototype))return!1;if(p===A)return!0;var W=Mn(A);return!!W&&p===W[0]}function Ne(p){return!!Io&&Io in p}var Me=fo?dl:Zv;function Pe(p){var k=p&&p.constructor,A=typeof k=="function"&&k.prototype||hs;return p===A}function Ze(p){return p===p&&!Mr(p)}function it(p,k){return function(A){return A==null?!1:A[p]===k&&(k!==t||p in xn(A))}}function ut(p){var k=zh(p,function(W){return A.size===l&&A.clear(),W}),A=k.cache;return k}function pt(p,k){var A=p[1],W=k[1],re=A|W,de=re<(x|_|I),xe=W==I&&A==M||W==I&&A==P&&p[7].length<=k[8]||W==(I|P)&&k[7].length<=k[8]&&A==M;if(!(de||xe))return p;W&x&&(p[2]=k[2],re|=A&x?0:E);var Se=k[3];if(Se){var Oe=p[3];p[3]=Oe?yh(Oe,Se,k[4]):Se,p[4]=Oe?ds(p[3],c):k[4]}return Se=k[5],Se&&(Oe=p[5],p[5]=Oe?hc(Oe,Se,k[6]):Se,p[6]=Oe?ds(p[5],c):k[6]),Se=k[7],Se&&(p[7]=Se),W&I&&(p[8]=p[8]==null?k[8]:oi(p[8],k[8])),p[9]==null&&(p[9]=k[9]),p[0]=k[0],p[1]=re,p}function dt(p){var k=[];if(p!=null)for(var A in xn(p))k.push(A);return k}function kt(p){return Ks.call(p)}function It(p,k,A){return k=mr(k===t?p.length-1:k,0),function(){for(var W=arguments,re=-1,de=mr(W.length-k,0),xe=He(de);++re<de;)xe[re]=W[k+re];re=-1;for(var Se=He(k+1);++re<k;)Se[re]=W[re];return Se[k]=A(xe),ai(p,this,Se)}}function Nt(p,k){return k.length<2?p:Es(p,xa(k,0,-1))}function en(p,k){for(var A=p.length,W=oi(k.length,A),re=Xr(p);W--;){var de=k[W];p[W]=U(de,A)?re[de]:t}return p}function Bn(p,k){if(!(k==="constructor"&&typeof p[k]=="function")&&k!="__proto__")return p[k]}var Lr=_r(Ju),Qn=cv||function(p,k){return ir.setTimeout(p,k)},Ci=_r(ed);function Ei(p,k,A){var W=k+"";return Ci(p,N(W,yr(s(W),A)))}function _r(p){var k=0,A=0;return function(){var W=Js(),re=H-(W-A);if(A=W,re>0){if(++k>=G)return arguments[0]}else k=0;return p.apply(t,arguments)}}function Jr(p,k){var A=-1,W=p.length,re=W-1;for(k=k===t?W:k;++A<k;){var de=lc(A,re),xe=p[de];p[de]=p[A],p[A]=xe}return p.length=k,p}var Wr=ut(function(p){var k=[];return p.charCodeAt(0)===46&&k.push(""),p.replace(yi,function(A,W,re,de){k.push(re?de.replace(va,"$1"):W||A)}),k});function $n(p){if(typeof p=="string"||Ga(p))return p;var k=p+"";return k=="0"&&1/p==-ie?"-0":k}function nr(p){if(p!=null){try{return ho.call(p)}catch{}try{return p+""}catch{}}return""}function yr(p,k){return ar(fe,function(A){var W="_."+A[0];k&A[1]&&!Ba(p,W)&&p.push(W)}),p.sort()}function _i(p){if(p instanceof vn)return p.clone();var k=new Oi(p.__wrapped__,p.__chain__);return k.__actions__=Xr(p.__actions__),k.__index__=p.__index__,k.__values__=p.__values__,k}function du(p,k,A){(A?Z(p,k,A):k===t)?k=1:k=mr(on(k),0);var W=p==null?0:p.length;if(!W||k<1)return[];for(var re=0,de=0,xe=He(ql(W/k));re<W;)xe[de++]=xa(p,re,re+=k);return xe}function As(p){for(var k=-1,A=p==null?0:p.length,W=0,re=[];++k<A;){var de=p[k];de&&(re[W++]=de)}return re}function fi(){var p=arguments.length;if(!p)return[];for(var k=He(p-1),A=arguments[0],W=p;W--;)k[W-1]=arguments[W];return Ha(rn(A)?Xr(A):[A],ci(k,1))}var yo=an(function(p,k){return qr(p)?Yl(p,ci(k,1,qr,!0)):[]}),Ur=an(function(p,k){var A=wo(k);return qr(A)&&(A=t),qr(p)?Yl(p,ci(k,1,qr,!0),Ot(A,2)):[]}),ff=an(function(p,k){var A=wo(k);return qr(A)&&(A=t),qr(p)?Yl(p,ci(k,1,qr,!0),t,A):[]});function Fo(p,k,A){var W=p==null?0:p.length;return W?(k=A||k===t?1:on(k),xa(p,k<0?0:k,W)):[]}function ll(p,k,A){var W=p==null?0:p.length;return W?(k=A||k===t?1:on(k),k=W-k,xa(p,0,k<0?0:k)):[]}function ul(p,k){return p&&p.length?nu(p,Ot(k,3),!0,!0):[]}function Si(p,k){return p&&p.length?nu(p,Ot(k,3),!0):[]}function cu(p,k,A,W){var re=p==null?0:p.length;return re?(A&&typeof A!="number"&&Z(p,k,A)&&(A=0,W=re),Zc(p,k,A,W)):[]}function wc(p,k,A){var W=p==null?0:p.length;if(!W)return-1;var re=A==null?0:on(A);return re<0&&(re=mr(W+re,0)),Zs(p,Ot(k,3),re)}function Qp(p,k,A){var W=p==null?0:p.length;if(!W)return-1;var re=W-1;return A!==t&&(re=on(A),re=A<0?mr(W+re,0):oi(re,W-1)),Zs(p,Ot(k,3),re,!0)}function Xp(p){var k=p==null?0:p.length;return k?ci(p,1):[]}function F0(p){var k=p==null?0:p.length;return k?ci(p,ie):[]}function B0(p,k){var A=p==null?0:p.length;return A?(k=k===t?1:on(k),ci(p,k)):[]}function P0(p){for(var k=-1,A=p==null?0:p.length,W={};++k<A;){var re=p[k];W[re[0]]=re[1]}return W}function Jp(p){return p&&p.length?p[0]:t}function H0(p,k,A){var W=p==null?0:p.length;if(!W)return-1;var re=A==null?0:on(A);return re<0&&(re=mr(W+re,0)),lo(p,k,re)}function j0(p){var k=p==null?0:p.length;return k?xa(p,0,-1):[]}var W0=an(function(p){var k=kn(p,nf);return k.length&&k[0]===p[0]?ic(k):[]}),U0=an(function(p){var k=wo(p),A=kn(p,nf);return k===wo(A)?k=t:A.pop(),A.length&&A[0]===p[0]?ic(A,Ot(k,2)):[]}),q0=an(function(p){var k=wo(p),A=kn(p,nf);return k=typeof k=="function"?k:t,k&&A.pop(),A.length&&A[0]===p[0]?ic(A,t,k):[]});function $0(p,k){return p==null?"":Zd.call(p,k)}function wo(p){var k=p==null?0:p.length;return k?p[k-1]:t}function G0(p,k,A){var W=p==null?0:p.length;if(!W)return-1;var re=W;return A!==t&&(re=on(A),re=re<0?mr(W+re,0):oi(re,W-1)),k===k?Pu(p,k,re):Zs(p,K,re,!0)}function Z0(p,k){return p&&p.length?ch(p,on(k)):t}var Y0=an(eg);function eg(p,k){return p&&p.length&&k&&k.length?Vc(p,k):p}function K0(p,k,A){return p&&p.length&&k&&k.length?Vc(p,k,Ot(A,2)):p}function V0(p,k,A){return p&&p.length&&k&&k.length?Vc(p,k,t,A):p}var Q0=Ro(function(p,k){var A=p==null?0:p.length,W=Gc(p,k);return Qc(p,kn(k,function(re){return U(re,A)?+re:re}).sort(of)),W});function X0(p,k){var A=[];if(!(p&&p.length))return A;var W=-1,re=[],de=p.length;for(k=Ot(k,3);++W<de;){var xe=p[W];k(xe,W,p)&&(A.push(xe),re.push(W))}return Qc(p,re),A}function Lv(p){return p==null?p:qu.call(p)}function J0(p,k,A){var W=p==null?0:p.length;return W?(A&&typeof A!="number"&&Z(p,k,A)?(k=0,A=W):(k=k==null?0:on(k),A=A===t?W:on(A)),xa(p,k,A)):[]}function eb(p,k){return zo(p,k)}function tb(p,k,A){return uc(p,k,Ot(A,2))}function nb(p,k){var A=p==null?0:p.length;if(A){var W=zo(p,k);if(W<A&&Bo(p[W],k))return W}return-1}function rb(p,k){return zo(p,k,!0)}function ib(p,k,A){return uc(p,k,Ot(A,2),!0)}function ab(p,k){var A=p==null?0:p.length;if(A){var W=zo(p,k,!0)-1;if(Bo(p[W],k))return W}return-1}function ob(p){return p&&p.length?Jc(p):[]}function sb(p,k){return p&&p.length?Jc(p,Ot(k,2)):[]}function lb(p){var k=p==null?0:p.length;return k?xa(p,1,k):[]}function ub(p,k,A){return p&&p.length?(k=A||k===t?1:on(k),xa(p,0,k<0?0:k)):[]}function db(p,k,A){var W=p==null?0:p.length;return W?(k=A||k===t?1:on(k),k=W-k,xa(p,k<0?0:k,W)):[]}function cb(p,k){return p&&p.length?nu(p,Ot(k,3),!1,!0):[]}function fb(p,k){return p&&p.length?nu(p,Ot(k,3)):[]}var hb=an(function(p){return ta(ci(p,1,qr,!0))}),vb=an(function(p){var k=wo(p);return qr(k)&&(k=t),ta(ci(p,1,qr,!0),Ot(k,2))}),pb=an(function(p){var k=wo(p);return k=typeof k=="function"?k:t,ta(ci(p,1,qr,!0),t,k)});function gb(p){return p&&p.length?ta(p):[]}function mb(p,k){return p&&p.length?ta(p,Ot(k,2)):[]}function bb(p,k){return k=typeof k=="function"?k:t,p&&p.length?ta(p,t,k):[]}function Ov(p){if(!(p&&p.length))return[];var k=0;return p=Fa(p,function(A){if(qr(A))return k=mr(A.length,k),!0}),Zt(k,function(A){return kn(p,be(A))})}function tg(p,k){if(!(p&&p.length))return[];var A=Ov(p);return k==null?A:kn(A,function(W){return ai(k,t,W)})}var yb=an(function(p,k){return qr(p)?Yl(p,k):[]}),wb=an(function(p){return al(Fa(p,qr))}),kb=an(function(p){var k=wo(p);return qr(k)&&(k=t),al(Fa(p,qr),Ot(k,2))}),xb=an(function(p){var k=wo(p);return k=typeof k=="function"?k:t,al(Fa(p,qr),t,k)}),Cb=an(Ov);function Eb(p,k){return tf(p||[],k||[],Yu)}function _b(p,k){return tf(p||[],k||[],Lo)}var Sb=an(function(p){var k=p.length,A=k>1?p[k-1]:t;return A=typeof A=="function"?(p.pop(),A):t,tg(p,A)});function ng(p){var k=le(p);return k.__chain__=!0,k}function Mb(p,k){return k(p),p}function Ih(p,k){return k(p)}var Tb=Ro(function(p){var k=p.length,A=k?p[0]:0,W=this.__wrapped__,re=function(de){return Gc(de,p)};return k>1||this.__actions__.length||!(W instanceof vn)||!U(A)?this.thru(re):(W=W.slice(A,+A+(k?1:0)),W.__actions__.push({func:Ih,args:[re],thisArg:t}),new Oi(W,this.__chain__).thru(function(de){return k&&!de.length&&de.push(t),de}))});function Ab(){return ng(this)}function Nb(){return new Oi(this.value(),this.__chain__)}function Db(){this.__values__===t&&(this.__values__=gg(this.value()));var p=this.__index__>=this.__values__.length,k=p?t:this.__values__[this.__index__++];return{done:p,value:k}}function Ib(){return this}function Lb(p){for(var k,A=this;A instanceof Kd;){var W=_i(A);W.__index__=0,W.__values__=t,k?re.__wrapped__=W:k=W;var re=W;A=A.__wrapped__}return re.__wrapped__=p,k}function Ob(){var p=this.__wrapped__;if(p instanceof vn){var k=p;return this.__actions__.length&&(k=new vn(this)),k=k.reverse(),k.__actions__.push({func:Ih,args:[Lv],thisArg:t}),new Oi(k,this.__chain__)}return this.thru(Lv)}function zb(){return ph(this.__wrapped__,this.__actions__)}var Rb=vc(function(p,k,A){Xt.call(p,A)?++p[A]:bo(p,A,1)});function Fb(p,k,A){var W=rn(p)?Gs:ec;return A&&Z(p,k,A)&&(k=t),W(p,Ot(k,3))}function Bb(p,k){var A=rn(p)?Fa:Yc;return A(p,Ot(k,3))}var Pb=lf(wc),Hb=lf(Qp);function jb(p,k){return ci(Lh(p,k),1)}function Wb(p,k){return ci(Lh(p,k),ie)}function Ub(p,k,A){return A=A===t?1:on(A),ci(Lh(p,k),A)}function rg(p,k){var A=rn(p)?ar:Ji;return A(p,Ot(k,3))}function ig(p,k){var A=rn(p)?Lc:Jd;return A(p,Ot(k,3))}var qb=vc(function(p,k,A){Xt.call(p,A)?p[A].push(k):bo(p,A,[k])});function $b(p,k,A,W){p=_a(p)?p:xc(p),A=A&&!W?on(A):0;var re=p.length;return A<0&&(A=mr(re+A,0)),Bh(p)?A<=re&&p.indexOf(k,A)>-1:!!re&&lo(p,k,A)>-1}var Gb=an(function(p,k,A){var W=-1,re=typeof k=="function",de=_a(p)?He(p.length):[];return Ji(p,function(xe){de[++W]=re?ai(k,xe,A):Vl(xe,k,A)}),de}),Zb=vc(function(p,k,A){bo(p,A,k)});function Lh(p,k){var A=rn(p)?kn:tu;return A(p,Ot(k,3))}function Yb(p,k,A,W){return p==null?[]:(rn(k)||(k=k==null?[]:[k]),A=W?t:A,rn(A)||(A=A==null?[]:[A]),wi(p,k,A))}var Kb=vc(function(p,k,A){p[A?0:1].push(k)},function(){return[[],[]]});function Vb(p,k,A){var W=rn(p)?Ir:tt,re=arguments.length<3;return W(p,Ot(k,4),A,re,Ji)}function Qb(p,k,A){var W=rn(p)?us:tt,re=arguments.length<3;return W(p,Ot(k,4),A,re,Jd)}function Xb(p,k){var A=rn(p)?Fa:Yc;return A(p,Rh(Ot(k,3)))}function Jb(p){var k=rn(p)?Qd:Mv;return k(p)}function ey(p,k,A){(A?Z(p,k,A):k===t)?k=1:k=on(k);var W=rn(p)?Cs:Ms;return W(p,k)}function ty(p){var k=rn(p)?eh:Oo;return k(p)}function ny(p){if(p==null)return 0;if(_a(p))return Bh(p)?Ys(p):p.length;var k=xi(p);return k==me||k==Ge?p.size:oc(p).length}function ry(p,k,A){var W=rn(p)?ja:Tv;return A&&Z(p,k,A)&&(k=t),W(p,Ot(k,3))}var iy=an(function(p,k){if(p==null)return[];var A=k.length;return A>1&&Z(p,k[0],k[1])?k=[]:A>2&&Z(k[0],k[1],k[2])&&(k=[k[0]]),wi(p,ci(k,1),[])}),Oh=dv||function(){return ir.Date.now()};function ay(p,k){if(typeof k!="function")throw new $i(i);return p=on(p),function(){if(--p<1)return k.apply(this,arguments)}}function ag(p,k,A){return k=A?t:k,k=p&&k==null?p.length:k,Ea(p,I,t,t,t,t,k)}function og(p,k){var A;if(typeof k!="function")throw new $i(i);return p=on(p),function(){return--p>0&&(A=k.apply(this,arguments)),p<=1&&(k=t),A}}var zv=an(function(p,k,A){var W=x;if(A.length){var re=ds(A,lu(zv));W|=S}return Ea(p,W,k,A,re)}),sg=an(function(p,k,A){var W=x|_;if(A.length){var re=ds(A,lu(sg));W|=S}return Ea(k,W,p,A,re)});function lg(p,k,A){k=A?t:k;var W=Ea(p,M,t,t,t,t,t,k);return W.placeholder=lg.placeholder,W}function ug(p,k,A){k=A?t:k;var W=Ea(p,T,t,t,t,t,t,k);return W.placeholder=ug.placeholder,W}function dg(p,k,A){var W,re,de,xe,Se,Oe,Qe=0,Xe=!1,rt=!1,xt=!0;if(typeof p!="function")throw new $i(i);k=ko(k)||0,Mr(A)&&(Xe=!!A.leading,rt="maxWait"in A,de=rt?mr(ko(A.maxWait)||0,k):de,xt="trailing"in A?!!A.trailing:xt);function Lt($r){var Po=W,fl=re;return W=re=t,Qe=$r,xe=p.apply(fl,Po),xe}function qt($r){return Qe=$r,Se=Qn(mn,k),Xe?Lt($r):xe}function sn($r){var Po=$r-Oe,fl=$r-Qe,Ag=k-Po;return rt?oi(Ag,de-fl):Ag}function $t($r){var Po=$r-Oe,fl=$r-Qe;return Oe===t||Po>=k||Po<0||rt&&fl>=de}function mn(){var $r=Oh();if($t($r))return Cn($r);Se=Qn(mn,sn($r))}function Cn($r){return Se=t,xt&&W?Lt($r):(W=re=t,xe)}function Za(){Se!==t&&ru(Se),Qe=0,W=Oe=re=Se=t}function na(){return Se===t?xe:Cn(Oh())}function Ya(){var $r=Oh(),Po=$t($r);if(W=arguments,re=this,Oe=$r,Po){if(Se===t)return qt(Oe);if(rt)return ru(Se),Se=Qn(mn,k),Lt(Oe)}return Se===t&&(Se=Qn(mn,k)),xe}return Ya.cancel=Za,Ya.flush=na,Ya}var oy=an(function(p,k){return rh(p,1,k)}),sy=an(function(p,k,A){return rh(p,ko(k)||0,A)});function ly(p){return Ea(p,B)}function zh(p,k){if(typeof p!="function"||k!=null&&typeof k!="function")throw new $i(i);var A=function(){var W=arguments,re=k?k.apply(this,W):W[0],de=A.cache;if(de.has(re))return de.get(re);var xe=p.apply(this,W);return A.cache=de.set(re,xe)||de,xe};return A.cache=new(zh.Cache||ui),A}zh.Cache=ui;function Rh(p){if(typeof p!="function")throw new $i(i);return function(){var k=arguments;switch(k.length){case 0:return!p.call(this);case 1:return!p.call(this,k[0]);case 2:return!p.call(this,k[0],k[1]);case 3:return!p.call(this,k[0],k[1],k[2])}return!p.apply(this,k)}}function uy(p){return og(2,p)}var dy=Av(function(p,k){k=k.length==1&&rn(k[0])?kn(k[0],gn(Ot())):kn(ci(k,1),gn(Ot()));var A=k.length;return an(function(W){for(var re=-1,de=oi(W.length,A);++re<de;)W[re]=k[re].call(this,W[re]);return ai(p,this,W)})}),Rv=an(function(p,k){var A=ds(k,lu(Rv));return Ea(p,S,t,k,A)}),cg=an(function(p,k){var A=ds(k,lu(cg));return Ea(p,D,t,k,A)}),cy=Ro(function(p,k){return Ea(p,P,t,t,t,k)});function fy(p,k){if(typeof p!="function")throw new $i(i);return k=k===t?k:on(k),an(p,k)}function hy(p,k){if(typeof p!="function")throw new $i(i);return k=k==null?0:mr(on(k),0),an(function(A){var W=A[k],re=Ts(A,0,k);return W&&Ha(re,W),ai(p,this,re)})}function vy(p,k,A){var W=!0,re=!0;if(typeof p!="function")throw new $i(i);return Mr(A)&&(W="leading"in A?!!A.leading:W,re="trailing"in A?!!A.trailing:re),dg(p,k,{leading:W,maxWait:k,trailing:re})}function py(p){return ag(p,1)}function gy(p,k){return Rv(cc(k),p)}function my(){if(!arguments.length)return[];var p=arguments[0];return rn(p)?p:[p]}function by(p){return zi(p,h)}function yy(p,k){return k=typeof k=="function"?k:t,zi(p,h,k)}function wy(p){return zi(p,d|h)}function ky(p,k){return k=typeof k=="function"?k:t,zi(p,d|h,k)}function xy(p,k){return k==null||nh(p,k,Mi(k))}function Bo(p,k){return p===k||p!==p&&k!==k}var Cy=Vn(rc),Ey=Vn(function(p,k){return p>=k}),ld=Ql(function(){return arguments}())?Ql:function(p){return Or(p)&&Xt.call(p,"callee")&&!Gd.call(p,"callee")},rn=He.isArray,_y=$s?gn($s):Ev;function _a(p){return p!=null&&Fh(p.length)&&!dl(p)}function qr(p){return Or(p)&&_a(p)}function Sy(p){return p===!0||p===!1||Or(p)&&Qr(p)==pe}var fu=Wu||Zv,My=Ou?gn(Ou):Xl;function Ty(p){return Or(p)&&p.nodeType===1&&!hf(p)}function Ay(p){if(p==null)return!0;if(_a(p)&&(rn(p)||typeof p=="string"||typeof p.splice=="function"||fu(p)||kc(p)||ld(p)))return!p.length;var k=xi(p);if(k==me||k==Ge)return!p.size;if(Pe(p))return!oc(p).length;for(var A in p)if(Xt.call(p,A))return!1;return!0}function Ny(p,k){return Jl(p,k)}function Dy(p,k,A){A=typeof A=="function"?A:t;var W=A?A(p,k):t;return W===t?Jl(p,k,t,A):!!W}function Fv(p){if(!Or(p))return!1;var k=Qr(p);return k==Re||k==Le||typeof p.message=="string"&&typeof p.name=="string"&&!hf(p)}function Iy(p){return typeof p=="number"&&Zf(p)}function dl(p){if(!Mr(p))return!1;var k=Qr(p);return k==Ce||k==ne||k==J||k==et}function fg(p){return typeof p=="number"&&p==on(p)}function Fh(p){return typeof p=="number"&&p>-1&&p%1==0&&p<=L}function Mr(p){var k=typeof p;return p!=null&&(k=="object"||k=="function")}function Or(p){return p!=null&&typeof p=="object"}var hg=zu?gn(zu):sh;function Ly(p,k){return p===k||il(p,k,uu(k))}function Oy(p,k,A){return A=typeof A=="function"?A:t,il(p,k,uu(k),A)}function zy(p){return vg(p)&&p!=+p}function Ry(p){if(Me(p))throw new Vt(r);return eu(p)}function Fy(p){return p===null}function By(p){return p==null}function vg(p){return typeof p=="number"||Or(p)&&Qr(p)==ue}function hf(p){if(!Or(p)||Qr(p)!=ze)return!1;var k=Wl(p);if(k===null)return!0;var A=Xt.call(k,"constructor")&&k.constructor;return typeof A=="function"&&A instanceof A&&ho.call(A)==lv}var Bv=oo?gn(oo):Qu;function Py(p){return fg(p)&&p>=-L&&p<=L}var pg=Fl?gn(Fl):Xu;function Bh(p){return typeof p=="string"||!rn(p)&&Or(p)&&Qr(p)==_e}function Ga(p){return typeof p=="symbol"||Or(p)&&Qr(p)==Ue}var kc=ma?gn(ma):lh;function Hy(p){return p===t}function jy(p){return Or(p)&&xi(p)==ot}function Wy(p){return Or(p)&&Qr(p)==nt}var Uy=Vn(Ss),qy=Vn(function(p,k){return p<=k});function gg(p){if(!p)return[];if(_a(p))return Bh(p)?wa(p):Xr(p);if(ps&&p[ps])return Bf(p[ps]());var k=xi(p),A=k==me?jd:k==Ge?Wd:xc;return A(p)}function cl(p){if(!p)return p===0?p:0;if(p=ko(p),p===ie||p===-ie){var k=p<0?-1:1;return k*F}return p===p?p:0}function on(p){var k=cl(p),A=k%1;return k===k?A?k-A:k:0}function mg(p){return p?nl(on(p),0,se):0}function ko(p){if(typeof p=="number")return p;if(Ga(p))return X;if(Mr(p)){var k=typeof p.valueOf=="function"?p.valueOf():p;p=Mr(k)?k+"":k}if(typeof p!="string")return p===0?p:+p;p=nn(p);var A=Nr.test(p);return A||Br.test(p)?No(p.slice(2),A?2:8):Ki.test(p)?X:+p}function bg(p){return Gi(p,Sa(p))}function $y(p){return p?nl(on(p),-L,L):p===0?p:0}function Xn(p){return p==null?"":ki(p)}var Gy=iu(function(p,k){if(Pe(k)||_a(k)){Gi(k,Mi(k),p);return}for(var A in k)Xt.call(k,A)&&Yu(p,A,k[A])}),yg=iu(function(p,k){Gi(k,Sa(k),p)}),Ph=iu(function(p,k,A,W){Gi(k,Sa(k),p,W)}),Zy=iu(function(p,k,A,W){Gi(k,Mi(k),p,W)}),Yy=Ro(Gc);function Ky(p,k){var A=go(p);return k==null?A:$c(A,k)}var Vy=an(function(p,k){p=xn(p);var A=-1,W=k.length,re=W>2?k[2]:t;for(re&&Z(k[0],k[1],re)&&(W=1);++A<W;)for(var de=k[A],xe=Sa(de),Se=-1,Oe=xe.length;++Se<Oe;){var Qe=xe[Se],Xe=p[Qe];(Xe===t||Bo(Xe,hs[Qe])&&!Xt.call(p,Qe))&&(p[Qe]=de[Qe])}return p}),Qy=an(function(p){return p.push(t,uf),ai(wg,t,p)});function Xy(p,k){return so(p,Ot(k,3),ea)}function Jy(p,k){return so(p,Ot(k,3),nc)}function ew(p,k){return p==null?p:tc(p,Ot(k,3),Sa)}function tw(p,k){return p==null?p:Vr(p,Ot(k,3),Sa)}function nw(p,k){return p&&ea(p,Ot(k,3))}function rw(p,k){return p&&nc(p,Ot(k,3))}function iw(p){return p==null?[]:Vu(p,Mi(p))}function aw(p){return p==null?[]:Vu(p,Sa(p))}function Pv(p,k,A){var W=p==null?t:Es(p,k);return W===t?A:W}function ow(p,k){return p!=null&&f(p,k,ih)}function Hv(p,k){return p!=null&&f(p,k,ah)}var sw=ol(function(p,k,A){k!=null&&typeof k.toString!="function"&&(k=Ks.call(k)),p[k]=A},Wv(Ma)),lw=ol(function(p,k,A){k!=null&&typeof k.toString!="function"&&(k=Ks.call(k)),Xt.call(p,k)?p[k].push(A):p[k]=[A]},Ot),uw=an(Vl);function Mi(p){return _a(p)?Uc(p):oc(p)}function Sa(p){return _a(p)?Uc(p,!0):_s(p)}function dw(p,k){var A={};return k=Ot(k,3),ea(p,function(W,re,de){bo(A,k(W,re,de),W)}),A}function cw(p,k){var A={};return k=Ot(k,3),ea(p,function(W,re,de){bo(A,re,k(W,re,de))}),A}var fw=iu(function(p,k,A){sc(p,k,A)}),wg=iu(function(p,k,A,W){sc(p,k,A,W)}),hw=Ro(function(p,k){var A={};if(p==null)return A;var W=!1;k=kn(k,function(de){return de=$a(de,p),W||(W=de.length>1),de}),Gi(p,mc(p),A),W&&(A=zi(A,d|v|h,Th));for(var re=k.length;re--;)td(A,k[re]);return A});function vw(p,k){return kg(p,Rh(Ot(k)))}var pw=Ro(function(p,k){return p==null?{}:fh(p,k)});function kg(p,k){if(p==null)return{};var A=kn(mc(p),function(W){return[W]});return k=Ot(k),hh(p,A,function(W,re){return k(W,re[0])})}function gw(p,k,A){k=$a(k,p);var W=-1,re=k.length;for(re||(re=1,p=t);++W<re;){var de=p==null?t:p[$n(k[W])];de===t&&(W=re,de=A),p=dl(de)?de.call(p):de}return p}function mw(p,k,A){return p==null?p:Lo(p,k,A)}function bw(p,k,A,W){return W=typeof W=="function"?W:t,p==null?p:Lo(p,k,A,W)}var xg=Ca(Mi),Cg=Ca(Sa);function yw(p,k,A){var W=rn(p),re=W||fu(p)||kc(p);if(k=Ot(k,4),A==null){var de=p&&p.constructor;re?A=W?new de:[]:Mr(p)?A=dl(de)?go(Wl(p)):{}:A={}}return(re?ar:ea)(p,function(xe,Se,Oe){return k(A,xe,Se,Oe)}),A}function ww(p,k){return p==null?!0:td(p,k)}function kw(p,k,A){return p==null?p:dc(p,k,cc(A))}function xw(p,k,A,W){return W=typeof W=="function"?W:t,p==null?p:dc(p,k,cc(A),W)}function xc(p){return p==null?[]:Ii(p,Mi(p))}function Cw(p){return p==null?[]:Ii(p,Sa(p))}function Ew(p,k,A){return A===t&&(A=k,k=t),A!==t&&(A=ko(A),A=A===A?A:0),k!==t&&(k=ko(k),k=k===k?k:0),nl(ko(p),k,A)}function _w(p,k,A){return k=cl(k),A===t?(A=k,k=0):A=cl(A),p=ko(p),Kl(p,k,A)}function Sw(p,k,A){if(A&&typeof A!="boolean"&&Z(p,k,A)&&(k=A=t),A===t&&(typeof k=="boolean"?(A=k,k=t):typeof p=="boolean"&&(A=p,p=t)),p===t&&k===t?(p=0,k=1):(p=cl(p),k===t?(k=p,p=0):k=cl(k)),p>k){var W=p;p=k,k=W}if(A||p%1||k%1){var re=bs();return oi(p+re*(k-p+Ui("1e-"+((re+"").length-1))),k)}return lc(p,k)}var Mw=au(function(p,k,A){return k=k.toLowerCase(),p+(A?Eg(k):k)});function Eg(p){return jv(Xn(p).toLowerCase())}function _g(p){return p=Xn(p),p&&p.replace(pa,Pl).replace(Nu,"")}function Tw(p,k,A){p=Xn(p),k=ki(k);var W=p.length;A=A===t?W:nl(on(A),0,W);var re=A;return A-=k.length,A>=0&&p.slice(A,re)==k}function Aw(p){return p=Xn(p),p&&Zr.test(p)?p.replace(dr,Bu):p}function Nw(p){return p=Xn(p),p&&Yr.test(p)?p.replace(Ni,"\\$&"):p}var Dw=au(function(p,k,A){return p+(A?"-":"")+k.toLowerCase()}),Iw=au(function(p,k,A){return p+(A?" ":"")+k.toLowerCase()}),Lw=Eh("toLowerCase");function Ow(p,k,A){p=Xn(p),k=on(k);var W=k?Ys(p):0;if(!k||W>=k)return p;var re=(k-W)/2;return pc($l(re),A)+p+pc(ql(re),A)}function zw(p,k,A){p=Xn(p),k=on(k);var W=k?Ys(p):0;return k&&W<k?p+pc(k-W,A):p}function Rw(p,k,A){p=Xn(p),k=on(k);var W=k?Ys(p):0;return k&&W<k?pc(k-W,A)+p:p}function Fw(p,k,A){return A||k==null?k=0:k&&(k=+k),Uu(Xn(p).replace(ri,""),k||0)}function Bw(p,k,A){return(A?Z(p,k,A):k===t)?k=1:k=on(k),Xc(Xn(p),k)}function Pw(){var p=arguments,k=Xn(p[0]);return p.length<3?k:k.replace(p[1],p[2])}var Hw=au(function(p,k,A){return p+(A?"_":"")+k.toLowerCase()});function jw(p,k,A){return A&&typeof A!="number"&&Z(p,k,A)&&(k=A=t),A=A===t?se:A>>>0,A?(p=Xn(p),p&&(typeof k=="string"||k!=null&&!Bv(k))&&(k=ki(k),!k&&Wa(p))?Ts(wa(p),0,A):p.split(k,A)):[]}var Ww=au(function(p,k,A){return p+(A?" ":"")+jv(k)});function Uw(p,k,A){return p=Xn(p),A=A==null?0:nl(on(A),0,p.length),k=ki(k),p.slice(A,A+k.length)==k}function qw(p,k,A){var W=le.templateSettings;A&&Z(p,k,A)&&(k=t),p=Xn(p),k=Ph({},k,W,gc);var re=Ph({},k.imports,W.imports,gc),de=Mi(re),xe=Ii(re,de),Se,Oe,Qe=0,Xe=k.interpolate||Fn,rt="__p += '",xt=fs((k.escape||Fn).source+"|"+Xe.source+"|"+(Xe===Ut?cr:Fn).source+"|"+(k.evaluate||Fn).source+"|$","g"),Lt="//# sourceURL="+(Xt.call(k,"sourceURL")?(k.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Iu+"]")+`
`;p.replace(xt,function($t,mn,Cn,Za,na,Ya){return Cn||(Cn=Za),rt+=p.slice(Qe,Ya).replace(Ct,Hd),mn&&(Se=!0,rt+=`' +
__e(`+mn+`) +
'`),na&&(Oe=!0,rt+=`';
`+na+`;
__p += '`),Cn&&(rt+=`' +
((__t = (`+Cn+`)) == null ? '' : __t) +
'`),Qe=Ya+$t.length,$t}),rt+=`';
`;var qt=Xt.call(k,"variable")&&k.variable;if(!qt)rt=`with (obj) {
`+rt+`
}
`;else if(Zn.test(qt))throw new Vt(a);rt=(Oe?rt.replace(Dn,""):rt).replace(Rn,"$1").replace(pn,"$1;"),rt="function("+(qt||"obj")+`) {
`+(qt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Se?", __e = _.escape":"")+(Oe?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+rt+`return __p
}`;var sn=Mg(function(){return Ln(de,Lt+"return "+rt).apply(t,xe)});if(sn.source=rt,Fv(sn))throw sn;return sn}function $w(p){return Xn(p).toLowerCase()}function Gw(p){return Xn(p).toUpperCase()}function Zw(p,k,A){if(p=Xn(p),p&&(A||k===t))return nn(p);if(!p||!(k=ki(k)))return p;var W=wa(p),re=wa(k),de=Li(W,re),xe=uo(W,re)+1;return Ts(W,de,xe).join("")}function Yw(p,k,A){if(p=Xn(p),p&&(A||k===t))return p.slice(0,Ud(p)+1);if(!p||!(k=ki(k)))return p;var W=wa(p),re=uo(W,wa(k))+1;return Ts(W,0,re).join("")}function Kw(p,k,A){if(p=Xn(p),p&&(A||k===t))return p.replace(ri,"");if(!p||!(k=ki(k)))return p;var W=wa(p),re=Li(W,wa(k));return Ts(W,re).join("")}function Vw(p,k){var A=$,W=q;if(Mr(k)){var re="separator"in k?k.separator:re;A="length"in k?on(k.length):A,W="omission"in k?ki(k.omission):W}p=Xn(p);var de=p.length;if(Wa(p)){var xe=wa(p);de=xe.length}if(A>=de)return p;var Se=A-Ys(W);if(Se<1)return W;var Oe=xe?Ts(xe,0,Se).join(""):p.slice(0,Se);if(re===t)return Oe+W;if(xe&&(Se+=Oe.length-Se),Bv(re)){if(p.slice(Se).search(re)){var Qe,Xe=Oe;for(re.global||(re=fs(re.source,Xn(xr.exec(re))+"g")),re.lastIndex=0;Qe=re.exec(Xe);)var rt=Qe.index;Oe=Oe.slice(0,rt===t?Se:rt)}}else if(p.indexOf(ki(re),Se)!=Se){var xt=Oe.lastIndexOf(re);xt>-1&&(Oe=Oe.slice(0,xt))}return Oe+W}function Qw(p){return p=Xn(p),p&&ha.test(p)?p.replace(sr,qd):p}var Xw=au(function(p,k,A){return p+(A?" ":"")+k.toUpperCase()}),jv=Eh("toUpperCase");function Sg(p,k,A){return p=Xn(p),k=A?t:k,k===t?co(p)?Ua(p):Bl(p):p.match(k)||[]}var Mg=an(function(p,k){try{return ai(p,t,k)}catch(A){return Fv(A)?A:new Vt(A)}}),Jw=Ro(function(p,k){return ar(k,function(A){A=$n(A),bo(p,A,zv(p[A],p))}),p});function e1(p){var k=p==null?0:p.length,A=Ot();return p=k?kn(p,function(W){if(typeof W[1]!="function")throw new $i(i);return[A(W[0]),W[1]]}):[],an(function(W){for(var re=-1;++re<k;){var de=p[re];if(ai(de[0],this,W))return ai(de[1],this,W)}})}function t1(p){return th(zi(p,d))}function Wv(p){return function(){return p}}function n1(p,k){return p==null||p!==p?k:p}var r1=_h(),i1=_h(!0);function Ma(p){return p}function Uv(p){return uh(typeof p=="function"?p:zi(p,d))}function a1(p){return dh(zi(p,d))}function o1(p,k){return Kc(p,zi(k,d))}var s1=an(function(p,k){return function(A){return Vl(A,p,k)}}),l1=an(function(p,k){return function(A){return Vl(p,A,k)}});function qv(p,k,A){var W=Mi(k),re=Vu(k,W);A==null&&!(Mr(k)&&(re.length||!W.length))&&(A=k,k=p,p=this,re=Vu(k,Mi(k)));var de=!(Mr(A)&&"chain"in A)||!!A.chain,xe=dl(p);return ar(re,function(Se){var Oe=k[Se];p[Se]=Oe,xe&&(p.prototype[Se]=function(){var Qe=this.__chain__;if(de||Qe){var Xe=p(this.__wrapped__),rt=Xe.__actions__=Xr(this.__actions__);return rt.push({func:Oe,args:arguments,thisArg:p}),Xe.__chain__=Qe,Xe}return Oe.apply(p,Ha([this.value()],arguments))})}),p}function u1(){return ir._===this&&(ir._=$f),this}function $v(){}function d1(p){return p=on(p),an(function(k){return ch(k,p)})}var c1=su(kn),f1=su(Gs),h1=su(ja);function Tg(p){return ee(p)?be($n(p)):Sv(p)}function v1(p){return function(k){return p==null?t:Es(p,k)}}var p1=Sh(),g1=Sh(!0);function Gv(){return[]}function Zv(){return!1}function m1(){return{}}function b1(){return""}function y1(){return!0}function w1(p,k){if(p=on(p),p<1||p>L)return[];var A=se,W=oi(p,se);k=Ot(k),p-=se;for(var re=Zt(W,k);++A<p;)k(A);return re}function k1(p){return rn(p)?kn(p,$n):Ga(p)?[p]:Xr(Wr(Xn(p)))}function x1(p){var k=++vs;return Xn(p)+k}var C1=rd(function(p,k){return p+k},0),E1=id("ceil"),_1=rd(function(p,k){return p/k},1),S1=id("floor");function M1(p){return p&&p.length?Ku(p,Ma,rc):t}function T1(p,k){return p&&p.length?Ku(p,Ot(k,2),rc):t}function A1(p){return ce(p,Ma)}function N1(p,k){return ce(p,Ot(k,2))}function D1(p){return p&&p.length?Ku(p,Ma,Ss):t}function I1(p,k){return p&&p.length?Ku(p,Ot(k,2),Ss):t}var L1=rd(function(p,k){return p*k},1),O1=id("round"),z1=rd(function(p,k){return p-k},0);function R1(p){return p&&p.length?Rt(p,Ma):0}function F1(p,k){return p&&p.length?Rt(p,Ot(k,2)):0}return le.after=ay,le.ary=ag,le.assign=Gy,le.assignIn=yg,le.assignInWith=Ph,le.assignWith=Zy,le.at=Yy,le.before=og,le.bind=zv,le.bindAll=Jw,le.bindKey=sg,le.castArray=my,le.chain=ng,le.chunk=du,le.compact=As,le.concat=fi,le.cond=e1,le.conforms=t1,le.constant=Wv,le.countBy=Rb,le.create=Ky,le.curry=lg,le.curryRight=ug,le.debounce=dg,le.defaults=Vy,le.defaultsDeep=Qy,le.defer=oy,le.delay=sy,le.difference=yo,le.differenceBy=Ur,le.differenceWith=ff,le.drop=Fo,le.dropRight=ll,le.dropRightWhile=ul,le.dropWhile=Si,le.fill=cu,le.filter=Bb,le.flatMap=jb,le.flatMapDeep=Wb,le.flatMapDepth=Ub,le.flatten=Xp,le.flattenDeep=F0,le.flattenDepth=B0,le.flip=ly,le.flow=r1,le.flowRight=i1,le.fromPairs=P0,le.functions=iw,le.functionsIn=aw,le.groupBy=qb,le.initial=j0,le.intersection=W0,le.intersectionBy=U0,le.intersectionWith=q0,le.invert=sw,le.invertBy=lw,le.invokeMap=Gb,le.iteratee=Uv,le.keyBy=Zb,le.keys=Mi,le.keysIn=Sa,le.map=Lh,le.mapKeys=dw,le.mapValues=cw,le.matches=a1,le.matchesProperty=o1,le.memoize=zh,le.merge=fw,le.mergeWith=wg,le.method=s1,le.methodOf=l1,le.mixin=qv,le.negate=Rh,le.nthArg=d1,le.omit=hw,le.omitBy=vw,le.once=uy,le.orderBy=Yb,le.over=c1,le.overArgs=dy,le.overEvery=f1,le.overSome=h1,le.partial=Rv,le.partialRight=cg,le.partition=Kb,le.pick=pw,le.pickBy=kg,le.property=Tg,le.propertyOf=v1,le.pull=Y0,le.pullAll=eg,le.pullAllBy=K0,le.pullAllWith=V0,le.pullAt=Q0,le.range=p1,le.rangeRight=g1,le.rearg=cy,le.reject=Xb,le.remove=X0,le.rest=fy,le.reverse=Lv,le.sampleSize=ey,le.set=mw,le.setWith=bw,le.shuffle=ty,le.slice=J0,le.sortBy=iy,le.sortedUniq=ob,le.sortedUniqBy=sb,le.split=jw,le.spread=hy,le.tail=lb,le.take=ub,le.takeRight=db,le.takeRightWhile=cb,le.takeWhile=fb,le.tap=Mb,le.throttle=vy,le.thru=Ih,le.toArray=gg,le.toPairs=xg,le.toPairsIn=Cg,le.toPath=k1,le.toPlainObject=bg,le.transform=yw,le.unary=py,le.union=hb,le.unionBy=vb,le.unionWith=pb,le.uniq=gb,le.uniqBy=mb,le.uniqWith=bb,le.unset=ww,le.unzip=Ov,le.unzipWith=tg,le.update=kw,le.updateWith=xw,le.values=xc,le.valuesIn=Cw,le.without=yb,le.words=Sg,le.wrap=gy,le.xor=wb,le.xorBy=kb,le.xorWith=xb,le.zip=Cb,le.zipObject=Eb,le.zipObjectDeep=_b,le.zipWith=Sb,le.entries=xg,le.entriesIn=Cg,le.extend=yg,le.extendWith=Ph,qv(le,le),le.add=C1,le.attempt=Mg,le.camelCase=Mw,le.capitalize=Eg,le.ceil=E1,le.clamp=Ew,le.clone=by,le.cloneDeep=wy,le.cloneDeepWith=ky,le.cloneWith=yy,le.conformsTo=xy,le.deburr=_g,le.defaultTo=n1,le.divide=_1,le.endsWith=Tw,le.eq=Bo,le.escape=Aw,le.escapeRegExp=Nw,le.every=Fb,le.find=Pb,le.findIndex=wc,le.findKey=Xy,le.findLast=Hb,le.findLastIndex=Qp,le.findLastKey=Jy,le.floor=S1,le.forEach=rg,le.forEachRight=ig,le.forIn=ew,le.forInRight=tw,le.forOwn=nw,le.forOwnRight=rw,le.get=Pv,le.gt=Cy,le.gte=Ey,le.has=ow,le.hasIn=Hv,le.head=Jp,le.identity=Ma,le.includes=$b,le.indexOf=H0,le.inRange=_w,le.invoke=uw,le.isArguments=ld,le.isArray=rn,le.isArrayBuffer=_y,le.isArrayLike=_a,le.isArrayLikeObject=qr,le.isBoolean=Sy,le.isBuffer=fu,le.isDate=My,le.isElement=Ty,le.isEmpty=Ay,le.isEqual=Ny,le.isEqualWith=Dy,le.isError=Fv,le.isFinite=Iy,le.isFunction=dl,le.isInteger=fg,le.isLength=Fh,le.isMap=hg,le.isMatch=Ly,le.isMatchWith=Oy,le.isNaN=zy,le.isNative=Ry,le.isNil=By,le.isNull=Fy,le.isNumber=vg,le.isObject=Mr,le.isObjectLike=Or,le.isPlainObject=hf,le.isRegExp=Bv,le.isSafeInteger=Py,le.isSet=pg,le.isString=Bh,le.isSymbol=Ga,le.isTypedArray=kc,le.isUndefined=Hy,le.isWeakMap=jy,le.isWeakSet=Wy,le.join=$0,le.kebabCase=Dw,le.last=wo,le.lastIndexOf=G0,le.lowerCase=Iw,le.lowerFirst=Lw,le.lt=Uy,le.lte=qy,le.max=M1,le.maxBy=T1,le.mean=A1,le.meanBy=N1,le.min=D1,le.minBy=I1,le.stubArray=Gv,le.stubFalse=Zv,le.stubObject=m1,le.stubString=b1,le.stubTrue=y1,le.multiply=L1,le.nth=Z0,le.noConflict=u1,le.noop=$v,le.now=Oh,le.pad=Ow,le.padEnd=zw,le.padStart=Rw,le.parseInt=Fw,le.random=Sw,le.reduce=Vb,le.reduceRight=Qb,le.repeat=Bw,le.replace=Pw,le.result=gw,le.round=O1,le.runInContext=De,le.sample=Jb,le.size=ny,le.snakeCase=Hw,le.some=ry,le.sortedIndex=eb,le.sortedIndexBy=tb,le.sortedIndexOf=nb,le.sortedLastIndex=rb,le.sortedLastIndexBy=ib,le.sortedLastIndexOf=ab,le.startCase=Ww,le.startsWith=Uw,le.subtract=z1,le.sum=R1,le.sumBy=F1,le.template=qw,le.times=w1,le.toFinite=cl,le.toInteger=on,le.toLength=mg,le.toLower=$w,le.toNumber=ko,le.toSafeInteger=$y,le.toString=Xn,le.toUpper=Gw,le.trim=Zw,le.trimEnd=Yw,le.trimStart=Kw,le.truncate=Vw,le.unescape=Qw,le.uniqueId=x1,le.upperCase=Xw,le.upperFirst=jv,le.each=rg,le.eachRight=ig,le.first=Jp,qv(le,function(){var p={};return ea(le,function(k,A){Xt.call(le.prototype,A)||(p[A]=k)}),p}(),{chain:!1}),le.VERSION=n,ar(["bind","bindKey","curry","curryRight","partial","partialRight"],function(p){le[p].placeholder=le}),ar(["drop","take"],function(p,k){vn.prototype[p]=function(A){A=A===t?1:mr(on(A),0);var W=this.__filtered__&&!k?new vn(this):this.clone();return W.__filtered__?W.__takeCount__=oi(A,W.__takeCount__):W.__views__.push({size:oi(A,se),type:p+(W.__dir__<0?"Right":"")}),W},vn.prototype[p+"Right"]=function(A){return this.reverse()[p](A).reverse()}}),ar(["filter","map","takeWhile"],function(p,k){var A=k+1,W=A==z||A==Q;vn.prototype[p]=function(re){var de=this.clone();return de.__iteratees__.push({iteratee:Ot(re,3),type:A}),de.__filtered__=de.__filtered__||W,de}}),ar(["head","last"],function(p,k){var A="take"+(k?"Right":"");vn.prototype[p]=function(){return this[A](1).value()[0]}}),ar(["initial","tail"],function(p,k){var A="drop"+(k?"":"Right");vn.prototype[p]=function(){return this.__filtered__?new vn(this):this[A](1)}}),vn.prototype.compact=function(){return this.filter(Ma)},vn.prototype.find=function(p){return this.filter(p).head()},vn.prototype.findLast=function(p){return this.reverse().find(p)},vn.prototype.invokeMap=an(function(p,k){return typeof p=="function"?new vn(this):this.map(function(A){return Vl(A,p,k)})}),vn.prototype.reject=function(p){return this.filter(Rh(Ot(p)))},vn.prototype.slice=function(p,k){p=on(p);var A=this;return A.__filtered__&&(p>0||k<0)?new vn(A):(p<0?A=A.takeRight(-p):p&&(A=A.drop(p)),k!==t&&(k=on(k),A=k<0?A.dropRight(-k):A.take(k-p)),A)},vn.prototype.takeRightWhile=function(p){return this.reverse().takeWhile(p).reverse()},vn.prototype.toArray=function(){return this.take(se)},ea(vn.prototype,function(p,k){var A=/^(?:filter|find|map|reject)|While$/.test(k),W=/^(?:head|last)$/.test(k),re=le[W?"take"+(k=="last"?"Right":""):k],de=W||/^find/.test(k);!re||(le.prototype[k]=function(){var xe=this.__wrapped__,Se=W?[1]:arguments,Oe=xe instanceof vn,Qe=Se[0],Xe=Oe||rn(xe),rt=function(mn){var Cn=re.apply(le,Ha([mn],Se));return W&&xt?Cn[0]:Cn};Xe&&A&&typeof Qe=="function"&&Qe.length!=1&&(Oe=Xe=!1);var xt=this.__chain__,Lt=!!this.__actions__.length,qt=de&&!xt,sn=Oe&&!Lt;if(!de&&Xe){xe=sn?xe:new vn(this);var $t=p.apply(xe,Se);return $t.__actions__.push({func:Ih,args:[rt],thisArg:t}),new Oi($t,xt)}return qt&&sn?p.apply(this,Se):($t=this.thru(rt),qt?W?$t.value()[0]:$t.value():$t)})}),ar(["pop","push","shift","sort","splice","unshift"],function(p){var k=jl[p],A=/^(?:push|sort|unshift)$/.test(p)?"tap":"thru",W=/^(?:pop|shift)$/.test(p);le.prototype[p]=function(){var re=arguments;if(W&&!this.__chain__){var de=this.value();return k.apply(rn(de)?de:[],re)}return this[A](function(xe){return k.apply(rn(xe)?xe:[],re)})}}),ea(vn.prototype,function(p,k){var A=le[k];if(A){var W=A.name+"";Xt.call(Zl,W)||(Zl[W]=[]),Zl[W].push({name:k,func:A})}}),Zl[nd(t,_).name]=[{name:"wrapper",func:t}],vn.prototype.clone=mv,vn.prototype.reverse=bv,vn.prototype.value=Rc,le.prototype.at=Tb,le.prototype.chain=Ab,le.prototype.commit=Nb,le.prototype.next=Db,le.prototype.plant=Lb,le.prototype.reverse=Ob,le.prototype.toJSON=le.prototype.valueOf=le.prototype.value=zb,le.prototype.first=le.prototype.head,ps&&(le.prototype[ps]=Ib),le},cs=Uf();qn?((qn.exports=cs)._=cs,qi._=cs):ir._=cs}).call(ca)})(Kt,Kt.exports);var ym={exports:{}};(function(b){(function(u){var t=/^\s+/,n=/\s+$/,e=0,r=u.round,i=u.min,a=u.max,o=u.random;function l(ne,me){if(ne=ne||"",me=me||{},ne instanceof l)return ne;if(!(this instanceof l))return new l(ne,me);var ue=c(ne);this._originalInput=ne,this._r=ue.r,this._g=ue.g,this._b=ue.b,this._a=ue.a,this._roundA=r(100*this._a)/100,this._format=me.format||ue.format,this._gradientType=me.gradientType,this._r<1&&(this._r=r(this._r)),this._g<1&&(this._g=r(this._g)),this._b<1&&(this._b=r(this._b)),this._ok=ue.ok,this._tc_id=e++}l.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var ne=this.toRgb();return(ne.r*299+ne.g*587+ne.b*114)/1e3},getLuminance:function(){var ne=this.toRgb(),me,ue,Te,ze,We,et;return me=ne.r/255,ue=ne.g/255,Te=ne.b/255,me<=.03928?ze=me/12.92:ze=u.pow((me+.055)/1.055,2.4),ue<=.03928?We=ue/12.92:We=u.pow((ue+.055)/1.055,2.4),Te<=.03928?et=Te/12.92:et=u.pow((Te+.055)/1.055,2.4),.2126*ze+.7152*We+.0722*et},setAlpha:function(ne){return this._a=F(ne),this._roundA=r(100*this._a)/100,this},toHsv:function(){var ne=g(this._r,this._g,this._b);return{h:ne.h*360,s:ne.s,v:ne.v,a:this._a}},toHsvString:function(){var ne=g(this._r,this._g,this._b),me=r(ne.h*360),ue=r(ne.s*100),Te=r(ne.v*100);return this._a==1?"hsv("+me+", "+ue+"%, "+Te+"%)":"hsva("+me+", "+ue+"%, "+Te+"%, "+this._roundA+")"},toHsl:function(){var ne=v(this._r,this._g,this._b);return{h:ne.h*360,s:ne.s,l:ne.l,a:this._a}},toHslString:function(){var ne=v(this._r,this._g,this._b),me=r(ne.h*360),ue=r(ne.s*100),Te=r(ne.l*100);return this._a==1?"hsl("+me+", "+ue+"%, "+Te+"%)":"hsla("+me+", "+ue+"%, "+Te+"%, "+this._roundA+")"},toHex:function(ne){return x(this._r,this._g,this._b,ne)},toHexString:function(ne){return"#"+this.toHex(ne)},toHex8:function(ne){return _(this._r,this._g,this._b,this._a,ne)},toHex8String:function(ne){return"#"+this.toHex8(ne)},toRgb:function(){return{r:r(this._r),g:r(this._g),b:r(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+r(this._r)+", "+r(this._g)+", "+r(this._b)+")":"rgba("+r(this._r)+", "+r(this._g)+", "+r(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:r(X(this._r,255)*100)+"%",g:r(X(this._g,255)*100)+"%",b:r(X(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+r(X(this._r,255)*100)+"%, "+r(X(this._g,255)*100)+"%, "+r(X(this._b,255)*100)+"%)":"rgba("+r(X(this._r,255)*100)+"%, "+r(X(this._g,255)*100)+"%, "+r(X(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:ie[x(this._r,this._g,this._b,!0)]||!1},toFilter:function(ne){var me="#"+E(this._r,this._g,this._b,this._a),ue=me,Te=this._gradientType?"GradientType = 1, ":"";if(ne){var ze=l(ne);ue="#"+E(ze._r,ze._g,ze._b,ze._a)}return"progid:DXImageTransform.Microsoft.gradient("+Te+"startColorstr="+me+",endColorstr="+ue+")"},toString:function(ne){var me=!!ne;ne=ne||this._format;var ue=!1,Te=this._a<1&&this._a>=0,ze=!me&&Te&&(ne==="hex"||ne==="hex6"||ne==="hex3"||ne==="hex4"||ne==="hex8"||ne==="name");return ze?ne==="name"&&this._a===0?this.toName():this.toRgbString():(ne==="rgb"&&(ue=this.toRgbString()),ne==="prgb"&&(ue=this.toPercentageRgbString()),(ne==="hex"||ne==="hex6")&&(ue=this.toHexString()),ne==="hex3"&&(ue=this.toHexString(!0)),ne==="hex4"&&(ue=this.toHex8String(!0)),ne==="hex8"&&(ue=this.toHex8String()),ne==="name"&&(ue=this.toName()),ne==="hsl"&&(ue=this.toHslString()),ne==="hsv"&&(ue=this.toHsvString()),ue||this.toHexString())},clone:function(){return l(this.toString())},_applyModification:function(ne,me){var ue=ne.apply(null,[this].concat([].slice.call(me)));return this._r=ue._r,this._g=ue._g,this._b=ue._b,this.setAlpha(ue._a),this},lighten:function(){return this._applyModification(D,arguments)},brighten:function(){return this._applyModification(I,arguments)},darken:function(){return this._applyModification(P,arguments)},desaturate:function(){return this._applyModification(M,arguments)},saturate:function(){return this._applyModification(T,arguments)},greyscale:function(){return this._applyModification(S,arguments)},spin:function(){return this._applyModification(B,arguments)},_applyCombination:function(ne,me){return ne.apply(null,[this].concat([].slice.call(me)))},analogous:function(){return this._applyCombination(z,arguments)},complement:function(){return this._applyCombination($,arguments)},monochromatic:function(){return this._applyCombination(O,arguments)},splitcomplement:function(){return this._applyCombination(H,arguments)},triad:function(){return this._applyCombination(q,arguments)},tetrad:function(){return this._applyCombination(G,arguments)}},l.fromRatio=function(ne,me){if(typeof ne=="object"){var ue={};for(var Te in ne)ne.hasOwnProperty(Te)&&(Te==="a"?ue[Te]=ne[Te]:ue[Te]=ae(ne[Te]));ne=ue}return l(ne,me)};function c(ne){var me={r:0,g:0,b:0},ue=1,Te=null,ze=null,We=null,et=!1,Ke=!1;return typeof ne=="string"&&(ne=Re(ne)),typeof ne=="object"&&(Le(ne.r)&&Le(ne.g)&&Le(ne.b)?(me=d(ne.r,ne.g,ne.b),et=!0,Ke=String(ne.r).substr(-1)==="%"?"prgb":"rgb"):Le(ne.h)&&Le(ne.s)&&Le(ne.v)?(Te=ae(ne.s),ze=ae(ne.v),me=w(ne.h,Te,ze),et=!0,Ke="hsv"):Le(ne.h)&&Le(ne.s)&&Le(ne.l)&&(Te=ae(ne.s),We=ae(ne.l),me=h(ne.h,Te,We),et=!0,Ke="hsl"),ne.hasOwnProperty("a")&&(ue=ne.a)),ue=F(ue),{ok:et,format:ne.format||Ke,r:i(255,a(me.r,0)),g:i(255,a(me.g,0)),b:i(255,a(me.b,0)),a:ue}}function d(ne,me,ue){return{r:X(ne,255)*255,g:X(me,255)*255,b:X(ue,255)*255}}function v(ne,me,ue){ne=X(ne,255),me=X(me,255),ue=X(ue,255);var Te=a(ne,me,ue),ze=i(ne,me,ue),We,et,Ke=(Te+ze)/2;if(Te==ze)We=et=0;else{var Ge=Te-ze;switch(et=Ke>.5?Ge/(2-Te-ze):Ge/(Te+ze),Te){case ne:We=(me-ue)/Ge+(me<ue?6:0);break;case me:We=(ue-ne)/Ge+2;break;case ue:We=(ne-me)/Ge+4;break}We/=6}return{h:We,s:et,l:Ke}}function h(ne,me,ue){var Te,ze,We;ne=X(ne,360),me=X(me,100),ue=X(ue,100);function et(_e,Ue,Ae){return Ae<0&&(Ae+=1),Ae>1&&(Ae-=1),Ae<1/6?_e+(Ue-_e)*6*Ae:Ae<1/2?Ue:Ae<2/3?_e+(Ue-_e)*(2/3-Ae)*6:_e}if(me===0)Te=ze=We=ue;else{var Ke=ue<.5?ue*(1+me):ue+me-ue*me,Ge=2*ue-Ke;Te=et(Ge,Ke,ne+1/3),ze=et(Ge,Ke,ne),We=et(Ge,Ke,ne-1/3)}return{r:Te*255,g:ze*255,b:We*255}}function g(ne,me,ue){ne=X(ne,255),me=X(me,255),ue=X(ue,255);var Te=a(ne,me,ue),ze=i(ne,me,ue),We,et,Ke=Te,Ge=Te-ze;if(et=Te===0?0:Ge/Te,Te==ze)We=0;else{switch(Te){case ne:We=(me-ue)/Ge+(me<ue?6:0);break;case me:We=(ue-ne)/Ge+2;break;case ue:We=(ne-me)/Ge+4;break}We/=6}return{h:We,s:et,v:Ke}}function w(ne,me,ue){ne=X(ne,360)*6,me=X(me,100),ue=X(ue,100);var Te=u.floor(ne),ze=ne-Te,We=ue*(1-me),et=ue*(1-ze*me),Ke=ue*(1-(1-ze)*me),Ge=Te%6,_e=[ue,et,We,We,Ke,ue][Ge],Ue=[Ke,ue,ue,et,We,We][Ge],Ae=[We,We,Ke,ue,ue,et][Ge];return{r:_e*255,g:Ue*255,b:Ae*255}}function x(ne,me,ue,Te){var ze=[ve(r(ne).toString(16)),ve(r(me).toString(16)),ve(r(ue).toString(16))];return Te&&ze[0].charAt(0)==ze[0].charAt(1)&&ze[1].charAt(0)==ze[1].charAt(1)&&ze[2].charAt(0)==ze[2].charAt(1)?ze[0].charAt(0)+ze[1].charAt(0)+ze[2].charAt(0):ze.join("")}function _(ne,me,ue,Te,ze){var We=[ve(r(ne).toString(16)),ve(r(me).toString(16)),ve(r(ue).toString(16)),ve(J(Te))];return ze&&We[0].charAt(0)==We[0].charAt(1)&&We[1].charAt(0)==We[1].charAt(1)&&We[2].charAt(0)==We[2].charAt(1)&&We[3].charAt(0)==We[3].charAt(1)?We[0].charAt(0)+We[1].charAt(0)+We[2].charAt(0)+We[3].charAt(0):We.join("")}function E(ne,me,ue,Te){var ze=[ve(J(Te)),ve(r(ne).toString(16)),ve(r(me).toString(16)),ve(r(ue).toString(16))];return ze.join("")}l.equals=function(ne,me){return!ne||!me?!1:l(ne).toRgbString()==l(me).toRgbString()},l.random=function(){return l.fromRatio({r:o(),g:o(),b:o()})};function M(ne,me){me=me===0?0:me||10;var ue=l(ne).toHsl();return ue.s-=me/100,ue.s=se(ue.s),l(ue)}function T(ne,me){me=me===0?0:me||10;var ue=l(ne).toHsl();return ue.s+=me/100,ue.s=se(ue.s),l(ue)}function S(ne){return l(ne).desaturate(100)}function D(ne,me){me=me===0?0:me||10;var ue=l(ne).toHsl();return ue.l+=me/100,ue.l=se(ue.l),l(ue)}function I(ne,me){me=me===0?0:me||10;var ue=l(ne).toRgb();return ue.r=a(0,i(255,ue.r-r(255*-(me/100)))),ue.g=a(0,i(255,ue.g-r(255*-(me/100)))),ue.b=a(0,i(255,ue.b-r(255*-(me/100)))),l(ue)}function P(ne,me){me=me===0?0:me||10;var ue=l(ne).toHsl();return ue.l-=me/100,ue.l=se(ue.l),l(ue)}function B(ne,me){var ue=l(ne).toHsl(),Te=(ue.h+me)%360;return ue.h=Te<0?360+Te:Te,l(ue)}function $(ne){var me=l(ne).toHsl();return me.h=(me.h+180)%360,l(me)}function q(ne){var me=l(ne).toHsl(),ue=me.h;return[l(ne),l({h:(ue+120)%360,s:me.s,l:me.l}),l({h:(ue+240)%360,s:me.s,l:me.l})]}function G(ne){var me=l(ne).toHsl(),ue=me.h;return[l(ne),l({h:(ue+90)%360,s:me.s,l:me.l}),l({h:(ue+180)%360,s:me.s,l:me.l}),l({h:(ue+270)%360,s:me.s,l:me.l})]}function H(ne){var me=l(ne).toHsl(),ue=me.h;return[l(ne),l({h:(ue+72)%360,s:me.s,l:me.l}),l({h:(ue+216)%360,s:me.s,l:me.l})]}function z(ne,me,ue){me=me||6,ue=ue||30;var Te=l(ne).toHsl(),ze=360/ue,We=[l(ne)];for(Te.h=(Te.h-(ze*me>>1)+720)%360;--me;)Te.h=(Te.h+ze)%360,We.push(l(Te));return We}function O(ne,me){me=me||6;for(var ue=l(ne).toHsv(),Te=ue.h,ze=ue.s,We=ue.v,et=[],Ke=1/me;me--;)et.push(l({h:Te,s:ze,v:We})),We=(We+Ke)%1;return et}l.mix=function(ne,me,ue){ue=ue===0?0:ue||50;var Te=l(ne).toRgb(),ze=l(me).toRgb(),We=ue/100,et={r:(ze.r-Te.r)*We+Te.r,g:(ze.g-Te.g)*We+Te.g,b:(ze.b-Te.b)*We+Te.b,a:(ze.a-Te.a)*We+Te.a};return l(et)},l.readability=function(ne,me){var ue=l(ne),Te=l(me);return(u.max(ue.getLuminance(),Te.getLuminance())+.05)/(u.min(ue.getLuminance(),Te.getLuminance())+.05)},l.isReadable=function(ne,me,ue){var Te=l.readability(ne,me),ze,We;switch(We=!1,ze=Ce(ue),ze.level+ze.size){case"AAsmall":case"AAAlarge":We=Te>=4.5;break;case"AAlarge":We=Te>=3;break;case"AAAsmall":We=Te>=7;break}return We},l.mostReadable=function(ne,me,ue){var Te=null,ze=0,We,et,Ke,Ge;ue=ue||{},et=ue.includeFallbackColors,Ke=ue.level,Ge=ue.size;for(var _e=0;_e<me.length;_e++)We=l.readability(ne,me[_e]),We>ze&&(ze=We,Te=l(me[_e]));return l.isReadable(ne,Te,{level:Ke,size:Ge})||!et?Te:(ue.includeFallbackColors=!1,l.mostReadable(ne,["#fff","#000"],ue))};var Q=l.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},ie=l.hexNames=L(Q);function L(ne){var me={};for(var ue in ne)ne.hasOwnProperty(ue)&&(me[ne[ue]]=ue);return me}function F(ne){return ne=parseFloat(ne),(isNaN(ne)||ne<0||ne>1)&&(ne=1),ne}function X(ne,me){j(ne)&&(ne="100%");var ue=fe(ne);return ne=i(me,a(0,parseFloat(ne))),ue&&(ne=parseInt(ne*me,10)/100),u.abs(ne-me)<1e-6?1:ne%me/parseFloat(me)}function se(ne){return i(1,a(0,ne))}function Y(ne){return parseInt(ne,16)}function j(ne){return typeof ne=="string"&&ne.indexOf(".")!=-1&&parseFloat(ne)===1}function fe(ne){return typeof ne=="string"&&ne.indexOf("%")!=-1}function ve(ne){return ne.length==1?"0"+ne:""+ne}function ae(ne){return ne<=1&&(ne=ne*100+"%"),ne}function J(ne){return u.round(parseFloat(ne)*255).toString(16)}function pe(ne){return Y(ne)/255}var Ee=function(){var ne="[-\\+]?\\d+%?",me="[-\\+]?\\d*\\.\\d+%?",ue="(?:"+me+")|(?:"+ne+")",Te="[\\s|\\(]+("+ue+")[,|\\s]+("+ue+")[,|\\s]+("+ue+")\\s*\\)?",ze="[\\s|\\(]+("+ue+")[,|\\s]+("+ue+")[,|\\s]+("+ue+")[,|\\s]+("+ue+")\\s*\\)?";return{CSS_UNIT:new RegExp(ue),rgb:new RegExp("rgb"+Te),rgba:new RegExp("rgba"+ze),hsl:new RegExp("hsl"+Te),hsla:new RegExp("hsla"+ze),hsv:new RegExp("hsv"+Te),hsva:new RegExp("hsva"+ze),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Le(ne){return!!Ee.CSS_UNIT.exec(ne)}function Re(ne){ne=ne.replace(t,"").replace(n,"").toLowerCase();var me=!1;if(Q[ne])ne=Q[ne],me=!0;else if(ne=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var ue;return(ue=Ee.rgb.exec(ne))?{r:ue[1],g:ue[2],b:ue[3]}:(ue=Ee.rgba.exec(ne))?{r:ue[1],g:ue[2],b:ue[3],a:ue[4]}:(ue=Ee.hsl.exec(ne))?{h:ue[1],s:ue[2],l:ue[3]}:(ue=Ee.hsla.exec(ne))?{h:ue[1],s:ue[2],l:ue[3],a:ue[4]}:(ue=Ee.hsv.exec(ne))?{h:ue[1],s:ue[2],v:ue[3]}:(ue=Ee.hsva.exec(ne))?{h:ue[1],s:ue[2],v:ue[3],a:ue[4]}:(ue=Ee.hex8.exec(ne))?{r:Y(ue[1]),g:Y(ue[2]),b:Y(ue[3]),a:pe(ue[4]),format:me?"name":"hex8"}:(ue=Ee.hex6.exec(ne))?{r:Y(ue[1]),g:Y(ue[2]),b:Y(ue[3]),format:me?"name":"hex"}:(ue=Ee.hex4.exec(ne))?{r:Y(ue[1]+""+ue[1]),g:Y(ue[2]+""+ue[2]),b:Y(ue[3]+""+ue[3]),a:pe(ue[4]+""+ue[4]),format:me?"name":"hex8"}:(ue=Ee.hex3.exec(ne))?{r:Y(ue[1]+""+ue[1]),g:Y(ue[2]+""+ue[2]),b:Y(ue[3]+""+ue[3]),format:me?"name":"hex"}:!1}function Ce(ne){var me,ue;return ne=ne||{level:"AA",size:"small"},me=(ne.level||"AA").toUpperCase(),ue=(ne.size||"small").toLowerCase(),me!=="AA"&&me!=="AAA"&&(me="AA"),ue!=="small"&&ue!=="large"&&(ue="small"),{level:me,size:ue}}b.exports?b.exports=l:window.tinycolor=l})(Math)})(ym);var to=ym.exports,rs={exports:{}};/*!
 * EventEmitter2
 * https://github.com/hij1nx/EventEmitter2
 *
 * Copyright (c) 2013 hij1nx
 * Licensed under the MIT license.
 */(function(b,u){(function(t){var n=Object.hasOwnProperty,e=Array.isArray?Array.isArray:function(F){return Object.prototype.toString.call(F)==="[object Array]"},r=10,i=typeof process=="object"&&typeof process.nextTick=="function",a=typeof Symbol=="function",o=typeof Reflect=="object",l=typeof setImmediate=="function",c=l?setImmediate:setTimeout,d=a?o&&typeof Reflect.ownKeys=="function"?Reflect.ownKeys:function(L){var F=Object.getOwnPropertyNames(L);return F.push.apply(F,Object.getOwnPropertySymbols(L)),F}:Object.keys;function v(){this._events={},this._conf&&h.call(this,this._conf)}function h(L){L&&(this._conf=L,L.delimiter&&(this.delimiter=L.delimiter),L.maxListeners!==t&&(this._maxListeners=L.maxListeners),L.wildcard&&(this.wildcard=L.wildcard),L.newListener&&(this._newListener=L.newListener),L.removeListener&&(this._removeListener=L.removeListener),L.verboseMemoryLeak&&(this.verboseMemoryLeak=L.verboseMemoryLeak),L.ignoreErrors&&(this.ignoreErrors=L.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function g(L,F){var X="(node) warning: possible EventEmitter memory leak detected. "+L+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(X+=" Event name: "+F+"."),typeof process!="undefined"&&process.emitWarning){var se=new Error(X);se.name="MaxListenersExceededWarning",se.emitter=this,se.count=L,process.emitWarning(se)}else console.error(X),console.trace&&console.trace()}var w=function(L,F,X){var se=arguments.length;switch(se){case 0:return[];case 1:return[L];case 2:return[L,F];case 3:return[L,F,X];default:for(var Y=new Array(se);se--;)Y[se]=arguments[se];return Y}};function x(L,F){for(var X={},se,Y=L.length,j=F?value.length:0,fe=0;fe<Y;fe++)se=L[fe],X[se]=fe<j?F[fe]:t;return X}function _(L,F,X){this._emitter=L,this._target=F,this._listeners={},this._listenersCount=0;var se,Y;if((X.on||X.off)&&(se=X.on,Y=X.off),F.addEventListener?(se=F.addEventListener,Y=F.removeEventListener):F.addListener?(se=F.addListener,Y=F.removeListener):F.on&&(se=F.on,Y=F.off),!se&&!Y)throw Error("target does not implement any known event API");if(typeof se!="function")throw TypeError("on method must be a function");if(typeof Y!="function")throw TypeError("off method must be a function");this._on=se,this._off=Y;var j=L._observers;j?j.push(this):L._observers=[this]}Object.assign(_.prototype,{subscribe:function(L,F,X){var se=this,Y=this._target,j=this._emitter,fe=this._listeners,ve=function(){var ae=w.apply(null,arguments),J={data:ae,name:F,original:L};if(X){var pe=X.call(Y,J);pe!==!1&&j.emit.apply(j,[J.name].concat(ae));return}j.emit.apply(j,[F].concat(ae))};if(fe[L])throw Error("Event '"+L+"' is already listening");this._listenersCount++,j._newListener&&j._removeListener&&!se._onNewListener?(this._onNewListener=function(ae){ae===F&&fe[L]===null&&(fe[L]=ve,se._on.call(Y,L,ve))},j.on("newListener",this._onNewListener),this._onRemoveListener=function(ae){ae===F&&!j.hasListeners(ae)&&fe[L]&&(fe[L]=null,se._off.call(Y,L,ve))},fe[L]=null,j.on("removeListener",this._onRemoveListener)):(fe[L]=ve,se._on.call(Y,L,ve))},unsubscribe:function(L){var F=this,X=this._listeners,se=this._emitter,Y,j,fe=this._off,ve=this._target,ae;if(L&&typeof L!="string")throw TypeError("event must be a string");function J(){F._onNewListener&&(se.off("newListener",F._onNewListener),se.off("removeListener",F._onRemoveListener),F._onNewListener=null,F._onRemoveListener=null);var pe=P.call(se,F);se._observers.splice(pe,1)}if(L){if(Y=X[L],!Y)return;fe.call(ve,L,Y),delete X[L],--this._listenersCount||J()}else{for(j=d(X),ae=j.length;ae-- >0;)L=j[ae],fe.call(ve,L,X[L]);this._listeners={},this._listenersCount=0,J()}}});function E(L,F,X,se){var Y=Object.assign({},F);if(!L)return Y;if(typeof L!="object")throw TypeError("options must be an object");var j=Object.keys(L),fe=j.length,ve,ae,J;function pe(Le){throw Error('Invalid "'+ve+'" option value'+(Le?". Reason: "+Le:""))}for(var Ee=0;Ee<fe;Ee++){if(ve=j[Ee],!se&&!n.call(F,ve))throw Error('Unknown "'+ve+'" option');ae=L[ve],ae!==t&&(J=X[ve],Y[ve]=J?J(ae,pe):ae)}return Y}function M(L,F){return(typeof L!="function"||!L.hasOwnProperty("prototype"))&&F("value must be a constructor"),L}function T(L){var F="value must be type of "+L.join("|"),X=L.length,se=L[0],Y=L[1];return X===1?function(j,fe){if(typeof j===se)return j;fe(F)}:X===2?function(j,fe){var ve=typeof j;if(ve===se||ve===Y)return j;fe(F)}:function(j,fe){for(var ve=typeof j,ae=X;ae-- >0;)if(ve===L[ae])return j;fe(F)}}var S=T(["function"]),D=T(["object","function"]);function I(L,F,X){var se,Y,j=0,fe,ve=new L(function(ae,J,pe){X=E(X,{timeout:0,overload:!1},{timeout:function(Ce,ne){return Ce*=1,(typeof Ce!="number"||Ce<0||!Number.isFinite(Ce))&&ne("timeout must be a positive number"),Ce}}),se=!X.overload&&typeof L.prototype.cancel=="function"&&typeof pe=="function";function Ee(){Y&&(Y=null),j&&(clearTimeout(j),j=0)}var Le=function(Ce){Ee(),ae(Ce)},Re=function(Ce){Ee(),J(Ce)};se?F(Le,Re,pe):(Y=[function(Ce){Re(Ce||Error("canceled"))}],F(Le,Re,function(Ce){if(fe)throw Error("Unable to subscribe on cancel event asynchronously");if(typeof Ce!="function")throw TypeError("onCancel callback must be a function");Y.push(Ce)}),fe=!0),X.timeout>0&&(j=setTimeout(function(){var Ce=Error("timeout");Ce.code="ETIMEDOUT",j=0,ve.cancel(Ce),J(Ce)},X.timeout))});return se||(ve.cancel=function(ae){if(!!Y){for(var J=Y.length,pe=1;pe<J;pe++)Y[pe](ae);Y[0](ae),Y=null}}),ve}function P(L){var F=this._observers;if(!F)return-1;for(var X=F.length,se=0;se<X;se++)if(F[se]._target===L)return se;return-1}function B(L,F,X,se,Y){if(!X)return null;if(se===0){var j=typeof F;if(j==="string"){var fe,ve,ae=0,J=0,pe=this.delimiter,Ee=pe.length;if((ve=F.indexOf(pe))!==-1){fe=new Array(5);do fe[ae++]=F.slice(J,ve),J=ve+Ee;while((ve=F.indexOf(pe,J))!==-1);fe[ae++]=F.slice(J),F=fe,Y=ae}else F=[F],Y=1}else j==="object"?Y=F.length:(F=[F],Y=1)}var Le=null,Re,Ce,ne,me,ue,Te=F[se],ze=F[se+1],We,et;if(se===Y)X._listeners&&(typeof X._listeners=="function"?(L&&L.push(X._listeners),Le=[X]):(L&&L.push.apply(L,X._listeners),Le=[X]));else if(Te==="*"){for(We=d(X),ve=We.length;ve-- >0;)Re=We[ve],Re!=="_listeners"&&(et=B(L,F,X[Re],se+1,Y),et&&(Le?Le.push.apply(Le,et):Le=et));return Le}else if(Te==="**"){for(ue=se+1===Y||se+2===Y&&ze==="*",ue&&X._listeners&&(Le=B(L,F,X,Y,Y)),We=d(X),ve=We.length;ve-- >0;)Re=We[ve],Re!=="_listeners"&&(Re==="*"||Re==="**"?(X[Re]._listeners&&!ue&&(et=B(L,F,X[Re],Y,Y),et&&(Le?Le.push.apply(Le,et):Le=et)),et=B(L,F,X[Re],se,Y)):Re===ze?et=B(L,F,X[Re],se+2,Y):et=B(L,F,X[Re],se,Y),et&&(Le?Le.push.apply(Le,et):Le=et));return Le}else X[Te]&&(Le=B(L,F,X[Te],se+1,Y));if(Ce=X["*"],Ce&&B(L,F,Ce,se+1,Y),ne=X["**"],ne)if(se<Y)for(ne._listeners&&B(L,F,ne,Y,Y),We=d(ne),ve=We.length;ve-- >0;)Re=We[ve],Re!=="_listeners"&&(Re===ze?B(L,F,ne[Re],se+2,Y):Re===Te?B(L,F,ne[Re],se+1,Y):(me={},me[Re]=ne[Re],B(L,F,{"**":me},se+1,Y)));else ne._listeners?B(L,F,ne,Y,Y):ne["*"]&&ne["*"]._listeners&&B(L,F,ne["*"],Y,Y);return Le}function $(L,F,X){var se=0,Y=0,j,fe=this.delimiter,ve=fe.length,ae;if(typeof L=="string")if((j=L.indexOf(fe))!==-1){ae=new Array(5);do ae[se++]=L.slice(Y,j),Y=j+ve;while((j=L.indexOf(fe,Y))!==-1);ae[se++]=L.slice(Y)}else ae=[L],se=1;else ae=L,se=L.length;if(se>1){for(j=0;j+1<se;j++)if(ae[j]==="**"&&ae[j+1]==="**")return}var J=this.listenerTree,pe;for(j=0;j<se;j++)if(pe=ae[j],J=J[pe]||(J[pe]={}),j===se-1)return J._listeners?(typeof J._listeners=="function"&&(J._listeners=[J._listeners]),X?J._listeners.unshift(F):J._listeners.push(F),!J._listeners.warned&&this._maxListeners>0&&J._listeners.length>this._maxListeners&&(J._listeners.warned=!0,g.call(this,J._listeners.length,pe))):J._listeners=F,!0;return!0}function q(L,F,X,se){for(var Y=d(L),j=Y.length,fe,ve,ae,J=L._listeners,pe;j-- >0;)ve=Y[j],fe=L[ve],ve==="_listeners"?ae=X:ae=X?X.concat(ve):[ve],pe=se||typeof ve=="symbol",J&&F.push(pe?ae:ae.join(this.delimiter)),typeof fe=="object"&&q.call(this,fe,F,ae,pe);return F}function G(L){for(var F=d(L),X=F.length,se,Y,j;X-- >0;)Y=F[X],se=L[Y],se&&(j=!0,Y!=="_listeners"&&!G(se)&&delete L[Y]);return j}function H(L,F,X){this.emitter=L,this.event=F,this.listener=X}H.prototype.off=function(){return this.emitter.off(this.event,this.listener),this};function z(L,F,X){if(X===!0)Y=!0;else if(X===!1)se=!0;else{if(!X||typeof X!="object")throw TypeError("options should be an object or true");var se=X.async,Y=X.promisify,j=X.nextTick,fe=X.objectify}if(se||j||Y){var ve=F,ae=F._origin||F;if(j&&!i)throw Error("process.nextTick is not supported");Y===t&&(Y=F.constructor.name==="AsyncFunction"),F=function(){var J=arguments,pe=this,Ee=this.event;return Y?j?Promise.resolve():new Promise(function(Le){c(Le)}).then(function(){return pe.event=Ee,ve.apply(pe,J)}):(j?process.nextTick:c)(function(){pe.event=Ee,ve.apply(pe,J)})},F._async=!0,F._origin=ae}return[F,fe?new H(this,L,F):this]}function O(L){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,h.call(this,L)}O.EventEmitter2=O,O.prototype.listenTo=function(L,F,X){if(typeof L!="object")throw TypeError("target musts be an object");var se=this;X=E(X,{on:t,off:t,reducers:t},{on:S,off:S,reducers:D});function Y(j){if(typeof j!="object")throw TypeError("events must be an object");var fe=X.reducers,ve=P.call(se,L),ae;ve===-1?ae=new _(se,L,X):ae=se._observers[ve];for(var J=d(j),pe=J.length,Ee,Le=typeof fe=="function",Re=0;Re<pe;Re++)Ee=J[Re],ae.subscribe(Ee,j[Ee]||Ee,Le?fe:fe&&fe[Ee])}return e(F)?Y(x(F)):Y(typeof F=="string"?x(F.split(/\s+/)):F),this},O.prototype.stopListeningTo=function(L,F){var X=this._observers;if(!X)return!1;var se=X.length,Y,j=!1;if(L&&typeof L!="object")throw TypeError("target should be an object");for(;se-- >0;)Y=X[se],(!L||Y._target===L)&&(Y.unsubscribe(F),j=!0);return j},O.prototype.delimiter=".",O.prototype.setMaxListeners=function(L){L!==t&&(this._maxListeners=L,this._conf||(this._conf={}),this._conf.maxListeners=L)},O.prototype.getMaxListeners=function(){return this._maxListeners},O.prototype.event="",O.prototype.once=function(L,F,X){return this._once(L,F,!1,X)},O.prototype.prependOnceListener=function(L,F,X){return this._once(L,F,!0,X)},O.prototype._once=function(L,F,X,se){return this._many(L,1,F,X,se)},O.prototype.many=function(L,F,X,se){return this._many(L,F,X,!1,se)},O.prototype.prependMany=function(L,F,X,se){return this._many(L,F,X,!0,se)},O.prototype._many=function(L,F,X,se,Y){var j=this;if(typeof X!="function")throw new Error("many only accepts instances of Function");function fe(){return--F===0&&j.off(L,fe),X.apply(this,arguments)}return fe._origin=X,this._on(L,fe,se,Y)},O.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||v.call(this);var L=arguments[0],F,X=this.wildcard,se,Y,j,fe,ve;if(L==="newListener"&&!this._newListener&&!this._events.newListener)return!1;if(X&&(F=L,L!=="newListener"&&L!=="removeListener"&&typeof L=="object")){if(Y=L.length,a){for(j=0;j<Y;j++)if(typeof L[j]=="symbol"){ve=!0;break}}ve||(L=L.join(this.delimiter))}var ae=arguments.length,J;if(this._all&&this._all.length)for(J=this._all.slice(),j=0,Y=J.length;j<Y;j++)switch(this.event=L,ae){case 1:J[j].call(this,L);break;case 2:J[j].call(this,L,arguments[1]);break;case 3:J[j].call(this,L,arguments[1],arguments[2]);break;default:J[j].apply(this,arguments)}if(X)J=[],B.call(this,J,F,this.listenerTree,0,Y);else if(J=this._events[L],typeof J=="function"){switch(this.event=L,ae){case 1:J.call(this);break;case 2:J.call(this,arguments[1]);break;case 3:J.call(this,arguments[1],arguments[2]);break;default:for(se=new Array(ae-1),fe=1;fe<ae;fe++)se[fe-1]=arguments[fe];J.apply(this,se)}return!0}else J&&(J=J.slice());if(J&&J.length){if(ae>3)for(se=new Array(ae-1),fe=1;fe<ae;fe++)se[fe-1]=arguments[fe];for(j=0,Y=J.length;j<Y;j++)switch(this.event=L,ae){case 1:J[j].call(this);break;case 2:J[j].call(this,arguments[1]);break;case 3:J[j].call(this,arguments[1],arguments[2]);break;default:J[j].apply(this,se)}return!0}else if(!this.ignoreErrors&&!this._all&&L==="error")throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},O.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||v.call(this);var L=arguments[0],F=this.wildcard,X,se,Y,j,fe,ve;if(L==="newListener"&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(F&&(X=L,L!=="newListener"&&L!=="removeListener"&&typeof L=="object")){if(j=L.length,a){for(fe=0;fe<j;fe++)if(typeof L[fe]=="symbol"){se=!0;break}}se||(L=L.join(this.delimiter))}var ae=[],J=arguments.length,pe;if(this._all)for(fe=0,j=this._all.length;fe<j;fe++)switch(this.event=L,J){case 1:ae.push(this._all[fe].call(this,L));break;case 2:ae.push(this._all[fe].call(this,L,arguments[1]));break;case 3:ae.push(this._all[fe].call(this,L,arguments[1],arguments[2]));break;default:ae.push(this._all[fe].apply(this,arguments))}if(F?(pe=[],B.call(this,pe,X,this.listenerTree,0)):pe=this._events[L],typeof pe=="function")switch(this.event=L,J){case 1:ae.push(pe.call(this));break;case 2:ae.push(pe.call(this,arguments[1]));break;case 3:ae.push(pe.call(this,arguments[1],arguments[2]));break;default:for(Y=new Array(J-1),ve=1;ve<J;ve++)Y[ve-1]=arguments[ve];ae.push(pe.apply(this,Y))}else if(pe&&pe.length){if(pe=pe.slice(),J>3)for(Y=new Array(J-1),ve=1;ve<J;ve++)Y[ve-1]=arguments[ve];for(fe=0,j=pe.length;fe<j;fe++)switch(this.event=L,J){case 1:ae.push(pe[fe].call(this));break;case 2:ae.push(pe[fe].call(this,arguments[1]));break;case 3:ae.push(pe[fe].call(this,arguments[1],arguments[2]));break;default:ae.push(pe[fe].apply(this,Y))}}else if(!this.ignoreErrors&&!this._all&&L==="error")return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(ae)},O.prototype.on=function(L,F,X){return this._on(L,F,!1,X)},O.prototype.prependListener=function(L,F,X){return this._on(L,F,!0,X)},O.prototype.onAny=function(L){return this._onAny(L,!1)},O.prototype.prependAny=function(L){return this._onAny(L,!0)},O.prototype.addListener=O.prototype.on,O.prototype._onAny=function(L,F){if(typeof L!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),F?this._all.unshift(L):this._all.push(L),this},O.prototype._on=function(L,F,X,se){if(typeof L=="function")return this._onAny(L,F),this;if(typeof F!="function")throw new Error("on only accepts instances of Function");this._events||v.call(this);var Y=this,j;return se!==t&&(j=z.call(this,L,F,se),F=j[0],Y=j[1]),this._newListener&&this.emit("newListener",L,F),this.wildcard?($.call(this,L,F,X),Y):(this._events[L]?(typeof this._events[L]=="function"&&(this._events[L]=[this._events[L]]),X?this._events[L].unshift(F):this._events[L].push(F),!this._events[L].warned&&this._maxListeners>0&&this._events[L].length>this._maxListeners&&(this._events[L].warned=!0,g.call(this,this._events[L].length,L))):this._events[L]=F,Y)},O.prototype.off=function(L,F){if(typeof F!="function")throw new Error("removeListener only takes instances of Function");var X,se=[];if(this.wildcard){var Y=typeof L=="string"?L.split(this.delimiter):L.slice();if(se=B.call(this,null,Y,this.listenerTree,0),!se)return this}else{if(!this._events[L])return this;X=this._events[L],se.push({_listeners:X})}for(var j=0;j<se.length;j++){var fe=se[j];if(X=fe._listeners,e(X)){for(var ve=-1,ae=0,J=X.length;ae<J;ae++)if(X[ae]===F||X[ae].listener&&X[ae].listener===F||X[ae]._origin&&X[ae]._origin===F){ve=ae;break}if(ve<0)continue;return this.wildcard?fe._listeners.splice(ve,1):this._events[L].splice(ve,1),X.length===0&&(this.wildcard?delete fe._listeners:delete this._events[L]),this._removeListener&&this.emit("removeListener",L,F),this}else(X===F||X.listener&&X.listener===F||X._origin&&X._origin===F)&&(this.wildcard?delete fe._listeners:delete this._events[L],this._removeListener&&this.emit("removeListener",L,F))}return this.listenerTree&&G(this.listenerTree),this},O.prototype.offAny=function(L){var F=0,X=0,se;if(L&&this._all&&this._all.length>0){for(se=this._all,F=0,X=se.length;F<X;F++)if(L===se[F])return se.splice(F,1),this._removeListener&&this.emit("removeListenerAny",L),this}else{if(se=this._all,this._removeListener)for(F=0,X=se.length;F<X;F++)this.emit("removeListenerAny",se[F]);this._all=[]}return this},O.prototype.removeListener=O.prototype.off,O.prototype.removeAllListeners=function(L){if(L===t)return!this._events||v.call(this),this;if(this.wildcard){var F=B.call(this,null,L,this.listenerTree,0),X,se;if(!F)return this;for(se=0;se<F.length;se++)X=F[se],X._listeners=null;this.listenerTree&&G(this.listenerTree)}else this._events&&(this._events[L]=null);return this},O.prototype.listeners=function(L){var F=this._events,X,se,Y,j,fe;if(L===t){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!F)return[];for(X=d(F),j=X.length,Y=[];j-- >0;)se=F[X[j]],typeof se=="function"?Y.push(se):Y.push.apply(Y,se);return Y}else{if(this.wildcard){if(fe=this.listenerTree,!fe)return[];var ve=[],ae=typeof L=="string"?L.split(this.delimiter):L.slice();return B.call(this,ve,ae,fe,0),ve}return F?(se=F[L],se?typeof se=="function"?[se]:se:[]):[]}},O.prototype.eventNames=function(L){var F=this._events;return this.wildcard?q.call(this,this.listenerTree,[],null,L):F?d(F):[]},O.prototype.listenerCount=function(L){return this.listeners(L).length},O.prototype.hasListeners=function(L){if(this.wildcard){var F=[],X=typeof L=="string"?L.split(this.delimiter):L.slice();return B.call(this,F,X,this.listenerTree,0),F.length>0}var se=this._events,Y=this._all;return!!(Y&&Y.length||se&&(L===t?d(se).length:se[L]))},O.prototype.listenersAny=function(){return this._all?this._all:[]},O.prototype.waitFor=function(L,F){var X=this,se=typeof F;return se==="number"?F={timeout:F}:se==="function"&&(F={filter:F}),F=E(F,{timeout:0,filter:t,handleError:!1,Promise,overload:!1},{filter:S,Promise:M}),I(F.Promise,function(Y,j,fe){function ve(){var ae=F.filter;if(!(ae&&!ae.apply(X,arguments)))if(X.off(L,ve),F.handleError){var J=arguments[0];J?j(J):Y(w.apply(null,arguments).slice(1))}else Y(w.apply(null,arguments))}fe(function(){X.off(L,ve)}),X._on(L,ve,!1)},{timeout:F.timeout,overload:F.overload})};function Q(L,F,X){X=E(X,{Promise,timeout:0,overload:!1},{Promise:M});var se=X.Promise;return I(se,function(Y,j,fe){var ve;if(typeof L.addEventListener=="function"){ve=function(){Y(w.apply(null,arguments))},fe(function(){L.removeEventListener(F,ve)}),L.addEventListener(F,ve,{once:!0});return}var ae=function(){J&&L.removeListener("error",J),Y(w.apply(null,arguments))},J;F!=="error"&&(J=function(pe){L.removeListener(F,ae),j(pe)},L.once("error",J)),fe(function(){J&&L.removeListener("error",J),L.removeListener(F,ae)}),L.once(F,ae)},{timeout:X.timeout,overload:X.overload})}var ie=O.prototype;Object.defineProperties(O,{defaultMaxListeners:{get:function(){return ie._maxListeners},set:function(L){if(typeof L!="number"||L<0||Number.isNaN(L))throw TypeError("n must be a non-negative number");ie._maxListeners=L},enumerable:!0},once:{value:Q,writable:!0,configurable:!0}}),Object.defineProperties(ie,{_maxListeners:{value:r,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),typeof t=="function"&&t.amd?t(function(){return O}):b.exports=O})()})(rs);var wm=Sk;function Sk(b,u,t,n){var e=function(i,a,o,l){u(o,i,a,"left"),u(l,a,i,"right")},r=b.transformX=function(i,a){t(i),t(a);for(var o=[],l=0;l<a.length;l++){for(var c=a[l],d=[],v=0;v<i.length;){var h=[];if(e(i[v],c,d,h),v++,h.length===1)c=h[0];else if(h.length===0){for(var g=v;g<i.length;g++)n(d,i[g]);c=null;break}else{for(var w=r(i.slice(v),h),x=0;x<w[0].length;x++)n(d,w[0][x]);for(var _=0;_<w[1].length;_++)n(o,w[1][_]);c=null;break}}c!=null&&n(o,c),i=d}return[i,o]};b.transform=function(i,a,o){if(!(o==="left"||o==="right"))throw new Error("type must be 'left' or 'right'");return a.length===0?i:i.length===1&&a.length===1?u([],i[0],a[0],o):o==="left"?r(i,a)[0]:r(a,i)[1]}}var km={exports:{}},Eu=km.exports={name:"text0",uri:"http://sharejs.org/types/textv0",create:function(b){if(b!=null&&typeof b!="string")throw new Error("Initial data must be a string");return b||""}},up=function(b,u,t){return b.slice(0,u)+t+b.slice(u)},dp=function(b){if(typeof b.p!="number")throw new Error("component missing position field");if(typeof b.i=="string"==(typeof b.d=="string"))throw new Error("component needs an i or d field");if(b.p<0)throw new Error("position cannot be negative")},Kh=function(b){for(var u=0;u<b.length;u++)dp(b[u])};Eu.apply=function(b,u){var t;Kh(u);for(var n=0;n<u.length;n++){var e=u[n];if(e.i!=null)b=up(b,e.p,e.i);else{if(t=b.slice(e.p,e.p+e.d.length),e.d!==t)throw new Error("Delete component '"+e.d+"' does not match deleted text '"+t+"'");b=b.slice(0,e.p)+b.slice(e.p+e.d.length)}}return b};var Cl=Eu._append=function(b,u){if(!(u.i===""||u.d===""))if(b.length===0)b.push(u);else{var t=b[b.length-1];t.i!=null&&u.i!=null&&t.p<=u.p&&u.p<=t.p+t.i.length?b[b.length-1]={i:up(t.i,u.p-t.p,u.i),p:t.p}:t.d!=null&&u.d!=null&&u.p<=t.p&&t.p<=u.p+u.d.length?b[b.length-1]={d:up(u.d,t.p-u.p,t.d),p:u.p}:b.push(u)}};Eu.compose=function(b,u){Kh(b),Kh(u);for(var t=b.slice(),n=0;n<u.length;n++)Cl(t,u[n]);return t};Eu.normalize=function(b){var u=[];(b.i!=null||b.p!=null)&&(b=[b]);for(var t=0;t<b.length;t++){var n=b[t];n.p==null&&(n.p=0),Cl(u,n)}return u};var cp=function(b,u,t){return u.i!=null?u.p<b||u.p===b&&t?b+u.i.length:b:b<=u.p?b:b<=u.p+u.d.length?u.p:b-u.d.length};Eu.transformCursor=function(b,u,t){for(var n=t==="right",e=0;e<u.length;e++)b=cp(b,u[e],n);return b};var Mk=Eu._tc=function(b,u,t,n){if(dp(u),dp(t),u.i!=null)Cl(b,{i:u.i,p:cp(u.p,t,n==="right")});else if(t.i!=null){var e=u.d;u.p<t.p&&(Cl(b,{d:e.slice(0,t.p-u.p),p:u.p}),e=e.slice(t.p-u.p)),e!==""&&Cl(b,{d:e,p:u.p+t.i.length})}else if(u.p>=t.p+t.d.length)Cl(b,{d:u.d,p:u.p-t.d.length});else if(u.p+u.d.length<=t.p)Cl(b,u);else{var r={d:"",p:u.p};u.p<t.p&&(r.d=u.d.slice(0,t.p-u.p)),u.p+u.d.length>t.p+t.d.length&&(r.d+=u.d.slice(t.p+t.d.length-u.p));var i=Math.max(u.p,t.p),a=Math.min(u.p+u.d.length,t.p+t.d.length),o=u.d.slice(i-u.p,a-u.p),l=t.d.slice(i-t.p,a-t.p);if(o!==l)throw new Error("Delete ops delete different text in the same region of the document");r.d!==""&&(r.p=cp(r.p,t),Cl(b,r))}return b},Tk=function(b){return b.i!=null?{d:b.i,p:b.p}:{i:b.d,p:b.p}};Eu.invert=function(b){b=b.slice().reverse();for(var u=0;u<b.length;u++)b[u]=Tk(b[u]);return b};wm(Eu,Mk,Kh,Cl);var nv=function(b){return Object.prototype.toString.call(b)=="[object Array]"},Ak=function(b){return!!b&&b.constructor===Object},es=function(b){return JSON.parse(JSON.stringify(b))},Jt={name:"json0",uri:"http://sharejs.org/types/JSONv0"},Sl={};Jt.registerSubtype=function(b){Sl[b.name]=b};Jt.create=function(b){return b===void 0?null:es(b)};Jt.invertComponent=function(b){var u={p:b.p};return b.t&&Sl[b.t]&&(u.t=b.t,u.o=Sl[b.t].invert(b.o)),b.si!==void 0&&(u.sd=b.si),b.sd!==void 0&&(u.si=b.sd),b.oi!==void 0&&(u.od=b.oi),b.od!==void 0&&(u.oi=b.od),b.li!==void 0&&(u.ld=b.li),b.ld!==void 0&&(u.li=b.ld),b.na!==void 0&&(u.na=-b.na),b.lm!==void 0&&(u.lm=b.p[b.p.length-1],u.p=b.p.slice(0,b.p.length-1).concat([b.lm])),u};Jt.invert=function(b){for(var u=b.slice().reverse(),t=[],n=0;n<u.length;n++)t.push(Jt.invertComponent(u[n]));return t};Jt.checkValidOp=function(b){for(var u=0;u<b.length;u++)if(!nv(b[u].p))throw new Error("Missing path")};Jt.checkList=function(b){if(!nv(b))throw new Error("Referenced element not a list")};Jt.checkObj=function(b){if(!Ak(b))throw new Error("Referenced element not an object (it was "+JSON.stringify(b)+")")};function Af(b){b.t="text0";var u={p:b.p.pop()};b.si!=null&&(u.i=b.si),b.sd!=null&&(u.d=b.sd),b.o=[u]}function _f(b){b.p.push(b.o[0].p),b.o[0].i!=null&&(b.si=b.o[0].i),b.o[0].d!=null&&(b.sd=b.o[0].d),delete b.t,delete b.o}Jt.apply=function(b,u){Jt.checkValidOp(u),u=es(u);for(var t={data:b},n=0;n<u.length;n++){var e=u[n];(e.si!=null||e.sd!=null)&&Af(e);for(var r=null,i=t,a="data",o=0;o<e.p.length;o++){var l=e.p[o];if(r=i,i=i[a],a=l,r==null)throw new Error("Path invalid")}if(e.t&&e.o!==void 0&&Sl[e.t])i[a]=Sl[e.t].apply(i[a],e.o);else if(e.na!==void 0){if(typeof i[a]!="number")throw new Error("Referenced element not a number");i[a]+=e.na}else if(e.li!==void 0&&e.ld!==void 0)Jt.checkList(i),i[a]=e.li;else if(e.li!==void 0)Jt.checkList(i),i.splice(a,0,e.li);else if(e.ld!==void 0)Jt.checkList(i),i.splice(a,1);else if(e.lm!==void 0){if(Jt.checkList(i),e.lm!=a){var c=i[a];i.splice(a,1),i.splice(e.lm,0,c)}}else if(e.oi!==void 0)Jt.checkObj(i),i[a]=e.oi;else if(e.od!==void 0)Jt.checkObj(i),delete i[a];else throw new Error("invalid / missing instruction in op")}return t.data};Jt.shatter=function(b){for(var u=[],t=0;t<b.length;t++)u.push([b[t]]);return u};Jt.incrementalApply=function(b,u,t){for(var n=0;n<u.length;n++){var e=[u[n]];b=Jt.apply(b,e),t(e,b)}return b};var Nk=Jt.pathMatches=function(b,u,t){if(b.length!=u.length)return!1;for(var n=0;n<b.length;n++)if(b[n]!==u[n]&&(!t||n!==b.length-1))return!1;return!0};Jt.append=function(b,u){if(u=es(u),b.length===0){b.push(u);return}var t=b[b.length-1];if((u.si!=null||u.sd!=null)&&(t.si!=null||t.sd!=null)&&(Af(u),Af(t)),Nk(u.p,t.p))if(u.t&&t.t&&u.t===t.t&&Sl[u.t]){if(t.o=Sl[u.t].compose(t.o,u.o),u.si!=null||u.sd!=null){for(var n=u.p,e=0;e<t.o.length-1;e++)u.o=[t.o.pop()],u.p=n.slice(),_f(u),b.push(u);_f(t)}}else t.na!=null&&u.na!=null?b[b.length-1]={p:t.p,na:t.na+u.na}:t.li!==void 0&&u.li===void 0&&u.ld===t.li?t.ld!==void 0?delete t.li:b.pop():t.od!==void 0&&t.oi===void 0&&u.oi!==void 0&&u.od===void 0?t.oi=u.oi:t.oi!==void 0&&u.od!==void 0?u.oi!==void 0?t.oi=u.oi:t.od!==void 0?delete t.oi:b.pop():u.lm!==void 0&&u.p[u.p.length-1]===u.lm||b.push(u);else(u.si!=null||u.sd!=null)&&(t.si!=null||t.sd!=null)&&(_f(u),_f(t)),b.push(u)};Jt.compose=function(b,u){Jt.checkValidOp(b),Jt.checkValidOp(u);for(var t=es(b),n=0;n<u.length;n++)Jt.append(t,u[n]);return t};Jt.normalize=function(b){var u=[];b=nv(b)?b:[b];for(var t=0;t<b.length;t++){var n=b[t];n.p==null&&(n.p=[]),Jt.append(u,n)}return u};Jt.commonLengthForOps=function(b,u){var t=b.p.length,n=u.p.length;if((b.na!=null||b.t)&&t++,(u.na!=null||u.t)&&n++,t===0)return-1;if(n===0)return null;t--,n--;for(var e=0;e<t;e++){var r=b.p[e];if(e>=n||r!==u.p[e])return null}return t};Jt.canOpAffectPath=function(b,u){return Jt.commonLengthForOps({p:u},b)!=null};Jt.transformComponent=function(b,u,t,n){u=es(u);var e=Jt.commonLengthForOps(t,u),r=Jt.commonLengthForOps(u,t),i=u.p.length,a=t.p.length;if((u.na!=null||u.t)&&i++,(t.na!=null||t.t)&&a++,r!=null&&a>i&&u.p[r]==t.p[r]){if(u.ld!==void 0){var o=es(t);o.p=o.p.slice(i),u.ld=Jt.apply(es(u.ld),[o])}else if(u.od!==void 0){var o=es(t);o.p=o.p.slice(i),u.od=Jt.apply(es(u.od),[o])}}if(e!=null){var l=i==a,o=t;if((u.si!=null||u.sd!=null)&&(t.si!=null||t.sd!=null)&&(Af(u),o=es(t),Af(o)),o.t&&Sl[o.t]){if(u.t&&u.t===o.t){var c=Sl[u.t].transform(u.o,o.o,n);if(u.si!=null||u.sd!=null)for(var d=u.p,v=0;v<c.length;v++)u.o=[c[v]],u.p=d.slice(),_f(u),Jt.append(b,u);else(!nv(c)||c.length>0)&&(u.o=c,Jt.append(b,u));return b}}else if(t.na===void 0){if(t.li!==void 0&&t.ld!==void 0){if(t.p[e]===u.p[e])if(l){if(u.ld!==void 0)if(u.li!==void 0&&n==="left")u.ld=es(t.li);else return b}else return b}else if(t.li!==void 0)u.li!==void 0&&u.ld===void 0&&l&&u.p[e]===t.p[e]?n==="right"&&u.p[e]++:t.p[e]<=u.p[e]&&u.p[e]++,u.lm!==void 0&&l&&t.p[e]<=u.lm&&u.lm++;else if(t.ld!==void 0){if(u.lm!==void 0&&l){if(t.p[e]===u.p[e])return b;var d=t.p[e],h=u.p[e],g=u.lm;(d<g||d===g&&h<g)&&u.lm--}if(t.p[e]<u.p[e])u.p[e]--;else if(t.p[e]===u.p[e]){if(a<i)return b;if(u.ld!==void 0)if(u.li!==void 0)delete u.ld;else return b}}else if(t.lm!==void 0)if(u.lm!==void 0&&i===a){var h=u.p[e],g=u.lm,w=t.p[e],x=t.lm;if(w!==x)if(h===w)if(n==="left")u.p[e]=x,h===g&&(u.lm=x);else return b;else h>w&&u.p[e]--,h>x?u.p[e]++:h===x&&w>x&&(u.p[e]++,h===g&&u.lm++),(g>w||g===w&&g>h)&&u.lm--,g>x?u.lm++:g===x&&(x>w&&g>h||x<w&&g<h?n==="right"&&u.lm++:g>h?u.lm++:g===w&&u.lm--)}else if(u.li!==void 0&&u.ld===void 0&&l){var h=t.p[e],g=t.lm;d=u.p[e],d>h&&u.p[e]--,d>g&&u.p[e]++}else{var h=t.p[e],g=t.lm;d=u.p[e],d===h?u.p[e]=g:(d>h&&u.p[e]--,(d>g||d===g&&h>g)&&u.p[e]++)}else if(t.oi!==void 0&&t.od!==void 0){if(u.p[e]===t.p[e])if(u.oi!==void 0&&l){if(n==="right")return b;u.od=t.oi}else return b}else if(t.oi!==void 0){if(u.oi!==void 0&&u.p[e]===t.p[e])if(n==="left")Jt.append(b,{p:u.p,od:t.oi});else return b}else if(t.od!==void 0&&u.p[e]==t.p[e]){if(!l)return b;if(u.oi!==void 0)delete u.od;else return b}}}return Jt.append(b,u),b};wm(Jt,Jt.transformComponent,Jt.checkValidOp,Jt.append);var Dk=km.exports;Jt.registerSubtype(Dk);var Ik=Jt,_c={type:Ik},Sf={exports:{}};(function(b){var u=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},t=-1,n=1,e=0;u.Diff=function(r,i){return[r,i]},u.prototype.diff_main=function(r,i,a,o){typeof o=="undefined"&&(this.Diff_Timeout<=0?o=Number.MAX_VALUE:o=new Date().getTime()+this.Diff_Timeout*1e3);var l=o;if(r==null||i==null)throw new Error("Null input. (diff_main)");if(r==i)return r?[new u.Diff(e,r)]:[];typeof a=="undefined"&&(a=!0);var c=a,d=this.diff_commonPrefix(r,i),v=r.substring(0,d);r=r.substring(d),i=i.substring(d),d=this.diff_commonSuffix(r,i);var h=r.substring(r.length-d);r=r.substring(0,r.length-d),i=i.substring(0,i.length-d);var g=this.diff_compute_(r,i,c,l);return v&&g.unshift(new u.Diff(e,v)),h&&g.push(new u.Diff(e,h)),this.diff_cleanupMerge(g),g},u.prototype.diff_compute_=function(r,i,a,o){var l;if(!r)return[new u.Diff(n,i)];if(!i)return[new u.Diff(t,r)];var c=r.length>i.length?r:i,d=r.length>i.length?i:r,v=c.indexOf(d);if(v!=-1)return l=[new u.Diff(n,c.substring(0,v)),new u.Diff(e,d),new u.Diff(n,c.substring(v+d.length))],r.length>i.length&&(l[0][0]=l[2][0]=t),l;if(d.length==1)return[new u.Diff(t,r),new u.Diff(n,i)];var h=this.diff_halfMatch_(r,i);if(h){var g=h[0],w=h[1],x=h[2],_=h[3],E=h[4],M=this.diff_main(g,x,a,o),T=this.diff_main(w,_,a,o);return M.concat([new u.Diff(e,E)],T)}return a&&r.length>100&&i.length>100?this.diff_lineMode_(r,i,o):this.diff_bisect_(r,i,o)},u.prototype.diff_lineMode_=function(r,i,a){var o=this.diff_linesToChars_(r,i);r=o.chars1,i=o.chars2;var l=o.lineArray,c=this.diff_main(r,i,!1,a);this.diff_charsToLines_(c,l),this.diff_cleanupSemantic(c),c.push(new u.Diff(e,""));for(var d=0,v=0,h=0,g="",w="";d<c.length;){switch(c[d][0]){case n:h++,w+=c[d][1];break;case t:v++,g+=c[d][1];break;case e:if(v>=1&&h>=1){c.splice(d-v-h,v+h),d=d-v-h;for(var x=this.diff_main(g,w,!1,a),_=x.length-1;_>=0;_--)c.splice(d,0,x[_]);d=d+x.length}h=0,v=0,g="",w="";break}d++}return c.pop(),c},u.prototype.diff_bisect_=function(r,i,a){for(var o=r.length,l=i.length,c=Math.ceil((o+l)/2),d=c,v=2*c,h=new Array(v),g=new Array(v),w=0;w<v;w++)h[w]=-1,g[w]=-1;h[d+1]=0,g[d+1]=0;for(var x=o-l,_=x%2!=0,E=0,M=0,T=0,S=0,D=0;D<c&&!(new Date().getTime()>a);D++){for(var I=-D+E;I<=D-M;I+=2){var P=d+I,B;I==-D||I!=D&&h[P-1]<h[P+1]?B=h[P+1]:B=h[P-1]+1;for(var $=B-I;B<o&&$<l&&r.charAt(B)==i.charAt($);)B++,$++;if(h[P]=B,B>o)M+=2;else if($>l)E+=2;else if(_){var q=d+x-I;if(q>=0&&q<v&&g[q]!=-1){var G=o-g[q];if(B>=G)return this.diff_bisectSplit_(r,i,B,$,a)}}}for(var H=-D+T;H<=D-S;H+=2){var q=d+H,G;H==-D||H!=D&&g[q-1]<g[q+1]?G=g[q+1]:G=g[q-1]+1;for(var z=G-H;G<o&&z<l&&r.charAt(o-G-1)==i.charAt(l-z-1);)G++,z++;if(g[q]=G,G>o)S+=2;else if(z>l)T+=2;else if(!_){var P=d+x-H;if(P>=0&&P<v&&h[P]!=-1){var B=h[P],$=d+B-P;if(G=o-G,B>=G)return this.diff_bisectSplit_(r,i,B,$,a)}}}}return[new u.Diff(t,r),new u.Diff(n,i)]},u.prototype.diff_bisectSplit_=function(r,i,a,o,l){var c=r.substring(0,a),d=i.substring(0,o),v=r.substring(a),h=i.substring(o),g=this.diff_main(c,d,!1,l),w=this.diff_main(v,h,!1,l);return g.concat(w)},u.prototype.diff_linesToChars_=function(r,i){var a=[],o={};a[0]="";function l(h){for(var g="",w=0,x=-1,_=a.length;x<h.length-1;){x=h.indexOf(`
`,w),x==-1&&(x=h.length-1);var E=h.substring(w,x+1);(o.hasOwnProperty?o.hasOwnProperty(E):o[E]!==void 0)?g+=String.fromCharCode(o[E]):(_==c&&(E=h.substring(w),x=h.length),g+=String.fromCharCode(_),o[E]=_,a[_++]=E),w=x+1}return g}var c=4e4,d=l(r);c=65535;var v=l(i);return{chars1:d,chars2:v,lineArray:a}},u.prototype.diff_charsToLines_=function(r,i){for(var a=0;a<r.length;a++){for(var o=r[a][1],l=[],c=0;c<o.length;c++)l[c]=i[o.charCodeAt(c)];r[a][1]=l.join("")}},u.prototype.diff_commonPrefix=function(r,i){if(!r||!i||r.charAt(0)!=i.charAt(0))return 0;for(var a=0,o=Math.min(r.length,i.length),l=o,c=0;a<l;)r.substring(c,l)==i.substring(c,l)?(a=l,c=a):o=l,l=Math.floor((o-a)/2+a);return l},u.prototype.diff_commonSuffix=function(r,i){if(!r||!i||r.charAt(r.length-1)!=i.charAt(i.length-1))return 0;for(var a=0,o=Math.min(r.length,i.length),l=o,c=0;a<l;)r.substring(r.length-l,r.length-c)==i.substring(i.length-l,i.length-c)?(a=l,c=a):o=l,l=Math.floor((o-a)/2+a);return l},u.prototype.diff_commonOverlap_=function(r,i){var a=r.length,o=i.length;if(a==0||o==0)return 0;a>o?r=r.substring(a-o):a<o&&(i=i.substring(0,a));var l=Math.min(a,o);if(r==i)return l;for(var c=0,d=1;;){var v=r.substring(l-d),h=i.indexOf(v);if(h==-1)return c;d+=h,(h==0||r.substring(l-d)==i.substring(0,d))&&(c=d,d++)}},u.prototype.diff_halfMatch_=function(r,i){if(this.Diff_Timeout<=0)return null;var a=r.length>i.length?r:i,o=r.length>i.length?i:r;if(a.length<4||o.length*2<a.length)return null;var l=this;function c(M,T,S){for(var D=M.substring(S,S+Math.floor(M.length/4)),I=-1,P="",B,$,q,G;(I=T.indexOf(D,I+1))!=-1;){var H=l.diff_commonPrefix(M.substring(S),T.substring(I)),z=l.diff_commonSuffix(M.substring(0,S),T.substring(0,I));P.length<z+H&&(P=T.substring(I-z,I)+T.substring(I,I+H),B=M.substring(0,S-z),$=M.substring(S+H),q=T.substring(0,I-z),G=T.substring(I+H))}return P.length*2>=M.length?[B,$,q,G,P]:null}var d=c(a,o,Math.ceil(a.length/4)),v=c(a,o,Math.ceil(a.length/2)),h;if(!d&&!v)return null;v?d?h=d[4].length>v[4].length?d:v:h=v:h=d;var g,w,x,_;r.length>i.length?(g=h[0],w=h[1],x=h[2],_=h[3]):(x=h[0],_=h[1],g=h[2],w=h[3]);var E=h[4];return[g,w,x,_,E]},u.prototype.diff_cleanupSemantic=function(r){for(var i=!1,a=[],o=0,l=null,c=0,d=0,v=0,h=0,g=0;c<r.length;)r[c][0]==e?(a[o++]=c,d=h,v=g,h=0,g=0,l=r[c][1]):(r[c][0]==n?h+=r[c][1].length:g+=r[c][1].length,l&&l.length<=Math.max(d,v)&&l.length<=Math.max(h,g)&&(r.splice(a[o-1],0,new u.Diff(t,l)),r[a[o-1]+1][0]=n,o--,o--,c=o>0?a[o-1]:-1,d=0,v=0,h=0,g=0,l=null,i=!0)),c++;for(i&&this.diff_cleanupMerge(r),this.diff_cleanupSemanticLossless(r),c=1;c<r.length;){if(r[c-1][0]==t&&r[c][0]==n){var w=r[c-1][1],x=r[c][1],_=this.diff_commonOverlap_(w,x),E=this.diff_commonOverlap_(x,w);_>=E?(_>=w.length/2||_>=x.length/2)&&(r.splice(c,0,new u.Diff(e,x.substring(0,_))),r[c-1][1]=w.substring(0,w.length-_),r[c+1][1]=x.substring(_),c++):(E>=w.length/2||E>=x.length/2)&&(r.splice(c,0,new u.Diff(e,w.substring(0,E))),r[c-1][0]=n,r[c-1][1]=x.substring(0,x.length-E),r[c+1][0]=t,r[c+1][1]=w.substring(E),c++),c++}c++}},u.prototype.diff_cleanupSemanticLossless=function(r){function i(E,M){if(!E||!M)return 6;var T=E.charAt(E.length-1),S=M.charAt(0),D=T.match(u.nonAlphaNumericRegex_),I=S.match(u.nonAlphaNumericRegex_),P=D&&T.match(u.whitespaceRegex_),B=I&&S.match(u.whitespaceRegex_),$=P&&T.match(u.linebreakRegex_),q=B&&S.match(u.linebreakRegex_),G=$&&E.match(u.blanklineEndRegex_),H=q&&M.match(u.blanklineStartRegex_);return G||H?5:$||q?4:D&&!P&&B?3:P||B?2:D||I?1:0}for(var a=1;a<r.length-1;){if(r[a-1][0]==e&&r[a+1][0]==e){var o=r[a-1][1],l=r[a][1],c=r[a+1][1],d=this.diff_commonSuffix(o,l);if(d){var v=l.substring(l.length-d);o=o.substring(0,o.length-d),l=v+l.substring(0,l.length-d),c=v+c}for(var h=o,g=l,w=c,x=i(o,l)+i(l,c);l.charAt(0)===c.charAt(0);){o+=l.charAt(0),l=l.substring(1)+c.charAt(0),c=c.substring(1);var _=i(o,l)+i(l,c);_>=x&&(x=_,h=o,g=l,w=c)}r[a-1][1]!=h&&(h?r[a-1][1]=h:(r.splice(a-1,1),a--),r[a][1]=g,w?r[a+1][1]=w:(r.splice(a+1,1),a--))}a++}},u.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,u.whitespaceRegex_=/\s/,u.linebreakRegex_=/[\r\n]/,u.blanklineEndRegex_=/\n\r?\n$/,u.blanklineStartRegex_=/^\r?\n\r?\n/,u.prototype.diff_cleanupEfficiency=function(r){for(var i=!1,a=[],o=0,l=null,c=0,d=!1,v=!1,h=!1,g=!1;c<r.length;)r[c][0]==e?(r[c][1].length<this.Diff_EditCost&&(h||g)?(a[o++]=c,d=h,v=g,l=r[c][1]):(o=0,l=null),h=g=!1):(r[c][0]==t?g=!0:h=!0,l&&(d&&v&&h&&g||l.length<this.Diff_EditCost/2&&d+v+h+g==3)&&(r.splice(a[o-1],0,new u.Diff(t,l)),r[a[o-1]+1][0]=n,o--,l=null,d&&v?(h=g=!0,o=0):(o--,c=o>0?a[o-1]:-1,h=g=!1),i=!0)),c++;i&&this.diff_cleanupMerge(r)},u.prototype.diff_cleanupMerge=function(r){r.push(new u.Diff(e,""));for(var i=0,a=0,o=0,l="",c="",d;i<r.length;)switch(r[i][0]){case n:o++,c+=r[i][1],i++;break;case t:a++,l+=r[i][1],i++;break;case e:a+o>1?(a!==0&&o!==0&&(d=this.diff_commonPrefix(c,l),d!==0&&(i-a-o>0&&r[i-a-o-1][0]==e?r[i-a-o-1][1]+=c.substring(0,d):(r.splice(0,0,new u.Diff(e,c.substring(0,d))),i++),c=c.substring(d),l=l.substring(d)),d=this.diff_commonSuffix(c,l),d!==0&&(r[i][1]=c.substring(c.length-d)+r[i][1],c=c.substring(0,c.length-d),l=l.substring(0,l.length-d))),i-=a+o,r.splice(i,a+o),l.length&&(r.splice(i,0,new u.Diff(t,l)),i++),c.length&&(r.splice(i,0,new u.Diff(n,c)),i++),i++):i!==0&&r[i-1][0]==e?(r[i-1][1]+=r[i][1],r.splice(i,1)):i++,o=0,a=0,l="",c="";break}r[r.length-1][1]===""&&r.pop();var v=!1;for(i=1;i<r.length-1;)r[i-1][0]==e&&r[i+1][0]==e&&(r[i][1].substring(r[i][1].length-r[i-1][1].length)==r[i-1][1]?(r[i][1]=r[i-1][1]+r[i][1].substring(0,r[i][1].length-r[i-1][1].length),r[i+1][1]=r[i-1][1]+r[i+1][1],r.splice(i-1,1),v=!0):r[i][1].substring(0,r[i+1][1].length)==r[i+1][1]&&(r[i-1][1]+=r[i+1][1],r[i][1]=r[i][1].substring(r[i+1][1].length)+r[i+1][1],r.splice(i+1,1),v=!0)),i++;v&&this.diff_cleanupMerge(r)},u.prototype.diff_xIndex=function(r,i){var a=0,o=0,l=0,c=0,d;for(d=0;d<r.length&&(r[d][0]!==n&&(a+=r[d][1].length),r[d][0]!==t&&(o+=r[d][1].length),!(a>i));d++)l=a,c=o;return r.length!=d&&r[d][0]===t?c:c+(i-l)},u.prototype.diff_prettyHtml=function(r){for(var i=[],a=/&/g,o=/</g,l=/>/g,c=/\n/g,d=0;d<r.length;d++){var v=r[d][0],h=r[d][1],g=h.replace(a,"&amp;").replace(o,"&lt;").replace(l,"&gt;").replace(c,"&para;<br>");switch(v){case n:i[d]='<ins style="background:#e6ffe6;">'+g+"</ins>";break;case t:i[d]='<del style="background:#ffe6e6;">'+g+"</del>";break;case e:i[d]="<span>"+g+"</span>";break}}return i.join("")},u.prototype.diff_text1=function(r){for(var i=[],a=0;a<r.length;a++)r[a][0]!==n&&(i[a]=r[a][1]);return i.join("")},u.prototype.diff_text2=function(r){for(var i=[],a=0;a<r.length;a++)r[a][0]!==t&&(i[a]=r[a][1]);return i.join("")},u.prototype.diff_levenshtein=function(r){for(var i=0,a=0,o=0,l=0;l<r.length;l++){var c=r[l][0],d=r[l][1];switch(c){case n:a+=d.length;break;case t:o+=d.length;break;case e:i+=Math.max(a,o),a=0,o=0;break}}return i+=Math.max(a,o),i},u.prototype.diff_toDelta=function(r){for(var i=[],a=0;a<r.length;a++)switch(r[a][0]){case n:i[a]="+"+encodeURI(r[a][1]);break;case t:i[a]="-"+r[a][1].length;break;case e:i[a]="="+r[a][1].length;break}return i.join("	").replace(/%20/g," ")},u.prototype.diff_fromDelta=function(r,i){for(var a=[],o=0,l=0,c=i.split(/\t/g),d=0;d<c.length;d++){var v=c[d].substring(1);switch(c[d].charAt(0)){case"+":try{a[o++]=new u.Diff(n,decodeURI(v))}catch{throw new Error("Illegal escape in diff_fromDelta: "+v)}break;case"-":case"=":var h=parseInt(v,10);if(isNaN(h)||h<0)throw new Error("Invalid number in diff_fromDelta: "+v);var g=r.substring(l,l+=h);c[d].charAt(0)=="="?a[o++]=new u.Diff(e,g):a[o++]=new u.Diff(t,g);break;default:if(c[d])throw new Error("Invalid diff operation in diff_fromDelta: "+c[d])}}if(l!=r.length)throw new Error("Delta length ("+l+") does not equal source text length ("+r.length+").");return a},u.prototype.match_main=function(r,i,a){if(r==null||i==null||a==null)throw new Error("Null input. (match_main)");return a=Math.max(0,Math.min(a,r.length)),r==i?0:r.length?r.substring(a,a+i.length)==i?a:this.match_bitap_(r,i,a):-1},u.prototype.match_bitap_=function(r,i,a){if(i.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var o=this.match_alphabet_(i),l=this;function c(B,$){var q=B/i.length,G=Math.abs(a-$);return l.Match_Distance?q+G/l.Match_Distance:G?1:q}var d=this.Match_Threshold,v=r.indexOf(i,a);v!=-1&&(d=Math.min(c(0,v),d),v=r.lastIndexOf(i,a+i.length),v!=-1&&(d=Math.min(c(0,v),d)));var h=1<<i.length-1;v=-1;for(var g,w,x=i.length+r.length,_,E=0;E<i.length;E++){for(g=0,w=x;g<w;)c(E,a+w)<=d?g=w:x=w,w=Math.floor((x-g)/2+g);x=w;var M=Math.max(1,a-w+1),T=Math.min(a+w,r.length)+i.length,S=Array(T+2);S[T+1]=(1<<E)-1;for(var D=T;D>=M;D--){var I=o[r.charAt(D-1)];if(E===0?S[D]=(S[D+1]<<1|1)&I:S[D]=(S[D+1]<<1|1)&I|((_[D+1]|_[D])<<1|1)|_[D+1],S[D]&h){var P=c(E,D-1);if(P<=d)if(d=P,v=D-1,v>a)M=Math.max(1,2*a-v);else break}}if(c(E+1,a)>d)break;_=S}return v},u.prototype.match_alphabet_=function(r){for(var i={},a=0;a<r.length;a++)i[r.charAt(a)]=0;for(var a=0;a<r.length;a++)i[r.charAt(a)]|=1<<r.length-a-1;return i},u.prototype.patch_addContext_=function(r,i){if(i.length!=0){if(r.start2===null)throw Error("patch not initialized");for(var a=i.substring(r.start2,r.start2+r.length1),o=0;i.indexOf(a)!=i.lastIndexOf(a)&&a.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)o+=this.Patch_Margin,a=i.substring(r.start2-o,r.start2+r.length1+o);o+=this.Patch_Margin;var l=i.substring(r.start2-o,r.start2);l&&r.diffs.unshift(new u.Diff(e,l));var c=i.substring(r.start2+r.length1,r.start2+r.length1+o);c&&r.diffs.push(new u.Diff(e,c)),r.start1-=l.length,r.start2-=l.length,r.length1+=l.length+c.length,r.length2+=l.length+c.length}},u.prototype.patch_make=function(r,i,a){var o,l;if(typeof r=="string"&&typeof i=="string"&&typeof a=="undefined")o=r,l=this.diff_main(o,i,!0),l.length>2&&(this.diff_cleanupSemantic(l),this.diff_cleanupEfficiency(l));else if(r&&typeof r=="object"&&typeof i=="undefined"&&typeof a=="undefined")l=r,o=this.diff_text1(l);else if(typeof r=="string"&&i&&typeof i=="object"&&typeof a=="undefined")o=r,l=i;else if(typeof r=="string"&&typeof i=="string"&&a&&typeof a=="object")o=r,l=a;else throw new Error("Unknown call format to patch_make.");if(l.length===0)return[];for(var c=[],d=new u.patch_obj,v=0,h=0,g=0,w=o,x=o,_=0;_<l.length;_++){var E=l[_][0],M=l[_][1];switch(!v&&E!==e&&(d.start1=h,d.start2=g),E){case n:d.diffs[v++]=l[_],d.length2+=M.length,x=x.substring(0,g)+M+x.substring(g);break;case t:d.length1+=M.length,d.diffs[v++]=l[_],x=x.substring(0,g)+x.substring(g+M.length);break;case e:M.length<=2*this.Patch_Margin&&v&&l.length!=_+1?(d.diffs[v++]=l[_],d.length1+=M.length,d.length2+=M.length):M.length>=2*this.Patch_Margin&&v&&(this.patch_addContext_(d,w),c.push(d),d=new u.patch_obj,v=0,w=x,h=g);break}E!==n&&(h+=M.length),E!==t&&(g+=M.length)}return v&&(this.patch_addContext_(d,w),c.push(d)),c},u.prototype.patch_deepCopy=function(r){for(var i=[],a=0;a<r.length;a++){var o=r[a],l=new u.patch_obj;l.diffs=[];for(var c=0;c<o.diffs.length;c++)l.diffs[c]=new u.Diff(o.diffs[c][0],o.diffs[c][1]);l.start1=o.start1,l.start2=o.start2,l.length1=o.length1,l.length2=o.length2,i[a]=l}return i},u.prototype.patch_apply=function(r,i){if(r.length==0)return[i,[]];r=this.patch_deepCopy(r);var a=this.patch_addPadding(r);i=a+i+a,this.patch_splitMax(r);for(var o=0,l=[],c=0;c<r.length;c++){var d=r[c].start2+o,v=this.diff_text1(r[c].diffs),h,g=-1;if(v.length>this.Match_MaxBits?(h=this.match_main(i,v.substring(0,this.Match_MaxBits),d),h!=-1&&(g=this.match_main(i,v.substring(v.length-this.Match_MaxBits),d+v.length-this.Match_MaxBits),(g==-1||h>=g)&&(h=-1))):h=this.match_main(i,v,d),h==-1)l[c]=!1,o-=r[c].length2-r[c].length1;else{l[c]=!0,o=h-d;var w;if(g==-1?w=i.substring(h,h+v.length):w=i.substring(h,g+this.Match_MaxBits),v==w)i=i.substring(0,h)+this.diff_text2(r[c].diffs)+i.substring(h+v.length);else{var x=this.diff_main(v,w,!1);if(v.length>this.Match_MaxBits&&this.diff_levenshtein(x)/v.length>this.Patch_DeleteThreshold)l[c]=!1;else{this.diff_cleanupSemanticLossless(x);for(var _=0,E,M=0;M<r[c].diffs.length;M++){var T=r[c].diffs[M];T[0]!==e&&(E=this.diff_xIndex(x,_)),T[0]===n?i=i.substring(0,h+E)+T[1]+i.substring(h+E):T[0]===t&&(i=i.substring(0,h+E)+i.substring(h+this.diff_xIndex(x,_+T[1].length))),T[0]!==t&&(_+=T[1].length)}}}}}return i=i.substring(a.length,i.length-a.length),[i,l]},u.prototype.patch_addPadding=function(r){for(var i=this.Patch_Margin,a="",o=1;o<=i;o++)a+=String.fromCharCode(o);for(var o=0;o<r.length;o++)r[o].start1+=i,r[o].start2+=i;var l=r[0],c=l.diffs;if(c.length==0||c[0][0]!=e)c.unshift(new u.Diff(e,a)),l.start1-=i,l.start2-=i,l.length1+=i,l.length2+=i;else if(i>c[0][1].length){var d=i-c[0][1].length;c[0][1]=a.substring(c[0][1].length)+c[0][1],l.start1-=d,l.start2-=d,l.length1+=d,l.length2+=d}if(l=r[r.length-1],c=l.diffs,c.length==0||c[c.length-1][0]!=e)c.push(new u.Diff(e,a)),l.length1+=i,l.length2+=i;else if(i>c[c.length-1][1].length){var d=i-c[c.length-1][1].length;c[c.length-1][1]+=a.substring(0,d),l.length1+=d,l.length2+=d}return a},u.prototype.patch_splitMax=function(r){for(var i=this.Match_MaxBits,a=0;a<r.length;a++)if(!(r[a].length1<=i)){var o=r[a];r.splice(a--,1);for(var l=o.start1,c=o.start2,d="";o.diffs.length!==0;){var v=new u.patch_obj,h=!0;for(v.start1=l-d.length,v.start2=c-d.length,d!==""&&(v.length1=v.length2=d.length,v.diffs.push(new u.Diff(e,d)));o.diffs.length!==0&&v.length1<i-this.Patch_Margin;){var g=o.diffs[0][0],w=o.diffs[0][1];g===n?(v.length2+=w.length,c+=w.length,v.diffs.push(o.diffs.shift()),h=!1):g===t&&v.diffs.length==1&&v.diffs[0][0]==e&&w.length>2*i?(v.length1+=w.length,l+=w.length,h=!1,v.diffs.push(new u.Diff(g,w)),o.diffs.shift()):(w=w.substring(0,i-v.length1-this.Patch_Margin),v.length1+=w.length,l+=w.length,g===e?(v.length2+=w.length,c+=w.length):h=!1,v.diffs.push(new u.Diff(g,w)),w==o.diffs[0][1]?o.diffs.shift():o.diffs[0][1]=o.diffs[0][1].substring(w.length))}d=this.diff_text2(v.diffs),d=d.substring(d.length-this.Patch_Margin);var x=this.diff_text1(o.diffs).substring(0,this.Patch_Margin);x!==""&&(v.length1+=x.length,v.length2+=x.length,v.diffs.length!==0&&v.diffs[v.diffs.length-1][0]===e?v.diffs[v.diffs.length-1][1]+=x:v.diffs.push(new u.Diff(e,x))),h||r.splice(++a,0,v)}}},u.prototype.patch_toText=function(r){for(var i=[],a=0;a<r.length;a++)i[a]=r[a];return i.join("")},u.prototype.patch_fromText=function(r){var i=[];if(!r)return i;for(var a=r.split(`
`),o=0,l=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;o<a.length;){var c=a[o].match(l);if(!c)throw new Error("Invalid patch string: "+a[o]);var d=new u.patch_obj;for(i.push(d),d.start1=parseInt(c[1],10),c[2]===""?(d.start1--,d.length1=1):c[2]=="0"?d.length1=0:(d.start1--,d.length1=parseInt(c[2],10)),d.start2=parseInt(c[3],10),c[4]===""?(d.start2--,d.length2=1):c[4]=="0"?d.length2=0:(d.start2--,d.length2=parseInt(c[4],10)),o++;o<a.length;){var v=a[o].charAt(0);try{var h=decodeURI(a[o].substring(1))}catch{throw new Error("Illegal escape in patch_fromText: "+h)}if(v=="-")d.diffs.push(new u.Diff(t,h));else if(v=="+")d.diffs.push(new u.Diff(n,h));else if(v==" ")d.diffs.push(new u.Diff(e,h));else{if(v=="@")break;if(v!=="")throw new Error('Invalid patch mode "'+v+'" in: '+h)}o++}}return i},u.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},u.patch_obj.prototype.toString=function(){var r,i;this.length1===0?r=this.start1+",0":this.length1==1?r=this.start1+1:r=this.start1+1+","+this.length1,this.length2===0?i=this.start2+",0":this.length2==1?i=this.start2+1:i=this.start2+1+","+this.length2;for(var a=["@@ -"+r+" +"+i+` @@
`],o,l=0;l<this.diffs.length;l++){switch(this.diffs[l][0]){case n:o="+";break;case t:o="-";break;case e:o=" ";break}a[l+1]=o+encodeURI(this.diffs[l][1])+`
`}return a.join("").replace(/%20/g," ")},b.exports=u,b.exports.diff_match_patch=u,b.exports.DIFF_DELETE=t,b.exports.DIFF_INSERT=n,b.exports.DIFF_EQUAL=e})(Sf);var Lk=function(){var b=document.getSelection();if(!b.rangeCount)return function(){};for(var u=document.activeElement,t=[],n=0;n<b.rangeCount;n++)t.push(b.getRangeAt(n));switch(u.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":u.blur();break;default:u=null;break}return b.removeAllRanges(),function(){b.type==="Caret"&&b.removeAllRanges(),b.rangeCount||t.forEach(function(e){b.addRange(e)}),u&&u.focus()}},Ok=Lk,Lg={"text/plain":"Text","text/html":"Url",default:"Text"},zk="Copy to clipboard: #{key}, Enter";function Rk(b){var u=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return b.replace(/#{\s*key\s*}/g,u)}function Fk(b,u){var t,n,e,r,i,a,o=!1;u||(u={}),t=u.debug||!1;try{e=Ok(),r=document.createRange(),i=document.getSelection(),a=document.createElement("span"),a.textContent=b,a.style.all="unset",a.style.position="fixed",a.style.top=0,a.style.clip="rect(0, 0, 0, 0)",a.style.whiteSpace="pre",a.style.webkitUserSelect="text",a.style.MozUserSelect="text",a.style.msUserSelect="text",a.style.userSelect="text",a.addEventListener("copy",function(c){if(c.stopPropagation(),u.format)if(c.preventDefault(),typeof c.clipboardData=="undefined"){t&&console.warn("unable to use e.clipboardData"),t&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var d=Lg[u.format]||Lg.default;window.clipboardData.setData(d,b)}else c.clipboardData.clearData(),c.clipboardData.setData(u.format,b);u.onCopy&&(c.preventDefault(),u.onCopy(c.clipboardData))}),document.body.appendChild(a),r.selectNodeContents(a),i.addRange(r);var l=document.execCommand("copy");if(!l)throw new Error("copy command was unsuccessful");o=!0}catch(c){t&&console.error("unable to copy using execCommand: ",c),t&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(u.format||"text",b),u.onCopy&&u.onCopy(window.clipboardData),o=!0}catch(d){t&&console.error("unable to copy using clipboardData: ",d),t&&console.error("falling back to prompt"),n=Rk("message"in u?u.message:zk),window.prompt(n,b)}}finally{i&&(typeof i.removeRange=="function"?i.removeRange(r):i.removeAllRanges()),a&&document.body.removeChild(a),e()}return o}var Bk=Fk,xm={exports:{}};/*!
 2020 Jason Mulligan <jason.mulligan@avoidwork.com>
 @version 6.4.0
*/(function(b,u){(function(t,n){b.exports=n()})(ca,function(){var t=/^(b|B)$/,n={iec:{bits:["b","Kib","Mib","Gib","Tib","Pib","Eib","Zib","Yib"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},e={iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]},r={floor:Math.floor,ceil:Math.ceil};function i(a){var o,l,c,d,v,h,g,w,x,_,E,M,T,S,D,I,P,B,$,q,G,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},z=[],O=0;if(isNaN(a))throw new TypeError("Invalid number");if(c=H.bits===!0,D=H.unix===!0,M=H.pad===!0,l=H.base||2,T=H.round!==void 0?H.round:D?1:2,g=H.locale!==void 0?H.locale:"",w=H.localeOptions||{},I=H.separator!==void 0?H.separator:"",P=H.spacer!==void 0?H.spacer:D?"":" ",$=H.symbols||{},B=l===2&&H.standard||"jedec",E=H.output||"string",v=H.fullform===!0,h=H.fullforms instanceof Array?H.fullforms:[],o=H.exponent!==void 0?H.exponent:-1,q=r[H.roundingMethod]||Math.round,x=(_=Number(a))<0,d=l>2?1e3:1024,G=isNaN(H.precision)===!1?parseInt(H.precision,10):0,x&&(_=-_),(o===-1||isNaN(o))&&(o=Math.floor(Math.log(_)/Math.log(d)))<0&&(o=0),o>8&&(G>0&&(G+=8-o),o=8),E==="exponent")return o;if(_===0)z[0]=0,S=z[1]=D?"":n[B][c?"bits":"bytes"][o];else{O=_/(l===2?Math.pow(2,10*o):Math.pow(1e3,o)),c&&(O*=8)>=d&&o<8&&(O/=d,o++);var Q=Math.pow(10,o>0?T:0);z[0]=q(O*Q)/Q,z[0]===d&&o<8&&H.exponent===void 0&&(z[0]=1,o++),S=z[1]=l===10&&o===1?c?"kb":"kB":n[B][c?"bits":"bytes"][o],D&&(z[1]=B==="jedec"?z[1].charAt(0):o>0?z[1].replace(/B$/,""):z[1],t.test(z[1])&&(z[0]=Math.floor(z[0]),z[1]=""))}if(x&&(z[0]=-z[0]),G>0&&(z[0]=z[0].toPrecision(G)),z[1]=$[z[1]]||z[1],g===!0?z[0]=z[0].toLocaleString():g.length>0?z[0]=z[0].toLocaleString(g,w):I.length>0&&(z[0]=z[0].toString().replace(".",I)),M&&Number.isInteger(z[0])===!1&&T>0){var ie=I||".",L=z[0].toString().split(ie),F=L[1]||"",X=F.length,se=T-X;z[0]="".concat(L[0]).concat(ie).concat(F.padEnd(X+se,"0"))}return v&&(z[1]=h[o]?h[o]:e[B][o]+(c?"bit":"byte")+(z[0]===1?"":"s")),E==="array"?z:E==="object"?{value:z[0],symbol:z[1],exponent:o,unit:S}:z.join(P)}return i.partial=function(a){return function(o){return i(o,a)}},i})})(xm);var Og=xm.exports,Pk=function(){function b(u){if(Fe(this,b),this.options={limitHeight:5e3,canvasCache:[],canvasCount:0},!u.container)throw new Error("need a cantainer!");this.options=Ie(Ie({},this.options),u),u.container.style["line-height"]="0px"}return Be(b,[{key:"removeCanvas",value:function(){var t=this.options.canvasCache;t==null||t.forEach(function(n){var e;n==null||(e=n.parentElement)===null||e===void 0||e.removeChild(n)}),this.options.canvasCache=[]}},{key:"getCanvas",value:function(t){var n=this.options.canvasCache;return t=t>0?t-1:t,n?n[t]:void 0}},{key:"resize",value:function(t,n){var e=this.options,r=e.limitHeight,i=e.canvasCount,a=e.container,o=this.options.canvasCache,l=Math.ceil(n/(r||0));if(l!==i){this.removeCanvas(),o=[];for(var c=0;c<l;c++){var d=document.createElement("canvas");d.style["vertical-align"]="bottom",d.setAttribute("width",t.toString()),c===l-1?d.setAttribute("height",(n%(r||0)).toString()):d.setAttribute("height",(r||0).toString()),a==null||a.appendChild(d),o.push(d)}this.options.canvasCache=o}else{var v,h=this.getCanvas(l);(v=o)===null||v===void 0||v.forEach(function(g){g.setAttribute("width",t.toString())}),h&&h.setAttribute("height",(n%(r||0)).toString())}}},{key:"handleSingleRect",value:function(t){var n=t.x,e=t.y,r=t.index,i=t.width,a=t.height,o=t.callback,l=this.options.limitHeight,c=this.getCanvas(r);if(c){var d=c.getContext("2d"),v=new DOMRect(n,e-(l||0)*(r-1),i,a);o(Ie(Ie({},v.toJSON()),{},{context:d}))}}},{key:"drawRect",value:function(t){var n=t.x,e=t.y,r=t.width,i=t.height,a=t.fill,o=t.stroke,l=function(v){var h=v.context;!h||(h.fillStyle=a===void 0?"#FFEC3D":a,h.strokeStyle=o===void 0?"#FFEC3D":o,h.fillRect(v.x,v.y,v.width,v.height))},c=new DOMRect(n,e,r,i);this.handleRect(Ie(Ie({},c.toJSON()),{},{callback:l}))}},{key:"handleRect",value:function(t){var n=t.x,e=t.y,r=t.width,i=t.height,a=t.callback,o=this.options.limitHeight,l={x:n+r,y:e+i},c=Math.ceil(e/(o||0)),d=Math.ceil(l.y/(o||0)),v=new DOMRect(n,e,r,i);this.handleSingleRect(Ie(Ie({},v.toJSON()),{},{index:c,callback:a})),c!==d&&this.handleSingleRect(Ie(Ie({},v.toJSON()),{},{index:d,callback:a}))}},{key:"getImageData",value:function(t){var n=t.x,e=t.y,r=t.width,i=t.height,a=this.options.limitHeight,o=Math.ceil(e/(a||0)),l=this.getCanvas(o),c=l==null?void 0:l.getContext("2d");return c==null?void 0:c.getImageData(n,e,r,i)}},{key:"clearRect",value:function(t){var n=t.x,e=t.y,r=t.width,i=t.height,a=function(c){var d=c.context,v=c.x,h=c.y,g=c.width,w=c.height;d==null||d.clearRect(v,h,g,w)},o=new DOMRect(n,e,r,i);this.handleRect(Ie(Ie({},o.toJSON()),{},{callback:a}))}},{key:"clear",value:function(){var t=this.options.canvasCache;t==null||t.forEach(function(n){var e=n.getContext("2d"),r=Number(n.getAttribute("width")),i=Number(n.getAttribute("height"));e==null||e.clearRect(0,0,r,i)})}},{key:"destroy",value:function(){this.removeCanvas()}}]),b}(),lt="data-element",fn="data-id",_u="root",Cu="[".concat(lt,'="').concat(_u,'"]'),Gn="ui",Su="[".concat(lt,'="').concat(Gn,'"]'),Dd="editable",Nn="[".concat(lt,'="').concat(Dd,'"]'),ua="data-transient-attributes",Id="data-transient-element",Kv="am-engine",Hk="am-engine-mobile",fp="am-engine-view",ts="anchor",ns="focus",no="cursor",Np="span[".concat(lt,"=").concat(ts,"],anchor"),Dp="span[".concat(lt,"=").concat(ns,"],focus"),rv="span[".concat(lt,"=").concat(no,"],cursor"),jk="card",Gt="data-card-key",_n="data-ready-card",gi="data-card-type",er="data-card-value",jn="data-card-element",mi="data-card-loading",Ls="data-card-editable",Ar="div[".concat(Gt,"],span[").concat(Gt,"]"),Mc="div[".concat(_n,"],span[").concat(_n,"]"),Zi="span[".concat(jn,"=left]"),Wk="div[".concat(jn,"=center],span[").concat(jn,"=center]"),Yi="span[".concat(jn,"=right]"),Dc="trigger-card-id",Tl=(typeof navigator!="undefined"?navigator:window.navigator).userAgent.toLowerCase(),Vh=typeof navigator=="undefined",Ip=/edge/i.test(Tl),Uk=!Ip&&/chrome/i.test(Tl),zg=/firefox/i.test(Tl),Nf=!Ip&&!Uk&&/safari/i.test(Tl),mt=/mobile/i.test(Tl),qk=/os [\.\_\d]+ like mac os/i.test(Tl),Df=/android/i.test(Tl),Eo=!qk&&/mac os x/i.test(Tl),$k=/windows\s*(?:nt)?\s*[\.\_\d]+/i.test(Tl),If=function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:5;u<5&&(u=5);for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",e=0;e<u;e++)n+=t.charAt(Math.floor(Math.random()*t.length));return n},hp;(function(b){b.UPPER="upper",b.LOWER="lower"})(hp||(hp={}));var vp=function(u){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:hp.LOWER;return u.split("-").map(function(n,e){return t==="upper"||e>0?n.charAt(0).toUpperCase()+n.substr(1):t==="lower"&&e===0?n.charAt(0).toLowerCase()+n.substr(1):n}).join("")},Qh=function(u){var t=function(r){var i=parseInt(r,10).toString(16).toUpperCase();return i.length>1?i:"0"+i},n=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/gi;return u.replace(n,function(e,r,i,a){return"#"+t(r)+t(i)+t(a)})},Gk=function(u){for(var t={},n=/\s+(?:([\w\-:]+)|(?:([\w\-:]+)=([^\s"'<>]+))|(?:([\w\-:"]+)="([^"]*)")|(?:([\w\-:"]+)='([^']*)'))(?=(?:\s|\/|>)+)/g,e;e=n.exec(u);){var r=(e[1]||e[2]||e[4]||e[6]).toLowerCase(),i=(e[2]?e[3]:e[4]?e[5]:e[7])||"";t[r]=i}return t},Rg=new Map,Lf=function(u){var t=u.replace(/\s+/g,""),n={};if(!t)return n;var e=Rg.get(t);if(e)return Object.assign({},e);for(var r=/\s*([\w\-]+)\s*:([^;]*)(;|$)/g,i;i=r.exec(u);){var a=i[1].toLowerCase().trim(),o=i[2].trim();(a.endsWith("color")||o.toLowerCase().includes("rgb"))&&(o=Qh(o)),n[a]=o}return Rg.set(t,n),Object.assign({},n)},Xo=function(u,t){var n=vp(t),e=window.getComputedStyle(u,null);return e?e[n]:""},Sr=function(u){return(u||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},Ai=function(u){return(u||"").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&")},Zk=function(u){return u.replace(/\./g,"&dot;")},Cm=function(u){return u.replace(/&dot;/g,".")},Vv=function(u){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"px";return u&&/^-?\d+(?:\.\d+)?$/.test(u.toString())?u+t:u},tn=function(u){var t;return u&&(t=/^((-?\d+)(\.\d+)?)/.exec(u))?Math.floor(parseFloat(t[1])*1e4)/1e4:0},Rs=function(u){var t="";try{t=encodeURIComponent(JSON.stringify(u||""))}catch{}return"data:".concat(t)},wr=function(u){try{return u=u.substr(5),JSON.parse(decodeURIComponent(u))}catch{return{}}},Ld=function(u){return u.replace(/<anchor\s*\/>/gi,"<span ".concat(lt,'="').concat(ts,'"></span>')).replace(/<focus\s*\/>/gi,"<span ".concat(lt,'="').concat(ns,'"></span>')).replace(/<cursor\s*\/>/gi,"<span ".concat(lt,'="').concat(no,'"></span>')).replace(/(<card\s+[^>]+>).*?<\/card>/gi,function(t,n){var e=Gk(n),r=e.type,i=e.name,a=e.value,o=e.editable,l=r==="inline",c=l?"span":"div",d=["<".concat(c)];return d.push(" ".concat(gi,'="').concat(r||"",'"')),d.push(" ".concat(_n,'="').concat(i||"",'"')),o!==""&&d.push(" ".concat(Ls,'="').concat(o||"",'"')),Object.keys(e).forEach(function(v){v.indexOf("data-")===0&&v.indexOf("data-card")!==0&&d.push(" ".concat(v,'="').concat(e[v]||"",'"'))}),a!==void 0&&d.push(" ".concat(er,'="').concat(a,'"')),d.push("></".concat(c,">")),d.join("")})},Em=function(u){return typeof u!="string"||(u=u.toLowerCase(),u.startsWith("data:text/html"))||!u.match(/^\S*$/)?!1:!!(["http:","https:","data:","ftp:"].some(function(t){return u.startsWith(t)})||u.startsWith("./")||u.startsWith("/")||u.indexOf(":")<0)},_l=function(u){return Em(u)?u:""},_m=function(u){var t=u.toLowerCase().split("+");return t=t.map(function(n){return n==="mod"?Eo?"\u2318":"Ctrl":n==="opt"?Eo?"Option":"Alt":n.length>1?n.substr(0,1).toUpperCase()+n.substr(1).toLowerCase():n.toUpperCase()}),t.join("+")},Fg=function(u){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!(t=+t))return"\u2022";switch(u==null?void 0:u.toLowerCase()){case"disc":return"\u2022";case"circle":return"\u25E6";case"square":return"\u25FC";case"lower-alpha":return String.fromCharCode("a".charCodeAt(0)+t);case"lower-roman":return String.fromCharCode(8559+t);case"decimal":default:return t}},Tr=function(u){return!!u&&u.get!==void 0},Yk=function(u){return!!u&&u.entries!==void 0},Ht=function(u){return!!u&&u.nodeType!==void 0},vr=function(u){if(typeof document=="undefined"&&typeof global.__amWindow=="undefined")throw"document is not defined,If you are using ssr, you can assign a value to the `__amWindow` global variable.";return u?u.ownerDocument||u.document||u:typeof document=="undefined"?global.__amWindow.document:document},Kk=function(u){Tr(u)&&(u=u[0]),u.normalize()},pp=function(u){return u.nodeType===vr().ELEMENT_NODE&&u.getAttribute(lt)===_u?void 0:u.parentNode||void 0},ge=function(u){return u.kind==="engine"},El={TAG_NAME:0,ATTRIBUTE:1,ELEMENT:2},Ns="data-uuid",Qv="data-color",Sm=function(){function b(){Fe(this,b),this.listeners={}}return Be(b,[{key:"on",value:function(t,n,e){this.listeners[t]||(this.listeners[t]=[]),(Jn(e)!=="object"||!e.once)&&this.listeners[t].push(n)}},{key:"off",value:function(t,n){var e=this.listeners[t];if(!!e){for(var r=0;r<e.length;r++)if(e[r]===n){e.splice(r,1);break}}}},{key:"trigger",value:function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];var i=this.listeners[t];if(i){var a=void 0;return i.every(function(o){return a=o.apply(void 0,e),typeof a!="boolean"||a!==!1}),a}}},{key:"destroy",value:function(){var t=this;Object.keys(this.listeners).forEach(function(n){t.listeners[n].forEach(function(e){t.off(n,e)})})}}]),b}(),Bg=new Map;function Md(b,u){if(!b)return[];if(typeof b=="string"){if(!u||/<.+>/.test(b)){var t=b.indexOf("<tr")===0,n=b.indexOf("<td")===0;b=b.trim().replace(/<!--[^>]*-->/g,"");var e=Bg.get(b);if(e){if(t){var r=e.querySelector("tbody");return r?r.cloneNode(!0).childNodes:[]}if(n){var i=e.querySelector("tr");return i?i.cloneNode(!0).childNodes:[]}return e.cloneNode(!0).childNodes}t&&(b="<table><tbody>".concat(b,"</tbody></table>")),n&&(b="<table><tbody><tr>".concat(b,"</tr></tbody></table>"));var a=vr().createElement("div");if(a.innerHTML=b,Bg.set(b,a.cloneNode(!0)),t){var o=a.querySelector("tbody");return o?o.childNodes:[]}if(n){var l=a.querySelector("tr");return l?l.childNodes:[]}return a.childNodes}return u.querySelectorAll(b)}if(Yk(b)||Array.isArray(b))return b;if(Tr(b)){var c=[];return b.each(function(h){c.push(h)}),c}if(Ht(b)&&b.nodeType===Node.DOCUMENT_FRAGMENT_NODE){for(var d=[],v=b.firstChild;v;)d.push(v),v=v.nextSibling;return d}return[b]}var Vk=function(){function b(u,t){var n=this;Fe(this,b),this.length=0,this.events=[],this.document=null,this.context=void 0,this.name="",this.type=void 0,this.window=null,this.display=void 0,this.fragment=void 0,Ht(u)&&(u.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&(this.fragment=u),u=[u]),u.forEach(function(a,o){n[o]=a,n.events[o]=new Sm}),this.length=u.length;var e=this[0];if(e){this.document=vr(t),this.context=t;var r=e.nodeName,i=e.nodeType;this.name=r.toLowerCase(),this.type=i,this.window=this.document.defaultView||window}}return Be(b,[{key:"isMatchesSelector",value:function(t,n){if(t.nodeType!==Node.ELEMENT_NODE||!n)return!1;var e=function(a,o){for(var l,c=new b(a),d=(l=c.document)===null||l===void 0?void 0:l.querySelectorAll(o),v=d?d.length:0;--v>=0&&(d==null?void 0:d.item(v))!==c.get(););return v>-1},r=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.matchesSelector||e;return r.call(t,n)}},{key:"each",value:function(t){for(var n=0,e;(e=this[n])&&t(e,n)!==!1;)n++;return this}},{key:"toArray",value:function(){var t=[];return this.each(function(n){t.push(new b(n))}),t}},{key:"isElement",value:function(){return this.type===Node.ELEMENT_NODE}},{key:"isText",value:function(){return this.type===Node.TEXT_NODE}},{key:"isCard",value:function(){return this.name===jk||!!this.attributes(gi)}},{key:"isBlockCard",value:function(){return this.attributes(gi)==="block"}},{key:"isInlineCard",value:function(){return this.attributes(gi)==="inline"}},{key:"isEditableCard",value:function(){var t,n=this.attributes();return n[lt]===Dd||n[Ls]==="true"||this.isElement()&&!!(!((t=this.get())===null||t===void 0)&&t.querySelector(Nn))}},{key:"isRoot",value:function(){return this.attributes(lt)===_u}},{key:"isEditable",value:function(){return this.isRoot()||this.attributes(lt)===Dd}},{key:"inEditor",value:function(){return this.isRoot()?!1:this.closest(Cu).length>0}},{key:"isCursor",value:function(){return[ts,ns,no].indexOf(this.attributes(lt))>-1}},{key:"get",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.length===0?null:this[t]}},{key:"eq",value:function(t){return t>-1&&t<this.length?new b(this[t]):void 0}},{key:"index",value:function(){for(var t,n=(t=this.get())===null||t===void 0?void 0:t.previousSibling,e=0;n&&n.nodeType===Node.ELEMENT_NODE;)e++,n=n.previousSibling;return e}},{key:"parent",value:function(){var t,n=(t=this.get())===null||t===void 0?void 0:t.parentNode;return n?new b(n):void 0}},{key:"children",value:function(t){if(this.length===0)return new b([]);var n=this.get().childNodes;if(t){for(var e=[],r=0;r<n.length;r++){var i=n[r];this.isMatchesSelector(i,t)&&e.push(i)}return new b(e)}return new b(n)}},{key:"first",value:function(){var t;if(this.fragment)return this.eq(0)||null;var n=this.length===0?null:(t=this.get())===null||t===void 0?void 0:t.firstChild;return n?new b(n):null}},{key:"last",value:function(){var t;if(this.fragment)return this.eq(this.length-1)||null;var n=this.length===0?null:(t=this.get())===null||t===void 0?void 0:t.lastChild;return n?new b(n):null}},{key:"prev",value:function(){var t,n=this.length===0?null:(t=this.get())===null||t===void 0?void 0:t.previousSibling;return n?new b(n):null}},{key:"next",value:function(){var t,n=this.length===0?null:(t=this.get())===null||t===void 0?void 0:t.nextSibling;return n?new b(n):null}},{key:"prevElement",value:function(){var t=this.length===0||!this.isElement()?null:this.get().previousElementSibling;return t?new b(t):null}},{key:"nextElement",value:function(){var t=this.length===0||!this.isElement()?null:this.get().nextElementSibling;return t?new b(t):null}},{key:"getPath",value:function(t,n,e){t=t||document.body;var r=[];if(this.length>0){var i=this.getIndex(n);if(e){var a=e(i,r,this);a&&(r=a)}else r.unshift(i)}if(this.equal(t))return r;for(var o=this.parent();o&&!o.equal(t);){var l=o.getIndex(n);if(e){var c=e(l,r,o);c&&(r=c)}else r.unshift(l);o=o.parent()}return r}},{key:"contains",value:function(t){var n,e=Ht(t)?t:t.get();if(this.length===0)return!1;if(this.get().nodeType===Node.DOCUMENT_NODE&&((n=e)===null||n===void 0?void 0:n.nodeType)!==Node.DOCUMENT_NODE||e===this[0])return!0;for(;e=((r=e)===null||r===void 0?void 0:r.parentNode)||null;){var r;if(e===this[0])return!0}return!1}},{key:"find",value:function(t){if(this.length>0&&(this.isElement()||this.fragment)){var n,e=(n=this.fragment?this.fragment:this.get())===null||n===void 0?void 0:n.querySelectorAll(t);return new b(e||[])}return new b([])}},{key:"closest",value:function(t){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(i){return i.parentNode||void 0},e=[],r=this.get()||void 0;r;){if(this.isMatchesSelector(r,t))return e.push(r),new b(e);r=n(r)}return new b(e)}},{key:"on",value:function(t,n,e){var r=this;return this.each(function(i,a){i.addEventListener(t,n,e),r.events[a]&&r.events[a].on(t,n,e)}),this}},{key:"off",value:function(t,n,e){var r=this;return this.each(function(i,a){i.removeEventListener(t,n,e),r.events[a]&&r.events[a].off(t,n,e)}),this}},{key:"getBoundingClientRect",value:function(t){if(this.length!==0){try{var n=this.get(),e=n.getBoundingClientRect(),r=document.documentElement.clientTop,i=document.documentElement.clientLeft;return{top:e.top-r,bottom:e.bottom-r,left:e.left-i,right:e.right-i}}catch(a){console.error(a)}return t}}},{key:"removeAllEvents",value:function(){var t=this;return this.each(function(n,e){!t.events[e]||Object.keys(t.events[e].listeners).forEach(function(r){for(var i=t.events[e].listeners[r],a=0;a<i.length;a++)t.off(r,i[a]),t.events[e].off(r,i[a]),n.removeEventListener(r,i[a],!1)})}),this}},{key:"attributes",value:function(t,n){var e=this;if(t===void 0){var r=this.get();if(!r)return{};for(var i={},a=r.attributes||[],o=0,l=null;l=a[o];)i[l.name]=l.value,o++;return i}if(Jn(t)==="object")return Object.keys(t).forEach(function(d){var v=t[d];e.attributes(d,v)}),this;if(n===void 0){var c=this.get();return this.length>0&&this.isElement()&&(c==null?void 0:c.getAttribute(t))||""}return this.each(function(d){var v=d;t==="style"&&n===""?v.removeAttribute("style"):v.setAttribute(t,n.toString())}),this}},{key:"removeAttributes",value:function(t){return this.each(function(n){if(n.nodeType===Node.ELEMENT_NODE){var e=n;e.removeAttribute(t)}}),this}},{key:"hasClass",value:function(t){if(this.length===0)return!1;var n=this.get();if(!n)return!1;for(var e=0,r=null,i=n.classList||{};r=i[e];){if(r===t)return!0;e++}return!1}},{key:"addClass",value:function(t){return this.each(function(n){var e=n;e.classList.add(t)}),this}},{key:"removeClass",value:function(t){return this.each(function(n){var e=n;e.classList.remove(t)}),this}},{key:"css",value:function(t,n){var e=this;if(t===void 0)return Lf(this.attributes("style")||"");if(Jn(t)==="object")return Object.keys(t).forEach(function(i){var a=t[i];e.css(i,a)}),this;if(n===void 0){if(this.length===0||this.isText())return"";var r=this.get();return r&&(r.style[vp(t)]||Xo(this[0],t))||""}return this.each(function(i){var a=i;a.style[vp(t)]=n.toString(),a.style.length===0&&a.removeAttribute("style")}),this}},{key:"width",value:function(){var t=this.css("width");if(t==="auto"){var n=this.get();t=n.offsetWidth.toString()}return t&&tn(t)||0}},{key:"height",value:function(){var t=this.css("height");if(t==="auto"){var n=this.get();t=n.offsetHeight.toString()}return t&&parseFloat(t)||0}},{key:"html",value:function(t){if(t!==void 0){var n=Md(t);return this.each(function(e){for(var r=e.firstChild;r;){var i=r.nextSibling;e.removeChild(r),r=i}n.forEach(function(a){e.nodeType===Node.ELEMENT_NODE&&e.appendChild(a.cloneNode(!0))})}),this}return this.length>0?this[0].innerHTML:""}},{key:"text",value:function(t){var n;return t!==void 0?(this.each(function(e){e.textContent=t}),this):this.length===0?"":((n=this.get())===null||n===void 0?void 0:n.textContent)||""}},{key:"show",value:function(t){return t===void 0&&(t=this.display||""),t==="none"&&(t=""),this.css("display")!=="none"?this:this.css("display",t)}},{key:"hide",value:function(){var t;return this.length===0?this:(this.display=(t=this.get())===null||t===void 0?void 0:t.style.display,this.css("display","none"))}},{key:"remove",value:function(){var t=this;return this.each(function(n,e){!n.parentNode||(n.parentNode.removeChild(n),delete t[e])}),this.length=0,this}},{key:"empty",value:function(){return this.each(function(t){for(var n=t.firstChild;n;){var e=n.nextSibling;t.removeChild(n),n=e}}),this}},{key:"equal",value:function(t){return Ht(t)?this.get()===t:Tr(t)?this.get()===t.get():!1}},{key:"clone",value:function(t){var n=[];return this.each(function(e){n.push(e.cloneNode(t))}),new b(n)}},{key:"prepend",value:function(t){var n=Md(t,this.context),e=typeof t=="string"&&/<.+>/.test(t);return this.each(function(r){for(var i=n.length-1;i>=0;i--){var a=e?n[i].cloneNode(!0):n[i];r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a)}}),this}},{key:"append",value:function(t){var n=Md(t,this.context),e=typeof t=="string"&&/<.+>/.test(t);return this.each(function(r){for(var i=0;i<n.length;i++){var a=e?n[i].cloneNode(!0):n[i];r.appendChild(a)}}),this}},{key:"before",value:function(t){var n=Md(t,this.context),e=typeof t=="string"&&/<.+>/.test(t);return this.each(function(r){var i=r.parentNode;!i||n.forEach(function(a){e&&(a=a.cloneNode(!0)),i.insertBefore(a,r),r=a})}),this}},{key:"after",value:function(t){var n=Md(t,this.context),e=typeof t=="string"&&/<.+>/.test(t);return this.each(function(r){var i=r.parentNode;!i||n.forEach(function(a){e&&(a=a.cloneNode(!0)),r.nextSibling?(i.insertBefore(a,r.nextSibling),r=a):i.appendChild(a)})}),this}},{key:"replaceWith",value:function(t){var n=[],e=Md(t,this.context),r=typeof t=="string"&&/<.+>/.test(t);return this.each(function(i){var a=i.parentNode;if(!!a){var o=r?e[0].cloneNode(!0):e[0];a.replaceChild(o,i),n.push(o)}}),new b(n)}},{key:"getRoot",value:function(){return this.closest(Cu)}},{key:"traverse",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,a=function o(l){var c=l.isCard();if(!(c&&(!e||e==="editable"&&!l.isEditableCard())))for(var d=n?l.first():l.last();d;){var v=n?d.next():d.prev();r&&r(d);var h=t(d);if(h===!1)return;if(h!==!0){var g=h&&typeof h!="boolean";g&&(d=h),c=d.isCard(),c?e===!0?(g&&t(d),o(d)):e==="editable"&&d.isEditableCard()&&function(){var w=d.find(Nn);w.each(function(x,_){var E=w.eq(_);E&&o(E)})}():(g&&t(d),o(d))}i&&i(d,v),d=v}};t(this),a(this)}},{key:"getChildByPath",value:function(t,n){for(var e=this.get(),r=function(){return n?Array.from(e.childNodes).filter(n):Array.from(e.childNodes)},i=r(),a=0;t[a]!==void 0&&i[t[a]];)e=i[t[a]],i=r(),a++;return e}},{key:"getIndex",value:function(t){var n=this[0].parentNode;return n?(t?Array.from(n.childNodes).filter(t):Array.from(n.childNodes)).indexOf(this.get()):0}},{key:"findParent",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.closest(Cu);if(Ht(t)&&(t=new b(t)),this.length===0||!this.parent())return null;for(var n=this;!(!((e=n.parent())===null||e===void 0)&&e.equal(t));){var e;if(!n.parent())return null;n=n.parent()}return n}},{key:"allChildren",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=[];return this.traverse(function(e){n.push(e)},void 0,t),n.shift(),n}},{key:"getViewport",value:function(){var t,n=this.window||{innerHeight:0,innerWidth:0},e=n.innerHeight,r=n.innerWidth,i=this.isText()?(t=this.parent())===null||t===void 0?void 0:t.get():this.get();if(!i)return{top:0,left:0,bottom:0,right:0};var a=i.getBoundingClientRect(),o=a.top,l=a.left,c=a.bottom,d=a.right;return{top:o,left:l,bottom:Math.min(c,e),right:Math.min(d,r)}}},{key:"inViewport",value:function(t){var n,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=null;if(t.type!==Node.ELEMENT_NODE){if(!t.document)return!1;if(r=t.document.createElement("span"),t.next()){var i;(i=t[0].parentNode)===null||i===void 0||i.insertBefore(r,t[0].nextSibling)}else{var a;(a=t[0].parentNode)===null||a===void 0||a.appendChild(r)}t=new b(r)}var o=t.get();if(!o)return!0;var l=o.getBoundingClientRect(),c=l.top,d=l.left,v=l.right,h=l.bottom,g=this.getViewport();return r&&((n=r.parentNode)===null||n===void 0||n.removeChild(r)),e?c>0&&c<=g.bottom||h>0&&h<=g.bottom:c>0&&c>=g.top&&d>0&&d>=g.left&&h<=g.bottom&&v<=g.right}},{key:"scrollIntoView",value:function(t){var n,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"nearest";if(typeof((n=t.document)===null||n===void 0?void 0:n.body.scrollIntoView)=="function"){var r,i=null;if(t.type!==Node.ELEMENT_NODE||t.name.toLowerCase()==="br"){var a;i=t.document.createElement("span"),i.innerHTML="&nbsp;",(a=t[0].parentNode)===null||a===void 0||a.insertBefore(i,t[0]),t=new b(i)}if(!this.inViewport(t)){var o;(o=t.get())===null||o===void 0||o.scrollIntoView({block:e,inline:e})}i&&((r=i.parentNode)===null||r===void 0||r.removeChild(i))}}}]),b}(),V=function(b,u,t){u===void 0&&(u=vr());var n=Md(b,u),e=new(t||Vk)(n,u||void 0);return Ht(b)&&b.nodeType===window.Node.DOCUMENT_FRAGMENT_NODE&&(e.fragment=b),e},Qk=[{from:function(u,t,n){return!!n[Gt]||!!n[_n]},to:function(u,t,n){var e=n[er],r=Ie({},n);n={type:n[gi],name:(n[Gt]||n[_n]).toLowerCase(),editable:n[Ls]},Object.keys(r).forEach(function(a){a!==_n&&a.indexOf("data-")===0&&a.indexOf("data-card")!==0&&(n[a]=r[a])}),e!==void 0&&(n.value=e);var i=V("<card />");return Object.keys(n).forEach(function(a){i.attributes(a,n[a])}),i}},{from:function(u,t,n){return u==="div"&&(!n[Gt]||!n[_n])&&n[lt]!==_u},to:function(u,t,n){var e=V("<p />");return e.css(t),Object.keys(n).forEach(function(r){e.attributes(r,n[r])}),e}},{from:function(u){return[no,ts,ns].includes(u)},to:function(u){return{node:V("<".concat(u," />")),replace:!0}}}],hu,vu,pu,gu,Xk=[{type:"block",attributes:Yt({},fn,"*")},{name:"p",type:"block",allowIn:["$root"]},{name:"br",type:"inline",isVoid:!0},{name:ts,type:"inline",isVoid:!0},{name:ns,type:"inline",isVoid:!0},{name:no,type:"inline",isVoid:!0},{name:"span",type:"mark",attributes:Yt({},lt,{required:!0,value:["anchor","cursor","focus"]})},{name:"card",type:"inline",attributes:{name:{required:!0,value:/\w+/},type:{required:!0,value:"inline"},editable:"*",value:"*"}},{name:"span",type:"inline",attributes:(hu={},Yt(hu,Gt,{required:!0,value:/\w+/}),Yt(hu,gi,{required:!0,value:"inline"}),Yt(hu,er,"*"),Yt(hu,Ls,"*"),Yt(hu,"class","*"),Yt(hu,"contenteditable","*"),hu)},{name:"span",type:"inline",attributes:(vu={},Yt(vu,_n,{required:!0,value:/\w+/}),Yt(vu,gi,{required:!0,value:"inline"}),Yt(vu,er,"*"),Yt(vu,Ls,"*"),Yt(vu,"class","*"),Yt(vu,"contenteditable","*"),vu)},{name:"card",type:"block",attributes:{name:{required:!0,value:/\w+/},type:{required:!0,value:"block"},editable:"*",value:"*"}},{name:"div",type:"block",attributes:(pu={},Yt(pu,Gt,{required:!0,value:/\w+/}),Yt(pu,gi,{required:!0,value:"block"}),Yt(pu,er,"*"),Yt(pu,Ls,"*"),Yt(pu,"class","*"),Yt(pu,"contenteditable","*"),pu)},{name:"div",type:"block",attributes:(gu={},Yt(gu,_n,{required:!0,value:/\w+/}),Yt(gu,gi,{required:!0,value:"block"}),Yt(gu,er,"*"),Yt(gu,Ls,"*"),Yt(gu,"class","*"),Yt(gu,"contenteditable","*"),gu)}],Hi="contenteditable",Xv={},Jk=function(u){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),e=[],r;if(t=t||n.length,t>n.length&&(t=n.length),u)for(r=0;r<u;r++)e[r]=n[0|Math.random()*t];else{var i;for(e[8]=e[13]=e[18]=e[23]="-",e[14]="4",r=0;r<36;r++)e[r]||(i=0|Math.random()*16,e[r]=n[r==19?i&3|8:i])}return e.join("")},Pg=new Map,Lp=function(b){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t="";if(Ht(b)&&(b=V(b)),Tr(b)){var n=b.attributes()||{};delete n[fn],t=b.name.substring(0,1),b="".concat(b.name,"_").concat(JSON.stringify(n))}var e=Pg.get(b);if(e)t=e;else{var r=_k(b);t=t+r.substr(0,4)+r.substr(r.length-3),Pg.set(b,t)}var i=t;if(u){var a=Xv[i]||0;return Xv[i]=a+1,"".concat(i,"-").concat(Jk(8,48+Xv[i]))}return i},ex=function(){function b(u){Fe(this,b),this.editor=void 0,this.editor=u}return Be(b,[{key:"isVoid",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.editor.schema,e=typeof t=="string"?t:"";return Ht(t)?e=t.nodeName.toLowerCase():Tr(t)&&(e=t.name),n.find(function(r){return r.name===e&&r.isVoid===!0}).length>0}},{key:"isMark",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.editor.schema;return Ht(t)&&(t=V(t)),n.getType(t)==="mark"}},{key:"isInline",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.editor.schema;return Ht(t)&&(t=V(t)),n.getType(t)==="inline"}},{key:"isBlock",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.editor.schema;return Ht(t)&&(t=V(t)),n.getType(t)==="block"}},{key:"isNestedBlock",value:function(t){if(!this.isBlock(t))return!1;for(var n=t.first();n;){if(this.isBlock(n))return!1;n=n.next()}return!0}},{key:"isRootBlock",value:function(t,n){var e;return!(!((e=t.parent())===null||e===void 0)&&e.isEditable())||!this.isNestedBlock(t)?!1:(n||this.editor.schema).find(function(r){return r.name===t.name}).every(function(r){if(r.type!=="block")return!1;var i=r.allowIn;return i?i.indexOf("$root")>-1:!0})}},{key:"isEmpty",value:function(t,n){var e,r;if(t.isElement()&&(t.attributes(Gt)||t.find(Ar).length>0&&t.find(Nn).length===0||t.attributes(_n)||t.find(Mc).length>0&&t.find(Nn).length===0||t.name!=="br"&&this.isVoid(t)||t.find("br").length>1))return!1;var i=t.isText()?t[0].nodeValue||"":t.text();return i=(e=i)===null||e===void 0?void 0:e.replace(/\u200B/g,""),i=(r=i)===null||r===void 0?void 0:r.replace(/\r\n|\n/,""),i&&n&&(i=i.trim()),i===""}},{key:"isEmptyWithTrim",value:function(t){return this.isEmpty(t,!0)}},{key:"isEmptyWidthChild",value:function(t){if(t.length===0)return!0;if(t.isText())return this.isEmpty(t);var n=t[0].childNodes;if(n.length===0)return!0;for(var e=0;e<n.length;e++){var r=n[e];if(r.nodeType===Node.TEXT_NODE){if(r.data.replace(/\u200b/g,"")!=="")return!1}else if(r.nodeType===Node.ELEMENT_NODE&&(r.nodeName.toLowerCase()==="li"&&!this.editor.list.isEmptyItem(V(r))||r.hasAttribute(Gt)||!this.isEmptyWidthChild(V(r))))return!1}return!0}},{key:"isList",value:function(t){var n=typeof t=="string"?t:"";return Ht(t)?n=t.nodeName.toLowerCase():Tr(t)&&(n=t.name),["ul","ol"].indexOf(n)>-1}},{key:"isCustomize",value:function(t){var n=this.editor.list;switch(t.name){case"li":return t.hasClass(n.CUSTOMZIE_LI_CLASS);case"ul":return t.hasClass(n.CUSTOMZIE_UL_CLASS);default:return!1}}},{key:"unwrap",value:function(t){for(var n=t.first(),e=[];n;){var r=n.next();t.before(n),e.push(n),n=r}return t.remove(),e}},{key:"wrap",value:function(t,n){var e=this,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=this.editor.mark;if(Ht(t)&&(t=V(t)),n=this.clone(n,!1),t.isText())return n.append(this.clone(t,!1)),t.replaceWith(n);if(r&&this.isMark(n)){var a=this.clone(n,!1,!1);if(t.name===n.name){var o=t.attributes();delete o.style,Object.keys(o).forEach(function(h){if(!n.attributes(h))n.attributes(h,o[h]);else{var g=n.attributes(h).split(",");g[h]!==void 0&&g.indexOf(g[h])<0&&g.push(g[h]),n.attributes(h,g.join(","))}});var l=t.css();Object.keys(l).forEach(function(h){n.css(h)||n.css(h,l[h])}),n.append(this.clone(t,!0,!1).children())}else n.append(this.clone(t,!0,!1));var c=n.allChildren();return c.forEach(function(h){!h.isText()&&e.isMark(h)&&i.compare(h,a)&&e.unwrap(h)}),t.replaceWith(n)}var d=t.parent(),v=this.clone(t,!1,!1);return t.after(v),n.append(t),d?v.replaceWith(n):n}},{key:"merge",value:function(t,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(n.isText()){t.append(n),this.removeSide(t);return}var r=this.editor,i=r.block,a=r.mark,o=r.list,l=n,c=this.isList(t),d=this.isList(n.name);if(c&&!d){var v=t.find("li");if(v.length===0)return;t=V(v[v.length-1])}if(!c&&d){var h=n.find("li");h.length>0&&(n=V(h[0])),h[1]&&(l=V(h[0]))}if(this.isCustomize(t)){var g,w=t.first();if(!(!((g=w)===null||g===void 0)&&g.isCard())){var x=o.getPlugins(),_=o.getPluginNameByNode(t),E=x.find(function(O){return O.constructor.pluginName===_});E!=null&&E.cardName&&(o.addCardToCustomize(t,E.cardName),w=t.first())}if(this.isCustomize(n)){var M=n.first();(M==null?void 0:M.isCard())&&w.attributes(Gt)===M.attributes(Gt)&&M.remove()}}for(var T=t.last(),S=n.first(),D=i.findPlugin(t);S;){var I=S.next(),P=a.findPlugin(S);if(D&&P&&D.disableMark&&D.disableMark.indexOf(P.constructor.pluginName)>-1){var B=this.unwrap(S);B.forEach(function(O){t.append(O)})}else if(S.isText()&&/\u200b/.test(S.text())){var $=S.parent(),q=S.prev(),G=S.next();if(!$||!this.isMark($)&&(q&&!this.isInline(q)||G&&!this.isInline(G))){S.remove(),S=G;continue}}else if(P&&S.children().length===1){var H=S.prev();(!H||H.isText())&&S.allChildren().forEach(function(O){var Q,ie=O.text();O.type===vr().TEXT_NODE&&!!ie&&!(!((Q=O.next())===null||Q===void 0)&&Q.isCursor())&&O.text(ie.replace(/\u200b/,""))})}S.length>0&&!S.equal(t)&&t.append(S),S=I}if(e&&l.remove(),T&&T.name==="br")for(var z=T.next();z;){if([no,ts,ns].indexOf(z.attributes(lt))){T.remove();break}z=z.next()}this.removeSide(t)}},{key:"replace",value:function(t,n){for(var e,r,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=this.clone(n,!1,i),o=this.isCustomize(t)&&t.name==="li"&&((e=t.first())===null||e===void 0?void 0:e.isCard())?(r=t.first())===null||r===void 0?void 0:r.next():t.first();o;){var l=o.next();a.append(o),o=l}return t.isText()&&a.append(t.clone()),t.replaceWith(a)}},{key:"insertText",value:function(t,n){var e;if(!!ge(this.editor)){var r=this.editor.change,i=n||r.range.toTrusty(),a=vr(i.startContainer);i.collapsed||r.delete(n);var o=a.createTextNode(t);return(e=this.insert(o,i))===null||e===void 0||e.handleBr(),n||r.apply(i),i}}},{key:"insert",value:function(t,n){var e=this,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(Tr(t)){if(t.length===0)throw"Not found node";t=t[0]}var i=this.editor;if(!!ge(i)){var a=i.change,o=i.block,l=i.schema,c=i.mark;n=n||a.range.get();var d=n.cloneRange().shrinkToTextNode(),v=d.startNode,h=d.startOffset,g=v.prev(),w=v.parent(),x=v.text()||"",_=x.substr(0,h);v.isText()&&/\u200b$/.test(_)&&x.length>1&&(g&&!this.isInline(g)||!g&&w&&!this.isInline(w))&&v.get().splitText(x.length-1).remove();var E=w==null?void 0:w.attributes(jn);if(!E&&v.isCard()&&n.setStartAfter(v),E&&w&&["left","right"].includes(E)){var M=i.card.find(w);M&&(E==="left"?n.setStartBefore(M.root):n.setStartAfter(M.root))}if(this.isBlock(t)){var T=n,S=T.commonAncestorNode;S.isText()&&(S=this.editor.block.closest(S));var D=null;if(this.isBlock(S)&&this.isEmpty(S))D=r?S:void 0;else{var I=!1;if(o.isFirstOffset(n,"start")&&(I=!0),D=o.split(n),I){var P;D=(P=D)===null||P===void 0?void 0:P.prev()}}var B=o.closest(n.startNode.isEditable()?n.cloneRange().shrinkToElementNode().shrinkToTextNode().startNode:n.startNode);if(!B.isCard()&&l.isAllowIn(B.name,t.nodeName.toLowerCase()))B.find("br").remove(),B.append(t);else{for(var $=B.parent();$&&this.isBlock($)&&!B.isEditable()&&!l.isAllowIn($.name,t.nodeName.toLowerCase());)B=$,$=B.parent();B.isEditable()&&B.children().length===0?B.append(t):this.isEmptyWidthChild(B)||o.isLastOffset(n,"start")?(B.after(t),this.isEmptyWidthChild(B)&&D&&B.remove()):(B.before(t),D&&this.isEmptyWidthChild(D)&&D.remove())}}else{var q=o.closest(n.startNode.isEditable()?n.cloneRange().shrinkToElementNode().shrinkToTextNode().startNode:n.startNode),G=q?o.findPlugin(q):void 0;if(G){var H=V(t),z=function(ie){if(e.isMark(ie)){var L=c.findPlugin(ie);if(!L)return;if(G.disableMark&&G.disableMark.indexOf(L.constructor.pluginName)>-1)return!0}return!1};if(H.allChildren().forEach(function(Q){z(Q)&&e.unwrap(Q)}),z(H)){var O=H.document.createDocumentFragment();H.children().each(function(Q){O.appendChild(Q)}),H.remove(),t=O.childNodes[O.childNodes.length-1],n.insertNode(O)}else n.insertNode(t);if(H.length===0)return n}else n.insertNode(t)}return t.nodeType===Node.ELEMENT_NODE&&(t.hasAttribute(_n)||t.hasAttribute(Gt))?n.collapse(!1):n.select(t,!(this.isVoid(t)||t.nodeType===Node.TEXT_NODE)).shrinkToElementNode().collapse(!1)}}},{key:"setAttributes",value:function(t,n){var e=n.style;Object.keys(n).forEach(function(i){if(i!=="style")if(i==="className"){var a=n[i];Array.isArray(a)?a.forEach(function(o){return t.addClass(o)}):t.addClass(a)}else t.attributes(i,n[i].toString())}),typeof e=="number"?e={}:typeof e=="string"&&(e=Lf(e)),e=e||{};var r=Object.keys(e);return r.forEach(function(i){var a=e[i];/^0(px|em)?$/.test(a.toString())&&(a=""),t.css(i,a.toString())}),(r.length===0||Object.keys(t.css()).length===0)&&t.removeAttributes("style"),t}},{key:"removeMinusStyle",value:function(t,n){if(t.isElement()){var e=t.css();if(e[n]){var r=parseInt(e[n]||"0",10)||0;r<0&&t.css(n,"")}}}},{key:"mergeChild",value:function(t){for(var n=this.editor,e=n.schema,r=n.list,i=e.getAllowInTags(),a=t.first();a;){for(var o=a.next();o&&a.name===o.name&&(i.indexOf(a.name)>-1&&!this.isList(a)||this.isList(a)&&r.isSame(a,o));){for(var l=o.next(),c=o.first();c;){var d=c.next();a.append(c),c=d}o.remove(),this.mergeChild(a),o=l}a=o}}},{key:"removeSide",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"br",e=t.first();(e==null?void 0:e.name)===n&&t.children().toArray().filter(function(i){return!i.isCursor()}).length>1&&e.remove();var r=t.last();(r==null?void 0:r.name)===n&&t.children().toArray().filter(function(i){return!i.isCursor()}).length>1&&r.remove()}},{key:"flat",value:function(t){for(var n=this,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,r=this.editor.block,i=t.first(),a=e.fragment?e.fragment:e.get(),o=t.fragment?V("<p />"):this.clone(t,!1),l=function(D){var I=D.children().toArray();D.name==="p"&&I.filter(function(P){return!P.isCursor()}).length===0&&D.append(V("<br />")),n.isBlock(D)&&n.isEmptyWithTrim(D)&&I.every(function(P){return P.isText()})&&D.html("<br />")};i;){var c=i.next();if(i.isBlockCard()||this.isNestedBlock(i))r.flat(i,V(a||[]));else if(this.isBlock(i))i=this.flat(i,V(a||[]));else{var d=this.clone(o,!1),v=d.name==="li";for(i.before(d);i;){var h,g;c=i.next();var w=i.name==="br"&&!v;if(w&&((h=i.parent())===null||h===void 0?void 0:h.isRoot())&&d.append(i),i.isText()){var x=i.text(),_=/^((\n|\r)+)/.exec(x),E=!1;if(_&&(x=x.substring(_[1].length),E=!0,x.length===0&&i.remove()),_=/((\n|\r)+)$/.exec(x),_){i.text(x.substr(0,_.index)),d.append(i);break}else E&&i.length>0&&i.text(x)}if(i.length>0&&d.append(i),!((g=c)===null||g===void 0)&&g.isText()){var M=c.text(),T=/^(\n|\r)+/.exec(M);if(T)break}if(w||!c||this.isBlock(c)||c.isBlockCard())break;i=c}this.removeSide(d),r.flat(d,V(a||[])),l(d)}l(i),this.removeSide(i),i=c}return t.fragment&&(t=V(t.fragment)),i=t.first(),i||t.remove(),t}},{key:"normalize",value:function(t){return t=this.flat(t),this.mergeChild(t),t}},{key:"html",value:function(t,n){var e=this;if(n===void 0){var r;return t.length>0&&((r=t.get())===null||r===void 0?void 0:r.innerHTML)||""}return t.each(function(i){var a=i;a.innerHTML=n,e.editor.nodeId.generateAll(a)}),t}},{key:"clone",value:function(t,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=this.editor.nodeId,i=[];return t.each(function(a){var o=a.cloneNode(n),l=V(o);e||(r.generateAll(l,!0),r.isNeed(l)&&r.generate(l,!0)),i.push(o)}),V(i)}},{key:"getBatchAppendHTML",value:function(t,n){var e;if(t.length===0)return n;var r=n.startsWith("\\u")||n.startsWith("&#")?V(n,null):V(n);return t.forEach(function(i){i=i.clone(!1),i.append(r),r=i}),((e=r.get())===null||e===void 0?void 0:e.outerHTML)||""}},{key:"removeZeroWidthSpace",value:function(t){var n=this;t.traverse(function(e){var r=e[0];if(r.nodeType===Node.TEXT_NODE){var i=r.nodeValue;if((i==null?void 0:i.length)===2){var a=r.nextSibling,o=r.previousSibling;if(!(i.charCodeAt(1)===8203&&a&&a.nodeType===Node.ELEMENT_NODE&&[ts,ns,no].indexOf(a.getAttribute(lt)||"")>=0)){var l=e.parent();if(!(i.charCodeAt(1)===8203&&(!a&&l&&n.isInline(l)||a&&n.isInline(a)))&&!(i.charCodeAt(0)===8203&&(!o&&l&&n.isInline(l)||o&&n.isInline(o)))&&i.charCodeAt(0)===8203){var c,d=r.splitText(1);d.previousSibling&&((c=d.parentNode)===null||c===void 0||c.removeChild(d.previousSibling))}}}}})}}]),b}(),iv=function(){function b(u,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";Fe(this,b),this.range=void 0,this.editor=void 0,this.key="",this.anchor=null,this.focus=null,this.editor=u,this.range=t,this.key=n}return Be(b,[{key:"has",value:function(){return!!this.focus&&!!this.anchor}},{key:"create",value:function(){var t=this.range,n=t.commonAncestorNode,e=t.startNode,r=t.endNode;if(!(!n.isEditable()&&!n.inEditor())){var i=n.document;if(!!i){var a=n.closest(Cu);if(this.key)a.find('[data-anchor-id="'.concat(this.key,'"]')).remove(),a.find('[data-focus-id="'.concat(this.key,'"]')).remove(),a.find('[data-cursor-id="'.concat(this.key,'"]')).remove();else{var o=a.find(Np);o.each(function(D,I){var P=o.eq(I);P&&!P.attributes("data-anchor-id")&&P.remove()});var l=a.find(Dp);l.each(function(D,I){var P=l.eq(I);P&&!P.attributes("data-focus-id")&&P.remove()});var c=a.find(rv);c.each(function(D,I){var P=c.eq(I);P&&!P.attributes("data-cursor-id")&&P.remove()})}var d=e.closest(Ar);if(d.length>0){var v=e.closest(Zi);v.length>0&&this.range.setStartBefore(d);var h=e.closest(Yi);h.length>0&&this.range.setStartAfter(d)}if(!e.equal(r)){var g=r.closest(Ar);if(g.length>0){var w=r.closest(Zi);w.length>0&&this.range.setEndBefore(g);var x=r.closest(Yi);x.length>0&&this.range.setEndAfter(g)}}if(this.range.collapsed){var _=V(i.createElement("span"));_.attributes(lt,no),this.key&&_.attributes("data-cursor-id",this.key),this.range.insertNode(_),this.anchor=_,this.focus=_;return}var E=this.range.cloneRange();E.collapse(!0);var M=V(i.createElement("span"));M.attributes(lt,ts),this.key&&M.attributes("data-anchor-id",this.key),E.insertNode(M),this.range.setStartAfter(M);var T=this.range.cloneRange();T.collapse(!1);var S=V(i.createElement("span"));S.attributes(lt,ns),this.key&&S.attributes("data-focus-id",this.key),T.insertNode(S),this.anchor=M,this.focus=S}}}},{key:"move",value:function(){if(!(!this.focus||!this.anchor)){if(this.key){var t=this.range.commonAncestorNode,n=t.closest(Cu);this.focus.inEditor()||(this.focus=n.find("[data-".concat(this.focus.attributes(lt),'-id="').concat(this.key,'"]'))),this.anchor.inEditor()||(this.anchor=n.find("[data-".concat(this.anchor.attributes(lt),'-id="').concat(this.key,'"]')))}var e=this.editor.node;if(this.anchor.equal(this.focus)){var r=this.anchor,i=r.parent();if(!i)return;e.removeZeroWidthSpace(i),i[0].normalize();var a=!1,o=r.prev(),l=r.next();if(o&&o.isCard()){var c=o.find(Yi);c.length>0&&(this.range.select(c,!0),this.range.collapse(!1),a=!0)}else if(l&&l.isCard()){var d=l.find(Zi);d.length>0&&(this.range.select(d,!0),this.range.collapse(!1),a=!0)}a||(this.range.setStartBefore(r[0]),this.range.collapse(!0)),Ip?(i[0].normalize(),r.remove()):(r.remove(),i[0].normalize()),i.name==="p"&&i.children().length===0&&i.append(V("<br />"));return}var v=this.anchor.parent();if(v&&(e.removeZeroWidthSpace(v),this.range.setStartBefore(this.anchor),this.anchor.remove(),v[0].normalize()),v=this.focus.parent(),v&&(e.removeZeroWidthSpace(v),this.range.setEndBefore(this.focus),this.focus.remove(),v[0].normalize(),v.name==="p"&&v.children().length===0&&v.append(V("<br />")),Nf)){var h=window.getSelection();h==null||h.removeAllRanges(),h==null||h.addRange(this.range.base)}}}},{key:"getNode",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"center",e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){return!0},i=e?t.clone(!0):t;if(!this.focus||!this.anchor)return i;if(n==="left"||n==="center"){var a=n!=="center"?this.anchor:this.focus,o=V(this.key?"[data-".concat(a.attributes(lt),'-id="').concat(this.key,'"]'):"[".concat(lt,"=").concat(a.attributes(lt),"]"),i.get());this.key||(o=o.toArray().find(function(h){return!h.attributes("data-".concat(a.attributes(lt),"-id"))}));var l=!1;i.traverse(function(h){if(o&&h.equal(o)){var g=h.parent();o.remove(),(g==null?void 0:g.name)==="p"&&g.children().length===0&&g.append(V("<br />")),l=!0;return}l&&r(h)&&(h.attributes(lt)!==a.attributes(lt)||a.attributes(lt)==="cursor")&&h.remove()},!0)}if(n==="right"||n==="center"){var c=n!=="center"?this.focus:this.anchor,d=V(this.key?"[data-".concat(c.attributes(lt),'-id="').concat(this.key,'"]'):"[".concat(lt,"=").concat(c.attributes(lt),"]"),i.get());this.key||(d=d.toArray().find(function(h){return!h.attributes("data-".concat(c.attributes(lt),"-id"))}));var v=!1;i.traverse(function(h){if(d&&h.equal(d)){var g=h.parent();d.remove(),(g==null?void 0:g.name)==="p"&&g.children().length===0&&g.append(V("<br />")),v=!0;return}v&&r(h)&&(h.attributes(lt)!==c.attributes(lt)||c.attributes(lt)==="cursor")&&h.remove()},!1)}return i}}]),b}();iv.removeTags=function(b){return b.replace(/<anchor\s*\/>/gi,"").replace(/<focus\s*\/>/gi,"").replace(/<cursor\s*\/>/gi,"")};var eo=function(u,t,n){if(u.isElement()){var e=u.attributes();if([no,ts,ns].indexOf(e[lt])>-1||!!e[Id]||e[lt]===Gn)return!0;var r=u.parent();if(u.isRoot()||(r==null?void 0:r.isRoot()))return!1;var i=u.isCard(),a=r==null?void 0:r.attributes(mi);if(a&&r&&(n==null||n.push(r)),!i&&(r==null?void 0:r.isCard())&&!r.isEditableCard())return!0;if(t){if(i)return!1;var o=t.find(function(h){return h===u[0]});if(o)return o.__card_root&&(n==null||n.push(o.__card_root)),!0}var l=u.closest("".concat(Ar,",").concat(Su),pp),c=(l==null?void 0:l.attributes())||{};if(l.length>0&&c[lt]===Gn||(c[mi]&&(n==null||n.push(l)),!i&&l.length>0&&l.isCard()&&!l.isEditableCard()))return!0;if(l.length===0||!i||u.isEditableCard())return!1;var d=r==null?void 0:r.closest(Ar,pp),v=d==null?void 0:d.attributes(mi);if(v&&d&&(n==null||n.push(d)),d&&d.isCard()&&!d.isEditableCard())return!0}return!1},Mm=function(u,t){if(u.isRoot()||u.isCard()&&["id","class","style",mi,Ls].includes(t))return!0;var n=u.attributes(ua);return!!(n==="*"||n.split(",").some(function(e){return e.trim().toLowerCase()===t.toLowerCase()}))},Tm=function(u){for(var t=[],n=0;n<u.length;n++){var e=u[n],r=u[n+1];gp(e,r)?n++:t.push(e)}return t},gp=function(u,t){var n=u,e=u,r=t,i=t,a=u,o=u,l=t,c=t;return!u||!t?!1:n.li&&i.ld?Kt.exports.isEqual(n.li,i.ld)&&Kt.exports.isEqual(u.p,t.p):e.ld&&r.li?Kt.exports.isEqual(e.ld,r.li)&&Kt.exports.isEqual(u.p,t.p):a.si&&c.sd?Kt.exports.isEqual(a.si,c.sd)&&(Kt.exports.isEqual(u.p,t.p)||Hg(u.p,t.p,a.si.length)||Hg(t.p,u.p,a.si.length)):o.sd&&l.si?Kt.exports.isEqual(o.sd,l.si)&&Kt.exports.isEqual(u.p,t.p):!1},Hg=function(u,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;if(u.length!==t.length)return!1;var e=t.slice();return e[e.length-1]=e[e.length-1]-n,Kt.exports.isEqual(u.slice(),e)},Ac=function b(u,t){if(!u.isText()){var n=u.children().toArray();u.isEditable()||(n=t?n.filter(t):n),n.forEach(function(e,r){e[0].__index=r,e.isText()||b(e)})}},tx=function(u){u.sort(function(t,n){for(var e=t.p.length<n.p.length?-1:0,r=!1,i=0;i<t.p.length;i++){var a=t.p[i];if(typeof a=="string")break;if(i>=n.p.length){e=1,r=!0;break}var o=n.p[i];if(a<o){e=-1;break}else if(a>o){e=1;break}}if("sd"in t)return"sd"in n||"si"in n?0:-1;if("sd"in n)return"sd"in t||"si"in t?0:1;if(r&&"ld"in n&&"od"in t||r&&"ld"in t&&"od"in n||e===0&&"od"in t&&"ld"in n)return-1;if(e===0&&"od"in n&&"ld"in t||"od"in t&&"ld"in n)return 1;if("od"in n&&"ld"in t||"oi"in t&&e<1&&"li"in n)return-1;if("oi"in t&&e>-1&&"li"in n||"oi"in n&&e>-1&&"li"in t)return 1;if("oi"in n&&e<1&&"li"in t||"od"in t&&("li"in n||"ld"in n))return-1;if("od"in n&&("li"in t||"ld"in t)||"oi"in t&&("li"in n||"ld"in n))return 1;if("oi"in n&&("li"in t||"ld"in t)||"ld"in t&&"li"in n)return-1;if("li"in t&&"ld"in n||e<1&&"ld"in t&&"si"in n)return 1;if(e>0&&"ld"in t&&"si"in n)return-1;if(e<1&&"si"in t&&"ld"in n)return 1;if(e>0&&"si"in t&&"ld"in n)return-1;var l="li"in t&&"li"in n||"oi"in t&&"oi"in n,c="ld"in t&&"ld"in n||"od"in t&&"od"in n;return l?e:c?-e:0})},Am=function b(u){var t=document.createDocumentFragment(),n=null,e=0,r=null;for(typeof u[0]=="string"&&(n=u[0],e=1);e<u.length;e++)if(Array.isArray(u[e])){var i=u[e-1];if(i&&i.toString()==="[object Object]"&&Object.keys(i).includes(_n))continue;var a=b(u[e]);a&&t.appendChild(a)}else if(u[e].toString()==="[object Object]"){if(n){r=document.createElement(n);for(var o in u[e]){var l;(l=r)===null||l===void 0||l.setAttribute(Cm(o),Ai(u[e][o]))}var c=Object.keys(u[e]);if(c.indexOf(Gt)>-1&&c.indexOf(_n)<0){var d,v;(d=r)===null||d===void 0||d.setAttribute(_n,u[e][Gt]),(v=r)===null||v===void 0||v.removeAttribute(Gt)}}}else if(typeof u[e]=="number"||typeof u[e]=="string"){var h=document.createTextNode(u[e].toString());t.appendChild(h)}return!r&&n&&(r=document.createElement(n)),r?(r.appendChild(t),r):t.childNodes[0]},nx=function(u,t){var n=u.children();if(n.length!==0)for(var e=0;e<n.length;e++){var r=n.eq(e);if(!!r){var i=Rf(r);i&&t.push(i)}}},Rf=function(u){var t;if(!eo(u)){var n=u.get(),e=n.attributes,r=n.nodeValue;if(u.type===Node.ELEMENT_NODE){t=[u.name];for(var i={},a=0;e&&a<e.length;a++){var o=e[a],l=o.name,c=o.specified,d=o.value;if(c&&!Mm(u,l))if(l==="style"){var v;i.style=Qh(((v=u.get())===null||v===void 0?void 0:v.style.cssText)||d)}else typeof d=="string"&&(i[l]=d)}return t.push(i),nx(u,t),t}return u.type===Node.TEXT_NODE?String(r):void 0}},vf=function(u,t,n){if(t.length===0)return u;for(var e=u,r=!n,i=0;i<t.length&&e!==void 0;i++)e=e[t[i]],!r&&n&&Array.isArray(e)&&e.length>0&&e[1][fn]===n&&(r=!0);return r?e:void 0},ln=function(){function b(u,t){var n=this;Fe(this,b),this.editor=void 0,this.base=void 0,this.toRange=function(){return n.base},this.collapse=function(e){return n.base.collapse(e),n},this.cloneRange=function(){return b.from(n.editor,n.base.cloneRange())},this.select=function(e,r){return r?n.base.selectNodeContents(Tr(e)?e[0]:e):n.base.selectNode(Tr(e)?e[0]:e),n},this.getText=function(){var e=n.cloneContents();return e.textContent},this.getClientRect=function(){var e=n.getClientRects().item(0);return e||(e=n.getBoundingClientRect()),e},this.enlargeFromTextNode=function(){var e=function(i,a,o){var l;if(i.nodeType===Node.TEXT_NODE){if(a===0)switch(o){case"start":n.setStartBefore(i);break;case"end":n.setEndBefore(i);break}else if(a===((l=i.nodeValue)===null||l===void 0?void 0:l.length))switch(o){case"start":n.setStartAfter(i);break;case"end":n.setEndAfter(i);break}}};return e(n.startContainer,n.startOffset,"start"),e(n.endContainer,n.endOffset,"end"),n},this.shrinkToTextNode=function(){var e=function(i,a,o){if(i.nodeType===Node.ELEMENT_NODE){var l=i.childNodes;if(l.length!==0){var c,d,v;if(a>0&&(c=l[a-1]),a<l.length&&(d=l[a]),c&&c.nodeType===Node.TEXT_NODE){var h;v=c,a=((h=v.nodeValue)===null||h===void 0?void 0:h.length)||0}if(d&&d.nodeType===Node.TEXT_NODE&&(v=d,a=0),!!v)switch(o){case"start":n.setStart(v,a);break;case"end":n.setEnd(v,a);break}}}};return e(n.startContainer,n.startOffset,"start"),e(n.endContainer,n.endOffset,"end"),n},this.enlargeToElementNode=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=n.enlargeFromTextNode(),a=n.editor.node,o=function(c,d,v){var h=V(c);if(!(h.type===Node.TEXT_NODE||!e&&a.isBlock(h)||h.isEditable())){var g;if(d===0){for(;!h.prev()&&(g=h.parent(),!(!g||!e&&a.isBlock(g)||!g.inEditor()||g.isEditable()||!r&&(!e&&g.isElement()||e&&a.isBlock(g))));)h=g;v?i.setStartBefore(h[0]):i.setEndBefore(h[0])}else if(d===h.children().length){for(;!h.next()&&(g=h.parent(),!(!g||!e&&a.isBlock(g)||!g.inEditor()||g.isEditable()||!r&&(!e&&g.isElement()||e&&a.isBlock(g))));)h=g;v?i.setStartAfter(h[0]):i.setEndAfter(h[0])}}};return o(i.startContainer,i.startOffset,!0),o(i.endContainer,i.endOffset,!1),n},this.shrinkToElementNode=function(){for(var e=n.editor.node,r,i;n.startContainer.nodeType===Node.ELEMENT_NODE&&(r=n.startContainer.childNodes[n.startOffset])&&(i=V(r))&&r.nodeType===Node.ELEMENT_NODE&&!i.isCursor()&&!e.isVoid(r)&&(!i.isCard()||i.isEditableCard()||i.find(Zi).length>0);)n.setStart(r,0);for(;n.endContainer.nodeType===Node.ELEMENT_NODE&&n.endOffset>0&&(r=n.endContainer.childNodes[n.endOffset-1])&&(i=V(r))&&r.nodeType===Node.ELEMENT_NODE&&!e.isVoid(r)&&!i.isCursor()&&(!i.isCard()||i.isEditableCard()||i.find(Yi).length>0);)n.setEnd(r,r.childNodes.length);return n},this.createSelection=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=new iv(n.editor,n,e);return r.create(),r},this.getSubRanges=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=[];return n.commonAncestorNode.traverse(function(a){if(a.isText()){var o,l=0,c=a.get(),d=((o=c.nodeValue)===null||o===void 0?void 0:o.length)||0,v=n.comparePoint(c,l),h=n.comparePoint(c,d),g=b.create(n.editor);if(v<0){if(h<0)return;h===0?g.setOffset(c,n.startOffset,d):g.setOffset(c,n.startOffset,n.endOffset)}else{if(v!==0||h<0)return;h===0?g.setOffset(c,l,d):g.setOffset(c,l,n.endOffset)}i.push(g)}else if(e&&a.isCard()&&!a.isEditableCard()){var w,x=n.editor.card.find(a);if(!x||r&&x.constructor.singleSelectable===!1)return;var _=x.getCenter(),E=(w=_.get())===null||w===void 0?void 0:w.parentNode;if(!E||!_.inEditor())return;var M=_.index(),T=a.get(),S=n.comparePoint(E,M),D=n.comparePoint(E,M+1),I=b.create(n.editor);if(S<0){if(D<0)return;D===0?I.setOffset(T,n.startOffset,M+1):I.setOffset(T,n.startOffset,n.endOffset)}else{if(S!==0||D<0)return;D===0?I.setOffset(E,M,M+1):I.setOffset(E,M,n.endOffset)}i.push(I)}}),i},this.setOffset=function(e,r,i){return Tr(e)&&(e=e[0]),n.setStart(e,r),n.setEnd(e,i),n},this.findElements=function(){var e=n.startContainer,r=n.endContainer,i=n.startOffset,a=n.endOffset,o=n.collapsed,l=[];if(e!==r||o===!0||e.nodeType===Node.TEXT_NODE)return l;for(var c=e.childNodes,d=i;d<a;d++)l.push(c[d]);return l},this.inCard=function(){var e=n.startNode.closest(Ar);return e&&e.length>0},this.getStartOffsetNode=function(){var e=n.startContainer,r=n.startOffset;return e.nodeType===Node.ELEMENT_NODE&&(e.childNodes[r]||e.childNodes[r-1])||e},this.getEndOffsetNode=function(){var e=n.endContainer,r=n.endOffset;return e.nodeType===Node.ELEMENT_NODE&&(e.childNodes[r]||e.childNodes[r-1])||e},this.scrollIntoView=function(){var e=n.endNode.get();mt&&e&&e.scrollIntoView&&e.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},this.scrollRangeIntoView=function(){var e=n.getEndOffsetNode(),r=e.nodeType===Node.TEXT_NODE?e.parentNode:e,i=n.collapsed?r.getBoundingClientRect():n.getClientRect(),a=window.innerHeight;(i.bottom>=a||i.bottom<=0)&&r.scrollIntoView({block:"center"})},this.scrollIntoViewIfNeeded=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:n.editor.container,r=arguments.length>1?arguments[1]:void 0;if(n.collapsed)e.scrollIntoView(V(n.getEndOffsetNode()));else{var i=n.getStartOffsetNode(),a=n.getEndOffsetNode();V(i).scrollIntoView(r),V(a).scrollIntoView(r)}},this.containsCard=function(){var e=n.collapsed,r=n.commonAncestorNode;return!e&&(r.type!==3&&r.find(Ar).length>0||r.closest(Ar).length>0)},this.handleBr=function(e){var r,i=n.editor.list,a=n.editor.block.closest(n.commonAncestorNode);a.find("br").each(function(d){var v,h,g,w,x=V(d);if((!x.prev()||((v=x.parent())===null||v===void 0?void 0:v.hasClass(i.CUSTOMZIE_LI_CLASS))&&((h=x.parent())===null||h===void 0||(g=h.first())===null||g===void 0?void 0:g.equal(x.prev())))&&x.next()&&x.next().name!=="br"&&![no,ts,ns].includes(x.next().attributes(lt))||!x.next()&&x.prev()&&((w=x.prev())===null||w===void 0?void 0:w.name)!=="br"){var _,E,M;if(e&&x.prev()&&!(((_=x.parent())===null||_===void 0?void 0:_.hasClass(i.CUSTOMZIE_LI_CLASS))&&((E=x.parent())===null||E===void 0||(M=E.first())===null||M===void 0?void 0:M.equal(x.prev()))))return;x.remove()}});var o=a.first(),l=a.children();if(!o||l.length===1&&a.hasClass(i.CUSTOMZIE_LI_CLASS)&&(o==null?void 0:o.isCard()))return a.append(V("<br />")),n;if(l.length===1&&o.isText()&&o.text().replace(/\r\n|\n|\t|\u200b/g,"").length===0)return a.html("<br />"),n;if(l.length===2&&a.hasClass(i.CUSTOMZIE_LI_CLASS)&&(o==null?void 0:o.isCard())&&["cursor","anchor","focus"].includes(((r=a.last())===null||r===void 0?void 0:r.attributes(lt))||"")){var c;(c=a.first())===null||c===void 0||c.after("<br />")}return n},this.getPrevNode=function(){n.enlargeFromTextNode();var e=n.startNode,r=n.startOffset;if(!e.isText()){var i=e.children();if(i.length!==0)return i.eq(r-1)}},this.getNextNode=function(){n.enlargeFromTextNode();var e=n.endNode,r=n.endOffset;if(!e.isText()){var i=e.children();if(i.length!==0)return i.eq(r)}},this.editor=u,this.base=t}return Be(b,[{key:"collapsed",get:function(){return this.base.collapsed}},{key:"endOffset",get:function(){return this.base.endOffset}},{key:"startOffset",get:function(){return this.base.startOffset}},{key:"startContainer",get:function(){return this.base.startContainer}},{key:"endContainer",get:function(){return this.base.endContainer}},{key:"commonAncestorContainer",get:function(){return this.base.commonAncestorContainer}},{key:"cloneContents",value:function(){return this.base.cloneContents()}},{key:"deleteContents",value:function(){return this.base.deleteContents()}},{key:"extractContents",value:function(){return this.base.extractContents()}},{key:"getBoundingClientRect",value:function(){return this.base.getBoundingClientRect()}},{key:"getClientRects",value:function(){return this.base.getClientRects()}},{key:"insertNode",value:function(t){var n;Tr(t)&&(t=t[0]);var e=this.startNode;if(!V(t).isCursor()&&e.children().length===1&&((n=e.first())===null||n===void 0?void 0:n.name)==="br"){var r;(r=e.first())===null||r===void 0||r.remove()}else e.name==="br"&&e.remove();this.base.insertNode(t)}},{key:"isPointInRange",value:function(t,n){return Tr(t)&&(t=t[0]),this.base.isPointInRange(t,n)}},{key:"comparePoint",value:function(t,n){return Tr(t)&&(t=t[0]),this.base.comparePoint(t,n)}},{key:"setEnd",value:function(t,n){return Tr(t)&&(t=t[0]),this.base.setEnd(t,n)}},{key:"setEndAfter",value:function(t){return Tr(t)&&(t=t[0]),this.base.setEndAfter(t)}},{key:"setEndBefore",value:function(t){return Tr(t)&&(t=t[0]),this.base.setEndBefore(t)}},{key:"setStart",value:function(t,n){return Tr(t)&&(t=t[0]),this.base.setStart(t,n)}},{key:"setStartAfter",value:function(t){return Tr(t)&&(t=t[0]),this.base.setStartAfter(t)}},{key:"setStartBefore",value:function(t){return Tr(t)&&(t=t[0]),this.base.setStartBefore(t)}},{key:"toString",value:function(){return this.base.toString()}},{key:"startNode",get:function(){return V(this.base.startContainer)}},{key:"endNode",get:function(){return V(this.base.endContainer)}},{key:"commonAncestorNode",get:function(){return V(this.base.commonAncestorContainer)}},{key:"deepCut",value:function(){this.collapsed||this.extractContents();var t=this.startNode;if(!t.isEditable()){var n=t;if(n&&!n.isEditable()){for(var e=n.parent();e&&!e.isEditable();)n=e,e=e.parent();this.setEndAfter(n[0]);var r=this.extractContents();this.insertNode(r),this.collapse(!0)}}}},{key:"equal",value:function(t){return this.startContainer===t.startContainer&&this.startOffset===t.startOffset&&this.endContainer===t.endContainer&&this.endOffset===t.endOffset}},{key:"getRootBlock",value:function(){if(this.startNode.isEditable())return this.startNode.children().eq(this.startOffset);for(var t=this.startNode;((n=t)===null||n===void 0?void 0:n.parent())&&!t.parent().isEditable();){var n;t=t.parent()}return t}},{key:"filterPath",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=[];return function(r){var i=V(r);if(n&&["left","right","center","body"].includes(i.attributes(jn))){var a=t.editor.card.closest(i);return a&&(a==null?void 0:a.length)>0&&e.push(a),!0}return n&&i.isCard()&&e.includes(i)?!0:!eo(i)}}},{key:"toPath",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.editor.container,r=this.cloneRange(),i=r.commonAncestorNode;if(!(!i.isRoot()&&!i.inEditor())){r.shrinkToElementNode().shrinkToTextNode();var a=function(l,c){var d,v=l.attributes(fn),h=v?0:-1,g=l.getPath(e,!((d=l.parent())===null||d===void 0)&&d.isRoot()?void 0:t.filterPath(n),function(w,x,_){if(w===-1)return v="",h=-1,[];v||(v=_.attributes(fn),h=x.length),x.unshift(w)});return h=g.length-h,g.push(c),{path:g,id:v,bi:h}};return{start:a(r.startNode,r.startOffset),end:a(r.endNode,r.endOffset)}}}}]),b}();ln.create=void 0;ln.from=void 0;ln.fromPath=void 0;ln.create=function(b){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document,t=arguments.length>2?arguments[2]:void 0,n;return t?n=u.caretRangeFromPoint(t.x,t.y):n=u.createRange(),ln.from(b,n)};ln.from=function(b){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window;if(!ix(u)){var t=rx(u)?u:u.getSelection();if(t&&t.rangeCount>0)u=t.getRangeAt(0);else return null}return new ln(b,u)};ln.fromPath=function(b,u){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:b.container,e=u.start.path.slice(),r=u.end.path.slice(),i=e.pop(),a=r.pop(),o=function(x){for(var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:b.container,E=_,M=0;M<x.length;M++){var T=x[M];T<0&&(T=0);for(var S=void 0,D=E.first(),I=0;D&&D.length>0;)if(!D.attributes(Id)&&D.attributes(lt)!==Gn||t&&["left","right"].includes(D.attributes(jn))){if(I===T||!D.next()){S=D;break}I++,D=D.next()}else D=D.next();if(!S)break;E=S}return E},l=function(x,_,E,M){if(E!==null){var T;if(M<0&&(M=0),E.nodeType===Node.ELEMENT_NODE&&M>E.childNodes.length&&(M=E.childNodes.length),E.nodeType===Node.TEXT_NODE&&M>(((T=E.nodeValue)===null||T===void 0?void 0:T.length)||0)){var S;M=((S=E.nodeValue)===null||S===void 0?void 0:S.length)||0}_[x](E,M)}},c=u.start.id?n.find("[".concat(fn,'="').concat(u.start.id,'"]')):n,d=o(u.start.bi>-1&&c.length>0?e.slice(u.start.bi):e,c.length>0?c:void 0),v=u.end.id?n.find("[".concat(fn,'="').concat(u.end.id,'"]')):n,h=o(u.end.bi>-1&&v.length>0?r.slice(u.end.bi):r,v.length>0?v:void 0),g=ln.create(b,document);return l("setStart",g,d.get(),i===void 0?0:i),l("setEnd",g,h.get(),a===void 0?0:a),g};var rx=function(u){return u.getRangeAt!==void 0},ix=function(u){return u.collapsed!==void 0},Tc=function(u){return!!u&&u.base!==void 0};function Mo(b,u){u===void 0&&(u={});var t=u.insertAt;if(!(!b||typeof document=="undefined")){var n=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",t==="top"&&n.firstChild?n.insertBefore(e,n.firstChild):n.appendChild(e),e.styleSheet?e.styleSheet.cssText=b:e.appendChild(document.createTextNode(b))}}var ax=`.data-drop-cursor {\r
	position: absolute;\r
	width: 2px;\r
	background-color: #347EFF;\r
}\r
\r
div.data-drag-image {\r
	background-color: #f9f9f9;\r
}`;Mo(ax);var ox=function(){function b(u,t){Fe(this,b),this.x=0,this.y=0,this.doc=document,this.range=void 0,this.caretRange=void 0,this.targetCard=void 0,this.caretCard=void 0,this.isCardLeftRange=!1,this.engine=void 0,this.options={className:"data-drop-cursor"},this.engine=u,this.options=Ie(Ie({},this.options),t)}return Be(b,[{key:"getRangeForPoint",value:function(){var t=this.doc,n=this.x,e=this.y;if(t.caretRangeFromPoint!==void 0){var r=ln.create(this.engine,t,{x:n,y:e});if(r)return r}if(event&&event.rangeParent!==void 0){var i=ln.create(this.engine,t);return i.setStart(event.rangeParent,event.rangeOffset),i.collapse(!0),i}}},{key:"getCard",value:function(){return this.targetCard||this.caretCard}},{key:"parseEvent",value:function(t){t.preventDefault(),t.stopPropagation(),t.dataTransfer&&(t.dataTransfer.dropEffect="move");var n=this.engine.card;this.x=t.clientX,this.y=t.clientY;var e=V(t.target||[]);this.doc=e.document||document,this.targetCard=n.find(e),this.caretRange=this.getRangeForPoint(),this.caretCard=this.caretRange?n.find(this.caretRange.commonAncestorContainer):void 0}},{key:"getRange",value:function(){var t=this.caretRange,n=this.doc,e=this.x,r=this.getCard(),i;if(r&&r.root.length>0){i=ln.create(this.engine,n);var a=r.root.getBoundingClientRect()||{left:0,right:0},o=a.left,l=a.right,c=(o+l)/2;i.select(r.root.get()),c<e?(i.collapse(!1),this.isCardLeftRange=!1):(i.collapse(!0),this.isCardLeftRange=!0)}return this.range=i||t,this.range}},{key:"getRect",value:function(){var t,n,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:2,r=this.isCardLeftRange,i=this.range,a=this.getCard();if(a&&a.root.length>0&&i){if(r){i.setEnd(i.commonAncestorContainer,i.endOffset+1);var o=i.getBoundingClientRect(),l=o.left,c=o.bottom,d=o.top;return i.setEnd(i.commonAncestorContainer,i.endOffset-1),{x:l-e,y:d,height:c-d}}i.setStart(i.commonAncestorContainer,i.startOffset-1);var v=i.getBoundingClientRect(),h=v.right,g=v.top,w=v.bottom;return i.setStart(i.commonAncestorContainer,i.startOffset+1),{x:h-e,y:g,height:w-g}}var x=(t=this.range)===null||t===void 0?void 0:t.getBoundingClientRect();if(((n=x)===null||n===void 0?void 0:n.height)===0){var _,E=(_=this.range)===null||_===void 0?void 0:_.startContainer;x=E.getBoundingClientRect()}var M=x||{},T=M.left,S=M.top,D=M.bottom;return{x:T,y:S,height:(D||0)-(S||0)}}},{key:"getCursor",value:function(){var t=this.options.className;return V("body > div.".concat(t))}},{key:"removeCursor",value:function(){this.getCursor().remove()}},{key:"setCursor",value:function(){this.removeCursor();var t=this.options.className,n=V('<div class="'.concat(t,'" />'));V(document.body).append(n)}}]),b}(),sx=function(){function b(u){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Fe(this,b),this.events={},this.globalEvents={},this.engine=void 0,this.isComposing=void 0,this.isSelecting=void 0,this.dragoverHelper=void 0,this.options=void 0,this.keydownRange=null,this.engine=u,this.isComposing=!1,this.isSelecting=!1,this.dragoverHelper=new ox(u),this.options=t}return Be(b,[{key:"isCardInput",value:function(t){for(var n=t.target?V(t.target):null;n;){if(n.isEditable())return!1;if(n.attributes(jn)==="center"||n.attributes(lt)===Gn)return!0;var e=n.parent();if(!e)break;n=e}return!1}},{key:"onInput",value:function(t){var n=this,e=this.options.bindInput;if(!(e&&!e())){var r=null;this.onContainer("compositionstart",function(a){if(!n.engine.readonly){n.isCardInput(a)||n.engine.ot.startMutationCache();var o=n.engine,l=o.change,c=o.node,d=o.block,v=o.list,h=l.range.get().cloneRange().shrinkToTextNode().enlargeToElementNode();if(!h.collapsed){var g=d.closest(h.startNode),w=d.closest(h.endNode);if((c.isCustomize(g)||c.isCustomize(w))&&!g.equal(w)){var x;(x=v.backspaceEvent)===null||x===void 0||x.trigger(new KeyboardEvent(""))}}n.isComposing=!0}}),this.onContainer("compositionend",function(){n.engine.readonly||(n.isComposing=!1)}),this.onContainer("beforeinput",function(a){if(!n.engine.readonly){var o=n.engine,l=o.change,c=o.card,d=o.node,v=o.block,h=o.list;if(a.data==="@"){var g=n.engine.trigger("keydown:at",a);g===!1&&(n.engine.ot.submitMutationCache(),a.preventDefault())}l.rangePathBeforeCommand||l.cacheRangeBeforeCommand();var w=l.range.get(),x=w.cloneRange().shrinkToTextNode().enlargeToElementNode(),_=x.startNode;if(Nf&&_.name==="li"&&!d.isCustomize(_)){var E;((E=_.first())===null||E===void 0?void 0:E.name)!=="br"&&_.prepend("<br />")}if(Df&&_.name==="li"&&x.startOffset===1&&d.isCustomize(_)&&n.isComposing){var M=_.first(),T=M==null?void 0:M.next(),S=function(){var H=V("\u200B",null);M==null||M.after(H),x.setOffset(H,1,1),l.range.select(x),r=_};if(T!=null&&T.isText()){var D=T.text();/^\u200b/.test(D)||S()}else(T==null?void 0:T.name)==="br"&&T.remove(),S()}if(x.collapsed||(x.commonAncestorNode.attributes(jn)==="body"?c.remove(x.commonAncestorNode):(x.startNode.attributes(jn)==="body"&&c.remove(x.startNode),x.endNode.attributes(jn)==="body"&&c.remove(x.endNode))),!x.collapsed&&!n.isComposing){var I=v.closest(x.startNode),P=v.closest(x.endNode);if((d.isCustomize(I)||d.isCustomize(P))&&!I.equal(P)){var B;(B=h.backspaceEvent)===null||B===void 0||B.trigger(new KeyboardEvent("")),d.insertText(a.data||"")}}var $=a.inputType;n.isComposing&&!$.includes("Composition")&&n.engine.ot.submitMutationCache();var q=["format","history"];q.forEach(function(G){if($.indexOf(G)===0){a.preventDefault();var H=$.substring(G.length).toLowerCase();n.engine.command.queryEnabled(H)&&n.engine.command.execute(H)}})}});var i=null;this.onContainer("input",function(a){n.engine.readonly||n.isCardInput(a)||(n.engine.isEmpty()?n.engine.showPlaceholder():n.engine.hidePlaceholder(),i&&clearTimeout(i),i=setTimeout(function(){if(!n.isComposing){if(Df&&r){var o=r.first(),l=o==null?void 0:o.next();if(l!=null&&l.isText()){var c=l.text();if(/^\u200b/.test(c)){var d=l.get();d==null||d.splitText(1),d==null||d.remove()}}var v=n.engine.change.range.get(),h=v.startNode,g=v.startOffset;if(v.collapsed&&(h==null?void 0:h.isText())){var w=h.text(),x=w.substring(g);/^\u200b/.test(x)&&(h.text(w.substring(0,g)+x.substring(1)),v.setOffset(h,g,g),n.engine.change.range.select(v))}r=null}t(a),n.engine.ot.submitMutationCache()}},10))})}}},{key:"onSelect",value:function(t){var n=this,e=this.options.bindSelect;e&&!e()||(this.onContainer(mt?"touchstart":"mousedown",function(r){n.isCardInput(r)||(n.isSelecting=!0)}),this.onDocument(mt?"touchend":"mouseup",function(r){!n.isSelecting||(n.isSelecting=!1,window.setTimeout(function(){return t(r)},10))}),this.onContainer("keydown",function(){var r=ln.from(n.engine);n.keydownRange=r}),this.onContainer("keyup",function(r){if(!n.engine.readonly&&!n.isCardInput(r)&&(yt("left",r)||yt("right",r)||yt("up",r)||yt("down",r)||r.key==="Meta"||yt("shift+left",r)||yt("shift+right",r)||yt("shift+up",r)||yt("shift+down",r)||yt("ctrl+b",r)||yt("ctrl+f",r)||yt("ctrl+n",r)||yt("ctrl+p",r)||yt("ctrl+a",r)||yt("ctrl+e",r)||yt("home",r)||yt("end",r))){var i=ln.from(n.engine);if(n.keydownRange&&i&&i.equal(n.keydownRange))return;n.isComposing||t(r)}}))}},{key:"onPaste",value:function(t){var n=this,e=this.options.bindPaste;if(!(e&&!e())){var r=!1;this.onContainer("keydown",function(i){n.engine.readonly||((!yt("mod",i)||!yt("shift",i)||!yt("v",i))&&(r=!1),(yt("mod+shift+v",i)||yt("mod+alt+shift+v",i))&&(r=!0))}),this.onDocument("paste",function(i){var a=n.engine.change.range.get();if(!!n.engine.container.contains(a.commonAncestorNode)&&!n.engine.readonly&&!n.isCardInput(i)){i.preventDefault();var o=n.engine.clipboard.getData(i),l=r;r=!1,t(Ie(Ie({},o),{},{isPasteText:l}))}})}}},{key:"onDrop",value:function(t){var n=this,e=this.options.bindDrop;if(!(e&&!e())){var r,i,a,o=function(c){if(!(!c.target||n.engine.readonly)){c.stopPropagation(),n.dragoverHelper.setCursor();var d=V(c.target),v=d.attributes("drag-card-trigger");if(r=n.engine.card.find(v||d),r){var h,g;if((h=r.toolbarModel)===null||h===void 0||h.hideCardToolbar(),i=r.find("img.data-drag-image"),i.length>0)i=n.engine.node.clone(i);else{i=V('<div class="data-drag-image" />');var w=r.root.get();w&&i.css({width:w.clientWidth+"px",height:w.clientHeight+"px"})}i.css({position:"absolute",top:"-99999px",right:"-99999px"}),V(document.body).append(i),(g=c.dataTransfer)===null||g===void 0||g.setDragImage(i[0],0,0)}}};this.onRoot("dragstart",o),this.onContainer("dragstart",o),this.onContainer("dragover",function(l){if(!n.engine.readonly){var c=n.dragoverHelper,d=c.getCursor();if(d.length!==0){c.parseEvent(l),a=c.getRange();var v=c.getRect();d.css({height:v.height+"px",top:Math.round(window.pageYOffset+(v.y||0))+"px",left:Math.round(window.pageXOffset+(v.x||0))+"px"})}else n.dragoverHelper.setCursor()}}),this.onContainer("dragleave",function(){n.dragoverHelper.removeCursor()}),this.onContainer("dragend",function(){n.dragoverHelper.removeCursor(),i&&(i.remove(),i=void 0)}),this.onContainer("drop",function(l){if(!n.engine.readonly){l.preventDefault(),n.dragoverHelper.removeCursor(),i&&(i.remove(),i=void 0);var c=l.dataTransfer,d=[];try{c&&c.items&&c.items.length>0?Array.from(c.items).forEach(function(h){if(h.kind==="file"){var g=h.getAsFile();g&&d.push(g)}}):c&&c.files&&c.files.length>0&&(d=Array.from(c.files))}catch{c&&c.files&&c.files.length>0&&(d=Array.from(c.files))}var v={event:l,range:a,card:r,files:d};t(v),r=void 0}})}}},{key:"onDocument",value:function(t,n,e){this.addEvent("document",t,n,e)}},{key:"onWindow",value:function(t,n,e){this.addEvent("window",t,n,e)}},{key:"onContainer",value:function(t,n,e){this.addEvent("container",t,n,e)}},{key:"onRoot",value:function(t,n,e){this.addEvent("root",t,n,e)}},{key:"addEvent",value:function(t,n,e,r){var i=this;if(this.globalEvents[t]||(this.globalEvents[t]=[]),!this.globalEvents[t].find(function(o){return o.type===n})){var a=function(){for(var l=i.events[t].filter(function(h){return h.type===n}),c,d=0;d<l.length;d++){var v;if(c=(v=l[d]).listener.apply(v,arguments),c===!1)break}return c};switch(t){case"container":this.engine.container.on(n,a);break;case"root":this.engine.root.on(n,a);break;case"document":document.addEventListener(n,a);break;case"window":window.addEventListener(n,a);break}this.globalEvents[t].push({type:n,listener:a})}this.events[t]||(this.events[t]=[]),r!==void 0?this.events[t].splice(r,0,{type:n,listener:e}):this.events[t].push({type:n,listener:e})}},{key:"destroy",value:function(){var t=this;Object.keys(this.globalEvents).forEach(function(n){var e=t.globalEvents[n];e.forEach(function(r){n==="window"?window.removeEventListener(r.type,r.listener):n==="document"?document.removeEventListener(r.type,r.listener):n==="container"?t.engine.container.off(r.type,r.listener):n==="root"&&t.engine.root.off(r.type,r.listener)})})}}]),b}(),jg=function(){function b(u){Fe(this,b),this.source=void 0,this.source=u}return Be(b,[{key:"toHTML",value:function(){var t=Sr(this.source);return t=t.replace(/\n/g,"</p><p>").replace(/<p><\/p>/g,"<p><br /></p>").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;"),t.indexOf("</p><p>")>=0&&(t="<p>".concat(t,"</p>")),t}}]),b}(),lx=function(u){var t="";return Object.keys(u).forEach(function(n){if(n!=="style"){var e=Sr(u[n]);t+=" ".concat(n,'="').concat(e,'"')}}),t.trim()},ux=function(u){var t="";return Object.keys(u).forEach(function(n){n=n.toLowerCase();var e=Sr(u[n]);/^(padding|margin|text-indent)/.test(n)&&tn(e)===0||(n.endsWith("color")&&(e=to(e).toHexString()),t+=" ".concat(n,": ").concat(e,";"))}),t.trim()},_o=function(){function b(u,t,n){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;Fe(this,b),this.root=void 0,this.editor=void 0,this.isNormalize=!0,this.editor=t,this.isNormalize=e;var r=this.editor.node;if(typeof u=="string"){u=u.replace(/<a\s{0,1000}\/>/gi,"<a></a>"),u=u.replace(/<a(\s[^>]+?)\/>/gi,function(l,c){return"<a".concat(c,"></a>")}),u=u.replace(/<p(>|\s+[^>]*>)/gi,"<paragraph$1").replace(/<\/p>/gi,"</paragraph>"),u=Ld(u);var i=new DOMParser().parseFromString(u,"text/html");this.root=V(i.body);var a=V("<p></p>"),o=this.root.find("paragraph");o.each(function(l,c){var d=o.eq(c);if(!!d){var v=a.clone(),h=d.attributes();Object.keys(h).forEach(function(g){v.attributes(g,h[g])}),r.replace(d,v,!0)}})}else Tr(u)?this.root=u:this.root=V(u);n&&n(this.root)}return Be(b,[{key:"convert",value:function(t,n,e){for(var r=t.transform(n),i=[],a=this.editor.node,o=null;r;){var l=r,c=l.rule;i.push(c);var d=r.node,v=d.name,h=d.attributes,g=d.style;delete h[fn];var w=V("<".concat(v," />"));if(a.setAttributes(w,Ie(Ie({},h),{},{style:g})),w.append(n.children()),n.isCard())return n.replaceWith(w),w;if(!a.isBlock(w,e))r.replace?(n.replaceWith(w),n=w):n.append(w),(!o||o.length===0)&&(o=w);else{r.replace?(n.replaceWith(w),n=w):n.append(w),(!o||o.length===0)&&(o=w),r=t.transform(w,function(x){return i.indexOf(x)<0});continue}r=t.transform(n,function(x){return i.indexOf(x)<0})}return o}},{key:"normalize",value:function(t,n,e){var r=this,i=this.editor.node,a=this.editor.inline;if(!this.isNormalize){if(!e)return;var o=t.find(Ar);o.each(function(d,v){var h=o.eq(v);!h||r.convert(e,h,n)});var l=t.find("".concat(rv,",").concat(Np,",").concat(Dp));l.each(function(d,v){var h=l.eq(v);!h||r.convert(e,h,n)});return}var c=function(v){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"mark",g=v.attributes(),w=Lf(g.style||"");if(delete g.style,!(Object.keys(g).length===0&&Object.keys(w).length===0)){var x=Object.keys(g).length,_=Object.keys(w).length,E=v.clone();n.filter(v,g,w,!0),E.removeAttributes(fn);var M=Object.keys(g),T=0;M.forEach(function(P){g[P]&&(T++,E.removeAttributes(P))});var S=0,D=Object.keys(w);if(D.forEach(function(P){w[P]&&(S++,E.css(P,""))}),(T===x&&S===_||T===0&&S===0)&&n.getType(E)===h){v.before(E);var I=v.children();E.append(I.length>0?I:h==="block"?"<br />":V("\u200B",null)),v.remove(),v=E;return}return E.attributes("style").trim()===""&&E.removeAttributes("style"),E}};t.traverse(function(d){if(!(d.equal(t)||["style","script","meta"].includes(d.name))&&d.isElement()){var v=d.isCard();if(e&&(!n.getType(d)||v)){var h=r.convert(e,d,n);if(h)return h}if(v)return;if(i.isMark(d,n)){var g=function(){var w=[],x=n.getRule(d);if(x){var _=function(){w.push(x),d.children().length===0&&r.editor.mark.repairCursor(d);var E=c(d);if(!E)return{v:{v:void 0}};var M=n.getType(E,function(q){return q.name===E.name&&q.type==="mark"&&w.indexOf(q)<0});if(!M&&e){var T=r.convert(e,E,n);if(T&&T.length>0){var S=d.children();return T.append(S.length>0?S:V("\u200B",null)),d.append(E.length===0?T:E.children()),{v:{v:void 0}}}}for(var D=d;M==="mark";){for(var I=D.children(),P=E;;){var B=P.children();if(B.length>0)P=B;else break}if(P.append(I.length>0?I:V("\u200B",null)),D.append(E),D=E,E=c(E),!E)break;if(M=n.getType(E,function(q){return q.name===E.name&&q.type==="mark"&&w.indexOf(q)<0}),!M){if(e){var $=r.convert(e,E,n);if($&&$.length>0){E=E.length>0?E.children():$,M="mark";continue}}break}if(x=n.getRule(E),!x)break;w.push(x)}}();if(Jn(_)==="object")return _.v}}();if(Jn(g)==="object")return g.v}else if(i.isInline(d))return a.flat(d,n)}})}},{key:"traverse",value:function(t){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,e=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,a=this.editor.node,o=t.first();o;){if(["style","script","meta"].includes(o.name)){o=o.next();continue}if(o.isElement()){var l=o.name,c=o.attributes(),d=Lf(c.style||"");if(delete c.style,["left","right"].indexOf(c[jn])>=0){o=o.next();continue}var v=!0,h=void 0;if(n&&c[lt]!==Dd)if(h=n.getType(o),h===void 0){v=!1;var g=o.parent();if(g&&a.isBlock(g,n)&&g.children().length===1&&o.children().length===0){var w=V("<br />");o.before(w),o.remove(),o=w,l=w.name,c={},d={},v=!0}}else n.filter(o,c,d);if(c[jn]!=="center"&&r.onOpen&&v){var x=r.onOpen(o,l,c,d);if(x===!1){o=o.next();continue}}(l!=="card"||i)&&this.traverse(o,n,e,r,i),c[jn]!=="center"&&r.onClose&&v&&r.onClose(o,l,c,d)}else if(o.isText()){var _=o[0].nodeValue?Sr(o[0].nodeValue):"";_===""&&a.isBlock(o.parent(),n||void 0)&&(o.prev()||(_=_.replace(/^[ \n]+/,"")),o.next()||(_=_.replace(/[ \n]+$/,"")));var E=o.prev(),M=o.next();E&&a.isBlock(E,n||void 0)&&M&&a.isBlock(M,n||void 0)&&_.trim()===""&&(_=_.trim()),r.onText&&r.onText(o,_)}o=o.next()}}},{key:"toValue",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,a=[],o=this.editor.node,l=this.root.clone(!0);n&&this.normalize(l,n,e),this.editor.trigger("parse:value-before",l),this.traverse(l,n,e,{onOpen:function(v,h,g,w){if(t.editor.trigger("parse:value",v,g,w,a)===!1)return!1;if(a.push("<"),a.push(h),Object.keys(g).length>0&&a.push(" "+lx(g)),Object.keys(w).length>0){var x=ux(w);x!==""&&(a.push(' style="'),a.push(x),a.push('"'))}o.isVoid(h,n||void 0)&&v.children().length===0?a.push(" />"):a.push(">")},onText:function(v,h){r&&h.length>1&&(h=h.replace(/[\u00a0 ]+/g,function(g){var w=[];g=g.replace(/\u00a0/g," ");for(var x=0;x<g.length;x++)w[x]=x%2==0?g[x]:"\xA0";return w.join("")})),a.push(h)},onClose:function(v,h){o.isVoid(h,n||void 0)||a.push("</".concat(h,">"))}}),this.editor.trigger("parse:value-after",a),a.length>0&&/^\n+/g.test(a[0])&&(a[0]=a[0].replace(/^\n+/g,"")),a.length>0&&/\n+$/g.test(a[a.length-1])&&(a[a.length-1]=a[a.length-1].replace(/\n+$/g,""));var c=a.join("");return i?Ld(c):c}},{key:"toHTML",value:function(t,n){var e=V("<div />"),r=this.editor.container.css();return t&&n?(V(t).append(this.root).css(r),e.append(n)):e.append(this.root),this.editor.trigger("parse:html-before",this.root),e.traverse(function(i){i.isText()||i.css("user-select")==="none"&&i.remove()}),this.editor.trigger("parse:html",e),this.editor.trigger("parse:html-after",e),e.html()}},{key:"toDOM",value:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0,e=this.toValue(t,n,!1,!0),r=new DOMParser().parseFromString(e,"text/html"),i=r.createDocumentFragment(),a=r.body.childNodes;a.length>0;){var o=a[0];i.appendChild(o)}return i}},{key:"toText",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=this.root.clone(!0),a=[];return this.traverse(i,null,null,{onOpen:function(l,c){if(c==="br"&&a.push(`
`),r&&l.name==="li"){if(l.hasClass(t.editor.list.CUSTOMZIE_LI_CLASS))return;var d=l.parent(),v=d==null?void 0:d.css("listStyleType");if((d==null?void 0:d.name)==="ol"){var h=d[0].start,g=h||1;a.push("".concat(Fg(v,g),". ")),d.attributes("start",g+1)}else(d==null?void 0:d.name)==="ul"&&a.push(Fg(v)+" ")}},onText:function(l,c){c=Ai(c),c=c.replace(/\u00a0/g," "),a.push(c)},onClose:function(l,c){if(c==="p"||t.editor.node.isBlock(l,n||t.editor.schema)){var d=l.children().toArray();if(d.some(function(v){return v.name==="br"})||d.some(function(v){return t.editor.node.isBlock(v,n||t.editor.schema)}))return;a.push(`
`)}}},e),a.join("").trim()}}]),b}(),dx=function(){function b(u,t){Fe(this,b),this.source=void 0,this.engine=void 0,this.schema=void 0,this.source=u,this.engine=t,this.schema=this.engine.schema.clone()}return Be(b,[{key:"parser",value:function(){var t=this,n=this.engine.conversion.clone();this.engine.trigger("paste:schema",this.schema);var e=new _o(this.source,this.engine,function(r){t.engine.trigger("paste:origin",r)});return e.toDOM(this.schema,n)}},{key:"getDefaultStyle",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.engine.container,n={color:to(t.css("color")).toHexString(),"background-color":to(t.css("background-color")).toHexString(),"font-size":t.css("font-size")};return n}},{key:"elementNormalize",value:function(t){var n=this,e=this.getDefaultStyle(),r=Object.keys(e),i=this.engine,a=i.inline,o=i.list,l=this.engine.node,c=this.engine.mark,d=this.engine.block,v=[];V(t).traverse(function(h){var g,w,x,_=h.parent();if(!(!_||h.isCard()||h.fragment===t)){if(h.isText()){var E=h.text();if(/\u200b/.test(E)){var M=!0,T=h.next(),S=h.prev(),D=h.parent();(D&&l.isMark(D,n.schema)||D&&l.isInline(D,n.schema)||T&&l.isInline(T,n.schema)||S&&l.isInline(S,n.schema))&&(M=!1),M&&(E=E.replace(/\u200b/g,""),h.text(E))}return}var I=h.css();r.forEach(function(Wt){var Ut=I[Wt];!Ut||(Wt.endsWith("color")&&(Ut=to(Ut).toHexString()),Ut.toLowerCase()===e[Wt].toLowerCase()&&h.css(Wt,""))});var P=n.schema.getType(h);if(!P){var B=h.first();return l.unwrap(h),B}l.removeMinusStyle(h,"text-indent"),l.isList(h)&&h.css("padding-left","");var $=h.attributes();for(($.style||"").trim()===""&&h.removeAttributes("style"),P==="block"&&n.engine.block.brToBlock(h);h.name==="span"&&l.isEmpty(h);){var q=h.children();if(q.length>0)break;if(_=h.parent(),h.remove(),!_||(h=_,_=h.parent(),!_))return;P=void 0,$=void 0}if($||($=h.attributes()),!$[_n]){var G=P?P==="block":l.isBlock(h,n.schema),H=l.isVoid(h,n.schema),z=l.isBlock(_,n.schema);if(G&&$["data-type"]!=="p"&&!H&&!z&&l.html(h)===""){h.remove();return}if($["data-type"]==="p"&&h.removeAttributes("data-type"),G&&((g=_)===null||g===void 0?void 0:g.name)==="p"){var O;l.unwrap(_),_=h.parent(),((O=_)===null||O===void 0?void 0:O.fragment)===t&&(_=void 0),z=_?l.isBlock(_,n.schema):!1}var Q=_?l.isList(_):!1;if(h.name==="li"&&_&&!Q){var ie=V("<ul />");h.before(ie),ie.append(h);return}if(l.isList(h)&&_&&l.isList(_)){var L=[],F=[],X=!0,se=_.children().toArray(),Y=_.clone(),j=function(){return Y.children().length>0?(X?L.push(Y):F.push(Y),Y=_.clone(),!0):!1};se.forEach(function(Wt,Ut){if(!!Wt){if(Wt.equal(h)){se.length-1===Ut?(j(),F.push(h)):(Ut===0||j(),L.push(h)),X=!1;return}if(Wt.name==="li"){Y.append(Wt);return}else j();X?L.push(Wt):F.push(Wt)}}),j();var fe=_.attributes(o.INDENT_KEY)||"0";h.attributes(o.INDENT_KEY,fe),o.addIndent(h,1);var ve=_;return L.forEach(function(Wt){var Ut=V(Wt);!Ut||Ut.children().length===0||(ve.after(Ut),ve=Ut)}),F.forEach(function(Wt){var Ut=V(Wt);!Ut||Ut.children().length===0||(ve.after(Ut),ve=Ut)}),_.remove(),h||void 0}if(h.name!=="li"&&Q){var ae=V("<li />");h.before(ae),ae.append(h);return}if(l.isList(h)&&((w=_)===null||w===void 0?void 0:w.name)==="li"){var J,pe,Ee,Le,Re,Ce,ne=(J=_)===null||J===void 0?void 0:J.parent();if(!ne){l.unwrap(_);return}var me=ne.clone(),ue=ne.clone(),Te=!0,ze=ne.children().toArray();ze.forEach(function(Wt){if(!!Wt){if(Wt.equal(_)){Te=!1;return}Te?me.append(Wt):ue.append(Wt)}});var We=(pe=_)===null||pe===void 0||(Ee=pe.parent())===null||Ee===void 0?void 0:Ee.hasClass("data-list"),et=(Le=_)===null||Le===void 0?void 0:Le.children(),Ke=null,Ge=null;et.each(function(Wt,Ut){var In=et.eq(Ut);if(!(!In||l.isEmptyWithTrim(In))){var lr=l.isList(In),yi=me[me.length-1];if(lr){var Ni,Yr=((Ni=V(yi))===null||Ni===void 0?void 0:Ni.attributes(o.INDENT_KEY))||"0";In.attributes(o.INDENT_KEY,Yr),o.addIndent(In,1),me[me.length]=In[0],Ke=null;return}if(!Ke){var ri;Ke=V(We?'<li class="'.concat(o.CUSTOMZIE_LI_CLASS,'" />'):"<li />");var Ia=(ri=V(yi))===null||ri===void 0?void 0:ri.last();Ia?Ia==null||Ia.after(Ke):V(yi).append(Ke)}Ke.append(Wt),Ge||(Ge=Ke)}}),(Re=_)===null||Re===void 0||Re.remove();var _e=ne;return me.each(function(Wt){var Ut=V(Wt);!Ut||Ut.children().length===0||(_e.after(Ut),_e=Ut)}),ue.each(function(Wt){var Ut=V(Wt);!Ut||Ut.children().length===0||(_e.after(Ut),_e=Ut)}),ne.remove(),((Ce=Ge)===null||Ce===void 0?void 0:Ce.next())||me.next()||void 0}if(h.name==="p"&&Q){var Ue=V("<li />");return l.replace(h,Ue),Ue}if(G&&!H&&l.html(h).trim()===""&&(l.isRootBlock(h,n.schema)||h.name==="li")&&l.html(h,"<br />"),G&&((x=_)===null||x===void 0?void 0:x.name)==="li"){var Ae;h.children().length===1&&((Ae=h.first())===null||Ae===void 0?void 0:Ae.name)==="br"||h.after("<br />"),l.unwrap(h);return}if(!G&&l.isInline(h)&&!h.isCard()&&!H){var ot=h.allChildren().some(function(Wt){return l.isVoid(Wt,n.schema)});l.isEmptyWithTrim(h)&&!ot?h.remove():a.repairCursor(h)}l.removeSide(h);var nt=_,wt=function Wt(Ut){if(nt&&!nt.fragment&&l.isBlock(Ut,n.schema)&&l.isBlock(nt,n.schema)&&!n.schema.isAllowIn(nt.name,Ut.name)){var In=Ut.children();l.unwrap(Ut),In.each(function(lr,yi){Wt(In.eq(yi))})}};for(wt(h);h.length>0&&nt&&!nt.fragment&&l.isBlock(h,n.schema)&&!l.isBlock(nt,n.schema);){var bt=h.clone();l.unwrap(h),nt.before(bt),bt.append(nt),h=bt,nt=h.parent()}var Et=l.isMark(h,n.schema);if(h.length>0&&Et){var Dt=d.closest(h);if(!Dt.equal(h)){var wn,zn=c.findPlugin(h),kr=d.findPlugin(Dt);if(zn&&(kr==null||(wn=kr.disableMark)===null||wn===void 0?void 0:wn.includes(zn.name))){var vt=h.first();return l.unwrap(h),vt||void 0}}}if(Et){var bi=c.findPlugin(h),tr=v.concat();if(tr.pop(),bi){var Tt=tr.find(function(Wt){var Ut;return((Ut=Wt.plugin)===null||Ut===void 0?void 0:Ut.name)===bi.name&&Wt.node.length>0});if(Tt){Tt.node.children().length===1?l.unwrap(Tt.node):l.unwrap(h);return}}}if(nt=_,h.length>0&&nt&&l.isMark(nt,n.schema)&&Et){var Dn=c.findPlugin(nt),Rn=v[v.length-1].plugin;if(Dn&&Rn&&Rn.mergeLeval>Dn.mergeLeval){var pn=nt.clone(!1),sr=nt.children().toArray(),dr=pn.clone(),ha=pn.clone(),Zr=!0,ji=-1;if(sr.forEach(function(Wt,Ut){if(Wt.equal(h)){var In=h.children();pn.append(In),h.append(pn),Zr=!1,ji=Ut}else Zr?dr.append(Wt):ha.append(Wt)}),ji>0&&nt.before(dr),ji<sr.length-1&&nt.after(ha),ji>-1)return nt.before(h),nt.remove(),v.splice(v.length-2,1),h}}}}},void 0,void 0,function(h){if(l.isMark(h)){var g=c.findPlugin(h);h.is_mark=!0,v.push({plugin:g,node:h})}},function(h){h.is_mark&&v.pop()})}},{key:"normalize",value:function(){var t=this,n=this.engine.node,e=this.parser();this.elementNormalize(e);var r=this.engine.change.range.get(),i=r.commonAncestorNode,a=this.engine.inline.closest(i);if(i.inEditor()&&!a.isCard()&&n.isInline(a,this.schema))return this.removeElementNodes(V(e)),e;if(i.inEditor()&&i.isText()&&r.startContainer===r.endContainer){var o=i[0].nodeValue,l=o==null?void 0:o.substr(0,r.startOffset),c=o==null?void 0:o.substr(r.endOffset);if(/\[.*?\]\($/.test(l||"")&&/^\)/.test(c||""))return this.removeElementNodes(V(e)),e}V(e).traverse(function(g){if(g.fragment!==e){var w=g.first();if(g.length>0&&g[0].parentNode&&t.engine.trigger("paste:each",g),g.isText()){var x=g.text();if(/^(\r|\n)+$/.test(x)){var _,E=g.prev(),M=g.next();(E&&!n.isBlock(E)||M&&!n.isBlock(M)||E&&n.isBlock(E)&&M&&n.isBlock(M)||((_=g.parent())===null||_===void 0?void 0:_.name)==="p")&&g.remove()}var T=/((\n)+)/.exec(x);if(T&&T.index>0&&T.index<x.length-1){var S=g.get().splitText(T.index),D=S.splitText(T[0].length);g.after(S),S.after(D),g.text()||g.remove()}}else g.name==="pre"&&g.find(Mc).length>0&&n.unwrap(g);if(g.length===0)return w}}),this.engine.trigger("paste:each-after",V(e));var d=n.normalize(V(e));d.fragment&&(e=d.fragment),e.normalize();var v=V(e),h=v.find("ul,ol");return h.each(function(g,w){var x=h.eq(w);x&&n.isList(x)&&t.engine.list.addStart(x)}),this.engine.nodeId.generateAll(V(e),!0),e}},{key:"removeElementNodes",value:function(t){var n=this,e=t.allChildren();e.forEach(function(r){r.isElement()&&n.engine.node.unwrap(r)})}}]),b}(),un;(function(b){b.INLINE="inline",b.BLOCK="block"})(un||(un={}));var Os;(function(b){b.CARD_CHANGE="card_change",b.CLICK="click",b.MOUSE_DOWN="mouse_down"})(Os||(Os={}));var zs;(function(b){b.NONE="none",b.BACKGROUND="background",b.BORDER="border"})(zs||(zs={}));var dd=Mt("lastePasteRange"),cx=function(){function b(u){Fe(this,b),this.engine=void 0,Object.defineProperty(this,dd,{writable:!0,value:void 0}),this.engine=u}return Be(b,[{key:"repairInput",value:function(t,n){var e=n,r=e.commonAncestorNode,i=this.engine.card.find(r),a=this.engine,o=a.node,l=a.mark,c=a.change;if(i&&i.type===un.INLINE)if(i.isLeftCursor(r)){var d=r.closest(Zi),v=d.text().replace(/\u200B/g,"");v&&(v=Sr(v),n.setStartBefore(i.root),n.collapse(!0),o.html(d,"&#8203;"),o.insertText(v,n),c.apply(n))}else if(i.isRightCursor(r)){var h=r.closest(Yi),g=h.text().replace(/\u200B/g,"");g&&(g=Sr(g),n.setEndAfter(i.root),n.collapse(!1),o.html(h,"&#8203;"),o.insertText(g,n),c.apply(n))}else c.range.toTrusty(n);var w=n.cloneRange().shrinkToTextNode(),x=w.startNode,_=w.startOffset,E=x.parent();if(x.isText()&&E&&o.isMark(E)){var M=x.get(),T=x.text();if(_===T.length&&t.data&&t.inputType.indexOf("insert")===0){for(var S=E,D=[];S&&o.isMark(S);){var I,P,B=l.findPlugin(S);B&&!B.followStyle&&D.push(S),S=S.parent();var $=(I=S)===null||I===void 0?void 0:I.parent();if(((P=S)===null||P===void 0?void 0:P.next())&&$&&o.isMark($))break}var q=x.next();if(D.forEach(function(j,fe){if(E.equal(j)&&q){D.splice(fe,1);return}for(var ve=j.next(),ae=j;!ve&&ae;){var J=ae.parent();if(J&&o.isBlock(J))break;ve=(J==null?void 0:J.next())||null,ae=J}for(var pe=ve;pe&&!pe.isText();){if(o.isMark(pe)&&l.compare(pe,j)){D.splice(fe,1);break}pe=pe.first()}}),D.length>0){var G=M.splitText(T.length-t.data.length);G.remove(),o.isEmpty(E)&&E.remove(),l.unwrap(D.map(function(j){return j.clone()})),o.insertText(T.substr(T.length-t.data.length)),l.merge(),n=c.range.get().cloneRange().shrinkToTextNode(),x=n.startNode,_=n.startOffset,M=x.get(),T=x.text()}}else if(t.data&&_===t.data.length&&t.inputType.indexOf("insert")===0){for(var H=E,z=[];H&&o.isMark(H);){var O,Q,ie=l.findPlugin(H);ie&&!ie.followStyle&&z.push(H),H=H.parent();var L=(O=H)===null||O===void 0?void 0:O.parent();if(((Q=H)===null||Q===void 0?void 0:Q.prev())&&L&&o.isMark(L))break}var F=x.prev();z.forEach(function(j,fe){if(E.equal(j)&&F){z.splice(fe,1);return}for(var ve=j.prev(),ae=j;!ve&&ae;){var J=ae.parent();if(J&&o.isBlock(J))break;ve=(J==null?void 0:J.prev())||null,ae=J}for(var pe=ve;pe&&!pe.isText();){if(o.isMark(pe)&&l.compare(pe,j)){z.splice(fe,1);break}pe=pe.last()}}),z.length>0&&(M.splitText(t.data.length),M.remove(),o.isEmpty(E)&&E.remove(),l.unwrap(z.map(function(j){return j.clone()})),o.insertText(t.data===""?"\xA0":t.data),l.merge(),n=c.range.get().cloneRange().shrinkToTextNode(),x=n.startNode,_=n.startOffset,M=x.get(),T=x.text())}T.length>0&&/^\u200B$/g.test(T.substr(0,1))&&(M.splitText(1),M.remove())}var X=x.prev();if(x.isText()&&X&&o.isMark(X)){var se=x.get(),Y=x.text();Y.length>0&&/^\u200B$/g.test(Y.substr(0,1))&&(se.splitText(1),se.remove())}}},{key:"handleSelectionChange",value:function(){var t=this,n=this.engine,e=n.change,r=n.container,i=n.card;if(!e.isComposing()){var a=r.window,o=a==null?void 0:a.getSelection();if(o&&o.anchorNode){var l=ln.from(this.engine,o),c=l.containsCard()||l.commonAncestorNode.closest(Ar).length>0&&l.startNode.closest("".concat(Zi,",").concat(Yi,",").concat(Su)).length===0,d=l.collapsed;if(!d){var v=l.startNode,h=l.endNode,g=l.startOffset,w=l.endOffset,x=v.isElement()&&!v.isCard()?v.children().eq(g):v,_=h.isElement()&&!h.isCard()?h.children().eq(w-1):h;x&&_&&x.isCard()&&x.equal(_)&&(d=!0)}i.each(function(E){var M=E.getCenter();if(M&&M.length>0){var T=o.containsNode?o.containsNode(M[0]):!1;if(!T&&c&&o.focusNode){var S=t.engine.card.find(o.focusNode);S&&(d=!o.anchorNode||S.root.contains(o.anchorNode),d&&E.root.equal(S.root)&&(T=!0)),T&&d&&(c=!1)}var D=E.constructor.autoSelected;E.select(T&&(!d||D!==!1))}})}}}},{key:"init",value:function(){var t=this,n=this.engine,e=n.change,r=n.card,i=n.clipboard;e.event.onInput(function(d){var v=e.range.get();t.repairInput(d,v),e.range.select(v),e.onSelect(),e.change()});var a=void 0;e.event.onDocument("selectionchange",function(){a&&clearTimeout(a),a=setTimeout(function(){return t.handleSelectionChange()},50)}),e.event.onSelect(function(d){var v=e.range.get();v.startNode.closest(Cu).length!==0&&(v.collapsed&&v.containsCard()&&e.range.toTrusty(v),e.range.select(v),!jh("shift+left",d)&&!jh("shift+right",d)&&!jh("shift+up",d)&&!jh("shift+down",d)&&r.activate(v.commonAncestorNode),e.onSelect())}),e.event.onDocument("mousedown",function(d){if(!!d.target){var v=V(d.target);if(v.closest("body").length!==0&&!(v.closest(".am-view").length>0)){for(var h=v;h;){var g=h.attributes(lt);if(g&&[_u,Dd].indexOf(g)<0)return;h=h.parent()}r.activate(v,Os.MOUSE_DOWN,d)}}}),e.event.onDocument("copy",function(d){var v=e.range.get();!t.engine.container.contains(v.commonAncestorNode)||i.write(d)}),e.event.onDocument("cut",function(d){var v=e.range.get();if(!(!t.engine.container.contains(v.commonAncestorNode)||t.engine.readonly)){d.stopPropagation();var h=i.write(d,void 0);h&&(i.cut(),e.change())}});var o=function(v){var h=V(document.createTextNode(v)),g=t.engine.trigger("paste:markdown-check",h);return{node:h,result:g}},l=function(){var d=zr(Qt.mark(function v(h,g){var w,x,_,E,M,T,S;return Qt.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(w=o(g),x=w.node,_=w.result,_!==!1&&(E=new _o(h,t.engine),M=t.engine.schema.clone(),M.add([{name:"span",type:"mark"},{name:"div",type:"block"}]),T=E.toText(M,!1,!1),T||(E=new _o(g,t.engine),T=E.toText(M)),S=o(T),x=S.node,_=S.result),_===!1){I.next=4;break}return I.abrupt("return");case 4:t.engine.messageConfirm(t.engine.language.get("checkMarkdown","title")).then(function(){var P;e.cacheRangeBeforeCommand(),t.engine.trigger("paste:markdown-before",x),t.engine.trigger("paste:markdown",x),t.engine.trigger("paste:markdown-after",x),(P=x.get())===null||P===void 0||P.normalize(),t.paste(x.text(),oe(t,dd)[dd],void 0,!1)}).catch(function(P){P&&t.engine.messageError(P)});case 5:case"end":return I.stop()}},v)}));return function(h,g){return d.apply(this,arguments)}}();e.event.onPaste(function(d){var v=d.html,h=d.text,g=d.files,w=d.isPasteText,x="";if(g.length===0)if(w){var _="";h?_=h:v&&(_=new _o(v,t.engine).toText()),x=new jg(_).toHTML()}else if(v&&v.indexOf('<meta name="source" content="aomao" />')>-1)x=v;else if(h&&/^https?:\/\/\S+$/.test(h.toLowerCase().trim())){var E=Sr(h);x='<a href="'.concat(E,'" target="_blank">').concat(E,"</a>")}else v?x=v:h&&(x=new jg(h).toHTML());t.engine.trigger("paste:event",d,x)!==!1&&g.length===0&&(e.cacheRangeBeforeCommand(),t.paste(x),setTimeout(function(){l(x,h||"")},200))});var c=function(v){return!v||r.closest(v.commonAncestorContainer)};e.event.onDrop(function(d){var v=d.event,h=d.range,g=d.card,w=d.files;if(g){if(v.preventDefault(),c(h))return;var x=g.constructor,_=x.cardName,E=g.getValue();t.engine.card.remove(g.root),e.range.select(h),t.engine.card.insert(_,E)}if(w.length>0){if(v.preventDefault(),c(h))return;e.range.select(h),t.engine.trigger("drop:files",w)}})}},{key:"paste",value:function(t,n,e){var r=this,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4?arguments[4]:void 0,o=this.engine.change,l=new dx(t,this.engine).normalize();this.engine.trigger("paste:before",l),a?a(l,n,void 0,i):o.insert(l,n,function(c){r.engine.trigger("paste:insert",c);var d=c.cloneRange(),v=d.endNode,h="";v.isCard()&&v.children().length===0&&(d.setEndAfter(v),h=v.attributes(fn)),oe(r,dd)[dd]=d,c.collapse(!1);var g=c.startNode.closest("".concat(Ar,",").concat(Mc));if(g.length>0){var w=g.attributes();(w[mi]||w[_n])&&c.setStartAfter(g)}var x=c.createSelection();r.engine.card.render(void 0,function(_){if(x.move(),h){var E=r.engine.container.find('[data-id="'.concat(h,'"]'));E.length>0&&(d.setEndAfter(E),oe(r,dd)[dd]=d)}c.scrollRangeIntoView(),o.range.select(c),e&&e(_),r.engine.trigger("paste:after")})},i)}}]),b}(),cd=Mt("lastBlurRange"),pf=Mt("otpions"),fx=function(){function b(u){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Fe(this,b),this.engine=void 0,Object.defineProperty(this,cd,{writable:!0,value:void 0}),Object.defineProperty(this,pf,{writable:!0,value:void 0}),this.engine=u,oe(this,pf)[pf]=n,this.engine.on("foucs",function(){oe(t,cd)[cd]=void 0}),this.engine.on("blur",function(){var e=t.get();e.commonAncestorNode.inEditor()&&(oe(t,cd)[cd]=e)})}return Be(b,[{key:"toTrusty",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.get(),n=t.commonAncestorNode;!n.isEditable()&&!n.inEditor()&&t.select(this.engine.container,!0).shrinkToElementNode().collapse(!1);var e=t.cloneRange();if(e.collapse(!0),this.setCardRang(e),(!t.startNode.equal(e.startNode)||t.startOffset!==e.startOffset)&&t.setStart(e.startContainer,e.startOffset),e=t.cloneRange(),e.collapse(!1),this.setCardRang(e),(!t.endNode.equal(e.endNode)||t.endOffset!==e.endOffset)&&t.setEnd(e.endContainer,e.endOffset),t.collapsed){e=t.cloneRange(),e.enlargeFromTextNode();var r=V(e.startContainer),i=e.startOffset;this.engine.node.isInline(r)&&i===0&&t.setStartBefore(r[0]),this.engine.node.isInline(r)&&i===r[0].childNodes.length&&t.setStartAfter(r[0]),t.collapse(!0)}return t}},{key:"setCardRang",value:function(t){var n=this,e=t.startNode,r=t.startOffset,i=this.engine.card,a=i.find(e);if(a){var o=a.getCenter().get();if(o&&(!e.isElement()||e[0].parentNode!==a.root[0]||e.attributes(jn))){var l=function(){var d=ln.create(n.engine);return d.select(o,!0),d.comparePoint(e,r)<0};if(a.type==="inline"){t.select(a.root),t.collapse(l());return}l()?i.focusPrevBlock(a,t,!0):i.focusNextBlock(a,t,!0)}}}},{key:"get",value:function(){var t=this.engine.container,n=t.window,e=ln.from(this.engine,n,!1);return e||(e=ln.create(this.engine,n.document).select(t,!0).shrinkToElementNode().collapse(!1)),e}},{key:"select",value:function(t){var n,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this.engine,i=r.container,a=r.inline,o=r.node,l=r.change,c=i.window,d=c==null?void 0:c.getSelection();if(!l.isComposing()){if(t.collapsed){var v,h,g=t.startNode,w=t.startOffset;(g.isElement()&&w===1&&g.children().length===1||w===2&&g.children().length===2&&((v=g.first())===null||v===void 0?void 0:v.isCard()))&&((h=g.last())===null||h===void 0?void 0:h.name)==="br"&&(t.setStart(g,w-1),t.collapse(!0))}var x=t.cloneRange().shrinkToTextNode(),_=x.startNode,E=x.endNode,M=x.startOffset,T=x.endOffset,S=_.prev(),D=E.next();if(S&&!S.isCard()&&!o.isVoid(S)&&o.isInline(S)){var I=_.text();/^\u200B/g.test(I)&&M===0&&(t.setStart(E,M+1),t.collapsed&&t.collapse(!0))}if(D&&!D.isCard()&&!o.isVoid(D)&&o.isInline(D)){var P=E.text();/\u200B$/g.test(P)&&T===P.length&&(t.setEnd(E,T-1),t.collapsed&&t.collapse(!1))}var B=a.closest(_);if(!B.isCard()&&o.isInline(B)&&!o.isVoid(B)){var $,q;_.isText()&&!_.prev()&&(($=_.parent())===null||$===void 0?void 0:$.equal(B))&&M===0&&(t.setStart(_,M+1),t.collapsed&&t.collapse(!0)),E.isText()&&!E.next()&&((q=E.parent())===null||q===void 0?void 0:q.equal(B))&&T===E.text().length&&(t.setEnd(E,T-1),t.collapsed&&t.collapse(!1))}_=t.startNode,E=t.endNode;var G=_.children();o.isCustomize(_)&&M===0&&t.setStart(_,1),o.isCustomize(E)&&T===0&&t.setEnd(E,1);var H=this.engine.ot.isStopped();if(_.name==="p"&&!H){if(G.length===0)_.append("<br />");else if(G.length>1&&G[G.length-2].nodeName!=="BR"&&G[G.length-1].nodeName==="BR"){var z;(z=_.last())===null||z===void 0||z.remove()}}!t.collapsed&&!H&&E.name==="p"&&E.children().length===0&&E.append("<br />");var O=_.children();if(o.isList(_)&&!H&&(O.length===0||O[0].nodeName==="BR")){var Q=V("<p><br /></p>");this.engine.nodeId.create(Q),_.before(Q),_.remove(),_=Q}if(_.name==="li"&&!H){if(G.length===0)_.append("<br />");else if(!o.isCustomize(_)&&G.length>1&&G[G.length-2].nodeName!=="BR"&&G[G.length-1].nodeName==="BR"){var ie;(ie=_.last())===null||ie===void 0||ie.remove()}else if(o.isCustomize(_)&&G.length===1)_.append("<br />");else if(o.isCustomize(_)&&G.length>2&&G[G.length-2].nodeName!=="BR"&&G[G.length-1].nodeName==="BR"){var L;(L=_.last())===null||L===void 0||L.remove()}}if(!t.collapsed&&E.name==="li"&&!H){var F=E.children();if(F.length===0)E.append("<br />");else if(!o.isCustomize(E)&&F.length>1&&F[F.length-2].nodeName!=="BR"&&F[F.length-1].nodeName==="BR"){var X;(X=_.last())===null||X===void 0||X.remove()}else if(o.isCustomize(E)&&F.length===1)E.append("<br />");else if(o.isCustomize(E)&&F.length>2&&F[F.length-2].nodeName!=="BR"&&F[F.length-1].nodeName==="BR"){var se;(se=_.last())===null||se===void 0||se.remove()}}_.isEditable()&&!H&&_.children().length===0&&!this.engine.ot.isStopped&&_.html("<p><br /></p>"),d&&(t.collapsed||d.rangeCount>0&&!t.equal(d.getRangeAt(0)))&&((n=t.startNode.get())===null||n===void 0?void 0:n.isConnected)&&(d.removeAllRanges(),d.addRange(t.toRange()));var Y=oe(this,pf)[pf].onSelect;Y&&e&&Y(t)}}},{key:"focus",value:function(t){var n,e=oe(this,cd)[cd]||this.get();t!==void 0&&e.select(this.engine.container,!0).shrinkToElementNode().collapse(t),this.select(e),(n=this.engine.container.get())===null||n===void 0||n.focus()}},{key:"blur",value:function(){var t;(t=this.engine.container.get())===null||t===void 0||t.blur()}}]),b}(),Ho=Mt("nativeEvent"),hx=function(){function b(u){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Fe(this,b),this.engine=void 0,this.options=void 0,this.changeTimer=null,this.event=void 0,this.valueCached=null,this.onChange=void 0,this.onRealtimeChange=void 0,this.onSelect=void 0,this.onSetValue=void 0,this.rangePathBeforeCommand=void 0,this.marks=[],this.blocks=[],this.inlines=[],this.changeTrigger=[],this.range=void 0,Object.defineProperty(this,Ho,{writable:!0,value:void 0}),this.options=n,this.engine=u,this.event=new sx(u,{}),this.onChange=this.options.onChange||function(){},this.onRealtimeChange=this.options.onRealtimeChange||function(){},this.onSelect=function(r){e&&clearTimeout(e),e=setTimeout(function(){var i=u.mark,a=u.block,o=u.inline;r=r||t.range.get(),t.marks=i.findMarks(r),t.blocks=a.findBlocks(r),t.inlines=o.findInlines(r),t.options.onSelect&&t.options.onSelect()},50)},this.onSetValue=this.options.onSetValue||function(){};var e=null;this.range=new fx(u,{onSelect:function(i){t.onSelect(i)}}),oe(this,Ho)[Ho]=new cx(u)}return Be(b,[{key:"init",value:function(){oe(this,Ho)[Ho].init()}},{key:"_change",value:function(){if(!this.isComposing()){this.engine.card.gc();var t=this.changeTrigger.length===2?"both":this.changeTrigger[0]==="remote"?"remote":"local";this.onChange(t),this.changeTrigger=[]}}},{key:"change",value:function(t,n){var e=this,r=t?"remote":"local",i=void 0;if(t)n==null||n.forEach(function(h){if(i=h.closest(Nn),i&&i.length>0){var g=e.engine.card.find(i,!0);g!=null&&g.onChange&&(g==null||g.onChange(r,i))}});else{var a=this.range.get(),o=a.startNode;if(o.inEditor())i=o.closest(Nn);else{var l=o.closest(Su),c=l.attributes(Dc);if(c){var d;i=(d=this.engine.card.find(c))===null||d===void 0?void 0:d.root.closest(Nn)}}if(i&&i.length>0){var v=this.engine.card.find(i,!0);v!=null&&v.onChange&&(v==null||v.onChange(r,i))}else n==null||n.forEach(function(h){if(i=h.closest(Nn),i&&i.length>0){var g=e.engine.card.find(i,!0);g!=null&&g.onChange&&(g==null||g.onChange(r,i))}})}this.onRealtimeChange(r),this.changeTrigger.indexOf(r)<0&&this.changeTrigger.push(r),this.clearChangeTimer(),this.changeTimer=setTimeout(function(){e._change()},50)}},{key:"clearChangeTimer",value:function(){this.changeTimer&&clearTimeout(this.changeTimer)}},{key:"isComposing",value:function(){return this.event.isComposing}},{key:"isSelecting",value:function(){return this.event.isSelecting}},{key:"initValue",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,e=this.engine.container.html(),r="<p><br /></p>";if(!(e===r||this.engine.container.children().length>0)){var i=e||r,a=V(i);a.children().length===0&&a.html("<br />"),this.engine.container.empty().append(a);var o=t||this.range.get();!t&&n&&(o.select(a,!0).collapse(!1),this.apply(o))}}},{key:"setValue",value:function(t,n,e){var r=this.range.get(),i=this.engine,a=i.schema,o=i.conversion,l=i.container,c=i.history,d=i.mark,v=i.card;if(t==="")this.engine.container.html(t),this.initValue(void 0,!1),e&&e(0);else{var h=new _o(t,this.engine,function(E){d.removeEmptyMarks(E),E.allChildren("editable").forEach(function(M){n&&n(M)})},!1);l.html(h.toValue(a,o,!1,!0)),v.render(void 0,function(E){e&&e(E)});var g=l.find(rv),w=new iv(this.engine,r);g.length>0&&(w.anchor=g,w.focus=g);var x=l.find(Np),_=l.find(Dp);x.length>0&&_.length>0&&(w.anchor=x,w.focus=_),w.anchor&&w.focus&&(w.move(),this.range.select(r),this.onSelect()),this.onSetValue(),c.clear()}this.change()}},{key:"setHtml",value:function(t,n){var e=this,r=this.engine,i=r.card,a=r.container;oe(this,Ho)[Ho].paste(t,void 0,n,!0,function(o,l,c,d){a.empty().append(o),i.render(void 0,function(v){e.initValue(void 0,!1),e.engine.trigger("paste:after"),n&&n(v)}),e.change()})}},{key:"setMarkdown",value:function(t,n){var e,r=this,i=V(document.createTextNode(t));this.engine.trigger("paste:markdown-before",i),this.engine.trigger("paste:markdown",i),this.engine.trigger("paste:markdown-after",i);var a=this.engine,o=a.card,l=a.container;(e=i.get())===null||e===void 0||e.normalize(),oe(this,Ho)[Ho].paste(i.text(),void 0,n,!0,function(c,d,v,h){l.empty().append(c),o.render(void 0,function(g){r.initValue(void 0,!1),r.engine.trigger("paste:after"),n&&n(g)}),r.change()})}},{key:"getOriginValue",value:function(){var t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.engine.container,e=this.engine,r=e.schema,i=e.conversion;return new _o(((t=n.get())===null||t===void 0?void 0:t.outerHTML)||"",this.engine,void 0,!1).toValue(r,i)}},{key:"getValue",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n;if(t.ignoreCursor||this.isComposing())n=this.getOriginValue();else{var e,r=this.range.get(),i,a=this.engine.container.clone(!0);if(!r.inCard()){var o=r.toPath(!0);if(!o)return this.getOriginValue();r=ln.fromPath(this.engine,o,!0,a),i=r.createSelection()}n=this.getOriginValue(a),(e=i)===null||e===void 0||e.move()}return n}},{key:"cacheRangeBeforeCommand",value:function(){this.rangePathBeforeCommand=this.range.get().toPath()}},{key:"getRangePathBeforeCommand",value:function(){var t=this.rangePathBeforeCommand;return this.rangePathBeforeCommand=void 0,t}},{key:"isEmpty",value:function(){var t=this.engine,n=t.container,e=t.node,r=t.schema,i=r.getAllowInTags(),a=n.children();return a.length===0||a.length===1&&e.isEmpty(n)&&!n.allChildren().some(function(o){return i.includes(o.name)})}},{key:"combinText",value:function(){Kk(this.engine.container)}},{key:"apply",value:function(t){this.combinText();var n=this.engine,e=n.inline,r=n.mark,i=n.nodeId;if(t){var a=t.createSelection("change-apply");e.findInlines(t).forEach(function(o){return e.repairCursor(o)}),r.findMarks(t).forEach(function(o){return r.repairCursor(o)}),a.move(),t.shrinkToTextNode(),this.range.select(t)}this.change(),i.generateAll(this.engine.container)}},{key:"insert",value:function(t,n){var e=this,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=this.engine,o=a.block,l=a.list,c=a.card,d=a.schema,v=a.mark,h=a.inline,g=this.engine.node;n=n||this.range.toTrusty();var w=o.closest(n.startNode),x=o.closest(n.endNode),_=x[0]===w[0],E=o.isLastOffset(n,"end"),M=d.getCanMergeTags(),T=d.getAllowInTags(),S=w.closest(M.join(",")),D=n.collapsed,I=t.childNodes,P=V(t.firstChild||[]),B=function(){var Ke,Ge=V(t),_e=Ge.first(),Ue=n.cloneRange().shrinkToElementNode().shrinkToTextNode(),Ae=Ue.startNode;Ae.inEditor()&&_e&&_e.name==="p"&&!(_e.length===1&&((Ke=_e.first())===null||Ke===void 0?void 0:Ke.name)==="br")&&!g.isEmptyWidthChild(o.closest(Ae))&&g.unwrap(_e)};if(!D)this.delete(n,_||!E,i),B();else if(B(),n.startNode.isText()){var $=h.closest(n.startNode),q=n.startNode.text();$.length===0&&!$.equal(n.startNode)&&/^\u200B/.test(q)&&n.startNode.text(q.substr(1))}var G=void 0,H=function(Ke){G&&G.node[0].isConnected&&(Ke.shrinkToElementNode().setStart(G.node,G.offset),Ke.enlargeToElementNode()),o.merge(Ke),l.merge(void 0,Ke),v.merge(Ke),h.flat(Ke),r&&r(Ke),e.apply(Ke)};if(g.isList(n.startNode)||n.startNode.closest("li").length>0){l.insert(t,n),H(n);return}if(!P[0]){H(n);return}if(!g.isBlock(P)){if(n.shrinkToElementNode(),I.length>0){var z=n.startNode.children();G={node:n.startNode,offset:z.length===1&&z[0].nodeName==="BR"?0:n.startOffset}}var O=P.next(),Q=P,ie=g.insert(P,n);for(ie&&(n=ie);O&&!g.isBlock(O);){n.startContainer.nodeType===Node.TEXT_NODE&&n.enlargeToElementNode().collapse(!1);var L=O.next();Q.after(O),Q=O,O=L}if(Q!==P&&n.select(Q,!0).collapse(!1),I.length===0){H(n);return}}var F=n.cloneRange().enlargeToElementNode(!0).collapse(!1),X=F.startContainer.childNodes[n.startOffset===0?0:n.startOffset-1],se=F.startContainer.childNodes[n.startOffset];if(I.length!==0){var Y=V(I[I.length-1]);if(Y.name==="br"&&(Y.remove(),Y=V(I[I.length-1])),!G){var j=n.startNode.children();G={node:n.startNode,offset:j.length===1&&j[0].nodeName==="BR"?0:n.startOffset}}for(var fe=V(I[0]),ve=null,ae=[];fe&&fe.length>0;){g.removeSide(fe);var J=fe.next();if(J||(Y=fe),ae.push(fe),ve?ve.after(fe):g.insert(fe,n,!0),this.engine.node.isBlock(fe)?ve=fe:ve=null,J||n.select(fe,!0).collapse(!1),G&&!G.node[0].isConnected){var pe=fe.parent();pe&&(G={node:pe,offset:fe.index()})}fe=J}S[0]&&ae.forEach(function(et){M.indexOf(et.name)<0&&et.closest(S.name).length===0&&g.wrap(et,g.clone(S,!1,!1))});var Ee=c.find(n.startNode);Ee&&Ee.focus(n,!1)}var Le=function(Ke){var Ge=Ke.first();if(!Ge||!g.isBlock(Ge))return Ke;for(;T.indexOf(Ge?Ge.name:"")>-1;)Ge=Ge.first();return Ge},Re=function(Ke){var Ge=Ke.last();if(!Ge||!g.isBlock(Ge))return Ke;for(;T.indexOf(Ge?Ge.name:"")>-1;)Ge=Ge.last();return Ge},Ce=function(Ke,Ge){if(!(Ke.isCard()||P.isCard())){var _e=Ge.parent(),Ue=Ke.parent(),Ae=_e&&!_e.isEditable()&&Ue&&!Ue.isEditable()&&_e.name===Ue.name;return Ge.name==="p"&&Ae||Ke.name===Ge.name&&Ae&&!(Ke.name==="li"&&!l.isSame(Ke.parent(),Ge.parent()))}},ne=function(Ke){for(;!Ke.isEditable();){var Ge=Ke.parent();if(Ke.remove(),!Ge||!g.isEmpty(Ge))break;Ke=Ge}},me=function(Ke,Ge){if(Ke.name===Ge.name&&Ke.name==="p"){var _e=Ge.attributes();_e[fn]&&delete _e[fn],Ke.attributes(_e)}g.isEmptyWidthChild(Ke)&&!g.isEmptyWidthChild(Ge)&&(Ke.get().innerHTML=""),g.isCustomize(Ke)===g.isCustomize(Ge)&&l.unwrapCustomize(Ge)};if(X){var ue=Le(V(X.nextSibling||[])),Te=Re(V(X));Te.name==="p"&&ue.name!==Te.name&&Ce(Te,ue)&&(me(Te,ue),g.merge(Te,ue,!1),ne(ue))}if(se){var ze=Re(V(se.previousSibling||[])),We=Le(V(se));ze&&Ce(ze,We)&&(g.merge(ze,We,!1),ne(We))}H(n)}},{key:"paste",value:function(t,n,e){oe(this,Ho)[Ho].paste(t,n,e,!0)}},{key:"delete",value:function(t,n){var e,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=t||this.range.toTrusty();if(i.collapsed){this.isEmpty()&&this.initValue(i),t||this.apply(i);return}var a=this.engine,o=a.mark,l=a.inline,c=a.card,d=this.engine.node,v=this.engine.block,h=i.cloneRange();h.collapse(!0);var g=r?o.findMarks(h):[];i.enlargeToElementNode();var w=v.closest(i.cloneRange().shrinkToElementNode().shrinkToTextNode().enlargeToElementNode().startNode);if(!w.inEditor()&&!w.isRoot()){this.isEmpty()&&this.initValue(i),t||this.apply(i);return}if(w.isRoot()){for(var x=w.children().eq(i.startOffset);!((_=x)===null||_===void 0)&&_.isCard();){var _,E=x.equal(i.endNode)||x.contains(i.endNode),M=x.next()||void 0,T=c.find(x);if(T?c.removeNode(T):x.remove(),E){x=void 0;return}x=M}if(!x){this.isEmpty()&&this.initValue(i),t||this.apply(i);return}w=x}var S=i.endNode,D=i.endOffset,I=!v.closest(i.startNode).equal(v.closest(S)),P=l.closest(S);if(P.length>0&&((e=S.parent())===null||e===void 0?void 0:e.equal(P))&&S.isText()){var B=S.text();D===B.length-1&&i.setEndAfter(P)}i.extractContents(),i.startNode.isEditable()&&i.startNode.children().length===0&&i.startNode.html("<p><br /></p>"),i.collapse(!0);var $=i.shrinkToElementNode().shrinkToTextNode().enlargeToElementNode(),q=$.startNode;if(q.isText()||!w.inEditor()){this.isEmpty()&&this.initValue(i),t||this.apply(i);return}var G=!1;if(I&&q.children().length===0){var H=i.createSelection();q.remove(),H.move(),G=!0,q=i.startNode}var z=w,O=q,Q=q.children().length===0;if(!Q&&q.length>0&&q.inEditor()){var ie,L;q[0].childNodes.length===1&&((ie=q[0].firstChild)===null||ie===void 0?void 0:ie.nodeType)===Node.ELEMENT_NODE&&d.isCustomize(q)&&((L=q.first())===null||L===void 0?void 0:L.isCard())&&(Q=!0)}if(Q&&d.isBlock(q)&&q.inEditor()){var F=d.getBatchAppendHTML(g,"<br />");q.isEditable()&&(F="<p>".concat(F,"</p>")),q.append(V(F));var X=q.find("br"),se=X.parent();se&&d.isMark(se)&&d.replace(X,V("\u200B",null)),i.select(q,!0).shrinkToElementNode().shrinkToTextNode(),i.collapse(!1),this.isEmpty()&&this.initValue(i),t||this.apply(i);return}var Y=function fe(ve,ae,J,pe){var Ee=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(d.isBlock(ae)&&!d.isVoid(ae)&&!ae.isCard()){ve.select(ae,!0),ve.collapse(!1);var Le=ve.shrinkToElementNode().shrinkToTextNode().createSelection(),Re=J.parent();for(d.merge(ae,J);Re&&d.isBlock(Re)&&d.isEmpty(Re);)Re.remove(),Re=Re.parent();Le.move(),ve.enlargeToElementNode(!0);var Ce=ve.getPrevNode(),ne=ve.getNextNode(),me=ve.startNode;!Ce&&!ne&&d.isBlock(me)&&(me.append(V(d.getBatchAppendHTML(pe,"<br />"))),ve.select(me.find("br"),!0),ve.collapse(!1)),Ce&&ne&&!Ce.isCard()&&!ne.isCard()&&Ee&&fe(ve,Ce,ne,pe)}};if(z&&O&&d.isBlock(z)&&d.isBlock(O)&&!z.equal(O)&&O.inEditor()&&Y(i,z,O,g,n),q.children().each(function(fe){var ve=V(fe);!d.isVoid(ve)&&ve.isElement()&&d.html(ve)===""&&ve.remove(),d.isInline(ve)&&l.repairCursor(ve)}),d.isList(q)&&d.isEmpty(q)&&q.remove(),h=i.cloneRange().shrinkToTextNode(),h.startNode.isText()&&/^\u200B/g.test(h.startNode.text())&&h.startOffset===0){var j=h.startNode.prev();j&&this.engine.node.isInline(j)&&(i.select(j,!0),i.collapse(!1))}d.isBlock(q)&&q.children().length===0&&q.html("<br />"),G&&(d.isBlock(z)&&z.children().length===0&&z.html("<br />"),z.inEditor()&&i.select(z,!0).collapse(!1)),this.isEmpty()&&this.initValue(i),t||this.apply(i)}},{key:"unwrap",value:function(t){var n=this.engine.block,e=this.range.get();if(t=t||n.closest(e.startNode),!!t.inEditor()){var r=e.createSelection();this.engine.node.unwrap(t),r.move(),this.range.select(e)}}},{key:"mergeAfterDelete",value:function(t){var n,e=this.engine,r=e.block,i=e.card,a=e.list,o=e.mark,l=this.engine.node,c=this.range.get();t=t||r.closest(c.startNode);var d=t.children();if(d.length===0){t.append(V("<br />")),this.apply(c);return}var v=t.first();if(d.length>1&&(v==null?void 0:v.name)==="br"){v==null||v.remove();return}var h=t.prev();if(!h){var g=t.parent();(g==null?void 0:g.inEditor())&&!(g!=null&&g.isEditable())&&this.unwrap(t);return}if(h.isCard()){(d.length===1&&(v==null?void 0:v.name)==="br"||l.isEmpty(t))&&t.remove();var w=i.find(h);if(w){i.focus(w);return}}if(l.isVoid(h)){h.remove();return}if(l.isRootBlock(h)&&l.isEmpty(h)){h.remove();return}if(h.isText()){var x=V("<p />");h.before(x),x.append(h),h=x}if(l.isList(h)&&(h=h.last()),d.length===1&&(v==null?void 0:v.name)==="br")v==null||v.remove();else if(h&&h.children().length===1&&((n=h.first())===null||n===void 0?void 0:n.name)==="br"){var _;(_=h.first())===null||_===void 0||_.remove()}if(!h||h.isText())this.unwrap(t);else{var E=c.createSelection();l.merge(h,t),E.move(),this.range.select(c),o.merge(),a.merge()}}},{key:"destroy",value:function(){this.event.destroy(),this.clearChangeTimer()}}]),b}(),vx=function(b){ft(t,b);var u=ht(t);function t(n){var e;return Fe(this,t),e=u.call(this),e.engine=void 0,e.currentRangePath=void 0,e.data=[],e.engine=n,e}return Be(t,[{key:"updateSelections",value:function(e,r){var i=this.engine,a=i.change,o=i.card,l=a.range.get().cloneRange(),c=o.active;if(c&&!c.isEditable){var d=c.getCenter();if(eo(c.root)){var v=c.root.prev();v?l.select(v,!0).collapse(!1):(l.setStartBefore(c.root),l.collapse(!0))}else d&&d.length>0&&l.select(d.get(),!0)}else(c==null?void 0:c.isEditable)&&c.updateBackgroundSelection&&c.updateBackgroundSelection(l);if(!c&&!l.collapsed){var h=this.engine.card.find(l.startNode,!0);h&&h.type===un.BLOCK&&l.setStart(h.getCenter().parent(),1);var g=this.engine.card.find(l.endNode,!0);g&&g.type===un.BLOCK&&l.setEnd(g.getCenter().parent(),1)}var w=l.toPath(!0);this.currentRangePath=l.toPath();var x=JSON.stringify(w),_=this.data,E=!1,M=!1;_=_.map(function(S){return S?S.uuid===e.uuid?(E=!0,x!==JSON.stringify(S.path)&&(M=!0,S.path=w,S.active=!0),S):r.find(function(D){return D.uuid===S.uuid})?(S.active=!1,S):(M=!0,null):(M=!0,null)});var T=[];return _.forEach(function(S){S&&T.push(S)}),E||(M=!0,T.push({path:w,uuid:e.uuid,active:!0})),M&&(this.data=T,this.emit("change",T)),{data:T,range:l}}}]),t}(rs.exports.EventEmitter2),px=`.data-tooltip {\r
	font-size: 14px;\r
	font-variant: tabular-nums;\r
	line-height: 1.5;\r
	color: rgba(0, 0, 0, 0.65);\r
	-webkit-box-sizing: border-box;\r
	box-sizing: border-box;\r
	margin: 0;\r
	padding: 0;\r
	list-style: none;\r
	position: absolute;\r
	z-index: 1060;\r
	display: block;\r
	visibility: visible;\r
	max-width: 320px;\r
	word-wrap:break-word;\r
    top: 0;\r
}\r
\r
.data-tooltip-hidden {\r
	opacity: 0;\r
	visibility: hidden;\r
	transition: opacity 0.3s ease-in-out;\r
}\r
\r
.data-tooltip-active {\r
	opacity: 1;\r
	visibility: visible;\r
}\r
\r
.data-tooltip-placement-top,.data-tooltip-placement-topLeft,.data-tooltip-placement-topRight {\r
	padding-bottom: 8px;\r
}\r
\r
.data-tooltip-placement-right,.data-tooltip-placement-rightTop,.data-tooltip-placement-rightBottom {\r
	padding-left: 8px;\r
}\r
\r
.data-tooltip-placement-bottom,.data-tooltip-placement-bottomLeft,.data-tooltip-placement-bottomRight {\r
	padding-top: 8px;\r
}\r
\r
.data-tooltip-placement-left,.data-tooltip-placement-leftTop,.data-tooltip-placement-leftBottom {\r
	padding-right: 8px;\r
}\r
\r
.data-tooltip-inner {\r
	padding: 6px 8px;\r
	color: #fff;\r
	text-align: left;\r
	text-decoration: none;\r
	background-color: rgba(0, 0, 0, 0.75);\r
	border-radius: 4px;\r
	-webkit-box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\r
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\r
	word-wrap: break-word;\r
}\r
\r
.data-tooltip-arrow {\r
	position: absolute;\r
	width: 0;\r
	height: 0;\r
	border-color: transparent;\r
	border-style: solid;\r
}\r
\r
.data-tooltip-placement-top .data-tooltip-arrow,.data-tooltip-placement-topLeft .data-tooltip-arrow,.data-tooltip-placement-topRight .data-tooltip-arrow {\r
	bottom: 3px;\r
	border-width: 5px 5px 0;\r
	border-top-color: rgba(0, 0, 0, 0.75);\r
}\r
\r
.data-tooltip-placement-top .data-tooltip-arrow {\r
	left: 50%;\r
	margin-left: -5px;\r
}\r
\r
.data-tooltip-placement-topLeft .data-tooltip-arrow {\r
	left: 16px;\r
}\r
\r
.data-tooltip-placement-topRight .data-tooltip-arrow {\r
	right: 16px;\r
}\r
\r
.data-tooltip-placement-right .data-tooltip-arrow,.data-tooltip-placement-rightTop .data-tooltip-arrow,.data-tooltip-placement-rightBottom .data-tooltip-arrow {\r
	left: 3px;\r
	border-width: 5px 5px 5px 0;\r
	border-right-color: rgba(0, 0, 0, 0.75);\r
}\r
\r
.data-tooltip-placement-right .data-tooltip-arrow {\r
	top: 50%;\r
	margin-top: -5px;\r
}\r
\r
.data-tooltip-placement-rightTop .data-tooltip-arrow {\r
	top: 8px;\r
}\r
\r
.data-tooltip-placement-rightBottom .data-tooltip-arrow {\r
	bottom: 8px;\r
}\r
\r
.data-tooltip-placement-left .data-tooltip-arrow,.data-tooltip-placement-leftTop .data-tooltip-arrow,.data-tooltip-placement-leftBottom .data-tooltip-arrow {\r
	right: 3px;\r
	border-width: 5px 0 5px 5px;\r
	border-left-color: rgba(0, 0, 0, 0.75);\r
}\r
\r
.data-tooltip-placement-left .data-tooltip-arrow {\r
	top: 50%;\r
	margin-top: -5px;\r
}\r
\r
.data-tooltip-placement-leftTop .data-tooltip-arrow {\r
	top: 8px;\r
}\r
\r
.data-tooltip-placement-leftBottom .data-tooltip-arrow {\r
	bottom: 8px;\r
}\r
\r
.data-tooltip-placement-bottom .data-tooltip-arrow,.data-tooltip-placement-bottomLeft .data-tooltip-arrow,.data-tooltip-placement-bottomRight .data-tooltip-arrow {\r
	top: 3px;\r
	border-width: 0 5px 5px;\r
	border-bottom-color: rgba(0, 0, 0, 0.75);\r
}\r
\r
.data-tooltip-placement-bottom .data-tooltip-arrow {\r
	left: 50%;\r
	margin-left: -5px;\r
}\r
\r
.data-tooltip-placement-bottomLeft .data-tooltip-arrow {\r
	left: 16px;\r
}\r
\r
.data-tooltip-placement-bottomRight .data-tooltip-arrow {\r
	right: 16px;\r
}`;Mo(px);var gx=function(u){return`
    <div `.concat(lt,'="tooltip" class="data-tooltip data-tooltip-placement-').concat(u.placement,` data-tooltip-hidden" style="transform-origin: 50% 45px 0px;">
        <div class="data-tooltip-content">
            <div class="data-tooltip-arrow"></div>
            <div class="data-tooltip-inner" data-role="tooltip"></div>
        </div>
    </div>`)},An=function(){function b(){Fe(this,b)}return Be(b,null,[{key:"show",value:function(t,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{placement:"top"};b.hide();var r=V(gx(e));typeof n=="string"?r.find("[data-role=tooltip]").html(n):r.find("[data-role=tooltip]").append(n);var i=V(document.body);i.append(r);var a=r.get(),o=(a==null?void 0:a.clientWidth)||0,l=(a==null?void 0:a.clientHeight)||0,c=t.get(),d=c.clientWidth,v=c.getBoundingClientRect(),h=Math.round(window.pageXOffset+v.left+d/2-o/2),g=Math.round(window.pageYOffset+v.top-l-2);e.placement==="bottom"&&(g+=v.height+l+2),r.css({left:h+"px",top:g+"px"}),r.addClass("data-tooltip-active")}},{key:"hide",value:function(){V("div[".concat(lt,"=tooltip]")).remove()}}]),b}(),mx=function(u){return`
    <span class="data-toolbar-item">
        <a class="data-toolbar-btn"`.concat(u.disabled?' disabled="disabled"':""," ").concat(u.link?' href="'+u.link+'" target="_blank"':"",`>
            `).concat(u.content,`
        </a>
    </span>`)},bx=function(){function b(u){Fe(this,b),this.options=void 0,this.root=void 0,this.options=u,this.root=V(mx(u)),u.style&&this.root.attributes("style",u.style),u.class&&this.root.addClass(u.class)}return Be(b,[{key:"getPlacement",value:function(){var t=this.root.closest(".data-toolbar").attributes("data-placement")||"top";return t.startsWith("top")?"top":"bottom"}},{key:"render",value:function(t){var n=this,e=this.options,r=e.title,i=e.didMount,a=e.onClick;t.append(this.root),r&&(this.root.on("mouseenter",function(){var o=n.getPlacement();An.show(n.root,typeof r=="function"?r():r,{placement:o})}),this.root.on("mouseleave",function(){An.hide()}),this.root.on("mousedown",function(){An.hide()})),this.root.find("a").on("click",function(o){o.preventDefault(),o.stopPropagation(),a&&a(o,n.root)}),i&&i(this.root)}}]),b}(),yx=function(u){var t=!!u.checked;return u.getState&&(t=u.getState()),`
    <div class="data-toolbar-item data-toolbar-dropdown-item data-toolbar-dropdown-switch">
        <span class="data-toolbar-dropdown-item-content"`.concat(u.disabled?' disabled="disabled"':"",">").concat(u.content,`</span>
        <button type="button"`).concat(u.disabled?' disabled="disabled"':"",' role="switch" aria-checked="true" class="switch-btn ').concat(t?" switch-checked":"",`">
            <div class="switch-handle"></div>
            <span class="switch-inner"></span>
        </button>
    </div>`)},wx=function(){function b(u){Fe(this,b),this.options=void 0,this.root=void 0,this.switch=void 0,this.options=u}return Be(b,[{key:"renderTo",value:function(t){var n=this;this.root=V(yx(this.options)),this.switch=this.root.find(".switch-btn"),t.append(this.root),this.root.on("mousedown",function(r){return r.preventDefault()});var e=this.options.onClick;this.root.on("click",function(r){r.stopPropagation(),e&&(e(r,n.root),n.updateSwitch())})}},{key:"updateSwitch",value:function(){if(this.options.getState)if(this.options.getState()){var t;(t=this.switch)===null||t===void 0||t.addClass("switch-checked")}else{var n;(n=this.switch)===null||n===void 0||n.removeClass("switch-checked")}}}]),b}(),kx=function(u){return`
    <div class="data-toolbar-item data-toolbar-dropdown-item data-toolbar-dropdown-btn">
        <span class="data-toolbar-dropdown-item-content"`.concat(u.disabled?' disabled="disabled"':"",`>
            `).concat(u.content,`
        </span>
    </div>`)},xx=function(){function b(u){Fe(this,b),this.options=void 0,this.root=void 0,this.options=u}return Be(b,[{key:"renderTo",value:function(t){var n=this;this.root=V(kx(this.options)),t.append(this.root);var e=this.options.onClick;e&&this.root.on("click",function(r){return e(r,n.root)})}}]),b}(),Cx=function(u){return`
    <span class="data-toolbar-item data-toolbar-item-dropdown">
        <a class="data-toolbar-btn data-toolbar-dropdown"`.concat(u.disabled?' disabled="disabled"':"",">").concat(u.content,`</a>
        <div class="dropdown-container"></div>
    </span>`)},Ex=function(){function b(u){var t=this;Fe(this,b),this.options=void 0,this.root=void 0,this.dropdown=void 0,this.documentMouseDown=function(n){var e;!t.root||!t.root[0].contains(n.target)&&((e=t.dropdown)===null||e===void 0?void 0:e.hasClass("show"))&&t.hideDropdown()},this.options=u}return Be(b,[{key:"initToggleEvent",value:function(){var t=this,n=this.root.find(".data-toolbar-dropdown");n.on("mousedown",function(e){e.preventDefault(),e.stopPropagation()}),n.on("click",function(e){e.stopPropagation(),t.toggleDropdown()}),document.addEventListener("mousedown",this.documentMouseDown,!0)}},{key:"toggleDropdown",value:function(){var t;!((t=this.dropdown)===null||t===void 0)&&t.hasClass("show")?this.hideDropdown():this.showDropdown()}},{key:"showDropdown",value:function(){var t;(t=this.dropdown)===null||t===void 0||t.addClass("show")}},{key:"hideDropdown",value:function(){var t;(t=this.dropdown)===null||t===void 0||t.removeClass("show")}},{key:"renderTooltip",value:function(){var t=this,n=this.options.title;n&&(this.root.on("mouseenter",function(){An.show(t.root,typeof n=="function"?n():n)}),this.root.on("mouseleave",function(){An.hide()}),this.root.on("mousedown",function(){An.hide()}))}},{key:"renderDropdown",value:function(t){var n=this;this.dropdown=t.find(".dropdown-container");var e=this.options.items;e.forEach(function(r){switch(r.type){case"switch":return new wx(r).renderTo(n.dropdown);case"button":return new xx(r).renderTo(n.dropdown)}}),this.dropdown.on("click",function(r){r.stopPropagation(),n.hideDropdown()})}},{key:"render",value:function(t){this.root=V(Cx(this.options)),t.append(this.root),this.initToggleEvent(),this.renderTooltip(),this.renderDropdown(t);var n=this.options.didMount;n&&n(this.root)}},{key:"destroy",value:function(){document.removeEventListener("mousedown",this.documentMouseDown,!0)}}]),b}(),_x=function(u){return`
    <span class="data-toolbar-item data-toolbar-item-input">
        `.concat(u.prefix?"<span class='data-toolbar-input-prefix'>"+Sr(u.prefix)+"</span>":"",'<input data-role="input" placeholder="').concat(Sr(u.placeholder),'" class="data-toolbar-input" type="input" value="').concat(Sr(u.value.toString()),'" />').concat(u.suffix?"<span class='data-toolbar-input-suffix'>"+Sr(u.suffix)+"</span>":"",`
    </span>`)},Sx=function(){function b(u){Fe(this,b),this.options=void 0,this.root=void 0,this.onEnter=void 0,this.onInput=void 0,this.onChange=void 0,this.options=u,this.root=V(_x(u)),this.onEnter=u.onEnter||function(){},this.onInput=u.onInput||function(){},this.onChange=u.onChange||function(){}}return Be(b,[{key:"find",value:function(t){var n="[data-role=".concat(t,"]");return this.root.find(n)}},{key:"render",value:function(t){var n=this,e=this.options,r=e.value,i=e.didMount,a=this.find("input"),o=a.get();!o||(o.value=(r!==void 0?r:"").toString(),a.on("keydown",function(l){l.stopPropagation(),yt("enter",l)&&(l.preventDefault(),o.blur(),n.onEnter(o.value))}),a.on("input",function(){n.onInput(o.value)}),a.on("change",function(){setTimeout(function(){n.onChange(o.value)},10)}),t.append(this.root),i&&i(this.root))}}]),b}(),Mx=function(u){var t=!!u.checked;return u.getState&&(t=u.getState()),`
    <div class="data-toolbar-switch">
        <span class="switch-content"`.concat(u.disabled?' disabled="disabled"':"",">").concat(u.content,`</span>
        <button type="button" role="switch" aria-checked="true" class="switch-btn `).concat(t?" switch-checked":"",'"').concat(u.disabled?' disabled="disabled"':"",`>
            <div class="switch-handle"></div>
            <span class="switch-inner"></span>
        </button>
    </div>`)},Tx=function(){function b(u){Fe(this,b),this.options=void 0,this.root=void 0,this.switch=void 0,this.options=u,this.root=V(Mx(u)),this.switch=this.root.find(".switch-btn"),u.class&&this.root.addClass(u.class)}return Be(b,[{key:"render",value:function(t){var n=this,e=this.options,r=e.didMount,i=e.onClick;t.append(this.root),this.root.on("mousedown",function(a){return a.preventDefault()}),this.root.on("click",function(a){a.stopPropagation(),i&&(i(a,n.root),n.updateSwitch())}),r&&r(this.root)}},{key:"updateSwitch",value:function(){if(this.options.getState)if(this.options.getState()){var t;(t=this.switch)===null||t===void 0||t.addClass("switch-checked")}else{var n;(n=this.switch)===null||n===void 0||n.removeClass("switch-checked")}}}]),b}(),Ax=`.data-toolbar {\r
	position: absolute;\r
	opacity: 0;\r
	visibility: hidden;\r
	width: auto;\r
	line-height: 26px;\r
	display: flex;\r
	flex-direction: row;\r
	font-size: 14px;\r
	font-weight: normal;\r
	text-indent: 0;\r
	-webkit-user-select: none;\r
	-moz-user-select: none;\r
	 -ms-user-select: none;\r
	     user-select: none;\r
    z-index: 127;\r
}\r
\r
.data-toolbar-active {\r
	opacity: 1;\r
	visibility: visible;\r
}\r
\r
.data-toolbar-block {\r
	top: auto;\r
	bottom: -46px;\r
	left: -1px;\r
	right: auto;\r
	height: 40px;\r
}\r
\r
.data-toolbar-btn {\r
	line-height: 26px;\r
	min-width: 28px;\r
	display: inline-block;\r
	text-align: center;\r
	color: #595959;\r
	transition: background-color 0.3s ease-in-out;\r
	cursor: pointer;\r
}\r
\r
.data-toolbar-btn-disabled,.data-toolbar-btn-disabled:hover {\r
	background-color: transparent;\r
	box-shadow: none;\r
	cursor: not-allowed;\r
}\r
\r
.data-toolbar-group {\r
	border: 1px solid rgba(226, 226, 226, 0.84);\r
    border-radius: 4px;\r
    box-shadow: 0px 2px 4px 0px rgb(225 225 225 / 50%);\r
    background: #fff;\r
    position: relative;\r
    display: inline-flex;\r
    padding: 5px;\r
    align-items: center;\r
}\r
\r
.data-toolbar-item {\r
	position: relative;\r
	display: inline-block;\r
	line-height: 26px;\r
	text-align: left;\r
	color: #595959;\r
	flex: 0 0 auto;\r
    font-size: 12px;\r
    cursor: pointer;\r
}\r
\r
.data-toolbar-item:not(.data-toolbar-item-input):hover, .data-toolbar-item.active:not(.data-toolbar-item-input){\r
    background-color: #f4f4f4;\r
    border-radius: 2px;\r
}\r
\r
.data-toolbar-item > * {\r
    font-size: 12px !important;\r
}\r
\r
.data-toolbar-item[disabled] {\r
	opacity: 0.5;\r
	cursor: not-allowed;\r
}\r
\r
.data-toolbar-item-split {\r
	width: 1px;\r
	height: 16px;\r
	line-height: 16px;\r
	margin: 6px 4px;\r
	border-left: 1px solid #e8e8e8;\r
	display: inline-block;\r
}\r
\r
.data-toolbar-item-dropdown-active {\r
	opacity: 1;\r
	visibility: visible;\r
	transform: translateY(0px);\r
}\r
\r
.data-toolbar-item-input {\r
	display: flex;\r
    margin: 0 4px;\r
}\r
\r
.data-toolbar-item-input .data-toolbar-input {\r
    width: 46px;\r
    line-height: 12px;\r
    font-size: 12px;\r
    outline: none;\r
    border: 1px solid #dadada;\r
    border-radius: 4px;\r
}\r
\r
.data-toolbar-item-input .data-toolbar-input::-moz-selection {\r
    color: inherit;\r
    background:transparent\r
}\r
\r
.data-toolbar-item-input .data-toolbar-input::selection {\r
    color: inherit;\r
    background:transparent\r
}\r
\r
.data-toolbar-item-input .data-toolbar-input:focus::-moz-selection\r
{\r
    color: #fff;\r
    background: #1890ff;\r
}\r
\r
.data-toolbar-item-input .data-toolbar-input:focus::selection\r
{\r
    color: #fff;\r
    background: #1890ff;\r
}\r
\r
.data-toolbar-item-dropdown .dropdown-container {\r
	display: none;\r
	position: absolute;\r
	padding: 8px 0;\r
	top: 100%;\r
	margin-top: 6px;\r
	border-radius: 2px;\r
	background-color: #fff;\r
	box-shadow: 0 1px 4px -2px rgba(0, 0, 0, 0.13), 0 2px 8px 0 rgba(0, 0, 0, 0.08), 0 8px 16px 4px rgba(0, 0, 0, 0.04);\r
    z-index: 99999;\r
}\r
\r
.data-toolbar-item-dropdown .dropdown-container.show {\r
	display: block;\r
}\r
\r
.data-toolbar-dropdown-item {\r
	padding: 2px 16px;\r
	margin: 0;\r
	white-space: nowrap;\r
	line-height: 26px;\r
	color: #404040;\r
	cursor: pointer;\r
    display: block;\r
}\r
\r
.data-toolbar-dropdown-item:hover {\r
	background-color: #f5f5f5;\r
}\r
\r
.data-toolbar-dropdown-switch {\r
	display: flex;\r
	align-items: center;\r
}\r
\r
.data-toolbar-dropdown-switch .data-toolbar-dropdown-item-content {\r
	flex: 1;\r
    margin-right: 4px;\r
}\r
\r
.data-toolbar-dropdown-switch .switch-btn {\r
    margin: 0;\r
    padding: 0;\r
    color: #595959;\r
    font-size: 14px;\r
    font-variant: tabular-nums;\r
    line-height: 1.5;\r
    list-style: none;\r
    -webkit-font-feature-settings: "tnum";\r
    font-feature-settings: "tnum";\r
    position: relative;\r
    display: inline-block;\r
    -webkit-box-sizing: border-box;\r
    box-sizing: border-box;\r
    vertical-align: middle;\r
    background-color: rgba(0,0,0,.25);\r
    border: 0;\r
    border-radius: 100px;\r
    cursor: pointer;\r
    -webkit-transition: all .2s;\r
    transition: all .2s;\r
    -webkit-user-select: none;\r
    -moz-user-select: none;\r
    -ms-user-select: none;\r
    user-select: none;\r
    min-width: 28px;\r
    height: 16px;\r
    line-height: 16px;\r
}\r
\r
.data-toolbar-dropdown-switch .switch-btn.switch-checked {\r
    background-color: #347EFF\r
}\r
\r
.data-toolbar-dropdown-switch .switch-btn .switch-handle {\r
    top: 2px;\r
    left: 2px;\r
    width: 12px;\r
    height: 12px;\r
}\r
\r
.data-toolbar-dropdown-switch .switch-btn .switch-handle, .data-toolbar-dropdown-switch .switch-btn .switch-handle:before {\r
    position: absolute;\r
    -webkit-transition: all .2s ease-in-out;\r
    transition: all .2s ease-in-out;\r
}\r
\r
.data-toolbar-dropdown-switch .switch-btn.switch-checked .switch-handle {\r
    left: calc(100% - 14px);\r
}\r
\r
.data-toolbar-dropdown-switch .switch-btn .switch-handle:before {\r
    top: 0;\r
    right: 0;\r
    bottom: 0;\r
    left: 0;\r
    background-color: #fff;\r
    border-radius: 9px;\r
    -webkit-box-shadow: 0 2px 4px 0 rgb(0 35 11 / 20%);\r
    box-shadow: 0 2px 4px 0 rgb(0 35 11 / 20%);\r
    content: "";\r
}\r
\r
.data-toolbar-dropdown-switch .switch-btn .switch-inner {\r
    display: block;\r
    margin: 0 5px 0 18px;\r
    font-size: 12px;\r
    color: #fff;\r
    -webkit-transition: margin .2s;\r
    transition: margin .2s;\r
}\r
\r
.data-toolbar-dropdown-switch .switch-btn.switch-checked .switch-inner {\r
    margin: 0 18px 0 5px;\r
}\r
.data-toolbar-switch {\r
	display: flex;\r
	align-items: center;\r
    padding: 0 4px;\r
    cursor: pointer;\r
    width: -webkit-max-content;\r
    width: -moz-max-content;\r
    width: max-content;\r
}\r
\r
.data-toolbar-switch:hover {\r
    background-color: #f4f4f4;\r
    border-radius: 2px;\r
}\r
\r
.data-toolbar-switch .switch-content {\r
	flex: 1;\r
    margin-right: 4px;\r
}\r
\r
.data-toolbar-switch .switch-btn {\r
    margin: 0;\r
    padding: 0;\r
    color: #595959;\r
    font-size: 14px;\r
    font-variant: tabular-nums;\r
    line-height: 1.5;\r
    list-style: none;\r
    -webkit-font-feature-settings: "tnum";\r
    font-feature-settings: "tnum";\r
    position: relative;\r
    display: inline-block;\r
    -webkit-box-sizing: border-box;\r
    box-sizing: border-box;\r
    vertical-align: middle;\r
    background-color: rgba(0,0,0,.25);\r
    border: 0;\r
    border-radius: 100px;\r
    cursor: pointer;\r
    -webkit-transition: all .2s;\r
    transition: all .2s;\r
    -webkit-user-select: none;\r
    -moz-user-select: none;\r
    -ms-user-select: none;\r
    user-select: none;\r
    min-width: 28px;\r
    height: 16px;\r
    line-height: 16px;\r
}\r
\r
.data-toolbar-switch .switch-btn.switch-checked {\r
    background-color: #347EFF\r
}\r
\r
.data-toolbar-switch .switch-btn .switch-handle {\r
    top: 2px;\r
    left: 2px;\r
    width: 12px;\r
    height: 12px;\r
}\r
\r
.data-toolbar-switch .switch-btn .switch-handle, .data-toolbar-switch .switch-btn .switch-handle:before {\r
    position: absolute;\r
    -webkit-transition: all .2s ease-in-out;\r
    transition: all .2s ease-in-out;\r
}\r
\r
.data-toolbar-switch .switch-btn.switch-checked .switch-handle {\r
    left: calc(100% - 14px);\r
}\r
\r
.data-toolbar-switch .switch-btn .switch-handle:before {\r
    top: 0;\r
    right: 0;\r
    bottom: 0;\r
    left: 0;\r
    background-color: #fff;\r
    border-radius: 9px;\r
    -webkit-box-shadow: 0 2px 4px 0 rgb(0 35 11 / 20%);\r
    box-shadow: 0 2px 4px 0 rgb(0 35 11 / 20%);\r
    content: "";\r
}\r
\r
.data-toolbar-switch .switch-btn .switch-inner {\r
    display: block;\r
    margin: 0 5px 0 18px;\r
    font-size: 12px;\r
    color: #fff;\r
    -webkit-transition: margin .2s;\r
    transition: margin .2s;\r
}\r
\r
.data-toolbar-switch .switch-btn.switch-checked .switch-inner {\r
    margin: 0 18px 0 5px;\r
}`;Mo(Ax);var Nx=function(){return"<div ".concat(lt,'="ui" class="data-toolbar data-toolbar-active" ').concat(Hi,'="false"></div>')},Dx=function(){function b(u){Fe(this,b),this.options=void 0,this.root=void 0,this.items=[],this.options=Ie({},u),this.root=V(Nx())}return Be(b,[{key:"getPlacement",value:function(){var t=this.root.attributes("data-placement")||"top";return t.startsWith("top")?"top":"bottom"}},{key:"addItems",value:function(t){var n=this;this.options.items.forEach(function(e){var r;if(e.type==="button"&&(r=new bx(e),r.render(t)),e.type==="switch"&&(r=new Tx(e),r.render(t)),e.type==="input"){var i=e;r=new Sx(i),r.render(t)}if(e.type==="dropdown"&&(r=new Ex(e),r.render(t)),e.type==="node"){var a=e,o=a.node;o.addClass("data-toolbar-item");var l=a.title;l&&(o.on("mouseenter",function(){var c=n.getPlacement();An.show(o,typeof l=="function"?l():l,{placement:c})}),o.on("mouseleave",function(){An.hide()}),o.on("mousedown",function(){An.hide()})),t.append(o),e.didMount&&e.didMount(o)}r&&n.items.push(r)})}},{key:"find",value:function(t){var n="[data-role=".concat(t,"]");return this.root.find(n)}},{key:"destroy",value:function(){this.root.remove()}},{key:"hide",value:function(){this.root.removeClass("data-toolbar-active")}},{key:"show",value:function(){this.root.addClass("data-toolbar-active")}},{key:"renderGroup",value:function(){return V('<div class="data-toolbar-group"></div>')}},{key:"render",value:function(t){var n=this.renderGroup();return this.root.append(n),this.addItems(n),t&&t.append(this.root),this.root.addClass("data-toolbar-block"),this.root}},{key:"update",value:function(t){this.options=t,this.root.empty();var n=this.renderGroup();this.root.append(n),this.addItems(n)}}]),b}(),Wh="ot-user-background",gf="ot-user-cursor",Wg="ot-user-cursor-card",Cc="ot-card-mask",mf="ot-user-cursor-trigger",Ug="ot-user-cursor-trigger-active",Ix=function(){function b(u){Fe(this,b),this.engine=void 0,this.root=void 0,this.hideCursorInfoTimeoutMap=void 0,this.engine=u,this.root=u.root,this.hideCursorInfoTimeoutMap={}}return Be(b,[{key:"destroy",value:function(){var t,n=(t=this.engine.scrollNode)!==null&&t!==void 0?t:this.root;n.find(".".concat(Wh)).remove(),n.find(".".concat(gf)).remove(),n.find(".".concat(Cc)).remove()}},{key:"getRectWithRange",value:function(t,n){var e,r=n.getClientRect(),i=(e=t.get())===null||e===void 0?void 0:e.getBoundingClientRect();return new DOMRect(r.left-((i==null?void 0:i.left)||0),r.top-((i==null?void 0:i.top)||0),r.right-r.left,r.bottom-r.top)}},{key:"isWrapByRange",value:function(t){var n=t.cloneRange().collapse(!0).getClientRect(),e=t.cloneRange().collapse(!1).getClientRect();return n.bottom!==e.bottom}},{key:"drawSubRang",value:function(t,n,e,r){for(var i=e.startOffset,a=e.startNode,o=e.endNode,l=e.startOffset,c=e.endOffset,d=e.getClientRect().top,v=i;l<c;){e.setStart(e.commonAncestorContainer,l),e.setEnd(e.commonAncestorContainer,l+1);var h=e.getClientRect();if(h.top>d||l===c-1){e.setStart(e.commonAncestorContainer,v),v=l,d=h.top;var g=this.getRectWithRange(t,e);n.clearRect(g),n.drawRect(Ie(Ie({},g.toJSON()),r))}l++}e.setStart(a,i),e.setEnd(o,c)}},{key:"drawBackground",value:function(t,n){var e,r,i,a,o=this,l=this.engine.card,c=n.uuid,d=n.color,v=to(d);v.setAlpha(.3);var h,g=v.toRgbString(),w=((e=this.engine.scrollNode)!==null&&e!==void 0?e:this.root).find(".".concat(Wh,"[").concat(Ns,'="').concat(c,'"]'));if(w&&w.length>0)w.attributes(Qv,d.toString()),h=w[0].__canvas,h.clear();else{var x;w=V('<div class="'.concat(Wh,'" ').concat(Ns,'="').concat(c,'" ').concat(Qv,'="').concat(d,'" />')),((x=this.engine.scrollNode)!==null&&x!==void 0?x:this.root).append(w),h=new Pk({container:w.get()}),w[0].__canvas=h}w.css({position:"absolute",top:0,left:0,"pointer-events":"none"}),w[0].__range=t.cloneRange();var _=(r=this.engine.scrollNode)!==null&&r!==void 0?r:this.root,E=((i=_.get())===null||i===void 0?void 0:i.clientWidth)||_.width(),M=this.root.height();h.resize(E,M);var T=l.find(t.commonAncestorNode,!0);T&&!T.isCenter(t.commonAncestorNode)&&(T=void 0);var S={fill:g},D=t.getSubRanges();if(((a=T)===null||a===void 0?void 0:a.isEditable)&&T.drawBackground){var I=T.drawBackground(w,t,h);if(I===!1)return[t];if(I)if(Array.isArray(I))D=I;else return I.x<0&&(h.resize(E-I.x,M),w.css("left","".concat(I.x,"px")),I.x=0),h.clearRect(I),h.drawRect(Ie(Ie({},I.toJSON()),S)),[t]}else if(T)return[t];return D.forEach(function(P){if(o.isWrapByRange(P))o.drawSubRang(w,h,P,S);else{var B=o.getRectWithRange(w,P);h.clearRect(B),h.drawRect(Ie(Ie({},B.toJSON()),S))}}),D}},{key:"getNodeRect",value:function(t,n){var e,r=t.parent();if(t.isCard()&&(r==null?void 0:r.hasClass(this.engine.list.CUSTOMZIE_LI_CLASS))&&(r==null||(e=r.first())===null||e===void 0?void 0:e.equal(t))&&t.next()&&(t=t.next()),t.isElement()&&(n=t.get().getBoundingClientRect()),t.isText()){var i=ln.create(this.engine).cloneRange();i.select(t,!0),n=i.getClientRect()}return n}},{key:"getCursorRect",value:function(t){var n,e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,i=((n=this.root.get())===null||n===void 0?void 0:n.getBoundingClientRect())||{top:0,left:0};if(Tc(t)){var a=t,o=a.startNode;a.shrinkToElementNode();var l=a.getClientRect();if(o.isElement()&&l.height===0){var c=V(o[0].childNodes[a.startOffset]);c&&c.length>0?l=this.getNodeRect(c,l):(c=o.first(),c&&c.length>0&&(l=this.getNodeRect(c,l)))}var d=l.top-(i.top||0),v=l.left-(i.left||0)-r,h=l.height;return{top:d+"px",left:v+"px",height:h>0?h+"px":-1,elementHeight:l.height||0}}var g=t,w=tn(g.css("outline-width")),x=((e=g.get())===null||e===void 0?void 0:e.getBoundingClientRect())||{top:0,left:0,height:0},_=x.top-i.top-1,E=x.left-i.left;return w&&(_-=w+1,E-=2),{left:E+"px",top:_+"px",height:0,elementHeight:x.height||0}}},{key:"setCursorRect",value:function(t,n){if(n.height!==-1){if(n.height===0){t.css(n),t.addClass(Wg);return}t.css(n),t.removeClass(Wg)}else t.remove()}},{key:"showCursorInfo",value:function(t,n){var e=n.uuid,r=n.color;this.hideCursorInfoTimeoutMap[e]&&clearTimeout(this.hideCursorInfoTimeoutMap[e]);var i=t.find(".".concat(mf)),a=t.css("background-color");t.attributes("data-old-background-color",a),i.addClass("".concat(Ug)),t.css("background-color",r),i.css("background-color",r)}},{key:"hideCursorInfo",value:function(t){var n=t.find(".".concat(mf)),e=t.attributes("data-old-background-color");n.removeClass("".concat(Ug)),t.css("background-color",e),n.css("background-color",e)}},{key:"drawCursor",value:function(t,n,e){var r=this,i=n.uuid,a=n.name,o=n.color,l=this.getCursorRect(t),c=this.root.children(".".concat(gf,"[").concat(Ns,'="').concat(i,'"]'));if(c&&c.length>0)this.setCursorRect(c,l);else{var d=`
            <div class="`.concat(gf,'" ').concat(Ns,'="').concat(i,`">
                <div class="`).concat(mf,'">').concat(Sr(a||""),`</div>
            </div>`);c=V(d);var v=c.find(".".concat(mf));if(l.elementHeight===0){var h=0,g=function E(){h++,l=r.getCursorRect(t),l.elementHeight<20&&h<=50?setTimeout(function(){E()},20):r.setCursorRect(c,l)};g()}else this.setCursorRect(c,l);c.on("mouseenter",function(){return r.showCursorInfo(c,n)});var w=!0;c.on("transitionstart",function(){w=!1}),c.on("transitionend",function(){w=!0}),c.on("mouseleave",function(){w&&r.hideCursorInfo(c)}),c.css("background-color",o),v.css("background-color",o),this.root.append(c)}if(c&&c[0]){c.css("z-index","");var x=this.engine.card.components.find(function(E){return E.isMaximize});if(x){var _=this.engine.card.closest(Tc(t)?t.startNode:t,!0);(!_||!x.root.equal(_))&&c.css("z-index",120)}return c[0].__target=Tc(t)?t.toPath(!0):t,e===!1||(this.showCursorInfo(c,n),this.hideCursorInfoTimeoutMap[i]&&clearTimeout(this.hideCursorInfoTimeoutMap[i]),this.hideCursorInfoTimeoutMap[i]=setTimeout(function(){r.hideCursorInfo(c)},2e3)),c}}},{key:"drawCard",value:function(t,n,e){var r,i,a=this,o=this.engine.language,l=((r=this.root.get())===null||r===void 0?void 0:r.getBoundingClientRect())||{left:0,top:0,width:0,height:0},c=((i=t.get())===null||i===void 0?void 0:i.getBoundingClientRect())||{left:0,top:0,width:0,height:0},d=this.root.children(".".concat(Cc,"[").concat(Ns,'="').concat(e.uuid,'"]'));if(d&&d.length>0){d[0].__node=t[0],d.css({left:c.left-l.left+"px",top:c.top-l.top+"px"});return}if(d=V('<div class="'.concat(Cc,'" ').concat(Ns,'="').concat(e.uuid,'" />')),d[0].__node=t[0],c.height===0){var v=0,h=function g(){var w;v++,c=((w=t.get())===null||w===void 0?void 0:w.getBoundingClientRect())||{left:0,top:0,width:0,height:0},c.height<20&&v<=50?setTimeout(function(){g()},20):d.css({left:c.left-l.left+"px",top:c.top-l.top+"px",width:c.width+"px",height:c.height+"px"})};h()}else d.css({left:c.left-l.left+"px",top:c.top-l.top+"px",width:c.width+"px",height:c.height+"px"});d.on("mouseenter",function(){a.showCursorInfo(n,e),An.show(d,o.get("card","lockAlert").toString(),{placement:"bottomLeft"})}),d.on("mousemove",function(g){var w=V("div[".concat(lt,"=tooltip]"));w.css({left:g.pageX-16+"px",top:g.pageY+32+"px"})}),d.on("mouseleave",function(){a.hideCursorInfo(n),An.hide()}),d.on("click",function(g){g.preventDefault(),g.stopPropagation()}),d.on("mousedown",function(g){g.preventDefault(),g.stopPropagation()}),this.root.append(d)}},{key:"setCardSelectedByOther",value:function(t,n){var e=n||{},r=e.uuid,i=e.color;if(i){var a=to(i);a.setAlpha(.3);var o=a.toRgbString(),l;return t.selectedByOther||(l=t.onSelectByOther(!0,{color:i,rgb:o})),t.selectedByOther=r,l}t.selectedByOther&&t.onSelectByOther(!1),t.selectedByOther=!1}},{key:"setCardActivatedByOther",value:function(t,n){if(!t.isEditable){var e=n||{},r=e.uuid,i=e.color;if(i){var a=to(i);a.setAlpha(.3);var o=a.toRgbString(),l;return t.activatedByOther||(l=t.onActivateByOther(!0,{color:i,rgb:o})),t.activatedByOther=r,l}t.activatedByOther&&t.onActivateByOther(!1),t.activatedByOther=!1}}},{key:"drawRange",value:function(t,n,e){var r=this,i=this.engine.card,a=n.uuid,o=t,l=o.commonAncestorNode,c=i.find(l);if(c&&!c.isCenter(l)&&(c=void 0),i.each(function(E){E.isEditable||(!c||!E.root.equal(c.root))&&(E.activatedByOther===a&&r.setCardActivatedByOther(E),r.root.children(".".concat(Cc,"[").concat(Ns,'="').concat(a,'"]')).remove(),An.hide())}),c&&!c.isEditable){var d=this.setCardActivatedByOther(c,n)||c.root,v=c.constructor.collab;if(v===void 0||v===!0){var h=this.drawCursor(d,n,e);h&&this.drawCard(d,h,n),this.drawBackground(t,n)}}else{if(c){this.drawBackground(t,n);return}i.each(function(E){var M=E.getCenter();if(M&&M.length>0){if(E.isEditable&&M.contains(t.startNode)&&M.contains(t.endNode)&&(t.startNode.closest(Nn).length>0||t.endNode.closest(Nn).length>0)){r.setCardSelectedByOther(E);return}t.isPointInRange(M.get(),0)?r.setCardSelectedByOther(E,n):E.selectedByOther===a&&r.setCardSelectedByOther(E)}});var g=i.getSingleSelectedCard(t);if(g){if(g.isEditable){var w=g.getCenter();if(w.contains(t.startNode)&&w.contains(t.endNode)&&(t.startNode.closest(Nn).length>0||t.endNode.closest(Nn).length>0))return}var x=this.setCardSelectedByOther(g,n)||g.root;this.drawCursor(x,n,e)}else{t.shrinkToElementNode();var _=this.drawBackground(t,n);t.collapsed||(_.forEach(function(E){E.collapsed||(t=E)}),t.shrinkToElementNode(),t.collapse(!1)),this.drawCursor(t,n,e)}}}},{key:"updateBackgroundPosition",value:function(){var t,n=this;((t=this.engine.scrollNode)!==null&&t!==void 0?t:this.root).children(".".concat(Wh)).each(function(e){var r=V(e),i=e.__range,a=r.attributes(Ns),o=r.attributes(Qv);n.drawBackground(i,{uuid:a,color:o})})}},{key:"updateCursorPosition",value:function(){var t=this;this.root.children(".".concat(gf)).each(function(n){var e=V(n),r=n.__target;if(!r){e.remove();return}if(r.name||(r=ln.fromPath(t.engine,r,!0)),r.startContainer||V(r).closest("body").length!==0){var i=t.getCursorRect(r);t.setCursorRect(e,i)}else e.remove()})}},{key:"updateCardPosition",value:function(){var t,n=((t=this.root.get())===null||t===void 0?void 0:t.getBoundingClientRect())||{left:0,top:0};this.root.children(".".concat(Cc)).each(function(e){var r=V(e),i=e.__node;if(V(i).closest("body").length!==0){var a=i.getBoundingClientRect();r.css({left:a.left-n.left+"px",top:a.top-n.top+"px"})}else r.remove()})}},{key:"updatePosition",value:function(){this.updateBackgroundPosition(),this.updateCursorPosition(),this.updateCardPosition()}},{key:"updateBackgroundAlpha",value:function(t){var n=this.getCursorRect(t);this.root.children(".".concat(gf)).each(function(e){var r=V(e),i=r.find(".".concat(mf)),a=r.css("left"),o=r.css("top"),l=to(r.css("background-color"));n.left===a&&n.top===o?l.setAlpha(.3):l.setAlpha(1),r.css("background-color",l.toRgbString()),i.css("background-color",l.toRgbString())})}},{key:"render",value:function(t,n,e,r){var i=this,a,o=this.engine,l={};t.forEach(function(c){var d=c.path,v=c.uuid,h=c.active,g=n.find(function(x){return x.uuid===v});if(g&&(e||h))if(d){var w=ln.fromPath(o,d,!0);i.drawRange(w,g,r)}else l[v]=!0}),((a=this.engine.scrollNode)!==null&&a!==void 0?a:this.root).find("[".concat(Ns,"]")).each(function(c){var d=V(c),v=d.attributes(Ns),h=n.find(function(x){return x.uuid===v});if(!h||l[v]){if(d.hasClass(Cc)){var g=V(d[0].__node),w=o.card.find(g);w&&!w.isEditable&&w.activatedByOther===v&&i.setCardActivatedByOther(w)}d.remove()}}),o.card.each(function(c){if(!c.isEditable){var d=n.find(function(v){return v.uuid===c.selectedByOther});(!d||l[d.uuid])&&i.setCardSelectedByOther(c)}})}}]),b}(),Lx=function(b){ft(t,b);var u=ht(t);function t(n){var e;return Fe(this,t),e=u.call(this),e.engine=void 0,e.type=null,e.data=void 0,e.engine=n,e.create(),e}return Be(t,[{key:"create",value:function(){this.data=Rf(this.engine.container)}},{key:"apply",value:function(e){if(e.length)try{this.data=_c.type.apply(this.data,e)}catch(r){console.error(r)}}},{key:"submitOp",value:function(e){this.apply(e)}},{key:"destroy",value:function(){delete this.data}}]),t}(rs.exports.EventEmitter2),Ox=function(){function b(u){var t=this;Fe(this,b),this.engine=void 0,this.getElementFromPath=function(n,e){Tr(n)&&(n=n[0]);var r=e[0];if(r===El.ATTRIBUTE)return{startNode:n,startOffset:r,endNode:n,endOffset:r};var i=r-El.ELEMENT;if(n.nodeType===Node.ELEMENT_NODE&&n.hasAttribute(mi)){var a=t.engine.card,o=a.find(n);o&&(o.getCenter().empty(),a.renderComponent(o))}var l=Array.from(n.childNodes).filter(function(d){var v=V(d);return!eo(v)})[i],c=e[1];return e.length===1||c===El.TAG_NAME||c===El.ATTRIBUTE||l&&l.nodeType===Node.TEXT_NODE?{startNode:l,startOffset:i,endNode:n,endOffset:c||0}:t.getElementFromPath(l,e.slice(1))},this.engine=u}return Be(b,[{key:"fromRemoteAttr",value:function(t){if(!!t){var n=t.id,e=t.leftText,r=t.rightText,i=V("[".concat(fn,'="').concat(n,'"]'));if(i.length!==0){var a=i.get(),o=a.textContent||"";if(o==="")return{container:a,offset:0};if(o!=null&&o.startsWith(e)){for(var l=a.firstChild,c=e.length;l&&(l.nodeType!==3||(((d=l.textContent)===null||d===void 0?void 0:d.length)||0)<c);){var d,v;if((((v=l.textContent)===null||v===void 0?void 0:v.length)||0)<c){var h;c-=((h=l.textContent)===null||h===void 0?void 0:h.length)||0,l=l.nextSibling}else l=l.firstChild}return{container:l,offset:c}}if(o!=null&&o.endsWith(r)){for(var g,w,x=r.length,_=a.lastChild;_&&(_.nodeType!==3||(((E=_.textContent)===null||E===void 0?void 0:E.length)||0)<x);){var E,M;if(((M=_.textContent)===null||M===void 0?void 0:M.length)||0<x){var T,S;x-=((T=_)===null||T===void 0||(S=T.textContent)===null||S===void 0?void 0:S.length)||0,_=_.previousSibling}else _=_.lastChild}return{container:_,offset:((g=_)===null||g===void 0||(w=g.textContent)===null||w===void 0?void 0:w.length)||0-x}}for(var D=0;o[D]===e[D];)D++;for(var I=a.firstChild;I&&(I.nodeType!==3||(((P=I.textContent)===null||P===void 0?void 0:P.length)||0)<D);){var P,B;if(((B=I.textContent)===null||B===void 0?void 0:B.length)||0<D){var $;D-=(($=I.textContent)===null||$===void 0?void 0:$.length)||0,I=I.nextSibling}else I=I.firstChild}return{container:I,offset:D}}}}},{key:"getSideText",value:function(t,n){var e=this.engine.block.closest(t);if(e.length>0){var r=e.attributes(fn),i=ln.create(this.engine),a=ln.create(this.engine);return i.setStart(e[0],0),i.setEnd(t[0],n),a.setStart(t[0],n),a.setEnd(e[0],e[0].childNodes.length),{id:r,leftText:i.toString(),rightText:a.toString()}}}},{key:"setAttribute",value:function(t,n,e,r,i){var a=this.engine.card,o=this.getElementFromPath(t,n),l=o.startNode,c=V(l);if(c&&c.length>0&&!c.isRoot()){var d;if(e=Cm(e),r=Ai(r),(d=c.get())===null||d===void 0||d.setAttribute(e,r),c.isCard()){var v=a.find(c);if(!v)return;v.isEditable||a.reRender(v),v.isEditable&&v.onChange&&v.onChange(i?"remote":"local",c)}}return c}},{key:"removeAttribute",value:function(t,n,e){var r=this.getElementFromPath(t,n),i=r.startNode,a=V(i);if(a.length>0&&!a.isRoot()){var o;(o=a.get())===null||o===void 0||o.removeAttribute(e)}return a}},{key:"insertNode",value:function(t,n,e,r){var i=this.engine,a=this.getElementFromPath(t,n),o=a.startNode,l=a.endNode,c=V(o),d=V(l);if(d.length>0&&!c.isRoot()&&!t.isCard()){var v=typeof e=="string"?document.createTextNode(e):Am(e);if(c&&c.parent()){var h;(h=d.get())===null||h===void 0||h.insertBefore(v,c.get())}else{var g;(g=d.get())===null||g===void 0||g.insertBefore(v,null)}var w=V(v);return w.isCard()&&w.attributes(mi,r?"remote":"true"),i.card.render(w),w}}},{key:"deleteNode",value:function(t,n,e){var r=this.engine.card,i=this.getElementFromPath(t,n),a=i.startNode,o=V(a);if(o.length>0&&!o.isRoot()){var l=o.parent();return o.isCard()?e?r.removeRemote(o):r.remove(o,!1):o.remove(),l!=null&&l.isRoot()?void 0:l}}},{key:"insertText",value:function(t,n,e,r){var i=this.getElementFromPath(t,n),a=i.startNode,o=i.endNode,l=V(a);if(!(a&&!l.isText())){var c=a&&a.nodeValue?a.nodeValue:"",d=c.substring(0,e)+r+c.substring(e);if(a&&a.parentNode===o)a.nodeValue=d;else if(d){var v,h=document.createTextNode(d);((v=o.firstChild)===null||v===void 0?void 0:v.nodeName)==="BR"&&o.firstChild.remove(),o.insertBefore(h,o.firstChild)}return l}}},{key:"deleteText",value:function(t,n,e,r){var i=this.getElementFromPath(t,n),a=i.startNode,o=V(a);if(!!o.isText()){var l=a&&a.nodeValue?a.nodeValue:"",c=l.substring(0,e)+l.substring(e+r.length);return a.nodeValue=c,o}}},{key:"handleOperation",value:function(t,n){var e=t.p,r,i;if(e.length!==0){var a=this.engine.container;if("id"in t&&t.id&&t.bi&&t.bi>-1){var o=this.engine.container.find("[".concat(fn,'="').concat(t.id,'"]'));o.inEditor()&&(a=o,e=e.slice(t.bi))}return("si"in t||"sd"in t)&&(i=e[e.length-1],e=e.slice(0,-1)),("oi"in t||"od"in t)&&(r=e[e.length-1].toString(),e=e.slice(0,-1)),"oi"in t?this.setAttribute(a,e,r,t.oi,n):"od"in t?this.removeAttribute(a,e,r):"sd"in t?this.deleteText(a,e,i,t.sd):"si"in t?this.insertText(a,e,i,t.si):"ld"in t?this.deleteNode(a,e,n):"li"in t?this.insertNode(a,e,t.li,n):void 0}}},{key:"handleRemoteOperations",value:function(t){var n=this;try{var e=this.getRangeRemotePath(),r=[];return t.forEach(function(i){var a=n.handleOperation(i,!0);a&&r.push(a)}),e&&this.engine.isFocus()&&this.setRangeByRemotePath(e),this.engine.change.change(!0,r),r}catch(i){return console.log(i),[]}}},{key:"handleSelfOperations",value:function(t){var n=this,e=[];return t.forEach(function(r){var i=n.handleOperation(r);i&&e.push(i)}),this.engine.change.change(!1,e),e}},{key:"handleIndex",value:function(t){var n=this,e=[];t.forEach(function(r){var i=r.isRoot()?r:r.parent()||r;if(i.isEditable()&&!i.isRoot()){var a;i=((a=n.engine.card.find(i,!0))===null||a===void 0?void 0:a.root)||i}if(i&&i.length>0&&!e.includes(i[0])&&!e.find(function(l){return l.contains(i[0])})){for(var o=-1;(o=e.findIndex(function(l){return i[0].contains(l)}))&&o>-1;)e.splice(o,1);e.push(i[0])}}),e.forEach(function(r){return Ac(V(r))})}},{key:"setRangeAfterOp",value:function(t){var n=this.engine,e,r=t.p;("si"in t||"sd"in t)&&(e=r[r.length-1],r=r.slice(0,-1)),("oi"in t||"od"in t)&&(r=r.slice(0,-1));var i=this.engine.container;if("id"in t&&t.id&&t.bi&&t.bi>-1){var a=this.engine.container.find("[".concat(fn,'="').concat(t.id,'"]'));a.inEditor()&&(i=a,r=r.slice(t.bi))}var o=this.getElementFromPath(i,r),l=o.startNode,c=o.endNode,d=ln.create(this.engine);if("si"in t||"sd"in t){var v=l.data===""?c:l,h=t,g=e+(h.si?h.si.length:0);d.setOffset(v,g,g),n.change.range.select(d);return}d.select(l||c.lastChild||c,!0).shrinkToElementNode().collapse(!1),n.change.range.select(d)}},{key:"getRangeRemotePath",value:function(){try{var t;if(((t=window.getSelection())===null||t===void 0?void 0:t.rangeCount)===0)return;var n=ln.from(this.engine);if(!n||n.inCard())return;n.startNode.isRoot()&&n.shrinkToElementNode();var e=n.startNode,r=n.startOffset,i=n.endNode,a=n.endOffset;return{start:this.getSideText(e,r),end:this.getSideText(i,a)}}catch(o){console.log(o);return}}},{key:"setRangeByRemotePath",value:function(t){try{var n,e=window.getSelection(),r=e?(n=ln.from(this.engine,e))===null||n===void 0?void 0:n.cloneRange():void 0;if(!r)return;var i=t.start,a=t.end,o,l;i&&(o=this.fromRemoteAttr(i)),a&&(l=this.fromRemoteAttr(a)),o&&o.container&&r.setStart(o.container,o.offset),l&&l.container&&r.setEnd(l.container,l.offset),this.engine.change.range.select(r,!1)}catch(c){console.error(c)}}},{key:"setRangeByPath",value:function(t){if(t){var n=t.start,e=t.end;if(n&&e){var r=n.path[n.path.length-1],i=e.path[e.path.length-1],a=n.path.slice(),o=e.path.slice();a.pop(),o.pop();var l=this.engine,c=l.container,d=l.change,v=c.getChildByPath(a,function(T){return!eo(V(T))}),h=c.getChildByPath(o,function(T){return!eo(V(T))}),g=function(S,D){if(S.nodeType===vr().TEXT_NODE){var I=S.textContent||"";return I.length<D?I.length:D}else{var P=S.childNodes;return P.length<D?P.length:D}};try{var w=d.range.get();if(v.nodeName==="BR"||this.engine.node.isVoid(v)?w.select(v).collapse(!1):(w.setStart(v,g(v,r)),w.setEnd(h,g(h,i))),!w.collapsed){var x=this.engine.card.find(w.startNode,!0),_=this.engine.card.find(w.endNode,!0);if(x&&_&&(x==null?void 0:x.root.equal(_.root))){var E=w.startNode.closest(Nn);E.length===0&&(E=w.startNode.find(Nn));var M=w.endNode.closest(Nn);M.length===0&&(M=w.endNode.find(Nn)),E.length>0&&M.length>0&&!E.equal(M)&&w.collapse(!0)}}d.range.select(w),w.scrollRangeIntoView()}catch(T){console.error(T)}}}}}]),b}(),zx=function(b){ft(t,b);var u=ht(t);function t(n,e){var r;return Fe(this,t),r=u.call(this),r.engine=void 0,r.doc=void 0,r.dmp=void 0,r.cacheNodes=[],r.cacheTransientElements=void 0,r.timer=null,r.lineStart=!1,r.findCardForDoc=function(i,a,o){if(!!Array.isArray(i)){for(var l=1;l<i.length;l++)if(l===1){var c=i[l];if(c&&c["data-card-key"]===a&&o&&o(c)){var d=i[l+1];return{attriables:c,rendered:Array.isArray(d)&&Array.isArray(d[2])&&Array.isArray(d[2][2])}}}else if(Array.isArray(i[l])){var v=r.findCardForDoc(i[l],a,o);if(v)return v}}},r.engine=n,r.doc=e.doc,r.dmp=new Sf.exports.diff_match_patch,r}return Be(t,[{key:"textToOps",value:function(e,r,i){var a=[],o=this.dmp.patch_make(r,i);return Object.keys(o).forEach(function(l){var c=o[l],d=c.start1;c.diffs.forEach(function(v){var h=Ta(v,2),g=h[0],w=h[1];if(g!==Sf.exports.DIFF_DELETE)if(g!==Sf.exports.DIFF_INSERT)g===Sf.exports.DIFF_EQUAL&&(d+=w.length);else{var x=[];a.push({si:w,p:x.concat(Hn(e),[d])})}else{var _=[];a.push({sd:w,p:_.concat(Hn(e),[d])})}})}),a}},{key:"cacheNode",value:function(e){var r=this;this.cacheNodes.push(e),e.childNodes.forEach(function(i){r.cacheNodes.push(i),r.cacheNode(i)})}},{key:"clearCache",value:function(){this.cacheNodes=[]}},{key:"inCache",value:function(e){return this.cacheNodes.find(function(r){return r===e})}},{key:"isTransientMutation",value:function(e,r,i){var a=e.addedNodes,o=e.removedNodes,l=e.target,c=e.type,d=e.attributeName,v=V(l);if(c==="childList"){var h=[];if(a[0]&&h.push(V(a[0])),o[0]&&h.push(V(o[0])),h.push(v),h.some(function(g){return eo(g,r,i)}))return!0}return c==="attributes"&&(eo(v,r,i)||Mm(v,d||""))||c==="characterData"&&eo(v,r,i)}},{key:"generateOps",value:function(e){for(var r=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.engine.container,a=[],o=[],l=[],c=[],d=[],v=!1,h=new Map,g=function(S){var D;return!((D=S.parent())===null||D===void 0)&&D.isRoot()?void 0:function(I){return!eo(V(I),r.cacheTransientElements)}},w=function(S){return S.isRoot()?[]:S.getPath(i,g(S))},x=function(S){return S.getIndex(g(S))},_=function(S){var D=e[S],I=D.target,P=D.addedNodes,B=D.removedNodes,$=D.type,q=r.inCache(I),G=V(I);if(q||!G.inEditor()&&!G.isRoot())return S++,E=S,"continue";var H=G.attributes(fn)?G:r.engine.block.closest(G),z=H.attributes(fn),O=h.get(G);O===void 0&&(O=w(G).map(function(ae){return ae+El.ELEMENT}),h.set(G,O));var Q=-1;if(z)if(G.equal(H))Q=O.length;else{var ie=h.get(H);ie||(ie=w(H),h.set(H,ie)),Q=ie.length}var L=O.slice();if(l.forEach(function(ae){for(var J=0;J<O.length&&ae.p.length<O.length;J++)("li"in ae||"ld"in ae)&&ae.p.length===J+1&&(ae.p[J]<O[J]||ae.p[J]===O[J]&&ae.p.length===O.length)&&("li"in ae?L[J]=L[J]-1:"ld"in ae&&(L[J]=L[J]+1))}),l=[],c=[],$==="childList")B[0]&&Array.from(B).forEach(function(ae){if(!a.find(function(Te){return Te===ae})&&!d.find(function(Te){return Te===ae})){var J,pe=ae.__index!==void 0?ae.__index:r.getRemoveNodeIndex(D,e),Ee=pe+El.ELEMENT,Le=(J=O)===null||J===void 0?void 0:J.concat();Le&&Le.length>0&&(Le.pop(),Le.push(I.__index+El.ELEMENT));var Re=L==null?void 0:L.concat();Re.length>0&&(Re.pop(),Re.push(I.__index+El.ELEMENT));var Ce=[];Ce=Ce.concat(Hn(Le),[Ee]);var ne=[];ne=ne.concat(Hn(Re),[Ee]);var me=[];ae.nodeType===Node.ELEMENT_NODE&&V(ae).allChildren().forEach(function(Te){var ze=Te.isElement()?Te.attributes(fn):void 0;ze&&me.push(ze)});var ue={id:z,bi:Q,ld:!0,childIds:me,p:Ce,newPath:Ce.slice(),oldPath:ne};D.nl&&(ue.nl=!0),l.push(ue)}}),P[0]&&Array.from(P).forEach(function(ae){if(d.includes(ae)){E=S;return}var J=V(ae),pe=Rf(J);if(ae.parentNode===I){J.traverse(function(Ce){var ne=o.findIndex(function(me){return"li"in me&&me.addNode&&Ce.equal(me.addNode)});ne>-1&&o.splice(ne,1)});var Ee=x(J)+El.ELEMENT,Le=Hn(O||[]);Le=Le.concat([Ee]);var Re={id:z,bi:Q,li:pe,addNode:J,p:Le,newPath:Le.slice()};D.nl&&(Re.nl=!0),l.push(Re),d.push(ae),r.cacheNode(ae)}else a.push(ae)});else if($==="characterData"){if(!v){var F;if(typeof vf((F=r.doc)===null||F===void 0?void 0:F.data,L,z)=="string"&&(D["text-data"]||I.data).length>0){var X={id:z,bi:Q,path:O,oldPath:L,newValue:D["text-data"]||I.data};D.nl&&(X.nl=!0),c.push(X),v=!0}}}else if($==="attributes"){var se=D.oldValue,Y=D.attributeName,j=Y?I.getAttribute(Y):"";if(se||(se=""),j=j?Sr(j):"",se!==j){var fe=[],ve={id:z,bi:Q};ve.p=fe.concat(Hn(O),[1,Zk(Y||"")]),se&&(ve.od=se),j&&(ve.oi=j),D.nl&&(ve.nl=!0),c.push(ve)}}S++,l.forEach(function(ae){if("ld"in ae){var J,pe=vf((J=r.doc)===null||J===void 0?void 0:J.data,ae.oldPath||[]);if(pe!==void 0){var Ee=ae.childIds||[],Le=Array.isArray(pe)&&pe[1]?pe[1][fn]:void 0,Re=function me(ue){if(Array.isArray(ue)){var Te=ue[1];Te&&Te[fn]&&Te[fn]!==ae.id&&(!Le||Te[fn]!==Le)&&Ee.push(Te[fn]);for(var ze=2;ze<ue.length;ze++)me(ue[ze])}};Re(pe),ae.childIds=Ee;var Ce={id:ae.id,bi:Q,ld:pe,p:ae.p,nl:ae.nl,childIds:Ee,oldPath:ae.oldPath},ne=!1;o.forEach(function(me){if("ld"in me){var ue,Te;if(me.id&&((ue=ae.childIds)===null||ue===void 0?void 0:ue.includes(me.id))){var ze,We,et;me.p=ae.p.concat(me.p.slice(ae.p.length)),me.oldPath=(ze=ae.oldPath)===null||ze===void 0?void 0:ze.concat(((We=me.oldPath)===null||We===void 0?void 0:We.slice(ae.oldPath.length))||[]),me.ld=vf((et=r.doc)===null||et===void 0?void 0:et.data,me.oldPath||[])}else if(ae.id&&((Te=me.childIds)===null||Te===void 0?void 0:Te.includes(ae.id))){var Ke,Ge,_e;Ce.p=me.p.concat(ae.p.slice(me.p.length)),Ce.oldPath=(Ke=me.oldPath)===null||Ke===void 0?void 0:Ke.concat(((Ge=ae.oldPath)===null||Ge===void 0?void 0:Ge.slice(me.oldPath.length))||[]),Ce.ld=vf((_e=r.doc)===null||_e===void 0?void 0:_e.data,Ce.oldPath||[])}var Ue=me.p.join(","),Ae=Ce.p.join(",");!ne&&Ue===Ae&&(ne=!0)}}),ne||o.push(Ce)}}"li"in ae&&o.push({id:ae.id,bi:Q,li:ae.li,p:ae.p,nl:ae.nl,addNode:ae.addNode})}),o.push.apply(o,Hn(c)),E=S},E=0;e[E];)var M=_(E);return o.map(function(T){return"li"in T?delete T.addNode:"ld"in T&&(delete T.childIds,delete T.oldPath),T})}},{key:"handleMutations",value:function(e){var r=this,i=[];if(e.length>299){this.cacheTransientElements=[];var a=this.engine,o=a.card,l=a.container;o.each(function(g){if(!g.isEditable||g.loading){var w=g.isEditable&&g.loading;g.root.allChildren().forEach(function(x){if(x.type===vr().ELEMENT_NODE){var _;w&&(x[0].__card_root=g.root),(_=r.cacheTransientElements)===null||_===void 0||_.push(x[0])}})}});var c=l.find("".concat(Su));c.each(function(g,w){var x=c.eq(w);x==null||x.allChildren().forEach(function(_){var E;_.type===vr().ELEMENT_NODE&&((E=r.cacheTransientElements)===null||E===void 0||E.push(_[0]))})})}var d=[],v=new Map;e=e.filter(function(g){var w=i.length,x=r.isTransientMutation(g,r.cacheTransientElements,i);if(i.length>w&&r.doc){var _=i[i.length-1];if(g.removedNodes.length===1&&_.equal(g.removedNodes[0]))return!0;var E=v.get(_[0]);if(E===void 0&&_.isEditableCard()){var M=_.attributes(Gt),T=wr(_.attributes(er)),S=r.findCardForDoc(r.doc.data,M,function(G){var H=wr(G[er]);return H.id===T.id});S&&!S.rendered?(x=!1,g.nl=!0):x=!0,v.set(_[0],x)}else E!==void 0&&(x=E);g.addedNodes.forEach(function(G){G.__card_rendered=!0});var D=_.find(Wk).children().toArray(),I=D.length>0&&D.every(function(G){if(G.length===0)return!0;var H=G.attributes();return(H[lt]===Gn||!!H[Id])&&!G.hasClass(mi)||G[0].__card_rendered===!0});if(I){var P=function(H){var z=H.find(Ar).toArray().every(function(O){var Q=O.attributes(mi);return!!(!Q||O[0].__card_rendered)});z&&H.removeAttributes(mi)};if(_.isEditableCard())P(_);else{_.removeAttributes(mi);var B=_.parent();if(B){var $=r.engine.card.closest(B,!0);$&&$.length>0&&P($)}}}}if(!x&&!d.includes(g.target)&&!d.find(function(G){return G.contains(g.target)})){for(var q=-1;(q=d.findIndex(function(G){return g.target.contains(G)}))&&q>-1;)d.splice(q,1);d.push(g.target)}return!x}),this.clearCache(),this.cacheTransientElements=void 0;var h=this.generateOps(e);h=Tm(h),d.forEach(function(g){var w=V(g);if(w.isEditable()&&!w.isRoot()){var x=r.engine.card.find(w,!0);w=(x==null?void 0:x.root)||w}Ac(w,function(_){return!eo(V(_),r.cacheTransientElements)})}),h.length!==0&&this.emitOps(h)}},{key:"emitOps",value:function(e){var r=this,i=[];e.forEach(function(a){if("path"in a&&a.newValue!==void 0){var o,l=vf((o=r.doc)===null||o===void 0?void 0:o.data,a.oldPath||[]);if(!l)return;var c=r.textToOps(Hn(a.path),l,a.newValue);c.forEach(function(d){d.id=a.id,d.bi=a.bi}),i=i.concat(c)}else a.p.length!==0&&i.push(a)}),i.length!==0&&(tx(i),this.emit("ops",i))}},{key:"setDoc",value:function(e){this.doc=e}},{key:"getRemoveNodeIndex",value:function(e,r){var i=this,a=e.target,o=e.nextSibling,l=e.previousSibling,c=e.addedNodes,d=a,v=a.nodeType===vr().ELEMENT_NODE&&d.getAttribute(lt)===_u?Array.from(a.childNodes):Array.from(a.childNodes).filter(function(_){return!eo(V(_),i.cacheTransientElements)}),h=v.indexOf(c[0]),g=v.indexOf(l),w=v.indexOf(o),x;return g!==-1?x=g+1:w!==-1?x=w:h!==-1?x=h:l?o?l&&(x=this.getRemoveNodeIndexFromMutation(l,a,r)):x=a.childNodes.length:x=0,x!==void 0?x:0}},{key:"getRemoveNodeIndexFromMutation",value:function(e,r,i){var a=i.find(function(o){return o.target===r&&o.removedNodes[0]===e});return a?this.getRemoveNodeIndex(a,i):0}}]),t}(rs.exports.EventEmitter2),Rx={childList:!0,subtree:!0,attributes:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0},Fx=function(b){ft(t,b);var u=ht(t);function t(n,e){var r;return Fe(this,t),r=u.call(this),r.node=void 0,r.engine=void 0,r.doc=void 0,r.isStopped=void 0,r.observer=void 0,r.producer=void 0,r.isCache=!1,r.cache=[],r.node=n,r.isStopped=!0,r.engine=e.engine,r.doc=e.doc,r.producer=new zx(r.engine,{doc:r.doc}),r.observer=new MutationObserver(function(i){if(r.isCache){var a;(a=r.cache).push.apply(a,Hn(i))}!r.isStopped&&!r.isCache&&r.producer.handleMutations(i)}),r.producer.on("ops",function(i){r.onChange(i)}),r}return Be(t,[{key:"setDoc",value:function(e){this.doc=e,this.producer.setDoc(e)}},{key:"start",value:function(){this.isStopped&&(this.observer.observe(this.node[0],Rx),this.isStopped=!1)}},{key:"stop",value:function(){this.isStopped||(this.observer.disconnect(),this.isStopped=!0)}},{key:"startCache",value:function(){this.isCache||(this.cache=[],this.isCache=!0)}},{key:"submitCache",value:function(){var e=this;this.isCache&&setTimeout(function(){e.engine.change.isComposing()||(e.isCache=!1,e.cache=e.cache.map(function(r){return r.type==="characterData"&&r.target.nodeType===document.TEXT_NODE&&(r["text-data"]=r.target.textContent),r}),e.cache.length>0&&e.producer.handleMutations(e.cache),e.cache=[])},20)}},{key:"destroyCache",value:function(){var e=this;this.isCache&&setTimeout(function(){e.isCache=!1,e.cache=[]},20)}},{key:"getCaches",value:function(){return this.cache}},{key:"onChange",value:function(e){this.isStopped||this.emit("onChange",e)}}]),t}(rs.exports.EventEmitter2),Bx=`.ot-user-cursor {\r
	position: absolute;\r
	z-index: 125;\r
	width: 2px;\r
}\r
\r
.ot-user-cursor-trigger {\r
	position: absolute;\r
	top: -5px;\r
	left: -2px;\r
	border-radius: 100%;\r
	color: #ffffff;\r
	width: 6px;\r
	height: 6px;\r
	font-size: 0;\r
	overflow: hidden;\r
	transition: all 0.1s linear;\r
}\r
\r
.ot-user-cursor-trigger-active {\r
	top: -17px;\r
	border-radius: 2px;\r
	color: #ffffff;\r
	font-size: 10px;\r
	line-height: 18px;\r
	height: 18px;\r
	width: auto;\r
	padding: 0 3px;\r
	white-space: nowrap;\r
}\r
\r
.ot-card-mask {\r
	position: absolute;\r
	z-index: 10;\r
	background: transparent;\r
	cursor: not-allowed;\r
}\r
\r
.ot-user-background {\r
  z-index: 120;\r
}\r
\r
.ot-user-cursor-card {\r
	position: absolute;\r
}\r
\r
.ot-user-cursor-card .ot-user-cursor-trigger {\r
	display: none;\r
}\r
\r
.ot-user-cursor-card .ot-user-cursor-trigger-active {\r
	position: absolute;\r
	display: block;\r
	top: -19px;\r
	left: 0;\r
	border-radius: 2px;\r
	color: #ffffff;\r
	font-size: 10px;\r
	line-height: 18px;\r
	height: 18px;\r
	width: auto;\r
	padding: 0 3px;\r
	white-space: nowrap;\r
}`;Mo(Bx);var Px=function(b){ft(t,b);var u=ht(t);function t(n){var e;return Fe(this,t),e=u.call(this),e.engine=void 0,e.members=void 0,e.currentMember=void 0,e.waitingOps=[],e.clientId=void 0,e.selection=void 0,e.rangeColoring=void 0,e.consumer=void 0,e.mutation=void 0,e.doc=null,e.updateRangeColoringPosition=Kt.exports.debounce(function(){e.updateSelection(),e.rangeColoring.updatePosition()},100),e.applyWaitingOps=Kt.exports.debounce(function(){var r=Tm(e.waitingOps);r.length>0&&(e.waitingOps=[],e.apply(r),e.engine.history.handleRemoteOps(r))},0),e.colors=["#597EF7","#73D13D","#FF4D4F","#9254DE","#36CFC9","#FFA940","#F759AB","#40A9FF"],e.handleChange=function(r){var i;e.submitOps(r),e.engine.history.handleSelfOps(r.filter(function(a){return!a.nl&&!a.p.includes(_n)})),e.doc&&((i=e.doc)===null||i===void 0?void 0:i.type)!==null&&e.updateRangeColoringPosition(),e.engine.trigger("ops",r),r.find(function(a){return("od"in a||"oi"in a)&&a.p.includes(er)})&&(e.engine.trigger("realtimeChange","local"),e.engine.trigger("change","local"))},e.updateSelection=function(){if(!e.engine.change.isComposing()&&e.currentMember){var r=e.selection.updateSelections(e.currentMember,e.members).range;e.rangeColoring.updateBackgroundAlpha(r)}},e.engine=n,e.members=[],e.selection=new vx(n),e.rangeColoring=new Ix(n),e.consumer=new Ox(n),e.mutation=new Fx(n.container,{engine:n}),e.mutation.on("onChange",e.handleChange),e.clientId=If(8),e.waitingOps=[],e.engine.on("select",e.updateSelection),e}return Be(t,[{key:"initLocal",value:function(){var e;this.doc||(this.stopMutation(),this.doc=new Lx(this.engine),(e=this.mutation)===null||e===void 0||e.setDoc(this.doc),this.startMutation())}},{key:"initRemote",value:function(e,r,i){var a,o=this,l=!this.doc||this.doc.type===null;this.stopMutation(),l||this.doc.destroy(),this.doc=e,(a=this.mutation)===null||a===void 0||a.setDoc(e),this.syncValue(r),e.on("op",function(c,d){o.clientId!==d.toString()&&(o.waitingOps=o.waitingOps.concat(c),o.applyWaitingOps())}),this.selection.removeAllListeners(),this.selection.on("change",function(c){i&&i(c)}),this.startMutation(),l&&this.emit("load")}},{key:"submitOps",value:function(e){if(!!this.doc)try{this.doc.submitOp(e,{source:this.clientId})}catch(r){console.error("SubmitOps Error:","MSG:",r,"OPS:",e,"DATA:",this.doc.data)}}},{key:"apply",value:function(e){this.stopMutation();var r=this.consumer.handleRemoteOperations(e);this.consumer.handleIndex(e.some(function(i){return i.bi<0})?[this.engine.container]:r),this.startMutation()}},{key:"syncValue",value:function(e){var r=this,i=this.doc,a=this.engine;if(!!i){if(i.type&&Array.isArray(i.data)&&i.data.length>2){this.engine.setJsonValue(i.data,function(){Ac(r.engine.container)});return}e&&a.setValue(e,function(){Ac(r.engine.container)}),i.on("create",function(){var o=Rf(a.container);i.submitOp([{p:[],oi:o}],{source:r.clientId})})}}},{key:"startMutation",value:function(){this.mutation&&this.mutation.start()}},{key:"stopMutation",value:function(){this.mutation&&this.mutation.stop()}},{key:"isStopped",value:function(){var e,r;return(e=(r=this.mutation)===null||r===void 0?void 0:r.isStopped)!==null&&e!==void 0?e:!1}},{key:"startMutationCache",value:function(){this.mutation&&this.mutation.startCache()}},{key:"submitMutationCache",value:function(){this.mutation&&this.mutation.submitCache()}},{key:"destroyMutationCache",value:function(){this.mutation&&this.mutation.destroyCache()}},{key:"getCaches",value:function(){var e;return((e=this.mutation)===null||e===void 0?void 0:e.getCaches())||[]}},{key:"getColors",value:function(){return this.colors}},{key:"setColors",value:function(e){this.colors=e}},{key:"setMemberColor",value:function(e){var r=e.index||this.members.length+1;r=(r-1)%this.colors.length,e.color=this.colors[r]}},{key:"getMembers",value:function(){return Kt.exports.cloneDeep(this.members)}},{key:"setMembers",value:function(e){var r=this;e=Kt.exports.cloneDeep(e),e.forEach(function(i){r.setMemberColor(i)}),this.members=e}},{key:"addMember",value:function(e){e=Kt.exports.cloneDeep(e),this.setMemberColor(e),this.members.find(function(r){return r.uuid===e.uuid})||this.members.push(e)}},{key:"removeMember",value:function(e){e=Kt.exports.cloneDeep(e),e.uuid&&(this.members=this.members.filter(function(r){return r.uuid!==e.uuid}))}},{key:"setCurrentMember",value:function(e){e=Kt.exports.cloneDeep(e),this.setMemberColor(e);var r=this.members.find(function(i){return i.uuid===e.uuid});!r||(this.currentMember=r)}},{key:"getCurrentMember",value:function(){return this.currentMember}},{key:"renderSelection",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2?arguments[2]:void 0,a=this.members,o=this.currentMember;this.selection.data=e,e=e.filter(function(l){return l.uuid!==(o==null?void 0:o.uuid)}),this.rangeColoring.render(e,a,r,i),this.rangeColoring.updatePosition()}},{key:"refreshSelection",value:function(e){if(!!this.currentMember){var r=this.selection.updateSelections(this.currentMember,this.members).data;this.renderSelection(r,!0,e)}}},{key:"destroy",value:function(){var e,r;this.doc&&this.doc.destroy(),(e=this.mutation)===null||e===void 0||e.off("onChange",this.handleChange),(r=this.mutation)===null||r===void 0||r.destroyCache(),this.engine.off("select",this.updateSelection),this.stopMutation(),this.rangeColoring.destroy(),this.mutation=null}}]),t}(rs.exports.EventEmitter2),vl=Mt("selfWaiting"),Hx=function(){function b(u){var t=this;Fe(this,b),this.actionOps=[],this.engine=void 0,this.currentAction={},this.currentActionIndex=0,this.filterEvents=[],this.selfEvents=[],Object.defineProperty(this,vl,{writable:!0,value:void 0}),this.lazySave=Kt.exports.debounce(function(){t.saveOp()},200),this.handlePath=function(n,e,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:function(d){return!eo(V(d))},o=t.engine.container.find("[".concat(fn,'="').concat(e,'"]'));if(o.length>0&&o.inEditor()){var l,c=o.getPath(t.engine.container,!((l=o.parent())===null||l===void 0)&&l.isRoot()?void 0:a);return(i?c.map(function(d){return d+2}):c).concat(n.slice(r))}return n},this.engine=u}return Be(b,[{key:"reset",value:function(){this.actionOps=[],this.currentAction={},this.currentActionIndex=0}},{key:"onFilter",value:function(t){this.filterEvents.push(t)}},{key:"onSelf",value:function(t){this.selfEvents.push(t)}},{key:"hasUndo",value:function(){return!!this.getUndoOp()}},{key:"hasRedo",value:function(){return!!this.getRedoOp()}},{key:"undo",value:function(){this.saveOp();var t=this.getUndoOp();if(t){var n=!1;this.engine.ot.stopMutation();try{var e=this.engine.ot;e.submitOps(t.ops||[]);var r=e.consumer.handleSelfOperations(t.ops);e.consumer.handleIndex(r),this.currentActionIndex--,n=!0}catch(i){this.reset(),console.error(i)}this.engine.isEmpty()&&this.engine.change.initValue(),n&&(this.engine.change.getRangePathBeforeCommand(),this.engine.ot.consumer.setRangeByPath(t.startRangePath),this.engine.change.change(),this.engine.trigger("undo")),this.engine.ot.startMutation()}}},{key:"redo",value:function(){this.saveOp();var t=this.getRedoOp();if(t){var n=!1;this.engine.ot.stopMutation();try{var e=this.engine.ot;e.submitOps(t.ops||[]);var r=e.consumer.handleSelfOperations(t.ops);e.consumer.handleIndex(r),this.currentActionIndex++,n=!0}catch(i){this.reset(),console.error(i)}n&&(this.engine.change.getRangePathBeforeCommand(),this.engine.ot.consumer.setRangeByPath(t.rangePath),this.engine.change.change(),this.engine.trigger("redo")),this.engine.ot.startMutation()}}},{key:"clear",value:function(){var t=this;setTimeout(function(){t.reset()},10)}},{key:"saveOp",value:function(){this.currentAction&&this.currentAction.ops&&this.currentAction.ops.length>0&&(this.currentAction.self&&(this.currentAction.rangePath=this.getCurrentRangePath(),this.currentAction.id=If(8),this.actionOps.splice(this.currentActionIndex),this.actionOps.push(this.currentAction),this.currentActionIndex=this.actionOps.length),this.currentAction={},this.engine.change.getRangePathBeforeCommand())}},{key:"handleSelfOps",value:function(t){var n,e=this;!((n=this.currentAction)===null||n===void 0)&&n.self||this.saveOp();var r=!1;if(t.forEach(function(a){if(r=!0,e.filterEvents.some(function(c){return c(a)})){var o;e.actionOps.length>0&&!a.nl&&((o=e.actionOps[e.actionOps.length-1].ops)===null||o===void 0||o.push(a))}else{e.currentAction.self=!0,e.currentAction.ops||(e.currentAction.ops=[]),e.currentAction.startRangePath||(e.currentAction.startRangePath=e.getRangePathBeforeCommand());var l=e.currentAction.ops[e.currentAction.ops.length-1];l&&gp(a,l)?e.currentAction.ops.pop():e.currentAction.ops.push(a)}}),r){var i=void 0;if(this.selfEvents.some(function(a){return i=a(t),i!==void 0}),oe(this,vl)[vl])return;typeof i=="boolean"?i?this.saveOp():this.currentAction={}:Jn(i)==="object"?(oe(this,vl)[vl]=i,i.then(function(a){a?e.saveOp():e.currentAction={}}).finally(function(){return oe(e,vl)[vl]=void 0})):i===void 0&&this.lazySave()}}},{key:"handleRemoteOps",value:function(t){var n=this;this.currentAction.self&&!oe(this,vl)[vl]&&this.saveOp();var e=this.engine.change.range.get();this.actionOps.forEach(function(r){var i;if((i=r.ops)===null||i===void 0||i.forEach(function(h){h.id&&h.bi!==void 0&&(h.p=n.handlePath(h.p,h.id,h.bi))}),r.rangePath){var a=r.rangePath,o=a.start,l=a.end;o.id&&o.bi!==void 0&&(o.path=n.handlePath(o.path,o.id,o.bi,!1,e.filterPath(!0))),l.id&&l.bi!==void 0&&(l.path=n.handlePath(l.path,l.id,l.bi,!1,e.filterPath(!0)))}if(r.startRangePath){var c=r.startRangePath,d=c.start,v=c.end;d.id&&d.bi!==void 0&&(d.path=n.handlePath(d.path,d.id,d.bi,!1,e.filterPath(!0))),v.id&&v.bi!==void 0&&(v.path=n.handlePath(v.path,v.id,v.bi,!1,e.filterPath(!0)))}}),t.forEach(function(r){n.currentAction.ops||(n.currentAction.ops=[]);var i=n.currentAction.ops[n.currentAction.ops.length-1];i&&gp(r,i)?n.currentAction.ops.pop():n.currentAction.ops.push(r),n.actionOps.some(function(a,o){var l,c=(l=a.ops)===null||l===void 0?void 0:l.some(function(w){return _c.type.canOpAffectPath(r,w.p)});if(c){for(var d=[a],v=function(x){var _,E=n.actionOps[x],M=(_=E.ops)===null||_===void 0?void 0:_.some(function(I){var P;return(P=a.ops)===null||P===void 0?void 0:P.some(function(B){return _c.type.canOpAffectPath(I,B.p)})});if(M){var T;d.push(E);var S=x+1,D=n.actionOps[S];D&&((T=D.ops)===null||T===void 0?void 0:T.some(function(I){var P;return(P=E.ops)===null||P===void 0?void 0:P.some(function(B){return _c.type.canOpAffectPath(I,B.p)})}))&&d.push(D)}},h=o+1;h<n.actionOps.length;h++)v(h);var g=n.actionOps.filter(function(w){return d.find(function(x){return x.id===w.id})===void 0});return n.actionOps=g,n.currentActionIndex=n.actionOps.length,c}return!1})})}},{key:"getUndoOp",value:function(){var t=this.currentActionIndex-1;if(this.actionOps[t]){var n=Kt.exports.cloneDeep(this.actionOps[t]),e=Kt.exports.findLastIndex(this.actionOps,function(i){return i.id==n.id});e!==-1?n=this.actionOps[e]:e=t;var r=_c.type.invert(n.ops||[]);r.forEach(function(i,a){var o=(n.ops||[])[r.length-a-1];i.id=o.id,i.bi=o.bi});try{return{self:!0,ops:r,id:n.id,type:"undo",rangePath:n.rangePath,startRangePath:n.startRangePath}}catch(i){console.error(i)}}}},{key:"getRedoOp",value:function(){var t=this.currentActionIndex;if(this.actionOps[t]){var n=Kt.exports.cloneDeep(this.actionOps[t]),e=[];n.type==="undo"?(e=_c.type.invert(n.ops||[]),e.forEach(function(r,i){var a=(n.ops||[])[e.length-i-1];r.id=a.id,r.bi=a.bi})):e=n.ops;try{return{self:!0,ops:e,id:n.id,type:"redo",rangePath:n.rangePath,startRangePath:n.startRangePath}}catch(r){console.error(r)}}}},{key:"getCurrentRangePath",value:function(){var t=this.engine,n=t.ot,e=t.change,r=n.selection.currentRangePath;return r||e.range.get().toPath()}},{key:"getRangePathBeforeCommand",value:function(){return this.engine.change.getRangePathBeforeCommand()||this.getCurrentRangePath()}}]),b}(),jx=function(){function b(u){var t=this;Fe(this,b),this.engine=void 0,this.disabled=!1,this.engine=u,this.engine.container.on("keydown",function(n){return t.trigger(n)})}return Be(b,[{key:"match",value:function(t){var n=this;Object.keys(this.engine.plugin.components).every(function(e){var r=n.engine.plugin.components[e];if(r.hotkey){var i=r.hotkey(t),a=!1,o=[];if(typeof i=="string"&&yt(i,t)?a=!0:Array.isArray(i)?i.some(function(c){if(typeof c=="string"){if(yt(c,t))return a=!0,o=[],!0}else{var d=c.key,v=c.args;if(yt(d,t))return a=!0,o=Array.isArray(v)?v:[v],!0}return!1}):Jn(i)==="object"&&yt(i.key,t)&&(a=!0,o=Array.isArray(i.args)?i.args:[i.args]),a){var l;return t.preventDefault(),(l=n.engine.command).execute.apply(l,[e].concat(Hn(o))),!1}}return!0})}},{key:"trigger",value:function(t){this.disabled||this.match(t)}},{key:"enable",value:function(){this.disabled=!1}},{key:"disable",value:function(){this.disabled=!0}},{key:"destroy",value:function(){this.engine.container.off("keydown",this.trigger)}}]),b}(),fa=function(){function b(u){Fe(this,b),this.type="keydown",this.hotkey="",this.listeners=[],this.engine=void 0,this.engine=u}return Be(b,[{key:"on",value:function(t){this.listeners.push(t)}},{key:"unshiftOn",value:function(t){this.listeners.unshift(t)}},{key:"off",value:function(t){for(var n=0;n<this.listeners.length;n++)if(this.listeners[n]===t){this.listeners.splice(n,1);break}}},{key:"trigger",value:function(t){for(var n=0;n<this.listeners.length;n++){var e=this.listeners[n],r=e(t);if(r===!1)break}}},{key:"destroy",value:function(){this.listeners=[]}}]),b}(),Wx=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.type="keydown",n.hotkey="backspace",n}return Be(t,[{key:"trigger",value:function(e){var r=this.engine,i=r.change,a=r.container,o=i.range.get();if(i.cacheRangeBeforeCommand(),i.isEmpty()){e.preventDefault(),a.empty(),i.initValue();return}var l=o.commonAncestorNode,c=this.engine.card.find(l,!0),d=c!=null&&c.isEditable?c!=null&&c.getSelectionNodes?c.getSelectionNodes():[]:[];if(d.length>0){d.forEach(function(q){q.html("<p></br ></p>")}),i.apply(o.cloneRange().select(d[0],!0).collapse(!0));return}var v=o.startNode,h=o.startOffset;if(v.isEditable()){var g=v[0].childNodes[h-1],w=V(g);if(w.name==="br"){e.preventDefault(),w.remove(),i.apply(o);return}}for(var x=!0,_=0;_<this.listeners.length;_++){var E=this.listeners[_];if(x=E(e),x===!1)break}if(x===!1){this.engine.scrollNode&&o.scrollIntoViewIfNeeded(this.engine.container,this.engine.scrollNode);return}if(o.collapsed){var T,S=void 0;if(this.engine.node.isBlock(v)){var D=v[0].childNodes[h-1];S=V(D)}else v.name==="br"&&(S=v);if(((T=S)===null||T===void 0?void 0:T.name)==="br"){var I=S.prev(),P=S.next(),B=P==null?void 0:P.next(),$=I==null?void 0:I.prev();(I==null?void 0:I.name)!=="br"&&(P==null?void 0:P.name)==="br"&&(B==null?void 0:B.name)!=="br"?(e.preventDefault(),S.remove(),P.remove(),i.apply(o.shrinkToTextNode())):(P==null?void 0:P.name)!=="br"&&(I==null?void 0:I.name)==="br"&&($==null?void 0:$.name)!=="br"&&(e.preventDefault(),S.remove(),I.remove(),i.apply(o.shrinkToTextNode()))}}else{e.preventDefault();var M=v.prev();(M==null?void 0:M.name)==="br"&&M.remove(),i.delete(o),i.apply(o),this.engine.scrollNode&&o.scrollIntoViewIfNeeded(this.engine.container,this.engine.scrollNode);return}}}]),t}(fa),Ux=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.type="keydown",n.hotkey="delete",n}return Be(t,[{key:"getNext",value:function(e){return V(e).isEditable()?null:e.nextSibling?e.nextSibling:e.parentNode===null?null:this.getNext(e.parentNode)}},{key:"getRange",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(V(e).isEditable())return null;if(!r){var i=this.getNext(e);if(!i)return null;e=i}for(;e;){var a=V(e);if(a.attributes(Gt)){if(!e.ownerDocument)return null;var o=ln.create(this.engine,e.ownerDocument);return o.setStartAfter(e),o.collapse(!0),o}if(this.engine.node.isBlock(a)){if(!e.ownerDocument)return null;var l=ln.create(this.engine,e.ownerDocument);return l.select(a,!0).collapse(!0),l}if(a.name==="br"){var c;if(((c=e.parentNode)===null||c===void 0?void 0:c.childNodes.length)===1||!e.ownerDocument)return null;var d=ln.create(this.engine,e.ownerDocument);return d.setStartAfter(e),d.collapse(!0),d}if(e.nodeType===Node.TEXT_NODE){if(e.data.length===0)return this.getRange(e);if(!e.ownerDocument)return null;var v=ln.create(this.engine,e.ownerDocument);return v.setStart(e,1),v.collapse(!0),v}if(e.childNodes.length===0)return this.getRange(e);e=e.childNodes[0]}return null}},{key:"trigger",value:function(e){var r=this.engine.change;r.cacheRangeBeforeCommand();var i=r.range.get();if(!i.collapsed){e.preventDefault(),r.delete();return}var a=this.engine.card.find(i.startNode),o=!1,l;if(a){if(a.isLeftCursor(i.startNode)){e.preventDefault(),this.engine.card.select(a),r.delete();return}if(!a.isRightCursor(i.startNode))return;l=a.root[0]}else if(i.endContainer.nodeType===Node.TEXT_NODE){if(i.endContainer.data.length>i.endOffset){e.preventDefault();var c=i.cloneRange();c.setEnd(i.endContainer,i.endOffset+1),r.range.select(c),r.delete(),r.range.select(r.range.get().shrinkToTextNode());return}l=i.endContainer}else{if(i.endContainer.nodeType!==Node.ELEMENT_NODE)return;if(i.endContainer.childNodes.length===0)l=i.endContainer;else if(i.endOffset===0){var d;(i.endContainer.childNodes.length!==1||((d=i.endContainer.firstChild)===null||d===void 0?void 0:d.nodeName)!=="BR")&&(o=!0),l=i.endContainer.childNodes[i.endOffset]}else l=i.endContainer.childNodes[i.endOffset-1]}var v=this.getRange(l,o);if(v){e.preventDefault();var h=i.startOffset;h===1&&i.startContainer.childNodes.length===1&&i.startContainer.childNodes[0].nodeName==="BR"&&(h=0),v.setStart(i.startContainer,h),r.range.select(v),r.delete()}for(var g=0;g<this.listeners.length;g++){var w=this.listeners[g],x=w(e);if(x===!1)break}}}]),t}(fa),qx=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.type="keydown",n.hotkey="enter",n}return Be(t,[{key:"trigger",value:function(e){var r=this.engine.change;r.cacheRangeBeforeCommand();var i=r.range.get(),a=this.engine.block.closest(i.endNode);a.isEditable()&&this.engine.block.wrap("<p />");for(var o=0;o<this.listeners.length;o++){var l=this.listeners[o],c=l(e);if(c===!1)break}this.engine.scrollNode&&this.engine.change.range.get().scrollIntoViewIfNeeded(this.engine.container,this.engine.scrollNode),this.engine.trigger("select")}}]),t}(fa),$x=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.type="keydown",n.hotkey="tab",n}return Be(t,[{key:"trigger",value:function(e){var r=this.engine.node;e.preventDefault(),r.insertText("    ")}}]),t}(fa),Gx=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.hotkey="shift+tab",n}return t}(fa),Zx=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.type="keydown",n.hotkey="shift+enter",n}return Be(t,[{key:"trigger",value:function(e){var r=this.engine,i=r.change,a=r.inline,o=r.block;e.preventDefault(),i.cacheRangeBeforeCommand();var l=i.range.get();if(l.startNode.closest("li").length===0){var c;(c=this.engine.typing.getHandleListener("enter","keydown"))===null||c===void 0||c.trigger(e);return}else{var d=V("<br />");if(a.insert(d,l),o.isLastOffset(l,"end")){var v,h;if((!d.next()||((v=d.next())===null||v===void 0?void 0:v.name)!=="br")&&(!d.prev()||((h=d.prev())===null||h===void 0?void 0:h.name)!=="br")){var g=d.clone();d.after(g),l.select(g).collapse(!1)}}}for(var w=0;w<this.listeners.length;w++){var x=this.listeners[w],_=x(e);if(_===!1)break}i.apply(l),this.engine.scrollNode&&this.engine.change.range.get().scrollIntoViewIfNeeded(this.engine.container,this.engine.scrollNode)}}]),t}(fa),Yx=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.hotkey=function(a){return a.key===" "},n}return t}(fa),Kx=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.hotkey=function(a){return a.key==="/"||yt("/",a)||a.keyCode===229&&a.code==="Slash"},n}return t}(fa),Vx=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.hotkey="mod+a",n}return t}(fa),Qx=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.type="keydown",n.hotkey=function(a){return yt("left",a)||yt("shift+left",a)||yt("ctrl+a",a)||yt("ctrl+b",a)},n}return t}(fa),Xx=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.type="keydown",n.hotkey=function(a){return yt("right",a)||yt("shift+right",a)||yt("ctrl+e",a)||yt("ctrl+f",a)},n}return t}(fa),Jx=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.hotkey=function(a){return yt("up",a)||yt("ctrl+p",a)},n}return t}(fa),eC=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.hotkey=function(a){return yt("down",a)||yt("ctrl+n",a)},n}return t}(fa),tC=[{name:"default",handle:fa},{name:"enter",handle:qx,triggerName:"keydown:enter"},{name:"backspace",handle:Wx,triggerName:"keydown:backspace"},{name:"delete",handle:Ux,triggerName:"keydown:backspace"},{name:"tab",handle:$x,triggerName:"keydown:tab"},{name:"shift-tab",handle:Gx,triggerName:"keydown:shift-tab"},{name:"shift-enter",handle:Zx,triggerName:"keydown:shift-enter"},{name:"space",handle:Yx,triggerName:"keydown:space"},{name:"slash",handle:Kx,triggerName:"keydown:slash"},{name:"all",handle:Vx,triggerName:"keydown:all"},{name:"left",handle:Qx,triggerName:"keydown:left"},{name:"right",handle:Xx,triggerName:"keydown:right"},{name:"up",handle:Jx,triggerName:"keydown:up"},{name:"down",handle:eC,triggerName:"keydown:down"}],Ff=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.type="keyup",n}return t}(fa),nC=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.hotkey="enter",n}return t}(Ff),rC=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.type="keyup",n.hotkey="backspace",n}return Be(t,[{key:"trigger",value:function(e){var r=this.engine.change;if(r.isEmpty()){e.preventDefault();return}for(var i=!0,a=0;a<this.listeners.length;a++){var o=this.listeners[a];if(i=o(e),i===!1)break}}}]),t}(Ff),iC=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.hotkey="tab",n}return t}(Ff),aC=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.hotkey=function(a){return a.key===" "},n}return t}(Ff),oC=[{name:"default",handle:Ff},{name:"enter",handle:nC,triggerName:"keyup:enter"},{name:"backspace",handle:rC,triggerName:"keyup:backspace"},{name:"tab",handle:iC,triggerName:"keyup:tab"},{name:"space",handle:aC,triggerName:"keyup:space"}],sC=function(){function b(u){var t=this;Fe(this,b),this.engine=void 0,this.handleListeners=[],this.bindKeydown=function(e){var r=t.engine,i=r.readonly,a=r.card;if(i){yt("mod+a",e)&&e.preventDefault();return}e.target&&a.find(V(e.target))||t.trigger("keydown",e)},this.bindKeyup=function(e){var r=t.engine,i=r.readonly,a=r.card;i||e.target&&a.find(V(e.target))||t.trigger("keyup",e)},this.engine=u,tC.concat(oC).forEach(function(e){t.addHandleListener(e.name,e.handle,e.triggerName)});var n=u.container;n.on("keydown",this.bindKeydown),n.on("keyup",this.bindKeyup)}return Be(b,[{key:"addHandleListener",value:function(t,n,e,r){this.handleListeners.push({name:t,handle:new n(this.engine),triggerName:e,triggerParams:r})}},{key:"getHandleListener",value:function(t,n){var e;return(e=this.handleListeners.find(function(r){return r.name===t&&r.handle.type===n}))===null||e===void 0?void 0:e.handle}},{key:"removeHandleListener",value:function(t,n){for(var e=0;e<this.handleListeners.length;e++)if(this.handleListeners[e].name===t&&this.handleListeners[e].handle.type===n){this.handleListeners[e].handle.destroy(),this.handleListeners.splice(e,1);break}}},{key:"trigger",value:function(t,n){var e=this,r=this.handleListeners.filter(function(a){var o=a.handle;return o.type===t}).some(function(a){var o=a.name,l=a.handle,c=a.triggerName,d=a.triggerParams;if(o==="default"||!l.hotkey)return!1;if(typeof l.hotkey=="function"?l.hotkey(n):yt(l.hotkey,n)){var v,h=[n];return typeof d=="function"&&(h=d(e.engine,n)),(!c||(v=e.engine).trigger.apply(v,[c].concat(Hn(h)))!==!1)&&l.trigger(n),!0}return!1});if(r===!1){var i;(i=this.getHandleListener("default",t))===null||i===void 0||i.trigger(n)}}},{key:"destroy",value:function(){var t=this.engine.container;this.handleListeners=[],t.off("keydown",this.bindKeydown),t.off("keyup",this.bindKeyup)}}]),b}(),Jv="data-placeholder",qg="am-engine-placeholder",lC=function(){function b(u,t){var n=this;Fe(this,b),this.options=void 0,this.node=void 0,this._focused=!1,this._isMousedown=!1,this.onInput=function(e){var r=n.options.engine;if(!r.readonly&&!(e.target&&r.card.find(V(e.target)))){var i=r.change.range.get();i.handleBr(!0)}},this.onRealtimeChange=function(){var e=n.options.engine;e.isEmpty()?e.showPlaceholder():e.hidePlaceholder()},this.docMouseDown=function(e){e.target&&V(e.target).closest(Su).length>0&&(n._isMousedown=!0)},this.node=V(u),this.options=t,this._init(),this._focused=document.activeElement!==null&&this.node.equal(document.activeElement)}return Be(b,[{key:"_init",value:function(){var t,n=this,e=this.options,r=e.lang,i=e.tabIndex,a=e.className;this.node.attributes((t={},Yt(t,Hi,"true"),Yt(t,"role","textbox"),Yt(t,"autocorrect",r==="en-US"?"on":"off"),Yt(t,"autocomplete","off"),Yt(t,"spellcheck",r==="en-US"?"true":"false"),Yt(t,"data-gramm","false"),t)),i!==void 0&&this.node.attributes("tabindex",i),this.node.hasClass(Kv)||this.node.addClass(Kv),mt&&this.node.addClass(Hk),a!==void 0&&(Array.isArray(a)?a:a.split(/\s+/)).forEach(function(o){o.trim()!==""&&n.node.addClass(o)})}},{key:"init",value:function(){var t=this,n=this.options.engine;this.node.on("input",this.onInput),n.on("realtimeChange",this.onRealtimeChange),this.node.on("click",function(e){if(e.target&&!n.readonly&&ge(n)){var r,i,a,o=V(e.target);if(!o.isEditable())return;var l=V("<p><br /></p>"),c=o.closest("".concat(Nn,",").concat(Cu)),d=c.first(),v=c.last(),h=!1;if(d&&e.offsetY<(((r=d.get())===null||r===void 0?void 0:r.offsetTop)||0)&&!n.node.isEmptyWidthChild(d)?(c.prepend(l),h=!0):v&&e.offsetY>(((i=v.get())===null||i===void 0?void 0:i.offsetTop)||0)+(((a=v.get())===null||a===void 0?void 0:a.clientHeight)||0)&&!n.node.isEmptyWidthChild(v)&&(c.append(l),h=!0),h){var g=n.change.range.get();g.select(l,!0).collapse(!1),n.change.apply(g)}}}),document.addEventListener("mousedown",this.docMouseDown),this.node.on(mt?"touchstart":"mousedown",function(){t._isMousedown=!0,setTimeout(function(){t._focused||(t._focused=!0,n.trigger("focus")),t._isMousedown=!1},10)}),this.node.on("focus",function(){!n.ot.isStopped()&&n.isEmpty()&&n.change.initValue(),t._isMousedown=!1,t._focused=!0,n.trigger("focus")}),this.node.on("blur",function(){t._isMousedown||(t._isMousedown=!1,t._focused=!1,n.trigger("blur"))})}},{key:"isFocus",value:function(){return this._focused}},{key:"getNode",value:function(){return this.node}},{key:"setReadonly",value:function(t){this.node.attributes(Hi,t?"false":"true")}},{key:"showPlaceholder",value:function(){var t=this.options.placeholder;t&&(this.node.attributes(Yt({},Jv,t)),this.node.addClass(qg))}},{key:"hidePlaceholder",value:function(){this.node.removeAttributes(Jv),this.node.removeClass(qg)}},{key:"destroy",value:function(){var t=this,n=this.options,e=n.className,r=n.engine;r.off("realtimeChange",this.onRealtimeChange),document.removeEventListener("mousedown",this.docMouseDown),this.node.removeAttributes(Hi),this.node.removeAttributes("role"),this.node.removeAttributes("autocorrect"),this.node.removeAttributes("autocomplete"),this.node.removeAttributes("spellcheck"),this.node.removeAttributes("data-gramm"),this.node.removeAttributes("tabindex"),this.node.removeAttributes(Jv),this.options.className&&(Array.isArray(e)?e:(e||"").split(/\s+/)).forEach(function(i){i.trim()!==""&&t.node.removeClass(i)}),r.card.closest(this.node)&&this.node.removeClass(Kv),this.node.removeAllEvents()}}]),b}(),uC=function(){function b(u){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Fe(this,b),this.data={},this.locale="zh-CN",this.locale=u,this.data=t}return Be(b,[{key:"add",value:function(t){this.data=Kt.exports.merge(this.data,t)}},{key:"get",value:function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];var r=function i(){for(var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,o=arguments.length>1?arguments[1]:void 0,l=a;l<n.length;l++){var c=o[n[l]];return Jn(c)==="object"?i(l+1,c):c||""}return o};return r(0,this.data[this.locale])}}]),b}(),dC={dnd:{title:"Drag to reposition"},copy:{title:"Copy",success:"Copied successfully",error:"Copy error"},delete:{title:"Delete"},copyAnchor:{title:"Copy anchor link"},link:{placeholder:"Please enter a link or anchor and press Enter to confirm",save:"Apply",edit:"Change",delete:"Remove link",open:"Open link",text:"link"},copyContent:{title:"copy content"},maximize:{title:"Maximize",back:"Back to document"},expand:{title:"Embedded preview"},collapse:{title:"Compact display"},card:{lockAlert:"Please wait for the other user to finish editing"},preferences:{title:"Preferences"},download:{title:"Download"},more:{title:"More"},checkMarkdown:{title:"It is detected that the paste content conforms to the Markdown syntax. Do you need to do style conversion?"},searchEmtpy:{title:"No matching card"}},cC={dnd:{title:"\u62D6\u52A8\u8C03\u6574\u4F4D\u7F6E"},copy:{title:"\u590D\u5236",success:"\u590D\u5236\u6210\u529F",error:"\u590D\u5236\u5931\u8D25"},delete:{title:"\u5220\u9664"},copyAnchor:{title:"\u590D\u5236\u951A\u70B9\u94FE\u63A5"},link:{placeholder:"\u8BF7\u8F93\u5165\u94FE\u63A5\u6216\u951A\u70B9\uFF0C\u56DE\u8F66\u786E\u8BA4",save:"\u4FDD\u5B58",edit:"\u7F16\u8F91",delete:"\u53D6\u6D88\u94FE\u63A5",open:"\u6253\u5F00\u94FE\u63A5",text:"\u94FE\u63A5"},copyContent:{title:"\u590D\u5236\u5185\u5BB9"},maximize:{title:"\u6700\u5927\u5316",back:"\u8FD4\u56DE\u6587\u6863"},expand:{title:"\u5D4C\u5165\u9884\u89C8"},collapse:{title:"\u7D27\u51D1\u5C55\u793A"},card:{lockAlert:"\u8BF7\u7B49\u5F85\u5BF9\u65B9\u7F16\u8F91\u5B8C\u6BD5\u540E\uFF0C\u518D\u8FDB\u5165\u7F16\u8F91"},preferences:{title:"\u8BBE\u7F6E"},download:{title:"\u4E0B\u8F7D"},more:{title:"\u66F4\u591A"},checkMarkdown:{title:"\u68C0\u6D4B\u5230\u7C98\u8D34\u5185\u5BB9\u7B26\u5408 Markdown \u8BED\u6CD5\uFF0C\u662F\u5426\u9700\u8981\u8F6C\u6362\uFF1F"},searchEmtpy:{title:"\u65E0\u5339\u914D\u5361\u7247"}},fC={"en-US":dC,"zh-CN":cC},Rr=function b(u,t){Fe(this,b),this.editor=void 0,this.options=void 0,this.kind="plugin",this.name=this.constructor.pluginName,this.disabled=void 0,this.editor=u,this.options=t||{};var n=this.options.disabled;this.disabled=n};Rr.pluginName=void 0;var av=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.kind="element",n.sechamCache=void 0,n.tagName=void 0,n.style=void 0,n.attributes=void 0,n.variable=void 0,n}return Be(t,[{key:"init",value:function(){var e=this.editor,r=e.schema,i=e.conversion;r.add(this.schema()),this.conversion&&this.conversion().forEach(function(a){var o=a.from,l=a.to;i.add(o,l)})}},{key:"setStyle",value:function(e){for(var r=this,i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];Ht(e)&&(e=V(e)),this.style&&Object.keys(this.style).forEach(function(l){var c,d=r.style[l];Jn(d)==="object"&&(d=d.value),(c=d.match(/@var\d/g))===null||c===void 0||c.forEach(function(v){var h=parseInt(v.replace("@var",""),10);d=d.replace(new RegExp(v,"gm"),a[h]||"")}),e.css(l,d)})}},{key:"setAttributes",value:function(e){for(var r=this,i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];Ht(e)&&(e=V(e)),this.attributes&&Object.keys(this.attributes).forEach(function(l){var c,d=r.attributes[l];Jn(d)==="object"&&(d=d.value),(c=d.match(/@var\d/g))===null||c===void 0||c.forEach(function(v){var h=parseInt(v.replace("@var",""),10);d=d.replace(new RegExp(v,"gm"),a[h]||"")}),e.attributes(l,d)})}},{key:"getStyle",value:function(e){var r=this;Ht(e)&&(e=V(e));var i={};return this.style&&this.isSelf(e)&&Object.keys(this.style).forEach(function(a){e=e;var o=a.toLowerCase().indexOf("color")>-1?to(e.css(a)||"").toHexString():e.css(a),l=r.style[a];Jn(l)==="object"&&(o=l.format(o)),o&&(i[a]=o)}),i}},{key:"getAttributes",value:function(e){var r=this;Ht(e)&&(e=V(e));var i={};return this.attributes&&this.isSelf(e)&&Object.keys(this.attributes).forEach(function(a){var o=e.attributes(a),l=r.attributes[a];Jn(l)==="object"&&(o=l.format(o)),o&&(i[a]=o)}),i}},{key:"isSelf",value:function(e){Ht(e)&&(e=V(e));var r=this.schema();return Array.isArray(r)&&(r=r.find(function(i){var a=i.name;return a===e.name})),r?(Array.isArray(this.tagName)?this.tagName.indexOf(e.name)>-1:e.name===this.tagName)&&this.editor.schema.checkNode(e,r.attributes):!1}},{key:"schema",value:function(){var e=this;if(this.sechamCache)return this.sechamCache;var r={};if(this.attributes&&Object.keys(this.attributes).forEach(function(o){var l,c=e.attributes[o];Jn(c)==="object"&&(c=c.value),r[o]=c,(l=c.match(/@var\d/g))===null||l===void 0||l.forEach(function(d){if(!e.variable)throw"Please specify the variable type";r[o]=e.variable[d]})}),this.style){var i={};Object.keys(this.style).forEach(function(o){var l,c=e.style[o];Jn(c)==="object"&&(c=c.value),(l=c.match(/@var\d/g))===null||l===void 0||l.forEach(function(d){if(!e.variable)throw"Please specify the variable type";i[o]=e.variable[d]})}),r=Ie(Ie({},r),{},{style:i})}if(this.sechamCache={type:this.kind,attributes:r},typeof this.tagName=="string")this.sechamCache.name=this.tagName.toLowerCase();else if(Array.isArray(this.tagName)){var a=[];this.tagName.forEach(function(o){a.push(Ie(Ie({},e.sechamCache),{},{name:o}))}),this.sechamCache=a}return this.sechamCache}},{key:"createElement",value:function(){for(var e=V("<".concat(this.tagName," />")),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return this.setStyle.apply(this,[e].concat(i)),this.setAttributes.apply(this,[e].concat(i)),e}}]),t}(Rr),hC=function(u){return u.kind==="element"},Op=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.kind="block",n.allowIn=void 0,n.disableMark=void 0,n.canMerge=void 0,n}return Be(t,[{key:"schema",value:function(){var e=this,r=At(St(t.prototype),"schema",this).call(this);return Array.isArray(r)?r.map(function(i){return Ie(Ie({},i),{},{allowIn:e.allowIn})}):Ie(Ie({},r),{},{allowIn:this.allowIn,canMerge:this.canMerge})}}]),t}(av),mp=function(u){return u.kind==="block"},Nm=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.kind="inline",n.markdown=void 0,n.pasteMarkdown=function(a){var o=n.checkMarkdown(a);if(!!o){var l=o.reg,c=o.match;if(!!c){for(var d="",v=a.clone(!0).get();v.textContent&&(c=l.exec(v.textContent));){var h,g=v.splitText(c.index);d+=v.textContent,v=g.splitText(c[0].length);var w=V("<".concat(n.tagName,">").concat(c[2],"</").concat(n.tagName,">"));n.setStyle(w),n.setAttributes(w),d+=(h=w.get())===null||h===void 0?void 0:h.outerHTML}d+=v.textContent,a.text(d)}}},n}return Be(t,[{key:"init",value:function(){At(St(t.prototype),"init",this).call(this);var e=this.editor;ge(e)&&this.markdown&&e.on("paste:markdown",this.pasteMarkdown)}},{key:"execute",value:function(){var e=this.editor;if(!!ge(e)){for(var r=V("<".concat(this.tagName," />")),i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];this.setStyle.apply(this,[r].concat(a)),this.setAttributes.apply(this,[r].concat(a));var l=e.inline,c=this.isTrigger?this.isTrigger.apply(this,a):!this.queryState();c?l.wrap(r):l.unwrap()}}},{key:"queryState",value:function(){var e=this,r=this.editor;if(!!ge(r)){var i=r.change;if(!this.style&&!this.attributes)return i.inlines.some(function(o){return o.name===e.tagName});var a=[];return i.inlines.forEach(function(o){a.push.apply(a,Hn(Object.values(e.getStyle(o)))),a.push.apply(a,Hn(Object.values(e.getAttributes(o))))}),a.length===0?void 0:a}}},{key:"triggerMarkdown",value:function(e,r,i){var a=this.editor;if(!(!ge(a)||!this.markdown)){var o=a.change,l=a.command,c=this.markdown.replace(/(\*|\^|\$)/g,"\\$1"),d=new RegExp("^(.*)".concat(c,"(.+?)").concat(c,"$")).exec(r);if(d){var v=o.range.get(),h=d[1]&&/\S$/.test(d[1]),g=d[2];e.preventDefault();var w=r.substr(0,r.length-g.length-2*this.markdown.length);i.get().splitText((w+g).length+2*this.markdown.length),h&&(w+=" "),i[0].nodeValue=w+g,v.setStart(i[0],w.length),v.setEnd(i[0],(w+g).length),o.range.select(v),l.execute(this.constructor.pluginName),v=o.range.get(),v.collapse(!1);var x=a.inline.closest(v.startNode),_=x.next();return x&&_&&_.isText()&&/^\u200B/g.test(_.text())&&(v.setStart(_,1),v.setEnd(_,1)),o.range.select(v),a.node.insertText("\xA0"),!1}}}},{key:"checkMarkdown",value:function(e){if(!(!ge(this.editor)||!this.markdown)&&!!e.isText()){var r=e.text();if(!!r){var i=this.markdown.replace(/(\*|\^|\$)/g,"\\$1"),a=new RegExp("(".concat(i,"([^").concat(i,`\r
]+)`).concat(i,")"));return{reg:a,match:a.exec(r)}}}}},{key:"destroy",value:function(){ge(this.editor)&&this.markdown&&this.editor.on("paste:markdown",this.pasteMarkdown)}}]),t}(av),Dm=function(u){return u.kind==="inline"},vC=`.am-engine ol, .am-engine-view ol, .am-engine ul, .am-engine-view ul {\r
    margin: 0 0 0 3px;\r
    padding: 0;\r
    list-style: none;\r
}\r
\r
.am-engine ol ul,.am-engine-view ol ul,.am-engine ul ul,.am-engine-view ul ul,.am-engine ol ol,.am-engine-view ol ol,.am-engine ul ol,.am-engine-view ul ol {\r
	margin-left: 0;\r
}\r
\r
.am-engine ol ul li,.am-engine-view ol ul li,.am-engine ul ul li,.am-engine-view ul ul li,.am-engine ol ol li,.am-engine-view ol ol li,.am-engine ul ol li,.am-engine-view ul ol li {\r
	margin-left: 2em;\r
}\r
\r
.am-engine ol ol[data-indent-new="0"],.am-engine-view ol ol[data-indent-new="0"],.am-engine ul ol[data-indent-new="0"],.am-engine-view ul ol[data-indent-new="0"],.am-engine ol ol[data-indent-new="3"],.am-engine-view ol ol[data-indent-new="3"],.am-engine ul ol[data-indent-new="3"],.am-engine-view ul ol[data-indent-new="3"],.am-engine ol ol[data-indent-new="6"],.am-engine-view ol ol[data-indent-new="6"],.am-engine ul ol[data-indent-new="6"],.am-engine-view ul ol[data-indent-new="6"] {\r
	list-style-type: decimal;\r
}\r
\r
.am-engine ol ol[data-indent-new="1"],.am-engine-view ol ol[data-indent-new="1"],.am-engine ul ol[data-indent-new="1"],.am-engine-view ul ol[data-indent-new="1"],.am-engine ol ol[data-indent-new="4"],.am-engine-view ol ol[data-indent-new="4"],.am-engine ul ol[data-indent-new="4"],.am-engine-view ul ol[data-indent-new="4"],.am-engine ol ol[data-indent-new="7"],.am-engine-view ol ol[data-indent-new="7"],.am-engine ul ol[data-indent-new="7"],.am-engine-view ul ol[data-indent-new="7"] {\r
	list-style-type: lower-alpha;\r
}\r
\r
.am-engine ol ol[data-indent-new="2"],.am-engine-view ol ol[data-indent-new="2"],.am-engine ul ol[data-indent-new="2"],.am-engine-view ul ol[data-indent-new="2"],.am-engine ol ol[data-indent-new="5"],.am-engine-view ol ol[data-indent-new="5"],.am-engine ul ol[data-indent-new="5"],.am-engine-view ul ol[data-indent-new="5"],.am-engine ol ol[data-indent-new="8"],.am-engine-view ol ol[data-indent-new="8"],.am-engine ul ol[data-indent-new="8"],.am-engine-view ul ol[data-indent-new="8"] {\r
	list-style-type: lower-roman;\r
}\r
\r
.am-engine ol ul[data-indent-new="3"],.am-engine-view ol ul[data-indent-new="3"],.am-engine ul ul[data-indent-new="3"],.am-engine-view ul ul[data-indent-new="3"],.am-engine ol ul[data-indent-new="6"],.am-engine-view ol ul[data-indent-new="6"],.am-engine ul ul[data-indent-new="6"],.am-engine-view ul ul[data-indent-new="6"] {\r
	list-style-type: disc;\r
}\r
\r
.am-engine ol ul[data-indent-new="1"],.am-engine-view ol ul[data-indent-new="1"],.am-engine ul ul[data-indent-new="1"],.am-engine-view ul ul[data-indent-new="1"],.am-engine ol ul[data-indent-new="4"],.am-engine-view ol ul[data-indent-new="4"],.am-engine ul ul[data-indent-new="4"],.am-engine-view ul ul[data-indent-new="4"],.am-engine ol ul[data-indent-new="7"],.am-engine-view ol ul[data-indent-new="7"],.am-engine ul ul[data-indent-new="7"],.am-engine-view ul ul[data-indent-new="7"] {\r
	list-style-type: circle;\r
}\r
\r
.am-engine ol ul[data-indent-new="2"],.am-engine-view ol ul[data-indent-new="2"],.am-engine ul ul[data-indent-new="2"],.am-engine-view ul ul[data-indent-new="2"],.am-engine ol ul[data-indent-new="5"],.am-engine-view ol ul[data-indent-new="5"],.am-engine ul ul[data-indent-new="5"],.am-engine-view ul ul[data-indent-new="5"],.am-engine ol ul[data-indent-new="8"],.am-engine-view ol ul[data-indent-new="8"],.am-engine ul ul[data-indent-new="8"],.am-engine-view ul ul[data-indent-new="8"] {\r
	list-style-type: square;\r
}\r
\r
.am-engine li,.am-engine-view li {\r
	margin-left: 23px;\r
    position: relative;\r
}\r
\r
.am-engine ol,.am-engine-view ol,.am-engine ol[data-indent="3"],.am-engine-view ol[data-indent="3"],.am-engine ol[data-indent="6"],.am-engine-view ol[data-indent="6"] {\r
	list-style-type: decimal;\r
}\r
\r
.am-engine ol[data-indent="1"],.am-engine-view ol[data-indent="1"],.am-engine ol[data-indent="4"],.am-engine-view ol[data-indent="4"],.am-engine ol[data-indent="7"],.am-engine-view ol[data-indent="7"] {\r
	list-style-type: lower-alpha;\r
}\r
\r
.am-engine ol[data-indent="2"],.am-engine-view ol[data-indent="2"],.am-engine ol[data-indent="5"],.am-engine-view ol[data-indent="5"],.am-engine ol[data-indent="8"],.am-engine-view ol[data-indent="8"] {\r
	list-style-type: lower-roman;\r
}\r
\r
.am-engine ul,.am-engine-view ul,.am-engine ul[data-indent="3"],.am-engine-view ul[data-indent="3"],.am-engine ul[data-indent="6"],.am-engine-view ul[data-indent="6"] {\r
	list-style-type: disc;\r
}\r
\r
.am-engine ul[data-indent="1"],.am-engine-view ul[data-indent="1"],.am-engine ul[data-indent="4"],.am-engine-view ul[data-indent="4"],.am-engine ul[data-indent="7"],.am-engine-view ul[data-indent="7"] {\r
	list-style-type: circle;\r
}\r
\r
.am-engine ul[data-indent="2"],.am-engine-view ul[data-indent="2"],.am-engine ul[data-indent="5"],.am-engine-view ul[data-indent="5"],.am-engine ul[data-indent="8"],.am-engine-view ul[data-indent="8"] {\r
	list-style-type: square;\r
}\r
\r
.am-engine ol[data-indent="1"],.am-engine-view ol[data-indent="1"],.am-engine ul[data-indent="1"],.am-engine-view ul[data-indent="1"] {\r
	padding-left: 2em;\r
}\r
\r
.am-engine ol[data-indent="2"],.am-engine-view ol[data-indent="2"],.am-engine ul[data-indent="2"],.am-engine-view ul[data-indent="2"] {\r
	padding-left: 4em;\r
}\r
\r
.am-engine ol[data-indent="3"],.am-engine-view ol[data-indent="3"],.am-engine ul[data-indent="3"],.am-engine-view ul[data-indent="3"] {\r
	padding-left: 6em;\r
}\r
\r
.am-engine ol[data-indent="4"],.am-engine-view ol[data-indent="4"],.am-engine ul[data-indent="4"],.am-engine-view ul[data-indent="4"] {\r
	padding-left: 8em;\r
}\r
\r
.am-engine ol[data-indent="5"],.am-engine-view ol[data-indent="5"],.am-engine ul[data-indent="5"],.am-engine-view ul[data-indent="5"] {\r
	padding-left: 10em;\r
}\r
\r
.am-engine ol[data-indent="6"],.am-engine-view ol[data-indent="6"],.am-engine ul[data-indent="6"],.am-engine-view ul[data-indent="6"] {\r
	padding-left: 12em;\r
}\r
\r
.am-engine ol[data-indent="7"],.am-engine-view ol[data-indent="7"],.am-engine ul[data-indent="7"],.am-engine-view ul[data-indent="7"] {\r
	padding-left: 14em;\r
}\r
\r
.am-engine ol[data-indent="8"],.am-engine-view ol[data-indent="8"],.am-engine ul[data-indent="8"],.am-engine-view ul[data-indent="8"] {\r
	padding-left: 16em;\r
}\r
\r
.am-engine .data-list,.am-engine-view .data-list {\r
	color: #262626;\r
	text-indent: 0;\r
}\r
\r
.am-engine .data-list-item,.am-engine-view .data-list-item {\r
    line-height: inherit;\r
    position: relative;\r
    list-style: none;\r
    text-indent: 0;\r
}`;Mo(vC);var zp=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.cardName=void 0,n.isPasteList=!1,n.pasteBefore=function(a){if(!(!n.cardName||!n.editor)){var o=n.editor.list,l=V(a),c=l.allChildren();c.forEach(function(d){if(d.name==="li"&&d.hasClass(o.CUSTOMZIE_LI_CLASS)){var v;if(!((v=d.first())===null||v===void 0)&&v.isCard())d.closest("ul").addClass(o.CUSTOMZIE_UL_CLASS);else{d.removeClass(o.CUSTOMZIE_LI_CLASS),d.closest("ul").removeClass(o.CUSTOMZIE_UL_CLASS);return}}}),n.isPasteList=c.some(function(d){return d.name==="li"})}},n.pasteInsert=function(){if(!(!n.cardName||!ge(n.editor))){var a=n.editor,o=a.change,l=a.list,c=o.range.get(),d=c.getRootBlock(),v=d==null?void 0:d.next(),h=v==null?void 0:v.find("li.".concat(l.CUSTOMZIE_LI_CLASS));h&&h.length>0&&h.each(function(g){var w=V(g);w.find("[".concat(Gt,"=").concat(n.cardName,"],[").concat(_n,"=").concat(n.cardName,"]")).length===0&&l.addReadyCardToCustomize(w,n.cardName)})}},n.pasteAfter=function(){if(n.isPasteList){var a;(a=n.editor)===null||a===void 0||a.list.merge()}},n}return Be(t,[{key:"init",value:function(){At(St(t.prototype),"init",this).call(this);var e=this.editor;ge(e)&&(e.on("paste:before",this.pasteBefore),e.on("paste:insert",this.pasteInsert),e.on("paste:after",this.pasteAfter))}},{key:"queryState",value:function(){var e=this.editor;return ge(e)?e.list.getPluginNameByNodes(e.change.blocks)===this.constructor.pluginName:!1}},{key:"destroy",value:function(){ge(this.editor)&&(this.editor.off("paste:before",this.pasteBefore),this.editor.off("paste:insert",this.pasteInsert),this.editor.off("paste:after",this.pasteAfter))}}]),t}(Op),is=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.kind="mark",n.markdown=void 0,n.copyOnEnter=void 0,n.followStyle=!0,n.combineValueByWrap=!1,n.mergeLeval=1,n.pasteMarkdown=function(a){var o=n.checkMarkdown(a);if(!!o){var l=o.reg,c=o.match;if(!!c){for(var d="",v=a.clone(!0).get();v.textContent&&(c=l.exec(v.textContent));){var h,g=v.splitText(c.index);d+=v.textContent,v=g.splitText(c[0].length);var w=V("<".concat(n.tagName,">").concat(c[2],"</").concat(n.tagName,">"));n.setStyle(w),n.setAttributes(w),d+=(h=w.get())===null||h===void 0?void 0:h.outerHTML}d+=v.textContent,a.text(d)}}},n}return Be(t,[{key:"init",value:function(){At(St(t.prototype),"init",this).call(this);var e=this.editor;ge(e)&&this.markdown&&e.on("paste:markdown",this.pasteMarkdown)}},{key:"execute",value:function(){var e=this.editor;if(!!ge(e)){var r=e.change,i=e.mark,a=this.createElement.apply(this,arguments),o=this.isTrigger?this.isTrigger.apply(this,arguments):!this.queryState();if(o){if(!this.followStyle&&r.range.get().collapsed)return;i.wrap(a)}else i.unwrap(a)}}},{key:"queryState",value:function(){var e=this;if(!!ge(this.editor)){var r=this.editor.change;if(!this.style&&!this.attributes)return r.marks.some(function(a){return a.name===e.tagName});var i=[];return r.marks.forEach(function(a){i.push.apply(i,Hn(Object.values(e.getStyle(a)))),i.push.apply(i,Hn(Object.values(e.getAttributes(a))))}),i.length===0?void 0:i}}},{key:"schema",value:function(){var e=At(St(t.prototype),"schema",this).call(this);return Array.isArray(e)?e.map(function(r){return Ie({},r)}):Ie({},e)}},{key:"triggerMarkdown",value:function(e,r,i){var a=this.editor;if(!(!ge(a)||!this.markdown)){var o=a.block,l=a.change,c=a.command,d=this.markdown.replace(/(\*|\^|\$)/g,"\\$1"),v=new RegExp("^(.*)".concat(d,"(.+?)").concat(d,"$")).exec(r);if(v){var h=o.findPlugin(i),g=this.constructor.pluginName;if(h&&h.disableMark&&h.disableMark.indexOf(g)>-1)return;var w=l.range.get(),x=v[1]&&/\S$/.test(v[1]),_=v[2];e.preventDefault();var E=r.substr(0,r.length-_.length-2*this.markdown.length);return i.get().splitText((E+_).length+2*this.markdown.length),x&&(E+=" "),i[0].nodeValue=E+_,w.setStart(i[0],E.length),w.setEnd(i[0],(E+_).length),l.range.select(w),c.execute(this.constructor.pluginName),w=l.range.get(),w.collapse(!1),l.range.select(w),a.node.insertText("\xA0"),!1}}}},{key:"checkMarkdown",value:function(e){if(!(!ge(this.editor)||!this.markdown)&&!!e.isText()){var r=e.text();if(!!r){var i=this.markdown.replace(/(\*|\^|\$)/g,"\\$1"),a=i==="_"?new RegExp("\\s+(".concat(i,"([^").concat(i,"\\r\\n]+)").concat(i,")\\s+")):new RegExp("(".concat(i,"([^").concat(i,"\\r\\n]+)").concat(i,")")),o=a.exec(r);return{reg:a,match:o}}}}},{key:"destroy",value:function(){ge(this.editor)&&this.markdown&&this.editor.off("paste:markdown",this.pasteMarkdown)}}]),t}(av),Xh=function(u){return u.kind==="mark"},pC=function(){function b(u){Fe(this,b),this.data={},this.components={},this.editor=void 0,this.editor=u}return Be(b,[{key:"init",value:function(t,n){var e=this;t.forEach(function(r){e.data[r.pluginName]=r;var i=new r(e.editor,n[r.pluginName]);e.components[r.pluginName]=i,i.init&&i.init()})}},{key:"add",value:function(t,n){if(this.data[t.pluginName]=t,n=Ie({},n),ge(this.editor)){var e=new t(this.editor,n);e.init&&e.init(),this.components[t.pluginName]=e}}},{key:"findPlugin",value:function(t){var n=this.components[t];if(!!n)return n}},{key:"findElementPlugin",value:function(t){var n=this.findPlugin(t);if(!!n&&hC(n))return n}},{key:"findMarkPlugin",value:function(t){var n=this.findPlugin(t);if(!!n&&Xh(n))return n}},{key:"findInlinePlugin",value:function(t){var n=this.findPlugin(t);if(!!n&&Dm(n))return n}},{key:"findBlockPlugin",value:function(t){var n=this.findPlugin(t);if(!!n&&mp(n))return n}},{key:"each",value:function(t){var n=this;Object.keys(this.data).forEach(function(e,r){t&&t(e,n.data[e],r)})}},{key:"destroy",value:function(){var t=this;Object.keys(this.components).forEach(function(n){var e=t.components[n];e.destroy&&e.destroy()})}}]),b}(),gC=function(){function b(u){Fe(this,b),this.editor=void 0,this.editor=u}return Be(b,[{key:"queryEnabled",value:function(t){var n=this.editor.plugin.components[t];return!n||n.disabled||(!ge(this.editor)||this.editor.readonly||!this.editor.isFocus())&&n.disabled!==!1?!1:this.editor.card.active?!!((Xh(n)||n.kind==="plugin")&&this.editor.card.active.executeMark||this.editor.card.active.isEditable):!0}},{key:"queryState",value:function(t){var n=this.editor.plugin.components[t];if(n&&n.queryState)try{for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return n.queryState(r)}catch(a){console.error(a)}}},{key:"handleExecuteBefore",value:function(){var t;if(ge(this.editor)){t=this.editor.change;var n=t.range.get();if(!n.commonAncestorNode.isRoot()&&!n.commonAncestorNode.inEditor()){var e=n.commonAncestorNode.closest(Su),r=void 0;if(e.length>0){var i=e.attributes(Dc);if(i){var a=this.editor.card;r=a.find(i),r&&a.select(r)}}r||this.editor.focus()}t.cacheRangeBeforeCommand()}return t}},{key:"execute",value:function(t){var n=this.editor.plugin.components[t];if(n&&n.execute){for(var e,r=this.handleExecuteBefore(),i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];(e=this.editor).trigger.apply(e,["beforeCommandExecute",t].concat(a));try{var l,c=n.execute.apply(n,a);return r==null||r.combinText(),r==null||r.onSelect(),(l=this.editor).trigger.apply(l,["afterCommandExecute",t].concat(a)),c}catch(d){console.error(d)}}}},{key:"executeMethod",value:function(t,n){var e=this.editor.plugin.components[t];if(e&&e[n])try{for(var r=ge(this.editor)?this.editor.change:null,i=arguments.length,a=new Array(i>2?i-2:0),o=2;o<i;o++)a[o-2]=arguments[o];var l=e[n].apply(e,a);return r==null||r.combinText(),l}catch(c){console.log(c)}}}]),b}(),mC=["blocks","inlines","marks","globals"],bC=function(){function b(){Fe(this,b),this._all=[],this._typeMap={},this.data={blocks:[],inlines:[],marks:[],globals:{}}}return Be(b,[{key:"add",value:function(t){var n=this;t=Kt.exports.cloneDeep(t),Array.isArray(t)||(t=[t]),t.forEach(function(l){yC(l)?(l.attributes&&Object.keys(l.attributes).forEach(function(c){!n.data.globals[l.type]||(c==="style"?Object.keys(l.attributes.style).forEach(function(d){n.data.globals[l.type][c]&&n.data.globals[l.type][c][d]===l.attributes.style[d]&&delete l.attributes.style[d]}):n.data.globals[l.type][c]===l.attributes[c]&&delete l.attributes[c])}),l.type==="block"?n.data.blocks.push(l):l.type==="inline"?n.data.inlines.push(l):l.type==="mark"&&n.data.marks.push(l)):n.data["".concat(l.type,"s")]&&(n.data.globals[l.type]=Kt.exports.merge(Ie({},n.data.globals[l.type]),l.attributes))});var e=function(c){var d=c.attributes||{},v=d.style||{},h=0,g=0;return Object.keys(d).forEach(function(w){var x=d[w];ep(x)&&x.required&&h++}),Object.keys(v).forEach(function(w){var x=v[w];ep(x)&&x.required&&g++}),[h,g]},r=this.data,i=r.blocks,a=r.marks,o=r.inlines;this._all=[].concat(Hn(i),Hn(a),Hn(o)).sort(function(l,c){var d=e(l),v=Ta(d,2),h=v[0],g=v[1],w=e(c),x=Ta(w,2),_=x[0],E=x[1];return h>_?-1:h===_?g===E?0:g>E?-1:1:1})}},{key:"remove",value:function(t){var n=this._all.findIndex(function(r){return Kt.exports.isEqual(r,t)});n>-1&&this._all.splice(n,1);var e=this.data["".concat(t.type,"s")];e&&(n=e.findIndex(function(r){return Kt.exports.isEqual(r,t)}),n>-1&&e.splice(n,1)),this._typeMap={}}},{key:"clone",value:function(){var t=new b;return t._all=Kt.exports.cloneDeep(this._all),t._typeMap=Kt.exports.cloneDeep(this._typeMap),t.data=Kt.exports.cloneDeep(this.data),t}},{key:"find",value:function(t){var n=this,e=[];return mC.forEach(function(r){if(r!=="globals"){var i=n.data[r].filter(t);e.push.apply(e,Hn(i))}}),e}},{key:"getType",value:function(t,n){if(t.type===Node.ELEMENT_NODE){var e=t.attributes(fn);if(e?e=e.split("-")[0]:e=Lp(t,!1),!!this._typeMap[e]&&(!n||n(this._typeMap[e])))return this._typeMap[e].type;var r=this.getRule(t,n);return r&&(this._typeMap[e]=r),r==null?void 0:r.type}}},{key:"getRule",value:function(t,n){var e=this;if(n=n||function(r){return r.name===t.name},t.type===Node.ELEMENT_NODE)return this._all.find(function(r){return n(r)&&e.checkNode(t,r.attributes)})}},{key:"checkNode",value:function(t){var n=this,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.attributes(),i=t.css(),a=e.style||{},o=Object.keys(e).every(function(l){return l==="style"?!0:n.checkValue(e,l,r[l])});return o?Object.keys(a).every(function(l){return n.checkValue(a,l,i[l])}):!1}},{key:"checkValue",value:function(t,n,e,r){if(!t[n])return!1;var i=t[n];if(ep(i)){if(e===void 0)return!i.required;i=i.value}else if(!r||e===void 0)return!0;if(typeof i=="string"&&i.charAt(0)==="@")switch(i){case"@number":i=/^-?\d+(\.\d+)?$/;break;case"@length":i=/^-?\d+(\.\d+)?(\w*|%)$/;break;case"@color":i=/^(rgb(.+?)|#\w{3,6}|\w+)$/i;break;case"@url":i=Em;break}return typeof i=="string"?i==="*"?!0:n==="class"?(e||"").split(/\s+/).some(function(a){return a.trim()===i}):i===e:Array.isArray(i)?n==="class"?(e||"").split(/\s+/).every(function(a){return a.trim()===""?!0:i.indexOf(a.trim())>-1}):i.indexOf(e)>-1:Jn(i)==="object"&&typeof i.test=="function"?n==="class"?(e||"").split(/\s+/).every(function(a){return a.trim()===""?!0:i.test(a.trim())}):i.test(e||""):typeof i=="function"?i(e):!0}},{key:"filterStyles",value:function(t,n,e){var r=this;Object.keys(t).forEach(function(i){var a;(!(!((a=n.attributes)===null||a===void 0)&&a.style)||!r.checkValue(n.attributes.style,i,t[i],!0))&&(e&&e(i,t[i]),delete t[i])})}},{key:"filterAttributes",value:function(t,n,e){var r=this;Object.keys(t).forEach(function(i){(!n.attributes||!r.checkValue(n.attributes,i,t[i],!0))&&(e&&e(i,t[i]),delete t[i])})}},{key:"filter",value:function(t,n,e){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,i=this.getRule(t);if(!!i){var a=this.data.globals,o=a[i.type]?i.type:void 0,l=Object.assign({},i,{attributes:Kt.exports.merge({},i.attributes,o?a[o]:{})});this.filterAttributes(n,l,r?function(c){return t.removeAttributes(c)}:void 0),this.filterStyles(e,l,r?function(c){return t.css(c,"")}:void 0)}}},{key:"closest",value:function(t){var n=this,e=t;return this.data.blocks.forEach(function(r){if(r.name===t){var i=r;i.allowIn&&(i.allowIn.forEach(function(a){n.isAllowIn(a,e)&&(e=a)}),e=n.closest(e))}}),e}},{key:"isAllowIn",value:function(t,n){return t==="p"?!1:this.data.blocks.some(function(e){if(e.name===n){var r=e;if(r.allowIn&&r.allowIn.indexOf(t)>-1)return!0}})}},{key:"addAllowIn",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"p",e=this.data.blocks.find(function(r){return r.name===n});e.allowIn||(e.allowIn=[]),e.allowIn.includes(t)||e.allowIn.push(t)}},{key:"getAllowInTags",value:function(){var t=[];return this.data.blocks.forEach(function(n){var e=n;e.allowIn&&e.allowIn.forEach(function(r){t.indexOf(r)<0&&t.push(r)})}),t}},{key:"getCanMergeTags",value:function(){var t=[];return this.data.blocks.forEach(function(n){var e=n;e.canMerge===!0&&t.indexOf(e.name)<0&&t.push(e.name)}),t}}]),b}(),ep=function(u){return u.required!==void 0},yC=function(u){return!!u.name},wC=function(){function b(u){Fe(this,b),this.editor=void 0,this.data=[],this.editor=u}return Be(b,[{key:"getData",value:function(){return this.data}},{key:"clone",value:function(){var t=Kt.exports.cloneDeep(this.data),n=new b(this.editor);return n.data=t,n}},{key:"add",value:function(t,n){this.data.push({from:t,to:n})}},{key:"transform",value:function(t,n){var e=t.name,r=t.attributes(),i=Lf(r.style||""),a=!1;delete r.style,t.isCursor()&&(e=r[lt].toLowerCase(),r={},i={});var o=this.data.find(function(l){if(!(n&&!n(l))){var c=l.from,d=l.to,v=!1;if(typeof c=="string")v=c===e;else if(typeof c=="function")v=c(e,i,r);else{var h=Object.keys(c);v=h.indexOf(e)>=0&&h.some(function(_){var E=c[_];return Object.keys(E.style||{}).every(function(M){var T=E.style[M];return!!i[M]&&Array.isArray(T)?T.indexOf(i[M])>-1:T===i[M]})&&Object.keys(E.attributes||{}).every(function(M){var T=E.attributes[M];return!!i[M]&&Array.isArray(T)?T.indexOf(i[M])>-1:T===i[M]})})}if(v)if(typeof d=="string")e=d,i={},r={};else{var g=typeof d=="function"?d(e,i,r):d,w=g;if(g.hasOwnProperty("replace")){var x=g;w=x.node,a=x.replace}e=w.name,i=w.css(),r=w.attributes()}return v}});return o?{rule:o,node:{name:e,style:i,attributes:r},replace:a}:void 0}}]),b}(),kC=function(){function b(u){Fe(this,b),this.engine=void 0,this.engine=u}return Be(b,[{key:"insertNewline",value:function(t,n,e){var r=this.engine.change,i=V("<p><br /></p>");this.engine.nodeId.generate(i),e?n.root.before(i):n.root.after(i),t.select(i,!0),t.collapse(!1),r.range.select(t)}},{key:"trigger",value:function(t){var n=this.engine,e=n.change,r=n.card,i=e.range.get(),a=r.find(i.startNode);if(!a)return!0;if(a.type===un.INLINE){var o=i.startNode.closest(Zi);o.length>0&&(i.select(a.root),i.collapse(!0),e.range.select(i));var l=i.startNode.closest(Yi);l.length>0&&(i.select(a.root),i.collapse(!1),e.range.select(i))}else{var c=i.startNode.closest(Zi);if(c.length>0){t.preventDefault();var d=a.root.prev();return!d||d.isCard()?(r.focusPrevBlock(a,i,!0),e.range.select(i)):this.insertNewline(i,a,!0),!1}var v=i.startNode.closest(Yi);if(v.length>0){t.preventDefault();var h=a.root.next();return!h||h.isCard()?(r.focusNextBlock(a,i,!0),e.range.select(i)):this.insertNewline(i,a,!1),!1}}return!0}}]),b}(),xC=function(){function b(u){Fe(this,b),this.engine=void 0,this.engine=u}return Be(b,[{key:"focusPrevBlock",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,e=this.engine.change,r=e.range.get();t=t||this.engine.block.closest(r.startNode);var i=t.prev();if(!!i){if(i.isCard()){var a=this.engine.card.find(i);a&&a.focus(r);return}if(this.engine.node.isList(i)&&(i=i.last()),!!i){if(n&&this.engine.node.isEmptyWithTrim(i)){i.remove();return}r.select(i,!0),r.collapse(!1),e.range.select(r.shrinkToTextNode())}}}},{key:"trigger",value:function(t){var n=this.engine.change,e=n.range.get().cloneRange().shrinkToElementNode().shrinkToTextNode();if(!!e.collapsed){var r=this.engine.card.find(e.startNode);if(!r){var i=e.getPrevNode(),a=i==null?void 0:i.parent();if(!t.isDelete&&i&&i.isCard()&&(!a||!this.engine.node.isCustomize(a))){t.preventDefault();var o=e.cloneRange();return o.setStartBefore(i),o.collapse(!0),this.engine.card.remove(i),n.range.select(o.shrinkToTextNode()),o.handleBr(),!1}return!0}if(t.isDelete)return!0;if(r.type===un.INLINE){var l=e.startNode.closest(Zi);if(l.length>0){var c=r.root.prev();if(c){var d=this.engine.card.find(c);if(d)return this.engine.card.remove(d.id),e.handleBr(),!1;e.select(r.root).collapse(!0)}else return t.preventDefault(),n.mergeAfterDelete(),!1;n.range.select(e)}var v=e.startNode.closest(Yi);if(v.length>0){t.preventDefault();var h=e.cloneRange();return h.setStartBefore(r.root),h.collapse(!0),this.engine.card.remove(r.id),n.range.select(h.shrinkToTextNode()),h.handleBr(),!1}}else{var g=e.startNode.closest(Zi);if(g.length>0){var w;return t.preventDefault(),!((w=r.root.parent())===null||w===void 0)&&w.inEditor()?n.unwrap(r.root.parent()):this.focusPrevBlock(r.root,!0),!1}var x=e.startNode.closest(Yi);if(x.length>0)return t.preventDefault(),this.focusPrevBlock(r.root),this.engine.card.remove(r.id,!1),n.isEmpty()&&n.initValue(),!1}return this.engine.trigger("keydown:backspace",t)!==!1}}}]),b}(),CC=function(){function b(u){Fe(this,b),this.engine=void 0,this.engine=u}return Be(b,[{key:"inline",value:function(t,n){var e=this.engine.change,r=e.range.get().cloneRange(),i=t.constructor.singleSelectable,a=r.commonAncestorNode.closest(Zi);if(a.length>0){var o=t.root.prev();return o?(r.setStartBefore(t.root[0]),r.collapse(!0)):t.focus(r,!0),e.range.select(r),!0}var l=r.commonAncestorNode.closest(Yi),c=a.length===0&&l.length===0;if(l.length>0||c){if(n.preventDefault(),c){var d;t.select(!1),(d=t.toolbarModel)===null||d===void 0||d.hide(),t.activate(!1)}else if(r.collapsed){var v=this.engine.card.find(r.startNode);if(v&&v.onSelectLeft)return v.onSelectLeft(n)}if(!c&&i!==!1)this.engine.card.select(t,n);else{var h;t.focus(r,!0),t.select(!1),(h=t.toolbarModel)===null||h===void 0||h.hide(),e.range.select(r)}return!1}return!0}},{key:"block",value:function(t,n){var e=this.engine,r=e.change,i=e.card,a=r.range.get(),o=a.commonAncestorNode.closest(Zi);if(o.length>0){var l=t.root.prev();return l?(n.preventDefault(),i.focusPrevBlock(t,a,!1),r.range.select(a),!1):void 0}var c=a.commonAncestorNode.closest(Yi),d=o.length===0&&c.length===0;if(d){var v;t.select(!1),(v=t.toolbarModel)===null||v===void 0||v.hide(),t.activate(!1)}if(c.length>0){if(a.collapsed){var h=i.find(a.startNode);if(h&&h.onSelectLeft)return h.onSelectLeft(n)}return n.preventDefault(),i.select(t,n),!1}if(i.getSingleSelectedCard(a)){var g;return n.preventDefault(),t.focus(a,!0),t.select(!1),(g=t.toolbarModel)===null||g===void 0||g.hide(),r.range.select(a),!1}return!0}},{key:"trigger",value:function(t){var n=this.engine.change,e=n.range.get(),r=this.engine.card.getSingleCard(e);return r?yt("shift+left",t)?!1:r.type===un.INLINE?this.inline(r,t):this.block(r,t):!0}}]),b}(),EC=function(){function b(u){Fe(this,b),this.engine=void 0,this.engine=u}return Be(b,[{key:"inline",value:function(t,n){var e=this.engine.change,r=e.range.get(),i=t.constructor.singleSelectable,a=r.commonAncestorNode.closest(Zi),o=r.commonAncestorNode.closest(Yi),l=a.length===0&&o.length===0;if(a.length>0||l){if(n.preventDefault(),l){var c;t.select(!1),t.activate(!1),(c=t.toolbarModel)===null||c===void 0||c.hide()}else if(r.collapsed){var d=this.engine.card.find(r.startNode);if(d&&d.onSelectRight)return d.onSelectRight(n)}if(!l&&i!==!1)this.engine.card.select(t,n);else{var v;t.focus(r,!1),t.select(!1),(v=t.toolbarModel)===null||v===void 0||v.hide(),e.range.select(r)}return!1}if(o.length>0){var h=t.root.next();h?(r.setEndAfter(t.root[0]),r.collapse(!1)):t.focus(r,!1),e.range.select(r)}return!0}},{key:"block",value:function(t,n){var e=this.engine,r=e.change,i=e.card,a=r.range.get(),o=a.commonAncestorNode.closest(Zi);if(o.length>0){if(a.collapsed){var l=this.engine.card.find(a.startNode);if(l&&l.onSelectRight)return l.onSelectRight(n)}return n.preventDefault(),i.select(t,n),!1}var c=a.commonAncestorNode.closest(Yi),d=o.length===0&&c.length===0;if(d){var v;t.select(!1),(v=t.toolbarModel)===null||v===void 0||v.hide(),t.activate(!1)}if(c.length>0){var h=t.root.next();return h?(n.preventDefault(),i.focusNextBlock(t,a,!1),r.range.select(a),!1):void 0}if(this.engine.card.getSingleSelectedCard(a)){var g;return n.preventDefault(),t.focus(a,!1),t.select(!1),(g=t.toolbarModel)===null||g===void 0||g.hide(),r.range.select(a),!1}return!0}},{key:"trigger",value:function(t){var n=this.engine.change,e=n.range.get(),r=this.engine.card.getSingleCard(e);if(!r)return!0;if(!yt("shift+right",t))return r.type===un.INLINE?this.inline(r,t):this.block(r,t)}}]),b}(),_C=function(){function b(u){Fe(this,b),this.engine=void 0,this.engine=u}return Be(b,[{key:"inline",value:function(t,n){var e=this.engine,r=e.change,i=e.card,a=r.range.get(),o=t.root.prev();if(o)return n.preventDefault(),i.focusPrevBlock(t,a,!1),r.range.select(a),!1}},{key:"block",value:function(t,n){var e=this.engine,r=e.change,i=e.card,a=r.range.get(),o=t.root.prev();if(o)return n.preventDefault(),i.focusPrevBlock(t,a,!1),r.range.select(a),!1}},{key:"trigger",value:function(t){var n=this.engine,e=n.change,r=n.card,i=n.block,a=e.range.get();if(a.collapsed){var o=i.closest(a.startNode),l=o.prev();if(l!=null&&l.isCard()){var c=r.find(l);if(c&&c.onSelectUp)return c.onSelectUp(t)}}var d=r.getSingleCard(a);if(!d)return!0;if(!yt("shift+up",t))return d.type===un.INLINE?this.inline(d,t):this.block(d,t)}}]),b}(),SC=function(){function b(u){Fe(this,b),this.engine=void 0,this.engine=u}return Be(b,[{key:"inline",value:function(t,n){var e=this.engine,r=e.change,i=e.card,a=r.range.get(),o=t.root.next();if(o)return n.preventDefault(),i.focusNextBlock(t,a,!1),r.range.select(a),!1}},{key:"block",value:function(t,n){var e=this.engine,r=e.change,i=e.card,a=r.range.get(),o=t.root.next();if(o)return n.preventDefault(),i.focusNextBlock(t,a,!1),r.range.select(a),!1}},{key:"trigger",value:function(t){var n=this.engine,e=n.change,r=n.block,i=n.card,a=e.range.get(),o=i.getSingleCard(a);if(a.collapsed){var l=r.closest(a.startNode),c=l.next();if(c!=null&&c.isCard()){var d=i.find(c);if(d&&d.onSelectDown)return d.onSelectDown(t)}}return!o||yt("shift+down",t)?!0:o.type===un.INLINE?this.inline(o,t):this.block(o,t)}}]),b}(),MC=function(){function b(u){Fe(this,b),this.engine=void 0,this.engine=u}return Be(b,[{key:"block",value:function(t,n){var e=this.engine,r=e.change,i=e.card,a=r.range.get(),o=a.commonAncestorNode.closest(Zi);if(o.length>0)return!n.metaKey&&!n.ctrlKey&&(i.focusPrevBlock(t,a,!0),r.range.select(a)),!0;var l=a.commonAncestorNode.closest(Yi);return l.length>0&&!n.metaKey&&!n.ctrlKey&&(i.focusNextBlock(t,a,!0),r.range.select(a)),!0}},{key:"trigger",value:function(t){var n=this.engine.change,e=n.range.get(),r=this.engine.card.getSingleCard(e);return r&&r.type===un.BLOCK?this.block(r,t):!0}}]),b}(),TC=`.am-engine .card-selected [data-card-element="center"].data-card-background-selected {\r
    background: rgba(27, 162, 227, 0.2);\r
}\r
\r
.am-engine .card-selected [data-card-element="center"].data-card-border-selected {\r
    outline: 2px solid #1890FF;\r
    border-radius: 2px;\r
}\r
\r
.am-engine .card-selected [data-card-element="center"].data-card-border-selected::-moz-selection {\r
    background: transparent;\r
}\r
\r
.am-engine .card-selected [data-card-element="center"].data-card-border-selected::selection {\r
    background: transparent;\r
}\r
\r
.am-engine-view [data-card-element="center"] .data-card-loading,.am-engine [data-card-element="center"] .data-card-loading {\r
    display: inline-block;\r
    font-style: normal;\r
    vertical-align: -0.125em;\r
    text-align: center;\r
    text-transform: none;\r
    line-height: 0;\r
    text-rendering: optimizeLegibility;\r
    -webkit-font-smoothing: antialiased;\r
    margin-right: 5px;\r
    padding: 16px;\r
    width: 100%;\r
}\r
\r
.am-engine-view [data-card-element="center"] .data-card-loading .data-card-spin,.am-engine [data-card-element="center"] .data-card-loading .data-card-spin {\r
    display: inline-block;\r
    -webkit-animation: loadingCircle 1s infinite linear;\r
    animation: loadingCircle 1s infinite linear;\r
}`;Mo(TC);var AC=function(){function b(u){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;Fe(this,b),this.classes=void 0,this.components=void 0,this.lazyRender=void 0,this.asyncComponents=[],this.editor=void 0,this.renderTimeout=void 0,this.renderAsyncComponents=zr(Qt.mark(function e(){return Qt.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:t.renderTimeout&&clearTimeout(t.renderTimeout),t.renderTimeout=setTimeout(function(){var a=t.asyncComponents.concat();a.forEach(function(){var o=zr(Qt.mark(function l(c){return Qt.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:(c.root.length===0||t.editor.root.inViewport(c.root,!0)&&t.editor.trigger("card:async-render-component",c)!==!1)&&(t.asyncComponents.splice(t.asyncComponents.findIndex(function(h){return h===c}),1),c.root.length>0&&c.loading&&(c.destroy&&c.destroy(),c.getCenter().empty(),t.renderComponent(c)));case 1:case"end":return v.stop()}},l)}));return function(l){return o.apply(this,arguments)}}())},50);case 2:case"end":return i.stop()}},e)})),this.classes={},this.components=[],this.editor=u,this.lazyRender=n}return Be(b,[{key:"active",get:function(){return this.components.find(function(t){return t.activated})}},{key:"length",get:function(){return this.components.length}},{key:"init",value:function(t){var n=this,e,r,i=this.editor;if(ge(i)){var a,o,l,c,d,v,h,g=i.typing,w=new kC(i);(a=g.getHandleListener("enter","keydown"))===null||a===void 0||a.on(function(D){return w.trigger(D)});var x=new xC(i);(o=g.getHandleListener("backspace","keydown"))===null||o===void 0||o.on(function(D){return x.trigger(D)});var _=new CC(i);(l=g.getHandleListener("left","keydown"))===null||l===void 0||l.on(function(D){return _.trigger(D)});var E=new EC(i);(c=g.getHandleListener("right","keydown"))===null||c===void 0||c.on(function(D){return E.trigger(D)});var M=new _C(i);(d=g.getHandleListener("up","keydown"))===null||d===void 0||d.on(function(D){return M.trigger(D)});var T=new SC(i);(v=g.getHandleListener("down","keydown"))===null||v===void 0||v.on(function(D){return T.trigger(D)});var S=new MC(i);(h=g.getHandleListener("default","keydown"))===null||h===void 0||h.on(function(D){return S.trigger(D)})}t.forEach(function(D){n.classes[D.cardName]=D}),this.lazyRender&&(window.addEventListener("resize",this.renderAsyncComponents),(e=this.editor.scrollNode)===null||e===void 0||(r=e.get())===null||r===void 0||r.addEventListener("scroll",this.renderAsyncComponents),window.addEventListener("scroll",this.renderAsyncComponents),this.editor.on("card:async-render",this.renderAsyncComponents))}},{key:"add",value:function(t){this.classes[t.cardName]=t}},{key:"each",value:function(t){this.components.every(function(n,e){return!(t&&t(n,e)===!1)})}},{key:"closest",value:function(t,n){if(Ht(t)&&(t=V(t)),Tr(t)&&!t.isCard()){var e=t.closest(Ar,function(r){if(!(r&&n?V(r).isRoot():V(r).isEditable()))return r.parentNode||void 0});if(!e||e.length===0)return;t=e}return t}},{key:"find",value:function(t,n){if(typeof t!="string"){var e=this.closest(t,n);if(!e)return;t=e}var r=function(o){Ht(o)&&(o=V(o));var l=o.attributes(er);return wr(l)},i=this.components.filter(function(a){return typeof t=="string"?a.id===t:a.root.name!==(Ht(t)?t.nodeName.toString():t.name)?!1:a.root.equal(t)||a.id===r(t).id});if(i.length!==0)return i[0]}},{key:"findBlock",value:function(t){if(Ht(t)&&(t=V(t)),!!t.get()){var n=t.parent();if(!!n){var e=this.find(n);if(!!e)return e.type===un.BLOCK?e:this.findBlock(e.root)}}}},{key:"getSingleCard",value:function(t){var n=this.find(t.commonAncestorNode);return n||(n=this.getSingleSelectedCard(t)),n}},{key:"getSingleSelectedCard",value:function(t){var n=t.findElements(),e=n[0];if(n.length===1&&e){var r=V(e);if(r.isCard())return this.find(r)}}},{key:"insertNode",value:function(t,n){var e=n.type==="inline",r=this.editor;!t.collapsed&&ge(r)&&r.change.delete(t),this.gc();var i=r.inline,a=r.block,o=r.node,l=[];if(e){if(ge(r)&&n.executeMark){l=r.change.marks.map(function(x){return x.clone()});var c=r.card.find(t.startNode);if(c!=null&&c.queryMarks){var d;(d=l).push.apply(d,Hn(c.queryMarks()))}}i.insert(n.root,t)}else a.insert(n.root,t,function(x){for(var _=x.parent();_&&!_.isEditable();){x=_;var E=_.parent();if(E&&o.isBlock(E))_=E;else break}return x},!0);this.components.push(n),n.focus(t);var v=n.root.parent();!e&&v&&v.inEditor()&&o.isBlock(v)&&a.unwrap(v,t);for(var h=arguments.length,g=new Array(h>2?h-2:0),w=2;w<h;w++)g[w-2]=arguments[w];return this.renderComponent.apply(this,[n].concat(g)),n.didInsert&&n.didInsert(),l.forEach(function(x){n.executeMark(x,!0)}),n}},{key:"removeNode",value:function(t){t.destroy&&t.destroy(),this.removeComponent(t),t.root.remove()}},{key:"updateNode",value:function(t,n){t.destroy&&t.destroy();var e=t.getCenter();e==null||e.empty(),t.setValue(n);for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];var o=t.render.apply(t,i);o!==void 0&&e.append(typeof o=="string"?V(o):o),t.didUpdate&&t.didUpdate()}},{key:"replaceNode",value:function(t,n,e){var r=this.classes[n];if(!r)throw"".concat(n,": This card does not exist");var i=(e==null?void 0:e.type)||r.cardType,a=Ld('<card type="'.concat(i,'" name="').concat(n,'" value="').concat(Rs(e),'"></card>')),o=V(a);return t.before(o),o.append(t),o}},{key:"activate",value:function(t,n,e){var r=this.editor;if(!(!ge(r)||r.readonly)){var i=t.getRoot();if(!i.get()||r.container.equal(i)){var a=this.find(t),o=t.closest(Nn);if(!a&&o.length>0){var l=o.parent();a=l?this.find(l):void 0}var c=a?this.findBlock(a.root):void 0;if(c&&(a=c),a&&a.isCursor(t))if(o.length>0){var d=o.parent();a=d?this.find(d):void 0}else a=void 0;var v=a&&this.active&&this.active.root.equal(a.root);if(this.active&&!v){var h;(h=this.active.toolbarModel)===null||h===void 0||h.hide(),this.active.select(!1),this.active.activate(!1)}if(a){if(a.activatedByOther)return;if(v)a.isEditable?a.select(!1):n===Os.MOUSE_DOWN&&t.name!=="input"&&(e==null||e.preventDefault());else{var g;(g=a.toolbarModel)===null||g===void 0||g.show(e),a.constructor.singleSelectable!==!1&&(n!==Os.CLICK||ge(this.editor))&&this.select(a,e),!a.isEditable&&a.constructor.autoSelected!==!1&&a.select(!a.isEditable),a.activate(!0)}!v&&n===Os.MOUSE_DOWN&&r.trigger("focus"),r.change.onSelect()}}}}},{key:"select",value:function(t,n){var e=this.editor;if(!!ge(e)&&t.constructor.singleSelectable!==!1&&(t.type!==un.BLOCK||!t.activated)){var r=e.change.range.get().cloneRange();if(r.startNode.closest(Nn).length>0&&(!n||n instanceof MouseEvent&&(!n.target||!this.closest(n.target,!1)))||t.isEditable||t.isMaximize)return;n==null||n.preventDefault();var i=t.root,a=i.parent(),o=a.children().toArray().findIndex(function(l){return l.equal(i)});r.setStart(a,o),r.setEnd(a,o+1),e.change.range.select(r)}}},{key:"focus",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,e=this.editor;if(!!ge(e)){var r=e.change,i=e.container,a=e.scrollNode,o=r.range.get();t.focus(o,n),r.range.select(o),this.activate(o.startNode,Os.MOUSE_DOWN),r.onSelect(),a&&o.scrollIntoViewIfNeeded(i,a)}}},{key:"insert",value:function(t,n){if(!ge(this.editor))throw"Engine not found";for(var e=this.create(t,{value:n}),r=this.editor.change,i=r.range.toTrusty(),a=arguments.length,o=new Array(a>2?a-2:0),l=2;l<a;l++)o[l-2]=arguments[l];var c=this.insertNode.apply(this,[i,e].concat(o));return r.change(),c}},{key:"update",value:function(t,n){if(!!ge(this.editor)){var e=this.editor.change,r=this.find(t);if(r){for(var i=arguments.length,a=new Array(i>2?i-2:0),o=2;o<i;o++)a[o-2]=arguments[o];this.updateNode.apply(this,[r,n].concat(a));var l=e.range.get();r.focus(l,!1),e.change()}}}},{key:"replace",value:function(t,n,e){this.remove(t.root);for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];return this.insert.apply(this,[n,e].concat(i))}},{key:"remove",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!!ge(this.editor)){var e=this.editor,r=e.change,i=e.list,a=e.node,o=r.range.get(),l=this.find(t);if(!!l){l.type===un.INLINE?(o.setEndAfter(l.root[0]),o.collapse(!1)):this.focusPrevBlock(l,o,n);var c=l.root.parent();this.removeNode(l),i.addBr(o.startNode),c&&a.isEmpty(c)&&!this.editor.ot.isStopped&&(c.isEditable()?(a.html(c,"<p><br /></p>"),o.select(c,!0),o.shrinkToElementNode(),o.collapse(!1)):(a.html(c,"<br />"),o.select(c,!0),o.collapse(!1))),n?r.apply(o):(r.range.select(o),r.change())}}}},{key:"removeRemote",value:function(t){if(!!ge(this.editor)){var n=this.editor.node,e=this.find(t);if(!!e){var r=e.root.parent();this.removeNode(e),r&&n.isEmpty(r)&&!this.editor.ot.isStopped&&(r.isEditable()?n.html(r,"<p><br /></p>"):n.html(r,"<br />"))}}}},{key:"create",value:function(t,n){var e,r=this.classes[t];if(!r)throw"".concat(t,": This card does not exist");var i=(n==null||(e=n.value)===null||e===void 0?void 0:e.type)||r.cardType;if(["inline","block"].indexOf(i)<0)throw"".concat(t,': the type of card must be "inline", "block"');n!=null&&n.root&&n.root.empty();var a=new r({editor:this.editor,value:n==null?void 0:n.value,root:n==null?void 0:n.root});a.root.attributes(gi,i),a.root.attributes(Gt,t),a.root.attributes(mi,"true");var o=i===un.INLINE?"span":"div",l=V("<".concat(o," ").concat(a.isEditable?ua+"='*'":"","/>"));l.attributes(jn,"center");var c=V("<".concat(o," ").concat(jn,'="body" />'));return c.append(l),a.root.append(c),this.createCursor(a),i===un.BLOCK&&this.editor.nodeId.generate(a.root),a.init(),a}},{key:"createCursor",value:function(t){var n=t.constructor,e=n.focus!==void 0?n.focus:ge(this.editor)&&!this.editor.readonly,r=t.getCenter();r.removeAttributes(Hi),t.root.removeAttributes(Hi);var i=t.findByKey("left"),a=t.findByKey("right");e?(r.attributes(Hi,"false"),i||r.before(V("<span ".concat(jn,'="left" ').concat(Id,'="true">&#8203;</span>'))),a||r.after(V("<span ".concat(jn,'="right" ').concat(Id,'="true">&#8203;</span>')))):(i==null||i.remove(),a==null||a.remove(),t.root.attributes(Hi,"false"))}},{key:"reRender",value:function(){for(var t=this,n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];e.length===0&&(e=this.components),e.forEach(function(i){i.destroy&&i.destroy(),t.createCursor(i),i.init(),t.renderComponent(i)})}},{key:"render",value:function(t,n){var e=this,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.lazyRender,i=t?t.isCard()?t:t.find("".concat(Mc)):this.editor.container.find(Mc);this.gc();var a=[],o=[],l=i.toArray();l.forEach(function(d){o.find(function(h){return h.equal(d)})||o.push(d);var v=d.find("".concat(Ar,",").concat(Mc)).toArray();v.forEach(function(h){if(!h.equal(d)){var g=o.findIndex(function(w){return w.equal(h)});g>-1&&o.splice(g,1)}})}),o.forEach(function(d){var v=d.attributes(_n),h=d.attributes(Gt),g=v||h;if(e.classes[g]){var w=d.attributes(er),x=d.attributes(),_;h&&(_=e.find(d),_&&_.root.equal(d)&&(_.destroy&&_.destroy(),e.removeComponent(_)),d.attributes(mi,"true"),x[mi]="true",d.empty()),_=e.create(g,{value:wr(w),root:h?d:void 0}),Object.keys(x).forEach(function(E){(E.indexOf("data-")===0&&E.indexOf("data-card")!==0||E===mi)&&_.root.attributes(E,x[E])}),v&&(d.replaceWith(_.root),d.remove()),e.components.push(_),a.push(_),v&&_.root.removeAttributes(_n)}});var c=!1;a.forEach(function(d){if(r&&d.constructor.lazyRender){if(d.beforeRender){var v=d.beforeRender(),h=d.getCenter();v!==void 0&&h.append(typeof v=="string"?V(v):v)}c=!0,e.asyncComponents.push(d)}else e.renderComponent(d)}),n&&n(a.length),c&&this.renderAsyncComponents()}},{key:"renderComponent",value:function(t){for(var n=this,e=t.getCenter(),r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];var o=t.render.apply(t,i);o!==void 0&&e.append(typeof o=="string"?V(o):o),t.contenteditable.length>0&&(e.find(t.contenteditable.join(",")).each(function(c){var d=V(c);d.attributes(Hi)!==void 0&&d.attributes(Hi,!ge(n.editor)||n.editor.readonly?"false":"true"),d.attributes(lt,Dd)}),this.render(e)),t.didRender();var l=t.root.parent();l!=null&&l.isRoot()?t.root[0].__index=t.root.index():l&&Ac(l),t.isEditable&&Ac(t.root)}},{key:"removeComponent",value:function(t){var n=this;this.each(function(e,r){if(e.root.equal(t.root))return n.components.splice(r,1),!1})}},{key:"gc",value:function(){for(var t=0;t<this.components.length;t++){var n=this.components[t];(!n.root[0]||n.root.closest("body").length===0)&&(n.destroy&&n.destroy(),this.components.splice(t,1),t--)}}},{key:"destroy",value:function(){var t,n;this.gc(),window.removeEventListener("resize",this.renderAsyncComponents),(t=this.editor.scrollNode)===null||t===void 0||(n=t.get())===null||n===void 0||n.removeEventListener("scroll",this.renderAsyncComponents),window.removeEventListener("scroll",this.renderAsyncComponents),this.editor.off("card:async-render",this.renderAsyncComponents)}},{key:"focusPrevBlock",value:function(t,n,e){if(!ge(this.editor))throw"Engine not initialized";var r;if(t.type==="inline"){var i=this.editor.block.closest(t.root);i.isEditable()?r=t.root.prevElement():r=i.prevElement()}else r=t.root.prevElement();if(e){if(!r||r.attributes(Gt)){var a=V("<p><br /></p>");t.root.before(a),n.select(a,!0),n.collapse(!1);return}}else{if(!r)return;if(r.attributes(Gt)){var o;(o=this.editor.card.find(r))===null||o===void 0||o.focus(n,!1);return}}n.select(r,!0).shrinkToElementNode().shrinkToTextNode().collapse(!1)}},{key:"focusNextBlock",value:function(t,n,e){if(!ge(this.editor))throw"Engine not initialized";var r;if(t.type==="inline"){var i=this.editor.block.closest(t.root);i.isEditable()?r=t.root.nextElement():r=i.nextElement()}else r=t.root.nextElement();if(e){if(!r||r.attributes(Gt)){var a=V("<p><br /></p>");t.root.after(a),n.select(a,!0),n.collapse(!1);return}}else{if(!r)return;if(r.attributes(Gt)){var o;(o=this.editor.card.find(r))===null||o===void 0||o.focus(n,!0);return}}n.select(r,!0).shrinkToElementNode().shrinkToTextNode().collapse(!0)}}]),b}(),pl=Mt("rules"),NC=function(){function b(u){Fe(this,b),this.editor=void 0,Object.defineProperty(this,pl,{writable:!0,value:{}}),this.editor=u}return Be(b,[{key:"init",value:function(){oe(this,pl)[pl]=this.getRules()}},{key:"getRules",value:function(){var t={};return this.editor.schema.data.blocks.forEach(function(n){Object.keys(t).includes(n.name)||(t[n.name]=[]),t[n.name].push(n)}),t}},{key:"create",value:function(t){Ht(t)&&(t=V(t));var n=Lp(t);return t.attributes(fn,n),n}},{key:"generateAll",value:function(){var t,n=this,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.editor.container,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=oe(this,pl)[pl],a=Object.keys(i).join(",");Tr(e)&&e.fragment&&(e=e.fragment);var o=Ht(e)?e:e.get();if(!(!o||o.nodeType===Node.TEXT_NODE)){var l=(t=Ht(e)?V(e):e)===null||t===void 0?void 0:t.find(a);l.each(function(c,d){var v=l.eq(d);!v||!r&&v.attributes(fn)||n.generate(v,r)})}}},{key:"generate",value:function(t){var n=this,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(Ht(t)&&(t=V(t)),!t.isText()){var r=oe(this,pl)[pl],i=r[t.name];if(!(!i||i.length===0||!i.some(function(l){return n.editor.schema.checkNode(t,l.attributes)}))){var a=t.closest("".concat(Ar,",").concat(Su),pp);if(!(a.length>0&&a.attributes(lt)===Gn)&&!(!t.isCard()&&a.length>0&&a.isCard()&&!a.isEditableCard())){if(!e){var o=t.attributes(fn);if(o)return o}return this.create(t)}}}}},{key:"isNeed",value:function(t){var n=this,e=oe(this,pl)[pl],r=e[t.name];return!(!r||r.length===0||!r.some(function(i){return n.editor.schema.checkNode(t,i.attributes)}))}}]),b}(),DC=function(u){return!!u.dataTransfer},IC=function(){function b(u){Fe(this,b),this.editor=void 0,this.editor=u}return Be(b,[{key:"getData",value:function(t){var n,e=DC(t)?t.dataTransfer:t.clipboardData,r=e==null?void 0:e.getData("text/html"),i=e==null?void 0:e.getData("text"),a=[];try{(e==null?void 0:e.items)&&e.items.length>0?Array.from(e.items).forEach(function(o){var l=o.kind==="file"?o.getAsFile():null;if(l!==null){var c;l.type&&l.type.indexOf("image/png")>-1&&!l.lastModified&&(l=new File([l],"image.png",{type:l.type})),l.ext=(c=i)===null||c===void 0?void 0:c.split(".").pop()}l&&a.push(l)}):(e==null?void 0:e.files)&&e.files.length>0&&(a=Array.from(e.files))}catch{(e==null?void 0:e.files)&&e.files.length>0&&(a=Array.from(e.files))}return r===""&&i&&/^.+\.\w+$/.test(i)&&a.length>0?i="":i===""&&r&&/^(<meta.+?>)?<img.+?>$/.test(r)&&a.length>0?r="":(r||i)&&a.length>0&&!(!((n=r)===null||n===void 0)&&n.startsWith("<img"))&&(r||!/^https(s)?:/.test(i||""))&&(a=[]),{html:r,text:i,files:a}}},{key:"write",value:function(t,n){var e,r,i=this.editor.getSelectionData(n);if(!!i){var a=i.html,o=i.text;return t==null||t.preventDefault(),t==null||(e=t.clipboardData)===null||e===void 0||e.setData("text/html",'<meta name="source" content="aomao" />'+a),t==null||(r=t.clipboardData)===null||r===void 0||r.setData("text",o),i}}},{key:"copy",value:function(t){var n=this,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(typeof t=="string")return Bk(t);var r=this.editor,i=window.getSelection(),a=i&&ln.from(r,i)||ln.create(r),o=a.cloneRange(),l=V('<div class="'.concat(fp,'" ').concat(lt,'="').concat(_u,'">&#8203;</div>'));l.css({position:"fixed",top:0,clip:"rect(0, 0, 0, 0)"});var c=function(){l.remove(),i==null||i.removeAllRanges(),i==null||i.addRange(o.toRange())};l.on("copy",function(g){g.stopPropagation(),n.write(g,a),c()}),V(document.body).append(l),l.append(r.node.clone(V(t),!0)),e&&l.traverse(function(g){g.equal(l)||r.trigger("copy",g)}),l.append(V("&#8203;",null));var d=l.first(),v=l.last();a.select(l,!0),a.setStartAfter(d),a.setEndBefore(v),i==null||i.removeAllRanges(),i==null||i.addRange(a.toRange());var h=!1;try{if(h=document.execCommand("copy"),!h)throw"Copy failed"}catch(g){console.log("The copy command was not executed successfully ",g),c()}return h}},{key:"cut",value:function(){var t=ln.from(this.editor);if(!!t){var n=t.commonAncestorNode;this.editor.change.delete(t);for(var e=this.editor.node.isList(n)?n:n.find("ul,ol"),r=0;r<e.length;r++){var i=V(e[r]),a=i.find("li");a.each(function(o){if(o.innerText===""||Nf&&o.innerText===`
`){var l;(l=o.parentNode)===null||l===void 0||l.removeChild(o)}}),i.children().length===0&&i.remove()}}}},{key:"setNodes",value:function(t){if(t.length===0)return{};for(var n=t.length-1;n>0;n--){var e=t[n];e.appendChild(t[n-1])}return{inner:t[0],outter:t[t.length-1]}}}]),b}(),LC=function b(u,t,n,e){var r=void 0,i=void 0,a=/\[\]$/;if(Array.isArray(t))for(i=0;i<t.length;i++){var o=t[i];n||a.test(u)?e(u,o):b(u+"["+((typeof o=="undefined"?"undefined":Jn(o))==="object"?i:"")+"]",o,n,e)}else if(t.toString()==="[object Object]")for(r in t)t.hasOwnProperty(r)&&b(u+"["+r+"]",t[r],n,e);else e(u,t)},$g=function(u,t){return u+(/\?/.test(u)?"&":"?")+t},OC=function(u){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=void 0,e=[],r=function(o,l){typeof l=="function"?l=l():l==null&&(l=""),e[e.length]=encodeURIComponent(o)+"="+encodeURIComponent(l)};if(Array.isArray(u))for(var i=0;i<u.length;i++)r(u[i].name,u[i].value);else for(n in u)u.hasOwnProperty(n)&&LC(n,u[n],t,r);return e.join("&").replace(/%20/g,"+")},Gg=function(u){return typeof FormData!="undefined"&&u instanceof FormData},zC=/^http/,RC=/(^\w+):\/\//,FC=/^(20\d|1223)$/,Uh="readyState",Zg="Content-Type",Yg="X-Requested-With",Mf="XMLHttpRequest",qh="XDomainRequest",wu={traditional:!1,contentType:"application/x-www-form-urlencoded",requestedWith:Mf,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"},dataFilter:function(u){return u}},Rp=function(){function b(u){var t;Fe(this,b),this.options=void 0,this.headNode=void 0,this.request=void 0,this.isAborted=!1,this.isTimeout=!1,this.timeout=void 0,this.callbackData=void 0,this.callbackPrefix="request_"+new Date,this.uuid=0,this.promise=void 0,this.__resolve=void 0,this.__reject=void 0,typeof u=="string"&&(u={url:u});var n=u,e=n.url;Kt.exports.startsWith(e,"//")&&(e=window.location.protocol+e),this.options=Ie(Ie(Ie({},wu),u),{},{url:e,context:u.context||window,doc:u.doc||vr(),jsonpCallback:u.jsonpCallback||"callback",method:u.method||"GET"}),this.headNode=(t=this.options.doc)===null||t===void 0?void 0:t.getElementsByTagName("head")[0],this.initPromise(),this.init()}return Be(b,[{key:"initPromise",value:function(){var t=this;this.promise=new Promise(function(n,e){t.__resolve=n,t.__reject=e}).catch(function(){})}},{key:"init",value:function(){var t=this,n=function(){var a;t.isTimeout=!0,(a=t.request)===null||a===void 0||a.abort()};this.timeout&&clearTimeout(this.timeout),this.timeout=void 0,this.options.timeout&&(this.timeout=setTimeout(n,this.options.timeout));var e=function(a,o){t.triggerError(a,o)},r=function(a){t.triggerSuccess(a)};this.request=this.getRequest(r,e)}},{key:"abort",value:function(){var t;(t=this.request)===null||t===void 0||t.abort()}},{key:"defaultXHR",value:function(){var t=this.options,n=t.context,e=t.crossOrigin;if(!!n)if(e===!0){var r=n[Mf]?new n[Mf]:null;if(r&&"withCredentials"in r)return r;if(n[qh])return new n[qh];throw new Error("Browser does not support cross-origin requests")}else return n[Mf]?new n[Mf]:new n.ActiveXObject("Microsoft.XMLHTTP")}},{key:"succeed",value:function(){var t,n,e,r=this.options,i=r.url,a=r.context,o=RC.exec(i),l=o?o[1]:"";return l||(l=(a==null?void 0:a.location.protocol)||""),zC.test(l)?FC.test(((t=this.request)===null||t===void 0||(n=t.status)===null||n===void 0?void 0:n.toString())||""):!!(!((e=this.request)===null||e===void 0)&&e.response)}},{key:"noop",value:function(){}},{key:"handleReadyState",value:function(t,n){if(this.isAborted)return n("Request is aborted",this.request);if(this.isTimeout)return n("Request is aborted: timeout",this.request);this.request&&this.request[Uh]===4&&(this.request.onreadystatechange=this.noop,this.succeed()?t(this.request):n(this.request.statusText,this.request))}},{key:"setHeaders",value:function(t){var n=this.options.headers||{};n.Accept=n.Accept||wu.accept[this.options.type||"*"],!this.options.crossOrigin&&!n[Yg]&&(n[Yg]=wu.requestedWith),!n[Zg]&&!Gg(this.options.data)&&(n[Zg]=this.options.contentType||wu.contentType),Object.keys(n).forEach(function(e){t.setRequestHeader(e,n[e])})}},{key:"setCredentials",value:function(t){typeof this.options.withCredentials!="undefined"&&typeof t.withCredentials!="undefined"&&(t.withCredentials=!!this.options.withCredentials)}},{key:"generalCallback",value:function(t){this.callbackData=t}},{key:"getCallbackPrefix",value:function(t){return this.callbackPrefix+"_"+t}},{key:"handleJsonp",value:function(t,n,e){var r=this,i,a=this.options,o=a.jsonpCallback,l=a.jsonpCallbackName,c=a.doc,d=a.context;if(!(!c||!d)){var v=this.uuid++,h=o||"callback",g=l||this.getCallbackPrefix(v),w=new RegExp("((^|\\?|&)"+h+")=([^&]+)"),x=t.match(w),_=c.createElement("script"),E=0,M=navigator.userAgent.indexOf("MSIE 10.0")!==-1;return x?x[3]==="?"?t=t.replace(w,"$1="+g):g=x[3]:t=$g(t,h+"="+g),d[g]=this.generalCallback,_.type="text/javascript",_.src=t,_.async=!0,typeof _.onreadystatechange!="undefined"&&!M&&(_.htmlFor=_.id="_request_"+v),_.onload=_.onreadystatechange=function(){var T;return _[Uh]&&_[Uh]!=="complete"&&_[Uh]!=="loaded"||E?!1:(_.onload=_.onreadystatechange=null,_.onclick&&_.onclick(),n(r.callbackData),r.callbackData=void 0,(T=r.headNode)===null||T===void 0||T.removeChild(_),E=1,!0)},(i=this.headNode)===null||i===void 0||i.appendChild(_),{abort:function(){var S;_.onload=_.onreadystatechange=null,e("Request is aborted: timeout"),r.callbackData=void 0,(S=r.headNode)===null||S===void 0||S.removeChild(_),E=1}}}}},{key:"getRequest",value:function(t,n){var e,r,i=this,a=((e=this.options.method)===null||e===void 0?void 0:e.toUpperCase())||"GET",o=this.options,l=o.processData,c=o.traditional,d=o.type,v=o.context,h=o.xhr,g=o.async,w=o.before;if(!!v){var x=this.options,_=x.data,E=x.url;(((r=this.options.contentType)===null||r===void 0?void 0:r.indexOf("json"))||-1)>-1&&Jn(_)==="object"&&(_=JSON.stringify(_)),_=l!==!1&&_&&typeof _!="string"&&!Gg(_)?OC(_,c||wu.traditional):_||null;var M=void 0,T=!1;if((d==="jsonp"||a==="GET")&&_&&(E=$g(E,_),_=null),d==="jsonp")return this.handleJsonp(E,t,n);if(M=(typeof h=="function"?h(this.options):h)||this.defaultXHR(),!!M)return M.open(a,E,g!==!1),this.setHeaders(M),this.setCredentials(M),v[qh]&&M instanceof v[qh]?(M.onload=t,M.onerror=function(){n("http error",M)},M.onprogress=this.noop,T=!0):M.onreadystatechange=function(){i.handleReadyState(t,n)},w&&w(M),T?setTimeout(function(){var S;(S=M)===null||S===void 0||S.send(_)},200):M.send(_),M}}},{key:"getType",value:function(t){if(!!t){if(t.match("json"))return"json";if(t.match("javascript"))return"js";if(t.match("text"))return"html";if(t.match("xml"))return"xml"}}},{key:"triggerSuccess",value:function(t){var n=this.options,e=n.dataFilter,r=n.context,i=n.success;if(!!r){var a=this.options.type,o=(e||wu.dataFilter)(t.responseText,a);a||(a=t&&this.getType(t.getResponseHeader("Content-Type")));var l=a!=="jsonp"?this.request:t;try{l.responseText=o}catch{}if(o)switch(a){case"json":try{l=r.JSON.parse(o)}catch{return this.triggerError("Could not parse JSON in response",l)}break;case"html":l=o;break;case"xml":l=l.responseXML&&l.responseXML.parseError&&l.responseXML.parseError.errorCode&&l.responseXML.parseError.reason?null:l.responseXML;break}i&&i(l),this.triggerComplete(l),this.__resolve&&this.__resolve(l)}}},{key:"triggerError",value:function(t,n){var e=this.options.error,r=new Error(t);r.xhr=n,e&&e(r),this.triggerComplete(r),this.__reject&&this.__reject(r)}},{key:"triggerComplete",value:function(t){var n=this.options.complete;this.timeout&&clearTimeout(this.timeout),this.timeout=void 0,n&&n(t)}},{key:"retry",value:function(){this.initPromise(),this.init()}},{key:"then",value:function(t,n){var e;return(e=this.promise)===null||e===void 0?void 0:e.then(t,n)}},{key:"always",value:function(t){var n;return(n=this.promise)===null||n===void 0?void 0:n.then(t,t)}},{key:"fail",value:function(t){var n;return(n=this.promise)===null||n===void 0?void 0:n.then(void 0,t)}},{key:"catch",value:function(t){return this.fail(t)}}]),b}();Rp.setup=function(b){Object.keys(b).forEach(function(u){wu[u]&&(wu[u]=b[u])})};var Kg={"image/jpeg":["jpeg","jpg","jpe"],"image/png":["png"],"image/gif":["gif"],"image/vnd.wap.wbmp":["wbmp"],"image/tiff":["tiff","tiff"],"image/vnd.adobe.photoshop":["psd"],"image/svg+xml":["svg","svgz"],"text/jsx":["jsx"],"text/less":["less"],"text/css":["css"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/csv":["cvs"],"text/xml":["xml"],"text/x-vcard":["vcf"],"text/x-vcalendar":["vcs"],"text/markdown":["md"],"text/plain":["txt"],"text/richtext":["rtx"],"text/rtf":["rtf"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/javascript":["js"],"text/yaml":["yaml","yml"],"audio/mp3":["mp3"],"audio/mp4":["mp4","mp4a"],"video/mp4":["mp4"],"audio/mpeg":["mpeg","mp2","mp3"],"audio/ogg":["oga"],"audio/wav":["wav"],"audio/wave":["wav"],"audio/webm":["weba"],"video/x-msvideo":["avi"],"video/quicktime":["mov","qt"],"video/ogg":["ogv"],"video/x-sgi-movie":["movie"],"application/rss+xml":["rss"],"application/json":["json"],"application/zip":["zip"],"application/gzip":["gzip"],"application/pdf":["pdf"],"application/postscript":["ai","eps","ps"],"application/msword":["doc","dot"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.ms-fontobject":["eot"],"application/vnd.android.package-archive":["apk"],"application/x-apple-diskimage":["dmg"],"application/x-iwork-keynote-sffkey":["key"],"application/x-iwork-pages-sffpages":["pages"],"application/x-iwork-keynote-sffnumbers":["numbers"],"application/x-iwork-numbers-sffnumbers":["numbers"]},Of=function(u){if(typeof u=="string"){var t;return(t=u.split(".").pop())!==null&&t!==void 0?t:""}var n=Kg[u.type]?Kg[u.type][0]:"";if(!n&&"name"in u){var e;n=(e=u.name.split(".").pop())!==null&&e!==void 0?e:""}return n},Im=function(u){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$k?2:10;return u<1048576?Og(u,{base:t,exponent:1,round:0}):Og(u,{base:t,exponent:2,round:1})},BC=function(){function b(u){Fe(this,b),this.options=void 0,this.uploadingFiles=[],this.options=u}return Be(b,[{key:"createUid",value:function(t){return Date.now()+"-"+t}},{key:"request",value:function(){var u=zr(Qt.mark(function n(e,r){var i,a;return Qt.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:i=0;case 1:if(!(i<e.length)){l.next=12;break}return a=e[i],a.uid||(a.uid=this.createUid(i)),l.next=6,this.handleBefore(a,e);case 6:if(l.t0=l.sent,l.t0!==!1){l.next=9;break}e.splice(i,1);case 9:i++,l.next=1;break;case 12:this.upload(e,r);case 13:case"end":return l.stop()}},n,this)}));function t(n,e){return u.apply(this,arguments)}return t}()},{key:"upload",value:function(){var u=zr(Qt.mark(function n(e){var r=this,i,a=arguments;return Qt.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:i=a.length>1&&a[1]!==void 0?a[1]:"file",e.forEach(function(){var c=zr(Qt.mark(function d(v){var h,g,w,x,_,E,M,T,S,D;return Qt.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return h=new FormData,h.append(i,v,v.name),v.data&&Object.keys(v.data).forEach(function(B){h.append(B,v.data[B])}),g=r.options,w=g.url,x=g.data,_=g.onUploading,E=g.onSuccess,M=g.onError,T=g.withCredentials,S=g.crossOrigin,D=g.headers,x&&Object.keys(x).forEach(function(B){h.append(B,x[B])}),P.next=7,new Rp({xhr:function(){var $=new window.XMLHttpRequest;return $.upload.addEventListener("progress",function(q){q.lengthComputable&&_&&_(v,{percent:parseInt((q.loaded/q.total*100).toString(),10)})},!1),$},url:w,data:h,contentType:r.options.contentType,type:r.options.type||"json",withCredentials:T,crossOrigin:S,headers:D,success:function($){E&&E($,v)},error:function($){M&&M($,v)},method:"POST",processData:!0});case 7:case"end":return P.stop()}},d)}));return function(d){return c.apply(this,arguments)}}());case 2:case"end":return l.stop()}},n)}));function t(n){return u.apply(this,arguments)}return t}()},{key:"handleBefore",value:function(){var u=zr(Qt.mark(function n(e,r){var i=this,a,o,l,c,d,v;return Qt.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(a=e.type,o=e.uid,l=e.name,c=e.size,d=Of(e),v=this.options.onBefore,g.t0=v,!g.t0){g.next=9;break}return g.next=7,v(e);case 7:g.t1=g.sent,g.t0=g.t1===!1;case 9:if(!g.t0){g.next=11;break}return g.abrupt("return",!1);case 11:return g.abrupt("return",new Promise(function(w,x){var _=new FileReader;_.addEventListener("load",function(){i.uploadingFiles[o]={uid:o,src:_.result,name:l,size:c,type:a,ext:d},r.every(function(E){return!!i.uploadingFiles[E.uid]})?Promise.all(Hn(r.map(function(E){return new Promise(function(){var M=zr(Qt.mark(function T(S){return Qt.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(!i.options.onReady){I.next=3;break}return I.next=3,i.options.onReady(i.uploadingFiles[E.uid],E);case 3:S(!0);case 4:case"end":return I.stop()}},T)}));return function(T){return M.apply(this,arguments)}}())}))).then(function(){w(!0)}):w(!0)},!1),_.addEventListener("error",function(){x(!1)}),_.readAsDataURL(e)}));case 12:case"end":return g.stop()}},n,this)}));function t(n,e){return u.apply(this,arguments)}return t}()}]),b}(),PC=function(){function b(){Fe(this,b)}return Be(b,[{key:"ajax",value:function(t){return new Rp(t)}},{key:"upload",value:function(t,n,e){return new BC(t).request(n,e)}},{key:"getFiles",value:function(t){var n=t||{},e=n.event,r=n.accept,i=n.multiple;r=r||"*",i=Jn(i)===void 0?100:i;var a=document.createElement("input");a.type="file",a.accept=r,a.style.display="none",a.multiple=i!==!1;var o=function l(){a.remove(),document.removeEventListener("mousedown",l)};return new Promise(function(l){var c=function d(){for(var v=[],h=0;h<(((g=a.files)===null||g===void 0?void 0:g.length)||0);h++){var g;if(typeof i=="number"&&h>i)break;v.push(a.files[h])}a.removeEventListener("change",d),o(),l(v)};a.addEventListener("change",c),document.body.appendChild(a),e||(e=document.createEvent("MouseEvents"),e.initEvent("click",!0,!0));try{if(a.dispatchEvent)a.dispatchEvent(e);else if(a.fireEvent)a.fireEvent(e);else throw"";document.addEventListener("mousedown",o)}catch{a.removeEventListener("change",c),o(),l([])}})}}]),b}(),Lm=function(){function b(u){Fe(this,b),this.engine=void 0,this.engine=u}return Be(b,[{key:"trigger",value:function(t,n){var e=this.engine,r=e.change,i=e.command,a=e.list,o=e.node,l=r.range.get(),c=this.engine.block;if(l.collapsed){var d=c.closest(l.startNode);if(d.name==="li"&&a.isFirst(l))return t.isDelete||(t.preventDefault(),i.execute(a.getPluginNameByNode(d))),!1}else{var v=l.startNode,h=l.endNode,g=c.closest(v),w=c.closest(h);if(g.name==="li"||w.name==="li"){t.preventDefault();var x=l.cloneRange(),_=v.first(),E=v.isCard()?v:_;if(E!=null&&E.isCard()&&a.isEmptyItem(g)){var M=g.parent();g.remove(),M&&o.isCustomize(M)&&M.children().length===0&&M.remove()}if(r.delete(x,n),g.inEditor()&&!g.equal(w)&&w.inEditor()&&w.name==="li"){x.shrinkToElementNode().shrinkToTextNode();var T=x.createSelection();g.append(w.children());var S=w.parent();w.remove(),S&&o.isList(S)&&S.children().length===0&&S.remove(),T.move()}if(g.name==="li"){var D=g.parent();o.isCustomize(g)&&g.children().length===0&&g.remove(),D&&o.isList(D)&&D.children().length===0&&D.remove()}return a.addBr(g),g.equal(w)||a.addBr(w),l.setStart(x.startContainer,x.startOffset),l.collapse(!0),a.merge(),r.isEmpty()&&r.initValue(l),r.apply(l),!1}}if(!!c.isFirstOffset(l,"start")){var I=c.closest(l.startNode);if(o.isList(I)){var P=I.first();if(!P||P.isText())return t.preventDefault(),r.mergeAfterDelete(I),!1;I=P,l.setStart(I[0],0),l.collapse(!0),r.range.select(l)}if(I.name==="li"){var B;if(o.isCustomize(I))return;t.preventDefault();var $=I.closest("ul");return!((B=I.parent())===null||B===void 0)&&B.isEditable()?(r.mergeAfterDelete(I),!1):($.length>0?i.execute(a.getPluginNameByNode($)):r.unwrap(I),!1)}return!0}}}]),b}(),HC=function(){function b(u){Fe(this,b),this.engine=void 0,this.backspace=void 0,this.engine=u,this.backspace=new Lm(u)}return Be(b,[{key:"trigger",value:function(t){var n=this.engine,e=n.change,r=n.command,i=n.list,a=e.range.get();a.shrinkToElementNode();var o=this.engine.block.closest(a.startNode),l=this.engine.block.closest(a.endNode);if(o.name==="li"||l.name==="li"){a.collapsed||(this.backspace.trigger(t,o.name!==l.name),a=e.range.get()),t.preventDefault();var c=i.getPluginNameByNode(o);if(i.isLast(a)&&i.isFirst(a))r.execute(c);else{this.engine.block.split(),a=e.range.get();var d=this.engine.block.closest(a.endNode),v=i.getPlugins().find(function(w){return c===w.constructor.pluginName});if(!v)return;if(v.cardName){var h=d.prev();h&&(i.addCardToCustomize(h,v.cardName),i.addBr(h)),i.addCardToCustomize(d,v.cardName),i.addBr(d);var g=d.next();g&&(i.addCardToCustomize(g,v.cardName),i.addBr(g))}i.merge(void 0,a),i.addBr(a.startNode.closest("ul")),a.setStart(d,this.engine.node.isCustomize(d)?1:0),a.collapse(!0).shrinkToTextNode(),e.apply(a)}return a.scrollIntoView(),!1}return!0}}]),b}(),jC=function(){function b(u){Fe(this,b),this.editor=void 0,this.CUSTOMZIE_UL_CLASS="data-list",this.CUSTOMZIE_LI_CLASS="data-list-item",this.INDENT_KEY="data-indent",this.STYLE_POSITION_NAME="list-style-position",this.STYLE_POSITION_VALUE="inside",this.backspaceEvent=void 0,this.editor=u}return Be(b,[{key:"init",value:function(){var t=this;if(ge(this.editor)){var n,e,r=new HC(this.editor);(n=this.editor.typing.getHandleListener("enter","keydown"))===null||n===void 0||n.on(function(i){return r.trigger(i)}),this.backspaceEvent=new Lm(this.editor),(e=this.editor.typing.getHandleListener("backspace","keydown"))===null||e===void 0||e.on(function(i){var a;return(a=t.backspaceEvent)===null||a===void 0?void 0:a.trigger(i)})}}},{key:"isEmptyItem",value:function(t){var n=t.children().toArray().filter(function(r){return!r.isCursor()}),e=this.editor.node;return t.name==="li"&&(e.isEmpty(t)||(n.length===1?e.isCustomize(t)&&n[0].isCard()||n[0].name==="br":n.length===2&&e.isCustomize(t)&&!!n[0].isCard()&&n[1].name==="br"))}},{key:"isSame",value:function(t,n){if(t.name!==n.name)return!1;var e=this.editor.node;if(e.isCustomize(t)!==e.isCustomize(n))return!1;var r=parseInt(t.attributes(this.INDENT_KEY),10)||0,i=parseInt(n.attributes(this.INDENT_KEY),10)||0;return r===i}},{key:"isSpecifiedType",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"ul",e=arguments.length>2?arguments[2]:void 0,r=this.editor.node,i=!0;return t.forEach(function(a){var o;if(!(["li","p"].indexOf(a.name)===-1&&(a.name===n||a.find(n).length>0)))switch(a.name){case"li":if(e){var l,c,d=a.first();!((l=d)===null||l===void 0)&&l.isCursor()&&(d=d.next()),i=i&&r.isCustomize(a)&&(((c=d)===null||c===void 0?void 0:c.attributes(Gt))||"")===e}else i=i&&!r.isCustomize(a);break;case"p":a.parent()&&((o=a.parent())===null||o===void 0?void 0:o.name)!=="li"&&(i=!1);break;default:i=!1;break}}),i}},{key:"getPlugins",value:function(){var t=this,n=[];return Object.keys(this.editor.plugin.components).forEach(function(e){var r=t.editor.plugin.components[e];r.isCurrent&&n.push(r)}),n}},{key:"getPluginNameByNode",value:function(t){var n=this,e=t.name,r=function(a){var o="";return n.getPlugins().some(function(l){if(l.isCurrent(a))return o=l.constructor.pluginName,!0}),o};return this.editor.node.isCustomize(t)?r(t):e==="li"&&t.parent()?r(t.parent()):""}},{key:"getPluginNameByNodes",value:function(t){for(var n="",e=0;e<t.length;e++){var r=t[e],i=r.parent(),a="";switch(r.name){case"li":case"ul":case"ol":a=this.getPluginNameByNode(t[e]);break;case"p":if(i&&i.name==="li")a=this.getPluginNameByNode(i);else return"";break;default:if(this.editor.node.isBlock(r)&&r.find("ul,ol").length>0)break;return""}if(n&&a&&n!==a)return"";n=a}return n}},{key:"unwrapCustomize",value:function(t){if(this.editor.node.isCustomize(t))switch(t.name){case"li":if(this.editor.node.isCustomize(t)){var n=t.first();n!=null&&n.isCard()&&n.remove()}return t.removeAttributes("class"),t;case"ul":return t.removeAttributes("class"),t;default:return t}return t}},{key:"unwrap",value:function(t){var n=this,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:V("<p />"),r=0,i=this.editor,a=i.node,o=i.schema,l=o.data.globals.block||{},c=l.style||{};t.forEach(function(d){if(n.unwrapCustomize(d),a.isList(d)&&(r=parseInt(d.attributes(n.INDENT_KEY),10)||0,a.unwrap(d)),d.name==="li"){var v=a.clone(e,!1,!1);r!==0&&v.css("text-indent",r*2+"em"),d.removeAttributes(n.INDENT_KEY);var h=d.attributes();Object.keys(h).forEach(function(w){w!==fn&&w!=="id"&&l[w]&&v.attributes(w,h[w])});var g=d.css();g["text-align"]&&n.addAlign(v,g["text-align"]),delete g["text-align"],g[n.STYLE_POSITION_NAME]="",Object.keys(g).forEach(function(w){c[w]||(g[w]="")}),v.css(g),a.replace(d,v)}})}},{key:"normalize",value:function(t){if(!ge(this.editor))return[];var n=this.editor,e=n.change,r=n.block,i=n.node;t=t||e.range.get();var a=r.getBlocks(t),o=[];a.forEach(function(c,d){var v=c.parent();if(c.name==="p"){if((v==null?void 0:v.name)==="li"){d===0&&o.push(v),i.unwrap(c);return}if(v&&["ul","ol"].indexOf(v.name)>-1){c=i.replace(c,V("<li />")),o.push(c);return}}if(c.name==="li"&&(v==null?void 0:v.name)==="li"){d===0&&o.push(v),i.unwrap(c);return}if(["ul","ol"].indexOf(c.name)>-1&&(v==null?void 0:v.name)==="li"){i.unwrap(c);return}o.push(c)});var l=t.endNode.closest("li");return o.some(function(c){return c[0]===l[0]})||o.push(l),o}},{key:"split",value:function(t){if(!!ge(this.editor)){var n=this.editor,e=n.change,r=n.node,i=t||e.range.toTrusty(),a=this.normalize(t);if(a.length>0&&(a[0].name==="li"||a[a.length-1].name==="li")){var o=i.createSelection(),l=a[0],c=a[a.length-1],d=[],v=[],h,g;if(l.prev()){h=l.parent();for(var w=0;a[w]&&a[w].name==="li";)d.push(a[w]),w+=1}if(c.next()){g=c.parent();for(var x=c.next();x&&x.name==="li";)v.push(x),x=x.next()}var _;v.length>0&&g&&(_=r.clone(g,!1,!1),v.forEach(function(T){var S;(S=_)===null||S===void 0||S.append(T[0])}),g.after(_));var E;if(d.length>0&&h&&(E=r.clone(h,!1,!1),d.forEach(function(T){var S;(S=E)===null||S===void 0||S.append(T[0])}),h.after(E)),h&&g&&g.equal(h)&&h.name==="ol"){var M=(parseInt(h.attributes("start"),10)||1)+h.find("li").length;_.attributes("start",M)}o.move()}t||e.apply(i)}}},{key:"merge",value:function(t,n){var e=this;if(!!ge(this.editor)){var r=this.editor,i=r.change,a=r.block,o=r.node,l=n||i.range.toTrusty(),c=t?void 0:l.cloneRange().shrinkToElementNode().createSelection();if(t=t||a.getBlocks(l),t.forEach(function(v){if(v=v.closest("ul,ol"),!!o.isList(v)){var h=v.prev(),g=v.next();h&&e.isSame(h,v)&&(o.merge(h,v),v=h),g&&e.isSame(g,v)&&o.merge(v,g)}}),t=a.getBlocks(l),t.length>0){var d=t[0].closest("ul,ol");this.addStart(d)}c==null||c.move(),!n&&c!==void 0&&i.apply(l)}}},{key:"addStart",value:function(t){if(!!ge(this.editor)){var n=this.editor,e=n.change,r=n.node;if(!t){var i=this.editor.block.getBlocks(e.range.get());if(i.length===0)return;t=i[0].closest("ul,ol")}if(!(!t||!r.isList(t))){for(var a=parseInt(t.attributes(this.INDENT_KEY),10)||0,o=[],l=a,c=t.prev();c&&r.isList(c);){if(c.name==="ol"){var d=parseInt(c.attributes(this.INDENT_KEY),10)||0,v=parseInt(c.attributes("start"),10)||1,h=c.find("li").length;if(d===0){o[d]=v+h;break}d<=l&&(l=d,o[d]=o[d]||v+h)}else l=parseInt(c.attributes(this.INDENT_KEY),10)||0;c=c.prev()}for(var g=t;g;){if(r.isList(g)){var w=parseInt(g.attributes(this.INDENT_KEY),10)||0,x=parseInt(g.attributes("start"),10),_=g.find("li").length;if(g.name==="ol"){var E=o[w];w>0?(E=E||1,E>1?g.attributes("start",E):g.removeAttributes("start"),o[w]=E+_):E&&E!==x?(E>1?g.attributes("start",E):g.removeAttributes("start"),o[w]=E+_):(o[w]=(x||1)+_,o=o.slice(0,w+1))}}else o=[];var M=g.next();if(!M)break;g=M}}}}},{key:"addIndent",value:function(t,n,e){if(this.editor.node.isList(t)){var r=this.getIndent(t);n=r+(n<0?-1:1),e&&n>e&&(n=e),n<1?t.removeAttributes(this.INDENT_KEY):t.attributes(this.INDENT_KEY,n)}}},{key:"getIndent",value:function(t){return this.editor.node.isList(t)&&parseInt(t.attributes(this.INDENT_KEY),10)||0}},{key:"addAlign",value:function(t,n){if(t.name==="li")if(n&&n!=="left")["center","right"].indexOf(n)>-1&&t.css(Yt({},this.STYLE_POSITION_NAME,this.STYLE_POSITION_VALUE)),t.css({"text-align":n});else{var e;t.css((e={},Yt(e,this.STYLE_POSITION_NAME,""),Yt(e,"text-align",""),e))}}},{key:"addCardToCustomize",value:function(t,n,e){if(Ht(t)&&(t=V(t)),t.name==="li"){var r=t.first();if(!((r==null?void 0:r.isBlockCard())||(r==null?void 0:r.isCard())&&r.attributes(Gt)===n)){var i=this.editor.card,a=i.create(n,{value:e}),o=ln.create(this.editor),l=V("<br />");if(t.children().length>0){var c;(c=t.first())===null||c===void 0||c.before(l)}else t.append(l);o.select(l,!0),i.insertNode(o,a);var d=t.last();return(d==null?void 0:d.name)==="br"&&d.remove(),a}}}},{key:"addReadyCardToCustomize",value:function(t,n,e){if(Ht(t)&&(t=V(t)),t.name==="li"){var r=t.first();if(!((r==null?void 0:r.isBlockCard())||(r==null?void 0:r.isCard())&&r.attributes(Gt)===n)){var i=V("<span />");return t.prepend(i),this.editor.card.replaceNode(i,n,e),i}}}},{key:"addBr",value:function(t){var n=this,e=this.editor.node;if(e.isList(t))t.find("li").each(function(l){n.addBr(V(l))});else if(e.isCustomize(t)){for(var r=t.last();!((i=r)===null||i===void 0)&&i.isCursor();){var i;r=r.prev()}if(r){var a=t.children();if(a.length===1&&r.isCard()){t.append(V("<br />"));return}if(a.length>2&&r.name==="br"){var o;((o=r.prev())===null||o===void 0?void 0:o.name)!=="br"&&r.remove();return}for(;r;){if(r.equal(t.first())&&(r.isCard()||r.text()==="")){t.append(V("<br />"));return}if(r.type===Node.TEXT_NODE){if(r.text()!=="")return;r=r.prev()}else if(r.type===Node.ELEMENT_NODE){if(!e.isMark(r)||r.text()!=="")return;r=t.prev()}else r=r.prev()}}else t.append(V("<br />"))}}},{key:"insert",value:function(t,n){var e,r,i,a=this;if(!(!ge(this.editor)||t.childNodes.length===0)){var o=this.editor,l=o.change,c=o.node,d=o.block,v=n||l.range.toTrusty();v.collapsed||l.delete(v,!0,!0);var h=v.cloneRange().shrinkToElementNode(),g=h.startNode,w=h.startOffset,x=g;if(c.isList(g)&&(x=g.children().eq(w)),x=(e=x)===null||e===void 0?void 0:e.closest("li",function(Rn){return c.isBlock(Rn)&&Rn.nodeName!=="LI"?void 0:Rn.parentElement||void 0}),!(((r=x)===null||r===void 0?void 0:r.length)===0||((i=x)===null||i===void 0?void 0:i.name)!=="li")){v.shrinkToElementNode().shrinkToTextNode(),d.split(v);var _=v.createSelection("list-insert");this.split(v);var E=function(pn){d.merge(pn),a.merge(void 0,pn),_==null||_.move(),n||l.apply(pn)},M=V(t).toArray().some(function(Rn){return c.isBlock(Rn)})?V(t.childNodes[0]):V("<p></p>").append(V(t)),T=v.startNode.closest("ul,ol");if(!T||!c.isList(T)){E(v);return}var S=v.startNode.closest("li");if(c.isCustomize(T)){var D,I,P=(D=T.prev())===null||D===void 0||(I=D.first())===null||I===void 0?void 0:I.first();if(P){var B=this.editor.card.find(P);B&&this.addCardToCustomize(S,B.name,B.getValue())}}var $=!c.isList(M)||this.isSame(T,M);if($){for(var q,G;c.isBlock(M);){var H=M.first();if(H&&c.isBlock(H)){M=H;continue}break}var z=(q=S.parent())===null||q===void 0||(G=q.prev())===null||G===void 0?void 0:G.last();if((z==null?void 0:z.name)==="li"){var O=z==null?void 0:z.children();if(O==null||O.each(function(Rn,pn){var sr;Rn.nodeName==="BR"&&((sr=O.eq(pn))===null||sr===void 0||sr.remove())}),c.isCustomize(M)){var Q;(Q=M.first())===null||Q===void 0||Q.remove()}if(M.isBlockCard()){var ie;(ie=z.parent())===null||ie===void 0||ie.after(M)}else z==null||z.append(c.isBlock(M)?M.children():M),z&&this.addBr(z),c.isBlock(M)&&M.remove()}}else{var L,F,X=(L=S.parent())===null||L===void 0||(F=L.prev())===null||F===void 0?void 0:F.last();if(X&&(c.isEmpty(X)||this.isEmptyItem(X))){var se,Y;X.remove(),((se=X.parent())===null||se===void 0?void 0:se.children().length)===0&&((Y=X.parent())===null||Y===void 0||Y.remove())}}if(t.childNodes.length===0){var j=S.parent();if(M.isBlockCard()){if(j){this.isEmptyItem(S)&&j.children().length===1&&j.remove();var J=[j],pe=M.prev();pe&&c.isList(pe)&&J.push(pe),this.merge(J)}}else{var fe,ve;if(c.isCustomize(S)){var ae;(ae=S.first())===null||ae===void 0||ae.remove()}S.find("br").remove(),j==null||(fe=j.prev())===null||fe===void 0||(ve=fe.last())===null||ve===void 0||ve.append(S.children()),j==null||j.remove()}E(v);return}var Ee=v.startNode.closest("li").parent();if(!Ee){E(v);return}for(var Le=t.childNodes.length,Re=V(t.childNodes[Le-1]),Ce=(!c.isList(Re)||this.isSame(T,Re))&&!Re.isBlockCard(),ne=!1,me=0;me<t.childNodes.length;me++){var ue=V(t.childNodes[me]);if(c.isList(t.childNodes[me])&&!this.isSame(T,ue)||ue.isBlockCard()){ne=!0;break}}for(var Te=Ee.prev(),ze=Te?[Te]:[],We=0;We<(Ce&&!ne?Le-1:Le);We++){var et=V(t.childNodes[0]);if(c.isList(et)){if(et.children().length===0){et.remove();continue}Ee.before(et),ze.push(et)}else{if(ne){Ee==null||Ee.before(et);continue}if(c.isBlock(et)&&et.allChildren().forEach(function(Rn){Rn.type!==vr().TEXT_NODE&&c.isBlock(Rn)&&c.unwrap(Rn)}),c.isCustomize(Ee)){var Ke,Ge=(Ke=Ee.first())===null||Ke===void 0?void 0:Ke.first();if(Ge&&Ge.isCard()){var _e=Ge.attributes(Gt)||Ge.attributes("name"),Ue=this.toCustomize(et,_e);Ue&&(Array.isArray(Ue)?Ue:[Ue]).forEach(function(Rn){Ee==null||Ee.before(Rn)})}}else{var Ae=this.toNormal(et,Ee.name);(Array.isArray(Ae)?Ae:[Ae]).forEach(function(Rn){Ee==null||Ee.before(Rn)})}}}if(ze.length>0&&this.merge(ze),!$&&c.isEmptyWidthChild(Ee)&&Ee.remove(),t.childNodes.length===0){if(c.isEmpty(S)||this.isEmptyItem(S)){var ot,nt,wt,bt,Et=(ot=S.parent())===null||ot===void 0?void 0:ot.prev();S.find("br").remove(),c.isCustomize(S)&&((nt=S.first())===null||nt===void 0||nt.remove()),Et&&c.isList(Et)?(wt=Et.last())===null||wt===void 0||wt.append(S.children()):Et&&Et.append(S.children()),(bt=S.parent())===null||bt===void 0||bt.remove()}E(v);return}for(;c.isBlock(Re);){var Dt=Re.last();if(Dt&&c.isBlock(Dt)){Re=Dt;continue}break}var wn=S;if(wn){var zn;if(!(!((zn=Re.parent())===null||zn===void 0)&&zn.fragment))for(var kr=wn,vt=Re.prev();vt&&vt.length>0;){var bi=vt.prev();kr.before(vt),kr=vt,vt=bi}if(Re.name==="br")Re.remove();else{var tr=Re.children();if(tr.each(function(Rn,pn){var sr;Rn.nodeName==="BR"&&((sr=tr.eq(pn))===null||sr===void 0||sr.remove())}),c.isCustomize(wn)){var Tt;if(c.isCustomize(Re)){var Dn=Re.first();Dn!=null&&Dn.isCard()&&Dn.remove()}(Tt=wn.first())===null||Tt===void 0||Tt.after(c.isBlock(Re)?Re.children():Re)}else wn.prepend(c.isBlock(Re)?Re.children():Re);this.addBr(wn),c.isBlock(Re)&&Re.remove()}}E(v)}}}},{key:"blockToItem",value:function(t,n,e,r){var i=V("<li></li>"),a=this.editor,o=a.node,l=a.schema;if(!o.isList(n))return n;var c=tn(t.css("text-indent"))/2,d=l.data.globals.block||{},v=t.attributes();Object.keys(v).forEach(function(w){w!==fn&&w!=="id"&&d.name&&i.attributes(w,v[w])});var h=d.style||{},g=t.css();return g["text-align"]&&this.addAlign(i,g["text-align"]),delete g["text-align"],delete g[this.STYLE_POSITION_NAME],Object.keys(g).forEach(function(w){h[w]||delete g[w]}),i.css(g),t=o.replace(t,i),e&&(t.addClass(this.CUSTOMZIE_LI_CLASS),this.addCardToCustomize(t,e,r)),c&&n.attributes(this.INDENT_KEY,c),o.wrap(t,n)}},{key:"toCustomize",value:function(t,n,e){var r=this,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"ul",a=this.editor.node;if(Array.isArray(t)){var o=[];return t.forEach(function(d){a.isCustomize(d)&&r.unwrapCustomize(d),o=o.concat(r.toCustomize(d,n,e,i))}),o}else{var l=V("<".concat(i,' class="').concat(this.CUSTOMZIE_UL_CLASS,'"/>'));switch(t.name){case"li":return t.addClass(this.CUSTOMZIE_LI_CLASS),this.addCardToCustomize(t,n,e),t;case"ul":case"ol":return l.attributes(t.attributes()),t=a.replace(t,l),t;default:if(t.name==="p"||a.isNestedBlock(t)&&!t.isBlockCard()){var c;if(((c=t.parent())===null||c===void 0?void 0:c.name)==="li")return a.unwrap(t),t;t=this.blockToItem(t,l,n,e)}return t}}}},{key:"toNormal",value:function(t){var n=this,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"ul",r=arguments.length>2?arguments[2]:void 0,i=this.editor.node;if(Array.isArray(t)){var a=[];return t.forEach(function(c){var d=n.toNormal(c,e,r);a=a.concat(d)}),a}else{this.unwrapCustomize(t);var o=V("<".concat(e," />"));switch(t.name){case"li":case e:return t;case"ol":case"ul":return o.attributes(t.attributes()),o.name==="ul"&&o.removeAttributes("start"),t=i.replace(t,o),t;default:if(t.name==="p"||i.isNestedBlock(t)&&!t.isBlockCard()){var l;if(((l=t.parent())===null||l===void 0?void 0:l.name)==="li")return i.unwrap(t),t;t=this.blockToItem(t,o),r&&t.attributes("start",r)}return t}}}},{key:"isFirst",value:function(t){var n=t.startNode,e=t.startOffset,r=t.cloneRange(),i=n.name==="li"?n:n.closest("li");if(!i[0])return!1;r.select(i,!0),r.setEnd(n[0],e);var a=r.cloneContents();if(!a.firstChild)return!0;var o=V(a.firstChild),l=V(a.lastChild||[]);if(a.childNodes.length===1&&o.name==="br"||a.childNodes.length===1&&i.hasClass(this.CUSTOMZIE_LI_CLASS)&&o.isCard())return!0;var c=this.editor.node;if(a.childNodes.length===2&&i.hasClass(this.CUSTOMZIE_LI_CLASS)&&o.isCard()&&c.isEmpty(l))return!0;var d=V("<div />");return d.append(a),c.isEmpty(d)}},{key:"isLast",value:function(t){var n=t.endNode,e=t.endOffset,r=t.cloneRange(),i=n.name==="li"?n:n.closest("li");if(!i[0])return!1;r.select(i,!0),r.setStart(n,e);var a=r.cloneContents();if(!a.firstChild)return!0;var o=V(a.firstChild),l=V(a.lastChild||[]);if(a.childNodes.length===1&&o.name==="br"||a.childNodes.length===1&&i.hasClass(this.CUSTOMZIE_LI_CLASS)&&o.isCard())return!0;var c=this.editor.node;if(a.childNodes.length===2&&i.hasClass(this.CUSTOMZIE_LI_CLASS)&&o.isCard()&&c.isEmpty(l))return!0;var d=V("<div />");return d.append(a),this.editor.node.isEmpty(d)}}]),b}(),WC=function(){function b(u){Fe(this,b),this.engine=void 0,this.engine=u}return Be(b,[{key:"trigger",value:function(t){var n=this.engine,e=n.change,r=n.node,i=n.block,a=e.range.get(),o=a.cloneRange().shrinkToTextNode(),l=o.collapsed,c=o.endNode,d=o.startNode,v=o.startOffset,h=o.endOffset;if(l){var g=i.closest(d);if(g.length>0&&r.isEmpty(g))return}if(c.type===Node.TEXT_NODE||d.type===Node.TEXT_NODE){if(!l){var w=c.parent();if(w&&c.type===Node.TEXT_NODE&&r.isMark(w)){var x=c.text(),_=x.substr(h);if(!/^\u200b$/.test(_))return!0;a.setEnd(c,h+1)}return!0}var E=d.parent();if(E&&d.type===Node.TEXT_NODE&&r.isMark(E)){if(v<1)return!0;var M=d.text(),T=M.substr(v-1,1);if(!/^\u200b$/.test(T))return!0;if(v===1){var S=E.prev();if(S&&!r.isEmpty(S)){var D=a.cloneRange().select(S,!0).shrinkToTextNode().collapse(!1),I=D.startNode,P=D.startOffset;a.setStart(I,P-1)}else if(!S&&r.isEmpty(E)){var B=E.parent(),$=E.getIndex();E.remove(),B&&a.setStart(B,$<=0?0:$-1)}}else a.setStart(d,v-1);return!0}if(E=d.prev()||void 0,E&&d.type===Node.TEXT_NODE&&r.isMark(E)){var q=d.text(),G=q.substr(v-1,1);if(!/^\u200b$/.test(G))return!0;if(v===1){var H=a.cloneRange().select(E,!0).shrinkToTextNode().collapse(!1),z=H.startNode,O=H.startOffset;a.setStart(z,O-1)}else a.setStart(d,v>0?v-1:0)}}return!0}}]),b}(),UC=function(){function b(u){Fe(this,b),this.editor=void 0,this.editor=u}return Be(b,[{key:"init",value:function(){var t=this,n=this.editor;if(ge(n)){var e,r=new WC(n);(e=n.typing.getHandleListener("backspace","keydown"))===null||e===void 0||e.on(function(i){return r.trigger(i)}),n.on("keydown:space",function(i){return t.triggerMarkdown(i)})}}},{key:"triggerMarkdown",value:function(t){var n=this.editor;if(!!ge(n)){var e=n.change,r=e.range.get();if(!(!r.collapsed||e.isComposing())){var i=r.startNode,a=r.startOffset,o=i.type===Node.TEXT_NODE?i:i.children().eq(a-1);if(!!o){var l=r.toPath(),c=o.type===Node.TEXT_NODE?o.text().substr(0,a):o.text(),d=!Object.keys(n.plugin.components).some(function(v){var h=n.plugin.components[v];if(Xh(h)&&!!h.markdown){var g=h.triggerMarkdown(t,c,o);if(g===!1)return!0}});return d||(e.rangePathBeforeCommand=l),d}}}}},{key:"findPlugin",value:function(t){var n=this.editor,e=n.node,r=n.plugin,i=n.schema;if(!!e.isMark(t)){var a=void 0;return Object.keys(r.components).some(function(o){var l=r.components[o];if(Xh(l)&&t.name===l.tagName){var c=l.schema();return(Array.isArray(c)?c.find(function(d){return i.checkNode(t,d.attributes)}):i.checkNode(t,c.attributes))?(a=l,!0):void 0}}),a}}},{key:"closest",value:function(t){for(var n=this.editor.node,e=t.parent();e&&!e.isEditable()&&!n.isBlock(e);){if(n.isMark(e))return e;var r=e.parent();if(!r)break;e=r}return t}},{key:"closestNotMark",value:function(t){for(;(this.editor.node.isMark(t)||t.isText())&&!t.isEditable();){var n=t.parent();if(!n)break;t=n}return t}},{key:"compare",value:function(t,n,e){if(t.name!==n.name)return!1;var r=t.attributes();delete r.style;var i=n.attributes();delete i.style;var a=t.css(),o=n.css();delete r.class,delete i.class;var l=t.get().className.trim(),c=n.get().className.trim(),d=l!==""?l.split(/\s+/):[],v=c!==""?c.split(/\s+/):[],h=this.editor.schema,g=h.find(function(x){return x.name===t.name}),w=function(_){for(var E=0;E<g.length;E++){var M=g[E];if(M.attributes&&h.checkValue(M.attributes,"class",_.join(" ").trim()))return M.attributes.class.toString()}return _.join(" ").trim()};return e||(d=d.length>0?[w(d)]:[],v=v.length>0?[w(v)]:[]),!(Object.keys(r).length!==Object.keys(i).length||!Object.keys(r).every(function(x){return e?r[x]===i[x]:!!i[x]})||Object.keys(a).length!==Object.keys(o).length||!Object.keys(a).every(function(x){return e?a[x]===o[x]:!!o[x]})||d.length!==v.length||!d.every(function(x){return v.indexOf(x)!==-1}))}},{key:"contain",value:function(t,n){var e=n.attributes(),r=e.style||{};delete e.style;var i=t.attributes(),a=i.style||{};return delete i.style,Object.keys(e).every(function(o){return!!i[o]})&&Object.keys(r).every(function(o){return!a[o]})}},{key:"unwrapEmptyMarks",value:function(t,n){var e=this.editor.node,r=t.allChildren();r.forEach(function(i){if(e.isEmpty(i)&&e.isMark(i)&&(!n||n(i))){var a=i.children();a.length===1&&a.isText()?i.remove():e.unwrap(i)}})}},{key:"splitOnCollapsed",value:function(t,n,e){var r=this;if(!!t.collapsed){t.enlargeFromTextNode(),t.shrinkToElementNode();var i=t.startNode,a=i.parent(),o=i.isCard()?i:i.closest(Ar),l=this.editor.node;if((o.length===0||o.attributes(gi)!=="inline")&&(l.isMark(i)||a&&l.isMark(a))){var c,d=this.closestNotMark(i),v=t.createSelection(),h=v.getNode(d,"left"),g=void 0,w=void 0,x=[];if(e){Ht(e)&&(e=V(e));var _=e.getPath(d.get()),E=d.clone(!0);x=_.slice(1),w=V(E.getChildByPath(_.slice(0,1))),g=v.getNode(E,"right",!1)}else g=v.getNode(d,"right");this.unwrapEmptyMarks(h,function(ve){return!ve.isCursor()}),this.unwrapEmptyMarks(g,function(ve){n&&!Array.isArray(n)&&(n=[n]);var ae=!n||n.length===0||!ve.isCard()&&n.some(function(J){return r.compare(ve,J)});return ae});var M=d.children();M.each(function(ve,ae){var J=M.eq(ae);J!=null&&J.isCard()||J==null||J.remove()});var T=void 0,S=function(ae){ae.each(function(J,pe){var Ee=ae.eq(pe);if(Ee!=null&&Ee.isCard()){T=T?T.next():d.first(),T&&(ae[pe]=T[0]);return}T?(T.after(J),T=Ee):(T=Ee,d.prepend(J))})},D=h.children(),I=D.toArray();S(D);var P=g.children(),B=P.toArray();w&&(e=(c=B.find(function(ve){return ve.equal(w)}))===null||c===void 0?void 0:c.getChildByPath(x)),S(P),B=P.toArray();var $=V("\u200B",null);if(I.length===1&&I[0].name==="br"&&(I[0].remove(),I.splice(0,1)),B.length===1&&B[0].name==="br"&&(B[0].remove(),B.splice(0,1)),B.filter(function(ve){return!ve.isCursor()}).length>0){for(var q=B[0],G=0;G<B.length-1&&(q=B[G],!!q.isCursor());G++);if(l.isEmpty(q)){for(var H=q.first();H&&!H.isText();)q=H,H=H.first();q.isText()?q.before($):q.prepend($)}else{var z=l.isMark(i)?i:i.parent(),O=$;n&&!Array.isArray(n)&&(n=[n]);for(var Q=function(){var ae=z.clone();if(!n.some(function(pe){return r.compare(ae,pe)})){var J=$.equal(O);O=l.wrap(O,ae),J&&($=O.first())}z=z.parent()};n&&n.length>0&&z&&l.isMark(z);)Q();q.before(O)}t.select($).collapse(!1)}else if(I.filter(function(ve){return!ve.isCursor()}).length>0){var ie=I[I.length-1];ie.after($),t.select($).collapse(!1)}else t.select(d,!0).collapse(!0);var L=!1;d.children().each(function(ve){var ae=V(ve);if(ae.isText()){var J=ve.textContent,pe=(J==null?void 0:J.replace(/\u200b+/g,"\u200B"))||"";if(J!==pe&&(ve.textContent=pe),L){var Ee=ae.next(),Le=ae.parent();(!Ee&&Le&&!l.isInline(Le)||Ee&&!l.isInline(Ee))&&pe.startsWith("\u200B")?(pe=pe.substring(1),pe?ve.textContent=pe:ae.remove()):L=!1}pe.endsWith("\u200B")&&(L=!0)}else L=!1});var F=l;if($[0].parentNode){var X=$[0],se=null,Y=0,j=function(ae,J){for(var pe=function(Te){return J?Te.previousSibling:Te.nextSibling};ae;){if(ae.nodeType!==X.nodeType)return;var Ee=pe(ae);if(ae.textContent===se){var Le;if(Ee&&F.isInline(Ee)||!Ee&&ae.parentNode&&F.isInline(ae.parentNode))break;(Le=ae.parentNode)===null||Le===void 0||Le.removeChild(ae),ae=Ee}else{var Re,Ce;if(J)for(;se&&((ne=ae.textContent)===null||ne===void 0?void 0:ne.endsWith(se));){var ne;if(Ee&&F.isInline(Ee)||!Ee&&ae.parentNode&&F.isInline(ae.parentNode))break;ae.textContent=ae.textContent.substring(0,ae.textContent.length-Y)}else for(;se&&((me=ae.textContent)===null||me===void 0?void 0:me.startsWith(se));){var me;if(Ee&&F.isInline(Ee)||!Ee&&ae.parentNode&&F.isInline(ae.parentNode))break;ae.textContent=ae.textContent.substring(se.length)}if(((Re=ae.textContent)===null||Re===void 0?void 0:Re.length)!==0)return;(Ce=ae.parentNode)===null||Ce===void 0||Ce.removeChild(ae),ae=Ee}}};if(X.nodeType===Node.TEXT_NODE){var fe=X.textContent;se=fe,Y=se.length,j(X.previousSibling,!0),j(X.nextSibling,!1)}}}return e}}},{key:"splitOnExpanded",value:function(t,n){if(!t.collapsed){t.enlargeToElementNode(),t.shrinkToElementNode();var e=t.startNode,r=t.endNode,i=e.isCard()?e:e.closest(Ar),a=r.isCard()?r:r.closest(Ar);if(!(i.length>0&&i.attributes(gi)==="inline"||a.length>0&&a.attributes(gi)==="inline")){var o=this.closestNotMark(e),l=this.closestNotMark(r);if(!o.equal(l)){var c=t.cloneRange();c.collapse(!0);var d=t.cloneRange();d.collapse(!1);var v=void 0,h=c.startOffset,g=d.endOffset;o.contains(l)?(v=this.splitOnCollapsed(c,n,d.endNode),t.setStart(c.startContainer,c.startOffset),v&&d.setOffset(v,g,g),this.splitOnCollapsed(d,n),t.setEnd(d.startContainer,d.startOffset)):(v=this.splitOnCollapsed(d,n,c.startNode),t.setEnd(d.startContainer,d.startOffset),v&&c.setOffset(v,h,h),this.splitOnCollapsed(c,n),t.setStart(c.startContainer,c.startOffset));return}var w=this.editor.node,x=e.parent(),_=w.isMark(e)||x&&w.isMark(x),E=r.parent(),M=w.isMark(r)||E&&w.isMark(E);if(!_&&!M)return;var T=t.commonAncestorNode;T.isText()&&(T=T.parent());var S=this.closestNotMark(T),D=t.createSelection(),I=D.getNode(S,"left"),P=D.getNode(S),B=D.getNode(S,"right");this.unwrapEmptyMarks(I),this.unwrapEmptyMarks(B);var $=S.children();$.each(function(ie,L){var F=$.eq(L);F!=null&&F.isCard()||F==null||F.remove()});var q=void 0,G=function(L){L.each(function(F,X){var se=L.eq(X);if(se!=null&&se.isCard()){q=q?q.next():S.first(),q&&(L[X]=q[0]);return}q?(q.after(F),q=se):(q=se,S.prepend(F))})},H=I.children();G(H);var z=P.children(),O=z.toArray();G(z);var Q=B.children();G(Q),t.setStartBefore(O[0][0]),t.setEndAfter(O[O.length-1][0])}}}},{key:"split",value:function(t,n){if(!!ge(this.editor)){var e=this.editor.change,r=t||e.range.toTrusty(),i=vr(r.startContainer),a=r.collapsed;if((typeof n=="string"||!Array.isArray(n)&&n&&Ht(n))&&(n=V(n,i)),a)this.splitOnCollapsed(r,n);else{var o=r.createSelection("mark-split");this.splitOnExpanded(r,n),o.move()}t||e.apply(r)}}},{key:"wrapByNode",value:function(t,n){var e=this,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.findPlugin(n),i=this.editor.node;if(i.isMark(t))if(i.isEmpty(t))t.name!==n.name&&t.remove();else{for(var a=t,o=a.children().toArray(),l=this.findPlugin(a),c=!1;i.isMark(a)&&o.filter(function(q){return!q.isCursor()}).length===1&&r&&l&&r.mergeLeval<=l.mergeLeval;){var d=o.find(function(q){return!q.isCursor()});if(i.isMark(d))a=d,o=a.children().toArray();else if(d.isText())a=d;else break;if(r.name===l.name){c=!0;break}l=this.findPlugin(a)}i.removeZeroWidthSpace(a);var v=a.parent();if(a.isText()||c){for(var h=!1;v&&i.isMark(v);){if(this.compare(v.clone(),n,!0)){h=!0;break}else if(v.children().toArray().filter(function(q){return!q.isCursor()}).length===1){var g=this.findPlugin(v);if(r&&r===g&&r.combineValueByWrap===!0){i.wrap(v,n,!0),h=!0;break}else if(r&&r===g){i.unwrap(v),h=!1;break}}v=v.parent()}if(h)return!1}var w=a.allChildren();return w.forEach(function(q){if(q.type!==vr().TEXT_NODE&&i.isMark(q)){var G=e.findPlugin(q);G===r&&!(r!=null&&r.combineValueByWrap)&&i.unwrap(q)}}),i.wrap(a,n)}else if(t.isCard()){var x=this.editor.card.find(t);if(x&&x.executeMark)return x.executeMark(n,!0)}else if(t.isText()&&!i.isEmpty(t)){i.removeZeroWidthSpace(t);for(var _=t.parent(),E=!1;_&&i.isMark(_);){if(this.compare(_.clone(),n,!0)){E=!0;break}else if(_.children().toArray().filter(function(q){return!q.isCursor()}).length===1){var M=this.findPlugin(_);if(r&&r===M&&r.combineValueByWrap===!0){i.wrap(_,n,!0),E=!0;break}else if(r&&r===M){var T=i.unwrap(_),S=T.find(function(q){return!q.isCursor()&&i.isMark(q)});S?_=S:T.length>0&&(_=T[0].parent()),E=!1;break}}var D=_.parent();if(D&&i.isMark(_))_=D;else break}if(E)return!1;for(var I=t.parent(),P=I?this.findPlugin(I):void 0,B=!1,$=function(){B=!0;var G=I.children().toArray(),H=I.clone();G.forEach(function(z){z.isCursor()||z.type===3&&/^\u200b$/.test(z.text()||"")||(t.equal(z)||z.contains(t)?t=i.wrap(i.replace(t,H),n):(z=i.wrap(z,H),i.wrap(z,n)))}),i.unwrap(I),I=e.closest(t)};I&&i.isMark(I)&&r&&P&&r.mergeLeval>P.mergeLeval;)$();return B||i.wrap(t,n),t}}},{key:"wrap",value:function(t,n){var e=this,r=ge(this.editor)?this.editor.change:void 0;if(!(!n&&!r)){var i=this.editor.node,a=n||r.range.toTrusty(),o=vr(a.startContainer);if(typeof t=="string"||Ht(t)?t=V(t,o):t=t,!!i.isMark(t)){var l=a.commonAncestorNode;l.type===Node.TEXT_NODE&&(l=l.parent());var c=this.editor.card.find(l,!0),d=c==null?void 0:c.isEditable,v=d?c!=null&&c.getSelectionNodes?c.getSelectionNodes():[]:[l];v.length===0&&(d=!1,v.push(l));var h=i,g=this.findPlugin(t);if(a.collapsed&&(!d||!(c!=null&&c.getSelectionNodes)||v.length===1)){t.children().toArray().filter(function(G){return!G.isCursor()}).length===0&&t.append(o.createTextNode("\u200B"));var w=a.shrinkToTextNode(),x=w.startNode,_=x.parent(),E=[],M=!1;if(x.isText()){for(var T=!1;_&&h.isMark(_);){if(this.compare(_.clone(),t,!0)){T=!0;break}var S=this.findPlugin(_);if(_.children().length===1){if(g&&g===S&&g.combineValueByWrap===!0){h.wrap(_,t,!0),T=!0;break}else if(g&&g===S){if(this.split(a),a.collapsed)for(var D=_.parent();D&&h.isMark(D);)t=h.wrap(t,D),D=D.parent();T=!1;break}}g&&(!S||g.mergeLeval>S.mergeLeval)?E.push(_.clone(!1)):!M&&E.length>0&&(E.push(t.clone(!1)),M=!0),_=_.parent()}if(T)return}if(E.length>0){var I=E[0];I.append(t.children());for(var P=1;P<E.length;P++)I=h.wrap(I,E[P]);t=M?I:h.wrap(I,t),this.split(a)}h.insert(t,a),this.merge(a),a.handleBr(),n||r==null||r.apply(a);return}d||(this.split(a),l=a.commonAncestorNode,l.type===Node.TEXT_NODE&&(l=l.parent()),v[0]=l);var B=d?void 0:a.createSelection();if(B&&!B.anchor&&!B.focus){n||r==null||r.apply(a);return}var $=!!d;if(v.forEach(function(G){G.traverse(function(H){if(t=t,d||!H.equal(B==null?void 0:B.anchor)){if($){if(!d&&H.equal(B==null?void 0:B.focus))return $=!1,!1;var z=h.isMark(H),O=e.wrapByNode(H,t,g);if(O&&typeof O!="boolean"&&z){var Q;if(!d&&(B==null?void 0:B.focus)&&O.find('[data-element="'.concat(B.focus.attributes(lt),'"]')).equal(B.focus))return $=!1,!1;if((B==null?void 0:B.focus)&&((Q=O.next())===null||Q===void 0?void 0:Q.equal(B.focus)))return $=!1,!1}if(typeof O!="undefined")return!0}}else $=!0},!0,"editable")}),B==null||B.move(),d){var q=[];v.forEach(function(G){G.allChildren().forEach(function(H){H.isElement()&&i.isMark(H)&&q.push(H)})}),this.mergeMarks(q)}else this.merge(a);n||r==null||r.apply(a)}}}},{key:"mergeMarks",value:function(t){var n=this,e=this.editor.node;t.forEach(function(r){var i=r.prev(),a=r.next(),o=r.parent(),l=function v(h,g){if(e.isMark(h)){var w=void 0;if(n.compare(h,g,!0))return!0;if(w=h.parent())return v(w,g)}return!1};if(o&&l(o,r)){e.unwrap(r);return}i&&n.compare(i,r,!0)&&(e.merge(i,r),r=i),a&&n.compare(a,r,!0)&&e.merge(r,a);var c=[],d=r.children();d.each(function(v,h){var g=d.eq(h);g&&!g.isCursor()&&e.isMark(g)&&c.push(g)}),c.length>0&&n.mergeMarks(c)})}},{key:"merge",value:function(t){if(!!ge(this.editor)){var n=this.editor.change,e=t||n.range.toTrusty(),r=this.findMarks(e);if(r.length!==0){var i=e.shrinkToElementNode().createSelection();this.mergeMarks(r),i.move(),e.handleBr(),t||n.apply(e)}}}},{key:"unwrapByNodes",value:function(t,n){var e=this,r=this.editor.node;t.forEach(function(i){n=n,!n||!i.isCard()&&(Array.isArray(n)?n:[n]).some(function(a){return e.compare(i,a)})?r.unwrap(i):n?(Array.isArray(n)?n:[n]).forEach(function(a){var o,l=a.css();Object.keys(l).forEach(function(d){i.css(d,"")});var c=(o=a.get())===null||o===void 0?void 0:o.className.split(/\s+/);c&&function(){for(var d=e.editor.schema,v=d.find(function(w){return w.name===i.name}),h=function(x){var _=v[x];c.forEach(function(E){E=E.trim(),E!==""&&_.attributes&&d.checkValue(_.attributes,"class",E)&&i.removeClass(E)})},g=0;g<v.length;g++)h(g)}()}):(i.removeAttributes("class"),i.removeAttributes("style"))})}},{key:"unwrap",value:function(t,n){var e=this;if(!!ge(this.editor)){var r=this.editor,i=r.change,a=r.node,o=n||i.range.toTrusty(),l=vr(o.startContainer)||document;t!==void 0&&!Array.isArray(t)&&(typeof t=="string"||Ht(t))&&(t=V(t,l));var c=o.commonAncestorNode;c.type===Node.TEXT_NODE&&(c=c.parent());var d=this.editor.card.find(c,!0),v=d==null?void 0:d.isEditable,h=v?d!=null&&d.getSelectionNodes?d.getSelectionNodes():[]:[c];if(h.length===0&&(v=!1,h.push(c)),v||(this.split(o,o.collapsed?t:void 0),c=o.commonAncestorNode,c.type===Node.TEXT_NODE&&(c=c.parent()),h[0]=c),o.collapsed&&(!v||!(d!=null&&d.getSelectionNodes)||h.length===1)){n||i.apply(o);return}var g=v?void 0:o.createSelection("mark-unwrap");if(g&&!g.has()){this.merge(o),n||i.apply(o);return}var w=[],x=!!v;if(h.forEach(function(E){E.traverse(function(M){if(!(!v&&(M.isText()||!(g!=null&&g.anchor)))){if(v||(g==null?void 0:g.anchor)&&!M.equal(g.anchor)){if(x&&(v||!M.equal(g==null?void 0:g.focus))){if(a.isMark(M)&&!M.isCard()&&(v||o.isPointInRange(M,0)))w.push(M);else if(M.isCard()){var T=e.editor.card.find(M);T&&T.executeMark&&(Array.isArray(t)?t:[t]).forEach(function(D){T.executeMark(D,!1)})}}}else if(!v&&(x=!0,(g==null?void 0:g.anchor)&&M.equal(g.anchor)&&!g.anchor.prev()))for(var S=g.anchor.parent();S&&!S.isCard()&&a.isMark(S)&&(w.push(S),S=S.parent(),!(S&&S.children().length>1)););}},!0,"editable")}),this.unwrapByNodes(w,t),g==null||g.move(),v){var _=[];h.forEach(function(E){E.allChildren().forEach(function(M){M.isElement()&&a.isMark(M)&&_.push(M)})}),this.mergeMarks(_)}else this.merge(o);n||i.apply(o)}}},{key:"insert",value:function(t,n){var e;if(!!ge(this.editor)){var r=this.editor,i=r.change,a=r.node,o=n||i.range.toTrusty();if(typeof t=="string"||Ht(t)){var l=vr(o.startContainer);t=V(t,l)}o.collapsed||i.delete(o),(e=a.insert(t,o))===null||e===void 0||e.handleBr().select(t).collapse(!1),n||i.apply(o)}}},{key:"findMarks",value:function(t){var n=this,e=t.cloneRange();if(e.startNode.isRoot()&&e.shrinkToElementNode(),!e.startNode.inEditor()||this.editor.card.find(e.startNode))return[];var r=this.editor.node,i=function($,q){var G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!!q.collapsed){var H=q.startNode,z=q.startOffset,O=H.findParent();if(!!O){var Q=q.cloneRange();if(Q.select(O,!0),G){Q.setEnd(H,z),Q.enlargeFromTextNode(),Q.enlargeToElementNode(!0);var ie=H.children(),L=Q.endNode,F=Q.endOffset,X=L.children(),se=X.eq(F),Y=ie.eq(z)||ie.eq(z-1);if(!$&&L.type===Node.ELEMENT_NODE&&se&&r.isBlock(se)&&(H.type!==Node.ELEMENT_NODE||!!Y&&!r.isBlock(Y)))return;Q.select(O,!0),Q.setStart(L,F),Q.shrinkToElementNode(),Q.shrinkToTextNode(),q.setStart(Q.startContainer,Q.startOffset),q.collapse(!0)}else{Q.setStart(H,z),Q.enlargeFromTextNode(),Q.enlargeToElementNode(!0);var j=H.children(),fe=Q.startNode,ve=Q.startOffset,ae=fe.children(),J=ae.eq(ve),pe=j.eq(z)||j.eq(z-1);if(!$&&fe.type===Node.ELEMENT_NODE&&J&&r.isBlock(J)&&(H.type!==Node.ELEMENT_NODE||pe&&!r.isBlock(pe)))return;Q.select(O,!0),Q.setEnd(fe,ve),Q.shrinkToElementNode(),Q.shrinkToTextNode(),q.setEnd(Q.endContainer,Q.endOffset),q.collapse(!1)}}}};if(!e.collapsed){var a=e.cloneRange(),o=e.cloneRange();a.collapse(!0),o.collapse(!1),i(!0,a,!0),i(!0,o),e.setStart(a.startContainer,a.startOffset),e.setEnd(o.startContainer,o.startOffset)}i(!1,e);var l=e.startContainer,c=e.startOffset,d=e.endContainer,v=e.endOffset,h=l,g=d;l.nodeType===Node.ELEMENT_NODE&&l.childNodes[c]&&(h=l.childNodes[c]||l),d.nodeType===Node.ELEMENT_NODE&&v>0&&d.childNodes[v-1]&&(g=d.childNodes[v-1]||l),e.collapsed&&(h=g);var w=function($,q){$.some(function(G){return G.equal(q)})||$.push(q)},x=r,_=function($){for(var q=[];$&&!($.type===Node.ELEMENT_NODE&&$.isEditable());){if(x.isMark($)&&!$.attributes(Gt)&&!$.attributes(jn))q.push($);else if($.isCard()){var G=n.editor.card.find($);G!=null&&G.queryMarks&&q.push.apply(q,Hn(G.queryMarks()))}var H=$.parent();if(!H)break;$=H}return q},E=_(V(h)),M=e.commonAncestorNode,T=this.editor.card.find(M,!0),S=T==null?void 0:T.isEditable,D=S?T!=null&&T.getSelectionNodes?T.getSelectionNodes():[]:[M];if(D.length===0&&(S=!1,D.push(M)),(!e.collapsed||S)&&(_(V(g)).forEach(function(B){return w(E,B)}),l!==d||S)){var I=!1,P=!1;D.forEach(function(B){B.traverse(function($){if(P)return!1;if($.equal(l))I=!0;else if(I){if($.equal(d))return P=!0,!1;if(x.isMark($)&&!$.attributes(Gt)&&!$.attributes(jn))w(E,$);else if($.isCard()){var q=n.editor.card.find($);q!=null&&q.queryMarks&&q.queryMarks().forEach(function(G){w(E,G)})}}},!0,"editable")})}return E}},{key:"removeEmptyMarks",value:function(t,n){if(!(t.length===0||t.isEditable()||t.isCard()||t.attributes(lt))){var e=this.editor.node;if(!t.attributes(lt)){var r,i=t.parent();if(t.children().length===1&&((r=t.first())===null||r===void 0?void 0:r.attributes(lt))){e.isMark(t)?(t.before(t.first()),t.remove(),i&&this.removeEmptyMarks(i,!0)):n&&e.isBlock(t)&&t.prepend("<br />");return}var a=e.html(t);(a===""||a==="\u200B")&&(e.isMark(t)?(t.remove(),i&&this.removeEmptyMarks(i,!0)):n&&e.isBlock(t)&&e.html(t,"<br />"))}}}},{key:"repairCursor",value:function(t){var n=this.editor.node;t=Ht(t)?V(t):t;var e=n.isMark(t);if(e&&!t.isCursor()){var r=t.children();r.each(function(d,v){var h,g=r.eq(v);if((g==null?void 0:g.isText())&&!(!((h=g.next())===null||h===void 0)&&h.isCursor())){var w=g.text();if(w.length===1&&/\u200b/.test(w)){g.remove();return}g.text(w.replace(/\u200b/g,""))}});var i=t.children().toArray().filter(function(d){return!d.isCursor()});i.length<2&&(i.length===0||i.length===1&&i[0].isText()&&i[0].text().length===0)&&(i.length>0&&i[0].remove(),t.prepend(V("\u200B",null)));var a=t.next(),o=a==null?void 0:a.next();a&&o&&a.isText()&&/^\u200b$/g.test(a.text())&&!n.isInline(o)&&a.remove();var l=t.prev(),c=l==null?void 0:l.prev();l&&c&&l.isText()&&/^\u200b$/g.test(l.text())&&!n.isInline(c)&&l.remove()}}}]),b}(),qC=function(){function b(u){Fe(this,b),this.engine=void 0,this.engine=u}return Be(b,[{key:"trigger",value:function(t){var n=this.engine,e=n.change;n.mark;var r=n.inline,i=n.node,a=e.range.get(),o=a.cloneRange().shrinkToTextNode(),l=o.collapsed,c=o.endNode,d=o.startNode,v=o.startOffset;if(c.type===Node.TEXT_NODE||d.type===Node.TEXT_NODE){if(!l){var h=r.closest(c);if(i.isInline(h)&&!h.isCard()&&i.isEmpty(h)){if(v>1)return!0;var g=c.prev(),w=c.parent();if(w&&i.isInline(w)){if(g)return!0;var x=c.text(),_=x.substr(0,v);if(!/^\u200b$/.test(_))return!0;var E=h.next(),M=E==null?void 0:E.text();if(E&&E.isText()&&M&&/^\u200b/.test(M))return a.setEnd(E,1),!1}}return i.isInline(h)&&!h.isCard()&&setTimeout(function(){r.repairCursor(h)},100),!0}var T=r.closest(d);if(i.isInline(T)){if(T.isCard()||v>1)return!0;var S=d.prev(),D=d.parent();if(D&&i.isInline(D)){if(S)return!0;var I=d.text(),P=I.substr(0,v);if(!/\u200b$/.test(P))return!0}else if(v===0){for(;!S&&D&&!i.isInline(D);){var B;S=D.prev(),D=(B=D)===null||B===void 0?void 0:B.parent()}if(S&&!S.isText()||S&&!/\u200b$/.test(S.text()))return!0}else return!0;var $=T.prev(),q=$==null?void 0:$.text();if($&&$.isText()&&q&&/\u200b$/.test(q)){if(a.setStart($,q.length-1),i.isEmpty(T)){var G=T.next(),H=G==null?void 0:G.text();G&&G.isText()&&H&&/^\u200b/.test(H)&&a.setEnd(G,1)}else a.collapse(!0);return e.range.select(a),!1}return!0}else{var z=d.prev(),O=d.parent(),Q=void 0;if(z){if(i.isInline(z)&&!z.isCard()){var ie=d.text(),L=ie.substr(0,v);if(!/^\u200b$/.test(L))return!0;Q=z}}else if(v===0){for(;!z&&O&&!i.isBlock(O);){var F;z=O.prev(),O=(F=O)===null||F===void 0?void 0:F.parent()}if(z&&!z.isText())return!0;if(z){if(!/^\u200b$/.test(z.text()))return!0;if(z=z.prev(),z&&i.isInline(z))Q=z;else return!0}}else return!0;if(Q){var X=Q.last(),se=X==null?void 0:X.text();if(X&&X.isText()&&se&&/\u200b$/.test(se))return t.preventDefault(),a.setStart(X,se.length-1),a.collapse(!0),e.range.select(a),!1}}}return!0}}]),b}(),$C=function(){function b(u){Fe(this,b),this.engine=void 0,this.engine=u}return Be(b,[{key:"trigger",value:function(t){var n=this.engine,e=n.change,r=n.inline,i=n.node,a=e.range.get().cloneRange().shrinkToTextNode(),o=a.startNode,l=a.startOffset,c=this.engine.card.getSingleCard(a);if(!c&&o.type===Node.TEXT_NODE){var d=r.closest(o);if(i.isInline(d)){if(d.isCard())return;if(l>1)return!0;var v=o.prev(),h=o.parent();if(h&&i.isInline(h)){if(v)return!0;var g=o.text(),w=g.substr(0,l);if(!/^\u200b$/.test(w))return!0}else if(l===0){for(;!v&&h&&!i.isInline(h);){var x;v=h.prev(),h=(x=h)===null||x===void 0?void 0:x.parent()}if(v&&!v.isText()||v&&!/^\u200b$/.test(v.text()))return!0}else return!0;var _=d.prev(),E=_==null?void 0:_.text();if(_&&_.isText()&&E&&/\u200b$/.test(E)){t.preventDefault();var M=a.cloneRange(),T=M.collapsed;return a.setStart(_,E.length-1),T&&a.collapse(!0),e.range.select(a),!1}return!0}else{var S=o.prev(),D=o.parent(),I=void 0;if(S){if(i.isInline(S)&&!S.isCard()){var P=o.text(),B=P.substr(0,l);if(!/^\u200b$/.test(B))return!0;I=S}}else if(l===0){for(;!S&&D&&!i.isBlock(D);){var $;S=D.prev(),D=($=D)===null||$===void 0?void 0:$.parent()}if(S&&!S.isText())return!0;if(S){if(!/^\u200b$/.test(S.text()))return!0;if(S=S.prev(),S&&i.isInline(S))I=S;else return!0}}else return!0;if(I){t.preventDefault();var q=I.last(),G=q==null?void 0:q.text();if(q&&q.isText()&&G&&/\u200b$/.test(G)){var H=a.cloneRange(),z=H.collapsed;return a.setStart(q,G.length-1),z&&!yt("shift+left",t)&&a.collapse(!0),e.range.select(a),!1}}}}return!0}}]),b}(),GC=function(){function b(u){Fe(this,b),this.engine=void 0,this.engine=u}return Be(b,[{key:"trigger",value:function(t){var n=this.engine,e=n.change,r=n.inline,i=n.node,a=e.range.get().cloneRange().shrinkToTextNode(),o=a.endNode,l=a.endOffset,c=this.engine.card.getSingleCard(a);if(!c&&o.type===Node.TEXT_NODE){var d=r.closest(o),v=o.text();if(i.isInline(d)){if(d.isCard())return;if(l<v.length-1)return!0;var h=o.next(),g=o.parent();if(g&&i.isInline(g)){if(h)return!0;var w=v.substr(l);if(!/^\u200b$/.test(w))return!0}else if(l===v.length||l===v.length-1){for(;!h&&g&&!i.isInline(g);){var x;h=g.next(),g=(x=g)===null||x===void 0?void 0:x.parent()}if(h&&!h.isText())return!0;if(h){if(!/^\u200b$/.test(h.text()))return!0;if(l===v.length-1){t.preventDefault();var _=a.cloneRange(),E=_.collapsed;return a.setEnd(h,0),E&&a.collapse(!1),e.range.select(a),!1}}}else return!0;var M=d.next(),T=M==null?void 0:M.text();if(M&&M.isText()&&T&&/^\u200b/.test(T)){t.preventDefault();var S=a.cloneRange(),D=S.collapsed;return a.setEnd(M,1),D&&a.collapse(!1),e.range.select(a),!1}return!0}else{var I=o.next(),P=o.parent(),B=void 0;if(I){if(i.isInline(I)&&!I.isCard()){var $=v.substr(l);if(!/^\u200b$/.test($))return!0;B=I}}else if(l===v.length){for(;!I&&P&&!i.isBlock(P);){var q;I=P.next(),P=(q=P)===null||q===void 0?void 0:q.parent()}if(I&&!I.isText())return!0;if(I){if(!/^\u200b$/.test(I.text()))return!0;if(I=I.next(),I&&i.isInline(I))B=I;else return!0}}else return!0;if(B){t.preventDefault();var G=B.first(),H=G==null?void 0:G.text();if(G&&G.isText()&&H&&/^\u200b/.test(H)){var z=a.cloneRange(),O=z.collapsed;return a.setEnd(G,1),O&&!yt("shift+right",t)&&a.collapse(!1),e.range.select(a),!1}}}}return!0}}]),b}(),ZC=function(){function b(u){Fe(this,b),this.editor=void 0,this.editor=u}return Be(b,[{key:"init",value:function(){var t=this,n=this.editor;if(ge(n)){var e,r,i,a=n.typing,o=n.event,l=new qC(n);(e=a.getHandleListener("backspace","keydown"))===null||e===void 0||e.on(function(v){return l.trigger(v)});var c=new $C(n);(r=a.getHandleListener("left","keydown"))===null||r===void 0||r.on(function(v){return c.trigger(v)});var d=new GC(n);(i=a.getHandleListener("right","keydown"))===null||i===void 0||i.on(function(v){return d.trigger(v)}),o.on("keydown:space",function(v){return t.triggerMarkdown(v)})}}},{key:"repairRange",value:function(t){var n=this.editor,e=n.change,r=n.node;t=t||e.range.get();var i=t,a=i.startNode,o=i.startOffset,l=i.endNode,c=i.endOffset,d=i.collapsed;if(d)return t;var v=this.closest(a);if(v&&r.isInline(v)&&o<=1){for(var h=!0,g=a;g&&!g.equal(v);){if(g.prev()){h=!1;break}g=g.parent()}if(h){var w=v.prev(),x=(w==null?void 0:w.text())||"";w&&w.isText()&&/\u200B$/g.test(x)&&t.setStart(w,x.length-1)}}var _=this.closest(l),E=_.last();if(_&&r.isInline(_)&&E&&l.equal(E)&&c>=E.text().length-1){for(var M=!0,T=a;T&&!T.equal(_);){if(T.next()){M=!1;break}T=T.parent()}if(M){var S=_.next(),D=(S==null?void 0:S.text())||"";S&&S.isText()&&/^\u200B/g.test(D)&&t.setEnd(S,1)}}return t}},{key:"triggerMarkdown",value:function(t){var n=this.editor;if(!!ge(n)){var e=n.change,r=e.range.get();if(!(!r.collapsed||e.isComposing())){var i=r.startNode,a=r.startOffset,o=i.type===Node.TEXT_NODE?i:i.children().eq(a-1);if(!!o){var l=r.toPath(),c=o.type===Node.TEXT_NODE?o.text().substr(0,a):o.text(),d=!Object.keys(n.plugin.components).some(function(v){var h=n.plugin.components[v];if(Dm(h)&&!!h.markdown){var g=h.triggerMarkdown(t,c,o);if(g===!1)return!0}});return d||(e.rangePathBeforeCommand=l),d}}}}},{key:"closest",value:function(t){for(var n=this.editor.node,e=t.parent();e&&!e.isEditable()&&!n.isBlock(e);){if(n.isInline(e))return e;var r=e.parent();if(!r)break;e=r}return t}},{key:"closestNotInline",value:function(t){for(var n=this.editor.node;(n.isInline(t)||n.isMark(t)||t.isText())&&!t.isEditable();){var e=t.parent();if(!e)break;t=e}return t}},{key:"wrap",value:function(t,n){var e=this;if(!!ge(this.editor)){var r=this.editor,i=r.change,a=r.mark,o=r.node,l=n||i.range.toTrusty(),c=vr(l.startContainer);if(typeof t=="string"||Ht(t)?t=V(t,c):t=t,!!o.isInline(t)){if(l.collapsed){this.insert(t,l),n||i.apply(l);return}a.split(l),this.split(l);var d=l.commonAncestorNode;if(d.type===Node.TEXT_NODE||o.isMark(d))for(d=d.parent();o.isMark(d);)d=d.parent();var v=l.enlargeToElementNode().createSelection();if(!v.has()){n||i.apply(l);return}var h=!1,g=o.clone(t,!1),w=[];d.traverse(function(D){if(D.equal(v.anchor)){h=!0;return}else{if(h){if(D.equal(v.focus))return h=!1,!1;if(o.isInline(D)){var I=D.children();o.unwrap(D),D=I}if(o.isMark(D)&&!D.isCard()||D.isText())return o.isEmpty(D)?(D.remove(),!0):(g.parent()||D.before(g),g.append(D),e.repairCursor(g),w.push(g),!0);g[0].childNodes.length!==0&&!!g.parent()&&(g=o.clone(g,!1,!1))}return}});var x=v.anchor,_=v.focus,E=x==null?void 0:x.parent();if(E&&o.isRootBlock(E)&&!x.prev()&&!x.next()&&x.after("<br />"),!x.equal(_)){var M=_==null?void 0:_.parent();M&&o.isRootBlock(M)&&!_.prev()&&!_.next()&&_.before("<br />")}if(v.move(),w.length>0){var T=w[0].first(),S=w[w.length-1].last();l.setStart(T,1),l.setEnd(S,S.text().length-1)}n||i.apply(l)}}}},{key:"unwrap",value:function(t){var n=this.editor;if(!!ge(n)){var e=n.change,r=n.mark,i=!t||!Tc(t)?e.range.toTrusty():t;this.repairRange(i),r.split(i);var a=t&&!Tc(t)?[t]:this.findInlines(i),o=i.createSelection();a.forEach(function(l){var c,d,v,h,g=l.prev();g&&g.isCursor()&&(g=g.prev());var w=l.next();w&&w.isCursor()&&(w=w.prev());var x=l.first();x&&x.isCursor()&&(x=x.next());var _=((c=g)===null||c===void 0?void 0:c.text())||"",E=((d=w)===null||d===void 0?void 0:d.text())||"",M=((v=x)===null||v===void 0?void 0:v.text())||"";g&&g.isText()&&/\u200B$/g.test(_)&&(/^\u200B$/g.test(_)?g.remove():g.text(_.substr(0,_.length-1))),w&&w.isText()&&/^\u200B/g.test(E)&&(/^\u200B$/g.test(E)?w.remove():w.text(E.substr(1))),x&&x.isText()&&/^\u200B/g.test(M)&&(/^\u200B$/g.test(M)||x.get().splitText(1),x.remove());var T=l.last();T&&T.isCursor()&&(T=T.prev());var S=((h=T)===null||h===void 0?void 0:h.text())||"";T&&T.isText()&&/\u200B$/g.test(S)&&(/^\u200B$/g.test(S)?T.remove():T.get().splitText(S.length-1).remove()),n.node.unwrap(l)}),o.move(),r.merge(i),t||e.apply(i)}}},{key:"insert",value:function(t,n){var e;if(!!ge(this.editor)){var r=this.editor,i=r.change,a=r.node,o=r.mark,l=n||i.range.toTrusty(),c=vr(l.startContainer);if((typeof t=="string"||Ht(t))&&(t=V(t,c)),!!a.isInline(t)){l.collapsed||i.delete(l),o.split(l),this.split(l),(e=a.insert(t,l))===null||e===void 0||e.select(t).collapse(!1),t.name!=="br"&&l.handleBr();var d=t.children().length!==0;if(this.repairCursor(t),!t.isCard()&&!a.isVoid(t))if(d){var v=t.next();l.setStart(v,1),l.setEnd(v,1)}else{var h=t.last(),g=h.text();l.setStart(h,g.length-1),l.setEnd(h,g.length-1)}n||i.apply(l)}}}},{key:"unwrapEmptyInlines",value:function(t,n){var e=this.editor.node,r=t.allChildren();r.forEach(function(i){e.isEmpty(i)&&e.isInline(i)&&(!n||n(i))&&e.unwrap(i)})}},{key:"splitOnCollapsed",value:function(t,n){var e=this;if(!!t.collapsed){t.enlargeFromTextNode(),t.shrinkToElementNode();var r=t.startNode,i=r.parent(),a=this.editor.node,o=r.isCard()?r:r.closest(Ar);if((o.length===0||o.attributes(gi)!=="inline")&&(a.isInline(r)||i&&a.isInline(i))){var l,c=this.closestNotInline(r),d=t.createSelection(),v=d.getNode(c,"left"),h=void 0,g=void 0,w=[];if(n){Ht(n)&&(n=V(n));var x=n.getPath(c.get()),_=c.clone(!0);w=x.slice(1),g=V(_.getChildByPath(x.slice(0,1))),h=d.getNode(_,"right",!1)}else h=d.getNode(c,"right");this.unwrapEmptyInlines(v),this.unwrapEmptyInlines(h);var E=c.children();E.each(function(H,z){var O;if(!(!((O=E.eq(z))===null||O===void 0)&&O.isCard())){var Q;(Q=E.eq(z))===null||Q===void 0||Q.remove()}});var M=void 0,T=function(z){z.each(function(O,Q){var ie=z.eq(Q);if(ie!=null&&ie.isCard()){M=M?M.next():c.first(),M&&(z[Q]=M[0]);return}M?(M.after(O),M=ie):(M=ie,c.prepend(O))})},S=v.children(),D=S.toArray();T(S);var I=h.children(),P=I.toArray();if(g&&(n=(l=P.find(function(H){return H.equal(g)}))===null||l===void 0?void 0:l.getChildByPath(w)),T(I),P=I.toArray(),D.length===1&&D[0].name==="br"&&(D[0].remove(),D.splice(0,1)),P.length===1&&P[0].name==="br"&&(P[0].remove(),P.splice(0,1)),P.filter(function(H){return!H.isCursor()}).length>0){for(var B=P[0],$=0;$<P.length-1&&(B=P[$],!!B.isCursor());$++);t.setStartBefore(B),t.collapse(!0)}else if(D.filter(function(H){return!H.isCursor()}).length>0){for(var q=D[D.length-1],G=D.length-1;G>=0&&(q=D[G],!!q.isCursor());G--);t.setStartAfter(q),t.collapse(!0)}else t.select(c,!0).collapse(!0);c.traverse(function(H){a.isInline(H)&&e.repairCursor(H)})}return t.enlargeToElementNode(!a.isBlock(t.startNode),!1),n}}},{key:"splitOnExpanded",value:function(t){var n=this;if(!t.collapsed){t.enlargeToElementNode(),t.shrinkToElementNode();var e=t.startNode,r=t.endNode,i=e.isCard()?e:e.closest(Ar),a=r.isCard()?r:r.closest(Ar);if(!(i.length>0&&i.attributes(gi)==="inline"||a.length>0&&a.attributes(gi)==="inline")){var o=this.closestNotInline(e),l=this.closestNotInline(r);if(!o.equal(l)){var c=t.cloneRange();c.collapse(!0);var d=t.cloneRange();d.collapse(!1);var v=void 0,h=c.startOffset,g=d.endOffset;o.contains(l)?(v=this.splitOnCollapsed(c,d.endNode),t.setStart(c.startContainer,c.startOffset),v&&d.setOffset(v,g,g),this.splitOnCollapsed(d),t.setEnd(d.startContainer,d.startOffset)):(v=this.splitOnCollapsed(d,c.startNode),t.setEnd(d.startContainer,d.startOffset),v&&c.setOffset(v,h,h),this.splitOnCollapsed(c),t.setStart(c.startContainer,c.startOffset));return}var w=this.editor.node,x=e.parent(),_=w.isInline(e)||x&&w.isInline(x),E=r.parent(),M=w.isInline(r)||E&&w.isInline(E);if(!_&&!M)return;var T=t.commonAncestorNode;T.isText()&&(T=T.parent());var S=this.closestNotInline(T),D=t.createSelection(),I=D.getNode(S,"left"),P=D.getNode(S),B=D.getNode(S,"right");this.unwrapEmptyInlines(I),this.unwrapEmptyInlines(B);var $=S.children();$.each(function(O,Q){var ie;if(!(!((ie=$.eq(Q))===null||ie===void 0)&&ie.isCard())){var L;(L=$.eq(Q))===null||L===void 0||L.remove()}});var q=void 0,G=function(Q){Q.each(function(ie,L){var F;if(!((F=Q.eq(L))===null||F===void 0)&&F.isCard()){q=q?q.next():S.first(),q&&(Q[L]=q[0]);return}q?(q.after(ie),q=Q.eq(L)):(q=Q.eq(L),S.prepend(ie))})};G(I.children());var H=P.children(),z=H.toArray();G(H),G(B.children()),S.traverse(function(O){w.isInline(O)&&n.repairCursor(O)}),t.setStartBefore(z[0][0]),t.setEndAfter(z[z.length-1][0])}}}},{key:"split",value:function(t){if(!!ge(this.editor)){var n=this.editor.change,e=t||n.range.toTrusty();e.collapsed?this.splitOnCollapsed(e):this.splitOnExpanded(e),t||n.apply(e)}}},{key:"findInlines",value:function(t){var n=t.cloneRange();if(n.startNode.isRoot()&&n.shrinkToElementNode(),!n.startNode.inEditor()||this.editor.card.find(n.startNode))return[];var e=this.editor.node,r=function(P,B){var $=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!!B.collapsed){var q=B.startNode,G=B.startOffset,H=q.findParent();if(!!H){var z=B.cloneRange();if(z.select(H,!0),$){z.setEnd(q,G),z.enlargeFromTextNode(),z.enlargeToElementNode(!0);var O=q.children(),Q=z.endNode,ie=z.endOffset,L=Q.children(),F=L.eq(ie),X=O.eq(G)||O.eq(G-1);if(!P&&Q.type===Node.ELEMENT_NODE&&F&&e.isBlock(F)&&(q.type!==Node.ELEMENT_NODE||!!X&&!e.isBlock(X)))return;z.select(H,!0),z.setStart(Q,ie),z.shrinkToElementNode(),z.shrinkToTextNode(),B.setStart(z.startContainer,z.startOffset),B.collapse(!0)}else{z.setStart(q,G),z.enlargeFromTextNode(),z.enlargeToElementNode(!0);var se=q.children(),Y=z.startNode,j=z.startOffset,fe=Y.children(),ve=fe.eq(j),ae=se.eq(G)||se.eq(G-1);if(!P&&Y.type===Node.ELEMENT_NODE&&ve&&e.isBlock(ve)&&(q.type!==Node.ELEMENT_NODE||ae&&!e.isBlock(ae)))return;z.select(H,!0),z.setEnd(Y,j),z.shrinkToElementNode(),z.shrinkToTextNode(),B.setEnd(z.endContainer,z.endOffset),B.collapse(!1)}}}};if(!n.collapsed){var i=n.cloneRange(),a=n.cloneRange();i.collapse(!0),a.collapse(!1),r(!0,i,!0),r(!0,a),n.setStart(i.startContainer,i.startOffset),n.setEnd(a.startContainer,a.startOffset)}r(!1,n);var o=n.startContainer,l=n.startOffset,c=n.endContainer,d=n.endOffset,v=o,h=c;o.nodeType===Node.ELEMENT_NODE&&o.childNodes[l]&&(v=o.childNodes[l]||o),c.nodeType===Node.ELEMENT_NODE&&d>0&&c.childNodes[d-1]&&(h=c.childNodes[d-1]||o),n.collapsed&&(v=h);var g=function(P,B){P.some(function($){return $[0]===B[0]})||P.push(B)},w=function(P){for(var B=[];P&&!P.isEditable();){e.isInline(P)&&B.push(P);var $=P.parent();if(!$)break;P=$}return B},x=w(V(v)),_=n.commonAncestorNode,E=this.editor.card.find(_,!0),M=E==null?void 0:E.isEditable,T=M?E!=null&&E.getSelectionNodes?E.getSelectionNodes():[]:[_];if(T.length===0&&(M=!1,T.push(_)),(!n.collapsed||M)&&(w(V(h)).forEach(function(I){return g(x,I)}),o!==c||M)){var S=!1,D=!1;T.forEach(function(I){I.traverse(function(P){if(D)return!1;if(P.equal(o))S=!0;else if(S){if(P.equal(c))return D=!0,!1;e.isInline(P)&&!P.attributes(Gt)&&!P.attributes(jn)&&g(x,P)}})})}return x}},{key:"repairCursor",value:function(t){var n,e,r=this.editor.node;if(Ht(t)&&(t=V(t)),!r.isInline(t)||t.closest(Ar).attributes(Ls)==="false"||r.isVoid(t)||t.isCard()){var i=t.prev(),a=i!=null&&i.isText()?i.text():void 0;if(a&&/\u200b$/.test(a)){var o=i==null?void 0:i.prev();(!o||!r.isInline(o))&&(a.length===1?i==null||i.remove():i==null||i.text(a.slice(0,-1)))}var l=t.next(),c=l!=null&&l.isText()?l.text():void 0;if(c&&/^\u200b/.test(c)){var d=l==null?void 0:l.next();(!d||!r.isInline(d))&&(c.length===1?l==null||l.remove():l==null||l.text(c.slice(1)))}return}var v=t.children();v.each(function(w,x){var _=v.eq(x);if(_!=null&&_.isText()){var E=_.text();if(E.length===1&&/\u200b/.test(E)){_.remove();return}_.text(E.replace(/\u200b/g,""))}}),this.repairBoth(t);var h=t.first();!((n=h)===null||n===void 0)&&n.isCursor()&&(h=h.next()),(!h||h.type!==Node.TEXT_NODE||!/^\u200B/g.test(h.text()))&&(h?h.isText()?h.text("\u200B"+h.text()):h.before(V("\u200B",null)):t.append(V("\u200B",null)));var g=t.last();!((e=g)===null||e===void 0)&&e.isCursor()&&(g=g.prev()),g&&(/^\u200B$/g.test(t.text())||g.type!==Node.TEXT_NODE||!/\u200B$/g.test(g.text()))&&(g.isText()?g.text(g.text()+"\u200B"):g.after(V("\u200B",null)))}},{key:"repairBoth",value:function(t){var n,e=this.editor.node;if(Ht(t)&&(t=V(t)),((n=t.get())===null||n===void 0?void 0:n.parentNode)&&!e.isVoid(t)){var r=V("\u200B",null),i=t.prev(),a=i==null?void 0:i.prev(),o=(i==null?void 0:i.text())||"";!i||!i.isText()||!/\u200B$/g.test(o)||a&&e.isInline(a)&&!/\u200B.*\u200B$/g.test(o)?i&&i.isText()?i.text(o+"\u200B"):t.before(e.clone(r,!0,!1)):i&&i.isText()&&/\u200B\u200B$/g.test(o)&&a&&!e.isInline(a)&&i.text(o.substr(0,o.length-1));var l=t.next(),c=(l==null?void 0:l.text())||"",d=l==null?void 0:l.next();!l||!l.isText()||!/^\u200B/g.test(c)||d&&e.isInline(d)&&!/^\u200B\u200B/g.test(c)?l&&l.isText()?l.text("\u200B"+l.text()):(t.after(e.clone(r,!0,!1)),(l==null?void 0:l.name)==="br"&&l.remove()):l&&l.isText()&&/\u200B\u200B$/g.test(c)&&d&&!e.isInline(d)&&l.text(c.substr(0,c.length-1))}}},{key:"flat",value:function(t,n){var e=this;if(Tc(t)){var r=t.cloneRange().shrinkToElementNode().createSelection(),i=this.findInlines(t);i.forEach(function(d){d.isCard()||e.flat(d)}),r.move();return}if(!t.isCard()){var a=this.editor.node,o=this.editor.mark;if(a.isInline(t,n)&&t.name!=="br"){var l=this.closest(t);if(!l.equal(t)&&a.isInline(l,n))a.unwrap(t);else{var c=function(){for(var d=o.closest(t),v=t,h=function(){var w=d.clone(),x=t.clone(),_=d.children();_.each(function(E){if(!(E.nodeType===3&&/^\u200b$/.test(E.textContent||""))){var M=V(E);v.equal(M)||M.contains(v)?(v=a.wrap(a.replace(v,w),x),e.repairBoth(v)):a.wrap(M,w)}}),a.unwrap(d),d=o.closest(v)};d&&!d.equal(t)&&a.isMark(d,n);)h();return{v}}();if(Jn(c)==="object")return c.v}}}}}]),b}(),YC=function(){function b(u){Fe(this,b),this.engine=void 0,this.engine=u}return Be(b,[{key:"trigger",value:function(t){var n=this.engine,e=n.change,r=n.node;n.list;var i=e.range.get().shrinkToElementNode().shrinkToTextNode(),a=this.engine.block,o=a.closest(i.endNode),l=o.parent();if(l&&l.inEditor()&&r.isBlock(l)){var c;if(l.name==="li"&&o.name==="p"){var d;o.children().length===1&&((d=o.first())===null||d===void 0?void 0:d.name)==="br"&&o.first().remove();var v=i.createSelection();e.unwrap(o),v.move(),o=a.closest(i.endNode)}if(i.collapsed&&(i.startContainer.childNodes.length===1&&((c=i.startContainer.firstChild)===null||c===void 0?void 0:c.nodeName)==="BR"||a.isLastOffset(i,"end")&&a.isFirstOffset(i,"end")))return t.preventDefault(),["li"].indexOf(l.name)>=0?(a.unwrap("<".concat(l.name," />")),a.setBlocks("<".concat(l.name," />"))):(a.unwrap("<".concat(l.name," />")),a.setBlocks("<p />")),!1}if(r.isBlock(o)&&(!l||!r.isList(l))&&!o.isCard())return t.preventDefault(),a.insertOrSplit(i,o),!1;if(o.name!=="li")return!0}}]),b}(),KC=function(){function b(u){Fe(this,b),this.engine=void 0,this.engine=u}return Be(b,[{key:"trigger",value:function(t){var n=this.engine,e=n.change,r=n.node,i=n.block,a=n.card,o=e.range.get();if(!!o.collapsed){var l=o.getPrevNode();if(l&&r.isBlock(l)&&r.isEmptyWithTrim(l)){t.preventDefault();var c=l.parent();return l.remove(),c&&this.engine.node.isEmpty(c)&&(c.isEditable()?(this.engine.node.html(c,"<p><br /></p>"),o.select(c,!0).shrinkToElementNode().collapse(!1)):(this.engine.node.html(c,"<br />"),o.select(c,!0).collapse(!1)),e.apply(o)),!1}var d=!!a.closest(o.startNode);if(!d&&!i.isFirstOffset(o,"start")){var v=o.cloneRange().shrinkToElementNode().shrinkToTextNode();v.startContainer.nodeType===Node.TEXT_NODE&&function(g){var w=g,x=w.commonAncestorContainer,_=w.commonAncestorNode,E=_.parent(),M=E==null?void 0:E.attributes();if(g.collapsed&&g.startOffset===1&&g.startContainer===x&&x.nodeType===Node.TEXT_NODE&&(!M||!["left","right"].includes(M[jn]))){var T,S,D;if(g=g.cloneRange(),(((T=x.parentNode)===null||T===void 0||(S=T.childNodes)===null||S===void 0?void 0:S.length)||0)<=1&&((D=x.textContent)===null||D===void 0?void 0:D.length)===1){var I=g,P=I.startNode,B=I.startOffset,$=P.parent();if($&&r.isMark($)&&B>0){var q=P.text(),G=q.substr(B-1,1);if(/^\u200b$/.test(G))if(B===1){var H=$.prev();if(H&&!r.isEmpty(H)){var z=g.cloneRange().select(H,!0).shrinkToTextNode().collapse(!1),O=z.startNode,Q=z.startOffset;g.setStart(O,Q-1)}}else g.setStart(P,B-1)}return g.collapsed&&g.select(x,!0),e.delete(g,!0),e.apply(g),!0}}return!1}(v)&&(t.preventDefault(),t.isDelete=!0,e.change());return}var h=i.closest(o.startNode);return!d&&r.isRootBlock(h)?(t.preventDefault(),r.isEmpty(h)&&h.html("<br />"),e.mergeAfterDelete(h),!1):!0}}}]),b}(),VC=function(){function b(u){Fe(this,b),this.editor=void 0,this.editor=u}return Be(b,[{key:"init",value:function(){var t=this,n=this.editor;if(ge(n)){var e,r,i=n.typing,a=n.event,o=new YC(n);(e=i.getHandleListener("enter","keydown"))===null||e===void 0||e.on(function(c){return o.trigger(c)});var l=new KC(n);(r=i.getHandleListener("backspace","keydown"))===null||r===void 0||r.on(function(c){return l.trigger(c)}),a.on("keyup:space",function(c){return t.triggerMarkdown(c)})}}},{key:"triggerMarkdown",value:function(t){var n=this.editor;if(!!ge(n)){var e=n.change,r=n.block,i=e.range.get();if(!(!i.collapsed||e.isComposing())){var a=i.startNode,o=i.startOffset,l=a.type===Node.TEXT_NODE?a:a.children().eq(o-1);if(!!l){var c=this.closest(l);if(!!n.node.isRootBlock(c)){var d=r.getLeftText(c),v=i.toPath(),h=!Object.keys(n.plugin.components).some(function(g){var w=n.plugin.components[g];if(mp(w)&&!!w.markdown){var x=w.markdown(t,d,c,l);if(x===!1)return!0}});return h||(e.rangePathBeforeCommand=v),h}}}}}},{key:"findPlugin",value:function(t){var n=this.editor,e=n.node,r=n.schema,i=n.plugin;if(!!e.isBlock(t)){var a=void 0;return Object.keys(i.components).some(function(o){var l=i.components[o];if(mp(l)&&(!l.tagName||typeof l.tagName=="string"?t.name===l.tagName:l.tagName.indexOf(t.name)>-1)){var c=l.schema();return(Array.isArray(c)?c.find(function(d){return r.checkNode(t,d.attributes)}):r.checkNode(t,c.attributes))?(a=l,!0):void 0}}),a}}},{key:"findTop",value:function(t,n){var e=this.editor,r=e.schema,i=e.node,a=e.list,o=r.closest(t.name),l=r.closest(n.name);if(o===parent.name||l===n.name)return n;if(r.isAllowIn(t.name,n.name))return t;if(i.isList(t)&&i.isList(n)){var c=parseInt(n.attributes(a.INDENT_KEY),10)||0,d=parseInt(t.attributes(a.INDENT_KEY),10)||0;n.attributes(a.INDENT_KEY,d?d+1:c+1)}return n}},{key:"closest",value:function(t){for(var n=t;t;){if(t.isEditable()||this.editor.node.isBlock(t))return t;var e=t.parent();if(!e)break;t=e}return n}},{key:"wrap",value:function(t,n){var e=this,r;if(!!ge(this.editor)){var i=this.editor,a=i.change,o=i.node,l=i.schema,c=i.list,d=i.mark,v=n||a.range.toTrusty(),h=vr(v.startContainer);if(typeof t=="string"||Ht(t)?t=V(t,h):t=t,!!o.isBlock(t)){var g=this.getBlocks(v),w=this.findPlugin(t);if(g=g.map(function(M){var T;if(!M||M.isCard())return null;for(var S=t,D=(T=M)===null||T===void 0?void 0:T.parent();D&&!D.isEditable();){M=D;var I=D.parent();if(I&&o.isBlock(I))D=I;else break}return l.isAllowIn(S.name,M.name)?M:e.findPlugin(M)===w?M.children():null}).filter(function(M){return M!==null}),g.length===0){var x=this.closest(v.startNode);if(x.isCard()||x.isEditable()||!l.isAllowIn(t.name,x.name))return;var _=v.createSelection();x.children().each(function(M){t.append(M)}),x.append(t),_.move();return}var E=v.createSelection();(r=g[0])===null||r===void 0||r.before(t),g.forEach(function(M){M&&(w&&M.allChildren().forEach(function(T){if(o.isMark(T)){var S,D=d.findPlugin(T);if(!D)return;!((S=w.disableMark)===null||S===void 0)&&S.indexOf(D.constructor.pluginName)&&o.unwrap(T)}}),t.append(M))}),E.move(),this.merge(v),c.merge(void 0,v),n||a.apply(v)}}}},{key:"unwrap",value:function(t,n){if(!!ge(this.editor)){var e=this.editor,r=e.change,i=e.node,a=n||r.range.toTrusty(),o=vr(a.startContainer);if(typeof t=="string"||Ht(t)?t=V(t,o):t=t,!!i.isBlock(t)){var l=this.getSiblings(a,t);if(l.length!==0){var c=l[0].node.parent();if(!!(c!=null&&c.inEditor())){var d=l.some(function(M){return M.position==="left"}),v=l.some(function(M){return M.position==="right"}),h=void 0;if(d){var g=c;h=i.clone(g,!1,!1),g.before(h)}var w=void 0;if(v){var x=l[l.length-1].node.parent();x&&(w=i.clone(x,!1,!1),x==null||x.after(w))}var _=a.createSelection(),E=i;l.forEach(function(M){var T=M.position,S=M.node,D=S.parent();if(T==="left"){var I;(I=h)===null||I===void 0||I.append(S)}if(T==="center"){var P;(D==null?void 0:D.name)===((P=t)===null||P===void 0?void 0:P.name)&&(D==null?void 0:D.inEditor())&&E.unwrap(D)}if(T==="right"){var B;(B=w)===null||B===void 0||B.append(S)}}),h&&h.name==="ol"&&w&&w.name==="ol"&&w.attributes("start",(parseInt(h.attributes("start"),10)||1)+h.find("li").length),_.move(),n||r.apply(a)}}}}}},{key:"getSiblings",value:function(t,n){var e=this,r=[],i=this.editor.node;if(!i.isBlock(n))return r;for(var a=function(g,w){for(var x=e.closest(g);x;){var _=x.parent();if(!_||!x.inEditor()||x.text().trim()!==_.text().trim()||_.name===w)break;x=_}return x},o=a(t.startNode,n.name),l=a(t.endNode,n.name),c=o.parent(),d="left",v=c==null?void 0:c.first();v;){if(v=V(v),!i.isBlock(v)||!v.inEditor())return r;v[0]===o[0]&&(d="center"),r.push({position:d,node:v}),v[0]===l[0]&&(d="right"),v=v.next()}return r}},{key:"split",value:function(t){var n=this,e;if(!!ge(this.editor)){var r=this.editor,i=r.change,a=r.mark,o=r.nodeId,l=t||i.range.toTrusty();l.collapsed||i.delete(l);var c=this.closest(l.startNode);if(!(!c.isEditable()&&!c.inEditor())){if(c.isEditable()){var d=l.getStartOffsetNode();d&&l.select(d,!0).shrinkToElementNode().collapse(!1),t||i.apply(l);return}var v=l.cloneRange();v.shrinkToElementNode().shrinkToTextNode().collapse(!0);var h=a.findMarks(v).filter(function(_){var E=n.editor.mark.findPlugin(_);return(E==null?void 0:E.copyOnEnter)!==!1&&(E==null?void 0:E.followStyle)!==!1}),g=this.getBlockByRange({block:c[0],range:l,isLeft:!1,keepDataId:!0}),w=this.editor.node;g.traverse(function(_){!w.isVoid(_)&&(w.isInline(_)||w.isMark(_))&&w.isEmpty(_)&&_.remove()},!0);var x=function(E){return w.isBlock(E)&&(E.childNodes.length===0||E.innerText==="")};return x(c[0])&&!x(g[0])?o.generate(c,!0):o.generate(g,!0),c.after(g),w.isEmpty(c)&&w.html(c,w.getBatchAppendHTML(h,h.length>0?"&#8203;":"<br />")),w.isEmpty(g)&&w.html(g,w.getBatchAppendHTML(h,h.length>0?"&#8203;":"<br />")),c.children().each(function(_){w.isInline(_)&&n.editor.inline.repairCursor(_)}),g.children().each(function(_){w.isInline(_)&&n.editor.inline.repairCursor(_)}),l.select(g,!0).shrinkToElementNode(),g.children().length===1&&((e=g.first())===null||e===void 0?void 0:e.name)==="br"?l.collapse(!1):l.collapse(!0),t||i.apply(l),g}}}},{key:"insert",value:function(t,n,e){var r,i=this,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!!ge(this.editor)){var o=this.editor,l=o.change,c=o.node,d=o.list,v=o.inline,h=n||l.range.toTrusty(),g=vr(h.startContainer);if(typeof t=="string"||Ht(t)?t=V(t,g):t=t,!!c.isBlock(t)){h.collapsed||l.delete(h);var w=this.closest(h.startNode);if(!w.isEditable()&&!w.inEditor()){n||l.apply(h);return}if(w.isEditable()){c.insert(t,h,a),h.collapse(!1),n||l.apply(h);return}if(c.isList(h.startNode)||h.startNode.closest("li").length>0){var x=g.createDocumentFragment();x.appendChild(t[0]),d.insert(x,h),n||l.apply(h);return}w.children().length===1&&((r=w.first())===null||r===void 0?void 0:r.name)==="br"&&h.select(w,!0).collapse(!1);var _=h.enlargeToElementNode().createSelection();if(!_.has()){n||l.apply(h);return}w=e?e(w):w;var E=_.getNode(w,"left");E.traverse(function(B){B.equal(E)||c.isBlock(B)&&(c.isEmpty(B)||d.isEmptyItem(B))&&B.remove()});var M=_.getNode(w,"right",!0,function(B){if(B.isCard()){var $=B.parent();if($&&c.isCustomize($))return!1}return!0}),T=w.children();if(c.isEmpty(w)||T.each(function(B,$){var q=T.eq($);if(!(q!=null&&q.isCard())){var G;(G=T.eq($))===null||G===void 0||G.remove()}}),M.traverse(function(B){!B.equal(M)||(c.isBlock(B)&&(c.isEmpty(B)||d.isEmptyItem(B))?B.remove():c.isList(B)&&d.addBr(B))}),M.length>0&&!c.isEmpty(M)&&!d.isEmptyItem(M)){var S=M.clone(!1),D=M.children();D.each(function(B,$){var q;if(!((q=D.eq($))===null||q===void 0)&&q.isCard()){var G=i.editor.card.find(B);G&&S.append(G.root)}else S.append(B)}),M=S,w.after(S)}if(E.length>0&&!c.isEmpty(E)&&!d.isEmptyItem(E)){var I=void 0,P=function($){$.each(function(q,G){var H=$.eq(G);if(H&&c.isInline(H)&&v.repairCursor(H),H!=null&&H.isCard()){I=I?I.next():w.first(),I&&($[G]=I[0]);return}I?(I.after(q),I=H):(I=H,w.prepend(q))})};P(E.children())}w&&w.length>0&&(h.select(w,!0),h.collapse(!1)),_.focus&&_.focus.remove(),_.anchor&&_.anchor.remove(),c.insert(t,h,a),n||l.apply(h)}}}},{key:"setBlocks",value:function(t,n){var e=this;if(!!ge(this.editor)){var r=this.editor,i=r.node,a=r.schema,o=r.mark,l=this.editor.change,c=n||l.range.toTrusty(),d=vr(c.startContainer),v=null,h={};typeof t=="string"?(v=V(t,d),h=v.attributes(),h.style=v.css()):h=t;var g=this.getBlocks(c),w=c.startNode;if(w.isEditable()&&g.length===0){if(w.isCard()||w.isEditable())return;var x=v||V("<p></p>");if(!a.isAllowIn(x.name,w.name))return;i.setAttributes(x,h);var _=c.createSelection();w.children().each(function(P){x.append(P)});var E=a.data.globals.block||{},M=w.attributes();Object.keys(M).forEach(function(P){P!==fn&&P!=="id"&&E.name&&x.attributes(P,M[P])});var T=E.style||{},S=w.css();Object.keys(S).forEach(function(P){T[P]||delete S[P]}),x.css(S),w.append(x),_.move(),n||l.apply(c);return}var D=v?this.findPlugin(v):void 0,I=c.createSelection();g.forEach(function(P){if(!P.attributes(Gt)){if(v){var B=a.data.globals.block||{},$=P.attributes();Object.keys($).forEach(function(O){if(O!==fn&&O!=="id"&&B.name){var Q;(Q=v)===null||Q===void 0||Q.attributes(O,$[O])}});var q=B.style||{},G=P.css();Object.keys(G).forEach(function(O){q[O]||delete G[O]}),v.css(G)}if(!v||e.findPlugin(P)===D&&P.name===v.name){v&&(h=v.attributes()),i.setAttributes(P,h);return}if(!(v.name!=="p"&&a.isAllowIn(P.name,v.name))){D&&P.allChildren().forEach(function(O){if(i.isMark(O)){var Q=o.findPlugin(O);if(!Q)return;D.disableMark&&D.disableMark.indexOf(Q.constructor.pluginName)>-1&&i.unwrap(O)}});var H=i.replace(P,v),z=H.parent();z&&!z.isEditable()&&!a.isAllowIn(z.name,H.name)&&i.unwrap(z)}}}),I.move(),n||l.apply(c)}}},{key:"merge",value:function(t){if(!!ge(this.editor)){var n=this.editor,e=n.change,r=n.schema,i=t||e.range.toTrusty(),a=this.getBlocks(i);if(a.length!==0){var o=a[0].closest(Cu),l=r.getCanMergeTags();if(l.length!==0){var c=o.find(l.join(","));if(c.length>0){for(var d=i.createSelection(),v=c.next();v&&l.indexOf(v.name)>0;){var h=v.prev(),g=v.attributes(),w=h==null?void 0:h.attributes();v.name===(h==null?void 0:h.name)&&g.class===(w?w.class:void 0)&&Object.keys(g).join(",")===Object.keys(w||{}).join(",")&&this.editor.node.merge(h,v),v=v.next()}d.move()}t||e.apply(i)}}}}},{key:"findBlocks",value:function(t){var n,e=this;if(t=t.cloneRange(),t.startNode.isRoot()&&t.shrinkToElementNode(),!t.startNode.inEditor()||((n=this.editor.card.find(t.startNode))===null||n===void 0?void 0:n.type)===un.BLOCK)return[];var r=t.startContainer,i=t.startOffset,a=t.endContainer,o=t.endOffset,l=r,c=a;r.nodeType===Node.ELEMENT_NODE&&r.childNodes[i]&&(l=r.childNodes[i]||r),a.nodeType===Node.ELEMENT_NODE&&o>0&&a.childNodes[o-1]&&(c=a.childNodes[o-1]||r),t.collapsed&&(l=c);var d=function(T,S,D){T.some(function(I){return I[0]===S[0]})||(D?T.unshift(S):T.push(S))},v=function(T){for(var S=[];T&&!T.isEditable();){e.editor.node.isBlock(T)&&S.push(T);var D=T.parent();if(!D)break;T=D}return S},h=this.getBlocks(t);v(V(l)).forEach(function(M){return d(h,M,!0)});var g=t,w=g.commonAncestorNode,x=this.editor.card.find(w,!0),_=x==null?void 0:x.isEditable,E=_?x!=null&&x.getSelectionNodes?x.getSelectionNodes():[]:[];return E.length===0&&(_=!1),(!t.collapsed||_)&&(v(V(c)).forEach(function(M){return d(h,M)}),E.forEach(function(M){M.traverse(function(T){T.isElement()&&!T.isCard()&&e.editor.node.isBlock(T)&&d(h,T)},!0,"editable")})),h}},{key:"isFirstOffset",value:function(t,n){var e=t,r=e.startNode,i=e.endNode,a=e.startOffset,o=e.endOffset,l=n==="start"?r:i,c=n==="start"?a:o;t=t.cloneRange();var d=this.closest(l);t.select(d,!0),t.setEnd(l[0],c),this.editor.node.isBlock(l)||t.enlargeToElementNode();var v=t.cloneContents();if(!v.firstChild)return!0;var h=this.editor.node;if(v.childNodes.length===1&&V(v.firstChild).name==="br")return!0;var g=V("<div />");return g.append(v),h.isEmpty(g)}},{key:"isLastOffset",value:function(t,n){var e=t,r=e.startNode,i=e.endNode,a=e.startOffset,o=e.endOffset,l=n==="start"?r:i,c=n==="start"?a:o;t=t.cloneRange();var d=this.closest(l);t.select(d,!0),t.setStart(l,c),this.editor.node.isBlock(l)||t.enlargeToElementNode();var v=t.cloneContents();if(!v.firstChild)return!0;var h=this.editor.node,g=V("<div />");return g.append(v),0>=g.find("br").length&&h.isEmpty(g)}},{key:"getBlocks",value:function(t){var n=this;t=t.cloneRange(),t.shrinkToElementNode(),t.shrinkToTextNode();var e=this.editor.node,r=this.closest(t.startNode);t.startNode.isRoot()&&(r=V(t.getStartOffsetNode()));var i=this.closest(t.endNode);t.endNode.isRoot()&&(i=V(t.getEndOffsetNode()));var a=this.closest(t.commonAncestorNode),o=[],l=!1,c=t,d=c.commonAncestorNode,v=this.editor.card.find(d,!0),h=v==null?void 0:v.isEditable,g=h?v!=null&&v.getSelectionNodes?v.getSelectionNodes():[]:[a];return g.length===0&&(h=!1,g.push(a)),g.forEach(function(w){w.traverse(function(x){var _=V(x);if(_.equal(r)&&(l=!0),(l||h)&&n.editor.node.isBlock(_)&&!_.isCard()&&_.inEditor()&&o.push(_),_.equal(i))return l=!1,!1},!0,"editable")}),o.length>1&&this.isFirstOffset(t,"end")&&!e.isEmpty(i)&&o.pop(),o}},{key:"getBlockByRange",value:function(t){var n=t.block,e=t.range,r=t.isLeft,i=t.clone,a=i===void 0?!1:i,o=t.keepDataId,l=o===void 0?!1:o;Ht(n)&&(n=V(n));var c=ln.create(this.editor,n.document);r?(c.select(n,!0),c.setEnd(e.startContainer,e.startOffset)):(c.select(n,!0),c.setStart(e.endContainer,e.endOffset));var d=a?c.cloneContents():c.extractContents(),v=l?n.clone(!1):this.editor.node.clone(n,!1,!1);return v.append(d),a&&v.find(Ar).each(function(h){var g=V(h),w=g.attributes(Gt);g.attributes(_n,w),g.removeAttributes(Gt)}),v}},{key:"getLeftText",value:function(t,n){if(!ge(this.editor))return"";n=n||this.editor.change.range.get();var e=this.getBlockByRange({block:t,range:n,isLeft:!0,clone:!0});return e.text().trim().replace(/\u200B/g,"")}},{key:"removeLeftText",value:function(t,n){if(!!ge(this.editor)){n=n||this.editor.change.range.get(),Ht(t)&&(t=V(t)),n.createSelection();var e=t.find(rv),r=!1;t.traverse(function(i){var a=V(i);if(a.equal(e)){e.remove(),r=!0;return}r&&a.isText()&&a.remove()},!1)}}},{key:"flat",value:function(t,n){if(!!ge(this.editor))for(var e=this.editor,r=e.schema,i=e.node,a=r.getCanMergeTags(),o=t.parent(),l=n.fragment?n[0].parentNode:n;o&&l&&!o.equal(l)&&o.inEditor();){if(t.isCard())o.before(t);else if(i.isList(o)&&t.name==="li"||a.indexOf(o.name)>-1&&i.isBlock(t)&&o.name!==t.name){var c=i.clone(o,!1,!1);c.append(t),t=c,o.before(t)}else t=i.replace(t,i.clone(this.findTop(o,t),!1,!1)),o.before(t);o.first()||o.remove(),o=t.parent()}}},{key:"brToBlock",value:function(t){var n,e=t.first();if(!!e){var r=t.get(),i=(r==null?void 0:r.childNodes)||[];if(i.length===1){var a=e;a&&a.isText()&&/^\n+$/g.test(a.text())&&t.remove();return}if(t.name!=="li"&&!(i.length===2&&(e==null?void 0:e.attributes(lt))===no||((n=t.last())===null||n===void 0?void 0:n.attributes(lt))===no)&&!!(r!=null&&r.querySelector("br"))){for(var o,l,c=e;c;){var d=c.next();(!o||c.name==="br")&&(l=o,o=this.editor.node.clone(t,!1,!1),t.before(o)),c.name!=="br"&&o.append(c),(c.name==="br"||!d)&&l&&!l.first()&&l.append(V("<br />")),c=d}o&&!o.first()&&o.remove(),t.remove()}}}},{key:"insertEmptyBlock",value:function(t,n){var e=this.editor;if(!!ge(e)){var r=e.change,i=r.blocks,a=r.marks,o=e.node;if(this.insert(n),i[0]){var l=i[0].css();n.css(l)}var c=n.find("br");a.forEach(function(v){var h=e.mark.findPlugin(v);v=o.clone(v,!1,!1),(h==null?void 0:h.copyOnEnter)!==!1&&(h==null?void 0:h.followStyle)!==!1&&(v=o.clone(v,!1,!1),c.before(v),v.append(c),c=v)}),c=n.find("br");var d=c.parent();d&&o.isMark(d)&&(c=o.replace(c,V("\u200B",null))),t.select(c).shrinkToTextNode(),t.collapse(!1),t.scrollIntoView(),r.range.select(t)}}},{key:"insertOrSplit",value:function(t,n){var e,r,i=t.cloneRange();if(i.enlargeFromTextNode(),this.isLastOffset(t,"end")||i.endNode.type===Node.ELEMENT_NODE&&n.children().length>0&&i.endContainer.childNodes[i.endOffset]===((e=n.last())===null||e===void 0?void 0:e.get())&&((r=n.first())===null||r===void 0?void 0:r.name)==="br"){var a=V("<p><br /></p>");if(n.name==="p"){var o=n.attributes();Object.keys(o).forEach(function(l){l!==fn&&a.attributes(l,o[l])})}this.insertEmptyBlock(t,a)}else this.split()}}]),b}(),jo=Mt("_scrollNode"),QC=function(){function b(u,t){var n=this;Fe(this,b),this.kind="editor",this.options={lang:"zh-CN",locale:{},plugins:[],cards:[],config:{}},this.container=void 0,this.language=void 0,this.root=void 0,this.card=void 0,this.plugin=void 0,this.node=void 0,this.nodeId=void 0,this.list=void 0,this.mark=void 0,this.inline=void 0,this.block=void 0,this.event=void 0,this.schema=void 0,this.conversion=void 0,this.command=void 0,this.clipboard=void 0,this.request=void 0,Object.defineProperty(this,jo,{writable:!0,value:null}),this.options=Ie(Ie({},this.options),t),this.container=V(u),this.container.attributes(lt,_u),this.language=new uC(this.options.lang||"zh-CN",Kt.exports.merge(fC,t==null?void 0:t.locale)),this.event=new Sm,this.command=new gC(this),this.schema=new bC,this.schema.add(Xk),this.conversion=new wC(this),Qk.forEach(function(r){return n.conversion.add(r.from,r.to)}),this.card=new AC(this,this.options.lazyRender),this.clipboard=new IC(this),this.request=new PC,this.plugin=new pC(this),this.node=new ex(this),this.nodeId=new NC(this),this.list=new jC(this),this.mark=new UC(this),this.inline=new ZC(this),this.block=new VC(this),this.root=V(this.options.root||this.container.parent()||document.body);var e=this.root.css("position");(!e||e==="static")&&this.root.css("position","relative")}return Be(b,[{key:"scrollNode",get:function(){if(oe(this,jo)[jo])return oe(this,jo)[jo];for(var t=this.options.scrollNode,n=t?typeof t=="function"?t():t:null,e=["auto","scroll"],r=this.container.parent();!n&&r&&r.length>0&&r.name!=="body";)if(e.includes(r.css("overflow"))||e.includes(r.css("overflow-y"))){n=r.get();break}else r=r.parent();return n===null&&(n=document.documentElement),oe(this,jo)[jo]=n?V(n):null,oe(this,jo)[jo]}},{key:"init",value:function(){this.mark.init(),this.inline.init(),this.block.init(),this.list.init(),this.card.init(this.options.cards||[]),this.plugin.init(this.options.plugins||[],this.options.config||{}),this.nodeId.init()}},{key:"setScrollNode",value:function(t){oe(this,jo)[jo]=t?V(t):null}},{key:"on",value:function(t,n,e){return this.event.on(t,n,e),this}},{key:"off",value:function(t,n){return this.event.off(t,n),this}},{key:"trigger",value:function(t){for(var n,e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return(n=this.event).trigger.apply(n,[t].concat(r))}},{key:"messageSuccess",value:function(t){console.log("success:".concat(t))}},{key:"messageError",value:function(t){console.log("error:".concat(t))}},{key:"messageConfirm",value:function(t){return console.log("confirm:".concat(t)),Promise.reject(!1)}},{key:"getSelectionData",value:function(t){var n,e,r=this;if(t||(t=(n=ln.from(this))!==null&&n!==void 0?n:void 0),!t)throw"Range is null";t=t.cloneRange();var i=t.startNode.closest("[".concat(Gt,"]"),function(X){return V(X).isEditable()?void 0:X.parentNode||void 0});if(i.length>0&&!t.collapsed&&t.endOffset===0&&(t.endContainer.previousSibling&&t.setEndAfter(t.endContainer.previousSibling),!t.collapsed&&t.endOffset>0&&t.endContainer.childNodes[t.endOffset-1]===i[0])){var a=t.startNode.closest("[".concat(jn,'="center"]'),function(X){return V(X).isEditable()?void 0:X.parentNode||void 0});a.length>0?t.setEnd(a[0],a[0].childNodes.length):t.setEnd(i[0],i[0].childNodes.length)}var o=t.commonAncestorNode;if(i=o.closest("[".concat(Gt,"]"),function(X){return V(X).isEditable()?void 0:X.parentNode||void 0}),i.length>0){var l=o.closest("[".concat(jn,'="center"]'),function(X){return V(X).isEditable()?void 0:X.parentNode||void 0});l.length===0&&(t.select(i),o=t.commonAncestorNode)}if(!(!o.inEditor()&&!o.isRoot())){if(t.collapsed)return{html:"",text:""};if(i=o.closest("[".concat(Gt,"]"),function(X){if(!V(X).isEditable())return X.parentNode||void 0}),!(i.length>0)){var c=this.node,d=this.list,v,h=t.startNode.closest("li");if(h&&c.isCustomize(h)){var g=t.endNode.closest("li");if(!h.equal(g)||d.isLast(t)&&d.isFirst(t))if(d.isFirst(t)){var w=h.parent(),x=h.getIndex();w&&t.setStart(w,x<0?0:x)}else{var _,E,M=h.parent(),T=t.createSelection(),S=T.getNode(h,"center",!0);if((_=T.anchor)===null||_===void 0||_.remove(),(E=T.focus)===null||E===void 0||E.remove(),ge(this)&&this.change.combinText(),S.length>0){var D=!1;S.each(function(X,se){var Y=S.eq(se);if(!D&&(Y==null?void 0:Y.name)==="li"){D=!0;return}D&&(Y==null||Y.remove())});var I=h.first(),P=I?this.card.find(I):void 0;P&&(v=S,this.list.addCardToCustomize(v,P.name,P.getValue()),M&&c.wrap(v,M==null?void 0:M.clone()))}}}var B=t.enlargeToElementNode(!0).cloneContents(),$=[];if(o.isText()&&B.childNodes.length===1&&((e=B.firstChild)===null||e===void 0?void 0:e.nodeType)===Node.TEXT_NODE)for(var q=o.parent();q&&(c.isMark(q)||c.isInline(q));)$.push(q.clone(!1).get()),q=q.parent();B.querySelectorAll("li").forEach(function(X){var se,Y,j=V(X),fe=j.attributes(fn);if(!!fe){var ve=(se=r.container.get())===null||se===void 0?void 0:se.querySelector("[".concat(fn,"=").concat(fe,"]"));c.isCustomize(j)&&!(!((Y=j.first())===null||Y===void 0)&&Y.isCard())&&(ve==null?void 0:ve.firstChild)&&j.prepend(c.clone(V(ve.firstChild),!0,!1));var ae=ve==null?void 0:ve.parentElement;ae=ae?V(ae.cloneNode(!1)):null;var J=X.parentElement;ve&&ae&&c.isList(ae)&&(!J||!c.isList(J))&&(ae.name==="ol"&&ae.removeAttributes("start"),c.wrap(X,ae))}});var G=function(se){if(se.length===0)return{};for(var Y=se.length-1;Y>0;Y--){var j=se[Y];j.appendChild(se[Y-1])}return{inner:se[0],outter:se[se.length-1]}},H=G($),z=H.inner,O=H.outter,Q=[];B.childNodes.forEach(function(X){var se=V(X);(c.isList(se)||se.name==="li")&&Q.push(se)}),this.nodeId.generateAll(V(B),!0),this.list.merge(Q);var ie=new _o(B,this),L=ie.toHTML(z,O),F=new _o(L,this).toText(this.schema,!0);return{html:L,text:F}}}}},{key:"destroy",value:function(){this.container.removeAttributes(lt),this.event.destroy(),this.plugin.destroy(),this.card.destroy(),this.container.empty()}}]),b}(),XC=`@font-face {\r
    font-family: "data-icon"; /* Project id 1456030 */\r
    src: url('//at.alicdn.com/t/font_1456030_lnqmc6a6ca.woff2?t=1638071536645') format('woff2'),\r
       url('//at.alicdn.com/t/font_1456030_lnqmc6a6ca.woff?t=1638071536645') format('woff'),\r
       url('//at.alicdn.com/t/font_1456030_lnqmc6a6ca.ttf?t=1638071536645') format('truetype');\r
  }  \r
  \r
  .data-icon {\r
    font-family: "data-icon" !important;\r
    font-size: 16px;\r
    font-style: normal;\r
    -webkit-font-smoothing: antialiased;\r
    -moz-osx-font-smoothing: grayscale;\r
  }\r
  \r
  .data-icon-block-image:before {\r
    content: "\\ea20";\r
  }\r
  \r
  .data-icon-inline-image:before {\r
    content: "\\e601";\r
  }\r
  \r
  .data-icon-no-border:before {\r
    content: "\\e608";\r
  }\r
  \r
  .data-icon-line-height:before {\r
    content: "\\e697";\r
  }\r
  \r
  .data-icon-text:before {\r
    content: "\\e600";\r
  }\r
  \r
  .data-icon-comment:before {\r
    content: "\\e73e";\r
  }\r
  \r
  .data-icon-huanyuan:before {\r
    content: "\\e60a";\r
  }\r
  \r
  .data-icon-label:before {\r
    content: "\\e714";\r
  }\r
  \r
  .data-icon-video:before {\r
    content: "\\e741";\r
  }\r
  \r
  .data-icon-table:before {\r
    content: "\\e6a8";\r
  }\r
  \r
  .data-icon-h:before {\r
    content: "\\e7a0";\r
  }\r
  \r
  .data-icon-collapse-subtree:before {\r
    content: "\\e754";\r
  }\r
  \r
  .data-icon-expand-subtree:before {\r
    content: "\\e792";\r
  }\r
  \r
  .data-icon-sub-node:before {\r
    content: "\\e78e";\r
  }\r
  \r
  .data-icon-sister-node:before {\r
    content: "\\e784";\r
  }\r
  \r
  .data-icon-sup:before {\r
    content: "\\e790";\r
  }\r
  \r
  .data-icon-sub:before {\r
    content: "\\e75a";\r
  }\r
  \r
  .data-icon-maximize:before {\r
    content: "\\e752";\r
  }\r
  \r
  .data-icon-codeblock:before {\r
    content: "\\e709";\r
  }\r
  \r
  .data-icon-emoji:before {\r
    content: "\\e73a";\r
  }\r
  \r
  .data-icon-h4:before {\r
    content: "\\e759";\r
  }\r
  \r
  .data-icon-h1:before {\r
    content: "\\e75b";\r
  }\r
  \r
  .data-icon-h5:before {\r
    content: "\\e75c";\r
  }\r
  \r
  .data-icon-h2:before {\r
    content: "\\e75d";\r
  }\r
  \r
  .data-icon-h3:before {\r
    content: "\\e760";\r
  }\r
  \r
  .data-icon-h6:before {\r
    content: "\\e761";\r
  }\r
  \r
  .data-icon-liuchengtu:before {\r
    content: "\\e61c";\r
  }\r
  \r
  .data-icon-website:before {\r
    content: "\\e694";\r
  }\r
  \r
  .data-icon-preferences:before {\r
    content: "\\e788";\r
  }\r
  \r
  .data-icon-hr:before {\r
    content: "\\e76a";\r
  }\r
  \r
  .data-icon-task-list:before {\r
    content: "\\e79f";\r
  }\r
  \r
  .data-icon-unordered-list:before {\r
    content: "\\e777";\r
  }\r
  \r
  .data-icon-ordered-list:before {\r
    content: "\\e795";\r
  }\r
  \r
  .data-icon-arrow-left:before {\r
    content: "\\e748";\r
  }\r
  \r
  .data-icon-arrow-up:before {\r
    content: "\\e769";\r
  }\r
  \r
  .data-icon-arrow-right:before {\r
    content: "\\e779";\r
  }\r
  \r
  .data-icon-arrow-down:before {\r
    content: "\\e79a";\r
  }\r
  \r
  .data-icon-moremark:before {\r
    content: "\\e772";\r
  }\r
  \r
  .data-icon-clean:before {\r
    content: "\\e74d";\r
  }\r
  \r
  .data-icon-paintformat:before {\r
    content: "\\e756";\r
  }\r
  \r
  .data-icon-lock:before {\r
    content: "\\e768";\r
  }\r
  \r
  .data-icon-loading:before {\r
    content: "\\e76b";\r
  }\r
  \r
  .data-icon-unlock:before {\r
    content: "\\e796";\r
  }\r
  \r
  .data-icon-collapse:before {\r
    content: "\\e79e";\r
  }\r
  \r
  .data-icon-align-bottom:before {\r
    content: "\\e72b";\r
  }\r
  \r
  .data-icon-attachment:before {\r
    content: "\\e72c";\r
  }\r
  \r
  .data-icon-bold:before {\r
    content: "\\e72d";\r
  }\r
  \r
  .data-icon-border-color:before {\r
    content: "\\e72e";\r
  }\r
  \r
  .data-icon-border-all:before {\r
    content: "\\e72f";\r
  }\r
  \r
  .data-icon-border-inner:before {\r
    content: "\\e730";\r
  }\r
  \r
  .data-icon-border-left:before {\r
    content: "\\e731";\r
  }\r
  \r
  .data-icon-border-bottom:before {\r
    content: "\\e732";\r
  }\r
  \r
  .data-icon-border-none:before {\r
    content: "\\e733";\r
  }\r
  \r
  .data-icon-box:before {\r
    content: "\\e734";\r
  }\r
  \r
  .data-icon-border-outer:before {\r
    content: "\\e735";\r
  }\r
  \r
  .data-icon-border-right:before {\r
    content: "\\e736";\r
  }\r
  \r
  .data-icon-clear:before {\r
    content: "\\e737";\r
  }\r
  \r
  .data-icon-close:before {\r
    content: "\\e738";\r
  }\r
  \r
  .data-icon-code-example:before {\r
    content: "\\e739";\r
  }\r
  \r
  .data-icon-clip:before {\r
    content: "\\e73b";\r
  }\r
  \r
  .data-icon-border-up:before {\r
    content: "\\e73c";\r
  }\r
  \r
  .data-icon-code:before {\r
    content: "\\e73d";\r
  }\r
  \r
  .data-icon-command:before {\r
    content: "\\e73f";\r
  }\r
  \r
  .data-icon-compact-display:before {\r
    content: "\\e740";\r
  }\r
  \r
  .data-icon-copy:before {\r
    content: "\\e742";\r
  }\r
  \r
  .data-icon-download:before {\r
    content: "\\e743";\r
  }\r
  \r
  .data-icon-deletecolumn:before {\r
    content: "\\e744";\r
  }\r
  \r
  .data-icon-cut:before {\r
    content: "\\e745";\r
  }\r
  \r
  .data-icon-decreasedecimalplace:before {\r
    content: "\\e746";\r
  }\r
  \r
  .data-icon-drag:before {\r
    content: "\\e747";\r
  }\r
  \r
  .data-icon-delete:before {\r
    content: "\\e749";\r
  }\r
  \r
  .data-icon-drag-circle:before {\r
    content: "\\e74a";\r
  }\r
  \r
  .data-icon-deleterow:before {\r
    content: "\\e74b";\r
  }\r
  \r
  .data-icon-edit:before {\r
    content: "\\e74c";\r
  }\r
  \r
  .data-icon-filter:before {\r
    content: "\\e74e";\r
  }\r
  \r
  .data-icon-expand:before {\r
    content: "\\e74f";\r
  }\r
  \r
  .data-icon-error:before {\r
    content: "\\e750";\r
  }\r
  \r
  .data-icon-freezerowcoloum:before {\r
    content: "\\e751";\r
  }\r
  \r
  .data-icon-freezefirstrow:before {\r
    content: "\\e753";\r
  }\r
  \r
  .data-icon-freezzecolumn:before {\r
    content: "\\e755";\r
  }\r
  \r
  .data-icon-border-style:before {\r
    content: "\\e757";\r
  }\r
  \r
  .data-icon-gotolink:before {\r
    content: "\\e758";\r
  }\r
  \r
  .data-icon-increasedecimalplace:before {\r
    content: "\\e75e";\r
  }\r
  \r
  .data-icon-insertrowbelow:before {\r
    content: "\\e75f";\r
  }\r
  \r
  .data-icon-image:before {\r
    content: "\\e762";\r
  }\r
  \r
  .data-icon-italic:before {\r
    content: "\\e763";\r
  }\r
  \r
  .data-icon-indent:before {\r
    content: "\\e764";\r
  }\r
  \r
  .data-icon-insertrowabove:before {\r
    content: "\\e765";\r
  }\r
  \r
  .data-icon-insertrowright:before {\r
    content: "\\e766";\r
  }\r
  \r
  .data-icon-left-circle-fill:before {\r
    content: "\\e767";\r
  }\r
  \r
  .data-icon-link:before {\r
    content: "\\e76c";\r
  }\r
  \r
  .data-icon-keyboard:before {\r
    content: "\\e76d";\r
  }\r
  \r
  .data-icon-more:before {\r
    content: "\\e76e";\r
  }\r
  \r
  .data-icon-merge-cells:before {\r
    content: "\\e76f";\r
  }\r
  \r
  .data-icon-outdent:before {\r
    content: "\\e770";\r
  }\r
  \r
  .data-icon-mention:before {\r
    content: "\\e771";\r
  }\r
  \r
  .data-icon-plus:before {\r
    content: "\\e773";\r
  }\r
  \r
  .data-icon-minus-circle-o:before {\r
    content: "\\e774";\r
  }\r
  \r
  .data-icon-highlight:before {\r
    content: "\\e775";\r
  }\r
  \r
  .data-icon-paste:before {\r
    content: "\\e776";\r
  }\r
  \r
  .data-icon-insertrowleft:before {\r
    content: "\\e778";\r
  }\r
  \r
  .data-icon-quote:before {\r
    content: "\\e77a";\r
  }\r
  \r
  .data-icon-plus-circle-o:before {\r
    content: "\\e77b";\r
  }\r
  \r
  .data-icon-right-circle-fill:before {\r
    content: "\\e77c";\r
  }\r
  \r
  .data-icon-question-circle-o:before {\r
    content: "\\e77d";\r
  }\r
  \r
  .data-icon-preview:before {\r
    content: "\\e77e";\r
  }\r
  \r
  .data-icon-reload:before {\r
    content: "\\e77f";\r
  }\r
  \r
  .data-icon-rotate-left:before {\r
    content: "\\e780";\r
  }\r
  \r
  .data-icon-math:before {\r
    content: "\\e781";\r
  }\r
  \r
  .data-icon-overflow:before {\r
    content: "\\e782";\r
  }\r
  \r
  .data-icon-redo:before {\r
    content: "\\e783";\r
  }\r
  \r
  .data-icon-searchreplace:before {\r
    content: "\\e785";\r
  }\r
  \r
  .data-icon-save:before {\r
    content: "\\e786";\r
  }\r
  \r
  .data-icon-singleselect:before {\r
    content: "\\e787";\r
  }\r
  \r
  .data-icon-rotate-right:before {\r
    content: "\\e789";\r
  }\r
  \r
  .data-icon-sort-ascending:before {\r
    content: "\\e78a";\r
  }\r
  \r
  .data-icon-sort-descending:before {\r
    content: "\\e78b";\r
  }\r
  \r
  .data-icon-toc:before {\r
    content: "\\e78c";\r
  }\r
  \r
  .data-icon-solit-cells:before {\r
    content: "\\e78d";\r
  }\r
  \r
  .data-icon-translate:before {\r
    content: "\\e78f";\r
  }\r
  \r
  .data-icon-successful:before {\r
    content: "\\e791";\r
  }\r
  \r
  .data-icon-strikethrough:before {\r
    content: "\\e793";\r
  }\r
  \r
  .data-icon-undo:before {\r
    content: "\\e794";\r
  }\r
  \r
  .data-icon-underline:before {\r
    content: "\\e797";\r
  }\r
  \r
  .data-icon-unlink:before {\r
    content: "\\e798";\r
  }\r
  \r
  .data-icon-wrap:before {\r
    content: "\\e799";\r
  }\r
  \r
  .data-icon-upload:before {\r
    content: "\\e79b";\r
  }\r
  \r
  .data-icon-zoom-out:before {\r
    content: "\\e79c";\r
  }\r
  \r
  .data-icon-zoom-in:before {\r
    content: "\\e79d";\r
  }\r
  \r
  .data-icon-align-center:before {\r
    content: "\\e725";\r
  }\r
  \r
  .data-icon-align-justify:before {\r
    content: "\\e726";\r
  }\r
  \r
  .data-icon-align-left:before {\r
    content: "\\e727";\r
  }\r
  \r
  .data-icon-align-top:before {\r
    content: "\\e728";\r
  }\r
  \r
  .data-icon-align-right:before {\r
    content: "\\e729";\r
  }\r
  \r
  .data-icon-align-middle:before {\r
    content: "\\e72a";\r
  }\r
\r
.data-anticon {\r
    display: inline-block;\r
    font-style: normal;\r
    vertical-align: -0.125em;\r
    text-align: center;\r
    text-transform: none;\r
    line-height: 0;\r
    text-rendering: optimizeLegibility;\r
    -webkit-font-smoothing: antialiased;\r
}\r
\r
.data-anticon svg {\r
    display: inline-block;\r
}\r
\r
@-webkit-keyframes loadingCircle {\r
    100% {\r
      transform: rotate(360deg);\r
    }\r
}\r
@keyframes loadingCircle {\r
    100% {\r
      transform: rotate(360deg);\r
    }\r
}\r
\r
.data-anticon .data-anticon-spin {\r
    display: inline-block;\r
    -webkit-animation: loadingCircle 1s infinite linear;\r
    animation: loadingCircle 1s infinite linear;\r
}\r
\r
.data-anticon > * {\r
    line-height: 1;\r
}\r
\r
.am-engine {\r
    position: relative;\r
    background-color: #FFFFFF;\r
}\r
\r
.am-engine.am-engine-placeholder:before {\r
  content: attr(data-placeholder);\r
  pointer-events: none;\r
  position: absolute;\r
  color: #bbbfc4;\r
  height: 0;\r
}\r
\r
.am-engine ::-moz-selection {\r
    background: rgba(180, 213, 254, 0.5) !important;\r
    color: inherit!important;\r
}\r
\r
.am-engine ::selection {\r
    background: rgba(180, 213, 254, 0.5) !important;\r
    color: inherit!important;\r
}\r
\r
.am-engine , .am-engine-view {\r
    font-family: 'Chinese Quote', 'Segoe UI', Roboto, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif, 'Apple Color Emoji';\r
	word-wrap: break-word;\r
	outline-style: none;\r
	white-space: pre-wrap;\r
    -webkit-user-select: auto;\r
       -moz-user-select: auto;\r
        -ms-user-select: auto;\r
            user-select: auto;\r
    font-size: 14px;\r
    line-height: 1.74;\r
    color: #262626;\r
    letter-spacing: .05em;\r
    /* pt / px \u6362\u7B97\u8868\uFF1Ahttps://websemantics.uk/articles/font-size-conversion/ */\r
}\r
\r
.am-engine > *:first-child,.am-engine-view > *:first-child {\r
	margin-top: 0 !important;\r
}\r
\r
.am-engine p , .am-engine-view p {\r
    white-space: normal;\r
    margin: 0;\r
    line-height: 1.74;\r
}\r
\r
.am-engine [contenteditable="true"],.am-engine-view [contenteditable="true"] {\r
	outline-style: none;\r
}\r
\r
.am-engine .selection-transparent::-moz-selection,.am-engine-view .selection-transparent::-moz-selection {\r
	background: transparent;\r
}\r
\r
.am-engine .selection-transparent::selection,.am-engine-view .selection-transparent::selection {\r
	background: transparent;\r
}\r
/*---------------------------\u5361\u7247 begin-----------------------*/\r
\r
.am-engine [data-card-type], .am-engine-view [data-card-type] {\r
    white-space: normal;\r
}\r
.am-engine span[data-card-type="inline"],.am-engine-view span[data-card-type="inline"] {\r
	display: inline-block;\r
	text-indent: 0;\r
	vertical-align: baseline;\r
	white-space: initial;\r
}\r
\r
.am-engine span[data-card-type="inline"] span[data-card-element],.am-engine-view span[data-card-type="inline"] span[data-card-element] {\r
	display: inline-block;\r
}\r
\r
.am-engine span[data-card-type="inline"] span[data-card-element="center"],.am-engine-view span[data-card-type="inline"] span[data-card-element="center"] {\r
	vertical-align: bottom;\r
  border-radius: 2px;\r
}\r
\r
.am-engine span[data-card-type="inline"] span[data-card-element="left"],\r
.am-engine-view span[data-card-type="inline"] span[data-card-element="left"],\r
.am-engine span[data-card-type="inline"] span[data-card-element="right"],.am-engine-view span[data-card-type="inline"] span[data-card-element="right"] {\r
	text-align: left;\r
	-webkit-user-select: text;\r
	   -moz-user-select: text;\r
	    -ms-user-select: text;\r
	        user-select: text;\r
  min-width: 1px;\r
  background: transparent;\r
  bottom: 0;\r
}\r
\r
.am-engine span[data-card-type="inline"] span[data-card-element="left"],\r
.am-engine-view span[data-card-type="inline"] span[data-card-element="left"] {\r
  left: -1px;\r
}\r
\r
.am-engine span[data-card-type="inline"] span[data-card-element="right"],.am-engine-view span[data-card-type="inline"] span[data-card-element="right"] {\r
  right: -1px;\r
}\r
\r
.am-engine span[data-card-type="inline"] span[data-card-element="left"]::-moz-selection,\r
.am-engine-view span[data-card-type="inline"] span[data-card-element="left"]::-moz-selection,\r
.am-engine span[data-card-type="inline"] span[data-card-element="right"]::-moz-selection,.am-engine-view span[data-card-type="inline"] span[data-card-element="right"]::-moz-selection {\r
  background: transparent !important;\r
}\r
\r
.am-engine span[data-card-type="inline"] span[data-card-element="left"]::selection,\r
.am-engine-view span[data-card-type="inline"] span[data-card-element="left"]::selection,\r
.am-engine span[data-card-type="inline"] span[data-card-element="right"]::selection,.am-engine-view span[data-card-type="inline"] span[data-card-element="right"]::selection {\r
  background: transparent !important;\r
}\r
\r
.am-engine div[data-card-type="block"],.am-engine-view div[data-card-type="block"],.am-engine span[data-card-type="inline"].data-card-block,.am-engine-view span[data-card-type="inline"].data-card-block {\r
	display: block;\r
}\r
\r
.am-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"],.am-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"],.am-engine span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="left"],.am-engine-view span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="left"],.am-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"],.am-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"],.am-engine span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="right"],.am-engine-view span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="right"] {\r
	bottom: 0;\r
	position: absolute;\r
	width: 2px;\r
	overflow: hidden;\r
	outline: none;\r
	text-align: left;\r
	text-indent: 0;\r
	-webkit-box-flex: 0;\r
	flex: 0 0 auto;\r
	-webkit-user-select: text;\r
	-moz-user-select: text;\r
	 -ms-user-select: text;\r
	     user-select: text;\r
}\r
\r
.am-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"],.am-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"],.am-engine span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="left"],.am-engine-view span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="left"] {\r
	left: -2px;\r
	text-align: left;\r
}\r
\r
.am-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"],.am-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"],.am-engine span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="right"],.am-engine-view span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="right"] {\r
	right: -2px;\r
	text-align: right;\r
}\r
\r
.am-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"]::-moz-selection,\r
.am-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"]::-moz-selection,\r
.am-engine span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="left"]::-moz-selection,\r
.am-engine-view span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="left"]::-moz-selection { \r
  background: transparent !important;\r
}\r
\r
.am-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"]::selection,\r
.am-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="left"]::selection,\r
.am-engine span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="left"]::selection,\r
.am-engine-view span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="left"]::selection { \r
  background: transparent !important;\r
}\r
\r
.am-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"]::-moz-selection,\r
.am-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"]::-moz-selection,\r
.am-engine span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="right"]::-moz-selection,\r
.am-engine-view span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="right"]::-moz-selection {\r
	background: transparent !important;\r
}\r
\r
.am-engine div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"]::selection,\r
.am-engine-view div[data-card-type="block"] > div[data-card-element="body"] > span[data-card-element="right"]::selection,\r
.am-engine span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="right"]::selection,\r
.am-engine-view span[data-card-type="inline"].data-card-block > div[data-card-element="body"] > span[data-card-element="right"]::selection {\r
	background: transparent !important;\r
}\r
	\r
\r
.am-engine span[data-card-element="body"],.am-engine-view span[data-card-element="body"],.am-engine div[data-card-element="body"],.am-engine-view div[data-card-element="body"] {\r
	position: relative;\r
}\r
\r
.am-engine span[data-card-element="body"] [data-card-element="center"],.am-engine-view span[data-card-element="body"] [data-card-element="center"],.am-engine div[data-card-element="body"] [data-card-element="center"],.am-engine-view div[data-card-element="body"] [data-card-element="center"] {\r
	-webkit-user-select: text;\r
	-moz-user-select: text;\r
	 -ms-user-select: text;\r
	     user-select: text;\r
}\r
.am-engine span[data-card-element="body"] [data-element="editable"],.am-engine div[data-card-element="body"] [data-element="editable"]\r
{\r
    cursor: text;\r
}\r
/*---------------------------\u5361\u7247 end-----------------------*/`;Mo(XC);var JC=function(b){ft(t,b);var u=ht(t);function t(n,e){var r;Fe(this,t),r=u.call(this,n,e),r._readonly=!1,r._container=void 0,r.kind="engine",r.typing=void 0,r.ot=void 0,r.change=void 0,r.history=void 0,r.hotkey=void 0,r.options=Ie(Ie({},r.options),e),r.history=new Hx(Ye(r)),r._container=new lC(r.container,{engine:Ye(r),lang:r.options.lang,className:r.options.className,tabIndex:r.options.tabIndex,placeholder:r.options.placeholder}),r.root=V(r.options.root||r.container.parent()||vr().body);var i=r.root.css("position");return(!i||i==="static")&&r.root.css("position","relative"),r._container.init(),r.change=new hx(Ye(r),{onChange:function(o){return r.trigger("change",o)},onSelect:function(){return r.trigger("select")},onRealtimeChange:function(o){r.trigger("realtimeChange",o)},onSetValue:function(){return r.trigger("afterSetValue")}}),r.change.init(),r.typing=new sC(Ye(r)),r._readonly=r.options.readonly===void 0?!1:r.options.readonly,r._container.setReadonly(r._readonly),r.hotkey=new jx(Ye(r)),r.init(),r.ot=new Px(Ye(r)),r.isEmpty()&&r._container.showPlaceholder(),r.ot.initLocal(),r}return Be(t,[{key:"readonly",get:function(){return this._readonly},set:function(e){this.readonly!==e&&(e?(this.hotkey.disable(),this._container.setReadonly(!0)):(this.hotkey.enable(),this._container.setReadonly(!1)),this._readonly=e,this.card.reRender(),this.trigger("readonly",e))}},{key:"isFocus",value:function(){return this._container.isFocus()}},{key:"isEmpty",value:function(){return this.change.isEmpty()}},{key:"focus",value:function(e){this.change.range.focus(e)}},{key:"blur",value:function(){this.change.range.blur()}},{key:"getValue",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,r=this.change.getValue({ignoreCursor:e});return e?iv.removeTags(r):r}},{key:"getValueAsync",value:function(){var n=zr(Qt.mark(function r(){var i=this,a,o,l=arguments;return Qt.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return a=l.length>0&&l[0]!==void 0?l[0]:!1,o=l.length>1?l[1]:void 0,d.abrupt("return",new Promise(function(){var v=zr(Qt.mark(function h(g,w){var x,_,E,M;return Qt.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:x=Object.keys(i.plugin.components),_=Qt.mark(function D(I){var P,B;return Qt.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return P=i.plugin.components[x[I]],q.next=3,new Promise(function(G){P.waiting?P.waiting(o).then(function(){return G(!0)}).catch(G):G(!0)});case 3:if(B=q.sent,Jn(B)!=="object"){q.next=7;break}return w(B),q.abrupt("return",{v:void 0});case 7:case"end":return q.stop()}},D)}),E=0;case 3:if(!(E<x.length)){S.next=11;break}return S.delegateYield(_(E),"t0",5);case 5:if(M=S.t0,Jn(M)!=="object"){S.next=8;break}return S.abrupt("return",M.v);case 8:E++,S.next=3;break;case 11:g(i.getValue(a));case 12:case"end":return S.stop()}},h)}));return function(h,g){return v.apply(this,arguments)}}()));case 3:case"end":return d.stop()}},r)}));function e(){return n.apply(this,arguments)}return e}()},{key:"getHtml",value:function(){var e=V(this.container[0].cloneNode(!0));return e.removeAttributes(Hi),e.removeAttributes("tabindex"),e.removeAttributes("autocorrect"),e.removeAttributes("autocomplete"),e.removeAttributes("spellcheck"),e.removeAttributes("data-gramm"),e.removeAttributes("role"),new _o(e,this).toHTML()}},{key:"setValue",value:function(e,r){return e=this.trigger("beforeSetValue",e)||e,this.change.setValue(e,void 0,r),this.normalize(),this.nodeId.generateAll(this.container),this}},{key:"setHtml",value:function(e,r){var i=this;return this.change.setHtml(e,function(a){i.normalize(),i.container.allChildren("editable").forEach(function(o){i.node.isInline(o)?i.inline.repairCursor(o):i.node.isMark(o)&&i.mark.repairCursor(o)}),r&&r(a)}),this.nodeId.generateAll(this.container),this}},{key:"setMarkdown",value:function(e,r){var i=this;return this.change.setMarkdown(e,function(a){i.normalize(),i.container.allChildren("editable").forEach(function(o){i.node.isInline(o)?i.inline.repairCursor(o):i.node.isMark(o)&&i.mark.repairCursor(o)}),r&&r(a)}),this.nodeId.generateAll(this.container),this}},{key:"setJsonValue",value:function(e,r){var i=V(Am(e)),a=this.node.html(i);return this.change.setValue(a,void 0,r),this.normalize(),this.nodeId.generateAll(this.container),this}},{key:"getJsonValue",value:function(){return Rf(this.container)}},{key:"normalize",value:function(){var e=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.container,i=V("<p />"),a=r.children();a.each(function(o,l){var c=a.eq(l);!c||(e.node.isBlock(c)?(i.get().childNodes.length>0&&c.before(i),i=V("<p />")):c.isCursor()||i.append(c))}),i.get().childNodes.length>0&&r.append(i),a=r.children(),a.each(function(o,l){var c=a.eq(l);if(!!c&&(e.node.removeMinusStyle(c,"text-indent"),e.node.isRootBlock(c))){var d=c.get().childNodes.length;if(d===0)c.append(V("<br />"));else{var v=c.first();d===1&&(v==null?void 0:v.name)==="span"&&[no,ts,ns].indexOf(v.attributes(lt))>=0&&c.prepend(V("<br />"))}}})}},{key:"showPlaceholder",value:function(){this._container.showPlaceholder()}},{key:"hidePlaceholder",value:function(){this._container.hidePlaceholder()}},{key:"destroy",value:function(){this._container.destroy(),this.change.destroy(),this.hotkey.destroy(),this.typing.destroy(),this.ot&&this.ot.destroy(),At(St(t.prototype),"destroy",this).call(this)}}]),t}(QC),eE=`.card-maximize-header {\r
    position: fixed !important;\r
    top: 0;\r
    right: 0;\r
    left: 0;\r
    z-index: 9999;\r
    height: 56px;\r
    background: #fff;\r
    border-bottom: 1px solid #e8e8e8;\r
    width: 100%;\r
}\r
\r
.card-maximize-header .header-crumb {\r
    float: left;\r
    line-height: 32px;\r
    display: flex;\r
    height: 100%;\r
    align-items: center;\r
    -webkit-box-align: center;\r
    -ms-flex-align: center;\r
}\r
\r
.card-maximize-header .header-crumb a\r
{\r
    color: #595959 !important;\r
    font-size: 14px;\r
    cursor: pointer;\r
}\r
\r
.card-maximize-header .header-crumb .split {\r
    display: inline-block;\r
    vertical-align: middle;\r
    padding: 0 15px;\r
    font-size: 20px;\r
    padding-right: 8px;\r
    font-weight: 200;\r
    margin: 0 8px;\r
}\r
\r
.card-maximize-header .header-crumb .split + a {\r
    display: inline-block;\r
    vertical-align: middle;\r
}\r
\r
.card-maximize-header .header-crumb .split + a:hover {\r
	color: #8C8C8C;\r
}\r
\r
.data-card-block-max > [data-card-element="body"] > [data-card-element="center"], .data-card-block-max > [data-card-element="body"] > [data-card-element="center"].data-card-background-selected {\r
    top: 96px;\r
    background: #fafafa !important;\r
    position: fixed!important;\r
    right: 0;\r
    bottom: 0;\r
    left: 0;\r
    z-index: 124;\r
    overflow: auto;\r
    padding: 20px;\r
}\r
\r
.am-engine-mobile .data-card-block-max > [data-card-element="body"] > [data-card-element="center"],.am-engine-view .data-card-block-max > [data-card-element="body"] > [data-card-element="center"] {\r
    top:56px;\r
}`;Mo(eE);var tE=function(){function b(u,t){Fe(this,b),this.card=void 0,this.node=void 0,this.editor=void 0,this.editor=u,this.card=t}return Be(b,[{key:"restore",value:function(){this.card.root.removeClass("data-card-block-max"),this.node&&(this.node.remove(),this.node=void 0);var t=this.editor;ge(t)&&(t.trigger("card:minimize",this.card),t.history.reset())}},{key:"maximize",value:function(){var t=this;if(!this.node){var n=this.editor,e=n.language,r=e.get("maximize","back").toString(),i=V('<div class="card-maximize-header" '.concat(Id,'="true" ').concat(lt,'="').concat(Gn,`">
            <div class="header-crumb">
                <a class="split">
                    <span class="data-icon data-icon-arrow-left"></span>
                </a>
                <a>`).concat(r,`</a>
            </div>
        </div>`));i.on("click",function(l){l.stopPropagation()}),this.card.root.addClass("data-card-block-max");var a=i.find(".header-crumb");a.on("click",function(){t.card.minimize()});var o=this.card.findByKey("body");o==null||o.prepend(i),ge(n)&&(n.trigger("card:maximize",this.card),n.history.reset()),this.node=i}}}]),b}(),nE=`.data-card-resize {\r
    position: absolute;\r
    bottom: -3px;\r
    right: 0px;\r
    left: 0px;\r
    margin: 0 auto;\r
    z-index: 2;\r
    display: flex;\r
    align-items: center;\r
    justify-content: center;\r
}\r
\r
.data-card-resize-btn{\r
    background: #d9dbdd;\r
    border-radius: 3px;\r
    height: 6px;\r
    padding: 0 50px;\r
    display: block;\r
}\r
\r
.data-card-resize-btn svg {\r
    display: block;\r
    color: #999;\r
}\r
\r
.data-card-resize-btn:hover {\r
    cursor: row-resize;\r
}`;Mo(nE);var rE=function(){function b(u,t){var n=this;Fe(this,b),this.editor=void 0,this.card=void 0,this.point=void 0,this.options={},this.component=void 0,this.start=!1,this.touchStart=function(e){e.preventDefault(),e.cancelBubble=!0,n.point={x:e.targetTouches[0].clientX,y:e.targetTouches[0].clientY};var r=n.options.dragStart;r&&r(n.point)},this.dragStart=function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0,n.point={x:e.clientX,y:e.clientY};var r=n.options.dragStart;r&&r(n.point)},this.dragMove=function(e){if(n.point){var r=n.options.dragMove;r&&r(e.clientY-n.point.y)}},this.touchMove=function(e){if(e.preventDefault(),n.point){var r=n.options.dragMove;r&&r(e.targetTouches[0].clientY-n.point.y)}},this.dragEnd=function(e){n.point=void 0;var r=n.options.dragEnd;r&&r()},this.editor=u,this.card=t}return Be(b,[{key:"create",value:function(t){this.options=t,this.component=V('<div class="data-card-resize" '.concat(lt,'="').concat(Gn,'" draggable="true"><span class="data-card-resize-btn"><svg viewBox="0 0 3413 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="8px" height="6px"><path d="M341.333333 341.333333h2730.666667a170.666667 170.666667 0 0 0 0-341.333333H341.333333a170.666667 170.666667 0 1 0 0 341.333333zM341.333333 1024h2730.666667a170.666667 170.666667 0 0 0 0-341.333333H341.333333a170.666667 170.666667 0 0 0 0 341.333333z"></path></svg></span></div>')),mt?(this.component.on("touchstart",this.touchStart),this.component.on("touchmove",this.touchMove),this.component.on("touchend",this.dragEnd),this.component.on("touchcancel",this.dragEnd)):(this.component.on("dragstart",this.dragStart),document.addEventListener("mousemove",this.dragMove),document.addEventListener("mouseup",this.dragEnd)),this.component.on("click",function(n){n.stopPropagation()})}},{key:"render",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.card.root,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:80;this.start=!1;var r=0,i=0;if(this.create({dragStart:function(){r=n.height(),t.start=!0,t.card.onActivate(!1)},dragMove:function(l){t.start&&(i=r+l,i=i<e?e:i,n.css("height","".concat(i,"px")))},dragEnd:function(){t.start&&(t.card.setValue({height:n.height()}),t.start=!1,t.card.onActivate(!0))}}),!!this.component){this.card.activated||this.component.hide(),n.append(this.component);var a=this.card.getValue()||{};a.height&&n.css("height","".concat(a.height,"px"))}}},{key:"show",value:function(){var t;(t=this.component)===null||t===void 0||t.show()}},{key:"hide",value:function(){var t;this.start||(t=this.component)===null||t===void 0||t.hide()}},{key:"destroy",value:function(){var t;if(mt){if(!this.component)return;this.component.off("touchstart",this.touchStart),this.component.off("touchmove",this.touchMove),this.component.off("touchend",this.dragEnd),this.component.off("touchcancel",this.dragEnd)}else{var n;(n=this.component)===null||n===void 0||n.off("dragstart",this.dragStart),document.removeEventListener("mousemove",this.dragMove),document.removeEventListener("mouseup",this.dragEnd)}(t=this.component)===null||t===void 0||t.remove()}}]),b}(),xo={adjustX:!0,adjustY:!0},Co=[0,0],tp={left:{points:["cr","cl"],overflow:xo,offset:[-4,0],targetOffset:Co},right:{points:["cl","cr"],overflow:xo,offset:[4,0],targetOffset:Co},top:{points:["bc","tc"],overflow:xo,offset:[0,-4],targetOffset:Co},bottom:{points:["tc","bc"],overflow:xo,offset:[0,4],targetOffset:Co},topLeft:{points:["bl","tl"],overflow:xo,offset:[0,-4],targetOffset:Co},leftTop:{points:["tr","tl"],overflow:xo,offset:[-4,0],targetOffset:Co},topRight:{points:["br","tr"],overflow:xo,offset:[0,-4],targetOffset:Co},rightTop:{points:["tl","tr"],overflow:xo,offset:[4,0],targetOffset:Co},bottomRight:{points:["tr","br"],overflow:xo,offset:[0,4],targetOffset:Co},rightBottom:{points:["bl","br"],overflow:xo,offset:[4,0],targetOffset:Co},bottomLeft:{points:["tl","bl"],overflow:xo,offset:[0,4],targetOffset:Co},leftBottom:{points:["br","bl"],overflow:xo,offset:[-4,0],targetOffset:Co}},Ka=Mt("editor"),Va=Mt("container"),gl=Mt("target"),fd=Mt("align"),ml=Mt("offset"),bl=Mt("root"),yl=Mt("onUpdate"),hd=Mt("updateTimeout"),vd=Mt("observer"),Mu=function(){function b(u){var t=this;Fe(this,b),Object.defineProperty(this,Ka,{writable:!0,value:void 0}),Object.defineProperty(this,Va,{writable:!0,value:void 0}),Object.defineProperty(this,gl,{writable:!0,value:void 0}),Object.defineProperty(this,fd,{writable:!0,value:"bottomLeft"}),Object.defineProperty(this,ml,{writable:!0,value:[0,0]}),Object.defineProperty(this,bl,{writable:!0,value:void 0}),Object.defineProperty(this,yl,{writable:!0,value:void 0}),Object.defineProperty(this,hd,{writable:!0,value:void 0}),Object.defineProperty(this,vd,{writable:!0,value:void 0}),this.updateListener=function(){oe(t,hd)[hd]&&clearTimeout(oe(t,hd)[hd]),oe(t,hd)[hd]=setTimeout(function(){t.update()},50)},this.update=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;if(!(!oe(t,Va)[Va]||oe(t,Va)[Va].length===0||!oe(t,gl)[gl]||oe(t,gl)[gl].length===0)){var e=q1(oe(t,Va)[Va].get(),oe(t,gl)[gl].get(),Ie(Ie({},tp[oe(t,fd)[fd]]),{},{targetOffset:oe(t,ml)[ml]}));if(oe(t,yl)[yl]&&n){var r=Object.keys(tp).find(function(i){var a=tp[i].points;return a[0]===e.points[0]&&a[1]===e.points[1]});oe(t,Va)[Va].attributes("data-placement",r),oe(t,yl)[yl](Ie(Ie({},e),{},{align:r}))}}},oe(this,Ka)[Ka]=u}return Be(b,[{key:"bind",value:function(t,n){var e=this,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:oe(this,fd)[fd],i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:oe(this,ml)[ml],a=arguments.length>4?arguments[4]:void 0;if(oe(this,Va)[Va]=t,oe(this,gl)[gl]=n,oe(this,fd)[fd]=r,oe(this,ml)[ml]=i,oe(this,bl)[bl]=V('<div style="position: absolute; top: 0px; left: 0px; width: 100%;"></div>'),oe(this,bl)[bl].append(oe(this,Va)[Va]),oe(this,Ka)[Ka].root.append(oe(this,bl)[bl]),oe(this,yl)[yl]=a,mt||window.addEventListener("scroll",this.updateListener),window.addEventListener("resize",this.updateListener),ge(oe(this,Ka)[Ka])&&!mt){var o;(o=oe(this,Ka)[Ka].scrollNode)===null||o===void 0||o.on("scroll",this.updateListener)}var l={width:n.width(),height:n.height()};typeof ResizeObserver!="undefined"&&(oe(this,vd)[vd]=new ResizeObserver(function(){var c=n.width(),d=n.height();c===l.width&&d===l.height||(l={width:c,height:d},e.updateListener())}),oe(this,vd)[vd].observe(n.get())),this.update()}},{key:"setOffset",value:function(t){oe(this,ml)[ml]=t}},{key:"destroy",value:function(){var t,n;if(oe(this,yl)[yl]=void 0,mt||window.removeEventListener("scroll",this.updateListener),window.removeEventListener("resize",this.updateListener),ge(oe(this,Ka)[Ka])&&!mt){var e;(e=oe(this,Ka)[Ka].scrollNode)===null||e===void 0||e.off("scroll",this.updateListener)}(t=oe(this,vd)[vd])===null||t===void 0||t.disconnect(),(n=oe(this,bl)[bl])===null||n===void 0||n.remove()}}]),b}(),iE=`.data-card-dnd {\r
    position: absolute;\r
    top: 0;\r
    left: -21px;\r
    right: auto;\r
    bottom: auto;\r
    width: 18px;\r
    height: 24px;\r
    line-height: 24px;\r
    font-size: 14px;\r
    font-weight: normal;\r
    display: none;\r
    opacity: 0;\r
    z-index: 125;\r
    transition: all 0.3s ease-in-out;\r
    background: rgba(255, 255, 255, 0.9);\r
}\r
\r
.data-card-dnd-active {\r
    display: block;\r
    opacity: 1;\r
    cursor: pointer;\r
}\r
\r
.data-card-dnd:hover {\r
	background: #f4f4f4;\r
	color: #595959;\r
}\r
\r
.data-card-dnd-trigger {\r
    width: 18px;\r
    height: 24px;\r
    text-align: center;\r
    color: #BFBFBF;\r
    font-size: 16px;\r
    border-radius: 2px 2px;\r
    cursor: move;\r
    cursor: grab;\r
    cursor: -moz-grab;\r
    cursor: -webkit-grab;\r
}\r
\r
.am-engine-view .data-toolbar-active {\r
	min-width: 200px;\r
}\r
\r
.data-card-toolbar.data-toolbar-block {\r
	top: -48px;\r
	bottom: auto;\r
	display: none;\r
}\r
\r
.data-card-toolbar.data-card-toolbar-active {\r
	display: block;\r
}\r
\r
.data-card-toolbar.data-toolbar-active {\r
	display: block;\r
}`;Mo(iE);var Vg=function(u){return["button","input","dropdown","node","switch"].indexOf(u.type)===-1},Wo=Mt("hideTimeout"),Uo=Mt("showTimeout"),wl=Mt("defaultAlign"),Qg=function(){function b(u,t){var n=this;Fe(this,b),this.card=void 0,this.toolbar=void 0,this.editor=void 0,this.offset=void 0,this.position=void 0,Object.defineProperty(this,Wo,{writable:!0,value:null}),Object.defineProperty(this,Uo,{writable:!0,value:null}),Object.defineProperty(this,wl,{writable:!0,value:"topLeft"}),this.clearHide=function(){oe(n,Wo)[Wo]&&clearTimeout(oe(n,Wo)[Wo]),oe(n,Wo)[Wo]=null},this.clearShow=function(){oe(n,Uo)[Uo]&&clearTimeout(oe(n,Uo)[Uo]),oe(n,Uo)[Uo]=null},this.enterHide=function(){n.clearShow(),oe(n,Wo)[Wo]=setTimeout(function(){var e,r,i,a;n.hide(),oe(n,Wo)[Wo]=null,(e=n.toolbar)===null||e===void 0||(r=e.root)===null||r===void 0||r.off("mouseenter",n.clearHide),(i=n.toolbar)===null||i===void 0||(a=i.root)===null||a===void 0||a.off("mouseleave",n.enterHide)},200)},this.enterShow=function(){n.clearHide(),oe(n,Uo)[Uo]=setTimeout(function(){var e,r,i,a;oe(n,Uo)[Uo]=null,n.show(),(e=n.toolbar)===null||e===void 0||(r=e.root)===null||r===void 0||r.on("mouseenter",n.clearHide),(i=n.toolbar)===null||i===void 0||(a=i.root)===null||a===void 0||a.on("mouseleave",n.enterHide)},200)},this.editor=u,this.card=t,this.position=new Mu(this.editor),this.unbindEnterShow(),(!ge(this.editor)||this.editor.readonly)&&this.bindEnterShow()}return Be(b,[{key:"setDefaultAlign",value:function(t){oe(this,wl)[wl]=t}},{key:"bindEnterShow",value:function(){this.card.root.on("mouseenter",this.enterShow),this.card.root.on("mouseleave",this.enterHide)}},{key:"unbindEnterShow",value:function(){this.card.root.off("mouseenter",this.enterShow),this.card.root.off("mouseleave",this.enterHide)}},{key:"setOffset",value:function(t){this.offset=t}},{key:"getContainer",value:function(){var t;return(t=this.toolbar)===null||t===void 0?void 0:t.root}},{key:"getDefaultItem",value:function(t){var n=this,e=this.editor,r=e.language,i=e.clipboard,a=e.card;switch(t.type){case"separator":return{type:"node",node:t.node||V('<span class="data-toolbar-item-split"></span>')};case"copy":return{type:"button",content:t.content||'<span class="data-icon data-icon-copy"></span>',title:t.title||r.get("copy","title"),onClick:function(l,c){if(t.onClick){t.onClick(l,c);return}var d=i.copy(n.card.root[0],!0);d?e.messageSuccess(r.get("copy","success")):e.messageError(r.get("copy","error"))}};case"delete":return{type:"button",content:t.content||'<span class="data-icon data-icon-delete"></span>',title:t.title||r.get("delete","title").toString(),onClick:function(l,c){if(t.onClick){t.onClick(l,c);return}a.remove(n.card.root)}};case"maximize":return{type:"button",content:t.content||'<span class="data-icon data-icon-maximize"></span>',title:t.title||r.get("maximize","title").toString(),onClick:function(l,c){if(t.onClick){t.onClick(l,c);return}n.card.maximize()}};case"more":return{type:"dropdown",content:t.content||'<span class="data-icon data-icon-more"></span>',title:t.title||r.get("more","title").toString(),items:t.items}}}},{key:"getItems",value:function(){var t=this;if(!this.card.toolbar)return[];var n=this.card.toolbar(),e=[];return n.forEach(function(r){if(Vg(r))switch(r.type){case"dnd":break;default:var i=t.getDefaultItem(r);i&&e.push(i)}else e.push(r)}),e}},{key:"create",value:function(){this.hide();var t=this.getItems();if(t.length>0){var n=t.find(function(l){return Vg(l)&&l.type==="dnd"});if(n&&!mt&&n.type==="dnd"){var e=this.editor,r=e.root,i=e.language,a=this.createDnd(n.content||'<span class="data-icon data-icon-drag"></span>',n.title||i.get("dnd","title").toString());r.append(a)}var o=new Dx({items:t});o.root.addClass("data-card-toolbar"),o.root.attributes(Dc,this.card.id),o.render(V(document.body)),o.hide(),this.toolbar=o}}},{key:"update",value:function(){var t,n=this.getItems();(t=this.toolbar)===null||t===void 0||t.update({items:n})}},{key:"hide",value:function(){var t=this.editor.root;t.find(".data-card-dnd").remove(),this.hideCardToolbar()}},{key:"show",value:function(t){this.showCardToolbar(t)}},{key:"hideCardToolbar",value:function(){var t;(t=this.toolbar)===null||t===void 0||t.destroy(),this.position.destroy()}},{key:"showCardToolbar",value:function(t){var n=this;this.create();var e=this.getContainer();if(e&&e.length>0){var r=e.get();if(r.style.left="0px",t){var i=t.clientX,a=e.first(),o=this.card.root.get().getBoundingClientRect();if(a&&i>=o.left&&i<=o.right){var l=a.get().getBoundingClientRect(),c=o.width-l.width;if(c>0){var d=i-o.width-l.width/2;r.style.left=Math.max(Math.min(d,c),0)+"px"}}}else{var v,h,g=((v=this.card.root.get())===null||v===void 0?void 0:v.getBoundingClientRect())||{left:0,top:0},w=this.editor.root,x=((h=w.get())===null||h===void 0?void 0:h.getBoundingClientRect())||{left:0,top:0},_=g.top-x.top,E=g.left-x.left,M=w.find(".data-card-dnd");M.length>0&&(M.css({top:"".concat(_,"px"),left:"".concat(E-M.width()-4,"px")}),M.addClass("data-card-dnd-active"))}e.addClass("data-toolbar-active"),e.attributes("toolbar-trigger-key",this.card.constructor.cardName),this.toolbar&&this.toolbar.show();var T=oe(this,wl)[wl];setTimeout(function(){n.position.bind(e,n.card.isMaximize?n.card.getCenter().first():n.card.root,oe(n,wl)[wl],n.offset,function(S){n.offset&&n.offset.length===4&&S.align==="bottomLeft"&&S.align!==T?(n.position.setOffset([n.offset[2],n.offset[3]]),T=S.align,n.position.update(!1)):n.offset&&S.align===oe(n,wl)[wl]&&S.align!==T&&(n.position.setOffset(n.offset),T=S.align,n.position.update(!1)),T=S.align})},10)}}},{key:"createDnd",value:function(t,n){var e=this,r=V("<div ".concat(lt,'="').concat(Gn,'" class="data-card-dnd" draggable="true" dnd-trigger-key="').concat(this.card.constructor.cardName,'" drag-card-trigger="').concat(this.card.id,'" ').concat(Hi,`="false">
                <div class="data-card-dnd-trigger">
                    `).concat(t,`
                </div>
            </div>`));return r.on("mouseenter",function(){An.show(r,n)}),r.on("mouseleave",function(){An.hide()}),r.on("mousedown",function(i){i.stopPropagation(),An.hide(),e.hideCardToolbar()}),r.on("mouseup",function(){e.showCardToolbar()}),r}},{key:"destroy",value:function(){this.unbindEnterShow(),this.position.destroy()}}]),b}(),ni=function(){function b(u){var t,n=u.editor,e=u.value,r=u.root;Fe(this,b),this.editor=void 0,this.root=void 0,this.toolbarModel=void 0,this.resizeModel=void 0,this.activatedByOther=!1,this.selectedByOther=!1,this.contenteditable=[],this.defaultMaximize=void 0,this.isMaximize=!1,this._id=void 0,this.resize=void 0,this.editor=n;var i=((t=e)===null||t===void 0?void 0:t.type)||this.constructor.cardType,a=i==="inline"?"span":"div";this.root=r||V("<".concat(a," />")),typeof e=="string"&&(e=wr(e)),e=e||{},e.id=this.getId(e.id),this._id=e.id,e.type=i,this.setValue(e),this.defaultMaximize=new tE(this.editor,this)}return Be(b,[{key:"isEditable",get:function(){return this.contenteditable.length>0}},{key:"activated",get:function(){return this.root.hasClass("card-activated")}},{key:"setActivated",value:function(t){t?this.root.addClass("card-activated"):this.root.removeClass("card-activated")}},{key:"selected",get:function(){return this.root.hasClass("card-selected")}},{key:"setSelected",value:function(t){t?this.root.addClass("card-selected"):this.root.removeClass("card-selected")}},{key:"id",get:function(){if(this._id)return this._id;var t=this.getValue();return Jn(t)==="object"&&(t==null?void 0:t.id)||""}},{key:"name",get:function(){return this.root.attributes(Gt)}},{key:"type",get:function(){var t;return((t=this.getValue())===null||t===void 0?void 0:t.type)||this.root.attributes(gi)},set:function(t){if(!(!this.name||t===this.type)){var n=this.editor.card,e=n.replace(this,this.name,Ie(Ie({},this.getValue()),{},{type:t}));n.render(e.root),e.activate(!1),n.activate(e.root)}}},{key:"loading",get:function(){return!!this.root.attributes(mi)}},{key:"init",value:function(){var t,n;this.root.attributes(Ls,this.isEditable?"true":"false"),(t=this.toolbarModel)===null||t===void 0||t.hide(),(n=this.toolbarModel)===null||n===void 0||n.destroy(),this.toolbar&&(this.toolbarModel=new Qg(this.editor,this)),this.resize&&(this.resizeModel=new rE(this.editor,this))}},{key:"getId",value:function(t){var n=[];if(this.editor.card.each(function(r){n.push(r.id)}),t&&n.indexOf(t)<0)return t;for(var e=If();n.indexOf(e)>=0;)e=If();return e}},{key:"setValue",value:function(t){if(t!=null){var n=this.getValue();n!=null&&n.id&&delete t.id,t=Ie(Ie({},n),t),t.type&&(n==null?void 0:n.type)!==t.type&&(this.type=t.type),this.root.attributes(er,Rs(t))}}},{key:"getValue",value:function(){var t=this.root.attributes(er);return t?wr(t):{}}},{key:"find",value:function(t){return this.root.find(t)}},{key:"findByKey",value:function(t){var n=this.root.first()||V([]);if(t==="body"||n.length===0)return n;var e=n.children(),r=["left","center","right"].indexOf(t);if(r>-1)return e.toArray().find(function(o){return o.attributes(jn)===t});var i=this.type===un.BLOCK?"div":"span",a=this.find("".concat(i,"[").concat(jn,"=").concat(t,"]"));return a.name===i&&a.attributes(jn)===t?a:void 0}},{key:"activate",value:function(t){t?this.activated||(this.setActivated(t),this.onActivate(t)):this.activated&&(this.setActivated(t),this.onActivate(!1))}},{key:"select",value:function(t){!ge(this.editor)||this.activatedByOther||(t?!this.selected&&!this.isMaximize&&(this.setSelected(t),this.onSelect(t)):this.selected&&(this.setSelected(t),this.onSelect(!1)))}},{key:"getCenter",value:function(){var t=this.findByKey("center");if(!t)throw new Error("center is not found");return t}},{key:"isCenter",value:function(t){var n,e=t.closest(this.type===un.BLOCK?"div[".concat(jn,"=center]"):"span[".concat(jn,"=center]"));return e.length>0&&!!(!((n=this.findByKey("center"))===null||n===void 0)&&n.equal(e))}},{key:"isCursor",value:function(t){return this.isLeftCursor(t)||this.isRightCursor(t)}},{key:"isLeftCursor",value:function(t){var n;if(t.isElement()&&t.attributes(jn)!=="left")return!1;var e=t.closest(Zi);return e.length>0&&!!(!((n=this.findByKey("left"))===null||n===void 0)&&n.equal(e))}},{key:"isRightCursor",value:function(t){var n;if(t.isElement()&&t.attributes(jn)!=="right")return!1;var e=t.closest(Yi);return e.length>0&&!!(!((n=this.findByKey("right"))===null||n===void 0)&&n.equal(e))}},{key:"focus",value:function(t,n){var e=this.findByKey("left"),r=this.findByKey("right");!e||e.length===0||!r||r.length===0||(t.select(n?e:r,!0).shrinkToTextNode(),t.collapse(!1),this.onFocus&&this.onFocus())}},{key:"maximize",value:function(){var t;this.isMaximize=!0,this.defaultMaximize.maximize(),(t=this.toolbarModel)===null||t===void 0||t.show()}},{key:"minimize",value:function(){var t;this.isMaximize=!1,this.defaultMaximize.restore(),(t=this.toolbarModel)===null||t===void 0||t.show()}},{key:"onSelect",value:function(t){var n=this.constructor.selectStyleType;if(n!==zs.NONE){var e="data-card-".concat(n,"-selected"),r=this.getCenter();t?r.addClass(e):r.removeClass(e)}}},{key:"onSelectByOther",value:function(t,n){var e=this.getCenter(),r=this.constructor.selectStyleType;r===zs.BACKGROUND?e.css("background-color",t?n.rgb:""):e.css("outline",t?"2px solid "+n.color:"");var i="card-selected-other";return t?this.root.addClass(i):this.root.removeClass(i),e}},{key:"onActivate",value:function(t){var n,e;!this.resize||(t?(n=this.resizeModel)===null||n===void 0||n.show():(e=this.resizeModel)===null||e===void 0||e.hide())}},{key:"onActivateByOther",value:function(t,n){return this.onSelectByOther(t,n)}},{key:"initToolbar",value:function(){if(this.toolbar)this.toolbarModel||(this.toolbarModel=new Qg(this.editor,this)),this.activated&&this.toolbarModel.show();else{var t,n;(t=this.toolbarModel)===null||t===void 0||t.hide(),(n=this.toolbarModel)===null||n===void 0||n.destroy(),this.toolbarModel=void 0}}},{key:"initResize",value:function(){if(this.resize){var t=typeof this.resize=="function"?this.resize():this.findByKey("body");if(t&&t.length>0){var n;(n=this.resizeModel)===null||n===void 0||n.render(t)}}}},{key:"didUpdate",value:function(){this.initResize(),this.initToolbar()}},{key:"beforeRender",value:function(){var t=this.getCenter(),n=V("<".concat(this.type===un.BLOCK?"div":"span",' class="').concat(mi,'" ').concat(lt,'="').concat(Gn,'" />'));n.append('<svg viewBox="0 0 1024 1024" class="data-card-spin" data-icon="loading" width="1em" height="1em" fill="currentColor" aria-hidden="true"> <path d="M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 0 0-94.3-139.9 437.71 437.71 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"></path></svg>'),t.empty().append(n)}},{key:"didRender",value:function(){this.loading&&(this.find(".".concat(mi)).remove(),ge(this.editor)||this.root.removeAttributes(mi)),this.initResize(),this.initToolbar(),this.isEditable&&this.editor.nodeId.generateAll(this.getCenter().get())}},{key:"destroy",value:function(){var t,n,e,r;(t=this.toolbarModel)===null||t===void 0||t.hide(),(n=this.toolbarModel)===null||n===void 0||n.destroy(),this.toolbarModel=void 0,(e=this.resizeModel)===null||e===void 0||e.hide(),(r=this.resizeModel)===null||r===void 0||r.destroy(),this.resizeModel=void 0}}]),b}();ni.cardName=void 0;ni.cardType=void 0;ni.autoActivate=void 0;ni.autoSelected=!0;ni.singleSelectable=void 0;ni.collab=!0;ni.focus=void 0;ni.selectStyleType=zs.BORDER;ni.lazyRender=!1;var aE=`.data-scrollable::-webkit-scrollbar {\r
    display: none;\r
    overflow: hidden;\r
  }\r
  .data-scrollable.scroll-x {\r
    padding-bottom: 10px;\r
    overflow-x: hidden;\r
  }\r
  \r
  .data-scrollable.scroll-y {\r
    padding-right: 10px;\r
    overflow-y: hidden;\r
  }\r
\r
  .data-scrollable:hover .data-scrollbar {\r
    display: block;\r
  }\r
  .data-scrollable.scrolling {\r
    -webkit-user-select: none;\r
       -moz-user-select: none;\r
        -ms-user-select: none;\r
            user-select: none;\r
  }\r
  .data-scrollable.scrolling .data-scrollbar {\r
    display: block;\r
  }\r
  .data-scrollable .data-scrollbar {\r
    display: none;\r
    position: absolute;\r
    cursor: default;\r
    transition: opacity 0.3s ease-in-out;\r
  }\r
  .data-scrollable .data-scrollbar .data-scrollbar-trigger {\r
    position: absolute;\r
    background: #c1c1c1;\r
    border-radius: 10px;\r
    cursor: pointer;\r
  }\r
  .data-scrollable .data-scrollbar .data-scrollbar-trigger:hover {\r
    background: #888;\r
  }\r
  .data-scrollable .data-scrollbar.data-scrollbar-x {\r
    height: 8px;\r
    bottom: 0px;\r
  }\r
  .data-scrollable .data-scrollbar.data-scrollbar-x .data-scrollbar-trigger {\r
    height: 8px;\r
    min-width: 60px;\r
  }\r
  .data-scrollable .data-scrollbar.data-scrollbar-y {\r
    top: 0;\r
    width: 8px;\r
    height: 100%;\r
    right: 0px;\r
  }\r
  .data-scrollable .data-scrollbar.data-scrollbar-y .data-scrollbar-trigger {\r
    width: 8px;\r
    min-height: 60px;\r
  }\r
  .data-scrollable .scrollbar-shadow-left {\r
    position: absolute;\r
    z-index: 10;\r
    left: 0;\r
    top: 0;\r
    bottom: 0;\r
    width: 4px;\r
    opacity: 0.8;\r
    background: linear-gradient(270deg, rgba(99, 114, 130, 0) 0, rgba(99, 114, 130, 0.16));\r
    background: -webkit-linear-gradient(right, rgba(99, 114, 130, 0), rgba(99, 114, 130, 0.16));\r
    pointer-events: none;\r
  }\r
  .data-scrollable .scrollbar-shadow-right {\r
    position: absolute;\r
    z-index: 10;\r
    left: 0;\r
    top: 0;\r
    bottom: 0;\r
    width: 4px;\r
    opacity: 0.8;\r
    background: linear-gradient(90deg, rgba(99, 114, 130, 0) 0, rgba(99, 114, 130, 0.16));\r
    background: -webkit-linear-gradient(left, rgba(99, 114, 130, 0), rgba(99, 114, 130, 0.16));\r
    pointer-events: none;\r
  }`;Mo(aE);var pd=Mt("observer"),qo=Mt("reverse"),Gr=Mt("content"),$o=Mt("enableScroll"),dn=Mt("scroll"),bp=function(b){ft(t,b);var u=ht(t);function t(n){var e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,o=arguments.length>4?arguments[4]:void 0;return Fe(this,t),e=u.call(this),e.container=void 0,e.x=void 0,e.y=void 0,e.shadow=void 0,e.scrollBarX=void 0,e.slideX=void 0,e.slideXDragging=void 0,e.scrollBarY=void 0,e.slideY=void 0,e.slideYDragging=void 0,e.shadowLeft=void 0,e.shadowRight=void 0,e.oWidth=0,e.oHeight=0,e.sWidth=0,e.sHeight=0,e.xWidth=0,e.yHeight=0,Object.defineProperty(Ye(e),pd,{writable:!0,value:void 0}),Object.defineProperty(Ye(e),qo,{writable:!0,value:void 0}),Object.defineProperty(Ye(e),Gr,{writable:!0,value:void 0}),e.shadowTimer=void 0,Object.defineProperty(Ye(e),$o,{writable:!0,value:!0}),Object.defineProperty(Ye(e),dn,{writable:!0,value:void 0}),e.refresh=Kt.exports.debounce(function(){var l=e.container.get();if(l){var c,d,v=l.scrollTop,h=(c=oe(Ye(e),Gr)[Gr])===null||c===void 0?void 0:c.get(),g=tn(e.container.css("padding-left")),w=tn(e.container.css("padding-right")),x=tn(e.container.css("padding-top")),_=tn(e.container.css("padding-bottom")),E=h?oe(Ye(e),Gr)[Gr].width()+g+w:l.scrollWidth,M=h?oe(Ye(e),Gr)[Gr].height()+x+_:l.scrollHeight;if(e.oWidth=e.getWidth(),e.oHeight=e.container.height()-tn(e.container.css("border-top-width"))-tn(e.container.css("border-bottom-width")),e.sWidth=E,e.sHeight=M,e.xWidth=Math.floor(e.oWidth*e.oWidth/E),e.yHeight=Math.floor(e.oHeight*e.oHeight/M),e.x){var T,S,D,I;(T=e.slideX)===null||T===void 0||T.css("width",e.xWidth+"px");var P=Math.round(e.oWidth)-g-w===e.sWidth||h&&Math.round(oe(Ye(e),Gr)[Gr].width())<=Math.round(e.oWidth-g-w)?"none":"block";(S=e.slideX)===null||S===void 0||S.css("display",P),e.emit("display",P),(D=e.shadowLeft)===null||D===void 0||D.css("display",P),(I=e.shadowRight)===null||I===void 0||I.css("display",P)}if(e.y){var B,$;(B=e.slideY)===null||B===void 0||B.css("height",e.yHeight+"px");var q=Math.round(e.oHeight)-x-_===e.sHeight||h&&Math.round(oe(Ye(e),Gr)[Gr].height())<=Math.round(e.oHeight-x-_)?"none":"block";($=e.slideY)===null||$===void 0||$.css("display",q),e.emit("display",q)}if(e.x&&h&&l.scrollWidth-g-w>oe(Ye(e),Gr)[Gr].width()){var G=l.scrollWidth-g-w-oe(Ye(e),Gr)[Gr].width();if(oe(Ye(e),dn)[dn]){var H=oe(Ye(e),dn)[dn],z=H.onScrollX,O=H.getScrollLeft;if(G=O?O(-0)+l.scrollLeft-G:l.scrollLeft-G,G<0&&(G=0),z){var Q=z(G);Q>0?l.scrollLeft=Q:l.scrollLeft=0}e.scroll({left:G})}else l.scrollLeft-=G;return}if(e.y&&h&&l.scrollHeight-x-_!==oe(Ye(e),Gr)[Gr].height()){l.scrollTop-=l.scrollHeight-x-_-oe(Ye(e),Gr)[Gr].height();return}var ie=!((d=oe(Ye(e),dn)[dn])===null||d===void 0)&&d.getScrollLeft?oe(Ye(e),dn)[dn].getScrollLeft(l.scrollLeft):l.scrollLeft;if(oe(Ye(e),dn)[dn]){var L=oe(Ye(e),dn)[dn].onScrollX;if(L){var F=L(ie);F>0?l.scrollLeft=F:l.scrollLeft=0}e.scroll({left:ie})}else e.reRenderX(ie);e.reRenderY(v)}},0,{leading:!0}),e.scroll=function(l){var c=0,d=0;if(!oe(Ye(e),dn)[dn]&&l instanceof Event){var v=l.target,h=v.scrollTop,g=v.scrollLeft;c=h,d=g}else{if(l instanceof Event)return;if(l.top===void 0){var w;l.top=((w=e.container.get())===null||w===void 0?void 0:w.scrollTop)||0}if(l.left===void 0){var x;l.left=((x=e.container.get())===null||x===void 0?void 0:x.scrollLeft)||0}c=l.top,d=l.left}e.reRenderX(d),e.reRenderY(c)},e.wheelXScroll=Kt.exports.throttle(function(l){var c,d;l.preventDefault();var v=(Eo?l.wheelDeltaX:l.wheelDelta/120||-l.detail)>0?"up":"down",h=e.container.get();if(!!h){var g=e.container.width(),w=!((c=oe(Ye(e),dn)[dn])===null||c===void 0)&&c.getOffsetWidth?oe(Ye(e),dn)[dn].getOffsetWidth(g):g,x=Math.max(w/(Eo?20-Math.abs(l.wheelDelta):8),20),_=(!((d=oe(Ye(e),dn)[dn])===null||d===void 0)&&d.getScrollLeft?oe(Ye(e),dn)[dn].getScrollLeft(h.scrollLeft):h.scrollLeft)+(v==="up"?-x:x);if(_=v==="up"?Math.max(0,_):Math.min(_,e.sWidth-e.oWidth),oe(Ye(e),dn)[dn]){var E=oe(Ye(e),dn)[dn].onScrollX;if(E){var M=E(_);M>0?h.scrollLeft=M:h.scrollLeft=0}e.scroll({left:_})}else h.scrollLeft=_}},Eo?50:0,{trailing:!0}),e.wheelYScroll=Kt.exports.throttle(function(l){l.preventDefault();var c=(Eo?l.wheelDeltaX:l.wheelDelta/120||-l.detail)>0?"up":"down",d=e.container.get();if(!!d){var v=e.container.height(),h=Math.max(v/(Eo?20-Math.abs(l.wheelDelta):8),20),g=d.scrollTop+(c==="up"?-h:h);g=c==="up"?Math.max(0,g):Math.min(g,e.sHeight-e.oHeight),d.scrollTop=g}},Eo?100:0,{trailing:!0}),e.bindWheelScroll=function(l){if(!!oe(Ye(e),$o)[$o]){var c=e.x&&l.wheelDeltaX!==l.wheelDeltaY&&Math.abs(l.wheelDeltaX)>Math.abs(l.wheelDeltaY);c?e.slideX&&e.slideX.css("display")!=="none"&&e.wheelXScroll(l):e.y&&l.wheelDeltaY!==0&&e.slideY&&e.slideY.css("display")!=="none"&&e.wheelYScroll(l)}},e.bindContainerTouchX=function(l){!l.target||!oe(Ye(e),$o)[$o]||V(l.target).hasClass("data-scrollbar-trigger")||(oe(Ye(e),qo)[qo]=!0,e.scrollXStart(l))},e.bindContainerTouchY=function(l){!l.target||!oe(Ye(e),$o)[$o]||V(l.target).hasClass("data-scrollbar-trigger")||(oe(Ye(e),qo)[qo]=!0,e.scrollYStart(l))},e.getEventClientOffset=function(l){return l instanceof MouseEvent?{x:l.clientX,y:l.clientY}:{x:l.touches[0].clientX,y:l.touches[0].clientY}},e.scrollX=function(l){if(e.slideXDragging){var c,d=e.slideXDragging,v=d.point,h=d.position,g=e.getEventClientOffset(l),w=oe(Ye(e),qo)[qo]?h-(g.x-v):h+(g.x-v);w=Math.max(0,Math.min(w,e.oWidth-e.xWidth)),(c=e.slideX)===null||c===void 0||c.css("left",w+"px");var x=w/(e.oWidth-e.xWidth);x=Math.min(1,x);var _=e.container.get(),E=(e.sWidth-e.oWidth)*x;if(oe(Ye(e),dn)[dn]){var M=oe(Ye(e),dn)[dn].onScrollX;if(M){var T=M(E);T>0?_.scrollLeft=T:_.scrollLeft=0}e.scroll({left:E})}else _.scrollLeft=E}},e.scrollY=function(l){if(e.slideYDragging){var c,d=e.slideYDragging,v=d.point,h=d.position,g=e.getEventClientOffset(l),w=oe(Ye(e),qo)[qo]?h-(g.y-v):h+(g.y-v);w=Math.max(0,Math.min(w,e.oHeight-e.yHeight)),(c=e.slideY)===null||c===void 0||c.css("top",w+"px");var x=w/(e.oHeight-e.yHeight);x=Math.min(1,x),e.container.get().scrollTop=(e.sHeight-e.oHeight)*x}},e.scrollXEnd=function(){e.slideXDragging=void 0,oe(Ye(e),qo)[qo]=!1,document.body.removeEventListener(mt?"touchmove":"mousemove",e.scrollX),document.body.removeEventListener(mt?"touchend":"mouseup",e.scrollXEnd),e.container.removeClass("scrolling")},e.scrollYEnd=function(){e.slideYDragging=void 0,document.body.removeEventListener(mt?"touchmove":"mousemove",e.scrollY),document.body.removeEventListener(mt?"touchend":"mouseup",e.scrollYEnd),e.container.removeClass("scrolling")},e.scrollXStart=function(l){var c,d=e.getEventClientOffset(l);e.container.addClass("scrolling"),e.slideXDragging={point:d.x,position:parseInt(((c=e.slideX)===null||c===void 0?void 0:c.css("left"))||"0")},document.body.addEventListener(mt?"touchmove":"mousemove",e.scrollX),document.body.addEventListener(mt?"touchend":"mouseup",e.scrollXEnd)},e.scrollYStart=function(l){var c,d=e.getEventClientOffset(l);e.container.addClass("scrolling"),e.slideYDragging={point:d.y,position:parseInt(((c=e.slideY)===null||c===void 0?void 0:c.css("top"))||"0")},document.body.addEventListener(mt?"touchmove":"mousemove",e.scrollY),document.body.addEventListener(mt?"touchend":"mouseup",e.scrollYEnd)},e.bindXScrollEvent=function(){if(e.x){var l;(l=e.slideX)===null||l===void 0||l.on(mt?"touchstart":"mousedown",e.scrollXStart)}},e.bindYScrollEvent=function(){if(e.y){var l;(l=e.slideY)===null||l===void 0||l.on(mt?"touchstart":"mousedown",e.scrollYStart)}},e.reRenderShadow=function(l){if(e.shadow){var c,d=e.container.get();if(d){var v;(v=e.shadowLeft)===null||v===void 0||v.css("left",(oe(Ye(e),dn)[dn]?d.scrollLeft:l)+"px")}(c=e.shadowRight)===null||c===void 0||c.css("left",l+e.oWidth-4+"px")}},e.reRenderX=function(l){if(e.x){var c,d,v;(c=e.scrollBarX)===null||c===void 0||c.css("left",l+"px");var h=e.sWidth-e.oWidth,g=h<=0?0:l/h;g=Math.min(1,g),(d=e.slideX)===null||d===void 0||d.css("left",(e.oWidth-e.xWidth)*g+"px"),e.emit("change",{x:l,y:tn(((v=e.scrollBarY)===null||v===void 0?void 0:v.css("top"))||"0")}),e.oWidth=e.getWidth(),e.reRenderShadow(l)}},e.reRenderY=function(l){if(e.y){var c,d,v;(c=e.scrollBarY)===null||c===void 0||c.css("top",l+"px");var h=e.sHeight-e.oHeight,g=h<=0?0:l/h;g=Math.min(1,g),(d=e.slideY)===null||d===void 0||d.css("top",(e.oHeight-e.yHeight)*g+"px"),e.emit("change",{x:tn(((v=e.scrollBarX)===null||v===void 0?void 0:v.css("left"))||"0"),y:l})}},e.container=Ht(n)?V(n):n,e.x=r,e.y=i,e.shadow=a,oe(Ye(e),dn)[dn]=o,e.init(),e}return Be(t,[{key:"setContentNode",value:function(e){oe(this,Gr)[Gr]=e&&(Ht(e)?V(e):e)}},{key:"init",value:function(){var e=this.container.children(),r=!1;e.each(function(i){!r&&V(i).hasClass("data-scrollbar")&&(r=!0)}),r||(this.container.css("position","relative"),this.container.addClass("data-scrollable"),this.x&&(this.scrollBarX=V("<div ".concat(lt,'="').concat(Gn,'" class="data-scrollbar data-scrollbar-x"><div class="data-scrollbar-trigger"></div></div>')),this.slideX=this.scrollBarX.find(".data-scrollbar-trigger"),this.container.append(this.scrollBarX),this.container.addClass("scroll-x")),this.y&&(this.scrollBarY=V("<div ".concat(lt,'="').concat(Gn,'" class="data-scrollbar data-scrollbar-y"><div class="data-scrollbar-trigger"></div></div>')),this.slideY=this.scrollBarY.find(".data-scrollbar-trigger"),this.container.append(this.scrollBarY),this.container.addClass("scroll-y")),this.shadow&&(this.shadowLeft=V("<div ".concat(lt,'="').concat(Gn,'" class="scrollbar-shadow-left"></div>')),this.shadowRight=V("<div ".concat(lt,'="').concat(Gn,'" class="scrollbar-shadow-right"></div>')),this.container.append(this.shadowLeft),this.container.append(this.shadowRight)),this.refresh(),this.bindEvents())}},{key:"getWidth",value:function(){var e,r=this.container.get();if(!r)return 0;var i=this.container.width(),a=!((e=oe(this,dn)[dn])===null||e===void 0)&&e.getOffsetWidth?oe(this,dn)[dn].getOffsetWidth(i):i;return a}},{key:"enableScroll",value:function(){oe(this,$o)[$o]=!0}},{key:"disableScroll",value:function(){oe(this,$o)[$o]=!1}},{key:"bindEvents",value:function(){var e=this;mt?(this.x&&this.container.on("touchstart",this.bindContainerTouchX),this.y&&this.container.on("touchstart",this.bindContainerTouchY)):this.container.on(zg?"DOMMouseScroll":"mousewheel",this.bindWheelScroll),this.container.on("scroll",this.scroll);var r=this.container.get();if(!!r){var i={width:this.container.width(),height:this.container.height()};oe(this,pd)[pd]=new MutationObserver(function(){var a=e.container.width(),o=e.container.height();a===i.width&&o===i.height||(i={width:a,height:o},e.refresh())}),oe(this,pd)[pd].observe(r,{attributes:!0,attributeFilter:["style"],attributeOldValue:!0,childList:!0,subtree:!0}),window.addEventListener("resize",this.refresh),this.bindXScrollEvent(),this.bindYScrollEvent()}}},{key:"destroy",value:function(){var e,r,i;if((e=this.slideX)===null||e===void 0||e.off(mt?"touchstart":"mousedown",this.scrollXStart),(r=this.slideY)===null||r===void 0||r.off(mt?"touchstart":"mousedown",this.scrollYStart),mt?(this.x&&this.container.off("touchstart",this.bindContainerTouchX),this.y&&this.container.off("touchstart",this.bindContainerTouchY)):this.container.off(zg?"DOMMouseScroll":"mousewheel",this.bindWheelScroll),this.container.off("scroll",this.scroll),this.container.removeClass("data-scrollable"),this.x){var a;(a=this.scrollBarX)===null||a===void 0||a.remove(),this.container.removeClass("scroll-x")}if(this.y){var o;(o=this.scrollBarY)===null||o===void 0||o.remove(),this.container.removeClass("scroll-y")}if(this.shadow){var l,c;(l=this.shadowLeft)===null||l===void 0||l.remove(),(c=this.shadowRight)===null||c===void 0||c.remove()}(i=oe(this,pd)[pd])===null||i===void 0||i.disconnect(),window.removeEventListener("resize",this.refresh),window.removeEventListener("scroll",this.refresh)}}]),t}(rs.exports.EventEmitter2),oE=`.data-resizer {\r
    position: absolute;\r
    width: 100%;\r
    height: 100%;\r
    top: 0;\r
    left: 0;\r
    bottom: 0px;\r
    right: 0;\r
    z-index: 1;\r
    outline: 2px solid #1890FF;\r
    max-width: initial !important;\r
}\r
.data-resizer img {\r
    position: absolute;\r
    top: 0;\r
    left: 0;\r
    bottom: 0;\r
    right: 0;\r
    cursor: pointer;\r
    width: 100%;\r
    height: 100%;\r
    opacity: 0.3;\r
}\r
.data-resizer-holder {\r
    position: absolute;\r
    width: 14px;\r
    height: 14px;\r
    border: 2px solid #fff;\r
    border-radius: 50%;\r
    background: #1890FF;\r
    display: inline-block;\r
}\r
.data-resizer-holder-right-top {\r
    top: -6px;\r
    right: -6px;\r
    cursor: nesw-resize;\r
}\r
.data-resizer-holder-right-bottom {\r
    bottom: -6px;\r
    right: -6px;\r
    cursor: nwse-resize;\r
}\r
.data-resizer-holder-left-bottom {\r
    bottom: -6px;\r
    left: -6px;\r
    cursor: nesw-resize;\r
}\r
.data-resizer-holder-left-top {\r
    left: -6px;\r
    top: -6px;\r
    cursor: nwse-resize;\r
}\r
\r
.data-resizer-number {\r
    position: absolute;\r
    display: inline-block;\r
    line-height: 24px;\r
    padding: 0 4px;\r
    font-size: 12px;\r
    border-radius: 3px 3px;\r
    background: rgba(0, 0, 0, 0.86);\r
    color: rgba(255, 255, 255, 0.96);\r
    font-family: 'Lucida Console', Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;\r
    opacity: 0;\r
    visibility: hidden;\r
    transition: opacity 0.3s ease-in-out;\r
    transform: scale(0.8);\r
}\r
\r
.data-resizer-number-right-top {\r
    top: 0px;\r
    right: -6px;\r
    transform: translateX(100%) scale(0.8);\r
}\r
\r
.data-resizer-number-right-bottom {\r
    right: -6px;\r
    bottom: 0px;\r
    transform: translateX(100%) scale(0.8);\r
}\r
\r
.data-resizer-number-left-bottom {\r
    left: -6px;\r
    bottom: 0px;\r
    transform: translateX(-100%) scale(0.8);\r
}\r
\r
.data-resizer-number-left-top {\r
    left: -6px;\r
    top: 0px;\r
    transform: translateX(-100%) scale(0.8);\r
}\r
\r
.data-resizer-number-active {\r
    opacity: 1;\r
    visibility: visible;\r
}`;Mo(oE);var Om=function(){function b(u){var t=this,n;Fe(this,b),this.options=void 0,this.root=void 0,this.image=void 0,this.resizerNumber=void 0,this.point={x:0,y:0},this.position=void 0,this.size=void 0,this.maxWidth=void 0,this.resizing=!1,this.onMouseMove=function(a){a.preventDefault(),a.stopPropagation();var o=window.TouchEvent&&a instanceof TouchEvent?a.touches[0]:a,l=o.clientX,c=o.clientY;if(l!==t.point.x||c!==t.point.y){var d=t.point.x-l,v=t.point.y-c;t.updateSize(d,v)}t.resizing=!0},this.onMouseUp=function(a){var o;a.preventDefault(),a.stopPropagation();var l=t.root.get();if(!!l){var c=l.clientWidth,d=l.clientHeight;t.size={width:c,height:d},t.resizerNumber.removeClass("data-resizer-number-".concat(t.position)),t.resizerNumber.removeClass("data-resizer-number-active"),t.position=void 0,t.resizing=!1,t.root.removeClass("data-resizing"),document.removeEventListener(mt?"touchmove":"mousemove",t.onMouseMove),document.removeEventListener(mt?"touchend":"mouseup",t.onMouseUp);var v=t.options.onChange;v&&v(t.size),(o=t.image)===null||o===void 0||o.hide()}},this.options=u,this.root=V(this.renderTemplate(u.imgUrl)),u.imgUrl&&(this.image=this.root.find("img")),(n=this.image)===null||n===void 0||n.hide(),this.resizerNumber=this.root.find(".data-resizer-number");var e=this.options,r=e.width,i=e.height;this.size={width:r,height:i},this.maxWidth=this.options.maxWidth}return Be(b,[{key:"renderTemplate",value:function(t){return`
        <div class="data-resizer">
            `.concat(t?'<img src="'.concat(t,'">'):"",`
            <div class="data-resizer-holder data-resizer-holder-right-top"></div>
            <div class="data-resizer-holder data-resizer-holder-right-bottom"></div>
            <div class="data-resizer-holder data-resizer-holder-left-bottom"></div>
            <div class="data-resizer-holder data-resizer-holder-left-top"></div>
            <span class="data-resizer-number"></span>
        </div>`)}},{key:"onMouseDown",value:function(t,n){var e;this.resizing||(t.preventDefault(),t.stopPropagation(),this.root.css("top",["right-top","left-top"].indexOf(n)>-1?"auto":0),this.root.css("left",["left-top","left-bottom"].indexOf(n)>-1?"auto":0),this.root.css("bottom",["right-bottom","left-bottom"].indexOf(n)>-1?"auto":0),this.root.css("right",["right-top","right-bottom"].indexOf(n)>-1?"auto":0),this.point={x:window.TouchEvent&&t instanceof TouchEvent?t.touches[0].clientX:t.clientX,y:window.TouchEvent&&t instanceof TouchEvent?t.touches[0].clientY:t.clientY},this.position=n,this.resizing=!0,this.root.addClass("data-resizing"),this.resizerNumber.addClass("data-resizer-number-".concat(this.position)),this.resizerNumber.addClass("data-resizer-number-active"),(e=this.image)===null||e===void 0||e.show(),document.addEventListener(mt?"touchmove":"mousemove",this.onMouseMove),document.addEventListener(mt?"touchend":"mouseup",this.onMouseUp))}},{key:"updateSize",value:function(t,n){["right-top","right-bottom"].indexOf(this.position||"")>-1?t=this.size.width-t:t=this.size.width+t,this.setSize(t,n)}},{key:"setSize",value:function(t,n){t<24&&(t=24);var e=this.options.rate;t>this.maxWidth&&(t=this.maxWidth),n=t*e,n<24&&(n=24,t=n/e),t=Math.round(t),n=Math.round(n),this.root.css({width:t+"px",height:n+"px"}),this.resizerNumber.html("".concat(t,"\xB7").concat(n))}},{key:"on",value:function(t,n){var e;(e=this.image)===null||e===void 0||e.on(t,n)}},{key:"off",value:function(t,n){var e;(e=this.image)===null||e===void 0||e.off(t,n)}},{key:"render",value:function(){var t=this,n=this.options,e=n.width,r=n.height;return this.setSize(e,r),this.root.find(".data-resizer-holder-right-top").on(mt?"touchstart":"mousedown",function(i){return t.onMouseDown(i,"right-top")}),this.root.find(".data-resizer-holder-right-bottom").on(mt?"touchstart":"mousedown",function(i){return t.onMouseDown(i,"right-bottom")}),this.root.find(".data-resizer-holder-left-bottom").on(mt?"touchstart":"mousedown",function(i){return t.onMouseDown(i,"left-bottom")}),this.root.find(".data-resizer-holder-left-top").on(mt?"touchstart":"mousedown",function(i){return t.onMouseDown(i,"left-top")}),this.root}},{key:"destroy",value:function(){this.root.remove(),document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp)}}]),b}();var Aa={exports:{}};(function(b){(function(u){var t,n={},e={16:!1,18:!1,17:!1,91:!1},r="all",i={"\u21E7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,command:91},a={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},o=function(z){return a[z]||z.toUpperCase().charCodeAt(0)},l=[];for(t=1;t<20;t++)a["f"+t]=111+t;function c(z,O){for(var Q=z.length;Q--;)if(z[Q]===O)return Q;return-1}function d(z,O){if(z.length!=O.length)return!1;for(var Q=0;Q<z.length;Q++)if(z[Q]!==O[Q])return!1;return!0}var v={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function h(z){for(t in e)e[t]=z[v[t]]}function g(z){var O,Q,ie,L,F,X;if(O=z.keyCode,c(l,O)==-1&&l.push(O),(O==93||O==224)&&(O=91),O in e){e[O]=!0;for(ie in i)i[ie]==O&&(_[ie]=!0);return}if(h(z),!!_.filter.call(this,z)&&O in n){for(X=I(),L=0;L<n[O].length;L++)if(Q=n[O][L],Q.scope==X||Q.scope=="all"){F=Q.mods.length>0;for(ie in e)(!e[ie]&&c(Q.mods,+ie)>-1||e[ie]&&c(Q.mods,+ie)==-1)&&(F=!1);(Q.mods.length==0&&!e[16]&&!e[18]&&!e[17]&&!e[91]||F)&&Q.method(z,Q)===!1&&(z.preventDefault?z.preventDefault():z.returnValue=!1,z.stopPropagation&&z.stopPropagation(),z.cancelBubble&&(z.cancelBubble=!0))}}}function w(z){var O=z.keyCode,Q,ie=c(l,O);if(ie>=0&&l.splice(ie,1),(O==93||O==224)&&(O=91),O in e){e[O]=!1;for(Q in i)i[Q]==O&&(_[Q]=!1)}}function x(){for(t in e)e[t]=!1;for(t in i)_[t]=!1}function _(z,O,Q){var ie,L;ie=B(z),Q===void 0&&(Q=O,O="all");for(var F=0;F<ie.length;F++)L=[],z=ie[F].split("+"),z.length>1&&(L=$(z),z=[z[z.length-1]]),z=z[0],z=o(z),z in n||(n[z]=[]),n[z].push({shortcut:ie[F],scope:O,method:Q,key:ie[F],mods:L})}function E(z,O){var Q,ie,L=[],F,X,se;for(Q=B(z),X=0;X<Q.length;X++){if(ie=Q[X].split("+"),ie.length>1&&(L=$(ie),z=ie[ie.length-1]),z=o(z),O===void 0&&(O=I()),!n[z])return;for(F=0;F<n[z].length;F++)se=n[z][F],se.scope===O&&d(se.mods,L)&&(n[z][F]={})}}function M(z){return typeof z=="string"&&(z=o(z)),c(l,z)!=-1}function T(){return l.slice(0)}function S(z){var O=(z.target||z.srcElement).tagName;return!(O=="INPUT"||O=="SELECT"||O=="TEXTAREA")}for(t in i)_[t]=!1;function D(z){r=z||"all"}function I(){return r||"all"}function P(z){var O,Q,ie;for(O in n)for(Q=n[O],ie=0;ie<Q.length;)Q[ie].scope===z?Q.splice(ie,1):ie++}function B(z){var O;return z=z.replace(/\s/g,""),O=z.split(","),O[O.length-1]==""&&(O[O.length-2]+=","),O}function $(z){for(var O=z.slice(0,z.length-1),Q=0;Q<O.length;Q++)O[Q]=i[O[Q]];return O}function q(z,O,Q){z.addEventListener?z.addEventListener(O,Q,!1):z.attachEvent&&z.attachEvent("on"+O,function(){Q(window.event)})}q(document,"keydown",function(z){g(z)}),q(document,"keyup",w),q(window,"focus",x);var G=u.key;function H(){var z=u.key;return u.key=G,z}u.key=_,u.key.setScope=D,u.key.getScope=I,u.key.deleteScope=P,u.key.filter=S,u.key.isPressed=M,u.key.getPressedKeyCodes=T,u.key.noConflict=H,u.key.unbind=E,b.exports=_})(ca)})(Aa);var ku=Aa.exports,ei={engine:Object,name:{type:String,required:!0},icon:String,content:[String,Function],title:String,placement:String,hotkey:[String,Object],command:Object,autoExecute:{type:[Boolean,void 0],default:void 0},className:String,active:{type:[Boolean,void 0],default:void 0},disabled:{type:[Boolean,void 0],default:void 0},onClick:Function,onMouseDown:Function,onMouseEnter:Function,onMouseLevel:Function},sE={engine:Object,name:{type:String,required:!0},direction:String,items:{type:Array,required:!0},values:{type:[String,Array,Number],required:!0},className:String,onSelect:Function,hasDot:{type:[Boolean,void 0],default:void 0}},lE={engine:Object,name:{type:String,required:!0},values:[String,Array,Number],items:{type:Array,default:[]},icon:String,placement:String,content:[String,Function],title:String,disabled:{type:[Boolean,void 0],default:void 0},single:{type:[Boolean,void 0],default:void 0},className:String,direction:String,onSelect:Function,hasArrow:{type:[Boolean,void 0],default:void 0},hasDot:{type:[Boolean,void 0],default:void 0}},Tf={engine:{type:Object,required:!0},color:{type:String,required:!0},active:Boolean,setStroke:{type:[Boolean,void 0],default:void 0},onSelect:Function},yp={engine:Tf.engine,colors:{type:Array,required:!0},setStroke:Tf.setStroke,onSelect:Tf.onSelect},zm={engine:yp.engine,colors:Array,defaultColor:{type:String,required:!0},defaultActiveColor:{type:String,required:!0},setStroke:yp.setStroke,onSelect:Tf.onSelect,placement:String},uE=Ie({engine:ei.engine,name:ei.name,content:{type:[String,Function],required:!0},buttonTitle:String,dropdownTitle:String,command:ei.command,autoExecute:ei.autoExecute,disabled:ei.disabled},Kt.exports.omit(zm,"engine")),zf={name:ei.name,engine:ei.engine,icon:ei.icon,title:ei.title,search:String,description:ei.content,disabled:ei.disabled,prompt:[String,Function,Object],command:ei.command,autoExecute:ei.autoExecute,className:ei.className,placement:ei.placement,onClick:Function,onMouseDown:Function},wp={engine:ei.engine,title:String,items:{type:Array,required:!0},onSelect:zf.onClick},dE={engine:wp.engine,header:String,groups:{type:Array,required:!0},disabled:ei.disabled,className:zf.className,icon:zf.icon,content:ei.content,onSelect:wp.onSelect},cE={engine:{type:Object,required:!0},items:{type:Array,default:[]},popup:{type:[Boolean,void 0],default:void 0},icon:zf.icon,content:ei.content},fE={engine:{type:Object,required:!0},items:{type:Array,default:[]},className:String,popup:{type:[Boolean,void 0],default:void 0},onLoad:Function},Rm=function(u,t,n){var e=u==null?void 0:u.plugin.components[t];if(e&&e.hotkey){var r=e.hotkey();if(r){if(Array.isArray(r))if(n){var i=r.findIndex(function(a){return Jn(a)==="object"&&a.args===n});r=r[i>-1?i:0]}else r=r[0];return Jn(r)==="object"&&(r=r.key),r}}},np={},hE=function(u){if(typeof u!="string")return console.log("Font name is not legal !"),!1;if(np[u]!==void 0)return np[u];var t,n=document.body,e=document.createElement("span");e.innerHTML=Array(10).join("wi"),e.style.cssText=["position:absolute","width:auto","font-size:128px","left:-99999px"].join(" !important;");var r=function(d){return e.style.fontFamily=d,n.appendChild(e),t=e.clientWidth,n.removeChild(e),t},i=r("monospace"),a=r("serif"),o=r("sans-serif"),l=i!==r(u+",monospace")||o!==r(u+",sans-serif")||a!==r(u+",serif");return np[u]=l,l},Ic=or({name:"am-button",components:{ATooltip:Mp},props:ei,setup:function(u){var t,n=cn(),e=u.hotkey;u.engine&&(e===!0||e===void 0)&&(e=Rm(u.engine,u.command&&!Array.isArray(u.command)?u.command.name:u.name)),typeof e=="string"&&e!==""&&(e=_m(e));var r=cn(!1);return{iconIsHtml:/^<.*>/.test(((t=u.icon)===null||t===void 0?void 0:t.trim())||""),isMobile:mt,visible:r,hotkeyText:e,element:n}},data:function(){return{visible:!1}},methods:{triggerMouseDown:function(u){u.preventDefault(),!this.disabled&&(this.onMouseDown&&this.onMouseDown(u),this.visible=!1)},triggerMouseEnter:function(u){this.onMouseEnter&&this.onMouseEnter(u),this.visible=!0},triggerMouseLeave:function(u){this.onMouseLevel&&this.onMouseLevel(u),this.visible=!1},triggerClick:function(u){var t=u.target.nodeName;if(t!=="INPUT"&&t!=="TEXTAREA"&&u.preventDefault(),!this.disabled&&!(this.onClick&&this.onClick(u)===!1)&&this.autoExecute!==!1){var n,e,r=this.name,i=[];this.command&&(Array.isArray(this.command)?i=this.command:(r=this.command.name,i=this.command.args)),(n=this.engine)===null||n===void 0||(e=n.command).execute.apply(e,[r].concat(Hn(i)))}}}}),vE={key:0,class:"toolbar-tooltip-title"},pE=["innerHTML"],gE=["innerHTML"];function mE(b,u,t,n,e,r){var i=Tn("a-tooltip");return ct(),hr(i,{placement:b.placement||"bottom",visible:(!!b.title||!!b.hotkeyText)&&!b.isMobile?b.visible:!1},{title:Pn(function(){return[b.title?(ct(),zt("div",vE,pi(b.title),1)):yn("v-if",!0),b.hotkeyText?(ct(),zt("div",{key:1,class:"toolbar-tooltip-hotkey",innerHTML:b.hotkeyText},null,8,pE)):yn("v-if",!0)]}),default:Pn(function(){return[jt("button",{class:ti(["toolbar-button",b.className,{"toolbar-button-active":b.active,"toolbar-button-disabled":b.disabled}]),ref:"element",onClick:u[0]||(u[0]=function(){return b.triggerClick&&b.triggerClick.apply(b,arguments)}),onMousedown:u[1]||(u[1]=function(){return b.triggerMouseDown&&b.triggerMouseDown.apply(b,arguments)}),onMouseenter:u[2]||(u[2]=function(){return b.triggerMouseEnter&&b.triggerMouseEnter.apply(b,arguments)}),onMouseleave:u[3]||(u[3]=function(){return b.triggerMouseLeave&&b.triggerMouseLeave.apply(b,arguments)})},[Nd(b.$slots,"icon",{},function(){return[b.iconIsHtml?(ct(),zt("span",{key:0,innerHTML:b.icon},null,8,gE)):yn("v-if",!0),!b.iconIsHtml&&b.icon?(ct(),zt("span",{key:1,class:ti("data-icon data-icon-".concat(b.icon))},null,2)):yn("v-if",!0)]}),Nd(b.$slots,"default",{},function(){return[Nc(pi(typeof b.content=="function"?b.content():b.content),1)]})],34)]}),_:3},8,["placement","visible"])}function as(b,u){u===void 0&&(u={});var t=u.insertAt;if(!(!b||typeof document=="undefined")){var n=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",t==="top"&&n.firstChild?n.insertBefore(e,n.firstChild):n.appendChild(e),e.styleSheet?e.styleSheet.cssText=b:e.appendChild(document.createTextNode(b))}}var bE=`
.editor-toolbar .toolbar-button {\r
    display: inline-flex;\r
    align-items: center;\r
    justify-content: center;\r
    width: auto;\r
    min-width: 32px;\r
    margin: 0;\r
    text-align: center;\r
    padding: 0 7px;\r
    background-color: transparent;\r
    border: 1px solid transparent;\r
    border-radius: 3px 3px;\r
    font-size: 16px;\r
    cursor: pointer;\r
    color: #595959;\r
    outline: none;
}
.editor-toolbar.editor-toolbar-popup .toolbar-button {\r
    min-width: 24px;\r
    line-height: 24px;\r
    border-radius: 4px;
}
.editor-toolbar:not(.editor-toolbar-mobile) .toolbar-button {\r
    padding: 0 4px;
}
.editor-toolbar:not(.editor-toolbar-mobile) .toolbar-button:hover {\r
    border: 1px solid transparent;\r
    background-color: #f5f5f5;
}
.editor-toolbar:not(.editor-toolbar-mobile) .toolbar-button:active,.editor-toolbar .toolbar-button-active,.editor-toolbar:not(.editor-toolbar-mobile) .toolbar-button-active:hover {\r
    background-color: #e8e8e8;\r
    border: 1px solid transparent;
}
.editor-toolbar .toolbar-button-disabled,.editor-toolbar:not(.editor-toolbar-mobile) .toolbar-button-disabled:hover {\r
    background-color: transparent;\r
    border: 1px solid transparent;\r
    box-shadow: none;\r
    color: #000000;\r
    opacity: 0.25;\r
    cursor: not-allowed;
}\r
`;as(bE);Ic.render=mE;Ic.__file="src/components/button.vue";var Fp=function(u){var t=cn(!1);return Od(function(){if(u.value&&mt){var n=u.value.getBoundingClientRect();t.value=n.left>window.visualViewport.width/2}}),t},Bp=or({name:"am-dropdown-list",components:{ATooltip:Mp},props:sE,setup:function(u){var t=function(r){var i=r.command,a=r.key,o=r.hotkey;return u.engine&&(o===!0||o===void 0)&&(o=Rm(u.engine,i&&!Array.isArray(i)?i.name:u.name,a)),typeof o=="string"&&o!==""&&(o=_m(o)),o},n={};return u.items.forEach(function(e){n[e.key]=t(e)}),{isMobile:mt,hotkeys:n}},methods:{triggerSelect:function(u,t){u.preventDefault(),u.stopPropagation();var n=this.items.find(function(c){return c.key===t});if(!(!n||n.disabled)){var e=n.autoExecute,r=n.command;if(!(this.onSelect&&this.onSelect(u,t)===!1)&&e!==!1){var i,a,o=this.name,l=[t];r&&(Array.isArray(r)?l=l.concat(r):(o=r.name,l=l.concat(r.args))),(i=this.engine)===null||i===void 0||(a=i.command).execute.apply(a,[o].concat(Hn(l)))}}}}}),yE={key:0,class:"toolbar-tooltip-title"},wE=["innerHTML"],kE=["onClick"],xE={key:0,class:"data-icon data-icon-dot"},CE=["innerHTML"];function EE(b,u,t,n,e,r){var i=Tn("a-tooltip");return ct(),zt("div",{class:ti(["toolbar-dropdown-list","toolbar-dropdown-".concat(b.direction||"vertical"),{"toolbar-dropdown-dot":b.hasDot!==!1},b.className])},[(ct(!0),zt(da,null,So(b.items,function(a){var o=a.key,l=a.placement,c=a.title,d=a.direction,v=a.hasDot,h=a.content,g=a.className,w=a.icon,x=a.disabled;return ct(),hr(i,{key:o,placement:l||"right",overlayStyle:(!!c||!!b.hotkeys[o])&&!b.isMobile?{}:{display:"none"}},{title:Pn(function(){return[c?(ct(),zt("div",yE,pi(c),1)):yn("v-if",!0),b.hotkeys[o]?(ct(),zt("div",{key:1,class:"toolbar-tooltip-hotkey",innerHTML:b.hotkeys[o]},null,8,wE)):yn("v-if",!0)]}),default:Pn(function(){return[jt("a",{class:ti(["toolbar-dropdown-list-item",g,{"toolbar-dropdown-list-item-disabled":x}]),onClick:function(E){return b.triggerSelect(E,o)}},[(typeof b.values=="string"&&b.values===o||Array.isArray(b.values)&&b.values.indexOf(o)>-1)&&d!=="horizontal"&&v!==!1?(ct(),zt("span",xE)):yn("v-if",!0),Nd(b.$slots,"icon",{},function(){return[w?(ct(),zt("span",{key:0,class:ti(["data-icon","data-icon-".concat(w)])},null,2)):yn("v-if",!0)]}),jt("div",{innerHTML:typeof h=="function"?h():h},null,8,CE)],10,kE)]}),_:2},1032,["placement","overlayStyle"])}),128))],2)}Bp.render=EE;Bp.__file="src/components/dropdown-list.vue";var Pp=or({name:"am-dropdown",components:{AmButton:Ic,AmDropdownList:Bp},props:lE,setup:function(u,t){var n=cn(""),e=cn(void 0),r=cn(!1),i=cn(void 0),a=cn(null),o=Fp(a),l=function(x){u.single!==!1&&(x=Array.isArray(x)&&x.length>0?x[0]:x);var _=u.items.find(function(M){return typeof x=="string"&&M.key===x||Array.isArray(x)&&x.indexOf(M.key)>-1}),E=u.items.length>0?u.items.find(function(M){return M.isDefault===!0})||u.items[0]:null;_?t.slots.default?e.value=_:typeof u.content=="function"?e.value={icon:u.icon,content:u.content()}:Array.isArray(x)&&x.length>1?e.value={icon:u.icon,content:u.content}:e.value={icon:_.icon,content:typeof _.content=="function"?_.content():_.content}:u.icon||u.content?(!Array.isArray(x)||x.length<1)&&(e.value={icon:u.icon,content:typeof u.content=="function"?u.content():u.content}):E&&(e.value={icon:E.icon,content:typeof E.content=="function"?E.content():E.content}),n.value=x||(u.icon||u.content?"":(E==null?void 0:E.key)||"")},c=function(x){x.preventDefault()},d=function(x){x.preventDefault(),!u.disabled&&(r.value?h():v())},v=function(){r.value=!0},h=function(x){var _;x&&((_=i.value)===null||_===void 0?void 0:_.element)&&i.value.element.contains(x.target)||(r.value=!1)},g=function(x,_){h(),u.onSelect&&u.onSelect(x,_)};return l(u.values),Yh(function(){return Ie({},u)},function(w){return l(w.values)}),Yh(function(){return r.value},function(w,x){w?document.addEventListener("click",h):document.removeEventListener("click",h)}),{buttonRef:a,isRight:o,buttonContent:e,valuesVar:n,triggerMouseDown:c,triggerClick:d,show:v,hide:h,triggerSelect:g,visible:r,targetRef:i}}}),_E=["innerHTML"],SE={key:0,class:"data-icon data-icon-arrow"};function ME(b,u,t,n,e,r){var i=Tn("am-button"),a=Tn("am-dropdown-list");return ct(),zt("div",{class:ti(["toolbar-dropdown",{"toolbar-dropdown-right":b.isRight},b.className]),ref:"buttonRef",onClick:u[0]||(u[0]=function(){return b.triggerClick&&b.triggerClick.apply(b,arguments)}),onMousedown:u[1]||(u[1]=function(){return b.triggerMouseDown&&b.triggerMouseDown.apply(b,arguments)})},[jt("div",{class:ti(["toolbar-dropdown-trigger",{"toolbar-dropdown-trigger-active":b.visible,"toolbar-dropdown-trigger-arrow":b.hasArrow!==!1}])},[rr(i,{name:b.name,title:b.title,active:b.visible,disabled:b.disabled,placement:b.placement,ref:"targetRef"},{default:Pn(function(){return[Nd(b.$slots,"default",{item:b.content},function(){return[b.buttonContent&&b.buttonContent.icon?(ct(),zt("span",{key:0,class:ti(["data-icon","data-icon-".concat(b.buttonContent.icon)])},null,2)):yn("v-if",!0),b.buttonContent&&!b.buttonContent.icon&&b.buttonContent.content?(ct(),zt("span",{key:1,class:"toolbar-dropdown-button-text",innerHTML:b.buttonContent.content},null,8,_E)):yn("v-if",!0)]}),b.hasArrow!==!1?(ct(),zt("span",SE)):yn("v-if",!0)]}),_:3},8,["name","title","active","disabled","placement"])],2),b.visible?(ct(),hr(a,{key:0,hasDot:b.hasDot,engine:b.engine,direction:b.direction,name:b.name,items:b.items,values:b.valuesVar,"on-select":b.triggerSelect},null,8,["hasDot","engine","direction","name","items","values","on-select"])):yn("v-if",!0)],34)}var TE=`
.toolbar-dropdown {\r
    position: relative;
}
.toolbar-dropdown .toolbar-dropdown-trigger {\r
    display: flex;\r
    align-items: stretch;\r
    height: 100%;
}
.toolbar-dropdown .toolbar-dropdown-trigger .toolbar-dropdown-button-text {\r
    font-size: 12px;
}
.toolbar-dropdown .toolbar-dropdown-trigger-arrow .toolbar-button{\r
    padding-right: 20px;\r
    margin: 0;
}
.toolbar-dropdown .toolbar-dropdown-trigger-arrow .data-icon-arrow {\r
    position: absolute;\r
    right: 6px;\r
    top: calc(100% / 2 - 2px);\r
    width: 8px;\r
    height: 8px;\r
    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjhweCIgaGVpZ2h0PSI1cHgiIHZpZXdCb3g9IjAgMCA4IDUiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA1Mi41ICg2NzQ2OSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPkdyb3VwIENvcHkgNjwvdGl0bGU+DQogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+DQogICAgPGcgaWQ9IlN5bWJvbHMiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIG9wYWNpdHk9IjAuNDUiPg0KICAgICAgICA8ZyBpZD0idG9vbGJhciIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMyOC4wMDAwMDAsIC0xOC4wMDAwMDApIj4NCiAgICAgICAgICAgIDxnIGlkPSJwYXJhZ3JhcGgtc3R5bGUiPg0KICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIyNi4wMDAwMDAsIDQuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgICAgIDxnIGlkPSJHcm91cC1Db3B5LTYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMi4wMDAwMDAsIDEyLjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZSIgeD0iMCIgeT0iMCIgd2lkdGg9IjgiIGhlaWdodD0iOCI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTAuNTk2MDkzNzUsMi41NTcwMzEyNSBMMy43NDUzMTI1LDYuMzc4MTI1IEMzLjg3NzM0Mzc1LDYuNTI1NzgxMjUgNC4xMDg1OTM3NSw2LjUyNTc4MTI1IDQuMjQwNjI1LDYuMzc4MTI1IEw3LjQwNTQ2ODc1LDIuNTU3MDMxMjUgQzcuNTk2MDkzNzUsMi4zNDI5Njg3NSA3LjQ0NDUzMTI1LDIuMDAzOTA2MjUgNy4xNTc4MTI1LDIuMDAzOTA2MjUgTDAuODQ0NTMxMjUsMi4wMDM5MDYyNSBDMC41NTcwMzEyNSwyLjAwMzkwNjI1IDAuNDA0Njg3NSwyLjM0Mjk2ODc1IDAuNTk2MDkzNzUsMi41NTcwMzEyNSBaIiBpZD0iU2hhcGUiIGZpbGw9IiMwMDAwMDAiIGZpbGwtcnVsZT0ibm9uemVybyI+PC9wYXRoPg0KICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgPC9nPg0KICAgICAgICA8L2c+DQogICAgPC9nPg0KPC9zdmc+);\r
    background-repeat: no-repeat;\r
    transition: all 0.25s cubic-bezier(0.3, 1.2, 0.2, 1);
}
.toolbar-dropdown .toolbar-dropdown-list {\r
    position: absolute;\r
    top: 32px;\r
    font-size: 12px;\r
    background: #ffffff;\r
    border: 1px solid #e8e8e8;\r
    border-radius: 3px 3px;\r
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.12);\r
    padding: 5px 0;\r
    height: auto;\r
    transition: all 0.25s cubic-bezier(0.3, 1.2, 0.2, 1);\r
    z-index: 999;\r
    max-height: calc(80vh);\r
    overflow: auto;
}
.toolbar-dropdown.toolbar-dropdown-right:not(.toolbar-dropdown-right) .toolbar-dropdown-list{\r
    left: 0px;
}
.editor-toolbar-mobile .toolbar-dropdown .toolbar-dropdown-list,.editor-toolbar-popup .toolbar-dropdown .toolbar-dropdown-list{\r
    bottom: 32px;\r
    top: auto;\r
    max-height: calc(30vh);\r
    overflow: auto;
}
.editor-toolbar-mobile .toolbar-dropdown.toolbar-dropdown-right .toolbar-dropdown-list,.editor-toolbar-popup .toolbar-dropdown.toolbar-dropdown-right .toolbar-dropdown-list{\r
    right: 0px;
}
.toolbar-dropdown .toolbar-dropdown-list .toolbar-dropdown-list-item {\r
    padding: 2px 10px 2px 16px;\r
    line-height: 30px;\r
    color: #595959;\r
    text-align: left;\r
    position: relative;\r
    display: flex;\r
    white-space: nowrap;
}
.toolbar-dropdown .toolbar-dropdown-list .toolbar-dropdown-list-item-disabled {\r
    color: rgba(17, 31, 44, 0.24);\r
    cursor: not-allowed;
}
.toolbar-dropdown .toolbar-dropdown-list .toolbar-dropdown-list-item:not(.toolbar-dropdown-list-item-disabled):hover {\r
    color: #262626;\r
    background-color: #f5f5f5;
}
.toolbar-dropdown .toolbar-dropdown-list .toolbar-dropdown-list-item .data-icon {\r
    margin-right: 8px;
}
.toolbar-dropdown .toolbar-dropdown-list.toolbar-dropdown-horizontal .toolbar-dropdown-list-item {\r
    display: inline-block;
}
.toolbar-dropdown .toolbar-dropdown-list.toolbar-dropdown-dot .toolbar-dropdown-list-item {\r
    padding-left: 30px;\r
    padding-right: 16px;\r
    white-space: nowrap;
}
.toolbar-dropdown .toolbar-dropdown-list .toolbar-dropdown-list-item .data-icon-dot\r
{\r
    position: absolute;\r
    top: 50%;\r
    left: 8px;\r
    margin-top: -7px;\r
    width: 14px;\r
    height: 14px;\r
    display: block;\r
    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTRweCIgaGVpZ2h0PSIxNHB4IiB2aWV3Qm94PSIwIDAgMTQgMTQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUyLjQgKDY3Mzc4KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5VbnRpdGxlZDwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIG9wYWNpdHk9IjAuNDUiPgogICAgICAgIDxnIGlkPSJjaGVjayIgZmlsbD0iIzAwMDAwMCI+CiAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUiIG9wYWNpdHk9IjAiIHg9IjAiIHk9IjAiIHdpZHRoPSIxNCIgaGVpZ2h0PSIxNCI+PC9yZWN0PgogICAgICAgICAgICA8cGF0aCBkPSJNMTIuNDY4NzUsMi41OTc2NTYyNSBMMTEuNTEzMDg1OSwyLjU5NzY1NjI1IEMxMS4zNzkxMDE2LDIuNTk3NjU2MjUgMTEuMjUxOTUzMSwyLjY1OTE3OTY5IDExLjE2OTkyMTksMi43NjQ0NTMxMiBMNS41MzMwMDc4MSw5LjkwNTI3MzQ0IEwyLjgzMDA3ODEyLDYuNDgwNDY4NzUgQzIuNzQ2Njc5NjksNi4zNzUxOTUzMSAyLjYyMDg5ODQ0LDYuMzEzNjcxODcgMi40ODY5MTQwNiw2LjMxMzY3MTg3IEwxLjUzMTI1LDYuMzEzNjcxODcgQzEuNDM5NjQ4NDQsNi4zMTM2NzE4NyAxLjM4OTA2MjUsNi40MTg5NDUzMSAxLjQ0NTExNzE5LDYuNDkwMDM5MDYgTDUuMTg5ODQzNzUsMTEuMjM0MTc5NyBDNS4zNjQ4NDM3NSwxMS40NTU2NjQxIDUuNzAxMTcxODcsMTEuNDU1NjY0MSA1Ljg3NzUzOTA2LDExLjIzNDE3OTcgTDEyLjU1NDg4MjgsMi43NzI2NTYyNSBDMTIuNjEwOTM3NSwyLjcwMjkyOTY5IDEyLjU2MDM1MTYsMi41OTc2NTYyNSAxMi40Njg3NSwyLjU5NzY1NjI1IFoiIGlkPSJQYXRoIj48L3BhdGg+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=);\r
    background-repeat: no-repeat;
}\r
`;as(TE);Pp.render=ME;Pp.__file="src/components/dropdown.vue";var Na=function b(){Fe(this,b)};Na.colors=void 0;Na._map=void 0;Na.getStroke=void 0;Na.getColors=void 0;Na.colors=[["#000000","#262626","#595959","#8C8C8C","#BFBFBF","#D9D9D9","#E9E9E9","#F5F5F5","#FAFAFA","#FFFFFF"],["#F5222D","#FA541C","#FA8C16","#FADB14","#52C41A","#13C2C2","#1890FF","#2F54EB","#722ED1","#EB2F96"],["#FFE8E6","#FFECE0","#FFEFD1","#FCFCCA","#E4F7D2","#D3F5F0","#D4EEFC","#DEE8FC","#EFE1FA","#FAE1EB"],["#FFA39E","#FFBB96","#FFD591","#FFFB8F","#B7EB8F","#87E8DE","#91D5FF","#ADC6FF","#D3ADF7","#FFADD2"],["#FF4D4F","#FF7A45","#FFA940","#FFEC3D","#73D13D","#36CFC9","#40A9FF","#597EF7","#9254DE","#F759AB"],["#CF1322","#D4380D","#D46B08","#D4B106","#389E0D","#08979C","#096DD9","#1D39C4","#531DAB","#C41D7F"],["#820014","#871400","#873800","#614700","#135200","#00474F","#003A8C","#061178","#22075E","#780650"]];Na._map=function(){for(var b={},u=Na.colors,t=0,n=u.length;t<n;t++)for(var e=u[t],r=0,i=e.length;r<i;r++){var a=u[t][r];b[a]={y:t,x:r}}return b}();Na.getStroke=function(b){var u=Na._map[b];return u&&(u.y===2||u.y===3&&u.x>2&&u.x<5)?this.colors[4][u.x]:b};Na.getColors=function(){return this.colors};var ov=or({name:"am-color-plicker-item",props:Tf,setup:function(u){var t=function(i){i.preventDefault(),i.stopPropagation(),u.onSelect&&u.onSelect(u.color,i)},n=u.color==="transparent",e=u.engine.language.get("toolbar","colorPicker",u.color.toUpperCase());return{title:e,special:n,triggerSelect:t}},data:function(){var u=this.toState(this.color||"#FFFFFF"),t=["#ffffff","#fafafa","transparent"].indexOf(u.hex)>=0;return{state:u,needBorder:t,styles:this.getStyles(u)}},computed:{refreshStyles:function(){return this.getStyles()}},methods:{getContrastingColor:function(u){if(u.hex==="transparent")return"rgba(0,0,0,0.4)";var t=(u.rgb.r*299+u.rgb.g*587+u.rgb.b*114)/1e3;return t>=210?"#8C8C8C":"#FFFFFF"},toState:function(u,t){var n=u.hex?to(u.hex):to(u),e=n.toHsl(),r=n.toHsv(),i=n.toRgb(),a=n.toHex();e.s===0&&(e.h=t||0,r.h=t||0);var o=a==="000000"&&i.a===0;return{hsl:e,hex:o?"transparent":"#".concat(a),rgb:i,hsv:r,oldHue:u.h||t||e.h,source:u.source}},getStyles:function(u){return{check:{fill:this.getContrastingColor(u||this.state),display:this.active?"block":"none"},block:{backgroundColor:this.color,border:this.setStroke?"1px solid ".concat(Na.getStroke(this.color)):void 0}}}}}),AE=["title"],NE=jt("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"},null,-1),DE=[NE];function IE(b,u,t,n,e,r){return ct(),zt("span",{class:ti(["colorpicker-group-item",{"colorpicker-group-item-border":b.needBorder,"colorpicker-group-item-active":b.active,"colorpicker-group-item-special":b.special}]),onClick:u[0]||(u[0]=function(){return b.triggerSelect&&b.triggerSelect.apply(b,arguments)}),title:b.title},[jt("span",{style:sp(b.refreshStyles.block)},[(ct(),zt("svg",{style:sp(b.refreshStyles.check),viewBox:"0 0 18 18"},DE,4))],4)],10,AE)}ov.render=IE;ov.__file="src/components/color/picker/item.vue";var Hp=or({name:"am-color-plicker-group",components:{AmColorPickerItem:ov},props:yp}),LE={class:"colorpicker-group"};function OE(b,u,t,n,e,r){var i=Tn("am-color-picker-item");return ct(),zt("span",LE,[(ct(!0),zt(da,null,So(b.colors,function(a){return ct(),hr(i,{engine:b.engine,color:a.value,active:a.active,key:a.value,"on-select":b.onSelect,"set-stroke":b.setStroke},null,8,["engine","color","active","on-select","set-stroke"])}),128))])}Hp.render=OE;Hp.__file="src/components/color/picker/group.vue";var jp=or({name:"am-color-picker",components:{AmColorPickerItem:ov,AmColorPickerGroup:Hp},props:zm,setup:function(u,t){var n=function(o,l){return o.map(function(c){return c.map(function(d){var v=typeof d=="string"?d:d.value;return{value:v,active:l===v}})})},e=cn(n(u.colors||Na.getColors(),u.defaultActiveColor)),r=function(o,l){e.value=n(e.value,o),u.onSelect&&u.onSelect(o,l)},i=u.engine.language.get("toolbar","colorPicker",u.defaultColor==="transparent"?"nonFillText":"defaultText");return{colors:e,triggerSelect:r,text:i}},methods:{triggerMouseDown:function(u){u.target.tagName!=="INPUT"&&u.preventDefault()}}}),zE={class:"colorpicker-default-text"};function RE(b,u,t,n,e,r){var i=Tn("am-color-picker-item"),a=Tn("am-color-picker-group");return ct(),zt("div",{class:"colorpicker-board",onMousedown:u[1]||(u[1]=function(){return b.triggerMouseDown&&b.triggerMouseDown.apply(b,arguments)})},[jt("div",{class:"colorpicker-default",onClick:u[0]||(u[0]=function(o){return b.triggerSelect(b.defaultColor,o)})},[rr(i,{engine:b.engine,color:b.defaultColor,"active-colors":[],"on-select":b.triggerSelect},null,8,["engine","color","on-select"]),jt("span",zE,pi(b.text),1)]),(ct(!0),zt(da,null,So(b.colors,function(o,l){return ct(),hr(a,{engine:b.engine,colors:o,key:l,"on-select":b.triggerSelect,"set-stroke":b.setStroke},null,8,["engine","colors","on-select","set-stroke"])}),128))],32)}var FE=`
.colorpicker-default {\r
    display: flex;\r
    align-items: center;\r
    padding: 4px 8px;\r
    margin: 4px 0 8px;\r
    border-radius: 2px;\r
    cursor: pointer;
}
.colorpicker-default:hover {\r
    background-color: #f5f5f5;
}
.colorpicker-default-text {\r
    margin-left: 8px;
}
.colorpicker-group {\r
    display: flex;\r
    width: 100%;\r
    height: auto;\r
    position: relative;\r
    padding: 0 8px;
}
.colorpicker-group:nth-child(2){\r
    margin-bottom: 6px;
}
.colorpicker-group:last-child {\r
    margin-bottom: 0px;
}
.colorpicker-group-item {\r
    width: 24px;\r
    height: 24px;\r
    padding: 2px 2px;\r
    display: inline-block;\r
    border-radius: 3px 3px;\r
    border: 1px solid transparent;\r
    flex: 0 0 auto;\r
    cursor: pointer;\r
    background-color: #fff;
}
.colorpicker-group-item > span {\r
    position: relative;\r
    width: 18px;\r
    height: 18px;\r
    display: block;\r
    border-radius: 2px 2px;\r
    border: 1px solid transparent;
}
.colorpicker-group-item > span svg {\r
    position: absolute;\r
    top: -1px;\r
    left: 1px;\r
    width: 12px;\r
    height: 12px;
}
.colorpicker-group-item-border > span {\r
    border: 1px solid #e8e8e8;
}
.colorpicker-group-item-special {\r
    position: relative;
}
.colorpicker-group-item-special:after {\r
    content: "";\r
    display: block;\r
    position: absolute;\r
    top: 10px;\r
    left: 0px;\r
    width: 22px;\r
    height: 0;\r
    border-bottom: 2px solid #ff5151;\r
    transform: rotate(45deg);
}
.colorpicker-group-item:hover {\r
    border: 1px solid #d9d9d9;\r
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.12);
}\r
`;as(FE);jp.render=RE;jp.__file="src/components/color/picker/picker.vue";var Wp=or({name:"am-color",components:{AmButton:Ic,AmColorPicker:jp},props:uE,setup:function(u){var t=cn(!1),n=cn(null),e=Fp(n),r=cn(void 0),i=cn(u.defaultActiveColor),a=function(){return typeof u.content=="string"?u.content:u.content(i.value,Na.getStroke(i.value),u.disabled)},o=cn(a()),l=function(w){w.preventDefault(),t.value?d():c()},c=function(){t.value=!0},d=function(w){var x;w&&((x=r.value)===null||x===void 0?void 0:x.element)&&r.value.element.contains(w.target)||(t.value=!1)};Yh(function(){return t.value},function(g,w){g?document.addEventListener("click",d):document.removeEventListener("click",d)});var v=function(w){h(i.value,w)},h=function(w,x){if(d(),i.value=w,o.value=typeof u.content=="string"?u.content:u.content(w,Na.getStroke(w),u.disabled),u.autoExecute!==!1){var _,E,M=u.name,T=[w,u.defaultColor];u.command&&(Array.isArray(u.command)?T=u.command:(M=u.command.name,T=u.command.args)),(_=u.engine)===null||_===void 0||(E=_.command).execute.apply(E,[M].concat(Hn(T)))}u.onSelect&&u.onSelect(w,x)};return Jh(function(){return document.removeEventListener("click",d)}),Yh(function(){return Ie({},u)},function(){return o.value=a()}),{buttonRef:n,isRight:e,visible:t,buttonContent:o,currentColor:i,triggerSelect:h,triggerClick:v,toggleDropdown:l,targetRef:r}}}),BE=["innerHTML"],PE=jt("span",{class:"colorpicker-button-dropdown-empty"},null,-1),HE=jt("span",{class:"data-icon data-icon-arrow"},null,-1),jE={key:0,class:"toolbar-dropdown-list","data-element":"ui"};function WE(b,u,t,n,e,r){var i=Tn("am-button"),a=Tn("am-color-picker");return ct(),zt("div",{class:ti(["toolbar-dropdown","colorpicker-button",{"toolbar-dropdown-right":b.isRight}]),ref:"buttonRef"},[jt("div",{class:ti(["toolbar-dropdown-trigger colorpicker-button-group",{"colorpicker-button-group-active":b.visible}])},[rr(i,{class:"colorpicker-button-text",name:b.name,title:b.buttonTitle,"on-click":b.triggerClick,disabled:b.disabled,placement:b.placement},{default:Pn(function(){return[jt("span",{innerHTML:b.buttonContent},null,8,BE)]}),_:1},8,["name","title","on-click","disabled","placement"]),rr(i,{class:"colorpicker-button-dropdown toolbar-dropdown-trigger-arrow",name:b.name,title:b.dropdownTitle,"on-click":b.toggleDropdown,disabled:b.disabled,placement:b.placement,ref:"targetRef"},{icon:Pn(function(){return[PE]}),default:Pn(function(){return[HE]}),_:1},8,["name","title","on-click","disabled","placement"])],2),b.visible?(ct(),zt("div",jE,[rr(a,{engine:b.engine,colors:b.colors,"default-active-color":b.currentColor,"default-color":b.defaultColor,"on-select":b.triggerSelect,"set-stroke":b.setStroke},null,8,["engine","colors","default-active-color","default-color","on-select","set-stroke"])])):yn("v-if",!0)],2)}var UE=`
.editor-toolbar .colorpicker-button .colorpicker-button-group {\r
    padding: 0 2px;
}
.colorpicker-button-group .toolbar-button {\r
    padding: 0;
}
.colorpicker-button-group .colorpicker-button-text {\r
    margin-right: 0;\r
    min-width: 26px;\r
    border-radius: 3px 0 0 3px;\r
    display: block;
}
.editor-toolbar.editor-toolbar-popup .colorpicker-button-group .colorpicker-button-text {\r
    margin: 0;\r
    border-radius: 3px 0 0 3px;
}
.colorpicker-button-group .colorpicker-button-text:active {\r
    background-color: #e8e8e8;
}
.colorpicker-button-group .colorpicker-button-dropdown {\r
    margin-left: -1px;\r
    min-width: 17px;\r
    text-align: center;\r
    padding: 0 0;\r
    border-radius: 0 3px 3px 0;\r
    display: block;
}
.editor-toolbar.editor-toolbar-popup .colorpicker-button-group .colorpicker-button-dropdown {\r
    line-height: 24px;\r
    min-width: 17px;\r
    padding: 0 4px;\r
    margin: 0;\r
    margin-left: -1px;\r
    border-radius: 0 3px 3px 0;
}
.colorpicker-button-group .colorpicker-button-dropdown:hover,\r
.colorpicker-button-group .colorpicker-button-dropdown:active {\r
    background-color: #e8e8e8;
}
.colorpicker-button-group .colorpicker-button-dropdown .colorpicker-button-dropdown-empty {\r
    display: inline-block;
}
.colorpicker-button-group:hover .toolbar-button {\r
    border: 1px solid #e8e8e8;
}
.colorpicker-button-group-active .toolbar-button,\r
.colorpicker-button-group-active:hover .toolbar-button {\r
    border: 1px solid #e8e8e8;
}\r
`;as(UE);Wp.render=WE;Wp.__file="src/components/color/color.vue";var Up=or({name:"am-collapse-item",components:{APopover:fm},props:zf,setup:function(u){var t,n=cn(!1),e=function(l){l.preventDefault(),u.onMouseDown&&u.onMouseDown(l)},r=function(l){if(!u.disabled){var c=l.target.nodeName;if(c!=="INPUT"&&c!=="TEXTAREA"&&l.preventDefault(),!(u.onClick&&u.onClick(l,u.name)===!1)&&u.autoExecute!==!1){var d,v,h=u.name,g=[];u.command&&(Array.isArray(u.command)?g=u.command:(h=u.command.name,g=u.command.args)),(d=u.engine)===null||d===void 0||(v=d.command).execute.apply(v,[h].concat(Hn(g)))}}},i=function(){n.value=!u.disabled},a=function(){n.value=!1};return{iconIsHtml:/^<.*>/.test(((t=u.icon)===null||t===void 0?void 0:t.trim())||""),active:n,disabled:u.disabled,handleClick:r,handleMouseDown:e,triggerMouseEnter:i,triggerMouseLeave:a}}}),qE=["innerHTML"],$E={key:0,class:"toolbar-collapse-item-text"},GE={class:"toolbar-collapse-item-title"},ZE={key:0,class:"toolbar-collapse-item-description"};function YE(b,u,t,n,e,r){var i=Tn("a-popover");return ct(),hr(i,{placement:b.placement||"right",content:typeof b.prompt=="function"?b.prompt():b.prompt,overlayClassName:b.prompt?"":"prompt-popover-hide"},{default:Pn(function(){return[jt("div",{class:ti(["toolbar-collapse-item",{"toolbar-collapse-item-active":b.active},{"toolbar-collapse-item-disabled":b.disabled},b.className]),onMouseenter:u[0]||(u[0]=function(){return b.triggerMouseEnter&&b.triggerMouseEnter.apply(b,arguments)}),onMouseleave:u[1]||(u[1]=function(){return b.triggerMouseLeave&&b.triggerMouseLeave.apply(b,arguments)}),onClick:u[2]||(u[2]=function(){return b.handleClick&&b.handleClick.apply(b,arguments)}),onMousedown:u[3]||(u[3]=function(){return b.handleMouseDown&&b.handleMouseDown.apply(b,arguments)})},[Nd(b.$slots,"icon",{},function(){return[b.iconIsHtml?(ct(),zt("span",{key:0,innerHTML:b.icon},null,8,qE)):yn("v-if",!0),!b.iconIsHtml&&b.icon?(ct(),zt("span",{key:1,class:ti("data-icon data-icon-".concat(b.icon))},null,2)):yn("v-if",!0)]}),b.title?(ct(),zt("div",$E,[jt("div",GE,pi(b.title),1),b.description?(ct(),zt("div",ZE,pi(b.description),1)):yn("v-if",!0)])):yn("v-if",!0)],34)]}),_:3},8,["placement","content","overlayClassName"])}var KE=`
.prompt-popover-hide {\r
    display: none;
}\r
`;as(KE);Up.render=YE;Up.__file="src/components/collapse/item.vue";var qp=or({name:"am-collapse-group",components:{AmCollapseItem:Up},props:wp,setup:function(u){var t=function(e,r){var i,a=u.items.find(function(o){return o.name===r});return a!=null&&a.onClick&&(i=a.onClick(e,r)),u.onSelect&&u.onSelect(e,r),i};return{omit:Kt.exports.omit,onClick:t}}}),VE={class:"toolbar-collapse-group"},QE={key:0,class:"toolbar-collapse-group-title"};function XE(b,u,t,n,e,r){var i=Tn("am-collapse-item");return ct(),zt("div",VE,[b.title?(ct(),zt("div",QE,pi(b.title),1)):yn("v-if",!0),(ct(!0),zt(da,null,So(b.items,function(a){return ct(),hr(i,Jo({key:a.name,engine:b.engine},Ie({},b.omit(a,"onClick")),{"on-click":b.onClick}),null,16,["engine","on-click"])}),128))])}qp.render=XE;qp.__file="src/components/collapse/group.vue";var sv=or({name:"am-collapse",components:{AmButton:Ic,AmCollapseGroup:qp},props:dE,setup:function(u){var t=!(u.icon||u.content),n=cn(t),e=cn(null),r=Fp(e);Jh(function(){t&&document.removeEventListener("click",a)});var i=function(){n.value=!0,setTimeout(function(){document.addEventListener("click",a)},10)},a=function c(d){document.removeEventListener("click",c),n.value=!1},o=function(){n.value?a():i()},l=function(d,v){a(),u.onSelect&&u.onSelect(d,v)};return{isCustomize:t,visible:n,collapse:e,isRight:r,triggerClick:o,triggerSelect:l}}}),JE={key:1,class:"toolbar-dropdown-list","data-element":"ui"},e_=["innerHTML"],t_={class:"toolbar-collapse-content"};function n_(b,u,t,n,e,r){var i=Tn("am-button"),a=Tn("am-collapse-group");return ct(),zt("div",{class:ti(["toolbar-dropdown toolbar-collapse",{"toolbar-dropdown-right":b.isRight},b.className]),ref:"collapse"},[b.isCustomize?yn("v-if",!0):(ct(),hr(i,{key:0,name:"collapse",icon:b.icon,content:b.content,"on-click":b.triggerClick,active:b.visible,disabled:b.disabled},null,8,["icon","content","on-click","active","disabled"])),b.visible?(ct(),zt("div",JE,[Nd(b.$slots,"header",{},function(){return[b.header?(ct(),zt("div",{key:0,class:"toolbar-collapse-header",innerHTML:b.header},null,8,e_)):yn("v-if",!0)]}),jt("div",t_,[(ct(!0),zt(da,null,So(b.groups,function(o,l){return ct(),hr(a,Jo({key:l,engine:b.engine},o,{"on-select":b.triggerSelect}),null,16,["engine","on-select"])}),128))])])):yn("v-if",!0)],2)}var r_=`
.toolbar-collapse-header {\r
    color: #8c8c8c;\r
    margin: 4px 16px 0;\r
    font-size: 12px;\r
    line-height: 20px;\r
    text-align: left;\r
    padding-bottom: 8px;\r
    margin-bottom: 6px;\r
    border-bottom: 1px solid #e8e8e8;
}
.toolbar-collapse-header code{\r
    background-color: #f5f5f5;\r
    border-radius: 4px;\r
    padding: 2px;\r
    border: 1px solid #d9d9d9;
}
.toolbar-collapse-content {\r
    min-width: 200px
}
.toolbar-collapse-group-title {\r
    padding: 2px 16px;\r
    text-align: left;\r
    color: #8c8c8c;\r
    font-weight: 700;\r
    font-size: 12px;\r
    line-height: 24px;
}
.toolbar-collapse-item {\r
    display: flex;\r
    cursor: pointer;\r
    padding: 4px 16px 0;
}
.toolbar-collapse-item-active {\r
    background-color: #f4f4f4;
}
.editor-toolbar .toolbar-collapse-item-disabled, .data-toolbar-component-list .toolbar-collapse-item-disabled, .editor-toolbar:not(.editor-toolbar-mobile) .toolbar-collapse-item-disabled:hover,  .data-toolbar-component-list .toolbar-collapse-item-disabled:hover {\r
  background-color: transparent;\r
  border: 1px solid transparent;\r
  box-shadow: none;\r
  color: #000000;\r
  opacity: 0.25;\r
  cursor: not-allowed;
}
.toolbar-collapse-item .toolbar-collapse-item-text\r
{\r
    display: block;\r
    text-align: left;\r
    margin-left: 8px;
}
.toolbar-collapse-item .toolbar-collapse-item-title{\r
    display: block;\r
    color: #595959;\r
    line-height: 24px;\r
    font-size: 14px;\r
    font-weight: normal;
}
.toolbar-collapse-item .toolbar-collapse-item-description\r
{\r
    display: block;\r
    font-size: 12px;\r
    color: rgba(0,0,0,.45);
}\r
`;as(r_);sv.render=n_;sv.__file="src/components/collapse/collapse.vue";var $p=or({name:"am-group",components:{AmButton:Ic,AmDropdown:Pp,AmColor:Wp,AmCollapse:sv,AmPopover:fm},props:cE,setup:function(){return{isMobile:mt}},methods:{getPopupContainer:function(){return document.querySelector(".data-toolbar-popup-wrapper")||document.querySelector(".editor-toolbar")||document.body}}}),i_={key:0,class:"editor-toolbar-group"},a_={key:1,class:"editor-toolbar-group"};function o_(b,u,t,n,e,r){var i=Tn("am-button"),a=Tn("am-dropdown"),o=Tn("am-color"),l=Tn("am-collapse"),c=Tn("am-popover");return ct(),zt(da,null,[!!b.icon||!!b.content?(ct(),zt("div",i_,[rr(c,{"get-popup-container":b.getPopupContainer,"overlay-class-name":"editor-toolbar-popover","arrow-point-at-center":!0,placement:b.isMobile?"topRight":void 0},{content:Pn(function(){return[jt("div",{class:ti(["editor-toolbar",{"editor-toolbar-mobile":b.isMobile&&!b.popup,"editor-toolbar-popup":b.popup}]),"data-element":"ui"},[(ct(!0),zt(da,null,So(b.items,function(d,v){return ct(),zt(da,{key:v},[d.type==="button"?(ct(),hr(i,Jo(Yt({key:0},"key",v),d,{placement:"top",engine:b.engine}),null,16,["engine"])):yn("v-if",!0),d.type==="dropdown"?(ct(),hr(a,Jo(Yt({key:1},"key",v),d,{placement:"top",engine:b.engine}),null,16,["engine"])):yn("v-if",!0),d.type==="color"?(ct(),hr(o,Jo(Yt({key:2},"key",v),d,{placement:"top",engine:b.engine}),null,16,["engine"])):yn("v-if",!0),d.type==="collapse"?(ct(),hr(l,Jo(Yt({key:3},"key",v),d,{engine:b.engine}),null,16,["engine"])):yn("v-if",!0)],64)}),128))],2)]}),default:Pn(function(){return[rr(i,{name:"group-popover",icon:b.icon,content:b.content},null,8,["icon","content"])]}),_:1},8,["get-popup-container","placement"])])):yn("v-if",!0),!b.icon&&!b.content?(ct(),zt("div",a_,[(ct(!0),zt(da,null,So(b.items,function(d,v){return ct(),zt(da,{key:v},[d.type==="button"?(ct(),hr(i,Jo(Yt({key:0},"key",v),d,{engine:b.engine}),null,16,["engine"])):yn("v-if",!0),d.type==="dropdown"?(ct(),hr(a,Jo(Yt({key:1},"key",v),d,{engine:b.engine}),null,16,["engine"])):yn("v-if",!0),d.type==="color"?(ct(),hr(o,Jo(Yt({key:2},"key",v),d,{engine:b.engine}),null,16,["engine"])):yn("v-if",!0),d.type==="collapse"?(ct(),hr(l,Jo(Yt({key:3},"key",v),d,{engine:b.engine}),null,16,["engine"])):yn("v-if",!0)],64)}),128))])):yn("v-if",!0)],64)}var s_=`
.editor-toolbar-group {\r
    padding: 4px;\r
    width: auto;\r
    border-left: 1px solid #e8e8e8;\r
    display: flex;\r
    align-items: stretch;
}
.editor-toolbar .editor-toolbar-group:nth-child(1) {\r
    border-left: none;
}\r
`;as(s_);$p.render=o_;$p.__file="src/components/group.vue";var l_={toolbar:{collapse:{title:"Type <code>".concat(Eo?"\u2318":"Ctrl","</code> + <code>/</code> to quickly insert a card")},undo:{title:"Undo"},redo:{title:"Redo"},paintformat:{title:"Format brush"},removeformat:{title:"Clear format"},heading:{title:"Text and title",p:"Text",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4",h5:"Heading 5",h6:"Heading 6"},fontfamily:{title:"Font family",notInstalled:"The font may not be installed",items:{default:"Default",arial:"Arial",comicSansMS:"Comic Sans MS",courierNew:"Courier New",georgia:"Georgia",helvetica:"Helvetica",impact:"Impact",timesNewRoman:"Times New Roman",trebuchetMS:"Trebuchet MS",verdana:"Verdana",fangSong:"FangSong",stFangsong:"STFangsong",stSong:"STSong",stKaiti:"STKaiti",simSun:"SimSum",microsoftYaHei:"Microsoft YaHei",kaiTi:"KaiTi",kaitiSC:"KaiTi SC",simHei:"SimHei",heitiSC:"Heiti SC",fzHei:"FZHeiTi",fzKai:"FZKaiTi",fzFangSong:"FZFangSong"}},fontsize:{title:"Font size"},fontcolor:{title:"Font color",more:"More colors"},backcolor:{title:"Background color",more:"More colors"},bold:{title:"Bold"},italic:{title:"Italic"},strikethrough:{title:"Strikethrough"},underline:{title:"Underline"},moremark:{title:"More text styles",sup:"Sup",sub:"Sub",code:"Inline code"},alignment:{title:"Alignment",left:"Align left",center:"Align center",right:"Align right",justify:"Align justify"},unorderedlist:{title:"Unordered list"},orderedlist:{title:"Ordered list"},tasklist:{title:"Task list"},indent:{title:"Ident",in:"Increase indent",out:"Reduce indent"},"line-height":{title:"Line height",default:"Default"},link:{title:"Insert Link"},quote:{title:"Insert reference"},hr:{title:"Insert dividing line"},colorPicker:{defaultText:"Default Color",nonFillText:"No fill color","#000000":"Black","#262626":"Dark Gray 3","#595959":"Dark Gray 2","#8C8C8C":"Dark Gray 1","#BFBFBF":"Gray","#D9D9D9":"Light Gray 4","#E9E9E9":"Light Gray 3","#F5F5F5":"Light Gray 2","#FAFAFA":"Light Gray 1","#FFFFFF":"White","#F5222D":"Red","#FA541C":"Chinese Red","#FA8C16":"Orange","#FADB14":"Yellow","#52C41A":"Green","#13C2C2":"Cyan","#1890FF":"Light Blue","#2F54EB":"Blue","#722ED1":"Purple","#EB2F96":"Magenta","#FFE8E6":"Red 1","#FFECE0":"Chinese Red 1","#FFEFD1":"Orange 1","#FCFCCA":"Yellow 1","#E4F7D2":"Green 1","#D3F5F0":"Cyan 1","#D4EEFC":"Light Blue 1","#DEE8FC":"Blue 1","#EFE1FA":"Purple 1","#FAE1EB":"Magenta 1","#FFA39E":"Red 2","#FFBB96":"Chinese Red 2","#FFD591":"Orange 2","#FFFB8F":"Yellow 2","#B7EB8F":"Green 2","#87E8DE":"Cyan 2","#91D5FF":"Light Blue 2","#ADC6FF":"Blue 2","#D3ADF7":"Purple 2","#FFADD2":"Magenta 2","#FF4D4F":"Red 3","#FF7A45":"Chinese Red 3","#FFA940":"Orange 3","#FFEC3D":"Yellow 3","#73D13D":"Green 3","#36CFC9":"Cyan 3","#40A9FF":"Light Blue 3","#597EF7":"Blue 3","#9254DE":"Purple 3","#F759AB":"Magenta 3","#CF1322":"Red 4","#D4380D":"Chinese Red 4","#D46B08":"Orange 4","#D4B106":"Yellow 4","#389E0D":"Green 4","#08979C":"Cyan 4","#096DD9":"Light Blue 4","#1D39C4":"Blue 4","#531DAB":"Purple 4","#C41D7F":"Magenta 4","#820014":"Red 5","#871400":"Chinese Red 5","#873800":"Orange 5","#614700":"Yellow 5","#135200":"Green 5","#00474F":"Cyan 5","#003A8C":"Light Blue 5","#061178":"Blue 5","#22075E":"Purple 5","#780650":"Magenta 5"},component:{placeholder:"Card name"},image:{title:"Image"},codeblock:{title:"Codeblock"},table:{title:"Table"},file:{title:"File"},video:{title:"Video"},math:{title:"Formula"},status:{title:"Status"},mind:{title:"Mind Map"},commonlyUsed:{title:"Commonly used"},searchEmtpy:{title:"No matching card"}}},u_={toolbar:{collapse:{title:"\u8F93\u5165  <code>".concat(Eo?"\u2318":"Ctrl","</code> + <code>/</code>  \u5FEB\u901F\u63D2\u5165\u5361\u7247")},undo:{title:"\u64A4\u9500"},redo:{title:"\u91CD\u505A"},paintformat:{title:"\u683C\u5F0F\u5237"},removeformat:{title:"\u6E05\u9664\u683C\u5F0F"},heading:{title:"\u6B63\u6587\u4E0E\u6807\u9898",p:"\u6B63\u6587",h1:"\u6807\u9898 1",h2:"\u6807\u9898 2",h3:"\u6807\u9898 3",h4:"\u6807\u9898 4",h5:"\u6807\u9898 5",h6:"\u6807\u9898 6"},fontfamily:{title:"\u5B57\u4F53",notInstalled:"\u53EF\u80FD\u672A\u5B89\u88C5\u8BE5\u5B57\u4F53",items:{default:"\u9ED8\u8BA4",arial:"Arial",comicSansMS:"Comic Sans MS",courierNew:"Courier New",georgia:"Georgia",helvetica:"Helvetica",impact:"Impact",timesNewRoman:"Times New Roman",trebuchetMS:"Trebuchet MS",verdana:"Verdana",fangSong:"\u4EFF\u5B8B",stFangsong:"\u534E\u6587\u4EFF\u5B8B",stSong:"\u534E\u6587\u5B8B\u4F53",stKaiti:"\u534E\u6587\u6977\u4F53",simSun:"\u5B8B\u4F53",microsoftYaHei:"\u5FAE\u8F6F\u96C5\u9ED1",kaiTi:"\u6977\u4F53",kaitiSC:"\u6977\u4F53-\u7B80",simHei:"\u9ED1\u4F53",heitiSC:"\u9ED1\u4F53-\u7B80",fzHei:"\u65B9\u6B63\u9ED1\u4F53",fzKai:"\u65B9\u6B63\u6977\u4F53",fzFangSong:"\u65B9\u6B63\u4EFF\u5B8B"}},fontsize:{title:"\u5B57\u53F7"},fontcolor:{title:"\u5B57\u4F53\u989C\u8272",more:"\u66F4\u591A\u989C\u8272"},backcolor:{title:"\u80CC\u666F\u989C\u8272",more:"\u66F4\u591A\u989C\u8272"},bold:{title:"\u7C97\u4F53"},italic:{title:"\u659C\u4F53"},strikethrough:{title:"\u5220\u9664\u7EBF"},underline:{title:"\u4E0B\u5212\u7EBF"},moremark:{title:"\u66F4\u591A\u6587\u672C\u6837\u5F0F",sup:"\u4E0A\u6807",sub:"\u4E0B\u6807",code:"\u884C\u5185\u4EE3\u7801"},alignment:{title:"\u5BF9\u9F50\u65B9\u5F0F",left:"\u5DE6\u5BF9\u9F50",center:"\u5C45\u4E2D\u5BF9\u9F50",right:"\u53F3\u5BF9\u9F50",justify:"\u4E24\u7AEF\u5BF9\u9F50"},unorderedlist:{title:"\u65E0\u5E8F\u5217\u8868"},orderedlist:{title:"\u6709\u5E8F\u5217\u8868"},tasklist:{title:"\u4EFB\u52A1\u5217\u8868"},indent:{title:"\u7F29\u8FDB",in:"\u589E\u52A0\u7F29\u8FDB",out:"\u51CF\u5C11\u7F29\u8FDB"},"line-height":{title:"\u884C\u9AD8",default:"\u9ED8\u8BA4"},link:{title:"\u94FE\u63A5"},quote:{title:"\u63D2\u5165\u5F15\u7528"},hr:{title:"\u63D2\u5165\u5206\u5272\u7EBF"},colorPicker:{defaultText:"\u9ED8\u8BA4",nonFillText:"\u65E0\u586B\u5145\u8272","#000000":"\u9ED1\u8272","#262626":"\u6DF1\u7070 3","#595959":"\u6DF1\u7070 2","#8C8C8C":"\u6DF1\u7070 1","#BFBFBF":"\u7070\u8272","#D9D9D9":"\u6D45\u7070 4","#E9E9E9":"\u6D45\u7070 3","#F5F5F5":"\u6D45\u7070 2","#FAFAFA":"\u6D45\u7070 1","#FFFFFF":"\u767D\u8272","#F5222D":"\u7EA2\u8272","#FA541C":"\u6731\u7EA2","#FA8C16":"\u6A59\u8272","#FADB14":"\u9EC4\u8272","#52C41A":"\u7EFF\u8272","#13C2C2":"\u9752\u8272","#1890FF":"\u6D45\u84DD","#2F54EB":"\u84DD\u8272","#722ED1":"\u7D2B\u8272","#EB2F96":"\u73AB\u7EA2","#FFE8E6":"\u7EA2\u8272 1","#FFECE0":"\u6731\u7EA2 1","#FFEFD1":"\u6A59\u8272 1","#FCFCCA":"\u9EC4\u8272 1","#E4F7D2":"\u7EFF\u8272 1","#D3F5F0":"\u9752\u8272 1","#D4EEFC":"\u6D45\u84DD 1","#DEE8FC":"\u84DD\u8272 1","#EFE1FA":"\u7D2B\u8272 1","#FAE1EB":"\u73AB\u7EA2 1","#FFA39E":"\u7EA2\u8272 2","#FFBB96":"\u6731\u7EA2 2","#FFD591":"\u6A59\u8272 2","#FFFB8F":"\u9EC4\u8272 2","#B7EB8F":"\u7EFF\u8272 2","#87E8DE":"\u9752\u8272 2","#91D5FF":"\u6D45\u84DD 2","#ADC6FF":"\u84DD\u8272 2","#D3ADF7":"\u7D2B\u8272 2","#FFADD2":"\u73AB\u7EA2 2","#FF4D4F":"\u7EA2\u8272 3","#FF7A45":"\u6731\u7EA2 3","#FFA940":"\u6A59\u8272 3","#FFEC3D":"\u9EC4\u8272 3","#73D13D":"\u7EFF\u8272 3","#36CFC9":"\u9752\u8272 3","#40A9FF":"\u6D45\u84DD 3","#597EF7":"\u84DD\u8272 3","#9254DE":"\u7D2B\u8272 3","#F759AB":"\u73AB\u7EA2 3","#CF1322":"\u7EA2\u8272 4","#D4380D":"\u6731\u7EA2 4","#D46B08":"\u6A59\u8272 4","#D4B106":"\u9EC4\u8272 4","#389E0D":"\u7EFF\u8272 4","#08979C":"\u9752\u8272 4","#096DD9":"\u6D45\u84DD 4","#1D39C4":"\u84DD\u8272 4","#531DAB":"\u7D2B\u8272 4","#C41D7F":"\u73AB\u7EA2 4","#820014":"\u7EA2\u8272 5","#871400":"\u6731\u7EA2 5","#873800":"\u6A59\u8272 5","#614700":"\u9EC4\u8272 5","#135200":"\u7EFF\u8272 5","#00474F":"\u9752\u8272 5","#003A8C":"\u6D45\u84DD 5","#061178":"\u84DD\u8272 5","#22075E":"\u7D2B\u8272 5","#780650":"\u73AB\u7EA2 5"},component:{placeholder:"\u5361\u7247\u540D\u79F0"},image:{title:"\u56FE\u7247"},codeblock:{title:"\u4EE3\u7801\u5757"},table:{title:"\u8868\u683C"},file:{title:"\u9644\u4EF6"},video:{title:"\u89C6\u9891"},math:{title:"\u516C\u5F0F"},status:{title:"\u72B6\u6001"},mind:{title:"\u8111\u56FE"},commonlyUsed:{title:"\u5E38\u7528"},searchEmtpy:{title:"\u65E0\u5339\u914D\u5361\u7247"}}},Fm={"en-US":l_,"zh-CN":u_},Gp=or({name:"am-table",props:{maxRows:Number,maxCols:Number,minRows:Number,minCols:Number,onSelect:Function},setup:function(u){var t=cn(u.maxRows||10),n=cn(u.maxCols||10),e=cn(u.minRows||4),r=cn(u.minCols||4),i=cn(4),a=cn(4),o=cn(0),l=cn(0);return{maxRows:t,maxCols:n,minRows:e,minCols:r,currentRows:i,currentCols:a,selectedRows:o,selectedCols:l}},methods:{triggerMouseDown:function(u){u.preventDefault()},triggerSelect:function(u,t,n){this.onSelect&&this.onSelect(u,t+1,n+1)},triggerHover:function(u,t){var n=Math.max(this.minRows,Math.min(this.maxRows,u+2)),e=Math.max(this.minCols,Math.min(this.maxCols,t+2));this.currentRows=n,this.currentCols=e,this.selectedRows=u+1,this.selectedCols=t+1}}}),d_={"data-element":"ui",class:"data-toolbar-table-selector"},c_=["onClick","onMouseover"],f_={class:"data-toolbar-table-selector-info"};function h_(b,u,t,n,e,r){return ct(),zt("div",d_,[(ct(!0),zt(da,null,So(b.currentRows,function(i){return ct(),zt("div",{class:"data-toolbar-table-selector-tr",key:i},[(ct(!0),zt(da,null,So(b.currentCols,function(a){return ct(),zt("div",{class:ti([{"data-toolbar-table-selector-td":!0},{actived:i-1<b.selectedRows&&a-1<b.selectedCols}]),key:{col:a},onClick:function(l){return b.triggerSelect(l,i-1,a-1)},onMousedown:u[0]||(u[0]=function(o){return b.triggerMouseDown(o)}),onMouseover:function(l){return b.triggerHover(i-1,a-1)}},null,42,c_)}),128))])}),128)),jt("div",f_,pi(b.selectedRows===void 0?0:b.selectedRows)+"x"+pi(b.selectedCols===void 0?0:b.selectedCols),1)])}var v_=`
.data-toolbar-table-selector .data-toolbar-table-selector-tr {\r
    display: flex;\r
    flex-wrap: nowrap;
}
.data-toolbar-table-selector .data-toolbar-table-selector-tr .data-toolbar-table-selector-td {\r
    width: 20px;\r
    height: 16px;\r
    border: 1px solid #d9d9d9;\r
    margin-right: -1px;\r
    margin-bottom: -1px;\r
    cursor: pointer;
}
.data-toolbar-table-selector .data-toolbar-table-selector-tr .data-toolbar-table-selector-td.actived {\r
    background: #ddefff;
}
.data-toolbar-table-selector .data-toolbar-table-selector-info {\r
    text-align: center;
}\r
`;as(v_);Gp.render=h_;Gp.__file="src/components/table.vue";var Bm=[{key:"default",value:""},{key:"arial",value:"Arial"},{key:"comicSansMS",value:'"Comic Sans MS"'},{key:"courierNew",value:'"Courier New"'},{key:"georgia",value:"Georgia"},{key:"helvetica",value:"Helvetica"},{key:"impact",value:"Impact"},{key:"timesNewRoman",value:'"Times New Roman"'},{key:"trebuchetMS",value:'"Trebuchet MS"'},{key:"verdana",value:"Verdana"},{key:"fangSong",value:"FangSong, \u4EFF\u5B8B, FZFangSong-Z02S, STFangsong, fangsong"},{key:"stFangsong",value:"STFangsong, \u534E\u6587\u4EFF\u5B8B, FangSong, FZFangSong-Z02S, fangsong"},{key:"stSong",value:'STSong, \u534E\u6587\u5B8B\u4F53, SimSun, "Songti SC", NSimSun, serif'},{key:"stKaiti",value:'STKaiti, \u534E\u6587\u6977\u4F53, KaiTi, "Kaiti SC", cursive'},{key:"simSun",value:'SimSun, \u5B8B\u4F53, "Songti SC", NSimSun, STSong, serif'},{key:"microsoftYaHei",value:'"Microsoft YaHei", \u5FAE\u8F6F\u96C5\u9ED1, "PingFang SC", SimHei, STHeiti, sans-serif'},{key:"kaiTi",value:'KaiTi, \u6977\u4F53, STKaiti, "Kaiti SC", cursive'},{key:"kaitiSC",value:'"Kaiti SC"'},{key:"simHei",value:'SimHei, \u9ED1\u4F53, "Microsoft YaHei", "PingFang SC", STHeiti, sans-serif'},{key:"heitiSC",value:'"Heiti SC"'},{key:"fzHei",value:"FZHei-B01S"},{key:"fzKai",value:"FZKai-Z03S"},{key:"fzFangSong",value:"FZFangSong-Z02S"}],p_=function(b,u){return b.map(function(t){var n=t.key,e=t.value,r=n!=="default"?!e.split(",").some(function(i){return hE(i.trim())}):!1;return{key:e,faimlyName:u?u[n]:n,content:'<span style="font-family: '.concat(e,'">').concat(u?u[n]:n,"</span>"),hotkey:!1,disabled:r,title:r?u&&u.notInstalled||"The font may not be installed":void 0}})},g_=`.editor-toolbar .toolbar-dropdown.toolbar-dropdown-heading .toolbar-button {\r
    font-weight: bold;\r
    min-width: 73px;\r
}\r
\r
.editor-toolbar .toolbar-dropdown.toolbar-dropdown-heading .heading-item-h1,\r
.editor-toolbar .toolbar-dropdown.toolbar-dropdown-heading .heading-item-h2,\r
.editor-toolbar .toolbar-dropdown.toolbar-dropdown-heading .heading-item-h3,\r
.editor-toolbar .toolbar-dropdown.toolbar-dropdown-heading .heading-item-h4,\r
.editor-toolbar .toolbar-dropdown.toolbar-dropdown-heading .heading-item-h5,\r
.editor-toolbar .toolbar-dropdown.toolbar-dropdown-heading .heading-item-h6 {\r
    line-height: 1.6;\r
    font-weight: bold;\r
    color: #262626;\r
}\r
\r
.heading-item-h1 {\r
    font-size: 28px;\r
}\r
\r
.heading-item-h2 {\r
    font-size: 24px;\r
}\r
\r
.heading-item-h3 {\r
    font-size: 20px;\r
}\r
\r
.heading-item-h4 {\r
    font-size: 16px;\r
}\r
\r
.heading-item-h5 {\r
    font-size: 14px;\r
}\r
\r
.editor-toolbar .toolbar-dropdown.toolbar-dropdown-heading .heading-item-h6 {\r
    font-size: 14px;\r
    font-weight: normal;\r
}\r
\r
.editor-toolbar .toolbar-dropdown.toolbar-dropdown-fontsize .toolbar-button {\r
    font-weight: bold;\r
    min-width: 58px;\r
}\r
\r
.editor-toolbar .toolbar-dropdown.toolbar-dropdown-fontfamily .toolbar-button {\r
    font-size: 12px;\r
}`;as(g_);var Pm=function(u){var t=u.language.get("toolbar"),n=u.container.css("font-size");return[{type:"collapse",header:t.collapse.title,icon:"collapse",groups:[{items:[{name:"image-uploader",icon:`<span>
									<svg
										xmlns="http://www.w3.org/2000/svg"
										width="24"
										height="24"
									>
										<g fill="none" fill-rule="evenodd">
											<rect
												stroke="#E8E8E8"
												stroke-width=".667"
												fill="#FFF"
												x=".333"
												y=".333"
												width="23.333"
												height="23.333"
												rx="1.333"
											/>
											<g fill-rule="nonzero">
												<path
													d="M8.625 8a1.126 1.126 0 010 2.25 1.126 1.126 0 010-2.25z"
													fill="#FFD666"
												/>
												<path
													d="M17.95 14.88a.144.144 0 01-.092.033H6.14a.139.139 0 01-.14-.137.14.14 0 01.033-.089l2.981-3.45a.143.143 0 01.198-.018c.005.005.012.01.017.017l1.74 2.016 2.767-3.203a.143.143 0 01.198-.017l.018.017 4.018 4.64a.137.137 0 01-.02.191z"
													fill="#CCC"
												/>
												<path
													d="M17.91 14.88a.144.144 0 01-.092.033H9.333l4.363-4.864a.143.143 0 01.198-.017l.018.017 4.018 4.64a.137.137 0 01-.02.191z"
													fill="#737373"
												/>
											</g>
										</g>
									</svg>
								</span>`,title:t.image.title,search:"\u56FE\u7247,tupian,image,img"},{name:"codeblock",icon:`<span>
									<svg
										xmlns="http://www.w3.org/2000/svg"
										width="24"
										height="24"
									>
										<g fill="none" fill-rule="evenodd">
											<rect
												stroke="#E8E8E8"
												fill="#FFF"
												x=".5"
												y=".5"
												width="23"
												height="23"
												rx="2"
											/>
											<path
												d="M19.331 11.815c-.407-.22-.665-.678-.665-1.181V8.062c0-.202-.148-.367-.33-.367h-.933a.153.153 0 01-.153-.153v-.64c0-.084.068-.152.153-.152h.933c.651 0 1.18.588 1.18 1.312v2.572c0 .14.072.269.186.33l.843.455c.05.026.08.078.08.134v.894c0 .056-.03.108-.08.134l-.843.455a.373.373 0 00-.186.33v2.572c0 .724-.529 1.312-1.18 1.312h-.933a.153.153 0 01-.153-.153v-.64c0-.084.068-.152.153-.152h.933c.182 0 .33-.165.33-.367v-2.572c0-.503.258-.961.665-1.18l.344-.186-.344-.185zM5.044 11.815c.407-.22.665-.678.665-1.181V8.062c0-.202.148-.367.33-.367h.933a.153.153 0 00.153-.153v-.64a.153.153 0 00-.153-.152H6.04c-.651 0-1.18.588-1.18 1.312v2.572c0 .14-.072.269-.186.33l-.843.455a.153.153 0 00-.08.134v.894c0 .056.03.108.08.134l.843.455c.114.061.186.19.186.33v2.572c0 .724.529 1.312 1.18 1.312h.933a.153.153 0 00.153-.153v-.64a.153.153 0 00-.153-.152H6.04c-.182 0-.33-.165-.33-.367v-2.572c0-.503-.258-.961-.665-1.18L4.7 12l.344-.185z"
												fill="#595959"
												fill-rule="nonzero"
											/>
											<path
												fill="#1890FF"
												opacity=".25"
												d="M8.25 8.25h7.5v1.125h-7.5z"
											/>
											<path
												fill="#D2E8DB"
												d="M8.25 10.5h4.5v1.125h-4.5z"
											/>
											<path
												fill="#E0E0E0"
												d="M8.25 12.75h4.5v1.125h-4.5zM8.25 15h6v1.125h-6z"
											/>
										</g>
									</svg>
								</span>`,title:t.codeblock.title,search:"\u4EE3\u7801\u5757,daimakuai,code"},{name:"table",command:{name:"table",args:[3,3]},placement:"rightTop",onDisabled:function(){return!!u.card.active||!u.command.queryEnabled("table")},prompt:!!u.card.active||!u.command.queryEnabled("table")?void 0:G1(Gp,{onSelect:function(r,i,a){u.command.execute("table",i,a)}}),icon:`<span><svg
									width="24px"
									height="24px"
									view-box="0 0 24 24"
									version="1.1"
									xmlns="http://www.w3.org/2000/svg"
								>
									<g
										stroke="none"
										stroke-width="1"
										fill="none"
										fill-rule="evenodd"
									>
										<g transform="translate(-16.000000, -93.000000)">
											<g>
												<g transform="translate(16.000000, 53.000000)">
													<g transform="translate(0.000000, 40.000000)">
														<g>
															<rect
																stroke="#E8E8E8"
																stroke-width="0.666666667"
																fill="#FFFFFF"
																x="0.333333333"
																y="0.333333333"
																width="23.3333333"
																height="23.3333333"
																rx="1.33333333"
															></rect>
															<g transform="translate(5.250000, 6.750000)">
																<path
																	d="M0.75,0 L3.75,0 L3.75,10.5 L0.75,10.5 C0.335786438,10.5 5.07265313e-17,10.1642136 0,9.75 L0,0.75 C-5.07265313e-17,0.335786438 0.335786438,7.6089797e-17 0.75,0 Z"
																	id="Rectangle"
																	fill="#F0F0F0"
																></path>
																<path
																	d="M0.25,2.75 L13.25,2.75 L13.25,0.75 C13.25,0.473857625 13.0261424,0.25 12.75,0.25 L0.75,0.25 C0.473857625,0.25 0.25,0.473857625 0.25,0.75 L0.25,2.75 Z"
																	id="Rectangle"
																	stroke="#595959"
																	stroke-width="0.5"
																	fill-opacity="0.15"
																	fill="#25B864"
																></path>
																<rect
																	id="Rectangle"
																	fill="#E8E8E8"
																	x="0"
																	y="5.25"
																	width="13.5"
																	height="1"
																></rect>
																<rect
																	id="Rectangle-Copy"
																	fill="#E8E8E8"
																	x="0"
																	y="7.5"
																	width="13.5"
																	height="1"
																></rect>
																<rect
																	id="Rectangle"
																	fill="#E8E8E8"
																	x="6.75"
																	y="0"
																	width="1"
																	height="10.5"
																></rect>
																<rect
																	id="Rectangle-Copy-5"
																	fill="#E8E8E8"
																	x="9.75"
																	y="0"
																	width="1"
																	height="10.5"
																></rect>
																<rect
																	id="Rectangle"
																	stroke="#737373"
																	stroke-width="0.75"
																	x="0.375"
																	y="0.375"
																	width="12.75"
																	height="9.75"
																	rx="0.75"
																></rect>
																<path
																	d="M3.5,10.25 L3.5,0.25 L0.75,0.25 C0.473857625,0.25 0.25,0.473857625 0.25,0.75 L0.25,9.75 C0.25,10.0261424 0.473857625,10.25 0.75,10.25 L3.5,10.25 Z"
																	id="Rectangle"
																	stroke="#737373"
																	stroke-width="0.5"
																></path>
																<path
																	d="M0.25,2.75 L13.25,2.75 L13.25,0.75 C13.25,0.473857625 13.0261424,0.25 12.75,0.25 L0.75,0.25 C0.473857625,0.25 0.25,0.473857625 0.25,0.75 L0.25,2.75 Z"
																	id="Rectangle"
																	stroke="#737373"
																	stroke-width="0.5"
																></path>
															</g>
														</g>
													</g>
												</g>
											</g>
										</g>
									</g>
								</svg></span>`,title:t.table.title,search:"biaoge,table"},{name:"file-uploader",icon:`<span>
									<svg
										width="24"
										height="24"
										xmlns="http://www.w3.org/2000/svg"
									>
										<g fill="none" fill-rule="evenodd">
											<rect
												stroke="#E8E8E8"
												fill="#FFF"
												x=".5"
												y=".5"
												width="23"
												height="23"
												rx="2"
											/>
											<path
												fill="#E0E0E0"
												d="M11.25 15h8.25v1.125h-8.25zM14.25 11.25h5.25v1.125h-5.25zM14.25 8.25h5.25v1.125h-5.25z"
											/>
											<path
												d="M11.216 8.324a2.593 2.593 0 00-3.791 0l-2.896 3.04a.108.108 0 00-.029.074c0 .028.01.055.029.075l.41.43c.038.041.101.041.14 0l2.896-3.04a1.841 1.841 0 012.69 0c.36.378.557.88.557 1.413 0 .534-.197 1.035-.557 1.413l-2.95 3.1-.48.502c-.446.47-1.173.47-1.62 0a1.226 1.226 0 01-.335-.851c0-.322.119-.624.335-.851l2.928-3.075a.382.382 0 01.276-.12h.001c.105 0 .201.043.274.12.075.078.115.18.115.29a.416.416 0 01-.115.288l-2.393 2.512a.108.108 0 00-.029.075c0 .028.01.054.03.074l.409.43c.038.041.102.041.14 0l2.392-2.513c.221-.232.342-.54.342-.867 0-.328-.122-.637-.342-.868a1.131 1.131 0 00-1.653 0l-.284.3-2.642 2.776a2.06 2.06 0 00-.564 1.43c0 .54.2 1.047.564 1.428.376.394.868.591 1.36.591.494 0 .986-.197 1.361-.591l3.43-3.602c.505-.532.785-1.24.785-1.991a2.867 2.867 0 00-.784-1.992z"
												fill="#595959"
											/>
										</g>
									</svg>
								</span>`,title:t.file.title,search:"\u9644\u4EF6,\u6587\u4EF6,fujian,wenjian,file"},{name:"video-uploader",icon:`<span>
									<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                        <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                            <g transform="translate(-16.000000, -641.000000)">
                                                <g>
                                                    <g transform="translate(16.000000, 641.000000)">
                                                        <g>
                                                            <rect stroke="#E8E8E8" fill="#FFFFFF" x="0.5" y="0.5" width="23" height="23" rx="2"/>
                                                            <g transform="translate(6.000000, 6.000000)" fill-rule="nonzero">
                                                                <rect fill="#000000" opacity="0" x="0" y="0" width="12" height="12"/>
                                                                <path d="M6,0.75 C3.10078125,0.75 0.75,3.10078125 0.75,6 C0.75,8.89921875 3.10078125,11.25 6,11.25 C8.89921875,11.25 11.25,8.89921875 11.25,6 C11.25,3.10078125 8.89921875,0.75 6,0.75 Z M6,10.359375 C3.59296875,10.359375 1.640625,8.40703125 1.640625,6 C1.640625,3.59296875 3.59296875,1.640625 6,1.640625 C8.40703125,1.640625 10.359375,3.59296875 10.359375,6 C10.359375,8.40703125 8.40703125,10.359375 6,10.359375 Z" id="Shape" fill="#595959"/>
                                                                <path d="M7.93963415,5.8884912 L5.23140244,4.02687575 C5.13445122,3.96020395 5,4.02514402 5,4.13857268 L5,7.86180356 C5,7.97523223 5.13536585,8.03930643 5.23140244,7.97350049 L7.93963415,6.11188505 C8.02012195,6.05646952 8.02012195,5.94390673 7.93963415,5.8884912 Z" id="Shape" fill="#71D19A"/>
                                                            </g>
                                                        </g>
                                                    </g>
                                                </g>
                                            </g>
                                        </g>
                                    </svg>
								</span>`,title:t.video.title,search:"\u89C6\u9891,MP4,shipin,video"},{name:"math",icon:`<span>
									<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><g fill="none" fill-rule="evenodd"><rect stroke="#E8E8E8" fill="#FFF" x=".5" y=".5" width="23" height="23" rx="2"/><path d="M14.073 14.18a.122.122 0 01.004.073l-.346 1.404a.122.122 0 01-.119.093H9.438a.122.122 0 01-.122-.122v-.384c0-.067.055-.122.122-.122h.61v-3.924h-.61a.122.122 0 01-.122-.122v-.384c0-.068.055-.122.122-.122h.355l-.012-.063a.976.976 0 00-.96-.8h-.487v3.845H9.35c.068 0 .122.055.122.122v.384a.122.122 0 01-.122.122H6.341a.122.122 0 01-.122-.122v-.384c0-.067.055-.122.122-.122h1.017V9.706H6.87a.976.976 0 00-.96.8l-.097.535h-.437a.122.122 0 01-.122-.132l.143-1.797A.122.122 0 015.52 9h4.654c.064 0 .117.049.122.112l.116 1.458h3.19c.06 0 .113.046.12.107l.214 1.718a.122.122 0 01-.121.137h-.339a.122.122 0 01-.117-.09l-.16-.577a.91.91 0 00-.877-.667h-1.134v1.57h.423c.26 0 .471-.211.471-.471v-.192c0-.068.055-.122.122-.122h.407c.067 0 .122.054.122.122v1.953a.122.122 0 01-.122.122h-.407a.122.122 0 01-.122-.122v-.192a.47.47 0 00-.47-.47h-.424v1.726h1.187c.34 0 .655-.177.832-.467l.291-.475h-.155a.122.122 0 01-.122-.122v-.384c0-.067.054-.122.122-.122h.577l1.468-2.004-1.305-1.92h-.659a.122.122 0 01-.122-.122v-.384c0-.067.055-.122.122-.122h2.196c.067 0 .122.055.122.122v.384a.122.122 0 01-.122.122h-.317l.718 1.057.774-1.057h-.362a.122.122 0 01-.122-.122v-.384c0-.067.055-.122.122-.122h1.87c.068 0 .123.055.123.122v.384a.122.122 0 01-.122.122h-.614l-1.238 1.69 1.518 2.234h.659c.067 0 .122.055.122.122v.384a.122.122 0 01-.122.122h-2.196a.122.122 0 01-.122-.122v-.384c0-.067.055-.122.122-.122h.317l-.931-1.37-1.004 1.37h.398c.068 0 .122.055.122.122v.384a.122.122 0 01-.122.122h-1.14z" fill-opacity=".65" fill="#000"/></g></svg>
								</span>`,title:t.math.title,search:"\u516C\u5F0F,\u6570\u5B66\u516C\u5F0F,gongshi,formula,math,latex"},{name:"status",icon:`<span>
									<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><g fill="none" fill-rule="evenodd"><rect stroke="#E8E8E8" stroke-width=".667" fill="#FFF" x=".333" y=".333" width="23.333" height="23.333" rx="1.333"/><g transform="translate(6 6)"><path d="M2.534 6.192L.53 4.34a.667.667 0 01-.144-.788L1.98.37A.667.667 0 012.575 0h9.714c.369 0 .667.298.667.667v5.036a.667.667 0 01-.667.666H2.986a.667.667 0 01-.452-.177z" fill="#BFBFBF"/><path d="M.598 4.07a.267.267 0 00.02.226l4.125 7.146a.267.267 0 00.364.097l4.62-2.666a.267.267 0 00.097-.365L5.698 1.363a.267.267 0 00-.186-.13L2.095.648a.267.267 0 00-.295.17L.598 4.07z" stroke="#595959" stroke-width=".8" fill="#FFF"/><path d="M3.956 3.036a.667.667 0 11-1.333 0 .667.667 0 011.333 0z" fill="#595959"/><circle fill="#595959" transform="scale(-1 1) rotate(30 0 -9.207)" cx="3.283" cy="3.047" r="1"/></g></g></svg>
								</span>`,title:t.status.title,search:"status,label,\u72B6\u6001"}]}]},{type:"button",name:"undo",icon:"undo",title:t.undo.title,onDisabled:function(){return!u.command.queryState("undo")||!u.command.queryEnabled("undo")},onActive:function(){return!1}},{type:"button",name:"redo",icon:"redo",title:t.redo.title,onDisabled:function(){return!u.command.queryState("redo")||!u.command.queryEnabled("redo")},onActive:function(){return!1}},{type:"button",name:"paintformat",icon:"paintformat",title:t.paintformat.title},{type:"button",name:"removeformat",icon:"clean",title:t.removeformat.title},{type:"dropdown",name:"heading",className:"toolbar-dropdown-heading",title:t.heading.title,items:[{key:"p",className:"heading-item-p",content:t.heading.p},{key:"h1",className:"heading-item-h1",content:t.heading.h1},{key:"h2",className:"heading-item-h2",content:t.heading.h2},{key:"h3",className:"heading-item-h3",content:t.heading.h3},{key:"h4",className:"heading-item-h4",content:t.heading.h4},{key:"h5",className:"heading-item-h5",content:t.heading.h5},{key:"h6",className:"heading-item-h6",content:t.heading.h6}]},{type:"dropdown",name:"fontsize",className:"toolbar-dropdown-fontsize",title:t.fontsize.title,items:[{key:"12px",content:"12px",hotkey:!1},{key:"13px",content:"13px",hotkey:!1},{key:"14px",content:"14px",hotkey:!1},{key:"15px",content:"15px",hotkey:!1},{key:"16px",content:"16px",hotkey:!1},{key:"19px",content:"19px",hotkey:!1},{key:"22px",content:"22px",hotkey:!1},{key:"24px",content:"24px",hotkey:!1},{key:"29px",content:"29px",hotkey:!1},{key:"32px",content:"32px",hotkey:!1},{key:"40px",content:"40px",hotkey:!1},{key:"48px",content:"48px",hotkey:!1}].map(function(e){return e.key===n?Ie(Ie({},e),{},{isDefault:!0}):e}),onDisabled:function(){var r=u.command.queryState("heading")||"p";return/^h\d$/.test(r)||!u.command.queryEnabled("fontsize")}},{type:"dropdown",name:"fontfamily",className:"toolbar-dropdown-fontfamily",title:t.fontfamily.title,items:p_(Bm,Ie(Ie({},t.fontfamily.items),{},{notInstalled:t.fontfamily.notInstalled})),onActive:function(r){var i,a=u.command.queryState("fontfamily");if(!a||!Array.isArray(a)||a.length===0)return"";var o=a[0].split(",").map(function(l){return l.replace(/"/g,"").trim().toLowerCase()});return((i=r.find(function(l){return o.indexOf(l.faimlyName.trim().toLowerCase())>-1}))===null||i===void 0?void 0:i.key)||""}},{type:"button",name:"bold",icon:"bold",title:t.bold.title,onDisabled:function(){var r=u.command.queryState("heading")||"p";return/^h\d$/.test(r)||!u.command.queryEnabled("bold")}},{type:"button",name:"italic",icon:"italic",title:t.italic.title},{type:"button",name:"strikethrough",icon:"strikethrough",title:t.strikethrough.title},{type:"button",name:"underline",icon:"underline",title:t.underline.title},{type:"dropdown",name:"moremark",icon:"moremark",single:!1,title:t.moremark.title,items:[{key:"sup",icon:"sup",content:t.moremark.sup,disabled:!u.command.queryEnabled("sup"),command:{name:"sup",args:[]}},{key:"sub",icon:"sub",disabled:!u.command.queryEnabled("sub"),content:t.moremark.sub,command:{name:"sub",args:[]}},{key:"code",icon:"code",disabled:!u.command.queryEnabled("code"),content:t.moremark.code,command:{name:"code",args:[]}}],onDisabled:function(){var r=[];return u.command.queryEnabled("sup")===!0&&r.push("sup"),u.command.queryEnabled("sub")===!0&&r.push("sub"),u.command.queryEnabled("code")===!0&&r.push("code"),r.length===0},onActive:function(){var r=[];return u.command.queryState("sup")===!0&&r.push("sup"),u.command.queryState("sub")===!0&&r.push("sub"),u.command.queryState("code")===!0&&r.push("code"),r}},{type:"color",name:"fontcolor",defaultColor:"#262626",defaultActiveColor:"#F5222D",buttonTitle:t.fontcolor.title,dropdownTitle:t.fontcolor.more,content:function(r,i,a){return a===!0&&(r="#BFBFBF",i="#BFBFBF"),`<svg
						width="16px"
						height="16px"
						viewBox="0 0 16 16"
						style="margin-bottom: -2"
					>
						<title>color-font</title>
						<desc>Created with Sketch.</desc>
						<g
							id="color-font"
							stroke="none"
							stroke-width="1"
							fill="none"
							fill-rule="evenodd"
						>
							<rect
								id="Rectangle-55"
								stroke=`.concat(i,`
								stroke-width="0.5"
								fill=`).concat(r,`
								x="2"
								y="12.75"
								width="12"
								height="1.5"
								rx="0.125"
							/>
							<path
								d="M5.29102819,11.25 L3.96365715,11.25 C3.87952002,11.25 3.8113134,11.1817934 3.8113134,11.0976562 C3.8113134,11.08076 3.81412419,11.0639814 3.81963067,11.0480076 L7.0756112,1.60269506 C7.09679504,1.5412426 7.15463644,1.5 7.21963767,1.5 L8.81868806,1.5 C8.883726,1.5 8.94159158,1.54128846 8.96274706,1.60278951 L12.2118,11.048102 C12.239168,11.1276636 12.1968568,11.2143472 12.1172952,11.2417152 C12.1013495,11.2472004 12.0846037,11.25 12.067741,11.25 L10.6761419,11.25 C10.6099165,11.25 10.5512771,11.2072154 10.531066,11.1441494 L9.69970662,8.55 L6.27433466,8.55 L5.43599205,11.1444975 C5.41567115,11.2073865 5.35711879,11.25 5.29102819,11.25 Z M8.02635163,3.18571429 L7.96199183,3.18571429 L6.63904023,7.30714286 L9.33500105,7.30714286 L8.02635163,3.18571429 Z"
								id="A"
								fill="#595959"
							/>
						</g>
					</svg>`)}},{type:"color",name:"backcolor",defaultColor:"transparent",defaultActiveColor:"#FADB14",buttonTitle:t.backcolor.title,dropdownTitle:t.backcolor.more,content:function(r,i,a){return a===!0&&(r="#BFBFBF",i="#BFBFBF"),`<svg
                    width="16px"
                    height="16px"
                    viewBox="0 0 16 16"
                    style="margin-bottom: -2"
					>
                    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                    <rect stroke="`.concat(i,'" stroke-width="0.5" fill="').concat(r,`" x="2" y="12.75" width="12" height="1.5" rx="0.125"></rect>
                    <g transform="translate(2.781250, 1.375000)" fill-rule="nonzero"><path fill="#595959" d="M2.86079849,6.64817222 L2.05713835,5.84451208 C2.00832281,5.79569655 2.00832281,5.71655092 2.05713835,5.66773539 L3.61029491,4.11457882 L3.11963835,3.62392225 C3.07082281,3.57510672 3.07082281,3.49596109 3.11963835,3.44714556 L6.47839556,0.0883883476 C6.52721109,0.0395728112 6.60635672,0.0395728112 6.65517225,0.0883883476 L11.5165314,4.94974747 C11.5653469,4.998563 11.5653469,5.07770863 11.5165314,5.12652416 L8.15777416,8.48528137 C8.10895863,8.53409691 8.029813,8.53409691 7.98099747,8.48528137 L7.38889678,7.89318068 L5.83574021,9.44633725 C5.78692467,9.49515278 5.70777905,9.49515278 5.65896351,9.44633725 L5.0267407,8.81411444 L4.48856529,9.35326519 C4.39477378,9.44720966 4.26747335,9.5 4.13472392,9.5 L0.608857988,9.5 C0.470786801,9.5 0.358857988,9.38807119 0.358857988,9.25 C0.358857988,9.18363253 0.385247413,9.11998865 0.432210608,9.07309408 L2.86079849,6.64817222 Z M6.56678391,1.67937861 L4.71062861,3.53553391 L8.06938582,6.89429112 L9.92554112,5.03813582 L6.56678391,1.67937861 Z M3.64812861,5.75612373 L5.74735186,7.85534699 L6.54284699,7.05985186 L4.44362373,4.96062861 L3.64812861,5.75612373 Z" id="Combined-Shape"></path></g></g>
					</svg>`)}},{type:"dropdown",name:"alignment",title:t.alignment.title,items:[{key:"left",icon:"align-left",content:t.alignment.left},{key:"center",icon:"align-center",content:t.alignment.center},{key:"right",icon:"align-right",content:t.alignment.right},{key:"justify",icon:"align-justify",content:t.alignment.justify}]},{type:"button",name:"unorderedlist",icon:"unordered-list",title:t.unorderedlist.title},{type:"button",name:"orderedlist",icon:"ordered-list",title:t.orderedlist.title},{type:"button",name:"tasklist",icon:"task-list",title:t.tasklist.title},{type:"dropdown",name:"indent",icon:"indent",hasDot:!1,title:t.indent.title,items:[{key:"in",icon:"indent",content:t.indent.in},{key:"out",icon:"outdent",content:t.indent.out}]},{type:"dropdown",name:"line-height",content:function(){return'<span class="data-icon data-icon-line-height"></span>'},title:t["line-height"].title,items:[{key:"default",content:t["line-height"].default},{key:"1",content:"1"},{key:"1.15",content:"1.15"},{key:"1.5",content:"1.5"},{key:"2",content:"2"},{key:"2.5",content:"2.5"},{key:"3",content:"3"}]},{type:"button",name:"link",icon:"link",command:{name:"link",args:["_blank"]},title:t.link.title,onDisabled:function(){var r=u.card,i=ge(u)?u.change.range.get():ln.from(u);if(!i)return!u.command.queryEnabled("link");var a=r.find(i.startNode);return!!a&&!a.isCursor(i.startNode)||i.containsCard()||!u.command.queryEnabled("link")}},{type:"button",name:"quote",icon:"quote",title:t.quote.title},{type:"button",name:"hr",icon:"hr",title:t.hr.title}]},Ad=or({name:"am-toolbar",components:{AmGroup:$p},props:fE,setup:function(u){var t=cn([]),n=function(){mt&&a();var g=[],w=Pm(u.engine);u.items.forEach(function(x){var _={items:[]};Array.isArray(x)||(_.icon=x.icon,_.content=x.content,x=x.items),x.forEach(function(E){var M=void 0;if(typeof E=="string"){var T=w.find(function(I){return E==="collapse"?I.type===E:I.type!=="collapse"&&I.name===E});T&&(M=T)}else{var S=w.find(function(I){return E.type==="collapse"?I.type===E.type:I.type!=="collapse"&&I.name===E.name});if(E.type==="collapse"){var D=Ie(Ie({},Kt.exports.merge(Kt.exports.omit(Ie({},S),"groups"),Kt.exports.omit(Ie({},E),"groups"))),{},{groups:[]});E.groups.forEach(function(I){var P=[];I.items.forEach(function(B){var $=void 0;S.groups.some(function(q){return q.items.some(function(G){var H=G.name===(typeof B=="string"?B:B.name);return H&&($=Ie(Ie({},G),typeof B=="string"?{}:B)),H})}),$?P.push($):Jn(B)==="object"&&P.push(B)}),P.length>0&&D.groups.push(Ie(Ie({},Kt.exports.omit(I,"itmes")),{},{items:P}))}),M=D.groups.length>0?D:void 0}else E.type==="dropdown"?(M=S?Kt.exports.merge(S,Kt.exports.omit(Ie({},E),"type","items")):Ie({},E),M.items=E.items):M=S?Kt.exports.merge(S,Kt.exports.omit(Ie({},E),"type")):Ie({},E)}M&&(M.type==="button"?M.onActive?M.active=M.onActive():u.engine.command.queryEnabled(M.name)&&(M.active=u.engine.command.queryState(M.name)):M.type==="dropdown"&&(M.onActive?M.values=M.onActive(M.items):M.values=u.engine.command.queryState(M.name)),M.type!=="collapse"?M.disabled=M.onDisabled?M.onDisabled():!u.engine.command.queryEnabled(M.name):(M.groups.forEach(function(I){return I.items.forEach(function(P){P.disabled=P.onDisabled?P.onDisabled():!u.engine.command.queryEnabled(P.name)})}),M.disabled=!M.groups.some(function(I){return I.items.some(function(P){return!P.disabled})})),_.items.push(M))}),_.items.length>0&&g.push(_)}),t.value=g},e=cn(null),r=cn(null),i=$1({top:0}),a=function(){!u.engine.isFocus()||u.engine.readonly||(r.value&&clearTimeout(r.value),r.value=setTimeout(function(){var g,w=(g=e.value)===null||g===void 0?void 0:g.getBoundingClientRect(),x=(w==null?void 0:w.height)||0;i.top=global.Math.max(document.body.scrollTop,document.documentElement.scrollTop)+(window.visualViewport.height||0)-x},100))},o,l=function(){i.top=-120,clearTimeout(o),o=setTimeout(function(){a()},200)},c=function(){u.engine.readonly?l():a()},d,v=function(){clearTimeout(d),d=setTimeout(function(){n()},100)};return Od(function(){u.engine.language.add(Fm),u.engine.on("select",v),u.engine.on("change",v),u.engine.on("blur",v),u.engine.on("focus",v),mt?(u.engine.on("readonly",c),u.engine.on("blur",l),document.addEventListener("scroll",l),visualViewport.addEventListener("resize",a),visualViewport.addEventListener("scroll",a)):u.engine.on("readonly",v),v()}),Jh(function(){u.engine.off("select",v),u.engine.off("change",v),u.engine.off("readonly",v),u.engine.off("blur",v),u.engine.off("focus",v),mt?(u.engine.off("readonly",c),u.engine.off("blur",l),document.removeEventListener("scroll",l),visualViewport.removeEventListener("resize",a),visualViewport.removeEventListener("scroll",a)):u.engine.off("readonly",v)}),{toolbarRef:e,mobileView:i,isMobile:mt,groups:t}},methods:{preventDefault:function(u){u.preventDefault()},triggerMouseDown:function(){},triggerMouseOver:function(u){this.preventDefault(u)},triggerMouseMove:function(u){this.preventDefault(u)},triggerContextMenu:function(u){this.preventDefault(u)}}}),m_={class:"editor-toolbar-content"};function b_(b,u,t,n,e,r){var i=Tn("am-group");return ct(),zt("div",{ref:"toolbarRef",class:ti(["editor-toolbar",b.className,{"editor-toolbar-mobile":b.isMobile&&!b.popup,"editor-toolbar-popup":b.popup}]),style:sp(b.isMobile?{top:"".concat(b.mobileView.top,"px")}:{}),"data-element":"ui",onMousedown:u[0]||(u[0]=function(){return b.triggerMouseDown&&b.triggerMouseDown.apply(b,arguments)}),onMouseover:u[1]||(u[1]=function(){return b.triggerMouseOver&&b.triggerMouseOver.apply(b,arguments)}),onMousemove:u[2]||(u[2]=function(){return b.triggerMouseMove&&b.triggerMouseMove.apply(b,arguments)}),onContextmenu:u[3]||(u[3]=function(){return b.triggerContextMenu&&b.triggerContextMenu.apply(b,arguments)})},[jt("div",m_,[(ct(!0),zt(da,null,So(b.groups,function(a,o){return ct(),hr(i,Jo({key:o,engine:b.engine,popup:b.popup},a),null,16,["engine","popup"])}),128))])],38)}var y_=`
.ant-tooltip .toolbar-tooltip-title {\r
    font-size: 12px;\r
    text-align: center;
}
.ant-tooltip .toolbar-tooltip-hotkey {\r
    font-size: 12px;\r
    color: rgba(255, 255, 255, 0.85);\r
    text-align: center;
}
.editor-toolbar {\r
    position: relative;\r
    width: 100%;\r
    padding:0;\r
    z-index: 200;\r
    border-top:1px solid rgba(0,0,0,.05);\r
    border-bottom: 1px solid rgba(0,0,0,.05);\r
    -webkit-user-select: none;\r
       -moz-user-select: none;\r
        -ms-user-select: none;\r
            user-select: none;
}
.editor-toolbar .editor-toolbar-content {\r
    position: relative;\r
    flex-direction: row;\r
    background: transparent;\r
    text-align: center;\r
    width: 100%;\r
    display: flex;\r
    justify-content: center;\r
    flex-wrap: wrap;
}
.editor-toolbar.editor-toolbar-mobile,.editor-toolbar.editor-toolbar-popover {\r
    position: absolute;\r
    left: 0;\r
    box-shadow: none;
}
.editor-toolbar.editor-toolbar-popup {\r
    position: initial;\r
    box-shadow: none;\r
    top: 0;\r
    left: 0;\r
    border: 0 none;
}
.editor-toolbar-mobile .editor-toolbar-content {\r
    text-align: left;\r
    padding: 0 12px;
}
.editor-toolbar-mobile .editor-toolbar-group,.editor-toolbar-popup .editor-toolbar-group {\r
    border: 0 none;\r
    padding: 0;
}
.editor-toolbar-popup .editor-toolbar-content {\r
    text-align: center;\r
    padding: 0;
}
.editor-toolbar-popover .editor-toolbar {\r
    position: relative;\r
    box-shadow: none;\r
    border: 0 none;\r
    left: 0;\r
    top: 0;\r
    display: flex;
}
.editor-toolbar-popover {\r
    border-radius: 3px;\r
    background: transparent;
}
.editor-toolbar-popover .ant-popover-inner {\r
    border-radius: 3px;
}
.editor-toolbar-popover .ant-popover-inner-content {\r
    padding: 2px;
}
.am-engine-mobile {\r
  margin-bottom: 40px;
}\r
`;as(y_);Ad.render=b_;Ad.__file="src/components/toolbar.vue";var gd=Mt("position"),w_=function(){function b(u,t){var n=this;Fe(this,b),this.engine=void 0,this.root=void 0,this.otpions=void 0,this.vm=void 0,Object.defineProperty(this,gd,{writable:!0,value:void 0}),this.SCOPE_NAME="data-toolbar-component",this.handlePreventDefault=function(e){var r;if(((r=n.root)===null||r===void 0?void 0:r.closest("body").length)!==0)return e.preventDefault(),!1},this.otpions=t,this.engine=u,oe(this,gd)[gd]=new Mu(u)}return Be(b,[{key:"select",value:function(t){var n,e,r;(n=this.root)===null||n===void 0||n.find(".toolbar-collapse-item-active").removeClass("toolbar-collapse-item-active"),(e=this.root)===null||e===void 0||(r=e.find(".toolbar-collapse-item").eq(t))===null||r===void 0||r.addClass("toolbar-collapse-item-active")}},{key:"scroll",value:function(t){if(!!this.root){var n=this.root.find(".toolbar-collapse-item").toArray(),e=this.root.find(".toolbar-collapse-item-active"),r=n.findIndex(function(l){return l.equal(e)}),i=t==="up"?r-1:r+1;i<0&&(i=n.length-1),i>=n.length&&(i=0),e=n[i],this.select(i);var a=0;this.root.find(".toolbar-collapse-group-title,.toolbar-collapse-item").each(function(l){if(e.equal(l))return!1;a+=l.clientHeight});var o=this.root.get();o.scrollTop=a-o.clientHeight/2}}},{key:"unbindEvents",value:function(){Aa.exports.deleteScope(this.SCOPE_NAME),Aa.exports.unbind("enter",this.SCOPE_NAME),Aa.exports.unbind("up",this.SCOPE_NAME),Aa.exports.unbind("down",this.SCOPE_NAME),Aa.exports.unbind("esc",this.SCOPE_NAME),this.engine.off("keydown:enter",this.handlePreventDefault)}},{key:"bindEvents",value:function(){var t=this;this.unbindEvents(),Aa.exports.setScope(this.SCOPE_NAME),ku("enter",this.SCOPE_NAME,function(n){var e,r,i;if(((e=t.root)===null||e===void 0?void 0:e.closest("body").length)!==0){n.preventDefault();var a=(r=t.root)===null||r===void 0?void 0:r.find(".toolbar-collapse-item-active");a==null||(i=a.get())===null||i===void 0||i.click()}}),ku("up",this.SCOPE_NAME,function(n){var e;((e=t.root)===null||e===void 0?void 0:e.closest("body").length)!==0&&(n.preventDefault(),t.scroll("up"))}),ku("down",this.SCOPE_NAME,function(n){var e;((e=t.root)===null||e===void 0?void 0:e.closest("body").length)!==0&&(n.preventDefault(),t.scroll("down"))}),ku("esc",this.SCOPE_NAME,function(n){n.preventDefault(),t.unbindEvents();var e=t.otpions.onCancel;e&&e()}),this.engine.on("keydown:enter",this.handlePreventDefault)}},{key:"remove",value:function(){var t;!this.root||this.root.length===0||((t=oe(this,gd)[gd])===null||t===void 0||t.destroy(),this.vm&&this.vm.unmount(),this.root.remove(),this.root=void 0)}},{key:"render",value:function(t,n,e){var r;this.unbindEvents(),this.remove(),this.root=V('<div class="data-toolbar-component-list" />'),t.append(this.root);var i=this.root.get(),a=this.otpions.onSelect;e.length>0?(this.vm=xu(sv,{engine:this.engine,groups:e,onSelect:a}),this.vm.mount(i)):this.root.append('<div class="data-toolbar-component-list-empty">'.concat(this.engine.language.get("toolbar","searchEmtpy","title"),"</div>")),this.select(0),this.bindEvents(),(r=oe(this,gd)[gd])===null||r===void 0||r.bind(this.root,n)}}]),b}(),En=Mt("editor"),ra=Mt("root"),md=Mt("point"),Ri=Mt("align"),bd=Mt("options"),Fi=Mt("vm"),k_=function(){function b(u){var t=this,n,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Fe(this,b),Object.defineProperty(this,En,{writable:!0,value:void 0}),Object.defineProperty(this,ra,{writable:!0,value:void 0}),Object.defineProperty(this,md,{writable:!0,value:{left:0,top:-9999}}),Object.defineProperty(this,Ri,{writable:!0,value:"bottom"}),Object.defineProperty(this,bd,{writable:!0,value:{}}),Object.defineProperty(this,Fi,{writable:!0,value:void 0}),this.onSelect=function(){var r,i=(r=ln.from(oe(t,En)[En]))===null||r===void 0?void 0:r.cloneRange().shrinkToTextNode(),a=window.getSelection();if(!i||!a||!a.focusNode||i.collapsed||oe(t,En)[En].card.getSingleSelectedCard(i)||!i.commonAncestorNode.inEditor()&&!i.commonAncestorNode.isRoot()){t.hide();return}var o=i.startNode.next();if((o==null?void 0:o.isElement())&&Math.abs(i.endOffset-i.startOffset)===1){var l=oe(t,En)[En].card.closest(o);if(l){t.hide();return}}var c=i.startNode.prev();if((c==null?void 0:c.isElement())&&Math.abs(i.startOffset-i.endOffset)===1){var d=oe(t,En)[En].card.closest(c);if(d){t.hide();return}}var v=i.getSubRanges();if(v.length===0||oe(t,En)[En].card.active&&!oe(t,En)[En].card.active.isEditable){t.hide();return}var h=v[0],g=v[v.length-1],w=h.cloneRange().collapse(!0).getBoundingClientRect(),x=g.cloneRange().collapse(!1).getBoundingClientRect(),_=void 0;t.showContent(function(){var E,M;if(_=(E=oe(t,ra)[ra].get())===null||E===void 0?void 0:E.getBoundingClientRect(),!_){t.hide();return}oe(t,Ri)[Ri]=g.startNode.equal(a.focusNode)&&(!h.startNode.equal(a.focusNode)||a.focusOffset>a.anchorOffset)?"bottom":"top";var T=12,S=oe(t,Ri)[Ri]==="bottom"?x:w;oe(t,Ri)[Ri]==="top"&&S.top-_.height-T<window.innerHeight-(((M=oe(t,En)[En].scrollNode)===null||M===void 0?void 0:M.height())||0)?oe(t,Ri)[Ri]="bottom":oe(t,Ri)[Ri]==="bottom"&&S.bottom+_.height+T>window.innerHeight&&(oe(t,Ri)[Ri]="top"),S=oe(t,Ri)[Ri]==="bottom"?x:w;var D=oe(t,Ri)[Ri]==="top"?S.top-_.height-T:S.bottom+T;if(oe(t,En)[En].scrollNode){var I,P=(I=oe(t,En)[En].scrollNode.get())===null||I===void 0?void 0:I.getBoundingClientRect();P&&(D<P.top?D=P.top:D>P.bottom&&(D=P.bottom-_.height-T))}var B=S.left+S.width-_.width/2;B<0&&(B=16),oe(t,md)[md]={left:B,top:D},oe(t,ra)[ra].css({left:"".concat(oe(t,md)[md].left,"px"),top:"".concat(oe(t,md)[md].top,"px")})})},this.hide=function(r){if(r!=null&&r.target){var i=V(r.target);if(i.closest(".data-toolbar-popup-wrapper").length>0||i.closest(Su).length>0)return}oe(t,ra)[ra].css({left:"0px",top:"-9999px"})},oe(this,bd)[bd]=e,oe(this,En)[En]=u,oe(this,ra)[ra]=V('<div class="data-toolbar-popup-wrapper"></div>'),document.body.appendChild(oe(this,ra)[ra][0]),ge(u)?oe(this,En)[En].on("select",this.onSelect):document.addEventListener("selectionchange",this.onSelect),mt||window.addEventListener("scroll",this.onSelect),window.addEventListener("resize",this.onSelect),(n=oe(this,En)[En].scrollNode)===null||n===void 0||n.on("scroll",this.onSelect),document.addEventListener("mousedown",this.hide)}return Be(b,[{key:"showContent",value:function(t){var n=oe(this,En)[En].trigger("toolbar-render",oe(this,bd)[bd]),e=Ad;if(Jn(n)==="object"){var r;(r=oe(this,Fi)[Fi])===null||r===void 0||r.unmount(),oe(this,Fi)[Fi]=void 0,e=n}oe(this,Fi)[Fi]||(oe(this,Fi)[Fi]=xu(e,Ie(Ie({},oe(this,bd)[bd]),{},{engine:oe(this,En)[En],popup:!0})),oe(this,Fi)[Fi].mount(oe(this,ra)[ra].get())),setTimeout(function(){t&&t()},200)}},{key:"destroy",value:function(){var t;oe(this,ra)[ra].remove(),ge(oe(this,En)[En])?oe(this,En)[En].off("select",this.onSelect):document.removeEventListener("selectionchange",this.onSelect),mt||window.removeEventListener("scroll",this.onSelect),window.removeEventListener("resize",this.onSelect),(t=oe(this,En)[En].scrollNode)===null||t===void 0||t.off("scroll",this.onSelect),document.removeEventListener("mousedown",this.hide),oe(this,Fi)[Fi]&&(oe(this,Fi)[Fi].unmount(),oe(this,Fi)[Fi]=void 0)}}]),b}(),x_=`.data-toolbar-component-list {\r
    position: absolute;\r
    min-height: 0px;\r
    top: 10px;\r
    left: 0;\r
}\r
\r
.data-toolbar-component-list  .toolbar-dropdown-list {\r
    top:0px;\r
    position: relative;\r
}\r
\r
.data-toolbar-component-placeholder {\r
    color: rgba(0,0,0,0.25);\r
    pointer-events: none;\r
    width: 76px;\r
}\r
\r
.data-toolbar-component-list-empty {\r
    position: relative;\r
    font-size: 14px;\r
    background: #ffffff;\r
    border: 1px solid #e8e8e8;\r
    border-radius: 3px 3px;\r
    box-shadow: 0 2px 10px rgb(0 0 0 / 12%);\r
    padding: 5px 16px;\r
    line-height: 32px;\r
    min-width: 200px;\r
    height: auto;\r
    transition: all 0.25s cubic-bezier(0.3, 1.2, 0.2, 1);\r
    z-index: 999;\r
    max-height: calc(80vh);\r
    overflow: auto;\r
}\r
/** ------------------- popup ---------------------- **/\r
.data-toolbar-popup-wrapper {\r
    position: absolute;\r
    z-index: 9999;\r
    padding: 4px;\r
    background-color: #fff;\r
    border-radius: 4px;\r
    border: 1px solid #dee0e3;\r
    box-shadow: 0 4px 8px 0 rgba(31, 35, 41, 0.1);\r
}\r
\r
.data-toolbar-popup-wrapper .editor-toolbar-popover {\r
    width: -webkit-max-content;\r
    width: -moz-max-content;\r
    width: max-content;\r
}\r
\r
.data-toolbar-popup-wrapper .editor-toolbar-popover .ant-popover-inner-content {\r
    padding: 4px;\r
    background-color: #fff;\r
    border-radius: 4px;\r
    border: 1px solid #dee0e3;\r
}\r
\r
.data-toolbar-popup-wrapper .editor-toolbar-popover .ant-popover-arrow {\r
    display: none;\r
}`;as(x_);var ia=Mt("collapseData"),bf=Mt("data"),kp=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.keyword=void 0,n.placeholder=void 0,n.component=void 0,Object.defineProperty(Ye(n),ia,{writable:!0,value:void 0}),Object.defineProperty(Ye(n),bf,{writable:!0,value:void 0}),n}return Be(t,[{key:"init",value:function(){var e=this;!ge(this.editor)||Vh||(this.component=new w_(this.editor,{onCancel:function(){e.changeToText()},onSelect:function(){e.remove()}}))}},{key:"setData",value:function(e){oe(this,bf)[bf]=e}},{key:"getData",value:function(){var e=this;if(!ge(this.editor))return[];var r=[],i=Pm(this.editor),a=i.find(function(d){var v=d.type;return v==="collapse"}),o=[];a&&(o=a.groups);var l=[];o.forEach(function(d){l.push.apply(l,Hn(d.items))});var c=this.getValue();return(oe(this,bf)[bf]||(c?c.data:[])||[]).forEach(function(d){var v=d.title,h=[];d.items.forEach(function(g){var w=g;typeof g!="string"&&(w=g.name);var x=l.find(function(_){return _.name===w});x&&h.push(Ie(Ie(Ie({},x),typeof g!="string"?g:{}),{},{disabled:x.onDisabled?x.onDisabled():!e.editor.command.queryEnabled(w)}))}),r.push({title:v,items:h})}),r}},{key:"search",value:function(e){var r=[];typeof e=="string"&&(e=e.toLowerCase()),oe(this,ia)[ia]||(oe(this,ia)[ia]=[]),oe(this,ia)[ia].forEach(function(a){a.items.forEach(function(o){o.search&&o.search.toLowerCase().indexOf(e)>=0&&(r.find(function(l){var c=l.name;return c===o.name})||r.push(Ie({},o)))})});var i=[];return r.length>0&&i.push({title:"",items:r}),i}},{key:"remove",value:function(){var e;!ge(this.editor)||((e=this.component)===null||e===void 0||e.remove(),this.editor.card.remove(this.id))}},{key:"changeToText",value:function(){var e,r;if(!(!this.root.inEditor()||!ge(this.editor))){var i=((e=this.keyword)===null||e===void 0||(r=e.get())===null||r===void 0?void 0:r.innerText)||"";this.remove(),this.editor.node.insertText(i)}}},{key:"destroy",value:function(){var e,r;(e=this.component)===null||e===void 0||e.unbindEvents(),(r=this.component)===null||r===void 0||r.remove()}},{key:"activate",value:function(e){if(At(St(t.prototype),"activate",this).call(this,e),!e){var r;(r=this.component)===null||r===void 0||r.unbindEvents(),this.changeToText()}}},{key:"handleInput",value:function(){var e,r,i;if(!!ge(this.editor)){var a=this.editor,o=a.change,l=a.card;if(!o.isComposing()){var c=((e=this.keyword)===null||e===void 0||(r=e.get())===null||r===void 0?void 0:r.innerText.replace(/[\r\n]/g,""))||"";if(c===""){var d;(d=this.component)===null||d===void 0||d.remove(),l.remove(this.id);return}var v=c.substr(1);if(v===""){var h;(h=this.component)===null||h===void 0||h.render(this.editor.root,this.root,oe(this,ia)[ia]||[]);return}var g=this.search(v);(i=this.component)===null||i===void 0||i.render(this.editor.root,this.root,g)}}}},{key:"resetPlaceHolder",value:function(){var e,r,i,a;((e=this.keyword)===null||e===void 0||(r=e.get())===null||r===void 0?void 0:r.innerText)==="/"?(i=this.placeholder)===null||i===void 0||i.show():(a=this.placeholder)===null||a===void 0||a.hide()}},{key:"render",value:function(e){var r,i,a=this,o;this.setData(e);var l=this.editor;if(!(!ge(l)||Vh)){var c=l.language.get("toolbar","component");this.root.attributes("data-transient","true"),this.root.attributes("contenteditable","false");var d=V('<span class="data-toolbar-component-keyword" contenteditable="true">/</span><span class="data-toolbar-component-placeholder">'.concat(c.placeholder,"</span>")),v=this.getCenter();v.empty().append(d),this.keyword=v.find(".data-toolbar-component-keyword"),this.placeholder=v.find(".data-toolbar-component-placeholder"),(r=this.keyword)===null||r===void 0||r.on("keydown",function(g){yt("enter",g)&&g.preventDefault()});var h=Date.now();(i=this.keyword)===null||i===void 0||i.on("input",function(){if(a.resetPlaceHolder(),Date.now()-h<200){var g,w,x=(g=a.keyword)===null||g===void 0?void 0:g.first();if(x&&x.isText()&&x[0].nodeValue==="/\u3001"||(x==null||(w=x.get())===null||w===void 0?void 0:w.nodeValue)==="//"){var _,E=(_=x.get())===null||_===void 0?void 0:_.splitText(1);E==null||E.remove()}}setTimeout(function(){a.handleInput()},10)}),oe(this,ia)[ia]||(oe(this,ia)[ia]=this.getData()),(o=this.component)===null||o===void 0||o.render(l.root,this.root,oe(this,ia)[ia])}}}],[{key:"cardName",get:function(){return"toolbar"}},{key:"cardType",get:function(){return un.INLINE}},{key:"singleSelectable",get:function(){return!1}},{key:"autoSelected",get:function(){return!1}}]),t}(ni),C_=function(u){return[{title:u.language.get("toolbar","commonlyUsed","title"),items:["image-uploader","codeblock","table","file-uploader","video-uploader","math","status"]}]},Hm=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.popup=void 0,n.paserValue=function(a){return!(a.isCard()&&a.attributes("name")===kp.cardName)},n.onSlash=function(a){if(!!ge(n.editor)){var o=n.editor.change,l=o.range.get(),c=n.editor.block.closest(l.startNode),d=c.text().trim();if(d==="/"&&Nf&&c.empty(),(d===""||d==="/"&&Nf||a.ctrlKey||a.metaKey)&&(l=o.range.get(),l.collapsed)){a.preventDefault();var v=n.options.config||C_(n.editor),h=n.editor.card.insert(kp.cardName,{},v);h.setData(v),n.editor.card.activate(h.root),l=o.range.get();var g=h.find(".data-toolbar-component-keyword");l.select(g,!0),l.collapse(!1),o.range.select(l)}}},n}return Be(t,[{key:"init",value:function(){ge(this.editor)&&(this.editor.on("keydown:slash",this.onSlash),this.editor.on("parse:value",this.paserValue)),this.editor.language.add(Fm),this.options.popup&&(this.popup=new k_(this.editor,{items:this.options.popup.items}))}},{key:"execute",value:function(){throw new Error("Method not implemented.")}},{key:"destroy",value:function(){var e;(e=this.popup)===null||e===void 0||e.destroy(),this.editor.off("keydown:slash",this.onSlash),this.editor.off("parse:value",this.paserValue)}}],[{key:"pluginName",get:function(){return"toolbar"}}]),t}(Rr);Ad.install=function(b){b.component(Ad.name,Ad)};var bn={exports:{}};(function(b,u){(function(t,n){b.exports=n()})(ca,function(){var t=navigator.userAgent,n=navigator.platform,e=/gecko\/\d/i.test(t),r=/MSIE \d/.test(t),i=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(t),a=/Edge\/(\d+)/.exec(t),o=r||i||a,l=o&&(r?document.documentMode||6:+(a||i)[1]),c=!a&&/WebKit\//.test(t),d=c&&/Qt\/\d+\.\d+/.test(t),v=!a&&/Chrome\//.test(t),h=/Opera\//.test(t),g=/Apple Computer/.test(navigator.vendor),w=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(t),x=/PhantomJS/.test(t),_=g&&(/Mobile\/\w+/.test(t)||navigator.maxTouchPoints>2),E=/Android/.test(t),M=_||E||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(t),T=_||/Mac/.test(n),S=/\bCrOS\b/.test(t),D=/win/i.test(n),I=h&&t.match(/Version\/(\d*\.\d*)/);I&&(I=Number(I[1])),I&&I>=15&&(h=!1,c=!0);var P=T&&(d||h&&(I==null||I<12.11)),B=e||o&&l>=9;function $(s){return new RegExp("(^|\\s)"+s+"(?:$|\\s)\\s*")}var q=function(s,f){var y=s.className,m=$(f).exec(y);if(m){var C=y.slice(m.index+m[0].length);s.className=y.slice(0,m.index)+(C?m[1]+C:"")}};function G(s){for(var f=s.childNodes.length;f>0;--f)s.removeChild(s.firstChild);return s}function H(s,f){return G(s).appendChild(f)}function z(s,f,y,m){var C=document.createElement(s);if(y&&(C.className=y),m&&(C.style.cssText=m),typeof f=="string")C.appendChild(document.createTextNode(f));else if(f)for(var N=0;N<f.length;++N)C.appendChild(f[N]);return C}function O(s,f,y,m){var C=z(s,f,y,m);return C.setAttribute("role","presentation"),C}var Q;document.createRange?Q=function(s,f,y,m){var C=document.createRange();return C.setEnd(m||s,y),C.setStart(s,f),C}:Q=function(s,f,y){var m=document.body.createTextRange();try{m.moveToElementText(s.parentNode)}catch{return m}return m.collapse(!0),m.moveEnd("character",y),m.moveStart("character",f),m};function ie(s,f){if(f.nodeType==3&&(f=f.parentNode),s.contains)return s.contains(f);do if(f.nodeType==11&&(f=f.host),f==s)return!0;while(f=f.parentNode)}function L(){var s;try{s=document.activeElement}catch{s=document.body||null}for(;s&&s.shadowRoot&&s.shadowRoot.activeElement;)s=s.shadowRoot.activeElement;return s}function F(s,f){var y=s.className;$(f).test(y)||(s.className+=(y?" ":"")+f)}function X(s,f){for(var y=s.split(" "),m=0;m<y.length;m++)y[m]&&!$(y[m]).test(f)&&(f+=" "+y[m]);return f}var se=function(s){s.select()};_?se=function(s){s.selectionStart=0,s.selectionEnd=s.value.length}:o&&(se=function(s){try{s.select()}catch{}});function Y(s){var f=Array.prototype.slice.call(arguments,1);return function(){return s.apply(null,f)}}function j(s,f,y){f||(f={});for(var m in s)s.hasOwnProperty(m)&&(y!==!1||!f.hasOwnProperty(m))&&(f[m]=s[m]);return f}function fe(s,f,y,m,C){f==null&&(f=s.search(/[^\s\u00a0]/),f==-1&&(f=s.length));for(var N=m||0,R=C||0;;){var U=s.indexOf("	",N);if(U<0||U>=f)return R+(f-N);R+=U-N,R+=y-R%y,N=U+1}}var ve=function(){this.id=null,this.f=null,this.time=0,this.handler=Y(this.onTimeout,this)};ve.prototype.onTimeout=function(s){s.id=0,s.time<=+new Date?s.f():setTimeout(s.handler,s.time-+new Date)},ve.prototype.set=function(s,f){this.f=f;var y=+new Date+s;(!this.id||y<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,s),this.time=y)};function ae(s,f){for(var y=0;y<s.length;++y)if(s[y]==f)return y;return-1}var J=50,pe={toString:function(){return"CodeMirror.Pass"}},Ee={scroll:!1},Le={origin:"*mouse"},Re={origin:"+move"};function Ce(s,f,y){for(var m=0,C=0;;){var N=s.indexOf("	",m);N==-1&&(N=s.length);var R=N-m;if(N==s.length||C+R>=f)return m+Math.min(R,f-C);if(C+=N-m,C+=y-C%y,m=N+1,C>=f)return m}}var ne=[""];function me(s){for(;ne.length<=s;)ne.push(ue(ne)+" ");return ne[s]}function ue(s){return s[s.length-1]}function Te(s,f){for(var y=[],m=0;m<s.length;m++)y[m]=f(s[m],m);return y}function ze(s,f,y){for(var m=0,C=y(f);m<s.length&&y(s[m])<=C;)m++;s.splice(m,0,f)}function We(){}function et(s,f){var y;return Object.create?y=Object.create(s):(We.prototype=s,y=new We),f&&j(f,y),y}var Ke=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Ge(s){return/\w/.test(s)||s>"\x80"&&(s.toUpperCase()!=s.toLowerCase()||Ke.test(s))}function _e(s,f){return f?f.source.indexOf("\\w")>-1&&Ge(s)?!0:f.test(s):Ge(s)}function Ue(s){for(var f in s)if(s.hasOwnProperty(f)&&s[f])return!1;return!0}var Ae=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function ot(s){return s.charCodeAt(0)>=768&&Ae.test(s)}function nt(s,f,y){for(;(y<0?f>0:f<s.length)&&ot(s.charAt(f));)f+=y;return f}function wt(s,f,y){for(var m=f>y?-1:1;;){if(f==y)return f;var C=(f+y)/2,N=m<0?Math.ceil(C):Math.floor(C);if(N==f)return s(N)?f:y;s(N)?y=N:f=N+m}}function bt(s,f,y,m){if(!s)return m(f,y,"ltr",0);for(var C=!1,N=0;N<s.length;++N){var R=s[N];(R.from<y&&R.to>f||f==y&&R.to==f)&&(m(Math.max(R.from,f),Math.min(R.to,y),R.level==1?"rtl":"ltr",N),C=!0)}C||m(f,y,"ltr")}var Et=null;function Dt(s,f,y){var m;Et=null;for(var C=0;C<s.length;++C){var N=s[C];if(N.from<f&&N.to>f)return C;N.to==f&&(N.from!=N.to&&y=="before"?m=C:Et=C),N.from==f&&(N.from!=N.to&&y!="before"?m=C:Et=C)}return m!=null?m:Et}var wn=function(){var s="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",f="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function y(ee){return ee<=247?s.charAt(ee):1424<=ee&&ee<=1524?"R":1536<=ee&&ee<=1785?f.charAt(ee-1536):1774<=ee&&ee<=2220?"r":8192<=ee&&ee<=8203?"w":ee==8204?"b":"L"}var m=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,C=/[stwN]/,N=/[LRr]/,R=/[Lb1n]/,U=/[1n]/;function Z(ee,he,ke){this.level=ee,this.from=he,this.to=ke}return function(ee,he){var ke=he=="ltr"?"L":"R";if(ee.length==0||he=="ltr"&&!m.test(ee))return!1;for(var Ne=ee.length,Me=[],Pe=0;Pe<Ne;++Pe)Me.push(y(ee.charCodeAt(Pe)));for(var Ze=0,it=ke;Ze<Ne;++Ze){var ut=Me[Ze];ut=="m"?Me[Ze]=it:it=ut}for(var pt=0,dt=ke;pt<Ne;++pt){var kt=Me[pt];kt=="1"&&dt=="r"?Me[pt]="n":N.test(kt)&&(dt=kt,kt=="r"&&(Me[pt]="R"))}for(var It=1,Nt=Me[0];It<Ne-1;++It){var en=Me[It];en=="+"&&Nt=="1"&&Me[It+1]=="1"?Me[It]="1":en==","&&Nt==Me[It+1]&&(Nt=="1"||Nt=="n")&&(Me[It]=Nt),Nt=en}for(var Bn=0;Bn<Ne;++Bn){var Lr=Me[Bn];if(Lr==",")Me[Bn]="N";else if(Lr=="%"){var Qn=void 0;for(Qn=Bn+1;Qn<Ne&&Me[Qn]=="%";++Qn);for(var Ci=Bn&&Me[Bn-1]=="!"||Qn<Ne&&Me[Qn]=="1"?"1":"N",Ei=Bn;Ei<Qn;++Ei)Me[Ei]=Ci;Bn=Qn-1}}for(var _r=0,Jr=ke;_r<Ne;++_r){var Wr=Me[_r];Jr=="L"&&Wr=="1"?Me[_r]="L":N.test(Wr)&&(Jr=Wr)}for(var $n=0;$n<Ne;++$n)if(C.test(Me[$n])){var nr=void 0;for(nr=$n+1;nr<Ne&&C.test(Me[nr]);++nr);for(var yr=($n?Me[$n-1]:ke)=="L",_i=(nr<Ne?Me[nr]:ke)=="L",du=yr==_i?yr?"L":"R":ke,As=$n;As<nr;++As)Me[As]=du;$n=nr-1}for(var fi=[],yo,Ur=0;Ur<Ne;)if(R.test(Me[Ur])){var ff=Ur;for(++Ur;Ur<Ne&&R.test(Me[Ur]);++Ur);fi.push(new Z(0,ff,Ur))}else{var Fo=Ur,ll=fi.length,ul=he=="rtl"?1:0;for(++Ur;Ur<Ne&&Me[Ur]!="L";++Ur);for(var Si=Fo;Si<Ur;)if(U.test(Me[Si])){Fo<Si&&(fi.splice(ll,0,new Z(1,Fo,Si)),ll+=ul);var cu=Si;for(++Si;Si<Ur&&U.test(Me[Si]);++Si);fi.splice(ll,0,new Z(2,cu,Si)),ll+=ul,Fo=Si}else++Si;Fo<Ur&&fi.splice(ll,0,new Z(1,Fo,Ur))}return he=="ltr"&&(fi[0].level==1&&(yo=ee.match(/^\s+/))&&(fi[0].from=yo[0].length,fi.unshift(new Z(0,0,yo[0].length))),ue(fi).level==1&&(yo=ee.match(/\s+$/))&&(ue(fi).to-=yo[0].length,fi.push(new Z(0,Ne-yo[0].length,Ne)))),he=="rtl"?fi.reverse():fi}}();function zn(s,f){var y=s.order;return y==null&&(y=s.order=wn(s.text,f)),y}var kr=[],vt=function(s,f,y){if(s.addEventListener)s.addEventListener(f,y,!1);else if(s.attachEvent)s.attachEvent("on"+f,y);else{var m=s._handlers||(s._handlers={});m[f]=(m[f]||kr).concat(y)}};function bi(s,f){return s._handlers&&s._handlers[f]||kr}function tr(s,f,y){if(s.removeEventListener)s.removeEventListener(f,y,!1);else if(s.detachEvent)s.detachEvent("on"+f,y);else{var m=s._handlers,C=m&&m[f];if(C){var N=ae(C,y);N>-1&&(m[f]=C.slice(0,N).concat(C.slice(N+1)))}}}function Tt(s,f){var y=bi(s,f);if(!!y.length)for(var m=Array.prototype.slice.call(arguments,2),C=0;C<y.length;++C)y[C].apply(null,m)}function Dn(s,f,y){return typeof f=="string"&&(f={type:f,preventDefault:function(){this.defaultPrevented=!0}}),Tt(s,y||f.type,s,f),Zr(f)||f.codemirrorIgnore}function Rn(s){var f=s._handlers&&s._handlers.cursorActivity;if(!!f)for(var y=s.curOp.cursorActivityHandlers||(s.curOp.cursorActivityHandlers=[]),m=0;m<f.length;++m)ae(y,f[m])==-1&&y.push(f[m])}function pn(s,f){return bi(s,f).length>0}function sr(s){s.prototype.on=function(f,y){vt(this,f,y)},s.prototype.off=function(f,y){tr(this,f,y)}}function dr(s){s.preventDefault?s.preventDefault():s.returnValue=!1}function ha(s){s.stopPropagation?s.stopPropagation():s.cancelBubble=!0}function Zr(s){return s.defaultPrevented!=null?s.defaultPrevented:s.returnValue==!1}function ji(s){dr(s),ha(s)}function Wt(s){return s.target||s.srcElement}function Ut(s){var f=s.which;return f==null&&(s.button&1?f=1:s.button&2?f=3:s.button&4&&(f=2)),T&&s.ctrlKey&&f==1&&(f=3),f}var In=function(){if(o&&l<9)return!1;var s=z("div");return"draggable"in s||"dragDrop"in s}(),lr;function yi(s){if(lr==null){var f=z("span","\u200B");H(s,z("span",[f,document.createTextNode("x")])),s.firstChild.offsetHeight!=0&&(lr=f.offsetWidth<=1&&f.offsetHeight>2&&!(o&&l<8))}var y=lr?z("span","\u200B"):z("span","\xA0",null,"display: inline-block; width: 1px; margin-right: -1px");return y.setAttribute("cm-text",""),y}var Ni;function Yr(s){if(Ni!=null)return Ni;var f=H(s,document.createTextNode("A\u062EA")),y=Q(f,0,1).getBoundingClientRect(),m=Q(f,1,2).getBoundingClientRect();return G(s),!y||y.left==y.right?!1:Ni=m.right-y.right<3}var ri=`

b`.split(/\n/).length!=3?function(s){for(var f=0,y=[],m=s.length;f<=m;){var C=s.indexOf(`
`,f);C==-1&&(C=s.length);var N=s.slice(f,s.charAt(C-1)=="\r"?C-1:C),R=N.indexOf("\r");R!=-1?(y.push(N.slice(0,R)),f+=R+1):(y.push(N),f=C+1)}return y}:function(s){return s.split(/\r\n?|\n/)},Ia=window.getSelection?function(s){try{return s.selectionStart!=s.selectionEnd}catch{return!1}}:function(s){var f;try{f=s.ownerDocument.selection.createRange()}catch{}return!f||f.parentElement()!=s?!1:f.compareEndPoints("StartToEnd",f)!=0},Fs=function(){var s=z("div");return"oncopy"in s?!0:(s.setAttribute("oncopy","return;"),typeof s.oncopy=="function")}(),To=null;function La(s){if(To!=null)return To;var f=H(s,z("span","x")),y=f.getBoundingClientRect(),m=Q(f,0,1).getBoundingClientRect();return To=Math.abs(y.left-m.left)>1}var ii={},Zn={};function va(s,f){arguments.length>2&&(f.dependencies=Array.prototype.slice.call(arguments,2)),ii[s]=f}function cr(s,f){Zn[s]=f}function xr(s){if(typeof s=="string"&&Zn.hasOwnProperty(s))s=Zn[s];else if(s&&typeof s.name=="string"&&Zn.hasOwnProperty(s.name)){var f=Zn[s.name];typeof f=="string"&&(f={name:f}),s=et(f,s),s.name=f.name}else{if(typeof s=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(s))return xr("application/xml");if(typeof s=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(s))return xr("application/json")}return typeof s=="string"?{name:s}:s||{name:"null"}}function Ki(s,f){f=xr(f);var y=ii[f.name];if(!y)return Ki(s,"text/plain");var m=y(s,f);if(Nr.hasOwnProperty(f.name)){var C=Nr[f.name];for(var N in C)!C.hasOwnProperty(N)||(m.hasOwnProperty(N)&&(m["_"+N]=m[N]),m[N]=C[N])}if(m.name=f.name,f.helperType&&(m.helperType=f.helperType),f.modeProps)for(var R in f.modeProps)m[R]=f.modeProps[R];return m}var Nr={};function Fr(s,f){var y=Nr.hasOwnProperty(s)?Nr[s]:Nr[s]={};j(f,y)}function Br(s,f){if(f===!0)return f;if(s.copyState)return s.copyState(f);var y={};for(var m in f){var C=f[m];C instanceof Array&&(C=C.concat([])),y[m]=C}return y}function Vi(s,f){for(var y;s.innerMode&&(y=s.innerMode(f),!(!y||y.mode==s));)f=y.state,s=y.mode;return y||{mode:s,state:f}}function pa(s,f,y){return s.startState?s.startState(f,y):!0}var Fn=function(s,f,y){this.pos=this.start=0,this.string=s,this.tabSize=f||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=y};Fn.prototype.eol=function(){return this.pos>=this.string.length},Fn.prototype.sol=function(){return this.pos==this.lineStart},Fn.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Fn.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Fn.prototype.eat=function(s){var f=this.string.charAt(this.pos),y;if(typeof s=="string"?y=f==s:y=f&&(s.test?s.test(f):s(f)),y)return++this.pos,f},Fn.prototype.eatWhile=function(s){for(var f=this.pos;this.eat(s););return this.pos>f},Fn.prototype.eatSpace=function(){for(var s=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>s},Fn.prototype.skipToEnd=function(){this.pos=this.string.length},Fn.prototype.skipTo=function(s){var f=this.string.indexOf(s,this.pos);if(f>-1)return this.pos=f,!0},Fn.prototype.backUp=function(s){this.pos-=s},Fn.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=fe(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?fe(this.string,this.lineStart,this.tabSize):0)},Fn.prototype.indentation=function(){return fe(this.string,null,this.tabSize)-(this.lineStart?fe(this.string,this.lineStart,this.tabSize):0)},Fn.prototype.match=function(s,f,y){if(typeof s=="string"){var m=function(R){return y?R.toLowerCase():R},C=this.string.substr(this.pos,s.length);if(m(C)==m(s))return f!==!1&&(this.pos+=s.length),!0}else{var N=this.string.slice(this.pos).match(s);return N&&N.index>0?null:(N&&f!==!1&&(this.pos+=N[0].length),N)}},Fn.prototype.current=function(){return this.string.slice(this.start,this.pos)},Fn.prototype.hideFirstChars=function(s,f){this.lineStart+=s;try{return f()}finally{this.lineStart-=s}},Fn.prototype.lookAhead=function(s){var f=this.lineOracle;return f&&f.lookAhead(s)},Fn.prototype.baseToken=function(){var s=this.lineOracle;return s&&s.baseToken(this.pos)};function Ct(s,f){if(f-=s.first,f<0||f>=s.size)throw new Error("There is no line "+(f+s.first)+" in the document.");for(var y=s;!y.lines;)for(var m=0;;++m){var C=y.children[m],N=C.chunkSize();if(f<N){y=C;break}f-=N}return y.lines[f]}function Pr(s,f,y){var m=[],C=f.line;return s.iter(f.line,y.line+1,function(N){var R=N.text;C==y.line&&(R=R.slice(0,y.ch)),C==f.line&&(R=R.slice(f.ch)),m.push(R),++C}),m}function ro(s,f,y){var m=[];return s.iter(f,y,function(C){m.push(C.text)}),m}function Hr(s,f){var y=f-s.height;if(y)for(var m=s;m;m=m.parent)m.height+=y}function hn(s){if(s.parent==null)return null;for(var f=s.parent,y=ae(f.lines,s),m=f.parent;m;f=m,m=m.parent)for(var C=0;m.children[C]!=f;++C)y+=m.children[C].chunkSize();return y+f.first}function Cr(s,f){var y=s.first;e:do{for(var m=0;m<s.children.length;++m){var C=s.children[m],N=C.height;if(f<N){s=C;continue e}f-=N,y+=C.chunkSize()}return y}while(!s.lines);for(var R=0;R<s.lines.length;++R){var U=s.lines[R],Z=U.height;if(f<Z)break;f-=Z}return y+R}function ga(s,f){return f>=s.first&&f<s.first+s.size}function Wi(s,f){return String(s.lineNumberFormatter(f+s.firstLineNumber))}function Ve(s,f,y){if(y===void 0&&(y=null),!(this instanceof Ve))return new Ve(s,f,y);this.line=s,this.ch=f,this.sticky=y}function te(s,f){return s.line-f.line||s.ch-f.ch}function we(s,f){return s.sticky==f.sticky&&te(s,f)==0}function je(s){return Ve(s.line,s.ch)}function Je(s,f){return te(s,f)<0?f:s}function Ft(s,f){return te(s,f)<0?s:f}function gt(s,f){return Math.max(s.first,Math.min(f,s.first+s.size-1))}function st(s,f){if(f.line<s.first)return Ve(s.first,0);var y=s.first+s.size-1;return f.line>y?Ve(y,Ct(s,y).text.length):Yn(f,Ct(s,f.line).text.length)}function Yn(s,f){var y=s.ch;return y==null||y>f?Ve(s.line,f):y<0?Ve(s.line,0):s}function Wn(s,f){for(var y=[],m=0;m<f.length;m++)y[m]=st(s,f[m]);return y}var Di=function(s,f){this.state=s,this.lookAhead=f},Kr=function(s,f,y,m){this.state=f,this.doc=s,this.line=y,this.maxLookAhead=m||0,this.baseTokens=null,this.baseTokenPos=1};Kr.prototype.lookAhead=function(s){var f=this.doc.getLine(this.line+s);return f!=null&&s>this.maxLookAhead&&(this.maxLookAhead=s),f},Kr.prototype.baseToken=function(s){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=s;)this.baseTokenPos+=2;var f=this.baseTokens[this.baseTokenPos+1];return{type:f&&f.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-s}},Kr.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Kr.fromSaved=function(s,f,y){return f instanceof Di?new Kr(s,Br(s.mode,f.state),y,f.lookAhead):new Kr(s,Br(s.mode,f),y)},Kr.prototype.save=function(s){var f=s!==!1?Br(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Di(f,this.maxLookAhead):f};function Oa(s,f,y,m){var C=[s.state.modeGen],N={};Dl(s,f.text,s.doc.mode,y,function(ee,he){return C.push(ee,he)},N,m);for(var R=y.state,U=function(ee){y.baseTokens=C;var he=s.state.overlays[ee],ke=1,Ne=0;y.state=!0,Dl(s,f.text,he.mode,y,function(Me,Pe){for(var Ze=ke;Ne<Me;){var it=C[ke];it>Me&&C.splice(ke,1,Me,C[ke+1],it),ke+=2,Ne=Math.min(Me,it)}if(!!Pe)if(he.opaque)C.splice(Ze,ke-Ze,Me,"overlay "+Pe),ke=Ze+2;else for(;Ze<ke;Ze+=2){var ut=C[Ze+1];C[Ze+1]=(ut?ut+" ":"")+"overlay "+Pe}},N),y.state=R,y.baseTokens=null,y.baseTokenPos=1},Z=0;Z<s.state.overlays.length;++Z)U(Z);return{styles:C,classes:N.bgClass||N.textClass?N:null}}function Bs(s,f,y){if(!f.styles||f.styles[0]!=s.state.modeGen){var m=za(s,hn(f)),C=f.text.length>s.options.maxHighlightLength&&Br(s.doc.mode,m.state),N=Oa(s,f,m);C&&(m.state=C),f.stateAfter=m.save(!C),f.styles=N.styles,N.classes?f.styleClasses=N.classes:f.styleClasses&&(f.styleClasses=null),y===s.doc.highlightFrontier&&(s.doc.modeFrontier=Math.max(s.doc.modeFrontier,++s.doc.highlightFrontier))}return f.styles}function za(s,f,y){var m=s.doc,C=s.display;if(!m.mode.startState)return new Kr(m,!0,f);var N=zd(s,f,y),R=N>m.first&&Ct(m,N-1).stateAfter,U=R?Kr.fromSaved(m,R,N):new Kr(m,pa(m.mode),N);return m.iter(N,f,function(Z){io(s,Z.text,U);var ee=U.line;Z.stateAfter=ee==f-1||ee%5==0||ee>=C.viewFrom&&ee<C.viewTo?U.save():null,U.nextLine()}),y&&(m.modeFrontier=U.line),U}function io(s,f,y,m){var C=s.doc.mode,N=new Fn(f,s.options.tabSize,y);for(N.start=N.pos=m||0,f==""&&Ps(C,y.state);!N.eol();)Al(C,N,y.state),N.start=N.pos}function Ps(s,f){if(s.blankLine)return s.blankLine(f);if(!!s.innerMode){var y=Vi(s,f);if(y.mode.blankLine)return y.mode.blankLine(y.state)}}function Al(s,f,y,m){for(var C=0;C<10;C++){m&&(m[0]=Vi(s,y).mode);var N=s.token(f,y);if(f.pos>f.start)return N}throw new Error("Mode "+s.name+" failed to advance stream.")}var Nl=function(s,f,y){this.start=s.start,this.end=s.pos,this.string=s.current(),this.type=f||null,this.state=y};function Hs(s,f,y,m){var C=s.doc,N=C.mode,R;f=st(C,f);var U=Ct(C,f.line),Z=za(s,f.line,y),ee=new Fn(U.text,s.options.tabSize,Z),he;for(m&&(he=[]);(m||ee.pos<f.ch)&&!ee.eol();)ee.start=ee.pos,R=Al(N,ee,Z.state),m&&he.push(new Nl(ee,R,Br(C.mode,Z.state)));return m?he:new Nl(ee,R,Z.state)}function Ra(s,f){if(s)for(;;){var y=s.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!y)break;s=s.slice(0,y.index)+s.slice(y.index+y[0].length);var m=y[1]?"bgClass":"textClass";f[m]==null?f[m]=y[2]:new RegExp("(?:^|\\s)"+y[2]+"(?:$|\\s)").test(f[m])||(f[m]+=" "+y[2])}return s}function Dl(s,f,y,m,C,N,R){var U=y.flattenSpans;U==null&&(U=s.options.flattenSpans);var Z=0,ee=null,he=new Fn(f,s.options.tabSize,m),ke,Ne=s.options.addModeClass&&[null];for(f==""&&Ra(Ps(y,m.state),N);!he.eol();){if(he.pos>s.options.maxHighlightLength?(U=!1,R&&io(s,f,m,he.pos),he.pos=f.length,ke=null):ke=Ra(Al(y,he,m.state,Ne),N),Ne){var Me=Ne[0].name;Me&&(ke="m-"+(ke?Me+" "+ke:Me))}if(!U||ee!=ke){for(;Z<he.start;)Z=Math.min(he.start,Z+5e3),C(Z,ee);ee=ke}he.start=he.pos}for(;Z<he.pos;){var Pe=Math.min(he.pos,Z+5e3);C(Pe,ee),Z=Pe}}function zd(s,f,y){for(var m,C,N=s.doc,R=y?-1:f-(s.doc.mode.innerMode?1e3:100),U=f;U>R;--U){if(U<=N.first)return N.first;var Z=Ct(N,U-1),ee=Z.stateAfter;if(ee&&(!y||U+(ee instanceof Di?ee.lookAhead:0)<=N.modeFrontier))return U;var he=fe(Z.text,null,s.options.tabSize);(C==null||m>he)&&(C=U-1,m=he)}return C}function Rd(s,f){if(s.modeFrontier=Math.min(s.modeFrontier,f),!(s.highlightFrontier<f-10)){for(var y=s.first,m=f-1;m>y;m--){var C=Ct(s,m).stateAfter;if(C&&(!(C instanceof Di)||m+C.lookAhead<f)){y=m+1;break}}s.highlightFrontier=Math.min(s.highlightFrontier,y)}}var js=!1,Qi=!1;function Tu(){js=!0}function Au(){Qi=!0}function Il(s,f,y){this.marker=s,this.from=f,this.to=y}function os(s,f){if(s)for(var y=0;y<s.length;++y){var m=s[y];if(m.marker==f)return m}}function Ws(s,f){for(var y,m=0;m<s.length;++m)s[m]!=f&&(y||(y=[])).push(s[m]);return y}function Fd(s,f,y){var m=y&&window.WeakSet&&(y.markedSpans||(y.markedSpans=new WeakSet));m&&m.has(s.markedSpans)?s.markedSpans.push(f):(s.markedSpans=s.markedSpans?s.markedSpans.concat([f]):[f],m&&m.add(s.markedSpans)),f.marker.attachLine(s)}function ao(s,f,y){var m;if(s)for(var C=0;C<s.length;++C){var N=s[C],R=N.marker,U=N.from==null||(R.inclusiveLeft?N.from<=f:N.from<f);if(U||N.from==f&&R.type=="bookmark"&&(!y||!N.marker.insertLeft)){var Z=N.to==null||(R.inclusiveRight?N.to>=f:N.to>f);(m||(m=[])).push(new Il(R,N.from,Z?null:N.to))}}return m}function Ll(s,f,y){var m;if(s)for(var C=0;C<s.length;++C){var N=s[C],R=N.marker,U=N.to==null||(R.inclusiveRight?N.to>=f:N.to>f);if(U||N.from==f&&R.type=="bookmark"&&(!y||N.marker.insertLeft)){var Z=N.from==null||(R.inclusiveLeft?N.from<=f:N.from<f);(m||(m=[])).push(new Il(R,Z?null:N.from-f,N.to==null?null:N.to-f))}}return m}function Us(s,f){if(f.full)return null;var y=ga(s,f.from.line)&&Ct(s,f.from.line).markedSpans,m=ga(s,f.to.line)&&Ct(s,f.to.line).markedSpans;if(!y&&!m)return null;var C=f.from.ch,N=f.to.ch,R=te(f.from,f.to)==0,U=ao(y,C,R),Z=Ll(m,N,R),ee=f.text.length==1,he=ue(f.text).length+(ee?C:0);if(U)for(var ke=0;ke<U.length;++ke){var Ne=U[ke];if(Ne.to==null){var Me=os(Z,Ne.marker);Me?ee&&(Ne.to=Me.to==null?null:Me.to+he):Ne.to=C}}if(Z)for(var Pe=0;Pe<Z.length;++Pe){var Ze=Z[Pe];if(Ze.to!=null&&(Ze.to+=he),Ze.from==null){var it=os(U,Ze.marker);it||(Ze.from=he,ee&&(U||(U=[])).push(Ze))}else Ze.from+=he,ee&&(U||(U=[])).push(Ze)}U&&(U=Nu(U)),Z&&Z!=U&&(Z=Nu(Z));var ut=[U];if(!ee){var pt=f.text.length-2,dt;if(pt>0&&U)for(var kt=0;kt<U.length;++kt)U[kt].to==null&&(dt||(dt=[])).push(new Il(U[kt].marker,null,null));for(var It=0;It<pt;++It)ut.push(dt);ut.push(Z)}return ut}function Nu(s){for(var f=0;f<s.length;++f){var y=s[f];y.from!=null&&y.from==y.to&&y.marker.clearWhenEmpty!==!1&&s.splice(f--,1)}return s.length?s:null}function Du(s,f,y){var m=null;if(s.iter(f.line,y.line+1,function(Me){if(Me.markedSpans)for(var Pe=0;Pe<Me.markedSpans.length;++Pe){var Ze=Me.markedSpans[Pe].marker;Ze.readOnly&&(!m||ae(m,Ze)==-1)&&(m||(m=[])).push(Ze)}}),!m)return null;for(var C=[{from:f,to:y}],N=0;N<m.length;++N)for(var R=m[N],U=R.find(0),Z=0;Z<C.length;++Z){var ee=C[Z];if(!(te(ee.to,U.from)<0||te(ee.from,U.to)>0)){var he=[Z,1],ke=te(ee.from,U.from),Ne=te(ee.to,U.to);(ke<0||!R.inclusiveLeft&&!ke)&&he.push({from:ee.from,to:U.from}),(Ne>0||!R.inclusiveRight&&!Ne)&&he.push({from:U.to,to:ee.to}),C.splice.apply(C,he),Z+=he.length-3}}return C}function Bd(s){var f=s.markedSpans;if(!!f){for(var y=0;y<f.length;++y)f[y].marker.detachLine(s);s.markedSpans=null}}function Pd(s,f){if(!!f){for(var y=0;y<f.length;++y)f[y].marker.attachLine(s);s.markedSpans=f}}function Ol(s){return s.inclusiveLeft?-1:0}function zl(s){return s.inclusiveRight?1:0}function Iu(s,f){var y=s.lines.length-f.lines.length;if(y!=0)return y;var m=s.find(),C=f.find(),N=te(m.from,C.from)||Ol(s)-Ol(f);if(N)return-N;var R=te(m.to,C.to)||zl(s)-zl(f);return R||f.id-s.id}function Kn(s,f){var y=Qi&&s.markedSpans,m;if(y)for(var C=void 0,N=0;N<y.length;++N)C=y[N],C.marker.collapsed&&(f?C.from:C.to)==null&&(!m||Iu(m,C.marker)<0)&&(m=C.marker);return m}function Un(s){return Kn(s,!0)}function Rl(s){return Kn(s,!1)}function Ao(s,f){var y=Qi&&s.markedSpans,m;if(y)for(var C=0;C<y.length;++C){var N=y[C];N.marker.collapsed&&(N.from==null||N.from<f)&&(N.to==null||N.to>f)&&(!m||Iu(m,N.marker)<0)&&(m=N.marker)}return m}function Lu(s,f,y,m,C){var N=Ct(s,f),R=Qi&&N.markedSpans;if(R)for(var U=0;U<R.length;++U){var Z=R[U];if(!!Z.marker.collapsed){var ee=Z.marker.find(0),he=te(ee.from,y)||Ol(Z.marker)-Ol(C),ke=te(ee.to,m)||zl(Z.marker)-zl(C);if(!(he>=0&&ke<=0||he<=0&&ke>=0)&&(he<=0&&(Z.marker.inclusiveRight&&C.inclusiveLeft?te(ee.to,y)>=0:te(ee.to,y)>0)||he>=0&&(Z.marker.inclusiveRight&&C.inclusiveLeft?te(ee.from,m)<=0:te(ee.from,m)<0)))return!0}}}function Dr(s){for(var f;f=Un(s);)s=f.find(-1,!0).line;return s}function Ui(s){for(var f;f=Rl(s);)s=f.find(1,!0).line;return s}function No(s){for(var f,y;f=Rl(s);)s=f.find(1,!0).line,(y||(y=[])).push(s);return y}function ss(s,f){var y=Ct(s,f),m=Dr(y);return y==m?f:hn(m)}function Do(s,f){if(f>s.lastLine())return f;var y=Ct(s,f),m;if(!ir(s,y))return f;for(;m=Rl(y);)y=m.find(1,!0).line;return hn(y)+1}function ir(s,f){var y=Qi&&f.markedSpans;if(y){for(var m=void 0,C=0;C<y.length;++C)if(m=y[C],!!m.marker.collapsed){if(m.from==null)return!0;if(!m.marker.widgetNode&&m.from==0&&m.marker.inclusiveLeft&&qi(s,f,m))return!0}}}function qi(s,f,y){if(y.to==null){var m=y.marker.find(1,!0);return qi(s,m.line,os(m.line.markedSpans,y.marker))}if(y.marker.inclusiveRight&&y.to==f.text.length)return!0;for(var C=void 0,N=0;N<f.markedSpans.length;++N)if(C=f.markedSpans[N],C.marker.collapsed&&!C.marker.widgetNode&&C.from==y.to&&(C.to==null||C.to!=y.from)&&(C.marker.inclusiveLeft||y.marker.inclusiveRight)&&qi(s,f,C))return!0}function qn(s){s=Dr(s);for(var f=0,y=s.parent,m=0;m<y.lines.length;++m){var C=y.lines[m];if(C==s)break;f+=C.height}for(var N=y.parent;N;y=N,N=y.parent)for(var R=0;R<N.children.length;++R){var U=N.children[R];if(U==y)break;f+=U.height}return f}function ls(s){if(s.height==0)return 0;for(var f=s.text.length,y,m=s;y=Un(m);){var C=y.find(0,!0);m=C.from.line,f+=C.from.ch-C.to.ch}for(m=s;y=Rl(m);){var N=y.find(0,!0);f-=m.text.length-N.from.ch,m=N.to.line,f+=m.text.length-N.to.ch}return f}function qs(s){var f=s.display,y=s.doc;f.maxLine=Ct(y,y.first),f.maxLineLength=ls(f.maxLine),f.maxLineChanged=!0,y.iter(function(m){var C=ls(m);C>f.maxLineLength&&(f.maxLineLength=C,f.maxLine=m)})}var pr=function(s,f,y){this.text=s,Pd(this,f),this.height=y?y(this):1};pr.prototype.lineNo=function(){return hn(this)},sr(pr);function $s(s,f,y,m){s.text=f,s.stateAfter&&(s.stateAfter=null),s.styles&&(s.styles=null),s.order!=null&&(s.order=null),Bd(s),Pd(s,y);var C=m?m(s):1;C!=s.height&&Hr(s,C)}function Ou(s){s.parent=null,Bd(s)}var zu={},oo={};function Fl(s,f){if(!s||/^\s*$/.test(s))return null;var y=f.addModeClass?oo:zu;return y[s]||(y[s]=s.replace(/\S+/g,"cm-$&"))}function ma(s,f){var y=O("span",null,null,c?"padding-right: .1px":null),m={pre:O("pre",[y],"CodeMirror-line"),content:y,col:0,pos:0,cm:s,trailingSpace:!1,splitSpaces:s.getOption("lineWrapping")};f.measure={};for(var C=0;C<=(f.rest?f.rest.length:0);C++){var N=C?f.rest[C-1]:f.line,R=void 0;m.pos=0,m.addToken=Ru,Yr(s.display.measure)&&(R=zn(N,s.doc.direction))&&(m.addToken=Lc(m.addToken,R)),m.map=[];var U=f!=s.display.externalMeasured&&hn(N);Fa(N,m,Bs(s,N,U)),N.styleClasses&&(N.styleClasses.bgClass&&(m.bgClass=X(N.styleClasses.bgClass,m.bgClass||"")),N.styleClasses.textClass&&(m.textClass=X(N.styleClasses.textClass,m.textClass||""))),m.map.length==0&&m.map.push(0,0,m.content.appendChild(yi(s.display.measure))),C==0?(f.measure.map=m.map,f.measure.cache={}):((f.measure.maps||(f.measure.maps=[])).push(m.map),(f.measure.caches||(f.measure.caches=[])).push({}))}if(c){var Z=m.content.lastChild;(/\bcm-tab\b/.test(Z.className)||Z.querySelector&&Z.querySelector(".cm-tab"))&&(m.content.className="cm-tab-wrap-hack")}return Tt(s,"renderLine",s,f.line,m.pre),m.pre.className&&(m.textClass=X(m.pre.className,m.textClass||"")),m}function ai(s){var f=z("span","\u2022","cm-invalidchar");return f.title="\\u"+s.charCodeAt(0).toString(16),f.setAttribute("aria-label",f.title),f}function Ru(s,f,y,m,C,N,R){if(!!f){var U=s.splitSpaces?ar(f,s.trailingSpace):f,Z=s.cm.state.specialChars,ee=!1,he;if(!Z.test(f))s.col+=f.length,he=document.createTextNode(U),s.map.push(s.pos,s.pos+f.length,he),o&&l<9&&(ee=!0),s.pos+=f.length;else{he=document.createDocumentFragment();for(var ke=0;;){Z.lastIndex=ke;var Ne=Z.exec(f),Me=Ne?Ne.index-ke:f.length-ke;if(Me){var Pe=document.createTextNode(U.slice(ke,ke+Me));o&&l<9?he.appendChild(z("span",[Pe])):he.appendChild(Pe),s.map.push(s.pos,s.pos+Me,Pe),s.col+=Me,s.pos+=Me}if(!Ne)break;ke+=Me+1;var Ze=void 0;if(Ne[0]=="	"){var it=s.cm.options.tabSize,ut=it-s.col%it;Ze=he.appendChild(z("span",me(ut),"cm-tab")),Ze.setAttribute("role","presentation"),Ze.setAttribute("cm-text","	"),s.col+=ut}else Ne[0]=="\r"||Ne[0]==`
`?(Ze=he.appendChild(z("span",Ne[0]=="\r"?"\u240D":"\u2424","cm-invalidchar")),Ze.setAttribute("cm-text",Ne[0]),s.col+=1):(Ze=s.cm.options.specialCharPlaceholder(Ne[0]),Ze.setAttribute("cm-text",Ne[0]),o&&l<9?he.appendChild(z("span",[Ze])):he.appendChild(Ze),s.col+=1);s.map.push(s.pos,s.pos+1,Ze),s.pos++}}if(s.trailingSpace=U.charCodeAt(f.length-1)==32,y||m||C||ee||N||R){var pt=y||"";m&&(pt+=m),C&&(pt+=C);var dt=z("span",[he],pt,N);if(R)for(var kt in R)R.hasOwnProperty(kt)&&kt!="style"&&kt!="class"&&dt.setAttribute(kt,R[kt]);return s.content.appendChild(dt)}s.content.appendChild(he)}}function ar(s,f){if(s.length>1&&!/  /.test(s))return s;for(var y=f,m="",C=0;C<s.length;C++){var N=s.charAt(C);N==" "&&y&&(C==s.length-1||s.charCodeAt(C+1)==32)&&(N="\xA0"),m+=N,y=N==" "}return m}function Lc(s,f){return function(y,m,C,N,R,U,Z){C=C?C+" cm-force-border":"cm-force-border";for(var ee=y.pos,he=ee+m.length;;){for(var ke=void 0,Ne=0;Ne<f.length&&(ke=f[Ne],!(ke.to>ee&&ke.from<=ee));Ne++);if(ke.to>=he)return s(y,m,C,N,R,U,Z);s(y,m.slice(0,ke.to-ee),C,N,null,U,Z),N=null,m=m.slice(ke.to-ee),ee=ke.to}}}function Gs(s,f,y,m){var C=!m&&y.widgetNode;C&&s.map.push(s.pos,s.pos+f,C),!m&&s.cm.display.input.needsContentAttribute&&(C||(C=s.content.appendChild(document.createElement("span"))),C.setAttribute("cm-marker",y.id)),C&&(s.cm.display.input.setUneditable(C),s.content.appendChild(C)),s.pos+=f,s.trailingSpace=!1}function Fa(s,f,y){var m=s.markedSpans,C=s.text,N=0;if(!m){for(var R=1;R<y.length;R+=2)f.addToken(f,C.slice(N,N=y[R]),Fl(y[R+1],f.cm.options));return}for(var U=C.length,Z=0,ee=1,he="",ke,Ne,Me=0,Pe,Ze,it,ut,pt;;){if(Me==Z){Pe=Ze=it=Ne="",pt=null,ut=null,Me=1/0;for(var dt=[],kt=void 0,It=0;It<m.length;++It){var Nt=m[It],en=Nt.marker;if(en.type=="bookmark"&&Nt.from==Z&&en.widgetNode)dt.push(en);else if(Nt.from<=Z&&(Nt.to==null||Nt.to>Z||en.collapsed&&Nt.to==Z&&Nt.from==Z)){if(Nt.to!=null&&Nt.to!=Z&&Me>Nt.to&&(Me=Nt.to,Ze=""),en.className&&(Pe+=" "+en.className),en.css&&(Ne=(Ne?Ne+";":"")+en.css),en.startStyle&&Nt.from==Z&&(it+=" "+en.startStyle),en.endStyle&&Nt.to==Me&&(kt||(kt=[])).push(en.endStyle,Nt.to),en.title&&((pt||(pt={})).title=en.title),en.attributes)for(var Bn in en.attributes)(pt||(pt={}))[Bn]=en.attributes[Bn];en.collapsed&&(!ut||Iu(ut.marker,en)<0)&&(ut=Nt)}else Nt.from>Z&&Me>Nt.from&&(Me=Nt.from)}if(kt)for(var Lr=0;Lr<kt.length;Lr+=2)kt[Lr+1]==Me&&(Ze+=" "+kt[Lr]);if(!ut||ut.from==Z)for(var Qn=0;Qn<dt.length;++Qn)Gs(f,0,dt[Qn]);if(ut&&(ut.from||0)==Z){if(Gs(f,(ut.to==null?U+1:ut.to)-Z,ut.marker,ut.from==null),ut.to==null)return;ut.to==Z&&(ut=!1)}}if(Z>=U)break;for(var Ci=Math.min(U,Me);;){if(he){var Ei=Z+he.length;if(!ut){var _r=Ei>Ci?he.slice(0,Ci-Z):he;f.addToken(f,_r,ke?ke+Pe:Pe,it,Z+_r.length==Me?Ze:"",Ne,pt)}if(Ei>=Ci){he=he.slice(Ci-Z),Z=Ci;break}Z=Ei,it=""}he=C.slice(N,N=y[ee++]),ke=Fl(y[ee++],f.cm.options)}}}function Ba(s,f,y){this.line=f,this.rest=No(f),this.size=this.rest?hn(ue(this.rest))-y+1:1,this.node=this.text=null,this.hidden=ir(s,f)}function Pa(s,f,y){for(var m=[],C,N=f;N<y;N=C){var R=new Ba(s.doc,Ct(s.doc,N),N);C=N+R.size,m.push(R)}return m}var kn=null;function Ha(s){kn?kn.ops.push(s):s.ownsGroup=kn={ops:[s],delayedCallbacks:[]}}function Ir(s){var f=s.delayedCallbacks,y=0;do{for(;y<f.length;y++)f[y].call(null);for(var m=0;m<s.ops.length;m++){var C=s.ops[m];if(C.cursorActivityHandlers)for(;C.cursorActivityCalled<C.cursorActivityHandlers.length;)C.cursorActivityHandlers[C.cursorActivityCalled++].call(null,C.cm)}}while(y<f.length)}function us(s,f){var y=s.ownsGroup;if(!!y)try{Ir(y)}finally{kn=null,f(y)}}var ja=null;function gr(s,f){var y=bi(s,f);if(!!y.length){var m=Array.prototype.slice.call(arguments,2),C;kn?C=kn.delayedCallbacks:ja?C=ja:(C=ja=[],setTimeout(ba,0));for(var N=function(U){C.push(function(){return y[U].apply(null,m)})},R=0;R<y.length;++R)N(R)}}function ba(){var s=ja;ja=null;for(var f=0;f<s.length;++f)s[f]()}function Bl(s,f,y,m){for(var C=0;C<f.changes.length;C++){var N=f.changes[C];N=="text"?Fu(s,f):N=="gutter"?ce(s,f,y,m):N=="class"?K(s,f):N=="widget"&&be(s,f,m)}f.changes=null}function so(s){return s.node==s.text&&(s.node=z("div",null,null,"position: relative"),s.text.parentNode&&s.text.parentNode.replaceChild(s.node,s.text),s.node.appendChild(s.text),o&&l<8&&(s.node.style.zIndex=2)),s.node}function Zs(s,f){var y=f.bgClass?f.bgClass+" "+(f.line.bgClass||""):f.line.bgClass;if(y&&(y+=" CodeMirror-linebackground"),f.background)y?f.background.className=y:(f.background.parentNode.removeChild(f.background),f.background=null);else if(y){var m=so(f);f.background=m.insertBefore(z("div",null,y),m.firstChild),s.display.input.setUneditable(f.background)}}function lo(s,f){var y=s.display.externalMeasured;return y&&y.line==f.line?(s.display.externalMeasured=null,f.measure=y.measure,y.built):ma(s,f)}function Fu(s,f){var y=f.text.className,m=lo(s,f);f.text==f.node&&(f.node=m.pre),f.text.parentNode.replaceChild(m.pre,f.text),f.text=m.pre,m.bgClass!=f.bgClass||m.textClass!=f.textClass?(f.bgClass=m.bgClass,f.textClass=m.textClass,K(s,f)):y&&(f.text.className=y)}function K(s,f){Zs(s,f),f.line.wrapClass?so(f).className=f.line.wrapClass:f.node!=f.text&&(f.node.className="");var y=f.textClass?f.textClass+" "+(f.line.textClass||""):f.line.textClass;f.text.className=y||""}function ce(s,f,y,m){if(f.gutter&&(f.node.removeChild(f.gutter),f.gutter=null),f.gutterBackground&&(f.node.removeChild(f.gutterBackground),f.gutterBackground=null),f.line.gutterClass){var C=so(f);f.gutterBackground=z("div",null,"CodeMirror-gutter-background "+f.line.gutterClass,"left: "+(s.options.fixedGutter?m.fixedPos:-m.gutterTotalWidth)+"px; width: "+m.gutterTotalWidth+"px"),s.display.input.setUneditable(f.gutterBackground),C.insertBefore(f.gutterBackground,f.text)}var N=f.line.gutterMarkers;if(s.options.lineNumbers||N){var R=so(f),U=f.gutter=z("div",null,"CodeMirror-gutter-wrapper","left: "+(s.options.fixedGutter?m.fixedPos:-m.gutterTotalWidth)+"px");if(U.setAttribute("aria-hidden","true"),s.display.input.setUneditable(U),R.insertBefore(U,f.text),f.line.gutterClass&&(U.className+=" "+f.line.gutterClass),s.options.lineNumbers&&(!N||!N["CodeMirror-linenumbers"])&&(f.lineNumber=U.appendChild(z("div",Wi(s.options,y),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+m.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+s.display.lineNumInnerWidth+"px"))),N)for(var Z=0;Z<s.display.gutterSpecs.length;++Z){var ee=s.display.gutterSpecs[Z].className,he=N.hasOwnProperty(ee)&&N[ee];he&&U.appendChild(z("div",[he],"CodeMirror-gutter-elt","left: "+m.gutterLeft[ee]+"px; width: "+m.gutterWidth[ee]+"px"))}}}function be(s,f,y){f.alignable&&(f.alignable=null);for(var m=$("CodeMirror-linewidget"),C=f.node.firstChild,N=void 0;C;C=N)N=C.nextSibling,m.test(C.className)&&f.node.removeChild(C);tt(s,f,y)}function ye(s,f,y,m){var C=lo(s,f);return f.text=f.node=C.pre,C.bgClass&&(f.bgClass=C.bgClass),C.textClass&&(f.textClass=C.textClass),K(s,f),ce(s,f,y,m),tt(s,f,m),f.node}function tt(s,f,y){if(at(s,f.line,f,y,!0),f.rest)for(var m=0;m<f.rest.length;m++)at(s,f.rest[m],f,y,!1)}function at(s,f,y,m,C){if(!!f.widgets)for(var N=so(y),R=0,U=f.widgets;R<U.length;++R){var Z=U[R],ee=z("div",[Z.node],"CodeMirror-linewidget"+(Z.className?" "+Z.className:""));Z.handleMouseEvents||ee.setAttribute("cm-ignore-events","true"),Rt(Z,ee,y,m),s.display.input.setUneditable(ee),C&&Z.above?N.insertBefore(ee,y.gutter||y.text):N.appendChild(ee),gr(Z,"redraw")}}function Rt(s,f,y,m){if(s.noHScroll){(y.alignable||(y.alignable=[])).push(f);var C=m.wrapperWidth;f.style.left=m.fixedPos+"px",s.coverGutter||(C-=m.gutterTotalWidth,f.style.paddingLeft=m.gutterTotalWidth+"px"),f.style.width=C+"px"}s.coverGutter&&(f.style.zIndex=5,f.style.position="relative",s.noHScroll||(f.style.marginLeft=-m.gutterTotalWidth+"px"))}function Zt(s){if(s.height!=null)return s.height;var f=s.doc.cm;if(!f)return 0;if(!ie(document.body,s.node)){var y="position: relative;";s.coverGutter&&(y+="margin-left: -"+f.display.gutters.offsetWidth+"px;"),s.noHScroll&&(y+="width: "+f.display.wrapper.clientWidth+"px;"),H(f.display.measure,z("div",[s.node],null,y))}return s.height=s.node.parentNode.offsetHeight}function Bt(s,f){for(var y=Wt(f);y!=s.wrapper;y=y.parentNode)if(!y||y.nodeType==1&&y.getAttribute("cm-ignore-events")=="true"||y.parentNode==s.sizer&&y!=s.mover)return!0}function nn(s){return s.lineSpace.offsetTop}function gn(s){return s.mover.offsetHeight-s.lineSpace.offsetHeight}function Ii(s){if(s.cachedPaddingH)return s.cachedPaddingH;var f=H(s.measure,z("pre","x","CodeMirror-line-like")),y=window.getComputedStyle?window.getComputedStyle(f):f.currentStyle,m={left:parseInt(y.paddingLeft),right:parseInt(y.paddingRight)};return!isNaN(m.left)&&!isNaN(m.right)&&(s.cachedPaddingH=m),m}function fr(s){return J-s.display.nativeBarWidth}function Li(s){return s.display.scroller.clientWidth-fr(s)-s.display.barWidth}function uo(s){return s.display.scroller.clientHeight-fr(s)-s.display.barHeight}function ya(s,f,y){var m=s.options.lineWrapping,C=m&&Li(s);if(!f.measure.heights||m&&f.measure.width!=C){var N=f.measure.heights=[];if(m){f.measure.width=C;for(var R=f.text.firstChild.getClientRects(),U=0;U<R.length-1;U++){var Z=R[U],ee=R[U+1];Math.abs(Z.bottom-ee.bottom)>2&&N.push((Z.bottom+ee.top)/2-y.top)}}N.push(y.bottom-y.top)}}function Pl(s,f,y){if(s.line==f)return{map:s.measure.map,cache:s.measure.cache};if(s.rest){for(var m=0;m<s.rest.length;m++)if(s.rest[m]==f)return{map:s.measure.maps[m],cache:s.measure.caches[m]};for(var C=0;C<s.rest.length;C++)if(hn(s.rest[C])>y)return{map:s.measure.maps[C],cache:s.measure.caches[C],before:!0}}}function Bu(s,f){f=Dr(f);var y=hn(f),m=s.display.externalMeasured=new Ba(s.doc,f,y);m.lineN=y;var C=m.built=ma(s,m);return m.text=C.pre,H(s.display.lineMeasure,C.pre),m}function Hd(s,f,y,m){return co(s,Wa(s,f),y,m)}function Oc(s,f){if(f>=s.display.viewFrom&&f<s.display.viewTo)return s.display.view[ho(s,f)];var y=s.display.externalMeasured;if(y&&f>=y.lineN&&f<y.lineN+y.size)return y}function Wa(s,f){var y=hn(f),m=Oc(s,y);m&&!m.text?m=null:m&&m.changes&&(Bl(s,m,y,$i(s)),s.curOp.forceUpdate=!0),m||(m=Bu(s,f));var C=Pl(m,f,y);return{line:f,view:m,rect:null,map:C.map,cache:C.cache,before:C.before,hasHeights:!1}}function co(s,f,y,m,C){f.before&&(y=-1);var N=y+(m||""),R;return f.cache.hasOwnProperty(N)?R=f.cache[N]:(f.rect||(f.rect=f.view.text.getBoundingClientRect()),f.hasHeights||(ya(s,f.view,f.rect),f.hasHeights=!0),R=ds(s,f,y,m),R.bogus||(f.cache[N]=R)),{left:R.left,right:R.right,top:C?R.rtop:R.top,bottom:C?R.rbottom:R.bottom}}var Bf={left:0,right:0,top:0,bottom:0};function jd(s,f,y){for(var m,C,N,R,U,Z,ee=0;ee<s.length;ee+=3)if(U=s[ee],Z=s[ee+1],f<U?(C=0,N=1,R="left"):f<Z?(C=f-U,N=C+1):(ee==s.length-3||f==Z&&s[ee+3]>f)&&(N=Z-U,C=N-1,f>=Z&&(R="right")),C!=null){if(m=s[ee+2],U==Z&&y==(m.insertLeft?"left":"right")&&(R=y),y=="left"&&C==0)for(;ee&&s[ee-2]==s[ee-3]&&s[ee-1].insertLeft;)m=s[(ee-=3)+2],R="left";if(y=="right"&&C==Z-U)for(;ee<s.length-3&&s[ee+3]==s[ee+4]&&!s[ee+5].insertLeft;)m=s[(ee+=3)+2],R="right";break}return{node:m,start:C,end:N,collapse:R,coverStart:U,coverEnd:Z}}function Pf(s,f){var y=Bf;if(f=="left")for(var m=0;m<s.length&&(y=s[m]).left==y.right;m++);else for(var C=s.length-1;C>=0&&(y=s[C]).left==y.right;C--);return y}function ds(s,f,y,m){var C=jd(f.map,y,m),N=C.node,R=C.start,U=C.end,Z=C.collapse,ee;if(N.nodeType==3){for(var he=0;he<4;he++){for(;R&&ot(f.line.text.charAt(C.coverStart+R));)--R;for(;C.coverStart+U<C.coverEnd&&ot(f.line.text.charAt(C.coverStart+U));)++U;if(o&&l<9&&R==0&&U==C.coverEnd-C.coverStart?ee=N.parentNode.getBoundingClientRect():ee=Pf(Q(N,R,U).getClientRects(),m),ee.left||ee.right||R==0)break;U=R,R=R-1,Z="right"}o&&l<11&&(ee=Wd(s.display.measure,ee))}else{R>0&&(Z=m="right");var ke;s.options.lineWrapping&&(ke=N.getClientRects()).length>1?ee=ke[m=="right"?ke.length-1:0]:ee=N.getBoundingClientRect()}if(o&&l<9&&!R&&(!ee||!ee.left&&!ee.right)){var Ne=N.parentNode.getClientRects()[0];Ne?ee={left:Ne.left,right:Ne.left+Hl(s.display),top:Ne.top,bottom:Ne.bottom}:ee=Bf}for(var Me=ee.top-f.rect.top,Pe=ee.bottom-f.rect.top,Ze=(Me+Pe)/2,it=f.view.measure.heights,ut=0;ut<it.length-1&&!(Ze<it[ut]);ut++);var pt=ut?it[ut-1]:0,dt=it[ut],kt={left:(Z=="right"?ee.right:ee.left)-f.rect.left,right:(Z=="left"?ee.left:ee.right)-f.rect.left,top:pt,bottom:dt};return!ee.left&&!ee.right&&(kt.bogus=!0),s.options.singleCursorHeightPerLine||(kt.rtop=Me,kt.rbottom=Pe),kt}function Wd(s,f){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!La(s))return f;var y=screen.logicalXDPI/screen.deviceXDPI,m=screen.logicalYDPI/screen.deviceYDPI;return{left:f.left*y,right:f.right*y,top:f.top*m,bottom:f.bottom*m}}function Hf(s){if(s.measure&&(s.measure.cache={},s.measure.heights=null,s.rest))for(var f=0;f<s.rest.length;f++)s.measure.caches[f]={}}function jf(s){s.display.externalMeasure=null,G(s.display.lineMeasure);for(var f=0;f<s.display.view.length;f++)Hf(s.display.view[f])}function Pu(s){jf(s),s.display.cachedCharWidth=s.display.cachedTextHeight=s.display.cachedPaddingH=null,s.options.lineWrapping||(s.display.maxLineChanged=!0),s.display.lineNumChars=null}function Ys(){return v&&E?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function wa(){return v&&E?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Ud(s){var f=Dr(s),y=f.widgets,m=0;if(y)for(var C=0;C<y.length;++C)y[C].above&&(m+=Zt(y[C]));return m}function qd(s,f,y,m,C){if(!C){var N=Ud(f);y.top+=N,y.bottom+=N}if(m=="line")return y;m||(m="local");var R=qn(f);if(m=="local"?R+=nn(s.display):R-=s.display.viewOffset,m=="page"||m=="window"){var U=s.display.lineSpace.getBoundingClientRect();R+=U.top+(m=="window"?0:wa());var Z=U.left+(m=="window"?0:Ys());y.left+=Z,y.right+=Z}return y.top+=R,y.bottom+=R,y}function Wf(s,f,y){if(y=="div")return f;var m=f.left,C=f.top;if(y=="page")m-=Ys(),C-=wa();else if(y=="local"||!y){var N=s.display.sizer.getBoundingClientRect();m+=N.left,C+=N.top}var R=s.display.lineSpace.getBoundingClientRect();return{left:m-R.left,top:C-R.top}}function $d(s,f,y,m,C){return m||(m=Ct(s.doc,f.line)),qd(s,m,Hd(s,m,f.ch,C),y)}function Ua(s,f,y,m,C,N){m=m||Ct(s.doc,f.line),C||(C=Wa(s,m));function R(Pe,Ze){var it=co(s,C,Pe,Ze?"right":"left",N);return Ze?it.left=it.right:it.right=it.left,qd(s,m,it,y)}var U=zn(m,s.doc.direction),Z=f.ch,ee=f.sticky;if(Z>=m.text.length?(Z=m.text.length,ee="before"):Z<=0&&(Z=0,ee="after"),!U)return R(ee=="before"?Z-1:Z,ee=="before");function he(Pe,Ze,it){var ut=U[Ze],pt=ut.level==1;return R(it?Pe-1:Pe,pt!=it)}var ke=Dt(U,Z,ee),Ne=Et,Me=he(Z,ke,ee=="before");return Ne!=null&&(Me.other=he(Z,Ne,ee!="before")),Me}function Uf(s,f){var y=0;f=st(s.doc,f),s.options.lineWrapping||(y=Hl(s.display)*f.ch);var m=Ct(s.doc,f.line),C=qn(m)+nn(s.display);return{left:y,right:y,top:C,bottom:C+m.height}}function cs(s,f,y,m,C){var N=Ve(s,f,y);return N.xRel=C,m&&(N.outside=m),N}function De(s,f,y){var m=s.doc;if(y+=s.display.viewOffset,y<0)return cs(m.first,0,null,-1,-1);var C=Cr(m,y),N=m.first+m.size-1;if(C>N)return cs(m.first+m.size-1,Ct(m,N).text.length,null,1,1);f<0&&(f=0);for(var R=Ct(m,C);;){var U=Vt(s,R,C,f,y),Z=Ao(R,U.ch+(U.xRel>0||U.outside>0?1:0));if(!Z)return U;var ee=Z.find(1);if(ee.line==C)return ee;R=Ct(m,C=ee.line)}}function $e(s,f,y,m){m-=Ud(f);var C=f.text.length,N=wt(function(R){return co(s,y,R-1).bottom<=m},C,0);return C=wt(function(R){return co(s,y,R).top>m},N,C),{begin:N,end:C}}function He(s,f,y,m){y||(y=Wa(s,f));var C=qd(s,f,co(s,y,m),"line").top;return $e(s,f,y,C)}function _t(s,f,y,m){return s.bottom<=y?!1:s.top>y?!0:(m?s.left:s.right)>f}function Vt(s,f,y,m,C){C-=qn(f);var N=Wa(s,f),R=Ud(f),U=0,Z=f.text.length,ee=!0,he=zn(f,s.doc.direction);if(he){var ke=(s.options.lineWrapping?jr:Ln)(s,f,y,N,he,m,C);ee=ke.level!=1,U=ee?ke.from:ke.to-1,Z=ee?ke.to:ke.from-1}var Ne=null,Me=null,Pe=wt(function(It){var Nt=co(s,N,It);return Nt.top+=R,Nt.bottom+=R,_t(Nt,m,C,!1)?(Nt.top<=C&&Nt.left<=m&&(Ne=It,Me=Nt),!0):!1},U,Z),Ze,it,ut=!1;if(Me){var pt=m-Me.left<Me.right-m,dt=pt==ee;Pe=Ne+(dt?0:1),it=dt?"after":"before",Ze=pt?Me.left:Me.right}else{!ee&&(Pe==Z||Pe==U)&&Pe++,it=Pe==0?"after":Pe==f.text.length?"before":co(s,N,Pe-(ee?1:0)).bottom+R<=C==ee?"after":"before";var kt=Ua(s,Ve(y,Pe,it),"line",f,N);Ze=kt.left,ut=C<kt.top?-1:C>=kt.bottom?1:0}return Pe=nt(f.text,Pe,1),cs(y,Pe,it,ut,m-Ze)}function Ln(s,f,y,m,C,N,R){var U=wt(function(ke){var Ne=C[ke],Me=Ne.level!=1;return _t(Ua(s,Ve(y,Me?Ne.to:Ne.from,Me?"before":"after"),"line",f,m),N,R,!0)},0,C.length-1),Z=C[U];if(U>0){var ee=Z.level!=1,he=Ua(s,Ve(y,ee?Z.from:Z.to,ee?"after":"before"),"line",f,m);_t(he,N,R,!0)&&he.top>R&&(Z=C[U-1])}return Z}function jr(s,f,y,m,C,N,R){var U=$e(s,f,m,R),Z=U.begin,ee=U.end;/\s/.test(f.text.charAt(ee-1))&&ee--;for(var he=null,ke=null,Ne=0;Ne<C.length;Ne++){var Me=C[Ne];if(!(Me.from>=ee||Me.to<=Z)){var Pe=Me.level!=1,Ze=co(s,m,Pe?Math.min(ee,Me.to)-1:Math.max(Z,Me.from)).right,it=Ze<N?N-Ze+1e9:Ze-N;(!he||ke>it)&&(he=Me,ke=it)}}return he||(he=C[C.length-1]),he.from<Z&&(he={from:Z,to:he.to,level:he.level}),he.to>ee&&(he={from:he.from,to:ee,level:he.level}),he}var xn;function fs(s){if(s.cachedTextHeight!=null)return s.cachedTextHeight;if(xn==null){xn=z("pre",null,"CodeMirror-line-like");for(var f=0;f<49;++f)xn.appendChild(document.createTextNode("x")),xn.appendChild(z("br"));xn.appendChild(document.createTextNode("x"))}H(s.measure,xn);var y=xn.offsetHeight/50;return y>3&&(s.cachedTextHeight=y),G(s.measure),y||1}function Hl(s){if(s.cachedCharWidth!=null)return s.cachedCharWidth;var f=z("span","xxxxxxxxxx"),y=z("pre",[f],"CodeMirror-line-like");H(s.measure,y);var m=f.getBoundingClientRect(),C=(m.right-m.left)/10;return C>2&&(s.cachedCharWidth=C),C||10}function $i(s){for(var f=s.display,y={},m={},C=f.gutters.clientLeft,N=f.gutters.firstChild,R=0;N;N=N.nextSibling,++R){var U=s.display.gutterSpecs[R].className;y[U]=N.offsetLeft+N.clientLeft+C,m[U]=N.clientWidth}return{fixedPos:jl(f),gutterTotalWidth:f.gutters.offsetWidth,gutterLeft:y,gutterWidth:m,wrapperWidth:f.wrapper.clientWidth}}function jl(s){return s.scroller.getBoundingClientRect().left-s.sizer.getBoundingClientRect().left}function qf(s){var f=fs(s.display),y=s.options.lineWrapping,m=y&&Math.max(5,s.display.scroller.clientWidth/Hl(s.display)-3);return function(C){if(ir(s.doc,C))return 0;var N=0;if(C.widgets)for(var R=0;R<C.widgets.length;R++)C.widgets[R].height&&(N+=C.widgets[R].height);return y?N+(Math.ceil(C.text.length/m)||1)*f:N+f}}function hs(s){var f=s.doc,y=qf(s);f.iter(function(m){var C=y(m);C!=m.height&&Hr(m,C)})}function fo(s,f,y,m){var C=s.display;if(!y&&Wt(f).getAttribute("cm-not-content")=="true")return null;var N,R,U=C.lineSpace.getBoundingClientRect();try{N=f.clientX-U.left,R=f.clientY-U.top}catch{return null}var Z=De(s,N,R),ee;if(m&&Z.xRel>0&&(ee=Ct(s.doc,Z.line).text).length==Z.ch){var he=fe(ee,ee.length,s.options.tabSize)-ee.length;Z=Ve(Z.line,Math.max(0,Math.round((N-Ii(s.display).left)/Hl(s.display))-he))}return Z}function ho(s,f){if(f>=s.display.viewTo||(f-=s.display.viewFrom,f<0))return null;for(var y=s.display.view,m=0;m<y.length;m++)if(f-=y[m].size,f<0)return m}function Xt(s,f,y,m){f==null&&(f=s.doc.first),y==null&&(y=s.doc.first+s.doc.size),m||(m=0);var C=s.display;if(m&&y<C.viewTo&&(C.updateLineNumbers==null||C.updateLineNumbers>f)&&(C.updateLineNumbers=f),s.curOp.viewChanged=!0,f>=C.viewTo)Qi&&ss(s.doc,f)<C.viewTo&&Io(s);else if(y<=C.viewFrom)Qi&&Do(s.doc,y+m)>C.viewFrom?Io(s):(C.viewFrom+=m,C.viewTo+=m);else if(f<=C.viewFrom&&y>=C.viewTo)Io(s);else if(f<=C.viewFrom){var N=Ks(s,y,y+m,1);N?(C.view=C.view.slice(N.index),C.viewFrom=N.lineN,C.viewTo+=m):Io(s)}else if(y>=C.viewTo){var R=Ks(s,f,f,-1);R?(C.view=C.view.slice(0,R.index),C.viewTo=R.lineN):Io(s)}else{var U=Ks(s,f,f,-1),Z=Ks(s,y,y+m,1);U&&Z?(C.view=C.view.slice(0,U.index).concat(Pa(s,U.lineN,Z.lineN)).concat(C.view.slice(Z.index)),C.viewTo+=m):Io(s)}var ee=C.externalMeasured;ee&&(y<ee.lineN?ee.lineN+=m:f<ee.lineN+ee.size&&(C.externalMeasured=null))}function vs(s,f,y){s.curOp.viewChanged=!0;var m=s.display,C=s.display.externalMeasured;if(C&&f>=C.lineN&&f<C.lineN+C.size&&(m.externalMeasured=null),!(f<m.viewFrom||f>=m.viewTo)){var N=m.view[ho(s,f)];if(N.node!=null){var R=N.changes||(N.changes=[]);ae(R,y)==-1&&R.push(y)}}}function Io(s){s.display.viewFrom=s.display.viewTo=s.doc.first,s.display.view=[],s.display.viewOffset=0}function Ks(s,f,y,m){var C=ho(s,f),N,R=s.display.view;if(!Qi||y==s.doc.first+s.doc.size)return{index:C,lineN:y};for(var U=s.display.viewFrom,Z=0;Z<C;Z++)U+=R[Z].size;if(U!=f){if(m>0){if(C==R.length-1)return null;N=U+R[C].size-f,C++}else N=U-f;f+=N,y+=N}for(;ss(s.doc,y)!=y;){if(C==(m<0?0:R.length-1))return null;y+=m*R[C-(m<0?1:0)].size,C+=m}return{index:C,lineN:y}}function lv(s,f,y){var m=s.display,C=m.view;C.length==0||f>=m.viewTo||y<=m.viewFrom?(m.view=Pa(s,f,y),m.viewFrom=f):(m.viewFrom>f?m.view=Pa(s,f,m.viewFrom).concat(m.view):m.viewFrom<f&&(m.view=m.view.slice(ho(s,f))),m.viewFrom=f,m.viewTo<y?m.view=m.view.concat(Pa(s,m.viewTo,y)):m.viewTo>y&&(m.view=m.view.slice(0,ho(s,y)))),m.viewTo=y}function $f(s){for(var f=s.display.view,y=0,m=0;m<f.length;m++){var C=f[m];!C.hidden&&(!C.node||C.changes)&&++y}return y}function Hu(s){s.display.input.showSelection(s.display.input.prepareSelection())}function ju(s,f){f===void 0&&(f=!0);var y=s.doc,m={},C=m.cursors=document.createDocumentFragment(),N=m.selection=document.createDocumentFragment(),R=s.options.$customCursor;R&&(f=!0);for(var U=0;U<y.sel.ranges.length;U++)if(!(!f&&U==y.sel.primIndex)){var Z=y.sel.ranges[U];if(!(Z.from().line>=s.display.viewTo||Z.to().line<s.display.viewFrom)){var ee=Z.empty();if(R){var he=R(s,Z);he&&vo(s,he,C)}else(ee||s.options.showCursorWhenSelecting)&&vo(s,Z.head,C);ee||Gf(s,Z,N)}}return m}function vo(s,f,y){var m=Ua(s,f,"div",null,null,!s.options.singleCursorHeightPerLine),C=y.appendChild(z("div","\xA0","CodeMirror-cursor"));if(C.style.left=m.left+"px",C.style.top=m.top+"px",C.style.height=Math.max(0,m.bottom-m.top)*s.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(s.getWrapperElement().className)){var N=$d(s,f,"div",null,null),R=N.right-N.left;C.style.width=(R>0?R:s.defaultCharWidth())+"px"}if(m.other){var U=y.appendChild(z("div","\xA0","CodeMirror-cursor CodeMirror-secondarycursor"));U.style.display="",U.style.left=m.other.left+"px",U.style.top=m.other.top+"px",U.style.height=(m.other.bottom-m.other.top)*.85+"px"}}function Vs(s,f){return s.top-f.top||s.left-f.left}function Gf(s,f,y){var m=s.display,C=s.doc,N=document.createDocumentFragment(),R=Ii(s.display),U=R.left,Z=Math.max(m.sizerWidth,Li(s)-m.sizer.offsetLeft)-R.right,ee=C.direction=="ltr";function he(dt,kt,It,Nt){kt<0&&(kt=0),kt=Math.round(kt),Nt=Math.round(Nt),N.appendChild(z("div",null,"CodeMirror-selected","position: absolute; left: "+dt+`px;
                             top: `+kt+"px; width: "+(It==null?Z-dt:It)+`px;
                             height: `+(Nt-kt)+"px"))}function ke(dt,kt,It){var Nt=Ct(C,dt),en=Nt.text.length,Bn,Lr;function Qn(_r,Jr){return $d(s,Ve(dt,_r),"div",Nt,Jr)}function Ci(_r,Jr,Wr){var $n=He(s,Nt,null,_r),nr=Jr=="ltr"==(Wr=="after")?"left":"right",yr=Wr=="after"?$n.begin:$n.end-(/\s/.test(Nt.text.charAt($n.end-1))?2:1);return Qn(yr,nr)[nr]}var Ei=zn(Nt,C.direction);return bt(Ei,kt||0,It==null?en:It,function(_r,Jr,Wr,$n){var nr=Wr=="ltr",yr=Qn(_r,nr?"left":"right"),_i=Qn(Jr-1,nr?"right":"left"),du=kt==null&&_r==0,As=It==null&&Jr==en,fi=$n==0,yo=!Ei||$n==Ei.length-1;if(_i.top-yr.top<=3){var Ur=(ee?du:As)&&fi,ff=(ee?As:du)&&yo,Fo=Ur?U:(nr?yr:_i).left,ll=ff?Z:(nr?_i:yr).right;he(Fo,yr.top,ll-Fo,yr.bottom)}else{var ul,Si,cu,wc;nr?(ul=ee&&du&&fi?U:yr.left,Si=ee?Z:Ci(_r,Wr,"before"),cu=ee?U:Ci(Jr,Wr,"after"),wc=ee&&As&&yo?Z:_i.right):(ul=ee?Ci(_r,Wr,"before"):U,Si=!ee&&du&&fi?Z:yr.right,cu=!ee&&As&&yo?U:_i.left,wc=ee?Ci(Jr,Wr,"after"):Z),he(ul,yr.top,Si-ul,yr.bottom),yr.bottom<_i.top&&he(U,yr.bottom,null,_i.top),he(cu,_i.top,wc-cu,_i.bottom)}(!Bn||Vs(yr,Bn)<0)&&(Bn=yr),Vs(_i,Bn)<0&&(Bn=_i),(!Lr||Vs(yr,Lr)<0)&&(Lr=yr),Vs(_i,Lr)<0&&(Lr=_i)}),{start:Bn,end:Lr}}var Ne=f.from(),Me=f.to();if(Ne.line==Me.line)ke(Ne.line,Ne.ch,Me.ch);else{var Pe=Ct(C,Ne.line),Ze=Ct(C,Me.line),it=Dr(Pe)==Dr(Ze),ut=ke(Ne.line,Ne.ch,it?Pe.text.length+1:null).end,pt=ke(Me.line,it?0:null,Me.ch).start;it&&(ut.top<pt.top-2?(he(ut.right,ut.top,null,ut.bottom),he(U,pt.top,pt.left,pt.bottom)):he(ut.right,ut.top,pt.left-ut.right,ut.bottom)),ut.bottom<pt.top&&he(U,ut.bottom,null,pt.top)}y.appendChild(N)}function Wl(s){if(!!s.state.focused){var f=s.display;clearInterval(f.blinker);var y=!0;f.cursorDiv.style.visibility="",s.options.cursorBlinkRate>0?f.blinker=setInterval(function(){s.hasFocus()||Qs(s),f.cursorDiv.style.visibility=(y=!y)?"":"hidden"},s.options.cursorBlinkRate):s.options.cursorBlinkRate<0&&(f.cursorDiv.style.visibility="hidden")}}function zc(s){s.hasFocus()||(s.display.input.focus(),s.state.focused||Ul(s))}function Gd(s){s.state.delayingBlurEvent=!0,setTimeout(function(){s.state.delayingBlurEvent&&(s.state.delayingBlurEvent=!1,s.state.focused&&Qs(s))},100)}function Ul(s,f){s.state.delayingBlurEvent&&!s.state.draggingText&&(s.state.delayingBlurEvent=!1),s.options.readOnly!="nocursor"&&(s.state.focused||(Tt(s,"focus",s,f),s.state.focused=!0,F(s.display.wrapper,"CodeMirror-focused"),!s.curOp&&s.display.selForContextMenu!=s.doc.sel&&(s.display.input.reset(),c&&setTimeout(function(){return s.display.input.reset(!0)},20)),s.display.input.receivedFocus()),Wl(s))}function Qs(s,f){s.state.delayingBlurEvent||(s.state.focused&&(Tt(s,"blur",s,f),s.state.focused=!1,q(s.display.wrapper,"CodeMirror-focused")),clearInterval(s.display.blinker),setTimeout(function(){s.state.focused||(s.display.shift=!1)},150))}function ps(s){for(var f=s.display,y=f.lineDiv.offsetTop,m=Math.max(0,f.scroller.getBoundingClientRect().top),C=f.lineDiv.getBoundingClientRect().top,N=0,R=0;R<f.view.length;R++){var U=f.view[R],Z=s.options.lineWrapping,ee=void 0,he=0;if(!U.hidden){if(C+=U.line.height,o&&l<8){var ke=U.node.offsetTop+U.node.offsetHeight;ee=ke-y,y=ke}else{var Ne=U.node.getBoundingClientRect();ee=Ne.bottom-Ne.top,!Z&&U.text.firstChild&&(he=U.text.firstChild.getBoundingClientRect().right-Ne.left-1)}var Me=U.line.height-ee;if((Me>.005||Me<-.005)&&(C<m&&(N-=Me),Hr(U.line,ee),gs(U.line),U.rest))for(var Pe=0;Pe<U.rest.length;Pe++)gs(U.rest[Pe]);if(he>s.display.sizerWidth){var Ze=Math.ceil(he/Hl(s.display));Ze>s.display.maxLineLength&&(s.display.maxLineLength=Ze,s.display.maxLine=U.line,s.display.maxLineChanged=!0)}}}Math.abs(N)>2&&(f.scroller.scrollTop+=N)}function gs(s){if(s.widgets)for(var f=0;f<s.widgets.length;++f){var y=s.widgets[f],m=y.node.parentNode;m&&(y.height=m.offsetHeight)}}function Xs(s,f,y){var m=y&&y.top!=null?Math.max(0,y.top):s.scroller.scrollTop;m=Math.floor(m-nn(s));var C=y&&y.bottom!=null?y.bottom:m+s.wrapper.clientHeight,N=Cr(f,m),R=Cr(f,C);if(y&&y.ensure){var U=y.ensure.from.line,Z=y.ensure.to.line;U<N?(N=U,R=Cr(f,qn(Ct(f,U))+s.wrapper.clientHeight)):Math.min(Z,f.lastLine())>=R&&(N=Cr(f,qn(Ct(f,Z))-s.wrapper.clientHeight),R=Z)}return{from:N,to:Math.max(R,N+1)}}function uv(s,f){if(!Dn(s,"scrollCursorIntoView")){var y=s.display,m=y.sizer.getBoundingClientRect(),C=null;if(f.top+m.top<0?C=!0:f.bottom+m.top>(window.innerHeight||document.documentElement.clientHeight)&&(C=!1),C!=null&&!x){var N=z("div","\u200B",null,`position: absolute;
                         top: `+(f.top-y.viewOffset-nn(s.display))+`px;
                         height: `+(f.bottom-f.top+fr(s)+y.barHeight)+`px;
                         left: `+f.left+"px; width: "+Math.max(2,f.right-f.left)+"px;");s.display.lineSpace.appendChild(N),N.scrollIntoView(C),s.display.lineSpace.removeChild(N)}}}function dv(s,f,y,m){m==null&&(m=0);var C;!s.options.lineWrapping&&f==y&&(y=f.sticky=="before"?Ve(f.line,f.ch+1,"before"):f,f=f.ch?Ve(f.line,f.sticky=="before"?f.ch-1:f.ch,"after"):f);for(var N=0;N<5;N++){var R=!1,U=Ua(s,f),Z=!y||y==f?U:Ua(s,y);C={left:Math.min(U.left,Z.left),top:Math.min(U.top,Z.top)-m,right:Math.max(U.left,Z.left),bottom:Math.max(U.bottom,Z.bottom)+m};var ee=ql(s,C),he=s.doc.scrollTop,ke=s.doc.scrollLeft;if(ee.scrollTop!=null&&(mr(s,ee.scrollTop),Math.abs(s.doc.scrollTop-he)>1&&(R=!0)),ee.scrollLeft!=null&&(Js(s,ee.scrollLeft),Math.abs(s.doc.scrollLeft-ke)>1&&(R=!0)),!R)break}return C}function cv(s,f){var y=ql(s,f);y.scrollTop!=null&&mr(s,y.scrollTop),y.scrollLeft!=null&&Js(s,y.scrollLeft)}function ql(s,f){var y=s.display,m=fs(s.display);f.top<0&&(f.top=0);var C=s.curOp&&s.curOp.scrollTop!=null?s.curOp.scrollTop:y.scroller.scrollTop,N=uo(s),R={};f.bottom-f.top>N&&(f.bottom=f.top+N);var U=s.doc.height+gn(y),Z=f.top<m,ee=f.bottom>U-m;if(f.top<C)R.scrollTop=Z?0:f.top;else if(f.bottom>C+N){var he=Math.min(f.top,(ee?U:f.bottom)-N);he!=C&&(R.scrollTop=he)}var ke=s.options.fixedGutter?0:y.gutters.offsetWidth,Ne=s.curOp&&s.curOp.scrollLeft!=null?s.curOp.scrollLeft:y.scroller.scrollLeft-ke,Me=Li(s)-y.gutters.offsetWidth,Pe=f.right-f.left>Me;return Pe&&(f.right=f.left+Me),f.left<10?R.scrollLeft=0:f.left<Ne?R.scrollLeft=Math.max(0,f.left+ke-(Pe?0:10)):f.right>Me+Ne-3&&(R.scrollLeft=f.right+(Pe?0:10)-Me),R}function $l(s,f){f!=null&&(Zd(s),s.curOp.scrollTop=(s.curOp.scrollTop==null?s.doc.scrollTop:s.curOp.scrollTop)+f)}function ms(s){Zd(s);var f=s.getCursor();s.curOp.scrollToPos={from:f,to:f,margin:s.options.cursorScrollMargin}}function Wu(s,f,y){(f!=null||y!=null)&&Zd(s),f!=null&&(s.curOp.scrollLeft=f),y!=null&&(s.curOp.scrollTop=y)}function Zf(s,f){Zd(s),s.curOp.scrollToPos=f}function Zd(s){var f=s.curOp.scrollToPos;if(f){s.curOp.scrollToPos=null;var y=Uf(s,f.from),m=Uf(s,f.to);Yf(s,y,m,f.margin)}}function Yf(s,f,y,m){var C=ql(s,{left:Math.min(f.left,y.left),top:Math.min(f.top,y.top)-m,right:Math.max(f.right,y.right),bottom:Math.max(f.bottom,y.bottom)+m});Wu(s,C.scrollLeft,C.scrollTop)}function mr(s,f){Math.abs(s.doc.scrollTop-f)<2||(e||Fc(s,{top:f}),oi(s,f,!0),e&&Fc(s),go(s,100))}function oi(s,f,y){f=Math.max(0,Math.min(s.display.scroller.scrollHeight-s.display.scroller.clientHeight,f)),!(s.display.scroller.scrollTop==f&&!y)&&(s.doc.scrollTop=f,s.display.scrollbars.setScrollTop(f),s.display.scroller.scrollTop!=f&&(s.display.scroller.scrollTop=f))}function Js(s,f,y,m){f=Math.max(0,Math.min(f,s.display.scroller.scrollWidth-s.display.scroller.clientWidth)),!((y?f==s.doc.scrollLeft:Math.abs(s.doc.scrollLeft-f)<2)&&!m)&&(s.doc.scrollLeft=f,Kf(s),s.display.scroller.scrollLeft!=f&&(s.display.scroller.scrollLeft=f),s.display.scrollbars.setScrollLeft(f))}function Uu(s){var f=s.display,y=f.gutters.offsetWidth,m=Math.round(s.doc.height+gn(s.display));return{clientHeight:f.scroller.clientHeight,viewHeight:f.wrapper.clientHeight,scrollWidth:f.scroller.scrollWidth,clientWidth:f.scroller.clientWidth,viewWidth:f.wrapper.clientWidth,barLeft:s.options.fixedGutter?y:0,docHeight:m,scrollHeight:m+fr(s)+f.barHeight,nativeBarWidth:f.nativeBarWidth,gutterWidth:y}}var bs=function(s,f,y){this.cm=y;var m=this.vert=z("div",[z("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),C=this.horiz=z("div",[z("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");m.tabIndex=C.tabIndex=-1,s(m),s(C),vt(m,"scroll",function(){m.clientHeight&&f(m.scrollTop,"vertical")}),vt(C,"scroll",function(){C.clientWidth&&f(C.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,o&&l<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};bs.prototype.update=function(s){var f=s.scrollWidth>s.clientWidth+1,y=s.scrollHeight>s.clientHeight+1,m=s.nativeBarWidth;if(y){this.vert.style.display="block",this.vert.style.bottom=f?m+"px":"0";var C=s.viewHeight-(f?m:0);this.vert.firstChild.style.height=Math.max(0,s.scrollHeight-s.clientHeight+C)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(f){this.horiz.style.display="block",this.horiz.style.right=y?m+"px":"0",this.horiz.style.left=s.barLeft+"px";var N=s.viewWidth-s.barLeft-(y?m:0);this.horiz.firstChild.style.width=Math.max(0,s.scrollWidth-s.clientWidth+N)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&s.clientHeight>0&&(m==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:y?m:0,bottom:f?m:0}},bs.prototype.setScrollLeft=function(s){this.horiz.scrollLeft!=s&&(this.horiz.scrollLeft=s),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},bs.prototype.setScrollTop=function(s){this.vert.scrollTop!=s&&(this.vert.scrollTop=s),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},bs.prototype.zeroWidthHack=function(){var s=T&&!w?"12px":"18px";this.horiz.style.height=this.vert.style.width=s,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new ve,this.disableVert=new ve},bs.prototype.enableZeroWidthBar=function(s,f,y){s.style.pointerEvents="auto";function m(){var C=s.getBoundingClientRect(),N=y=="vert"?document.elementFromPoint(C.right-1,(C.top+C.bottom)/2):document.elementFromPoint((C.right+C.left)/2,C.bottom-1);N!=s?s.style.pointerEvents="none":f.set(1e3,m)}f.set(1e3,m)},bs.prototype.clear=function(){var s=this.horiz.parentNode;s.removeChild(this.horiz),s.removeChild(this.vert)};var qu=function(){};qu.prototype.update=function(){return{bottom:0,right:0}},qu.prototype.setScrollLeft=function(){},qu.prototype.setScrollTop=function(){},qu.prototype.clear=function(){};function ys(s,f){f||(f=Uu(s));var y=s.display.barWidth,m=s.display.barHeight;Gl(s,f);for(var C=0;C<4&&y!=s.display.barWidth||m!=s.display.barHeight;C++)y!=s.display.barWidth&&s.options.lineWrapping&&ps(s),Gl(s,Uu(s)),y=s.display.barWidth,m=s.display.barHeight}function Gl(s,f){var y=s.display,m=y.scrollbars.update(f);y.sizer.style.paddingRight=(y.barWidth=m.right)+"px",y.sizer.style.paddingBottom=(y.barHeight=m.bottom)+"px",y.heightForcer.style.borderBottom=m.bottom+"px solid transparent",m.right&&m.bottom?(y.scrollbarFiller.style.display="block",y.scrollbarFiller.style.height=m.bottom+"px",y.scrollbarFiller.style.width=m.right+"px"):y.scrollbarFiller.style.display="",m.bottom&&s.options.coverGutterNextToScrollbar&&s.options.fixedGutter?(y.gutterFiller.style.display="block",y.gutterFiller.style.height=m.bottom+"px",y.gutterFiller.style.width=f.gutterWidth+"px"):y.gutterFiller.style.display=""}var Yd={native:bs,null:qu};function el(s){s.display.scrollbars&&(s.display.scrollbars.clear(),s.display.scrollbars.addClass&&q(s.display.wrapper,s.display.scrollbars.addClass)),s.display.scrollbars=new Yd[s.options.scrollbarStyle](function(f){s.display.wrapper.insertBefore(f,s.display.scrollbarFiller),vt(f,"mousedown",function(){s.state.focused&&setTimeout(function(){return s.display.input.focus()},0)}),f.setAttribute("cm-not-content","true")},function(f,y){y=="horizontal"?Js(s,f):mr(s,f)},s),s.display.scrollbars.addClass&&F(s.display.wrapper,s.display.scrollbars.addClass)}var $u=0;function qa(s){s.curOp={cm:s,viewChanged:!1,startHeight:s.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++$u,markArrays:null},Ha(s.curOp)}function po(s){var f=s.curOp;f&&us(f,function(y){for(var m=0;m<y.ops.length;m++)y.ops[m].cm.curOp=null;Zl(y)})}function Zl(s){for(var f=s.ops,y=0;y<f.length;y++)fv(f[y]);for(var m=0;m<f.length;m++)hv(f[m]);for(var C=0;C<f.length;C++)vv(f[C]);for(var N=0;N<f.length;N++)pv(f[N]);for(var R=0;R<f.length;R++)gv(f[R])}function fv(s){var f=s.cm,y=f.display;vn(f),s.updateMaxLine&&qs(f),s.mustUpdate=s.viewChanged||s.forceUpdate||s.scrollTop!=null||s.scrollToPos&&(s.scrollToPos.from.line<y.viewFrom||s.scrollToPos.to.line>=y.viewTo)||y.maxLineChanged&&f.options.lineWrapping,s.update=s.mustUpdate&&new Oi(f,s.mustUpdate&&{top:s.scrollTop,ensure:s.scrollToPos},s.forceUpdate)}function hv(s){s.updatedDisplay=s.mustUpdate&&Rc(s.cm,s.update)}function vv(s){var f=s.cm,y=f.display;s.updatedDisplay&&ps(f),s.barMeasure=Uu(f),y.maxLineChanged&&!f.options.lineWrapping&&(s.adjustWidthTo=Hd(f,y.maxLine,y.maxLine.text.length).left+3,f.display.sizerWidth=s.adjustWidthTo,s.barMeasure.scrollWidth=Math.max(y.scroller.clientWidth,y.sizer.offsetLeft+s.adjustWidthTo+fr(f)+f.display.barWidth),s.maxScrollLeft=Math.max(0,y.sizer.offsetLeft+s.adjustWidthTo-Li(f))),(s.updatedDisplay||s.selectionChanged)&&(s.preparedSelection=y.input.prepareSelection())}function pv(s){var f=s.cm;s.adjustWidthTo!=null&&(f.display.sizer.style.minWidth=s.adjustWidthTo+"px",s.maxScrollLeft<f.doc.scrollLeft&&Js(f,Math.min(f.display.scroller.scrollLeft,s.maxScrollLeft),!0),f.display.maxLineChanged=!1);var y=s.focus&&s.focus==L();s.preparedSelection&&f.display.input.showSelection(s.preparedSelection,y),(s.updatedDisplay||s.startHeight!=f.doc.height)&&ys(f,s.barMeasure),s.updatedDisplay&&Pc(f,s.barMeasure),s.selectionChanged&&Wl(f),f.state.focused&&s.updateInput&&f.display.input.reset(s.typing),y&&zc(s.cm)}function gv(s){var f=s.cm,y=f.display,m=f.doc;if(s.updatedDisplay&&ws(f,s.update),y.wheelStartX!=null&&(s.scrollTop!=null||s.scrollLeft!=null||s.scrollToPos)&&(y.wheelStartX=y.wheelStartY=null),s.scrollTop!=null&&oi(f,s.scrollTop,s.forceScroll),s.scrollLeft!=null&&Js(f,s.scrollLeft,!0,!0),s.scrollToPos){var C=dv(f,st(m,s.scrollToPos.from),st(m,s.scrollToPos.to),s.scrollToPos.margin);uv(f,C)}var N=s.maybeHiddenMarkers,R=s.maybeUnhiddenMarkers;if(N)for(var U=0;U<N.length;++U)N[U].lines.length||Tt(N[U],"hide");if(R)for(var Z=0;Z<R.length;++Z)R[Z].lines.length&&Tt(R[Z],"unhide");y.wrapper.offsetHeight&&(m.scrollTop=f.display.scroller.scrollTop),s.changeObjs&&Tt(f,"changes",f,s.changeObjs),s.update&&s.update.finish()}function si(s,f){if(s.curOp)return f();qa(s);try{return f()}finally{po(s)}}function br(s,f){return function(){if(s.curOp)return f.apply(s,arguments);qa(s);try{return f.apply(s,arguments)}finally{po(s)}}}function li(s){return function(){if(this.curOp)return s.apply(this,arguments);qa(this);try{return s.apply(this,arguments)}finally{po(this)}}}function le(s){return function(){var f=this.cm;if(!f||f.curOp)return s.apply(this,arguments);qa(f);try{return s.apply(this,arguments)}finally{po(f)}}}function go(s,f){s.doc.highlightFrontier<s.display.viewTo&&s.state.highlight.set(f,Y(Kd,s))}function Kd(s){var f=s.doc;if(!(f.highlightFrontier>=s.display.viewTo)){var y=+new Date+s.options.workTime,m=za(s,f.highlightFrontier),C=[];f.iter(m.line,Math.min(f.first+f.size,s.display.viewTo+500),function(N){if(m.line>=s.display.viewFrom){var R=N.styles,U=N.text.length>s.options.maxHighlightLength?Br(f.mode,m.state):null,Z=Oa(s,N,m,!0);U&&(m.state=U),N.styles=Z.styles;var ee=N.styleClasses,he=Z.classes;he?N.styleClasses=he:ee&&(N.styleClasses=null);for(var ke=!R||R.length!=N.styles.length||ee!=he&&(!ee||!he||ee.bgClass!=he.bgClass||ee.textClass!=he.textClass),Ne=0;!ke&&Ne<R.length;++Ne)ke=R[Ne]!=N.styles[Ne];ke&&C.push(m.line),N.stateAfter=m.save(),m.nextLine()}else N.text.length<=s.options.maxHighlightLength&&io(s,N.text,m),N.stateAfter=m.line%5==0?m.save():null,m.nextLine();if(+new Date>y)return go(s,s.options.workDelay),!0}),f.highlightFrontier=m.line,f.modeFrontier=Math.max(f.modeFrontier,m.line),C.length&&si(s,function(){for(var N=0;N<C.length;N++)vs(s,C[N],"text")})}}var Oi=function(s,f,y){var m=s.display;this.viewport=f,this.visible=Xs(m,s.doc,f),this.editorIsHidden=!m.wrapper.offsetWidth,this.wrapperHeight=m.wrapper.clientHeight,this.wrapperWidth=m.wrapper.clientWidth,this.oldDisplayWidth=Li(s),this.force=y,this.dims=$i(s),this.events=[]};Oi.prototype.signal=function(s,f){pn(s,f)&&this.events.push(arguments)},Oi.prototype.finish=function(){for(var s=0;s<this.events.length;s++)Tt.apply(null,this.events[s])};function vn(s){var f=s.display;!f.scrollbarsClipped&&f.scroller.offsetWidth&&(f.nativeBarWidth=f.scroller.offsetWidth-f.scroller.clientWidth,f.heightForcer.style.height=fr(s)+"px",f.sizer.style.marginBottom=-f.nativeBarWidth+"px",f.sizer.style.borderRightWidth=fr(s)+"px",f.scrollbarsClipped=!0)}function mv(s){if(s.hasFocus())return null;var f=L();if(!f||!ie(s.display.lineDiv,f))return null;var y={activeElt:f};if(window.getSelection){var m=window.getSelection();m.anchorNode&&m.extend&&ie(s.display.lineDiv,m.anchorNode)&&(y.anchorNode=m.anchorNode,y.anchorOffset=m.anchorOffset,y.focusNode=m.focusNode,y.focusOffset=m.focusOffset)}return y}function bv(s){if(!(!s||!s.activeElt||s.activeElt==L())&&(s.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(s.activeElt.nodeName)&&s.anchorNode&&ie(document.body,s.anchorNode)&&ie(document.body,s.focusNode))){var f=window.getSelection(),y=document.createRange();y.setEnd(s.anchorNode,s.anchorOffset),y.collapse(!1),f.removeAllRanges(),f.addRange(y),f.extend(s.focusNode,s.focusOffset)}}function Rc(s,f){var y=s.display,m=s.doc;if(f.editorIsHidden)return Io(s),!1;if(!f.force&&f.visible.from>=y.viewFrom&&f.visible.to<=y.viewTo&&(y.updateLineNumbers==null||y.updateLineNumbers>=y.viewTo)&&y.renderedView==y.view&&$f(s)==0)return!1;mo(s)&&(Io(s),f.dims=$i(s));var C=m.first+m.size,N=Math.max(f.visible.from-s.options.viewportMargin,m.first),R=Math.min(C,f.visible.to+s.options.viewportMargin);y.viewFrom<N&&N-y.viewFrom<20&&(N=Math.max(m.first,y.viewFrom)),y.viewTo>R&&y.viewTo-R<20&&(R=Math.min(C,y.viewTo)),Qi&&(N=ss(s.doc,N),R=Do(s.doc,R));var U=N!=y.viewFrom||R!=y.viewTo||y.lastWrapHeight!=f.wrapperHeight||y.lastWrapWidth!=f.wrapperWidth;lv(s,N,R),y.viewOffset=qn(Ct(s.doc,y.viewFrom)),s.display.mover.style.top=y.viewOffset+"px";var Z=$f(s);if(!U&&Z==0&&!f.force&&y.renderedView==y.view&&(y.updateLineNumbers==null||y.updateLineNumbers>=y.viewTo))return!1;var ee=mv(s);return Z>4&&(y.lineDiv.style.display="none"),yv(s,y.updateLineNumbers,f.dims),Z>4&&(y.lineDiv.style.display=""),y.renderedView=y.view,bv(ee),G(y.cursorDiv),G(y.selectionDiv),y.gutters.style.height=y.sizer.style.minHeight=0,U&&(y.lastWrapHeight=f.wrapperHeight,y.lastWrapWidth=f.wrapperWidth,go(s,400)),y.updateLineNumbers=null,!0}function ws(s,f){for(var y=f.viewport,m=!0;;m=!1){if(!m||!s.options.lineWrapping||f.oldDisplayWidth==Li(s)){if(y&&y.top!=null&&(y={top:Math.min(s.doc.height+gn(s.display)-uo(s),y.top)}),f.visible=Xs(s.display,s.doc,y),f.visible.from>=s.display.viewFrom&&f.visible.to<=s.display.viewTo)break}else m&&(f.visible=Xs(s.display,s.doc,y));if(!Rc(s,f))break;ps(s);var C=Uu(s);Hu(s),ys(s,C),Pc(s,C),f.force=!1}f.signal(s,"update",s),(s.display.viewFrom!=s.display.reportedViewFrom||s.display.viewTo!=s.display.reportedViewTo)&&(f.signal(s,"viewportChange",s,s.display.viewFrom,s.display.viewTo),s.display.reportedViewFrom=s.display.viewFrom,s.display.reportedViewTo=s.display.viewTo)}function Fc(s,f){var y=new Oi(s,f);if(Rc(s,y)){ps(s),ws(s,y);var m=Uu(s);Hu(s),ys(s,m),Pc(s,m),y.finish()}}function yv(s,f,y){var m=s.display,C=s.options.lineNumbers,N=m.lineDiv,R=N.firstChild;function U(Pe){var Ze=Pe.nextSibling;return c&&T&&s.display.currentWheelTarget==Pe?Pe.style.display="none":Pe.parentNode.removeChild(Pe),Ze}for(var Z=m.view,ee=m.viewFrom,he=0;he<Z.length;he++){var ke=Z[he];if(!ke.hidden)if(!ke.node||ke.node.parentNode!=N){var Ne=ye(s,ke,ee,y);N.insertBefore(Ne,R)}else{for(;R!=ke.node;)R=U(R);var Me=C&&f!=null&&f<=ee&&ke.lineNumber;ke.changes&&(ae(ke.changes,"gutter")>-1&&(Me=!1),Bl(s,ke,ee,y)),Me&&(G(ke.lineNumber),ke.lineNumber.appendChild(document.createTextNode(Wi(s.options,ee)))),R=ke.node.nextSibling}ee+=ke.size}for(;R;)R=U(R)}function Bc(s){var f=s.gutters.offsetWidth;s.sizer.style.marginLeft=f+"px",gr(s,"gutterChanged",s)}function Pc(s,f){s.display.sizer.style.minHeight=f.docHeight+"px",s.display.heightForcer.style.top=f.docHeight+"px",s.display.gutters.style.height=f.docHeight+s.display.barHeight+fr(s)+"px"}function Kf(s){var f=s.display,y=f.view;if(!(!f.alignWidgets&&(!f.gutters.firstChild||!s.options.fixedGutter))){for(var m=jl(f)-f.scroller.scrollLeft+s.doc.scrollLeft,C=f.gutters.offsetWidth,N=m+"px",R=0;R<y.length;R++)if(!y[R].hidden){s.options.fixedGutter&&(y[R].gutter&&(y[R].gutter.style.left=N),y[R].gutterBackground&&(y[R].gutterBackground.style.left=N));var U=y[R].alignable;if(U)for(var Z=0;Z<U.length;Z++)U[Z].style.left=N}s.options.fixedGutter&&(f.gutters.style.left=m+C+"px")}}function mo(s){if(!s.options.lineNumbers)return!1;var f=s.doc,y=Wi(s.options,f.first+f.size-1),m=s.display;if(y.length!=m.lineNumChars){var C=m.measure.appendChild(z("div",[z("div",y)],"CodeMirror-linenumber CodeMirror-gutter-elt")),N=C.firstChild.offsetWidth,R=C.offsetWidth-N;return m.lineGutter.style.width="",m.lineNumInnerWidth=Math.max(N,m.lineGutter.offsetWidth-R)+1,m.lineNumWidth=m.lineNumInnerWidth+R,m.lineNumChars=m.lineNumInnerWidth?y.length:-1,m.lineGutter.style.width=m.lineNumWidth+"px",Bc(s.display),!0}return!1}function Hc(s,f){for(var y=[],m=!1,C=0;C<s.length;C++){var N=s[C],R=null;if(typeof N!="string"&&(R=N.style,N=N.className),N=="CodeMirror-linenumbers")if(f)m=!0;else continue;y.push({className:N,style:R})}return f&&!m&&y.push({className:"CodeMirror-linenumbers",style:null}),y}function Vf(s){var f=s.gutters,y=s.gutterSpecs;G(f),s.lineGutter=null;for(var m=0;m<y.length;++m){var C=y[m],N=C.className,R=C.style,U=f.appendChild(z("div",null,"CodeMirror-gutter "+N));R&&(U.style.cssText=R),N=="CodeMirror-linenumbers"&&(s.lineGutter=U,U.style.width=(s.lineNumWidth||1)+"px")}f.style.display=y.length?"":"none",Bc(s)}function Gu(s){Vf(s.display),Xt(s),Kf(s)}function wv(s,f,y,m){var C=this;this.input=y,C.scrollbarFiller=z("div",null,"CodeMirror-scrollbar-filler"),C.scrollbarFiller.setAttribute("cm-not-content","true"),C.gutterFiller=z("div",null,"CodeMirror-gutter-filler"),C.gutterFiller.setAttribute("cm-not-content","true"),C.lineDiv=O("div",null,"CodeMirror-code"),C.selectionDiv=z("div",null,null,"position: relative; z-index: 1"),C.cursorDiv=z("div",null,"CodeMirror-cursors"),C.measure=z("div",null,"CodeMirror-measure"),C.lineMeasure=z("div",null,"CodeMirror-measure"),C.lineSpace=O("div",[C.measure,C.lineMeasure,C.selectionDiv,C.cursorDiv,C.lineDiv],null,"position: relative; outline: none");var N=O("div",[C.lineSpace],"CodeMirror-lines");C.mover=z("div",[N],null,"position: relative"),C.sizer=z("div",[C.mover],"CodeMirror-sizer"),C.sizerWidth=null,C.heightForcer=z("div",null,null,"position: absolute; height: "+J+"px; width: 1px;"),C.gutters=z("div",null,"CodeMirror-gutters"),C.lineGutter=null,C.scroller=z("div",[C.sizer,C.heightForcer,C.gutters],"CodeMirror-scroll"),C.scroller.setAttribute("tabIndex","-1"),C.wrapper=z("div",[C.scrollbarFiller,C.gutterFiller,C.scroller],"CodeMirror"),C.wrapper.setAttribute("translate","no"),o&&l<8&&(C.gutters.style.zIndex=-1,C.scroller.style.paddingRight=0),!c&&!(e&&M)&&(C.scroller.draggable=!0),s&&(s.appendChild?s.appendChild(C.wrapper):s(C.wrapper)),C.viewFrom=C.viewTo=f.first,C.reportedViewFrom=C.reportedViewTo=f.first,C.view=[],C.renderedView=null,C.externalMeasured=null,C.viewOffset=0,C.lastWrapHeight=C.lastWrapWidth=0,C.updateLineNumbers=null,C.nativeBarWidth=C.barHeight=C.barWidth=0,C.scrollbarsClipped=!1,C.lineNumWidth=C.lineNumInnerWidth=C.lineNumChars=null,C.alignWidgets=!1,C.cachedCharWidth=C.cachedTextHeight=C.cachedPaddingH=null,C.maxLine=null,C.maxLineLength=0,C.maxLineChanged=!1,C.wheelDX=C.wheelDY=C.wheelStartX=C.wheelStartY=null,C.shift=!1,C.selForContextMenu=null,C.activeTouch=null,C.gutterSpecs=Hc(m.gutters,m.lineNumbers),Vf(C),y.init(C)}var Vd=0,ui=null;o?ui=-.53:e?ui=15:v?ui=-.7:g&&(ui=-1/3);function Qf(s){var f=s.wheelDeltaX,y=s.wheelDeltaY;return f==null&&s.detail&&s.axis==s.HORIZONTAL_AXIS&&(f=s.detail),y==null&&s.detail&&s.axis==s.VERTICAL_AXIS?y=s.detail:y==null&&(y=s.wheelDelta),{x:f,y}}function kv(s){var f=Qf(s);return f.x*=ui,f.y*=ui,f}function Xf(s,f){var y=Qf(f),m=y.x,C=y.y,N=ui;f.deltaMode===0&&(m=f.deltaX,C=f.deltaY,N=1);var R=s.display,U=R.scroller,Z=U.scrollWidth>U.clientWidth,ee=U.scrollHeight>U.clientHeight;if(!!(m&&Z||C&&ee)){if(C&&T&&c){e:for(var he=f.target,ke=R.view;he!=U;he=he.parentNode)for(var Ne=0;Ne<ke.length;Ne++)if(ke[Ne].node==he){s.display.currentWheelTarget=he;break e}}if(m&&!e&&!h&&N!=null){C&&ee&&mr(s,Math.max(0,U.scrollTop+C*N)),Js(s,Math.max(0,U.scrollLeft+m*N)),(!C||C&&ee)&&dr(f),R.wheelStartX=null;return}if(C&&N!=null){var Me=C*N,Pe=s.doc.scrollTop,Ze=Pe+R.wrapper.clientHeight;Me<0?Pe=Math.max(0,Pe+Me-50):Ze=Math.min(s.doc.height,Ze+Me+50),Fc(s,{top:Pe,bottom:Ze})}Vd<20&&f.deltaMode!==0&&(R.wheelStartX==null?(R.wheelStartX=U.scrollLeft,R.wheelStartY=U.scrollTop,R.wheelDX=m,R.wheelDY=C,setTimeout(function(){if(R.wheelStartX!=null){var it=U.scrollLeft-R.wheelStartX,ut=U.scrollTop-R.wheelStartY,pt=ut&&R.wheelDY&&ut/R.wheelDY||it&&R.wheelDX&&it/R.wheelDX;R.wheelStartX=R.wheelStartY=null,pt&&(ui=(ui*Vd+pt)/(Vd+1),++Vd)}},200)):(R.wheelDX+=m,R.wheelDY+=C))}}var Xi=function(s,f){this.ranges=s,this.primIndex=f};Xi.prototype.primary=function(){return this.ranges[this.primIndex]},Xi.prototype.equals=function(s){if(s==this)return!0;if(s.primIndex!=this.primIndex||s.ranges.length!=this.ranges.length)return!1;for(var f=0;f<this.ranges.length;f++){var y=this.ranges[f],m=s.ranges[f];if(!we(y.anchor,m.anchor)||!we(y.head,m.head))return!1}return!0},Xi.prototype.deepCopy=function(){for(var s=[],f=0;f<this.ranges.length;f++)s[f]=new Sn(je(this.ranges[f].anchor),je(this.ranges[f].head));return new Xi(s,this.primIndex)},Xi.prototype.somethingSelected=function(){for(var s=0;s<this.ranges.length;s++)if(!this.ranges[s].empty())return!0;return!1},Xi.prototype.contains=function(s,f){f||(f=s);for(var y=0;y<this.ranges.length;y++){var m=this.ranges[y];if(te(f,m.from())>=0&&te(s,m.to())<=0)return y}return-1};var Sn=function(s,f){this.anchor=s,this.head=f};Sn.prototype.from=function(){return Ft(this.anchor,this.head)},Sn.prototype.to=function(){return Je(this.anchor,this.head)},Sn.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function di(s,f,y){var m=s&&s.options.selectionsMayTouch,C=f[y];f.sort(function(Ne,Me){return te(Ne.from(),Me.from())}),y=ae(f,C);for(var N=1;N<f.length;N++){var R=f[N],U=f[N-1],Z=te(U.to(),R.from());if(m&&!R.empty()?Z>0:Z>=0){var ee=Ft(U.from(),R.from()),he=Je(U.to(),R.to()),ke=U.empty()?R.from()==R.head:U.from()==U.head;N<=y&&--y,f.splice(--N,2,new Sn(ke?he:ee,ke?ee:he))}}return new Xi(f,y)}function ks(s,f){return new Xi([new Sn(s,f||s)],0)}function xs(s){return s.text?Ve(s.from.line+s.text.length-1,ue(s.text).length+(s.text.length==1?s.from.ch:0)):s.to}function ka(s,f){if(te(s,f.from)<0)return s;if(te(s,f.to)<=0)return xs(f);var y=s.line+f.text.length-(f.to.line-f.from.line)-1,m=s.ch;return s.line==f.to.line&&(m+=xs(f).ch-f.to.ch),Ve(y,m)}function jc(s,f){for(var y=[],m=0;m<s.sel.ranges.length;m++){var C=s.sel.ranges[m];y.push(new Sn(ka(C.anchor,f),ka(C.head,f)))}return di(s.cm,y,s.sel.primIndex)}function Jf(s,f,y){return s.line==f.line?Ve(y.line,s.ch-f.ch+y.ch):Ve(y.line+(s.line-f.line),s.ch)}function xv(s,f,y){for(var m=[],C=Ve(s.first,0),N=C,R=0;R<f.length;R++){var U=f[R],Z=Jf(U.from,C,N),ee=Jf(xs(U),C,N);if(C=U.to,N=ee,y=="around"){var he=s.sel.ranges[R],ke=te(he.head,he.anchor)<0;m[R]=new Sn(ke?ee:Z,ke?Z:ee)}else m[R]=new Sn(Z,Z)}return new Xi(m,s.sel.primIndex)}function Wc(s){s.doc.mode=Ki(s.options,s.doc.modeOption),Zu(s)}function Zu(s){s.doc.iter(function(f){f.stateAfter&&(f.stateAfter=null),f.styles&&(f.styles=null)}),s.doc.modeFrontier=s.doc.highlightFrontier=s.doc.first,go(s,100),s.state.modeGen++,s.curOp&&Xt(s)}function Uc(s,f){return f.from.ch==0&&f.to.ch==0&&ue(f.text)==""&&(!s.cm||s.cm.options.wholeLineUpdateBefore)}function Qd(s,f,y,m){function C(pt){return y?y[pt]:null}function N(pt,dt,kt){$s(pt,dt,kt,m),gr(pt,"change",pt,f)}function R(pt,dt){for(var kt=[],It=pt;It<dt;++It)kt.push(new pr(ee[It],C(It),m));return kt}var U=f.from,Z=f.to,ee=f.text,he=Ct(s,U.line),ke=Ct(s,Z.line),Ne=ue(ee),Me=C(ee.length-1),Pe=Z.line-U.line;if(f.full)s.insert(0,R(0,ee.length)),s.remove(ee.length,s.size-ee.length);else if(Uc(s,f)){var Ze=R(0,ee.length-1);N(ke,ke.text,Me),Pe&&s.remove(U.line,Pe),Ze.length&&s.insert(U.line,Ze)}else if(he==ke)if(ee.length==1)N(he,he.text.slice(0,U.ch)+Ne+he.text.slice(Z.ch),Me);else{var it=R(1,ee.length-1);it.push(new pr(Ne+he.text.slice(Z.ch),Me,m)),N(he,he.text.slice(0,U.ch)+ee[0],C(0)),s.insert(U.line+1,it)}else if(ee.length==1)N(he,he.text.slice(0,U.ch)+ee[0]+ke.text.slice(Z.ch),C(0)),s.remove(U.line+1,Pe);else{N(he,he.text.slice(0,U.ch)+ee[0],C(0)),N(ke,Ne+ke.text.slice(Z.ch),Me);var ut=R(1,ee.length-1);Pe>1&&s.remove(U.line+1,Pe-1),s.insert(U.line+1,ut)}gr(s,"change",s,f)}function Cs(s,f,y){function m(C,N,R){if(C.linked)for(var U=0;U<C.linked.length;++U){var Z=C.linked[U];if(Z.doc!=N){var ee=R&&Z.sharedHist;y&&!ee||(f(Z.doc,ee),m(Z.doc,C,ee))}}}m(s,null,!0)}function eh(s,f){if(f.cm)throw new Error("This document is already in use.");s.doc=f,f.cm=s,hs(s),Wc(s),Xd(s),s.options.direction=f.direction,s.options.lineWrapping||qs(s),s.options.mode=f.modeOption,Xt(s)}function Xd(s){(s.doc.direction=="rtl"?F:q)(s.display.lineDiv,"CodeMirror-rtl")}function Yu(s){si(s,function(){Xd(s),Xt(s)})}function tl(s){this.done=[],this.undone=[],this.undoDepth=s?s.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=s?s.maxGeneration:1}function qc(s,f){var y={from:je(f.from),to:xs(f),text:Pr(s,f.from,f.to)};return th(s,y,f.from.line,f.to.line+1),Cs(s,function(m){return th(m,y,f.from.line,f.to.line+1)},!0),y}function $c(s){for(;s.length;){var f=ue(s);if(f.ranges)s.pop();else break}}function Cv(s,f){if(f)return $c(s.done),ue(s.done);if(s.done.length&&!ue(s.done).ranges)return ue(s.done);if(s.done.length>1&&!s.done[s.done.length-2].ranges)return s.done.pop(),ue(s.done)}function bo(s,f,y,m){var C=s.history;C.undone.length=0;var N=+new Date,R,U;if((C.lastOp==m||C.lastOrigin==f.origin&&f.origin&&(f.origin.charAt(0)=="+"&&C.lastModTime>N-(s.cm?s.cm.options.historyEventDelay:500)||f.origin.charAt(0)=="*"))&&(R=Cv(C,C.lastOp==m)))U=ue(R.changes),te(f.from,f.to)==0&&te(f.from,U.to)==0?U.to=xs(f):R.changes.push(qc(s,f));else{var Z=ue(C.done);for((!Z||!Z.ranges)&&zi(s.sel,C.done),R={changes:[qc(s,f)],generation:C.generation},C.done.push(R);C.done.length>C.undoDepth;)C.done.shift(),C.done[0].ranges||C.done.shift()}C.done.push(y),C.generation=++C.maxGeneration,C.lastModTime=C.lastSelTime=N,C.lastOp=C.lastSelOp=m,C.lastOrigin=C.lastSelOrigin=f.origin,U||Tt(s,"historyAdded")}function Gc(s,f,y,m){var C=f.charAt(0);return C=="*"||C=="+"&&y.ranges.length==m.ranges.length&&y.somethingSelected()==m.somethingSelected()&&new Date-s.history.lastSelTime<=(s.cm?s.cm.options.historyEventDelay:500)}function nl(s,f,y,m){var C=s.history,N=m&&m.origin;y==C.lastSelOp||N&&C.lastSelOrigin==N&&(C.lastModTime==C.lastSelTime&&C.lastOrigin==N||Gc(s,N,ue(C.done),f))?C.done[C.done.length-1]=f:zi(f,C.done),C.lastSelTime=+new Date,C.lastSelOrigin=N,C.lastSelOp=y,m&&m.clearRedo!==!1&&$c(C.undone)}function zi(s,f){var y=ue(f);y&&y.ranges&&y.equals(s)||f.push(s)}function th(s,f,y,m){var C=f["spans_"+s.id],N=0;s.iter(Math.max(s.first,y),Math.min(s.first+s.size,m),function(R){R.markedSpans&&((C||(C=f["spans_"+s.id]={}))[N]=R.markedSpans),++N})}function nh(s){if(!s)return null;for(var f,y=0;y<s.length;++y)s[y].marker.explicitlyCleared?f||(f=s.slice(0,y)):f&&f.push(s[y]);return f?f.length?f:null:s}function rh(s,f){var y=f["spans_"+s.id];if(!y)return null;for(var m=[],C=0;C<f.text.length;++C)m.push(nh(y[C]));return m}function Yl(s,f){var y=rh(s,f),m=Us(s,f);if(!y)return m;if(!m)return y;for(var C=0;C<y.length;++C){var N=y[C],R=m[C];if(N&&R){e:for(var U=0;U<R.length;++U){for(var Z=R[U],ee=0;ee<N.length;++ee)if(N[ee].marker==Z.marker)continue e;N.push(Z)}}else R&&(y[C]=R)}return y}function Ji(s,f,y){for(var m=[],C=0;C<s.length;++C){var N=s[C];if(N.ranges){m.push(y?Xi.prototype.deepCopy.call(N):N);continue}var R=N.changes,U=[];m.push({changes:U});for(var Z=0;Z<R.length;++Z){var ee=R[Z],he=void 0;if(U.push({from:ee.from,to:ee.to,text:ee.text}),f)for(var ke in ee)(he=ke.match(/^spans_(\d+)$/))&&ae(f,Number(he[1]))>-1&&(ue(U)[ke]=ee[ke],delete ee[ke])}}return m}function Jd(s,f,y,m){if(m){var C=s.anchor;if(y){var N=te(f,C)<0;N!=te(y,C)<0?(C=f,f=y):N!=te(f,y)<0&&(f=y)}return new Sn(C,f)}else return new Sn(y||f,f)}function ec(s,f,y,m,C){C==null&&(C=s.cm&&(s.cm.display.shift||s.extend)),Vr(s,new Xi([Jd(s.sel.primary(),f,y,C)],0),m)}function Ku(s,f,y){for(var m=[],C=s.cm&&(s.cm.display.shift||s.extend),N=0;N<s.sel.ranges.length;N++)m[N]=Jd(s.sel.ranges[N],f[N],null,C);var R=di(s.cm,m,s.sel.primIndex);Vr(s,R,y)}function Zc(s,f,y,m){var C=s.sel.ranges.slice(0);C[f]=y,Vr(s,di(s.cm,C,s.sel.primIndex),m)}function Yc(s,f,y,m){Vr(s,ks(f,y),m)}function ci(s,f,y){var m={ranges:f.ranges,update:function(C){this.ranges=[];for(var N=0;N<C.length;N++)this.ranges[N]=new Sn(st(s,C[N].anchor),st(s,C[N].head))},origin:y&&y.origin};return Tt(s,"beforeSelectionChange",s,m),s.cm&&Tt(s.cm,"beforeSelectionChange",s.cm,m),m.ranges!=f.ranges?di(s.cm,m.ranges,m.ranges.length-1):f}function tc(s,f,y){var m=s.history.done,C=ue(m);C&&C.ranges?(m[m.length-1]=f,ea(s,f,y)):Vr(s,f,y)}function Vr(s,f,y){ea(s,f,y),nl(s,s.sel,s.cm?s.cm.curOp.id:NaN,y)}function ea(s,f,y){(pn(s,"beforeSelectionChange")||s.cm&&pn(s.cm,"beforeSelectionChange"))&&(f=ci(s,f,y));var m=y&&y.bias||(te(f.primary().head,s.sel.primary().head)<0?-1:1);nc(s,Es(s,f,m,!0)),!(y&&y.scroll===!1)&&s.cm&&s.cm.getOption("readOnly")!="nocursor"&&ms(s.cm)}function nc(s,f){f.equals(s.sel)||(s.sel=f,s.cm&&(s.cm.curOp.updateInput=1,s.cm.curOp.selectionChanged=!0,Rn(s.cm)),gr(s,"cursorActivity",s))}function Vu(s){nc(s,Es(s,s.sel,null,!1))}function Es(s,f,y,m){for(var C,N=0;N<f.ranges.length;N++){var R=f.ranges[N],U=f.ranges.length==s.sel.ranges.length&&s.sel.ranges[N],Z=Qr(s,R.anchor,U&&U.anchor,y,m),ee=Qr(s,R.head,U&&U.head,y,m);(C||Z!=R.anchor||ee!=R.head)&&(C||(C=f.ranges.slice(0,N)),C[N]=new Sn(Z,ee))}return C?di(s.cm,C,f.primIndex):f}function rl(s,f,y,m,C){var N=Ct(s,f.line);if(N.markedSpans)for(var R=0;R<N.markedSpans.length;++R){var U=N.markedSpans[R],Z=U.marker,ee="selectLeft"in Z?!Z.selectLeft:Z.inclusiveLeft,he="selectRight"in Z?!Z.selectRight:Z.inclusiveRight;if((U.from==null||(ee?U.from<=f.ch:U.from<f.ch))&&(U.to==null||(he?U.to>=f.ch:U.to>f.ch))){if(C&&(Tt(Z,"beforeCursorEnter"),Z.explicitlyCleared))if(N.markedSpans){--R;continue}else break;if(!Z.atomic)continue;if(y){var ke=Z.find(m<0?1:-1),Ne=void 0;if((m<0?he:ee)&&(ke=rc(s,ke,-m,ke&&ke.line==f.line?N:null)),ke&&ke.line==f.line&&(Ne=te(ke,y))&&(m<0?Ne<0:Ne>0))return rl(s,ke,f,m,C)}var Me=Z.find(m<0?-1:1);return(m<0?ee:he)&&(Me=rc(s,Me,m,Me.line==f.line?N:null)),Me?rl(s,Me,f,m,C):null}}return f}function Qr(s,f,y,m,C){var N=m||1,R=rl(s,f,y,N,C)||!C&&rl(s,f,y,N,!0)||rl(s,f,y,-N,C)||!C&&rl(s,f,y,-N,!0);return R||(s.cantEdit=!0,Ve(s.first,0))}function rc(s,f,y,m){return y<0&&f.ch==0?f.line>s.first?st(s,Ve(f.line-1)):null:y>0&&f.ch==(m||Ct(s,f.line)).text.length?f.line<s.first+s.size-1?Ve(f.line+1,0):null:new Ve(f.line,f.ch+y)}function ih(s){s.setSelection(Ve(s.firstLine(),0),Ve(s.lastLine()),Ee)}function ah(s,f,y){var m={canceled:!1,from:f.from,to:f.to,text:f.text,origin:f.origin,cancel:function(){return m.canceled=!0}};return y&&(m.update=function(C,N,R,U){C&&(m.from=st(s,C)),N&&(m.to=st(s,N)),R&&(m.text=R),U!==void 0&&(m.origin=U)}),Tt(s,"beforeChange",s,m),s.cm&&Tt(s.cm,"beforeChange",s.cm,m),m.canceled?(s.cm&&(s.cm.curOp.updateInput=2),null):{from:m.from,to:m.to,text:m.text,origin:m.origin}}function Kl(s,f,y){if(s.cm){if(!s.cm.curOp)return br(s.cm,Kl)(s,f,y);if(s.cm.state.suppressEdits)return}if(!((pn(s,"beforeChange")||s.cm&&pn(s.cm,"beforeChange"))&&(f=ah(s,f,!0),!f))){var m=js&&!y&&Du(s,f.from,f.to);if(m)for(var C=m.length-1;C>=0;--C)ic(s,{from:m[C].from,to:m[C].to,text:C?[""]:f.text,origin:f.origin});else ic(s,f)}}function ic(s,f){if(!(f.text.length==1&&f.text[0]==""&&te(f.from,f.to)==0)){var y=jc(s,f);bo(s,f,y,s.cm?s.cm.curOp.id:NaN),Ql(s,f,y,Us(s,f));var m=[];Cs(s,function(C,N){!N&&ae(m,C.history)==-1&&(sh(C.history,f),m.push(C.history)),Ql(C,f,null,Us(C,f))})}}function ac(s,f,y){var m=s.cm&&s.cm.state.suppressEdits;if(!(m&&!y)){for(var C=s.history,N,R=s.sel,U=f=="undo"?C.done:C.undone,Z=f=="undo"?C.undone:C.done,ee=0;ee<U.length&&(N=U[ee],!(y?N.ranges&&!N.equals(s.sel):!N.ranges));ee++);if(ee!=U.length){for(C.lastOrigin=C.lastSelOrigin=null;;)if(N=U.pop(),N.ranges){if(zi(N,Z),y&&!N.equals(s.sel)){Vr(s,N,{clearRedo:!1});return}R=N}else if(m){U.push(N);return}else break;var he=[];zi(R,Z),Z.push({changes:he,generation:C.generation}),C.generation=N.generation||++C.maxGeneration;for(var ke=pn(s,"beforeChange")||s.cm&&pn(s.cm,"beforeChange"),Ne=function(Ze){var it=N.changes[Ze];if(it.origin=f,ke&&!ah(s,it,!1))return U.length=0,{};he.push(qc(s,it));var ut=Ze?jc(s,it):ue(U);Ql(s,it,ut,Yl(s,it)),!Ze&&s.cm&&s.cm.scrollIntoView({from:it.from,to:xs(it)});var pt=[];Cs(s,function(dt,kt){!kt&&ae(pt,dt.history)==-1&&(sh(dt.history,it),pt.push(dt.history)),Ql(dt,it,null,Yl(dt,it))})},Me=N.changes.length-1;Me>=0;--Me){var Pe=Ne(Me);if(Pe)return Pe.v}}}}function Vl(s,f){if(f!=0&&(s.first+=f,s.sel=new Xi(Te(s.sel.ranges,function(C){return new Sn(Ve(C.anchor.line+f,C.anchor.ch),Ve(C.head.line+f,C.head.ch))}),s.sel.primIndex),s.cm)){Xt(s.cm,s.first,s.first-f,f);for(var y=s.cm.display,m=y.viewFrom;m<y.viewTo;m++)vs(s.cm,m,"gutter")}}function Ql(s,f,y,m){if(s.cm&&!s.cm.curOp)return br(s.cm,Ql)(s,f,y,m);if(f.to.line<s.first){Vl(s,f.text.length-1-(f.to.line-f.from.line));return}if(!(f.from.line>s.lastLine())){if(f.from.line<s.first){var C=f.text.length-1-(s.first-f.from.line);Vl(s,C),f={from:Ve(s.first,0),to:Ve(f.to.line+C,f.to.ch),text:[ue(f.text)],origin:f.origin}}var N=s.lastLine();f.to.line>N&&(f={from:f.from,to:Ve(N,Ct(s,N).text.length),text:[f.text[0]],origin:f.origin}),f.removed=Pr(s,f.from,f.to),y||(y=jc(s,f)),s.cm?Ev(s.cm,f,m):Qd(s,f,m),ea(s,y,Ee),s.cantEdit&&Qr(s,Ve(s.firstLine(),0))&&(s.cantEdit=!1)}}function Ev(s,f,y){var m=s.doc,C=s.display,N=f.from,R=f.to,U=!1,Z=N.line;s.options.lineWrapping||(Z=hn(Dr(Ct(m,N.line))),m.iter(Z,R.line+1,function(Me){if(Me==C.maxLine)return U=!0,!0})),m.sel.contains(f.from,f.to)>-1&&Rn(s),Qd(m,f,y,qf(s)),s.options.lineWrapping||(m.iter(Z,N.line+f.text.length,function(Me){var Pe=ls(Me);Pe>C.maxLineLength&&(C.maxLine=Me,C.maxLineLength=Pe,C.maxLineChanged=!0,U=!1)}),U&&(s.curOp.updateMaxLine=!0)),Rd(m,N.line),go(s,400);var ee=f.text.length-(R.line-N.line)-1;f.full?Xt(s):N.line==R.line&&f.text.length==1&&!Uc(s.doc,f)?vs(s,N.line,"text"):Xt(s,N.line,R.line+1,ee);var he=pn(s,"changes"),ke=pn(s,"change");if(ke||he){var Ne={from:N,to:R,text:f.text,removed:f.removed,origin:f.origin};ke&&gr(s,"change",s,Ne),he&&(s.curOp.changeObjs||(s.curOp.changeObjs=[])).push(Ne)}s.display.selForContextMenu=null}function Xl(s,f,y,m,C){var N;m||(m=y),te(m,y)<0&&(N=[m,y],y=N[0],m=N[1]),typeof f=="string"&&(f=s.splitLines(f)),Kl(s,{from:y,to:m,text:f,origin:C})}function Jl(s,f,y,m){y<s.line?s.line+=m:f<s.line&&(s.line=f,s.ch=0)}function oh(s,f,y,m){for(var C=0;C<s.length;++C){var N=s[C],R=!0;if(N.ranges){N.copied||(N=s[C]=N.deepCopy(),N.copied=!0);for(var U=0;U<N.ranges.length;U++)Jl(N.ranges[U].anchor,f,y,m),Jl(N.ranges[U].head,f,y,m);continue}for(var Z=0;Z<N.changes.length;++Z){var ee=N.changes[Z];if(y<ee.from.line)ee.from=Ve(ee.from.line+m,ee.from.ch),ee.to=Ve(ee.to.line+m,ee.to.ch);else if(f<=ee.to.line){R=!1;break}}R||(s.splice(0,C+1),C=0)}}function sh(s,f){var y=f.from.line,m=f.to.line,C=f.text.length-(m-y)-1;oh(s.done,y,m,C),oh(s.undone,y,m,C)}function il(s,f,y,m){var C=f,N=f;return typeof f=="number"?N=Ct(s,gt(s,f)):C=hn(f),C==null?null:(m(N,C)&&s.cm&&vs(s.cm,C,y),N)}function eu(s){this.lines=s,this.parent=null;for(var f=0,y=0;y<s.length;++y)s[y].parent=this,f+=s[y].height;this.height=f}eu.prototype={chunkSize:function(){return this.lines.length},removeInner:function(s,f){for(var y=s,m=s+f;y<m;++y){var C=this.lines[y];this.height-=C.height,Ou(C),gr(C,"delete")}this.lines.splice(s,f)},collapse:function(s){s.push.apply(s,this.lines)},insertInner:function(s,f,y){this.height+=y,this.lines=this.lines.slice(0,s).concat(f).concat(this.lines.slice(s));for(var m=0;m<f.length;++m)f[m].parent=this},iterN:function(s,f,y){for(var m=s+f;s<m;++s)if(y(this.lines[s]))return!0}};function Qu(s){this.children=s;for(var f=0,y=0,m=0;m<s.length;++m){var C=s[m];f+=C.chunkSize(),y+=C.height,C.parent=this}this.size=f,this.height=y,this.parent=null}Qu.prototype={chunkSize:function(){return this.size},removeInner:function(s,f){this.size-=f;for(var y=0;y<this.children.length;++y){var m=this.children[y],C=m.chunkSize();if(s<C){var N=Math.min(f,C-s),R=m.height;if(m.removeInner(s,N),this.height-=R-m.height,C==N&&(this.children.splice(y--,1),m.parent=null),(f-=N)==0)break;s=0}else s-=C}if(this.size-f<25&&(this.children.length>1||!(this.children[0]instanceof eu))){var U=[];this.collapse(U),this.children=[new eu(U)],this.children[0].parent=this}},collapse:function(s){for(var f=0;f<this.children.length;++f)this.children[f].collapse(s)},insertInner:function(s,f,y){this.size+=f.length,this.height+=y;for(var m=0;m<this.children.length;++m){var C=this.children[m],N=C.chunkSize();if(s<=N){if(C.insertInner(s,f,y),C.lines&&C.lines.length>50){for(var R=C.lines.length%25+25,U=R;U<C.lines.length;){var Z=new eu(C.lines.slice(U,U+=25));C.height-=Z.height,this.children.splice(++m,0,Z),Z.parent=this}C.lines=C.lines.slice(0,R),this.maybeSpill()}break}s-=N}},maybeSpill:function(){if(!(this.children.length<=10)){var s=this;do{var f=s.children.splice(s.children.length-5,5),y=new Qu(f);if(s.parent){s.size-=y.size,s.height-=y.height;var C=ae(s.parent.children,s);s.parent.children.splice(C+1,0,y)}else{var m=new Qu(s.children);m.parent=s,s.children=[m,y],s=m}y.parent=s.parent}while(s.children.length>10);s.parent.maybeSpill()}},iterN:function(s,f,y){for(var m=0;m<this.children.length;++m){var C=this.children[m],N=C.chunkSize();if(s<N){var R=Math.min(f,N-s);if(C.iterN(s,R,y))return!0;if((f-=R)==0)break;s=0}else s-=N}}};var Xu=function(s,f,y){if(y)for(var m in y)y.hasOwnProperty(m)&&(this[m]=y[m]);this.doc=s,this.node=f};Xu.prototype.clear=function(){var s=this.doc.cm,f=this.line.widgets,y=this.line,m=hn(y);if(!(m==null||!f)){for(var C=0;C<f.length;++C)f[C]==this&&f.splice(C--,1);f.length||(y.widgets=null);var N=Zt(this);Hr(y,Math.max(0,y.height-N)),s&&(si(s,function(){lh(s,y,-N),vs(s,m,"widget")}),gr(s,"lineWidgetCleared",s,this,m))}},Xu.prototype.changed=function(){var s=this,f=this.height,y=this.doc.cm,m=this.line;this.height=null;var C=Zt(this)-f;!C||(ir(this.doc,m)||Hr(m,m.height+C),y&&si(y,function(){y.curOp.forceUpdate=!0,lh(y,m,C),gr(y,"lineWidgetChanged",y,s,hn(m))}))},sr(Xu);function lh(s,f,y){qn(f)<(s.curOp&&s.curOp.scrollTop||s.doc.scrollTop)&&$l(s,y)}function uh(s,f,y,m){var C=new Xu(s,y,m),N=s.cm;return N&&C.noHScroll&&(N.display.alignWidgets=!0),il(s,f,"widget",function(R){var U=R.widgets||(R.widgets=[]);if(C.insertAt==null?U.push(C):U.splice(Math.min(U.length,Math.max(0,C.insertAt)),0,C),C.line=R,N&&!ir(s,R)){var Z=qn(R)<s.scrollTop;Hr(R,R.height+Zt(C)),Z&&$l(N,C.height),N.curOp.forceUpdate=!0}return!0}),N&&gr(N,"lineWidgetAdded",N,C,typeof f=="number"?f:hn(f)),C}var oc=0,_s=function(s,f){this.lines=[],this.type=f,this.doc=s,this.id=++oc};_s.prototype.clear=function(){if(!this.explicitlyCleared){var s=this.doc.cm,f=s&&!s.curOp;if(f&&qa(s),pn(this,"clear")){var y=this.find();y&&gr(this,"clear",y.from,y.to)}for(var m=null,C=null,N=0;N<this.lines.length;++N){var R=this.lines[N],U=os(R.markedSpans,this);s&&!this.collapsed?vs(s,hn(R),"text"):s&&(U.to!=null&&(C=hn(R)),U.from!=null&&(m=hn(R))),R.markedSpans=Ws(R.markedSpans,U),U.from==null&&this.collapsed&&!ir(this.doc,R)&&s&&Hr(R,fs(s.display))}if(s&&this.collapsed&&!s.options.lineWrapping)for(var Z=0;Z<this.lines.length;++Z){var ee=Dr(this.lines[Z]),he=ls(ee);he>s.display.maxLineLength&&(s.display.maxLine=ee,s.display.maxLineLength=he,s.display.maxLineChanged=!0)}m!=null&&s&&this.collapsed&&Xt(s,m,C+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,s&&Vu(s.doc)),s&&gr(s,"markerCleared",s,this,m,C),f&&po(s),this.parent&&this.parent.clear()}},_s.prototype.find=function(s,f){s==null&&this.type=="bookmark"&&(s=1);for(var y,m,C=0;C<this.lines.length;++C){var N=this.lines[C],R=os(N.markedSpans,this);if(R.from!=null&&(y=Ve(f?N:hn(N),R.from),s==-1))return y;if(R.to!=null&&(m=Ve(f?N:hn(N),R.to),s==1))return m}return y&&{from:y,to:m}},_s.prototype.changed=function(){var s=this,f=this.find(-1,!0),y=this,m=this.doc.cm;!f||!m||si(m,function(){var C=f.line,N=hn(f.line),R=Oc(m,N);if(R&&(Hf(R),m.curOp.selectionChanged=m.curOp.forceUpdate=!0),m.curOp.updateMaxLine=!0,!ir(y.doc,C)&&y.height!=null){var U=y.height;y.height=null;var Z=Zt(y)-U;Z&&Hr(C,C.height+Z)}gr(m,"markerChanged",m,s)})},_s.prototype.attachLine=function(s){if(!this.lines.length&&this.doc.cm){var f=this.doc.cm.curOp;(!f.maybeHiddenMarkers||ae(f.maybeHiddenMarkers,this)==-1)&&(f.maybeUnhiddenMarkers||(f.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(s)},_s.prototype.detachLine=function(s){if(this.lines.splice(ae(this.lines,s),1),!this.lines.length&&this.doc.cm){var f=this.doc.cm.curOp;(f.maybeHiddenMarkers||(f.maybeHiddenMarkers=[])).push(this)}},sr(_s);function Ss(s,f,y,m,C){if(m&&m.shared)return dh(s,f,y,m,C);if(s.cm&&!s.cm.curOp)return br(s.cm,Ss)(s,f,y,m,C);var N=new _s(s,C),R=te(f,y);if(m&&j(m,N,!1),R>0||R==0&&N.clearWhenEmpty!==!1)return N;if(N.replacedWith&&(N.collapsed=!0,N.widgetNode=O("span",[N.replacedWith],"CodeMirror-widget"),m.handleMouseEvents||N.widgetNode.setAttribute("cm-ignore-events","true"),m.insertLeft&&(N.widgetNode.insertLeft=!0)),N.collapsed){if(Lu(s,f.line,f,y,N)||f.line!=y.line&&Lu(s,y.line,f,y,N))throw new Error("Inserting collapsed marker partially overlapping an existing one");Au()}N.addToHistory&&bo(s,{from:f,to:y,origin:"markText"},s.sel,NaN);var U=f.line,Z=s.cm,ee;if(s.iter(U,y.line+1,function(ke){Z&&N.collapsed&&!Z.options.lineWrapping&&Dr(ke)==Z.display.maxLine&&(ee=!0),N.collapsed&&U!=f.line&&Hr(ke,0),Fd(ke,new Il(N,U==f.line?f.ch:null,U==y.line?y.ch:null),s.cm&&s.cm.curOp),++U}),N.collapsed&&s.iter(f.line,y.line+1,function(ke){ir(s,ke)&&Hr(ke,0)}),N.clearOnEnter&&vt(N,"beforeCursorEnter",function(){return N.clear()}),N.readOnly&&(Tu(),(s.history.done.length||s.history.undone.length)&&s.clearHistory()),N.collapsed&&(N.id=++oc,N.atomic=!0),Z){if(ee&&(Z.curOp.updateMaxLine=!0),N.collapsed)Xt(Z,f.line,y.line+1);else if(N.className||N.startStyle||N.endStyle||N.css||N.attributes||N.title)for(var he=f.line;he<=y.line;he++)vs(Z,he,"text");N.atomic&&Vu(Z.doc),gr(Z,"markerAdded",Z,N)}return N}var tu=function(s,f){this.markers=s,this.primary=f;for(var y=0;y<s.length;++y)s[y].parent=this};tu.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var s=0;s<this.markers.length;++s)this.markers[s].clear();gr(this,"clear")}},tu.prototype.find=function(s,f){return this.primary.find(s,f)},sr(tu);function dh(s,f,y,m,C){m=j(m),m.shared=!1;var N=[Ss(s,f,y,m,C)],R=N[0],U=m.widgetNode;return Cs(s,function(Z){U&&(m.widgetNode=U.cloneNode(!0)),N.push(Ss(Z,st(Z,f),st(Z,y),m,C));for(var ee=0;ee<Z.linked.length;++ee)if(Z.linked[ee].isParent)return;R=ue(N)}),new tu(N,R)}function Kc(s){return s.findMarks(Ve(s.first,0),s.clipPos(Ve(s.lastLine())),function(f){return f.parent})}function sc(s,f){for(var y=0;y<f.length;y++){var m=f[y],C=m.find(),N=s.clipPos(C.from),R=s.clipPos(C.to);if(te(N,R)){var U=Ss(s,N,R,m.primary,m.primary.type);m.markers.push(U),U.parent=m}}}function _v(s){for(var f=function(m){var C=s[m],N=[C.primary.doc];Cs(C.primary.doc,function(Z){return N.push(Z)});for(var R=0;R<C.markers.length;R++){var U=C.markers[R];ae(N,U.doc)==-1&&(U.parent=null,C.markers.splice(R--,1))}},y=0;y<s.length;y++)f(y)}var ch=0,wi=function(s,f,y,m,C){if(!(this instanceof wi))return new wi(s,f,y,m,C);y==null&&(y=0),Qu.call(this,[new eu([new pr("",null)])]),this.first=y,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=y;var N=Ve(y,0);this.sel=ks(N),this.history=new tl(null),this.id=++ch,this.modeOption=f,this.lineSep=m,this.direction=C=="rtl"?"rtl":"ltr",this.extend=!1,typeof s=="string"&&(s=this.splitLines(s)),Qd(this,{from:N,to:N,text:s}),Vr(this,ks(N),Ee)};wi.prototype=et(Qu.prototype,{constructor:wi,iter:function(s,f,y){y?this.iterN(s-this.first,f-s,y):this.iterN(this.first,this.first+this.size,s)},insert:function(s,f){for(var y=0,m=0;m<f.length;++m)y+=f[m].height;this.insertInner(s-this.first,f,y)},remove:function(s,f){this.removeInner(s-this.first,f)},getValue:function(s){var f=ro(this,this.first,this.first+this.size);return s===!1?f:f.join(s||this.lineSeparator())},setValue:le(function(s){var f=Ve(this.first,0),y=this.first+this.size-1;Kl(this,{from:f,to:Ve(y,Ct(this,y).text.length),text:this.splitLines(s),origin:"setValue",full:!0},!0),this.cm&&Wu(this.cm,0,0),Vr(this,ks(f),Ee)}),replaceRange:function(s,f,y,m){f=st(this,f),y=y?st(this,y):f,Xl(this,s,f,y,m)},getRange:function(s,f,y){var m=Pr(this,st(this,s),st(this,f));return y===!1?m:y===""?m.join(""):m.join(y||this.lineSeparator())},getLine:function(s){var f=this.getLineHandle(s);return f&&f.text},getLineHandle:function(s){if(ga(this,s))return Ct(this,s)},getLineNumber:function(s){return hn(s)},getLineHandleVisualStart:function(s){return typeof s=="number"&&(s=Ct(this,s)),Dr(s)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(s){return st(this,s)},getCursor:function(s){var f=this.sel.primary(),y;return s==null||s=="head"?y=f.head:s=="anchor"?y=f.anchor:s=="end"||s=="to"||s===!1?y=f.to():y=f.from(),y},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:le(function(s,f,y){Yc(this,st(this,typeof s=="number"?Ve(s,f||0):s),null,y)}),setSelection:le(function(s,f,y){Yc(this,st(this,s),st(this,f||s),y)}),extendSelection:le(function(s,f,y){ec(this,st(this,s),f&&st(this,f),y)}),extendSelections:le(function(s,f){Ku(this,Wn(this,s),f)}),extendSelectionsBy:le(function(s,f){var y=Te(this.sel.ranges,s);Ku(this,Wn(this,y),f)}),setSelections:le(function(s,f,y){if(!!s.length){for(var m=[],C=0;C<s.length;C++)m[C]=new Sn(st(this,s[C].anchor),st(this,s[C].head||s[C].anchor));f==null&&(f=Math.min(s.length-1,this.sel.primIndex)),Vr(this,di(this.cm,m,f),y)}}),addSelection:le(function(s,f,y){var m=this.sel.ranges.slice(0);m.push(new Sn(st(this,s),st(this,f||s))),Vr(this,di(this.cm,m,m.length-1),y)}),getSelection:function(s){for(var f=this.sel.ranges,y,m=0;m<f.length;m++){var C=Pr(this,f[m].from(),f[m].to());y=y?y.concat(C):C}return s===!1?y:y.join(s||this.lineSeparator())},getSelections:function(s){for(var f=[],y=this.sel.ranges,m=0;m<y.length;m++){var C=Pr(this,y[m].from(),y[m].to());s!==!1&&(C=C.join(s||this.lineSeparator())),f[m]=C}return f},replaceSelection:function(s,f,y){for(var m=[],C=0;C<this.sel.ranges.length;C++)m[C]=s;this.replaceSelections(m,f,y||"+input")},replaceSelections:le(function(s,f,y){for(var m=[],C=this.sel,N=0;N<C.ranges.length;N++){var R=C.ranges[N];m[N]={from:R.from(),to:R.to(),text:this.splitLines(s[N]),origin:y}}for(var U=f&&f!="end"&&xv(this,m,f),Z=m.length-1;Z>=0;Z--)Kl(this,m[Z]);U?tc(this,U):this.cm&&ms(this.cm)}),undo:le(function(){ac(this,"undo")}),redo:le(function(){ac(this,"redo")}),undoSelection:le(function(){ac(this,"undo",!0)}),redoSelection:le(function(){ac(this,"redo",!0)}),setExtending:function(s){this.extend=s},getExtending:function(){return this.extend},historySize:function(){for(var s=this.history,f=0,y=0,m=0;m<s.done.length;m++)s.done[m].ranges||++f;for(var C=0;C<s.undone.length;C++)s.undone[C].ranges||++y;return{undo:f,redo:y}},clearHistory:function(){var s=this;this.history=new tl(this.history),Cs(this,function(f){return f.history=s.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(s){return s&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(s){return this.history.generation==(s||this.cleanGeneration)},getHistory:function(){return{done:Ji(this.history.done),undone:Ji(this.history.undone)}},setHistory:function(s){var f=this.history=new tl(this.history);f.done=Ji(s.done.slice(0),null,!0),f.undone=Ji(s.undone.slice(0),null,!0)},setGutterMarker:le(function(s,f,y){return il(this,s,"gutter",function(m){var C=m.gutterMarkers||(m.gutterMarkers={});return C[f]=y,!y&&Ue(C)&&(m.gutterMarkers=null),!0})}),clearGutter:le(function(s){var f=this;this.iter(function(y){y.gutterMarkers&&y.gutterMarkers[s]&&il(f,y,"gutter",function(){return y.gutterMarkers[s]=null,Ue(y.gutterMarkers)&&(y.gutterMarkers=null),!0})})}),lineInfo:function(s){var f;if(typeof s=="number"){if(!ga(this,s)||(f=s,s=Ct(this,s),!s))return null}else if(f=hn(s),f==null)return null;return{line:f,handle:s,text:s.text,gutterMarkers:s.gutterMarkers,textClass:s.textClass,bgClass:s.bgClass,wrapClass:s.wrapClass,widgets:s.widgets}},addLineClass:le(function(s,f,y){return il(this,s,f=="gutter"?"gutter":"class",function(m){var C=f=="text"?"textClass":f=="background"?"bgClass":f=="gutter"?"gutterClass":"wrapClass";if(!m[C])m[C]=y;else{if($(y).test(m[C]))return!1;m[C]+=" "+y}return!0})}),removeLineClass:le(function(s,f,y){return il(this,s,f=="gutter"?"gutter":"class",function(m){var C=f=="text"?"textClass":f=="background"?"bgClass":f=="gutter"?"gutterClass":"wrapClass",N=m[C];if(N)if(y==null)m[C]=null;else{var R=N.match($(y));if(!R)return!1;var U=R.index+R[0].length;m[C]=N.slice(0,R.index)+(!R.index||U==N.length?"":" ")+N.slice(U)||null}else return!1;return!0})}),addLineWidget:le(function(s,f,y){return uh(this,s,f,y)}),removeLineWidget:function(s){s.clear()},markText:function(s,f,y){return Ss(this,st(this,s),st(this,f),y,y&&y.type||"range")},setBookmark:function(s,f){var y={replacedWith:f&&(f.nodeType==null?f.widget:f),insertLeft:f&&f.insertLeft,clearWhenEmpty:!1,shared:f&&f.shared,handleMouseEvents:f&&f.handleMouseEvents};return s=st(this,s),Ss(this,s,s,y,"bookmark")},findMarksAt:function(s){s=st(this,s);var f=[],y=Ct(this,s.line).markedSpans;if(y)for(var m=0;m<y.length;++m){var C=y[m];(C.from==null||C.from<=s.ch)&&(C.to==null||C.to>=s.ch)&&f.push(C.marker.parent||C.marker)}return f},findMarks:function(s,f,y){s=st(this,s),f=st(this,f);var m=[],C=s.line;return this.iter(s.line,f.line+1,function(N){var R=N.markedSpans;if(R)for(var U=0;U<R.length;U++){var Z=R[U];!(Z.to!=null&&C==s.line&&s.ch>=Z.to||Z.from==null&&C!=s.line||Z.from!=null&&C==f.line&&Z.from>=f.ch)&&(!y||y(Z.marker))&&m.push(Z.marker.parent||Z.marker)}++C}),m},getAllMarks:function(){var s=[];return this.iter(function(f){var y=f.markedSpans;if(y)for(var m=0;m<y.length;++m)y[m].from!=null&&s.push(y[m].marker)}),s},posFromIndex:function(s){var f,y=this.first,m=this.lineSeparator().length;return this.iter(function(C){var N=C.text.length+m;if(N>s)return f=s,!0;s-=N,++y}),st(this,Ve(y,f))},indexFromPos:function(s){s=st(this,s);var f=s.ch;if(s.line<this.first||s.ch<0)return 0;var y=this.lineSeparator().length;return this.iter(this.first,s.line,function(m){f+=m.text.length+y}),f},copy:function(s){var f=new wi(ro(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return f.scrollTop=this.scrollTop,f.scrollLeft=this.scrollLeft,f.sel=this.sel,f.extend=!1,s&&(f.history.undoDepth=this.history.undoDepth,f.setHistory(this.getHistory())),f},linkedDoc:function(s){s||(s={});var f=this.first,y=this.first+this.size;s.from!=null&&s.from>f&&(f=s.from),s.to!=null&&s.to<y&&(y=s.to);var m=new wi(ro(this,f,y),s.mode||this.modeOption,f,this.lineSep,this.direction);return s.sharedHist&&(m.history=this.history),(this.linked||(this.linked=[])).push({doc:m,sharedHist:s.sharedHist}),m.linked=[{doc:this,isParent:!0,sharedHist:s.sharedHist}],sc(m,Kc(this)),m},unlinkDoc:function(s){if(s instanceof Vn&&(s=s.doc),this.linked)for(var f=0;f<this.linked.length;++f){var y=this.linked[f];if(y.doc==s){this.linked.splice(f,1),s.unlinkDoc(this),_v(Kc(this));break}}if(s.history==this.history){var m=[s.id];Cs(s,function(C){return m.push(C.id)},!0),s.history=new tl(null),s.history.done=Ji(this.history.done,m),s.history.undone=Ji(this.history.undone,m)}},iterLinkedDocs:function(s){Cs(this,s)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(s){return this.lineSep?s.split(this.lineSep):ri(s)},lineSeparator:function(){return this.lineSep||`
`},setDirection:le(function(s){s!="rtl"&&(s="ltr"),s!=this.direction&&(this.direction=s,this.iter(function(f){return f.order=null}),this.cm&&Yu(this.cm))})}),wi.prototype.eachLine=wi.prototype.iter;var fh=0;function hh(s){var f=this;if(Qc(f),!(Dn(f,s)||Bt(f.display,s))){dr(s),o&&(fh=+new Date);var y=fo(f,s,!0),m=s.dataTransfer.files;if(!(!y||f.isReadOnly()))if(m&&m.length&&window.FileReader&&window.File)for(var C=m.length,N=Array(C),R=0,U=function(){++R==C&&br(f,function(){y=st(f.doc,y);var Me={from:y,to:y,text:f.doc.splitLines(N.filter(function(Pe){return Pe!=null}).join(f.doc.lineSeparator())),origin:"paste"};Kl(f.doc,Me),tc(f.doc,ks(st(f.doc,y),st(f.doc,xs(Me))))})()},Z=function(Me,Pe){if(f.options.allowDropFileTypes&&ae(f.options.allowDropFileTypes,Me.type)==-1){U();return}var Ze=new FileReader;Ze.onerror=function(){return U()},Ze.onload=function(){var it=Ze.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(it)){U();return}N[Pe]=it,U()},Ze.readAsText(Me)},ee=0;ee<m.length;ee++)Z(m[ee],ee);else{if(f.state.draggingText&&f.doc.sel.contains(y)>-1){f.state.draggingText(s),setTimeout(function(){return f.display.input.focus()},20);return}try{var he=s.dataTransfer.getData("Text");if(he){var ke;if(f.state.draggingText&&!f.state.draggingText.copy&&(ke=f.listSelections()),ea(f.doc,ks(y,y)),ke)for(var Ne=0;Ne<ke.length;++Ne)Xl(f.doc,"",ke[Ne].anchor,ke[Ne].head,"drag");f.replaceSelection(he,"around","paste"),f.display.input.focus()}}catch{}}}}function Sv(s,f){if(o&&(!s.state.draggingText||+new Date-fh<100)){ji(f);return}if(!(Dn(s,f)||Bt(s.display,f))&&(f.dataTransfer.setData("Text",s.getSelection()),f.dataTransfer.effectAllowed="copyMove",f.dataTransfer.setDragImage&&!g)){var y=z("img",null,null,"position: fixed; left: 0; top: 0;");y.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",h&&(y.width=y.height=1,s.display.wrapper.appendChild(y),y._top=y.offsetTop),f.dataTransfer.setDragImage(y,0,0),h&&y.parentNode.removeChild(y)}}function Vc(s,f){var y=fo(s,f);if(!!y){var m=document.createDocumentFragment();vo(s,y,m),s.display.dragCursor||(s.display.dragCursor=z("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),s.display.lineSpace.insertBefore(s.display.dragCursor,s.display.cursorDiv)),H(s.display.dragCursor,m)}}function Qc(s){s.display.dragCursor&&(s.display.lineSpace.removeChild(s.display.dragCursor),s.display.dragCursor=null)}function lc(s){if(!!document.getElementsByClassName){for(var f=document.getElementsByClassName("CodeMirror"),y=[],m=0;m<f.length;m++){var C=f[m].CodeMirror;C&&y.push(C)}y.length&&y[0].operation(function(){for(var N=0;N<y.length;N++)s(y[N])})}}var vh=!1;function Xc(){vh||(an(),vh=!0)}function an(){var s;vt(window,"resize",function(){s==null&&(s=setTimeout(function(){s=null,lc(Mv)},100))}),vt(window,"blur",function(){return lc(Qs)})}function Mv(s){var f=s.display;f.cachedCharWidth=f.cachedTextHeight=f.cachedPaddingH=null,f.scrollbarsClipped=!1,s.setSize()}for(var Ms={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Lo=0;Lo<10;Lo++)Ms[Lo+48]=Ms[Lo+96]=String(Lo);for(var Ju=65;Ju<=90;Ju++)Ms[Ju]=String.fromCharCode(Ju);for(var ed=1;ed<=12;ed++)Ms[ed+111]=Ms[ed+63235]="F"+ed;var Oo={};Oo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Oo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Oo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Oo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Oo.default=T?Oo.macDefault:Oo.pcDefault;function xa(s){var f=s.split(/-(?!$)/);s=f[f.length-1];for(var y,m,C,N,R=0;R<f.length-1;R++){var U=f[R];if(/^(cmd|meta|m)$/i.test(U))N=!0;else if(/^a(lt)?$/i.test(U))y=!0;else if(/^(c|ctrl|control)$/i.test(U))m=!0;else if(/^s(hift)?$/i.test(U))C=!0;else throw new Error("Unrecognized modifier name: "+U)}return y&&(s="Alt-"+s),m&&(s="Ctrl-"+s),N&&(s="Cmd-"+s),C&&(s="Shift-"+s),s}function Tv(s){var f={};for(var y in s)if(s.hasOwnProperty(y)){var m=s[y];if(/^(name|fallthrough|(de|at)tach)$/.test(y))continue;if(m=="..."){delete s[y];continue}for(var C=Te(y.split(" "),xa),N=0;N<C.length;N++){var R=void 0,U=void 0;N==C.length-1?(U=C.join(" "),R=m):(U=C.slice(0,N+1).join(" "),R="...");var Z=f[U];if(!Z)f[U]=R;else if(Z!=R)throw new Error("Inconsistent bindings for "+U)}delete s[y]}for(var ee in f)s[ee]=f[ee];return s}function zo(s,f,y,m){f=ki(f);var C=f.call?f.call(s,m):f[s];if(C===!1)return"nothing";if(C==="...")return"multi";if(C!=null&&y(C))return"handled";if(f.fallthrough){if(Object.prototype.toString.call(f.fallthrough)!="[object Array]")return zo(s,f.fallthrough,y,m);for(var N=0;N<f.fallthrough.length;N++){var R=zo(s,f.fallthrough[N],y,m);if(R)return R}}}function uc(s){var f=typeof s=="string"?s:Ms[s.keyCode];return f=="Ctrl"||f=="Alt"||f=="Shift"||f=="Mod"}function Jc(s,f,y){var m=s;return f.altKey&&m!="Alt"&&(s="Alt-"+s),(P?f.metaKey:f.ctrlKey)&&m!="Ctrl"&&(s="Ctrl-"+s),(P?f.ctrlKey:f.metaKey)&&m!="Mod"&&(s="Cmd-"+s),!y&&f.shiftKey&&m!="Shift"&&(s="Shift-"+s),s}function ef(s,f){if(h&&s.keyCode==34&&s.char)return!1;var y=Ms[s.keyCode];return y==null||s.altGraphKey?!1:(s.keyCode==3&&s.code&&(y=s.code),Jc(y,s,f))}function ki(s){return typeof s=="string"?Oo[s]:s}function ta(s,f){for(var y=s.doc.sel.ranges,m=[],C=0;C<y.length;C++){for(var N=f(y[C]);m.length&&te(N.from,ue(m).to)<=0;){var R=m.pop();if(te(R.from,N.from)<0){N.from=R.from;break}}m.push(N)}si(s,function(){for(var U=m.length-1;U>=0;U--)Xl(s.doc,"",m[U].from,m[U].to,"+delete");ms(s)})}function td(s,f,y){var m=nt(s.text,f+y,y);return m<0||m>s.text.length?null:m}function dc(s,f,y){var m=td(s,f.ch,y);return m==null?null:new Ve(f.line,m,y<0?"after":"before")}function nu(s,f,y,m,C){if(s){f.doc.direction=="rtl"&&(C=-C);var N=zn(y,f.doc.direction);if(N){var R=C<0?ue(N):N[0],U=C<0==(R.level==1),Z=U?"after":"before",ee;if(R.level>0||f.doc.direction=="rtl"){var he=Wa(f,y);ee=C<0?y.text.length-1:0;var ke=co(f,he,ee).top;ee=wt(function(Ne){return co(f,he,Ne).top==ke},C<0==(R.level==1)?R.from:R.to-1,ee),Z=="before"&&(ee=td(y,ee,1))}else ee=C<0?R.to:R.from;return new Ve(m,ee,Z)}}return new Ve(m,C<0?y.text.length:0,C<0?"before":"after")}function ph(s,f,y,m){var C=zn(f,s.doc.direction);if(!C)return dc(f,y,m);y.ch>=f.text.length?(y.ch=f.text.length,y.sticky="before"):y.ch<=0&&(y.ch=0,y.sticky="after");var N=Dt(C,y.ch,y.sticky),R=C[N];if(s.doc.direction=="ltr"&&R.level%2==0&&(m>0?R.to>y.ch:R.from<y.ch))return dc(f,y,m);var U=function(ut,pt){return td(f,ut instanceof Ve?ut.ch:ut,pt)},Z,ee=function(ut){return s.options.lineWrapping?(Z=Z||Wa(s,f),He(s,f,Z,ut)):{begin:0,end:f.text.length}},he=ee(y.sticky=="before"?U(y,-1):y.ch);if(s.doc.direction=="rtl"||R.level==1){var ke=R.level==1==m<0,Ne=U(y,ke?1:-1);if(Ne!=null&&(ke?Ne<=R.to&&Ne<=he.end:Ne>=R.from&&Ne>=he.begin)){var Me=ke?"before":"after";return new Ve(y.line,Ne,Me)}}var Pe=function(ut,pt,dt){for(var kt=function(Bn,Lr){return Lr?new Ve(y.line,U(Bn,1),"before"):new Ve(y.line,Bn,"after")};ut>=0&&ut<C.length;ut+=pt){var It=C[ut],Nt=pt>0==(It.level!=1),en=Nt?dt.begin:U(dt.end,-1);if(It.from<=en&&en<It.to||(en=Nt?It.from:U(It.to,-1),dt.begin<=en&&en<dt.end))return kt(en,Nt)}},Ze=Pe(N+m,m,he);if(Ze)return Ze;var it=m>0?he.end:U(he.begin,-1);return it!=null&&!(m>0&&it==f.text.length)&&(Ze=Pe(m>0?0:C.length-1,m,ee(it)),Ze)?Ze:null}var al={selectAll:ih,singleSelection:function(s){return s.setSelection(s.getCursor("anchor"),s.getCursor("head"),Ee)},killLine:function(s){return ta(s,function(f){if(f.empty()){var y=Ct(s.doc,f.head.line).text.length;return f.head.ch==y&&f.head.line<s.lastLine()?{from:f.head,to:Ve(f.head.line+1,0)}:{from:f.head,to:Ve(f.head.line,y)}}else return{from:f.from(),to:f.to()}})},deleteLine:function(s){return ta(s,function(f){return{from:Ve(f.from().line,0),to:st(s.doc,Ve(f.to().line+1,0))}})},delLineLeft:function(s){return ta(s,function(f){return{from:Ve(f.from().line,0),to:f.from()}})},delWrappedLineLeft:function(s){return ta(s,function(f){var y=s.charCoords(f.head,"div").top+5,m=s.coordsChar({left:0,top:y},"div");return{from:m,to:f.from()}})},delWrappedLineRight:function(s){return ta(s,function(f){var y=s.charCoords(f.head,"div").top+5,m=s.coordsChar({left:s.display.lineDiv.offsetWidth+100,top:y},"div");return{from:f.from(),to:m}})},undo:function(s){return s.undo()},redo:function(s){return s.redo()},undoSelection:function(s){return s.undoSelection()},redoSelection:function(s){return s.redoSelection()},goDocStart:function(s){return s.extendSelection(Ve(s.firstLine(),0))},goDocEnd:function(s){return s.extendSelection(Ve(s.lastLine()))},goLineStart:function(s){return s.extendSelectionsBy(function(f){return tf(s,f.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(s){return s.extendSelectionsBy(function(f){return cc(s,f.head)},{origin:"+move",bias:1})},goLineEnd:function(s){return s.extendSelectionsBy(function(f){return nf(s,f.head.line)},{origin:"+move",bias:-1})},goLineRight:function(s){return s.extendSelectionsBy(function(f){var y=s.cursorCoords(f.head,"div").top+5;return s.coordsChar({left:s.display.lineDiv.offsetWidth+100,top:y},"div")},Re)},goLineLeft:function(s){return s.extendSelectionsBy(function(f){var y=s.cursorCoords(f.head,"div").top+5;return s.coordsChar({left:0,top:y},"div")},Re)},goLineLeftSmart:function(s){return s.extendSelectionsBy(function(f){var y=s.cursorCoords(f.head,"div").top+5,m=s.coordsChar({left:0,top:y},"div");return m.ch<s.getLine(m.line).search(/\S/)?cc(s,f.head):m},Re)},goLineUp:function(s){return s.moveV(-1,"line")},goLineDown:function(s){return s.moveV(1,"line")},goPageUp:function(s){return s.moveV(-1,"page")},goPageDown:function(s){return s.moveV(1,"page")},goCharLeft:function(s){return s.moveH(-1,"char")},goCharRight:function(s){return s.moveH(1,"char")},goColumnLeft:function(s){return s.moveH(-1,"column")},goColumnRight:function(s){return s.moveH(1,"column")},goWordLeft:function(s){return s.moveH(-1,"word")},goGroupRight:function(s){return s.moveH(1,"group")},goGroupLeft:function(s){return s.moveH(-1,"group")},goWordRight:function(s){return s.moveH(1,"word")},delCharBefore:function(s){return s.deleteH(-1,"codepoint")},delCharAfter:function(s){return s.deleteH(1,"char")},delWordBefore:function(s){return s.deleteH(-1,"word")},delWordAfter:function(s){return s.deleteH(1,"word")},delGroupBefore:function(s){return s.deleteH(-1,"group")},delGroupAfter:function(s){return s.deleteH(1,"group")},indentAuto:function(s){return s.indentSelection("smart")},indentMore:function(s){return s.indentSelection("add")},indentLess:function(s){return s.indentSelection("subtract")},insertTab:function(s){return s.replaceSelection("	")},insertSoftTab:function(s){for(var f=[],y=s.listSelections(),m=s.options.tabSize,C=0;C<y.length;C++){var N=y[C].from(),R=fe(s.getLine(N.line),N.ch,m);f.push(me(m-R%m))}s.replaceSelections(f)},defaultTab:function(s){s.somethingSelected()?s.indentSelection("add"):s.execCommand("insertTab")},transposeChars:function(s){return si(s,function(){for(var f=s.listSelections(),y=[],m=0;m<f.length;m++)if(!!f[m].empty()){var C=f[m].head,N=Ct(s.doc,C.line).text;if(N){if(C.ch==N.length&&(C=new Ve(C.line,C.ch-1)),C.ch>0)C=new Ve(C.line,C.ch+1),s.replaceRange(N.charAt(C.ch-1)+N.charAt(C.ch-2),Ve(C.line,C.ch-2),C,"+transpose");else if(C.line>s.doc.first){var R=Ct(s.doc,C.line-1).text;R&&(C=new Ve(C.line,1),s.replaceRange(N.charAt(0)+s.doc.lineSeparator()+R.charAt(R.length-1),Ve(C.line-1,R.length-1),C,"+transpose"))}}y.push(new Sn(C,C))}s.setSelections(y)})},newlineAndIndent:function(s){return si(s,function(){for(var f=s.listSelections(),y=f.length-1;y>=0;y--)s.replaceRange(s.doc.lineSeparator(),f[y].anchor,f[y].head,"+input");f=s.listSelections();for(var m=0;m<f.length;m++)s.indentLine(f[m].from().line,null,!0);ms(s)})},openLine:function(s){return s.replaceSelection(`
`,"start")},toggleOverwrite:function(s){return s.toggleOverwrite()}};function tf(s,f){var y=Ct(s.doc,f),m=Dr(y);return m!=y&&(f=hn(m)),nu(!0,s,m,f,1)}function nf(s,f){var y=Ct(s.doc,f),m=Ui(y);return m!=y&&(f=hn(m)),nu(!0,s,y,f,-1)}function cc(s,f){var y=tf(s,f.line),m=Ct(s.doc,y.line),C=zn(m,s.doc.direction);if(!C||C[0].level==0){var N=Math.max(y.ch,m.text.search(/\S/)),R=f.line==y.line&&f.ch<=N&&f.ch;return Ve(y.line,R?0:N,y.sticky)}return y}function $a(s,f,y){if(typeof f=="string"&&(f=al[f],!f))return!1;s.display.input.ensurePolled();var m=s.display.shift,C=!1;try{s.isReadOnly()&&(s.state.suppressEdits=!0),y&&(s.display.shift=!1),C=f(s)!=pe}finally{s.display.shift=m,s.state.suppressEdits=!1}return C}function Av(s,f,y){for(var m=0;m<s.state.keyMaps.length;m++){var C=zo(f,s.state.keyMaps[m],y,s);if(C)return C}return s.options.extraKeys&&zo(f,s.options.extraKeys,y,s)||zo(f,s.options.keyMap,y,s)}var Ts=new ve;function ru(s,f,y,m){var C=s.state.keySeq;if(C){if(uc(f))return"handled";if(/\'$/.test(f)?s.state.keySeq=null:Ts.set(50,function(){s.state.keySeq==C&&(s.state.keySeq=null,s.display.input.reset())}),rf(s,C+" "+f,y,m))return!0}return rf(s,f,y,m)}function rf(s,f,y,m){var C=Av(s,f,m);return C=="multi"&&(s.state.keySeq=f),C=="handled"&&gr(s,"keyHandled",s,f,y),(C=="handled"||C=="multi")&&(dr(y),Wl(s)),!!C}function fc(s,f){var y=ef(f,!0);return y?f.shiftKey&&!s.state.keySeq?ru(s,"Shift-"+y,f,function(m){return $a(s,m,!0)})||ru(s,y,f,function(m){if(typeof m=="string"?/^go[A-Z]/.test(m):m.motion)return $a(s,m)}):ru(s,y,f,function(m){return $a(s,m)}):!1}function Nv(s,f,y){return ru(s,"'"+y+"'",f,function(m){return $a(s,m,!0)})}var af=null;function gh(s){var f=this;if(!(s.target&&s.target!=f.display.input.getField())&&(f.curOp.focus=L(),!Dn(f,s))){o&&l<11&&s.keyCode==27&&(s.returnValue=!1);var y=s.keyCode;f.display.shift=y==16||s.shiftKey;var m=fc(f,s);h&&(af=m?y:null,!m&&y==88&&!Fs&&(T?s.metaKey:s.ctrlKey)&&f.replaceSelection("",null,"cut")),e&&!T&&!m&&y==46&&s.shiftKey&&!s.ctrlKey&&document.execCommand&&document.execCommand("cut"),y==18&&!/\bCodeMirror-crosshair\b/.test(f.display.lineDiv.className)&&mh(f)}}function mh(s){var f=s.display.lineDiv;F(f,"CodeMirror-crosshair");function y(m){(m.keyCode==18||!m.altKey)&&(q(f,"CodeMirror-crosshair"),tr(document,"keyup",y),tr(document,"mouseover",y))}vt(document,"keyup",y),vt(document,"mouseover",y)}function of(s){s.keyCode==16&&(this.doc.sel.shift=!1),Dn(this,s)}function bh(s){var f=this;if(!(s.target&&s.target!=f.display.input.getField())&&!(Bt(f.display,s)||Dn(f,s)||s.ctrlKey&&!s.altKey||T&&s.metaKey)){var y=s.keyCode,m=s.charCode;if(h&&y==af){af=null,dr(s);return}if(!(h&&(!s.which||s.which<10)&&fc(f,s))){var C=String.fromCharCode(m==null?y:m);C!="\b"&&(Nv(f,s,C)||f.display.input.onKeyPress(s))}}}var yh=400,hc=function(s,f,y){this.time=s,this.pos=f,this.button=y};hc.prototype.compare=function(s,f,y){return this.time+yh>s&&te(f,this.pos)==0&&y==this.button};var Xr,Gi;function Dv(s,f){var y=+new Date;return Gi&&Gi.compare(y,s,f)?(Xr=Gi=null,"triple"):Xr&&Xr.compare(y,s,f)?(Gi=new hc(y,s,f),Xr=null,"double"):(Xr=new hc(y,s,f),Gi=null,"single")}function wh(s){var f=this,y=f.display;if(!(Dn(f,s)||y.activeTouch&&y.input.supportsTouch())){if(y.input.ensurePolled(),y.shift=s.shiftKey,Bt(y,s)){c||(y.scroller.draggable=!1,setTimeout(function(){return y.scroller.draggable=!0},100));return}if(!sf(f,s)){var m=fo(f,s),C=Ut(s),N=m?Dv(m,C):"single";window.focus(),C==1&&f.state.selectingText&&f.state.selectingText(s),!(m&&vc(f,C,m,N,s))&&(C==1?m?kh(f,m,N,s):Wt(s)==y.scroller&&dr(s):C==2?(m&&ec(f.doc,m),setTimeout(function(){return y.input.focus()},20)):C==3&&(B?f.display.input.onContextMenu(s):Gd(f)))}}}function vc(s,f,y,m,C){var N="Click";return m=="double"?N="Double"+N:m=="triple"&&(N="Triple"+N),N=(f==1?"Left":f==2?"Middle":"Right")+N,ru(s,Jc(N,C),C,function(R){if(typeof R=="string"&&(R=al[R]),!R)return!1;var U=!1;try{s.isReadOnly()&&(s.state.suppressEdits=!0),U=R(s,y)!=pe}finally{s.state.suppressEdits=!1}return U})}function iu(s,f,y){var m=s.getOption("configureMouse"),C=m?m(s,f,y):{};if(C.unit==null){var N=S?y.shiftKey&&y.metaKey:y.altKey;C.unit=N?"rectangle":f=="single"?"char":f=="double"?"word":"line"}return(C.extend==null||s.doc.extend)&&(C.extend=s.doc.extend||y.shiftKey),C.addNew==null&&(C.addNew=T?y.metaKey:y.ctrlKey),C.moveOnDrag==null&&(C.moveOnDrag=!(T?y.altKey:y.ctrlKey)),C}function kh(s,f,y,m){o?setTimeout(Y(zc,s),0):s.curOp.focus=L();var C=iu(s,y,m),N=s.doc.sel,R;s.options.dragDrop&&In&&!s.isReadOnly()&&y=="single"&&(R=N.contains(f))>-1&&(te((R=N.ranges[R]).from(),f)<0||f.xRel>0)&&(te(R.to(),f)>0||f.xRel<0)?xh(s,m,f,C):Eh(s,m,f,C)}function xh(s,f,y,m){var C=s.display,N=!1,R=br(s,function(ee){c&&(C.scroller.draggable=!1),s.state.draggingText=!1,s.state.delayingBlurEvent&&(s.hasFocus()?s.state.delayingBlurEvent=!1:Gd(s)),tr(C.wrapper.ownerDocument,"mouseup",R),tr(C.wrapper.ownerDocument,"mousemove",U),tr(C.scroller,"dragstart",Z),tr(C.scroller,"drop",R),N||(dr(ee),m.addNew||ec(s.doc,y,null,null,m.extend),c&&!g||o&&l==9?setTimeout(function(){C.wrapper.ownerDocument.body.focus({preventScroll:!0}),C.input.focus()},20):C.input.focus())}),U=function(ee){N=N||Math.abs(f.clientX-ee.clientX)+Math.abs(f.clientY-ee.clientY)>=10},Z=function(){return N=!0};c&&(C.scroller.draggable=!0),s.state.draggingText=R,R.copy=!m.moveOnDrag,vt(C.wrapper.ownerDocument,"mouseup",R),vt(C.wrapper.ownerDocument,"mousemove",U),vt(C.scroller,"dragstart",Z),vt(C.scroller,"drop",R),s.state.delayingBlurEvent=!0,setTimeout(function(){return C.input.focus()},20),C.scroller.dragDrop&&C.scroller.dragDrop()}function Ch(s,f,y){if(y=="char")return new Sn(f,f);if(y=="word")return s.findWordAt(f);if(y=="line")return new Sn(Ve(f.line,0),st(s.doc,Ve(f.line+1,0)));var m=y(s,f);return new Sn(m.from,m.to)}function Eh(s,f,y,m){o&&Gd(s);var C=s.display,N=s.doc;dr(f);var R,U,Z=N.sel,ee=Z.ranges;if(m.addNew&&!m.extend?(U=N.sel.contains(y),U>-1?R=ee[U]:R=new Sn(y,y)):(R=N.sel.primary(),U=N.sel.primIndex),m.unit=="rectangle")m.addNew||(R=new Sn(y,y)),y=fo(s,f,!0,!0),U=-1;else{var he=Ch(s,y,m.unit);m.extend?R=Jd(R,he.anchor,he.head,m.extend):R=he}m.addNew?U==-1?(U=ee.length,Vr(N,di(s,ee.concat([R]),U),{scroll:!1,origin:"*mouse"})):ee.length>1&&ee[U].empty()&&m.unit=="char"&&!m.extend?(Vr(N,di(s,ee.slice(0,U).concat(ee.slice(U+1)),0),{scroll:!1,origin:"*mouse"}),Z=N.sel):Zc(N,U,R,Le):(U=0,Vr(N,new Xi([R],0),Le),Z=N.sel);var ke=y;function Ne(dt){if(te(ke,dt)!=0)if(ke=dt,m.unit=="rectangle"){for(var kt=[],It=s.options.tabSize,Nt=fe(Ct(N,y.line).text,y.ch,It),en=fe(Ct(N,dt.line).text,dt.ch,It),Bn=Math.min(Nt,en),Lr=Math.max(Nt,en),Qn=Math.min(y.line,dt.line),Ci=Math.min(s.lastLine(),Math.max(y.line,dt.line));Qn<=Ci;Qn++){var Ei=Ct(N,Qn).text,_r=Ce(Ei,Bn,It);Bn==Lr?kt.push(new Sn(Ve(Qn,_r),Ve(Qn,_r))):Ei.length>_r&&kt.push(new Sn(Ve(Qn,_r),Ve(Qn,Ce(Ei,Lr,It))))}kt.length||kt.push(new Sn(y,y)),Vr(N,di(s,Z.ranges.slice(0,U).concat(kt),U),{origin:"*mouse",scroll:!1}),s.scrollIntoView(dt)}else{var Jr=R,Wr=Ch(s,dt,m.unit),$n=Jr.anchor,nr;te(Wr.anchor,$n)>0?(nr=Wr.head,$n=Ft(Jr.from(),Wr.anchor)):(nr=Wr.anchor,$n=Je(Jr.to(),Wr.head));var yr=Z.ranges.slice(0);yr[U]=au(s,new Sn(st(N,$n),nr)),Vr(N,di(s,yr,U),Le)}}var Me=C.wrapper.getBoundingClientRect(),Pe=0;function Ze(dt){var kt=++Pe,It=fo(s,dt,!0,m.unit=="rectangle");if(!!It)if(te(It,ke)!=0){s.curOp.focus=L(),Ne(It);var Nt=Xs(C,N);(It.line>=Nt.to||It.line<Nt.from)&&setTimeout(br(s,function(){Pe==kt&&Ze(dt)}),150)}else{var en=dt.clientY<Me.top?-20:dt.clientY>Me.bottom?20:0;en&&setTimeout(br(s,function(){Pe==kt&&(C.scroller.scrollTop+=en,Ze(dt))}),50)}}function it(dt){s.state.selectingText=!1,Pe=1/0,dt&&(dr(dt),C.input.focus()),tr(C.wrapper.ownerDocument,"mousemove",ut),tr(C.wrapper.ownerDocument,"mouseup",pt),N.history.lastSelOrigin=null}var ut=br(s,function(dt){dt.buttons===0||!Ut(dt)?it(dt):Ze(dt)}),pt=br(s,it);s.state.selectingText=pt,vt(C.wrapper.ownerDocument,"mousemove",ut),vt(C.wrapper.ownerDocument,"mouseup",pt)}function au(s,f){var y=f.anchor,m=f.head,C=Ct(s.doc,y.line);if(te(y,m)==0&&y.sticky==m.sticky)return f;var N=zn(C);if(!N)return f;var R=Dt(N,y.ch,y.sticky),U=N[R];if(U.from!=y.ch&&U.to!=y.ch)return f;var Z=R+(U.from==y.ch==(U.level!=1)?0:1);if(Z==0||Z==N.length)return f;var ee;if(m.line!=y.line)ee=(m.line-y.line)*(s.doc.direction=="ltr"?1:-1)>0;else{var he=Dt(N,m.ch,m.sticky),ke=he-R||(m.ch-y.ch)*(U.level==1?-1:1);he==Z-1||he==Z?ee=ke<0:ee=ke>0}var Ne=N[Z+(ee?-1:0)],Me=ee==(Ne.level==1),Pe=Me?Ne.from:Ne.to,Ze=Me?"after":"before";return y.ch==Pe&&y.sticky==Ze?f:new Sn(new Ve(y.line,Pe,Ze),m)}function ou(s,f,y,m){var C,N;if(f.touches)C=f.touches[0].clientX,N=f.touches[0].clientY;else try{C=f.clientX,N=f.clientY}catch{return!1}if(C>=Math.floor(s.display.gutters.getBoundingClientRect().right))return!1;m&&dr(f);var R=s.display,U=R.lineDiv.getBoundingClientRect();if(N>U.bottom||!pn(s,y))return Zr(f);N-=U.top-R.viewOffset;for(var Z=0;Z<s.display.gutterSpecs.length;++Z){var ee=R.gutters.childNodes[Z];if(ee&&ee.getBoundingClientRect().right>=C){var he=Cr(s.doc,N),ke=s.display.gutterSpecs[Z];return Tt(s,y,s,he,ke.className,f),Zr(f)}}}function sf(s,f){return ou(s,f,"gutterClick",!0)}function lf(s,f){Bt(s.display,f)||_h(s,f)||Dn(s,f,"contextmenu")||B||s.display.input.onContextMenu(f)}function _h(s,f){return pn(s,"gutterContextMenu")?ou(s,f,"gutterContextMenu",!1):!1}function nd(s){s.display.wrapper.className=s.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+s.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Pu(s)}var ol={toString:function(){return"CodeMirror.Init"}},rd={},su={};function pc(s){var f=s.optionHandlers;function y(m,C,N,R){s.defaults[m]=C,N&&(f[m]=R?function(U,Z,ee){ee!=ol&&N(U,Z,ee)}:N)}s.defineOption=y,s.Init=ol,y("value","",function(m,C){return m.setValue(C)},!0),y("mode",null,function(m,C){m.doc.modeOption=C,Wc(m)},!0),y("indentUnit",2,Wc,!0),y("indentWithTabs",!1),y("smartIndent",!0),y("tabSize",4,function(m){Zu(m),Pu(m),Xt(m)},!0),y("lineSeparator",null,function(m,C){if(m.doc.lineSep=C,!!C){var N=[],R=m.doc.first;m.doc.iter(function(Z){for(var ee=0;;){var he=Z.text.indexOf(C,ee);if(he==-1)break;ee=he+C.length,N.push(Ve(R,he))}R++});for(var U=N.length-1;U>=0;U--)Xl(m.doc,C,N[U],Ve(N[U].line,N[U].ch+C.length))}}),y("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(m,C,N){m.state.specialChars=new RegExp(C.source+(C.test("	")?"":"|	"),"g"),N!=ol&&m.refresh()}),y("specialCharPlaceholder",ai,function(m){return m.refresh()},!0),y("electricChars",!0),y("inputStyle",M?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),y("spellcheck",!1,function(m,C){return m.getInputField().spellcheck=C},!0),y("autocorrect",!1,function(m,C){return m.getInputField().autocorrect=C},!0),y("autocapitalize",!1,function(m,C){return m.getInputField().autocapitalize=C},!0),y("rtlMoveVisually",!D),y("wholeLineUpdateBefore",!0),y("theme","default",function(m){nd(m),Gu(m)},!0),y("keyMap","default",function(m,C,N){var R=ki(C),U=N!=ol&&ki(N);U&&U.detach&&U.detach(m,R),R.attach&&R.attach(m,U||null)}),y("extraKeys",null),y("configureMouse",null),y("lineWrapping",!1,Sh,!0),y("gutters",[],function(m,C){m.display.gutterSpecs=Hc(C,m.options.lineNumbers),Gu(m)},!0),y("fixedGutter",!0,function(m,C){m.display.gutters.style.left=C?jl(m.display)+"px":"0",m.refresh()},!0),y("coverGutterNextToScrollbar",!1,function(m){return ys(m)},!0),y("scrollbarStyle","native",function(m){el(m),ys(m),m.display.scrollbars.setScrollTop(m.doc.scrollTop),m.display.scrollbars.setScrollLeft(m.doc.scrollLeft)},!0),y("lineNumbers",!1,function(m,C){m.display.gutterSpecs=Hc(m.options.gutters,C),Gu(m)},!0),y("firstLineNumber",1,Gu,!0),y("lineNumberFormatter",function(m){return m},Gu,!0),y("showCursorWhenSelecting",!1,Hu,!0),y("resetSelectionOnContextMenu",!0),y("lineWiseCopyCut",!0),y("pasteLinesPerSelection",!0),y("selectionsMayTouch",!1),y("readOnly",!1,function(m,C){C=="nocursor"&&(Qs(m),m.display.input.blur()),m.display.input.readOnlyChanged(C)}),y("screenReaderLabel",null,function(m,C){C=C===""?null:C,m.display.input.screenReaderLabelChanged(C)}),y("disableInput",!1,function(m,C){C||m.display.input.reset()},!0),y("dragDrop",!0,Iv),y("allowDropFileTypes",null),y("cursorBlinkRate",530),y("cursorScrollMargin",0),y("cursorHeight",1,Hu,!0),y("singleCursorHeightPerLine",!0,Hu,!0),y("workTime",100),y("workDelay",100),y("flattenSpans",!0,Zu,!0),y("addModeClass",!1,Zu,!0),y("pollInterval",100),y("undoDepth",200,function(m,C){return m.doc.history.undoDepth=C}),y("historyEventDelay",1250),y("viewportMargin",10,function(m){return m.refresh()},!0),y("maxHighlightLength",1e4,Zu,!0),y("moveInputWithCursor",!0,function(m,C){C||m.display.input.resetPosition()}),y("tabindex",null,function(m,C){return m.display.input.getField().tabIndex=C||""}),y("autofocus",null),y("direction","ltr",function(m,C){return m.doc.setDirection(C)},!0),y("phrases",null)}function Iv(s,f,y){var m=y&&y!=ol;if(!f!=!m){var C=s.display.dragFunctions,N=f?vt:tr;N(s.display.scroller,"dragstart",C.start),N(s.display.scroller,"dragenter",C.enter),N(s.display.scroller,"dragover",C.over),N(s.display.scroller,"dragleave",C.leave),N(s.display.scroller,"drop",C.drop)}}function Sh(s){s.options.lineWrapping?(F(s.display.wrapper,"CodeMirror-wrap"),s.display.sizer.style.minWidth="",s.display.sizerWidth=null):(q(s.display.wrapper,"CodeMirror-wrap"),qs(s)),hs(s),Xt(s),Pu(s),setTimeout(function(){return ys(s)},100)}function Vn(s,f){var y=this;if(!(this instanceof Vn))return new Vn(s,f);this.options=f=f?j(f):{},j(rd,f,!1);var m=f.value;typeof m=="string"?m=new wi(m,f.mode,null,f.lineSeparator,f.direction):f.mode&&(m.modeOption=f.mode),this.doc=m;var C=new Vn.inputStyles[f.inputStyle](this),N=this.display=new wv(s,m,C,f);N.wrapper.CodeMirror=this,nd(this),f.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),el(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new ve,keySeq:null,specialChars:null},f.autofocus&&!M&&N.input.focus(),o&&l<11&&setTimeout(function(){return y.display.input.reset(!0)},20),Mh(this),Xc(),qa(this),this.curOp.forceUpdate=!0,eh(this,m),f.autofocus&&!M||this.hasFocus()?setTimeout(function(){y.hasFocus()&&!y.state.focused&&Ul(y)},20):Qs(this);for(var R in su)su.hasOwnProperty(R)&&su[R](this,f[R],ol);mo(this),f.finishInit&&f.finishInit(this);for(var U=0;U<id.length;++U)id[U](this);po(this),c&&f.lineWrapping&&getComputedStyle(N.lineDiv).textRendering=="optimizelegibility"&&(N.lineDiv.style.textRendering="auto")}Vn.defaults=rd,Vn.optionHandlers=su;function Mh(s){var f=s.display;vt(f.scroller,"mousedown",br(s,wh)),o&&l<11?vt(f.scroller,"dblclick",br(s,function(Z){if(!Dn(s,Z)){var ee=fo(s,Z);if(!(!ee||sf(s,Z)||Bt(s.display,Z))){dr(Z);var he=s.findWordAt(ee);ec(s.doc,he.anchor,he.head)}}})):vt(f.scroller,"dblclick",function(Z){return Dn(s,Z)||dr(Z)}),vt(f.scroller,"contextmenu",function(Z){return lf(s,Z)}),vt(f.input.getField(),"contextmenu",function(Z){f.scroller.contains(Z.target)||lf(s,Z)});var y,m={end:0};function C(){f.activeTouch&&(y=setTimeout(function(){return f.activeTouch=null},1e3),m=f.activeTouch,m.end=+new Date)}function N(Z){if(Z.touches.length!=1)return!1;var ee=Z.touches[0];return ee.radiusX<=1&&ee.radiusY<=1}function R(Z,ee){if(ee.left==null)return!0;var he=ee.left-Z.left,ke=ee.top-Z.top;return he*he+ke*ke>20*20}vt(f.scroller,"touchstart",function(Z){if(!Dn(s,Z)&&!N(Z)&&!sf(s,Z)){f.input.ensurePolled(),clearTimeout(y);var ee=+new Date;f.activeTouch={start:ee,moved:!1,prev:ee-m.end<=300?m:null},Z.touches.length==1&&(f.activeTouch.left=Z.touches[0].pageX,f.activeTouch.top=Z.touches[0].pageY)}}),vt(f.scroller,"touchmove",function(){f.activeTouch&&(f.activeTouch.moved=!0)}),vt(f.scroller,"touchend",function(Z){var ee=f.activeTouch;if(ee&&!Bt(f,Z)&&ee.left!=null&&!ee.moved&&new Date-ee.start<300){var he=s.coordsChar(f.activeTouch,"page"),ke;!ee.prev||R(ee,ee.prev)?ke=new Sn(he,he):!ee.prev.prev||R(ee,ee.prev.prev)?ke=s.findWordAt(he):ke=new Sn(Ve(he.line,0),st(s.doc,Ve(he.line+1,0))),s.setSelection(ke.anchor,ke.head),s.focus(),dr(Z)}C()}),vt(f.scroller,"touchcancel",C),vt(f.scroller,"scroll",function(){f.scroller.clientHeight&&(mr(s,f.scroller.scrollTop),Js(s,f.scroller.scrollLeft,!0),Tt(s,"scroll",s))}),vt(f.scroller,"mousewheel",function(Z){return Xf(s,Z)}),vt(f.scroller,"DOMMouseScroll",function(Z){return Xf(s,Z)}),vt(f.wrapper,"scroll",function(){return f.wrapper.scrollTop=f.wrapper.scrollLeft=0}),f.dragFunctions={enter:function(Z){Dn(s,Z)||ji(Z)},over:function(Z){Dn(s,Z)||(Vc(s,Z),ji(Z))},start:function(Z){return Sv(s,Z)},drop:br(s,hh),leave:function(Z){Dn(s,Z)||Qc(s)}};var U=f.input.getField();vt(U,"keyup",function(Z){return of.call(s,Z)}),vt(U,"keydown",br(s,gh)),vt(U,"keypress",br(s,bh)),vt(U,"focus",function(Z){return Ul(s,Z)}),vt(U,"blur",function(Z){return Qs(s,Z)})}var id=[];Vn.defineInitHook=function(s){return id.push(s)};function ad(s,f,y,m){var C=s.doc,N;y==null&&(y="add"),y=="smart"&&(C.mode.indent?N=za(s,f).state:y="prev");var R=s.options.tabSize,U=Ct(C,f),Z=fe(U.text,null,R);U.stateAfter&&(U.stateAfter=null);var ee=U.text.match(/^\s*/)[0],he;if(!m&&!/\S/.test(U.text))he=0,y="not";else if(y=="smart"&&(he=C.mode.indent(N,U.text.slice(ee.length),U.text),he==pe||he>150)){if(!m)return;y="prev"}y=="prev"?f>C.first?he=fe(Ct(C,f-1).text,null,R):he=0:y=="add"?he=Z+s.options.indentUnit:y=="subtract"?he=Z-s.options.indentUnit:typeof y=="number"&&(he=Z+y),he=Math.max(0,he);var ke="",Ne=0;if(s.options.indentWithTabs)for(var Me=Math.floor(he/R);Me;--Me)Ne+=R,ke+="	";if(Ne<he&&(ke+=me(he-Ne)),ke!=ee)return Xl(C,ke,Ve(f,0),Ve(f,ee.length),"+input"),U.stateAfter=null,!0;for(var Pe=0;Pe<C.sel.ranges.length;Pe++){var Ze=C.sel.ranges[Pe];if(Ze.head.line==f&&Ze.head.ch<ee.length){var it=Ve(f,ee.length);Zc(C,Pe,new Sn(it,it));break}}}var Ca=null;function Ea(s){Ca=s}function gc(s,f,y,m,C){var N=s.doc;s.display.shift=!1,m||(m=N.sel);var R=+new Date-200,U=C=="paste"||s.state.pasteIncoming>R,Z=ri(f),ee=null;if(U&&m.ranges.length>1)if(Ca&&Ca.text.join(`
`)==f){if(m.ranges.length%Ca.text.length==0){ee=[];for(var he=0;he<Ca.text.length;he++)ee.push(N.splitLines(Ca.text[he]))}}else Z.length==m.ranges.length&&s.options.pasteLinesPerSelection&&(ee=Te(Z,function(ut){return[ut]}));for(var ke=s.curOp.updateInput,Ne=m.ranges.length-1;Ne>=0;Ne--){var Me=m.ranges[Ne],Pe=Me.from(),Ze=Me.to();Me.empty()&&(y&&y>0?Pe=Ve(Pe.line,Pe.ch-y):s.state.overwrite&&!U?Ze=Ve(Ze.line,Math.min(Ct(N,Ze.line).text.length,Ze.ch+ue(Z).length)):U&&Ca&&Ca.lineWise&&Ca.text.join(`
`)==Z.join(`
`)&&(Pe=Ze=Ve(Pe.line,0)));var it={from:Pe,to:Ze,text:ee?ee[Ne%ee.length]:Z,origin:C||(U?"paste":s.state.cutIncoming>R?"cut":"+input")};Kl(s.doc,it),gr(s,"inputRead",s,it)}f&&!U&&Th(s,f),ms(s),s.curOp.updateInput<2&&(s.curOp.updateInput=ke),s.curOp.typing=!0,s.state.pasteIncoming=s.state.cutIncoming=-1}function uf(s,f){var y=s.clipboardData&&s.clipboardData.getData("Text");if(y)return s.preventDefault(),!f.isReadOnly()&&!f.options.disableInput&&si(f,function(){return gc(f,y,0,null,"paste")}),!0}function Th(s,f){if(!(!s.options.electricChars||!s.options.smartIndent))for(var y=s.doc.sel,m=y.ranges.length-1;m>=0;m--){var C=y.ranges[m];if(!(C.head.ch>100||m&&y.ranges[m-1].head.line==C.head.line)){var N=s.getModeAt(C.head),R=!1;if(N.electricChars){for(var U=0;U<N.electricChars.length;U++)if(f.indexOf(N.electricChars.charAt(U))>-1){R=ad(s,C.head.line,"smart");break}}else N.electricInput&&N.electricInput.test(Ct(s.doc,C.head.line).text.slice(0,C.head.ch))&&(R=ad(s,C.head.line,"smart"));R&&gr(s,"electricInput",s,C.head.line)}}}function df(s){for(var f=[],y=[],m=0;m<s.doc.sel.ranges.length;m++){var C=s.doc.sel.ranges[m].head.line,N={anchor:Ve(C,0),head:Ve(C+1,0)};y.push(N),f.push(s.getRange(N.anchor,N.head))}return{text:f,ranges:y}}function Ah(s,f,y,m){s.setAttribute("autocorrect",y?"":"off"),s.setAttribute("autocapitalize",m?"":"off"),s.setAttribute("spellcheck",!!f)}function Nh(){var s=z("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),f=z("div",[s],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return c?s.style.width="1000px":s.setAttribute("wrap","off"),_&&(s.style.border="1px solid black"),Ah(s),f}function Ro(s){var f=s.optionHandlers,y=s.helpers={};s.prototype={constructor:s,focus:function(){window.focus(),this.display.input.focus()},setOption:function(m,C){var N=this.options,R=N[m];N[m]==C&&m!="mode"||(N[m]=C,f.hasOwnProperty(m)&&br(this,f[m])(this,C,R),Tt(this,"optionChange",this,m))},getOption:function(m){return this.options[m]},getDoc:function(){return this.doc},addKeyMap:function(m,C){this.state.keyMaps[C?"push":"unshift"](ki(m))},removeKeyMap:function(m){for(var C=this.state.keyMaps,N=0;N<C.length;++N)if(C[N]==m||C[N].name==m)return C.splice(N,1),!0},addOverlay:li(function(m,C){var N=m.token?m:s.getMode(this.options,m);if(N.startState)throw new Error("Overlays may not be stateful.");ze(this.state.overlays,{mode:N,modeSpec:m,opaque:C&&C.opaque,priority:C&&C.priority||0},function(R){return R.priority}),this.state.modeGen++,Xt(this)}),removeOverlay:li(function(m){for(var C=this.state.overlays,N=0;N<C.length;++N){var R=C[N].modeSpec;if(R==m||typeof m=="string"&&R.name==m){C.splice(N,1),this.state.modeGen++,Xt(this);return}}}),indentLine:li(function(m,C,N){typeof C!="string"&&typeof C!="number"&&(C==null?C=this.options.smartIndent?"smart":"prev":C=C?"add":"subtract"),ga(this.doc,m)&&ad(this,m,C,N)}),indentSelection:li(function(m){for(var C=this.doc.sel.ranges,N=-1,R=0;R<C.length;R++){var U=C[R];if(U.empty())U.head.line>N&&(ad(this,U.head.line,m,!0),N=U.head.line,R==this.doc.sel.primIndex&&ms(this));else{var Z=U.from(),ee=U.to(),he=Math.max(N,Z.line);N=Math.min(this.lastLine(),ee.line-(ee.ch?0:1))+1;for(var ke=he;ke<N;++ke)ad(this,ke,m);var Ne=this.doc.sel.ranges;Z.ch==0&&C.length==Ne.length&&Ne[R].from().ch>0&&Zc(this.doc,R,new Sn(Z,Ne[R].to()),Ee)}}}),getTokenAt:function(m,C){return Hs(this,m,C)},getLineTokens:function(m,C){return Hs(this,Ve(m),C,!0)},getTokenTypeAt:function(m){m=st(this.doc,m);var C=Bs(this,Ct(this.doc,m.line)),N=0,R=(C.length-1)/2,U=m.ch,Z;if(U==0)Z=C[2];else for(;;){var ee=N+R>>1;if((ee?C[ee*2-1]:0)>=U)R=ee;else if(C[ee*2+1]<U)N=ee+1;else{Z=C[ee*2+2];break}}var he=Z?Z.indexOf("overlay "):-1;return he<0?Z:he==0?null:Z.slice(0,he-1)},getModeAt:function(m){var C=this.doc.mode;return C.innerMode?s.innerMode(C,this.getTokenAt(m).state).mode:C},getHelper:function(m,C){return this.getHelpers(m,C)[0]},getHelpers:function(m,C){var N=[];if(!y.hasOwnProperty(C))return N;var R=y[C],U=this.getModeAt(m);if(typeof U[C]=="string")R[U[C]]&&N.push(R[U[C]]);else if(U[C])for(var Z=0;Z<U[C].length;Z++){var ee=R[U[C][Z]];ee&&N.push(ee)}else U.helperType&&R[U.helperType]?N.push(R[U.helperType]):R[U.name]&&N.push(R[U.name]);for(var he=0;he<R._global.length;he++){var ke=R._global[he];ke.pred(U,this)&&ae(N,ke.val)==-1&&N.push(ke.val)}return N},getStateAfter:function(m,C){var N=this.doc;return m=gt(N,m==null?N.first+N.size-1:m),za(this,m+1,C).state},cursorCoords:function(m,C){var N,R=this.doc.sel.primary();return m==null?N=R.head:typeof m=="object"?N=st(this.doc,m):N=m?R.from():R.to(),Ua(this,N,C||"page")},charCoords:function(m,C){return $d(this,st(this.doc,m),C||"page")},coordsChar:function(m,C){return m=Wf(this,m,C||"page"),De(this,m.left,m.top)},lineAtHeight:function(m,C){return m=Wf(this,{top:m,left:0},C||"page").top,Cr(this.doc,m+this.display.viewOffset)},heightAtLine:function(m,C,N){var R=!1,U;if(typeof m=="number"){var Z=this.doc.first+this.doc.size-1;m<this.doc.first?m=this.doc.first:m>Z&&(m=Z,R=!0),U=Ct(this.doc,m)}else U=m;return qd(this,U,{top:0,left:0},C||"page",N||R).top+(R?this.doc.height-qn(U):0)},defaultTextHeight:function(){return fs(this.display)},defaultCharWidth:function(){return Hl(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(m,C,N,R,U){var Z=this.display;m=Ua(this,st(this.doc,m));var ee=m.bottom,he=m.left;if(C.style.position="absolute",C.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(C),Z.sizer.appendChild(C),R=="over")ee=m.top;else if(R=="above"||R=="near"){var ke=Math.max(Z.wrapper.clientHeight,this.doc.height),Ne=Math.max(Z.sizer.clientWidth,Z.lineSpace.clientWidth);(R=="above"||m.bottom+C.offsetHeight>ke)&&m.top>C.offsetHeight?ee=m.top-C.offsetHeight:m.bottom+C.offsetHeight<=ke&&(ee=m.bottom),he+C.offsetWidth>Ne&&(he=Ne-C.offsetWidth)}C.style.top=ee+"px",C.style.left=C.style.right="",U=="right"?(he=Z.sizer.clientWidth-C.offsetWidth,C.style.right="0px"):(U=="left"?he=0:U=="middle"&&(he=(Z.sizer.clientWidth-C.offsetWidth)/2),C.style.left=he+"px"),N&&cv(this,{left:he,top:ee,right:he+C.offsetWidth,bottom:ee+C.offsetHeight})},triggerOnKeyDown:li(gh),triggerOnKeyPress:li(bh),triggerOnKeyUp:of,triggerOnMouseDown:li(wh),execCommand:function(m){if(al.hasOwnProperty(m))return al[m].call(null,this)},triggerElectric:li(function(m){Th(this,m)}),findPosH:function(m,C,N,R){var U=1;C<0&&(U=-1,C=-C);for(var Z=st(this.doc,m),ee=0;ee<C&&(Z=od(this.doc,Z,U,N,R),!Z.hitSide);++ee);return Z},moveH:li(function(m,C){var N=this;this.extendSelectionsBy(function(R){return N.display.shift||N.doc.extend||R.empty()?od(N.doc,R.head,m,C,N.options.rtlMoveVisually):m<0?R.from():R.to()},Re)}),deleteH:li(function(m,C){var N=this.doc.sel,R=this.doc;N.somethingSelected()?R.replaceSelection("",null,"+delete"):ta(this,function(U){var Z=od(R,U.head,m,C,!1);return m<0?{from:Z,to:U.head}:{from:U.head,to:Z}})}),findPosV:function(m,C,N,R){var U=1,Z=R;C<0&&(U=-1,C=-C);for(var ee=st(this.doc,m),he=0;he<C;++he){var ke=Ua(this,ee,"div");if(Z==null?Z=ke.left:ke.left=Z,ee=mc(this,ke,U,N),ee.hitSide)break}return ee},moveV:li(function(m,C){var N=this,R=this.doc,U=[],Z=!this.display.shift&&!R.extend&&R.sel.somethingSelected();if(R.extendSelectionsBy(function(he){if(Z)return m<0?he.from():he.to();var ke=Ua(N,he.head,"div");he.goalColumn!=null&&(ke.left=he.goalColumn),U.push(ke.left);var Ne=mc(N,ke,m,C);return C=="page"&&he==R.sel.primary()&&$l(N,$d(N,Ne,"div").top-ke.top),Ne},Re),U.length)for(var ee=0;ee<R.sel.ranges.length;ee++)R.sel.ranges[ee].goalColumn=U[ee]}),findWordAt:function(m){var C=this.doc,N=Ct(C,m.line).text,R=m.ch,U=m.ch;if(N){var Z=this.getHelper(m,"wordChars");(m.sticky=="before"||U==N.length)&&R?--R:++U;for(var ee=N.charAt(R),he=_e(ee,Z)?function(ke){return _e(ke,Z)}:/\s/.test(ee)?function(ke){return/\s/.test(ke)}:function(ke){return!/\s/.test(ke)&&!_e(ke)};R>0&&he(N.charAt(R-1));)--R;for(;U<N.length&&he(N.charAt(U));)++U}return new Sn(Ve(m.line,R),Ve(m.line,U))},toggleOverwrite:function(m){m!=null&&m==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?F(this.display.cursorDiv,"CodeMirror-overwrite"):q(this.display.cursorDiv,"CodeMirror-overwrite"),Tt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==L()},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:li(function(m,C){Wu(this,m,C)}),getScrollInfo:function(){var m=this.display.scroller;return{left:m.scrollLeft,top:m.scrollTop,height:m.scrollHeight-fr(this)-this.display.barHeight,width:m.scrollWidth-fr(this)-this.display.barWidth,clientHeight:uo(this),clientWidth:Li(this)}},scrollIntoView:li(function(m,C){m==null?(m={from:this.doc.sel.primary().head,to:null},C==null&&(C=this.options.cursorScrollMargin)):typeof m=="number"?m={from:Ve(m,0),to:null}:m.from==null&&(m={from:m,to:null}),m.to||(m.to=m.from),m.margin=C||0,m.from.line!=null?Zf(this,m):Yf(this,m.from,m.to,m.margin)}),setSize:li(function(m,C){var N=this,R=function(Z){return typeof Z=="number"||/^\d+$/.test(String(Z))?Z+"px":Z};m!=null&&(this.display.wrapper.style.width=R(m)),C!=null&&(this.display.wrapper.style.height=R(C)),this.options.lineWrapping&&jf(this);var U=this.display.viewFrom;this.doc.iter(U,this.display.viewTo,function(Z){if(Z.widgets){for(var ee=0;ee<Z.widgets.length;ee++)if(Z.widgets[ee].noHScroll){vs(N,U,"widget");break}}++U}),this.curOp.forceUpdate=!0,Tt(this,"refresh",this)}),operation:function(m){return si(this,m)},startOperation:function(){return qa(this)},endOperation:function(){return po(this)},refresh:li(function(){var m=this.display.cachedTextHeight;Xt(this),this.curOp.forceUpdate=!0,Pu(this),Wu(this,this.doc.scrollLeft,this.doc.scrollTop),Bc(this.display),(m==null||Math.abs(m-fs(this.display))>.5||this.options.lineWrapping)&&hs(this),Tt(this,"refresh",this)}),swapDoc:li(function(m){var C=this.doc;return C.cm=null,this.state.selectingText&&this.state.selectingText(),eh(this,m),Pu(this),this.display.input.reset(),Wu(this,m.scrollLeft,m.scrollTop),this.curOp.forceScroll=!0,gr(this,"swapDoc",this,C),C}),phrase:function(m){var C=this.options.phrases;return C&&Object.prototype.hasOwnProperty.call(C,m)?C[m]:m},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},sr(s),s.registerHelper=function(m,C,N){y.hasOwnProperty(m)||(y[m]=s[m]={_global:[]}),y[m][C]=N},s.registerGlobalHelper=function(m,C,N,R){s.registerHelper(m,C,R),y[m]._global.push({pred:N,val:R})}}function od(s,f,y,m,C){var N=f,R=y,U=Ct(s,f.line),Z=C&&s.direction=="rtl"?-y:y;function ee(){var pt=f.line+Z;return pt<s.first||pt>=s.first+s.size?!1:(f=new Ve(pt,f.ch,f.sticky),U=Ct(s,pt))}function he(pt){var dt;if(m=="codepoint"){var kt=U.text.charCodeAt(f.ch+(y>0?0:-1));if(isNaN(kt))dt=null;else{var It=y>0?kt>=55296&&kt<56320:kt>=56320&&kt<57343;dt=new Ve(f.line,Math.max(0,Math.min(U.text.length,f.ch+y*(It?2:1))),-y)}}else C?dt=ph(s.cm,U,f,y):dt=dc(U,f,y);if(dt==null)if(!pt&&ee())f=nu(C,s.cm,U,f.line,Z);else return!1;else f=dt;return!0}if(m=="char"||m=="codepoint")he();else if(m=="column")he(!0);else if(m=="word"||m=="group")for(var ke=null,Ne=m=="group",Me=s.cm&&s.cm.getHelper(f,"wordChars"),Pe=!0;!(y<0&&!he(!Pe));Pe=!1){var Ze=U.text.charAt(f.ch)||`
`,it=_e(Ze,Me)?"w":Ne&&Ze==`
`?"n":!Ne||/\s/.test(Ze)?null:"p";if(Ne&&!Pe&&!it&&(it="s"),ke&&ke!=it){y<0&&(y=1,he(),f.sticky="after");break}if(it&&(ke=it),y>0&&!he(!Pe))break}var ut=Qr(s,f,N,R,!0);return we(N,ut)&&(ut.hitSide=!0),ut}function mc(s,f,y,m){var C=s.doc,N=f.left,R;if(m=="page"){var U=Math.min(s.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),Z=Math.max(U-.5*fs(s.display),3);R=(y>0?f.bottom:f.top)+y*Z}else m=="line"&&(R=y>0?f.bottom+3:f.top-3);for(var ee;ee=De(s,N,R),!!ee.outside;){if(y<0?R<=0:R>=C.height){ee.hitSide=!0;break}R+=y*5}return ee}var Mn=function(s){this.cm=s,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new ve,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};Mn.prototype.init=function(s){var f=this,y=this,m=y.cm,C=y.div=s.lineDiv;C.contentEditable=!0,Ah(C,m.options.spellcheck,m.options.autocorrect,m.options.autocapitalize);function N(U){for(var Z=U.target;Z;Z=Z.parentNode){if(Z==C)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(Z.className))break}return!1}vt(C,"paste",function(U){!N(U)||Dn(m,U)||uf(U,m)||l<=11&&setTimeout(br(m,function(){return f.updateFromDOM()}),20)}),vt(C,"compositionstart",function(U){f.composing={data:U.data,done:!1}}),vt(C,"compositionupdate",function(U){f.composing||(f.composing={data:U.data,done:!1})}),vt(C,"compositionend",function(U){f.composing&&(U.data!=f.composing.data&&f.readFromDOMSoon(),f.composing.done=!0)}),vt(C,"touchstart",function(){return y.forceCompositionEnd()}),vt(C,"input",function(){f.composing||f.readFromDOMSoon()});function R(U){if(!(!N(U)||Dn(m,U))){if(m.somethingSelected())Ea({lineWise:!1,text:m.getSelections()}),U.type=="cut"&&m.replaceSelection("",null,"cut");else if(m.options.lineWiseCopyCut){var Z=df(m);Ea({lineWise:!0,text:Z.text}),U.type=="cut"&&m.operation(function(){m.setSelections(Z.ranges,0,Ee),m.replaceSelection("",null,"cut")})}else return;if(U.clipboardData){U.clipboardData.clearData();var ee=Ca.text.join(`
`);if(U.clipboardData.setData("Text",ee),U.clipboardData.getData("Text")==ee){U.preventDefault();return}}var he=Nh(),ke=he.firstChild;m.display.lineSpace.insertBefore(he,m.display.lineSpace.firstChild),ke.value=Ca.text.join(`
`);var Ne=L();se(ke),setTimeout(function(){m.display.lineSpace.removeChild(he),Ne.focus(),Ne==C&&y.showPrimarySelection()},50)}}vt(C,"copy",R),vt(C,"cut",R)},Mn.prototype.screenReaderLabelChanged=function(s){s?this.div.setAttribute("aria-label",s):this.div.removeAttribute("aria-label")},Mn.prototype.prepareSelection=function(){var s=ju(this.cm,!1);return s.focus=L()==this.div,s},Mn.prototype.showSelection=function(s,f){!s||!this.cm.display.view.length||((s.focus||f)&&this.showPrimarySelection(),this.showMultipleSelections(s))},Mn.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Mn.prototype.showPrimarySelection=function(){var s=this.getSelection(),f=this.cm,y=f.doc.sel.primary(),m=y.from(),C=y.to();if(f.display.viewTo==f.display.viewFrom||m.line>=f.display.viewTo||C.line<f.display.viewFrom){s.removeAllRanges();return}var N=uu(f,s.anchorNode,s.anchorOffset),R=uu(f,s.focusNode,s.focusOffset);if(!(N&&!N.bad&&R&&!R.bad&&te(Ft(N,R),m)==0&&te(Je(N,R),C)==0)){var U=f.display.view,Z=m.line>=f.display.viewFrom&&sd(f,m)||{node:U[0].measure.map[2],offset:0},ee=C.line<f.display.viewTo&&sd(f,C);if(!ee){var he=U[U.length-1].measure,ke=he.maps?he.maps[he.maps.length-1]:he.map;ee={node:ke[ke.length-1],offset:ke[ke.length-2]-ke[ke.length-3]}}if(!Z||!ee){s.removeAllRanges();return}var Ne=s.rangeCount&&s.getRangeAt(0),Me;try{Me=Q(Z.node,Z.offset,ee.offset,ee.node)}catch{}Me&&(!e&&f.state.focused?(s.collapse(Z.node,Z.offset),Me.collapsed||(s.removeAllRanges(),s.addRange(Me))):(s.removeAllRanges(),s.addRange(Me)),Ne&&s.anchorNode==null?s.addRange(Ne):e&&this.startGracePeriod()),this.rememberSelection()}},Mn.prototype.startGracePeriod=function(){var s=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){s.gracePeriod=!1,s.selectionChanged()&&s.cm.operation(function(){return s.cm.curOp.selectionChanged=!0})},20)},Mn.prototype.showMultipleSelections=function(s){H(this.cm.display.cursorDiv,s.cursors),H(this.cm.display.selectionDiv,s.selection)},Mn.prototype.rememberSelection=function(){var s=this.getSelection();this.lastAnchorNode=s.anchorNode,this.lastAnchorOffset=s.anchorOffset,this.lastFocusNode=s.focusNode,this.lastFocusOffset=s.focusOffset},Mn.prototype.selectionInEditor=function(){var s=this.getSelection();if(!s.rangeCount)return!1;var f=s.getRangeAt(0).commonAncestorContainer;return ie(this.div,f)},Mn.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||L()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},Mn.prototype.blur=function(){this.div.blur()},Mn.prototype.getField=function(){return this.div},Mn.prototype.supportsTouch=function(){return!0},Mn.prototype.receivedFocus=function(){var s=this,f=this;this.selectionInEditor()?setTimeout(function(){return s.pollSelection()},20):si(this.cm,function(){return f.cm.curOp.selectionChanged=!0});function y(){f.cm.state.focused&&(f.pollSelection(),f.polling.set(f.cm.options.pollInterval,y))}this.polling.set(this.cm.options.pollInterval,y)},Mn.prototype.selectionChanged=function(){var s=this.getSelection();return s.anchorNode!=this.lastAnchorNode||s.anchorOffset!=this.lastAnchorOffset||s.focusNode!=this.lastFocusNode||s.focusOffset!=this.lastFocusOffset},Mn.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var s=this.getSelection(),f=this.cm;if(E&&v&&this.cm.display.gutterSpecs.length&&lu(s.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var y=uu(f,s.anchorNode,s.anchorOffset),m=uu(f,s.focusNode,s.focusOffset);y&&m&&si(f,function(){Vr(f.doc,ks(y,m),Ee),(y.bad||m.bad)&&(f.curOp.selectionChanged=!0)})}}},Mn.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var s=this.cm,f=s.display,y=s.doc.sel.primary(),m=y.from(),C=y.to();if(m.ch==0&&m.line>s.firstLine()&&(m=Ve(m.line-1,Ct(s.doc,m.line-1).length)),C.ch==Ct(s.doc,C.line).text.length&&C.line<s.lastLine()&&(C=Ve(C.line+1,0)),m.line<f.viewFrom||C.line>f.viewTo-1)return!1;var N,R,U;m.line==f.viewFrom||(N=ho(s,m.line))==0?(R=hn(f.view[0].line),U=f.view[0].node):(R=hn(f.view[N].line),U=f.view[N-1].node.nextSibling);var Z=ho(s,C.line),ee,he;if(Z==f.view.length-1?(ee=f.viewTo-1,he=f.lineDiv.lastChild):(ee=hn(f.view[Z+1].line)-1,he=f.view[Z+1].node.previousSibling),!U)return!1;for(var ke=s.doc.splitLines(bc(s,U,he,R,ee)),Ne=Pr(s.doc,Ve(R,0),Ve(ee,Ct(s.doc,ee).text.length));ke.length>1&&Ne.length>1;)if(ue(ke)==ue(Ne))ke.pop(),Ne.pop(),ee--;else if(ke[0]==Ne[0])ke.shift(),Ne.shift(),R++;else break;for(var Me=0,Pe=0,Ze=ke[0],it=Ne[0],ut=Math.min(Ze.length,it.length);Me<ut&&Ze.charCodeAt(Me)==it.charCodeAt(Me);)++Me;for(var pt=ue(ke),dt=ue(Ne),kt=Math.min(pt.length-(ke.length==1?Me:0),dt.length-(Ne.length==1?Me:0));Pe<kt&&pt.charCodeAt(pt.length-Pe-1)==dt.charCodeAt(dt.length-Pe-1);)++Pe;if(ke.length==1&&Ne.length==1&&R==m.line)for(;Me&&Me>m.ch&&pt.charCodeAt(pt.length-Pe-1)==dt.charCodeAt(dt.length-Pe-1);)Me--,Pe++;ke[ke.length-1]=pt.slice(0,pt.length-Pe).replace(/^\u200b+/,""),ke[0]=ke[0].slice(Me).replace(/\u200b+$/,"");var It=Ve(R,Me),Nt=Ve(ee,Ne.length?ue(Ne).length-Pe:0);if(ke.length>1||ke[0]||te(It,Nt))return Xl(s.doc,ke,It,Nt,"+input"),!0},Mn.prototype.ensurePolled=function(){this.forceCompositionEnd()},Mn.prototype.reset=function(){this.forceCompositionEnd()},Mn.prototype.forceCompositionEnd=function(){!this.composing||(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Mn.prototype.readFromDOMSoon=function(){var s=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(s.readDOMTimeout=null,s.composing)if(s.composing.done)s.composing=null;else return;s.updateFromDOM()},80))},Mn.prototype.updateFromDOM=function(){var s=this;(this.cm.isReadOnly()||!this.pollContent())&&si(this.cm,function(){return Xt(s.cm)})},Mn.prototype.setUneditable=function(s){s.contentEditable="false"},Mn.prototype.onKeyPress=function(s){s.charCode==0||this.composing||(s.preventDefault(),this.cm.isReadOnly()||br(this.cm,gc)(this.cm,String.fromCharCode(s.charCode==null?s.keyCode:s.charCode),0))},Mn.prototype.readOnlyChanged=function(s){this.div.contentEditable=String(s!="nocursor")},Mn.prototype.onContextMenu=function(){},Mn.prototype.resetPosition=function(){},Mn.prototype.needsContentAttribute=!0;function sd(s,f){var y=Oc(s,f.line);if(!y||y.hidden)return null;var m=Ct(s.doc,f.line),C=Pl(y,m,f.line),N=zn(m,s.doc.direction),R="left";if(N){var U=Dt(N,f.ch);R=U%2?"right":"left"}var Z=jd(C.map,f.ch,R);return Z.offset=Z.collapse=="right"?Z.end:Z.start,Z}function lu(s){for(var f=s;f;f=f.parentNode)if(/CodeMirror-gutter-wrapper/.test(f.className))return!0;return!1}function Ot(s,f){return f&&(s.bad=!0),s}function bc(s,f,y,m,C){var N="",R=!1,U=s.doc.lineSeparator(),Z=!1;function ee(Me){return function(Pe){return Pe.id==Me}}function he(){R&&(N+=U,Z&&(N+=U),R=Z=!1)}function ke(Me){Me&&(he(),N+=Me)}function Ne(Me){if(Me.nodeType==1){var Pe=Me.getAttribute("cm-text");if(Pe){ke(Pe);return}var Ze=Me.getAttribute("cm-marker"),it;if(Ze){var ut=s.findMarks(Ve(m,0),Ve(C+1,0),ee(+Ze));ut.length&&(it=ut[0].find(0))&&ke(Pr(s.doc,it.from,it.to).join(U));return}if(Me.getAttribute("contenteditable")=="false")return;var pt=/^(pre|div|p|li|table|br)$/i.test(Me.nodeName);if(!/^br$/i.test(Me.nodeName)&&Me.textContent.length==0)return;pt&&he();for(var dt=0;dt<Me.childNodes.length;dt++)Ne(Me.childNodes[dt]);/^(pre|p)$/i.test(Me.nodeName)&&(Z=!0),pt&&(R=!0)}else Me.nodeType==3&&ke(Me.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;Ne(f),f!=y;)f=f.nextSibling,Z=!1;return N}function uu(s,f,y){var m;if(f==s.display.lineDiv){if(m=s.display.lineDiv.childNodes[y],!m)return Ot(s.clipPos(Ve(s.display.viewTo-1)),!0);f=null,y=0}else for(m=f;;m=m.parentNode){if(!m||m==s.display.lineDiv)return null;if(m.parentNode&&m.parentNode==s.display.lineDiv)break}for(var C=0;C<s.display.view.length;C++){var N=s.display.view[C];if(N.node==m)return sl(N,f,y)}}function sl(s,f,y){var m=s.text.firstChild,C=!1;if(!f||!ie(m,f))return Ot(Ve(hn(s.line),0),!0);if(f==m&&(C=!0,f=m.childNodes[y],y=0,!f)){var N=s.rest?ue(s.rest):s.line;return Ot(Ve(hn(N),N.text.length),C)}var R=f.nodeType==3?f:null,U=f;for(!R&&f.childNodes.length==1&&f.firstChild.nodeType==3&&(R=f.firstChild,y&&(y=R.nodeValue.length));U.parentNode!=m;)U=U.parentNode;var Z=s.measure,ee=Z.maps;function he(it,ut,pt){for(var dt=-1;dt<(ee?ee.length:0);dt++)for(var kt=dt<0?Z.map:ee[dt],It=0;It<kt.length;It+=3){var Nt=kt[It+2];if(Nt==it||Nt==ut){var en=hn(dt<0?s.line:s.rest[dt]),Bn=kt[It]+pt;return(pt<0||Nt!=it)&&(Bn=kt[It+(pt?1:0)]),Ve(en,Bn)}}}var ke=he(R,U,y);if(ke)return Ot(ke,C);for(var Ne=U.nextSibling,Me=R?R.nodeValue.length-y:0;Ne;Ne=Ne.nextSibling){if(ke=he(Ne,Ne.firstChild,0),ke)return Ot(Ve(ke.line,ke.ch-Me),C);Me+=Ne.textContent.length}for(var Pe=U.previousSibling,Ze=y;Pe;Pe=Pe.previousSibling){if(ke=he(Pe,Pe.firstChild,-1),ke)return Ot(Ve(ke.line,ke.ch+Ze),C);Ze+=Pe.textContent.length}}var Er=function(s){this.cm=s,this.prevInput="",this.pollingFast=!1,this.polling=new ve,this.hasSelection=!1,this.composing=null};Er.prototype.init=function(s){var f=this,y=this,m=this.cm;this.createField(s);var C=this.textarea;s.wrapper.insertBefore(this.wrapper,s.wrapper.firstChild),_&&(C.style.width="0px"),vt(C,"input",function(){o&&l>=9&&f.hasSelection&&(f.hasSelection=null),y.poll()}),vt(C,"paste",function(R){Dn(m,R)||uf(R,m)||(m.state.pasteIncoming=+new Date,y.fastPoll())});function N(R){if(!Dn(m,R)){if(m.somethingSelected())Ea({lineWise:!1,text:m.getSelections()});else if(m.options.lineWiseCopyCut){var U=df(m);Ea({lineWise:!0,text:U.text}),R.type=="cut"?m.setSelections(U.ranges,null,Ee):(y.prevInput="",C.value=U.text.join(`
`),se(C))}else return;R.type=="cut"&&(m.state.cutIncoming=+new Date)}}vt(C,"cut",N),vt(C,"copy",N),vt(s.scroller,"paste",function(R){if(!(Bt(s,R)||Dn(m,R))){if(!C.dispatchEvent){m.state.pasteIncoming=+new Date,y.focus();return}var U=new Event("paste");U.clipboardData=R.clipboardData,C.dispatchEvent(U)}}),vt(s.lineSpace,"selectstart",function(R){Bt(s,R)||dr(R)}),vt(C,"compositionstart",function(){var R=m.getCursor("from");y.composing&&y.composing.range.clear(),y.composing={start:R,range:m.markText(R,m.getCursor("to"),{className:"CodeMirror-composing"})}}),vt(C,"compositionend",function(){y.composing&&(y.poll(),y.composing.range.clear(),y.composing=null)})},Er.prototype.createField=function(s){this.wrapper=Nh(),this.textarea=this.wrapper.firstChild},Er.prototype.screenReaderLabelChanged=function(s){s?this.textarea.setAttribute("aria-label",s):this.textarea.removeAttribute("aria-label")},Er.prototype.prepareSelection=function(){var s=this.cm,f=s.display,y=s.doc,m=ju(s);if(s.options.moveInputWithCursor){var C=Ua(s,y.sel.primary().head,"div"),N=f.wrapper.getBoundingClientRect(),R=f.lineDiv.getBoundingClientRect();m.teTop=Math.max(0,Math.min(f.wrapper.clientHeight-10,C.top+R.top-N.top)),m.teLeft=Math.max(0,Math.min(f.wrapper.clientWidth-10,C.left+R.left-N.left))}return m},Er.prototype.showSelection=function(s){var f=this.cm,y=f.display;H(y.cursorDiv,s.cursors),H(y.selectionDiv,s.selection),s.teTop!=null&&(this.wrapper.style.top=s.teTop+"px",this.wrapper.style.left=s.teLeft+"px")},Er.prototype.reset=function(s){if(!(this.contextMenuPending||this.composing)){var f=this.cm;if(f.somethingSelected()){this.prevInput="";var y=f.getSelection();this.textarea.value=y,f.state.focused&&se(this.textarea),o&&l>=9&&(this.hasSelection=y)}else s||(this.prevInput=this.textarea.value="",o&&l>=9&&(this.hasSelection=null))}},Er.prototype.getField=function(){return this.textarea},Er.prototype.supportsTouch=function(){return!1},Er.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!M||L()!=this.textarea))try{this.textarea.focus()}catch{}},Er.prototype.blur=function(){this.textarea.blur()},Er.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Er.prototype.receivedFocus=function(){this.slowPoll()},Er.prototype.slowPoll=function(){var s=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){s.poll(),s.cm.state.focused&&s.slowPoll()})},Er.prototype.fastPoll=function(){var s=!1,f=this;f.pollingFast=!0;function y(){var m=f.poll();!m&&!s?(s=!0,f.polling.set(60,y)):(f.pollingFast=!1,f.slowPoll())}f.polling.set(20,y)},Er.prototype.poll=function(){var s=this,f=this.cm,y=this.textarea,m=this.prevInput;if(this.contextMenuPending||!f.state.focused||Ia(y)&&!m&&!this.composing||f.isReadOnly()||f.options.disableInput||f.state.keySeq)return!1;var C=y.value;if(C==m&&!f.somethingSelected())return!1;if(o&&l>=9&&this.hasSelection===C||T&&/[\uf700-\uf7ff]/.test(C))return f.display.input.reset(),!1;if(f.doc.sel==f.display.selForContextMenu){var N=C.charCodeAt(0);if(N==8203&&!m&&(m="\u200B"),N==8666)return this.reset(),this.cm.execCommand("undo")}for(var R=0,U=Math.min(m.length,C.length);R<U&&m.charCodeAt(R)==C.charCodeAt(R);)++R;return si(f,function(){gc(f,C.slice(R),m.length-R,null,s.composing?"*compose":null),C.length>1e3||C.indexOf(`
`)>-1?y.value=s.prevInput="":s.prevInput=C,s.composing&&(s.composing.range.clear(),s.composing.range=f.markText(s.composing.start,f.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Er.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Er.prototype.onKeyPress=function(){o&&l>=9&&(this.hasSelection=null),this.fastPoll()},Er.prototype.onContextMenu=function(s){var f=this,y=f.cm,m=y.display,C=f.textarea;f.contextMenuPending&&f.contextMenuPending();var N=fo(y,s),R=m.scroller.scrollTop;if(!N||h)return;var U=y.options.resetSelectionOnContextMenu;U&&y.doc.sel.contains(N)==-1&&br(y,Vr)(y.doc,ks(N),Ee);var Z=C.style.cssText,ee=f.wrapper.style.cssText,he=f.wrapper.offsetParent.getBoundingClientRect();f.wrapper.style.cssText="position: static",C.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(s.clientY-he.top-5)+"px; left: "+(s.clientX-he.left-5)+`px;
      z-index: 1000; background: `+(o?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var ke;c&&(ke=window.scrollY),m.input.focus(),c&&window.scrollTo(null,ke),m.input.reset(),y.somethingSelected()||(C.value=f.prevInput=" "),f.contextMenuPending=Me,m.selForContextMenu=y.doc.sel,clearTimeout(m.detectingSelectAll);function Ne(){if(C.selectionStart!=null){var Ze=y.somethingSelected(),it="\u200B"+(Ze?C.value:"");C.value="\u21DA",C.value=it,f.prevInput=Ze?"":"\u200B",C.selectionStart=1,C.selectionEnd=it.length,m.selForContextMenu=y.doc.sel}}function Me(){if(f.contextMenuPending==Me&&(f.contextMenuPending=!1,f.wrapper.style.cssText=ee,C.style.cssText=Z,o&&l<9&&m.scrollbars.setScrollTop(m.scroller.scrollTop=R),C.selectionStart!=null)){(!o||o&&l<9)&&Ne();var Ze=0,it=function(){m.selForContextMenu==y.doc.sel&&C.selectionStart==0&&C.selectionEnd>0&&f.prevInput=="\u200B"?br(y,ih)(y):Ze++<10?m.detectingSelectAll=setTimeout(it,500):(m.selForContextMenu=null,m.input.reset())};m.detectingSelectAll=setTimeout(it,200)}}if(o&&l>=9&&Ne(),B){ji(s);var Pe=function(){tr(window,"mouseup",Pe),setTimeout(Me,20)};vt(window,"mouseup",Pe)}else setTimeout(Me,50)},Er.prototype.readOnlyChanged=function(s){s||this.reset(),this.textarea.disabled=s=="nocursor",this.textarea.readOnly=!!s},Er.prototype.setUneditable=function(){},Er.prototype.needsContentAttribute=!1;function cf(s,f){if(f=f?j(f):{},f.value=s.value,!f.tabindex&&s.tabIndex&&(f.tabindex=s.tabIndex),!f.placeholder&&s.placeholder&&(f.placeholder=s.placeholder),f.autofocus==null){var y=L();f.autofocus=y==s||s.getAttribute("autofocus")!=null&&y==document.body}function m(){s.value=U.getValue()}var C;if(s.form&&(vt(s.form,"submit",m),!f.leaveSubmitMethodAlone)){var N=s.form;C=N.submit;try{var R=N.submit=function(){m(),N.submit=C,N.submit(),N.submit=R}}catch{}}f.finishInit=function(Z){Z.save=m,Z.getTextArea=function(){return s},Z.toTextArea=function(){Z.toTextArea=isNaN,m(),s.parentNode.removeChild(Z.getWrapperElement()),s.style.display="",s.form&&(tr(s.form,"submit",m),!f.leaveSubmitMethodAlone&&typeof s.form.submit=="function"&&(s.form.submit=C))}},s.style.display="none";var U=Vn(function(Z){return s.parentNode.insertBefore(Z,s.nextSibling)},f);return U}function Dh(s){s.off=tr,s.on=vt,s.wheelEventPixels=kv,s.Doc=wi,s.splitLines=ri,s.countColumn=fe,s.findColumn=Ce,s.isWordChar=Ge,s.Pass=pe,s.signal=Tt,s.Line=pr,s.changeEnd=xs,s.scrollbarModel=Yd,s.Pos=Ve,s.cmpPos=te,s.modes=ii,s.mimeModes=Zn,s.resolveMode=xr,s.getMode=Ki,s.modeExtensions=Nr,s.extendMode=Fr,s.copyState=Br,s.startState=pa,s.innerMode=Vi,s.commands=al,s.keyMap=Oo,s.keyName=ef,s.isModifierKey=uc,s.lookupKey=zo,s.normalizeKeyMap=Tv,s.StringStream=Fn,s.SharedTextMarker=tu,s.TextMarker=_s,s.LineWidget=Xu,s.e_preventDefault=dr,s.e_stopPropagation=ha,s.e_stop=ji,s.addClass=F,s.contains=ie,s.rmClass=q,s.keyNames=Ms}pc(Vn),Ro(Vn);var xi="iter insert remove copy getEditor constructor".split(" ");for(var yc in wi.prototype)wi.prototype.hasOwnProperty(yc)&&ae(xi,yc)<0&&(Vn.prototype[yc]=function(s){return function(){return s.apply(this.doc,arguments)}}(wi.prototype[yc]));return sr(wi),Vn.inputStyles={textarea:Er,contenteditable:Mn},Vn.defineMode=function(s){!Vn.defaults.mode&&s!="null"&&(Vn.defaults.mode=s),va.apply(this,arguments)},Vn.defineMIME=cr,Vn.defineMode("null",function(){return{token:function(s){return s.skipToEnd()}}}),Vn.defineMIME("text/plain","null"),Vn.defineExtension=function(s,f){Vn.prototype[s]=f},Vn.defineDocExtension=function(s,f){wi.prototype[s]=f},Vn.fromTextArea=cf,Dh(Vn),Vn.version="5.65.2",Vn})})(bn);var yd=bn.exports;(function(b,u){(function(t){t(bn.exports)})(function(t){t.defineMode("shell",function(){var n={};function e(g,w){for(var x=0;x<w.length;x++)n[w[x]]=g}var r=["true","false"],i=["if","then","do","else","elif","while","until","for","in","esac","fi","fin","fil","done","exit","set","unset","export","function"],a=["ab","awk","bash","beep","cat","cc","cd","chown","chmod","chroot","clear","cp","curl","cut","diff","echo","find","gawk","gcc","get","git","grep","hg","kill","killall","ln","ls","make","mkdir","openssl","mv","nc","nl","node","npm","ping","ps","restart","rm","rmdir","sed","service","sh","shopt","shred","source","sort","sleep","ssh","start","stop","su","sudo","svn","tee","telnet","top","touch","vi","vim","wall","wc","wget","who","write","yes","zsh"];t.registerHelper("hintWords","shell",r.concat(i,a)),e("atom",r),e("keyword",i),e("builtin",a);function o(g,w){if(g.eatSpace())return null;var x=g.sol(),_=g.next();if(_==="\\")return g.next(),null;if(_==="'"||_==='"'||_==="`")return w.tokens.unshift(l(_,_==="`"?"quote":"string")),h(g,w);if(_==="#")return x&&g.eat("!")?(g.skipToEnd(),"meta"):(g.skipToEnd(),"comment");if(_==="$")return w.tokens.unshift(d),h(g,w);if(_==="+"||_==="=")return"operator";if(_==="-")return g.eat("-"),g.eatWhile(/\w/),"attribute";if(_=="<"){if(g.match("<<"))return"operator";var E=g.match(/^<-?\s*['"]?([^'"]*)['"]?/);if(E)return w.tokens.unshift(v(E[1])),"string-2"}if(/\d/.test(_)&&(g.eatWhile(/\d/),g.eol()||!/\w/.test(g.peek())))return"number";g.eatWhile(/[\w-]/);var M=g.current();return g.peek()==="="&&/\w+/.test(M)?"def":n.hasOwnProperty(M)?n[M]:null}function l(g,w){var x=g=="("?")":g=="{"?"}":g;return function(_,E){for(var M,T=!1;(M=_.next())!=null;){if(M===x&&!T){E.tokens.shift();break}else if(M==="$"&&!T&&g!=="'"&&_.peek()!=x){T=!0,_.backUp(1),E.tokens.unshift(d);break}else{if(!T&&g!==x&&M===g)return E.tokens.unshift(l(g,w)),h(_,E);if(!T&&/['"]/.test(M)&&!/['"]/.test(g)){E.tokens.unshift(c(M,"string")),_.backUp(1);break}}T=!T&&M==="\\"}return w}}function c(g,w){return function(x,_){return _.tokens[0]=l(g,w),x.next(),h(x,_)}}var d=function(g,w){w.tokens.length>1&&g.eat("$");var x=g.next();return/['"({]/.test(x)?(w.tokens[0]=l(x,x=="("?"quote":x=="{"?"def":"string"),h(g,w)):(/\d/.test(x)||g.eatWhile(/\w/),w.tokens.shift(),"def")};function v(g){return function(w,x){return w.sol()&&w.string==g&&x.tokens.shift(),w.skipToEnd(),"string-2"}}function h(g,w){return(w.tokens[0]||o)(g,w)}return{startState:function(){return{tokens:[]}},token:function(g,w){return h(g,w)},closeBrackets:"()[]{}''\"\"``",lineComment:"#",fold:"brace"}}),t.defineMIME("text/x-sh","shell"),t.defineMIME("application/x-sh","shell")})})();var jm={exports:{}};(function(b,u){(function(t){t(bn.exports)})(function(t){function n(L,F,X,se,Y,j){this.indented=L,this.column=F,this.type=X,this.info=se,this.align=Y,this.prev=j}function e(L,F,X,se){var Y=L.indented;return L.context&&L.context.type=="statement"&&X!="statement"&&(Y=L.context.indented),L.context=new n(Y,F,X,se,null,L.context)}function r(L){var F=L.context.type;return(F==")"||F=="]"||F=="}")&&(L.indented=L.context.indented),L.context=L.context.prev}function i(L,F,X){if(F.prevToken=="variable"||F.prevToken=="type"||/\S(?:[^- ]>|[*\]])\s*$|\*$/.test(L.string.slice(0,X))||F.typeAtEndOfLine&&L.column()==L.indentation())return!0}function a(L){for(;;){if(!L||L.type=="top")return!0;if(L.type=="}"&&L.prev.info!="namespace")return!1;L=L.prev}}t.defineMode("clike",function(L,F){var X=L.indentUnit,se=F.statementIndentUnit||X,Y=F.dontAlignCalls,j=F.keywords||{},fe=F.types||{},ve=F.builtin||{},ae=F.blockKeywords||{},J=F.defKeywords||{},pe=F.atoms||{},Ee=F.hooks||{},Le=F.multiLineStrings,Re=F.indentStatements!==!1,Ce=F.indentSwitch!==!1,ne=F.namespaceSeparator,me=F.isPunctuationChar||/[\[\]{}\(\),;\:\.]/,ue=F.numberStart||/[\d\.]/,Te=F.number||/^(?:0x[a-f\d]+|0b[01]+|(?:\d+\.?\d*|\.\d+)(?:e[-+]?\d+)?)(u|ll?|l|f)?/i,ze=F.isOperatorChar||/[+\-*&%=<>!?|\/]/,We=F.isIdentifierChar||/[\w\$_\xa1-\uffff]/,et=F.isReservedIdentifier||!1,Ke,Ge;function _e(nt,wt){var bt=nt.next();if(Ee[bt]){var Et=Ee[bt](nt,wt);if(Et!==!1)return Et}if(bt=='"'||bt=="'")return wt.tokenize=Ue(bt),wt.tokenize(nt,wt);if(ue.test(bt)){if(nt.backUp(1),nt.match(Te))return"number";nt.next()}if(me.test(bt))return Ke=bt,null;if(bt=="/"){if(nt.eat("*"))return wt.tokenize=Ae,Ae(nt,wt);if(nt.eat("/"))return nt.skipToEnd(),"comment"}if(ze.test(bt)){for(;!nt.match(/^\/[\/*]/,!1)&&nt.eat(ze););return"operator"}if(nt.eatWhile(We),ne)for(;nt.match(ne);)nt.eatWhile(We);var Dt=nt.current();return l(j,Dt)?(l(ae,Dt)&&(Ke="newstatement"),l(J,Dt)&&(Ge=!0),"keyword"):l(fe,Dt)?"type":l(ve,Dt)||et&&et(Dt)?(l(ae,Dt)&&(Ke="newstatement"),"builtin"):l(pe,Dt)?"atom":"variable"}function Ue(nt){return function(wt,bt){for(var Et=!1,Dt,wn=!1;(Dt=wt.next())!=null;){if(Dt==nt&&!Et){wn=!0;break}Et=!Et&&Dt=="\\"}return(wn||!(Et||Le))&&(bt.tokenize=null),"string"}}function Ae(nt,wt){for(var bt=!1,Et;Et=nt.next();){if(Et=="/"&&bt){wt.tokenize=null;break}bt=Et=="*"}return"comment"}function ot(nt,wt){F.typeFirstDefinitions&&nt.eol()&&a(wt.context)&&(wt.typeAtEndOfLine=i(nt,wt,nt.pos))}return{startState:function(nt){return{tokenize:null,context:new n((nt||0)-X,0,"top",null,!1),indented:0,startOfLine:!0,prevToken:null}},token:function(nt,wt){var bt=wt.context;if(nt.sol()&&(bt.align==null&&(bt.align=!1),wt.indented=nt.indentation(),wt.startOfLine=!0),nt.eatSpace())return ot(nt,wt),null;Ke=Ge=null;var Et=(wt.tokenize||_e)(nt,wt);if(Et=="comment"||Et=="meta")return Et;if(bt.align==null&&(bt.align=!0),Ke==";"||Ke==":"||Ke==","&&nt.match(/^\s*(?:\/\/.*)?$/,!1))for(;wt.context.type=="statement";)r(wt);else if(Ke=="{")e(wt,nt.column(),"}");else if(Ke=="[")e(wt,nt.column(),"]");else if(Ke=="(")e(wt,nt.column(),")");else if(Ke=="}"){for(;bt.type=="statement";)bt=r(wt);for(bt.type=="}"&&(bt=r(wt));bt.type=="statement";)bt=r(wt)}else Ke==bt.type?r(wt):Re&&((bt.type=="}"||bt.type=="top")&&Ke!=";"||bt.type=="statement"&&Ke=="newstatement")&&e(wt,nt.column(),"statement",nt.current());if(Et=="variable"&&(wt.prevToken=="def"||F.typeFirstDefinitions&&i(nt,wt,nt.start)&&a(wt.context)&&nt.match(/^\s*\(/,!1))&&(Et="def"),Ee.token){var Dt=Ee.token(nt,wt,Et);Dt!==void 0&&(Et=Dt)}return Et=="def"&&F.styleDefs===!1&&(Et="variable"),wt.startOfLine=!1,wt.prevToken=Ge?"def":Et||Ke,ot(nt,wt),Et},indent:function(nt,wt){if(nt.tokenize!=_e&&nt.tokenize!=null||nt.typeAtEndOfLine)return t.Pass;var bt=nt.context,Et=wt&&wt.charAt(0),Dt=Et==bt.type;if(bt.type=="statement"&&Et=="}"&&(bt=bt.prev),F.dontIndentStatements)for(;bt.type=="statement"&&F.dontIndentStatements.test(bt.info);)bt=bt.prev;if(Ee.indent){var wn=Ee.indent(nt,bt,wt,X);if(typeof wn=="number")return wn}var zn=bt.prev&&bt.prev.info=="switch";if(F.allmanIndentation&&/[{(]/.test(Et)){for(;bt.type!="top"&&bt.type!="}";)bt=bt.prev;return bt.indented}return bt.type=="statement"?bt.indented+(Et=="{"?0:se):bt.align&&(!Y||bt.type!=")")?bt.column+(Dt?0:1):bt.type==")"&&!Dt?bt.indented+se:bt.indented+(Dt?0:X)+(!Dt&&zn&&!/^(?:case|default)\b/.test(wt)?X:0)},electricInput:Ce?/^\s*(?:case .*?:|default:|\{\}?|\})$/:/^\s*[{}]$/,blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:"//",fold:"brace"}});function o(L){for(var F={},X=L.split(" "),se=0;se<X.length;++se)F[X[se]]=!0;return F}function l(L,F){return typeof L=="function"?L(F):L.propertyIsEnumerable(F)}var c="auto if break case register continue return default do sizeof static else struct switch extern typedef union for goto while enum const volatile inline restrict asm fortran",d="alignas alignof and and_eq audit axiom bitand bitor catch class compl concept constexpr const_cast decltype delete dynamic_cast explicit export final friend import module mutable namespace new noexcept not not_eq operator or or_eq override private protected public reinterpret_cast requires static_assert static_cast template this thread_local throw try typeid typename using virtual xor xor_eq",v="bycopy byref in inout oneway out self super atomic nonatomic retain copy readwrite readonly strong weak assign typeof nullable nonnull null_resettable _cmd @interface @implementation @end @protocol @encode @property @synthesize @dynamic @class @public @package @private @protected @required @optional @try @catch @finally @import @selector @encode @defs @synchronized @autoreleasepool @compatibility_alias @available",h="FOUNDATION_EXPORT FOUNDATION_EXTERN NS_INLINE NS_FORMAT_FUNCTION  NS_RETURNS_RETAINEDNS_ERROR_ENUM NS_RETURNS_NOT_RETAINED NS_RETURNS_INNER_POINTER NS_DESIGNATED_INITIALIZER NS_ENUM NS_OPTIONS NS_REQUIRES_NIL_TERMINATION NS_ASSUME_NONNULL_BEGIN NS_ASSUME_NONNULL_END NS_SWIFT_NAME NS_REFINED_FOR_SWIFT",g=o("int long char short double float unsigned signed void bool"),w=o("SEL instancetype id Class Protocol BOOL");function x(L){return l(g,L)||/.+_t$/.test(L)}function _(L){return x(L)||l(w,L)}var E="case do else for if switch while struct enum union",M="struct enum union";function T(L,F){if(!F.startOfLine)return!1;for(var X,se=null;X=L.peek();){if(X=="\\"&&L.match(/^.$/)){se=T;break}else if(X=="/"&&L.match(/^\/[\/\*]/,!1))break;L.next()}return F.tokenize=se,"meta"}function S(L,F){return F.prevToken=="type"?"type":!1}function D(L){return!L||L.length<2||L[0]!="_"?!1:L[1]=="_"||L[1]!==L[1].toLowerCase()}function I(L){return L.eatWhile(/[\w\.']/),"number"}function P(L,F){if(L.backUp(1),L.match(/^(?:R|u8R|uR|UR|LR)/)){var X=L.match(/^"([^\s\\()]{0,16})\(/);return X?(F.cpp11RawStringDelim=X[1],F.tokenize=q,q(L,F)):!1}return L.match(/^(?:u8|u|U|L)/)?L.match(/^["']/,!1)?"string":!1:(L.next(),!1)}function B(L){var F=/(\w+)::~?(\w+)$/.exec(L);return F&&F[1]==F[2]}function $(L,F){for(var X;(X=L.next())!=null;)if(X=='"'&&!L.eat('"')){F.tokenize=null;break}return"string"}function q(L,F){var X=F.cpp11RawStringDelim.replace(/[^\w\s]/g,"\\$&"),se=L.match(new RegExp(".*?\\)"+X+'"'));return se?F.tokenize=null:L.skipToEnd(),"string"}function G(L,F){typeof L=="string"&&(L=[L]);var X=[];function se(j){if(j)for(var fe in j)j.hasOwnProperty(fe)&&X.push(fe)}se(F.keywords),se(F.types),se(F.builtin),se(F.atoms),X.length&&(F.helperType=L[0],t.registerHelper("hintWords",L[0],X));for(var Y=0;Y<L.length;++Y)t.defineMIME(L[Y],F)}G(["text/x-csrc","text/x-c","text/x-chdr"],{name:"clike",keywords:o(c),types:x,blockKeywords:o(E),defKeywords:o(M),typeFirstDefinitions:!0,atoms:o("NULL true false"),isReservedIdentifier:D,hooks:{"#":T,"*":S},modeProps:{fold:["brace","include"]}}),G(["text/x-c++src","text/x-c++hdr"],{name:"clike",keywords:o(c+" "+d),types:x,blockKeywords:o(E+" class try catch"),defKeywords:o(M+" class namespace"),typeFirstDefinitions:!0,atoms:o("true false NULL nullptr"),dontIndentStatements:/^template$/,isIdentifierChar:/[\w\$_~\xa1-\uffff]/,isReservedIdentifier:D,hooks:{"#":T,"*":S,u:P,U:P,L:P,R:P,"0":I,"1":I,"2":I,"3":I,"4":I,"5":I,"6":I,"7":I,"8":I,"9":I,token:function(L,F,X){if(X=="variable"&&L.peek()=="("&&(F.prevToken==";"||F.prevToken==null||F.prevToken=="}")&&B(L.current()))return"def"}},namespaceSeparator:"::",modeProps:{fold:["brace","include"]}}),G("text/x-java",{name:"clike",keywords:o("abstract assert break case catch class const continue default do else enum extends final finally for goto if implements import instanceof interface native new package private protected public return static strictfp super switch synchronized this throw throws transient try volatile while @interface"),types:o("var byte short int long float double boolean char void Boolean Byte Character Double Float Integer Long Number Object Short String StringBuffer StringBuilder Void"),blockKeywords:o("catch class do else finally for if switch try while"),defKeywords:o("class interface enum @interface"),typeFirstDefinitions:!0,atoms:o("true false null"),number:/^(?:0x[a-f\d_]+|0b[01_]+|(?:[\d_]+\.?\d*|\.\d+)(?:e[-+]?[\d_]+)?)(u|ll?|l|f)?/i,hooks:{"@":function(L){return L.match("interface",!1)?!1:(L.eatWhile(/[\w\$_]/),"meta")},'"':function(L,F){return L.match(`""
`)?(F.tokenize=H,F.tokenize(L,F)):!1}},modeProps:{fold:["brace","import"]}}),G("text/x-csharp",{name:"clike",keywords:o("abstract as async await base break case catch checked class const continue default delegate do else enum event explicit extern finally fixed for foreach goto if implicit in interface internal is lock namespace new operator out override params private protected public readonly ref return sealed sizeof stackalloc static struct switch this throw try typeof unchecked unsafe using virtual void volatile while add alias ascending descending dynamic from get global group into join let orderby partial remove select set value var yield"),types:o("Action Boolean Byte Char DateTime DateTimeOffset Decimal Double Func Guid Int16 Int32 Int64 Object SByte Single String Task TimeSpan UInt16 UInt32 UInt64 bool byte char decimal double short int long object sbyte float string ushort uint ulong"),blockKeywords:o("catch class do else finally for foreach if struct switch try while"),defKeywords:o("class interface namespace struct var"),typeFirstDefinitions:!0,atoms:o("true false null"),hooks:{"@":function(L,F){return L.eat('"')?(F.tokenize=$,$(L,F)):(L.eatWhile(/[\w\$_]/),"meta")}}});function H(L,F){for(var X=!1;!L.eol();){if(!X&&L.match('"""')){F.tokenize=null;break}X=L.next()=="\\"&&!X}return"string"}function z(L){return function(F,X){for(var se;se=F.next();)if(se=="*"&&F.eat("/"))if(L==1){X.tokenize=null;break}else return X.tokenize=z(L-1),X.tokenize(F,X);else if(se=="/"&&F.eat("*"))return X.tokenize=z(L+1),X.tokenize(F,X);return"comment"}}G("text/x-scala",{name:"clike",keywords:o("abstract case catch class def do else extends final finally for forSome if implicit import lazy match new null object override package private protected return sealed super this throw trait try type val var while with yield _ assert assume require print println printf readLine readBoolean readByte readShort readChar readInt readLong readFloat readDouble"),types:o("AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either Enumeration Equiv Error Exception Fractional Function IndexedSeq Int Integral Iterable Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),multiLineStrings:!0,blockKeywords:o("catch class enum do else finally for forSome if match switch try while"),defKeywords:o("class enum def object package trait type val var"),atoms:o("true false null"),indentStatements:!1,indentSwitch:!1,isOperatorChar:/[+\-*&%=<>!?|\/#:@]/,hooks:{"@":function(L){return L.eatWhile(/[\w\$_]/),"meta"},'"':function(L,F){return L.match('""')?(F.tokenize=H,F.tokenize(L,F)):!1},"'":function(L){return L.eatWhile(/[\w\$_\xa1-\uffff]/),"atom"},"=":function(L,F){var X=F.context;return X.type=="}"&&X.align&&L.eat(">")?(F.context=new n(X.indented,X.column,X.type,X.info,null,X.prev),"operator"):!1},"/":function(L,F){return L.eat("*")?(F.tokenize=z(1),F.tokenize(L,F)):!1}},modeProps:{closeBrackets:{pairs:'()[]{}""',triples:'"'}}});function O(L){return function(F,X){for(var se=!1,Y,j=!1;!F.eol();){if(!L&&!se&&F.match('"')){j=!0;break}if(L&&F.match('"""')){j=!0;break}Y=F.next(),!se&&Y=="$"&&F.match("{")&&F.skipTo("}"),se=!se&&Y=="\\"&&!L}return(j||!L)&&(X.tokenize=null),"string"}}G("text/x-kotlin",{name:"clike",keywords:o("package as typealias class interface this super val operator var fun for is in This throw return annotation break continue object if else while do try when !in !is as? file import where by get set abstract enum open inner override private public internal protected catch finally out final vararg reified dynamic companion constructor init sealed field property receiver param sparam lateinit data inline noinline tailrec external annotation crossinline const operator infix suspend actual expect setparam value"),types:o("Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void Annotation Any BooleanArray ByteArray Char CharArray DeprecationLevel DoubleArray Enum FloatArray Function Int IntArray Lazy LazyThreadSafetyMode LongArray Nothing ShortArray Unit"),intendSwitch:!1,indentStatements:!1,multiLineStrings:!0,number:/^(?:0x[a-f\d_]+|0b[01_]+|(?:[\d_]+(\.\d+)?|\.\d+)(?:e[-+]?[\d_]+)?)(u|ll?|l|f)?/i,blockKeywords:o("catch class do else finally for if where try while enum"),defKeywords:o("class val var object interface fun"),atoms:o("true false null this"),hooks:{"@":function(L){return L.eatWhile(/[\w\$_]/),"meta"},"*":function(L,F){return F.prevToken=="."?"variable":"operator"},'"':function(L,F){return F.tokenize=O(L.match('""')),F.tokenize(L,F)},"/":function(L,F){return L.eat("*")?(F.tokenize=z(1),F.tokenize(L,F)):!1},indent:function(L,F,X,se){var Y=X&&X.charAt(0);if((L.prevToken=="}"||L.prevToken==")")&&X=="")return L.indented;if(L.prevToken=="operator"&&X!="}"&&L.context.type!="}"||L.prevToken=="variable"&&Y=="."||(L.prevToken=="}"||L.prevToken==")")&&Y==".")return se*2+F.indented;if(F.align&&F.type=="}")return F.indented+(L.context.type==(X||"").charAt(0)?0:se)}},modeProps:{closeBrackets:{triples:'"'}}}),G(["x-shader/x-vertex","x-shader/x-fragment"],{name:"clike",keywords:o("sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow const attribute uniform varying break continue discard return for while do if else struct in out inout"),types:o("float int bool void vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 mat2 mat3 mat4"),blockKeywords:o("for while do if else struct"),builtin:o("radians degrees sin cos tan asin acos atan pow exp log exp2 sqrt inversesqrt abs sign floor ceil fract mod min max clamp mix step smoothstep length distance dot cross normalize ftransform faceforward reflect refract matrixCompMult lessThan lessThanEqual greaterThan greaterThanEqual equal notEqual any all not texture1D texture1DProj texture1DLod texture1DProjLod texture2D texture2DProj texture2DLod texture2DProjLod texture3D texture3DProj texture3DLod texture3DProjLod textureCube textureCubeLod shadow1D shadow2D shadow1DProj shadow2DProj shadow1DLod shadow2DLod shadow1DProjLod shadow2DProjLod dFdx dFdy fwidth noise1 noise2 noise3 noise4"),atoms:o("true false gl_FragColor gl_SecondaryColor gl_Normal gl_Vertex gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_FogCoord gl_PointCoord gl_Position gl_PointSize gl_ClipVertex gl_FrontColor gl_BackColor gl_FrontSecondaryColor gl_BackSecondaryColor gl_TexCoord gl_FogFragCoord gl_FragCoord gl_FrontFacing gl_FragData gl_FragDepth gl_ModelViewMatrix gl_ProjectionMatrix gl_ModelViewProjectionMatrix gl_TextureMatrix gl_NormalMatrix gl_ModelViewMatrixInverse gl_ProjectionMatrixInverse gl_ModelViewProjectionMatrixInverse gl_TextureMatrixTranspose gl_ModelViewMatrixInverseTranspose gl_ProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixInverseTranspose gl_TextureMatrixInverseTranspose gl_NormalScale gl_DepthRange gl_ClipPlane gl_Point gl_FrontMaterial gl_BackMaterial gl_LightSource gl_LightModel gl_FrontLightModelProduct gl_BackLightModelProduct gl_TextureColor gl_EyePlaneS gl_EyePlaneT gl_EyePlaneR gl_EyePlaneQ gl_FogParameters gl_MaxLights gl_MaxClipPlanes gl_MaxTextureUnits gl_MaxTextureCoords gl_MaxVertexAttribs gl_MaxVertexUniformComponents gl_MaxVaryingFloats gl_MaxVertexTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformComponents gl_MaxCombineTextureImageUnits gl_MaxDrawBuffers"),indentSwitch:!1,hooks:{"#":T},modeProps:{fold:["brace","include"]}}),G("text/x-nesc",{name:"clike",keywords:o(c+" as atomic async call command component components configuration event generic implementation includes interface module new norace nx_struct nx_union post provides signal task uses abstract extends"),types:x,blockKeywords:o(E),atoms:o("null true false"),hooks:{"#":T},modeProps:{fold:["brace","include"]}}),G("text/x-objectivec",{name:"clike",keywords:o(c+" "+v),types:_,builtin:o(h),blockKeywords:o(E+" @synthesize @try @catch @finally @autoreleasepool @synchronized"),defKeywords:o(M+" @interface @implementation @protocol @class"),dontIndentStatements:/^@.*$/,typeFirstDefinitions:!0,atoms:o("YES NO NULL Nil nil true false nullptr"),isReservedIdentifier:D,hooks:{"#":T,"*":S},modeProps:{fold:["brace","include"]}}),G("text/x-objectivec++",{name:"clike",keywords:o(c+" "+v+" "+d),types:_,builtin:o(h),blockKeywords:o(E+" @synthesize @try @catch @finally @autoreleasepool @synchronized class try catch"),defKeywords:o(M+" @interface @implementation @protocol @class class namespace"),dontIndentStatements:/^@.*$|^template$/,typeFirstDefinitions:!0,atoms:o("YES NO NULL Nil nil true false nullptr"),isReservedIdentifier:D,hooks:{"#":T,"*":S,u:P,U:P,L:P,R:P,"0":I,"1":I,"2":I,"3":I,"4":I,"5":I,"6":I,"7":I,"8":I,"9":I,token:function(L,F,X){if(X=="variable"&&L.peek()=="("&&(F.prevToken==";"||F.prevToken==null||F.prevToken=="}")&&B(L.current()))return"def"}},namespaceSeparator:"::",modeProps:{fold:["brace","include"]}}),G("text/x-squirrel",{name:"clike",keywords:o("base break clone continue const default delete enum extends function in class foreach local resume return this throw typeof yield constructor instanceof static"),types:x,blockKeywords:o("case catch class else for foreach if switch try while"),defKeywords:o("function local class"),typeFirstDefinitions:!0,atoms:o("true false null"),hooks:{"#":T},modeProps:{fold:["brace","include"]}});var Q=null;function ie(L){return function(F,X){for(var se=!1,Y,j=!1;!F.eol();){if(!se&&F.match('"')&&(L=="single"||F.match('""'))){j=!0;break}if(!se&&F.match("``")){Q=ie(L),j=!0;break}Y=F.next(),se=L=="single"&&!se&&Y=="\\"}return j&&(X.tokenize=null),"string"}}G("text/x-ceylon",{name:"clike",keywords:o("abstracts alias assembly assert assign break case catch class continue dynamic else exists extends finally for function given if import in interface is let module new nonempty object of out outer package return satisfies super switch then this throw try value void while"),types:function(L){var F=L.charAt(0);return F===F.toUpperCase()&&F!==F.toLowerCase()},blockKeywords:o("case catch class dynamic else finally for function if interface module new object switch try while"),defKeywords:o("class dynamic function interface module object package value"),builtin:o("abstract actual aliased annotation by default deprecated doc final formal late license native optional sealed see serializable shared suppressWarnings tagged throws variable"),isPunctuationChar:/[\[\]{}\(\),;\:\.`]/,isOperatorChar:/[+\-*&%=<>!?|^~:\/]/,numberStart:/[\d#$]/,number:/^(?:#[\da-fA-F_]+|\$[01_]+|[\d_]+[kMGTPmunpf]?|[\d_]+\.[\d_]+(?:[eE][-+]?\d+|[kMGTPmunpf]|)|)/i,multiLineStrings:!0,typeFirstDefinitions:!0,atoms:o("true false null larger smaller equal empty finished"),indentSwitch:!1,styleDefs:!1,hooks:{"@":function(L){return L.eatWhile(/[\w\$_]/),"meta"},'"':function(L,F){return F.tokenize=ie(L.match('""')?"triple":"single"),F.tokenize(L,F)},"`":function(L,F){return!Q||!L.match("`")?!1:(F.tokenize=Q,Q=null,F.tokenize(L,F))},"'":function(L){return L.eatWhile(/[\w\$_\xa1-\uffff]/),"atom"},token:function(L,F,X){if((X=="variable"||X=="type")&&F.prevToken==".")return"variable-2"}},modeProps:{fold:["brace","import"],closeBrackets:{triples:'"'}}})})})();var E_={exports:{}};(function(b,u){(function(t){t(bn.exports)})(function(t){t.defineMode("css",function($,q){var G=q.inline;q.propertyKeywords||(q=t.resolveMode("text/css"));var H=$.indentUnit,z=q.tokenHooks,O=q.documentTypes||{},Q=q.mediaTypes||{},ie=q.mediaFeatures||{},L=q.mediaValueKeywords||{},F=q.propertyKeywords||{},X=q.nonStandardPropertyKeywords||{},se=q.fontProperties||{},Y=q.counterDescriptors||{},j=q.colorKeywords||{},fe=q.valueKeywords||{},ve=q.allowNested,ae=q.lineComment,J=q.supportsAtComponent===!0,pe=$.highlightNonStandardPropertyKeywords!==!1,Ee,Le;function Re(_e,Ue){return Ee=Ue,_e}function Ce(_e,Ue){var Ae=_e.next();if(z[Ae]){var ot=z[Ae](_e,Ue);if(ot!==!1)return ot}if(Ae=="@")return _e.eatWhile(/[\w\\\-]/),Re("def",_e.current());if(Ae=="="||(Ae=="~"||Ae=="|")&&_e.eat("="))return Re(null,"compare");if(Ae=='"'||Ae=="'")return Ue.tokenize=ne(Ae),Ue.tokenize(_e,Ue);if(Ae=="#")return _e.eatWhile(/[\w\\\-]/),Re("atom","hash");if(Ae=="!")return _e.match(/^\s*\w*/),Re("keyword","important");if(/\d/.test(Ae)||Ae=="."&&_e.eat(/\d/))return _e.eatWhile(/[\w.%]/),Re("number","unit");if(Ae==="-"){if(/[\d.]/.test(_e.peek()))return _e.eatWhile(/[\w.%]/),Re("number","unit");if(_e.match(/^-[\w\\\-]*/))return _e.eatWhile(/[\w\\\-]/),_e.match(/^\s*:/,!1)?Re("variable-2","variable-definition"):Re("variable-2","variable");if(_e.match(/^\w+-/))return Re("meta","meta")}else return/[,+>*\/]/.test(Ae)?Re(null,"select-op"):Ae=="."&&_e.match(/^-?[_a-z][_a-z0-9-]*/i)?Re("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(Ae)?Re(null,Ae):_e.match(/^[\w-.]+(?=\()/)?(/^(url(-prefix)?|domain|regexp)$/i.test(_e.current())&&(Ue.tokenize=me),Re("variable callee","variable")):/[\w\\\-]/.test(Ae)?(_e.eatWhile(/[\w\\\-]/),Re("property","word")):Re(null,null)}function ne(_e){return function(Ue,Ae){for(var ot=!1,nt;(nt=Ue.next())!=null;){if(nt==_e&&!ot){_e==")"&&Ue.backUp(1);break}ot=!ot&&nt=="\\"}return(nt==_e||!ot&&_e!=")")&&(Ae.tokenize=null),Re("string","string")}}function me(_e,Ue){return _e.next(),_e.match(/^\s*[\"\')]/,!1)?Ue.tokenize=null:Ue.tokenize=ne(")"),Re(null,"(")}function ue(_e,Ue,Ae){this.type=_e,this.indent=Ue,this.prev=Ae}function Te(_e,Ue,Ae,ot){return _e.context=new ue(Ae,Ue.indentation()+(ot===!1?0:H),_e.context),Ae}function ze(_e){return _e.context.prev&&(_e.context=_e.context.prev),_e.context.type}function We(_e,Ue,Ae){return Ge[Ae.context.type](_e,Ue,Ae)}function et(_e,Ue,Ae,ot){for(var nt=ot||1;nt>0;nt--)Ae.context=Ae.context.prev;return We(_e,Ue,Ae)}function Ke(_e){var Ue=_e.current().toLowerCase();fe.hasOwnProperty(Ue)?Le="atom":j.hasOwnProperty(Ue)?Le="keyword":Le="variable"}var Ge={};return Ge.top=function(_e,Ue,Ae){if(_e=="{")return Te(Ae,Ue,"block");if(_e=="}"&&Ae.context.prev)return ze(Ae);if(J&&/@component/i.test(_e))return Te(Ae,Ue,"atComponentBlock");if(/^@(-moz-)?document$/i.test(_e))return Te(Ae,Ue,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(_e))return Te(Ae,Ue,"atBlock");if(/^@(font-face|counter-style)/i.test(_e))return Ae.stateArg=_e,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(_e))return"keyframes";if(_e&&_e.charAt(0)=="@")return Te(Ae,Ue,"at");if(_e=="hash")Le="builtin";else if(_e=="word")Le="tag";else{if(_e=="variable-definition")return"maybeprop";if(_e=="interpolation")return Te(Ae,Ue,"interpolation");if(_e==":")return"pseudo";if(ve&&_e=="(")return Te(Ae,Ue,"parens")}return Ae.context.type},Ge.block=function(_e,Ue,Ae){if(_e=="word"){var ot=Ue.current().toLowerCase();return F.hasOwnProperty(ot)?(Le="property","maybeprop"):X.hasOwnProperty(ot)?(Le=pe?"string-2":"property","maybeprop"):ve?(Le=Ue.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(Le+=" error","maybeprop")}else return _e=="meta"?"block":!ve&&(_e=="hash"||_e=="qualifier")?(Le="error","block"):Ge.top(_e,Ue,Ae)},Ge.maybeprop=function(_e,Ue,Ae){return _e==":"?Te(Ae,Ue,"prop"):We(_e,Ue,Ae)},Ge.prop=function(_e,Ue,Ae){if(_e==";")return ze(Ae);if(_e=="{"&&ve)return Te(Ae,Ue,"propBlock");if(_e=="}"||_e=="{")return et(_e,Ue,Ae);if(_e=="(")return Te(Ae,Ue,"parens");if(_e=="hash"&&!/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(Ue.current()))Le+=" error";else if(_e=="word")Ke(Ue);else if(_e=="interpolation")return Te(Ae,Ue,"interpolation");return"prop"},Ge.propBlock=function(_e,Ue,Ae){return _e=="}"?ze(Ae):_e=="word"?(Le="property","maybeprop"):Ae.context.type},Ge.parens=function(_e,Ue,Ae){return _e=="{"||_e=="}"?et(_e,Ue,Ae):_e==")"?ze(Ae):_e=="("?Te(Ae,Ue,"parens"):_e=="interpolation"?Te(Ae,Ue,"interpolation"):(_e=="word"&&Ke(Ue),"parens")},Ge.pseudo=function(_e,Ue,Ae){return _e=="meta"?"pseudo":_e=="word"?(Le="variable-3",Ae.context.type):We(_e,Ue,Ae)},Ge.documentTypes=function(_e,Ue,Ae){return _e=="word"&&O.hasOwnProperty(Ue.current())?(Le="tag",Ae.context.type):Ge.atBlock(_e,Ue,Ae)},Ge.atBlock=function(_e,Ue,Ae){if(_e=="(")return Te(Ae,Ue,"atBlock_parens");if(_e=="}"||_e==";")return et(_e,Ue,Ae);if(_e=="{")return ze(Ae)&&Te(Ae,Ue,ve?"block":"top");if(_e=="interpolation")return Te(Ae,Ue,"interpolation");if(_e=="word"){var ot=Ue.current().toLowerCase();ot=="only"||ot=="not"||ot=="and"||ot=="or"?Le="keyword":Q.hasOwnProperty(ot)?Le="attribute":ie.hasOwnProperty(ot)?Le="property":L.hasOwnProperty(ot)?Le="keyword":F.hasOwnProperty(ot)?Le="property":X.hasOwnProperty(ot)?Le=pe?"string-2":"property":fe.hasOwnProperty(ot)?Le="atom":j.hasOwnProperty(ot)?Le="keyword":Le="error"}return Ae.context.type},Ge.atComponentBlock=function(_e,Ue,Ae){return _e=="}"?et(_e,Ue,Ae):_e=="{"?ze(Ae)&&Te(Ae,Ue,ve?"block":"top",!1):(_e=="word"&&(Le="error"),Ae.context.type)},Ge.atBlock_parens=function(_e,Ue,Ae){return _e==")"?ze(Ae):_e=="{"||_e=="}"?et(_e,Ue,Ae,2):Ge.atBlock(_e,Ue,Ae)},Ge.restricted_atBlock_before=function(_e,Ue,Ae){return _e=="{"?Te(Ae,Ue,"restricted_atBlock"):_e=="word"&&Ae.stateArg=="@counter-style"?(Le="variable","restricted_atBlock_before"):We(_e,Ue,Ae)},Ge.restricted_atBlock=function(_e,Ue,Ae){return _e=="}"?(Ae.stateArg=null,ze(Ae)):_e=="word"?(Ae.stateArg=="@font-face"&&!se.hasOwnProperty(Ue.current().toLowerCase())||Ae.stateArg=="@counter-style"&&!Y.hasOwnProperty(Ue.current().toLowerCase())?Le="error":Le="property","maybeprop"):"restricted_atBlock"},Ge.keyframes=function(_e,Ue,Ae){return _e=="word"?(Le="variable","keyframes"):_e=="{"?Te(Ae,Ue,"top"):We(_e,Ue,Ae)},Ge.at=function(_e,Ue,Ae){return _e==";"?ze(Ae):_e=="{"||_e=="}"?et(_e,Ue,Ae):(_e=="word"?Le="tag":_e=="hash"&&(Le="builtin"),"at")},Ge.interpolation=function(_e,Ue,Ae){return _e=="}"?ze(Ae):_e=="{"||_e==";"?et(_e,Ue,Ae):(_e=="word"?Le="variable":_e!="variable"&&_e!="("&&_e!=")"&&(Le="error"),"interpolation")},{startState:function(_e){return{tokenize:null,state:G?"block":"top",stateArg:null,context:new ue(G?"block":"top",_e||0,null)}},token:function(_e,Ue){if(!Ue.tokenize&&_e.eatSpace())return null;var Ae=(Ue.tokenize||Ce)(_e,Ue);return Ae&&typeof Ae=="object"&&(Ee=Ae[1],Ae=Ae[0]),Le=Ae,Ee!="comment"&&(Ue.state=Ge[Ue.state](Ee,_e,Ue)),Le},indent:function(_e,Ue){var Ae=_e.context,ot=Ue&&Ue.charAt(0),nt=Ae.indent;return Ae.type=="prop"&&(ot=="}"||ot==")")&&(Ae=Ae.prev),Ae.prev&&(ot=="}"&&(Ae.type=="block"||Ae.type=="top"||Ae.type=="interpolation"||Ae.type=="restricted_atBlock")?(Ae=Ae.prev,nt=Ae.indent):(ot==")"&&(Ae.type=="parens"||Ae.type=="atBlock_parens")||ot=="{"&&(Ae.type=="at"||Ae.type=="atBlock"))&&(nt=Math.max(0,Ae.indent-H))),nt},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:ae,fold:"brace"}});function n($){for(var q={},G=0;G<$.length;++G)q[$[G].toLowerCase()]=!0;return q}var e=["domain","regexp","url","url-prefix"],r=n(e),i=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],a=n(i),o=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover","prefers-color-scheme","dynamic-range","video-dynamic-range"],l=n(o),c=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive","dark","light","standard","high"],d=n(c),v=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","all","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","binding","bleed","block-size","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-content","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-height-step","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotate","rotation","rotation-point","row-gap","ruby-align","ruby-overhang","ruby-position","ruby-span","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-orientation","text-outline","text-overflow","text-rendering","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","touch-action","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","paint-order","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],h=n(v),g=["accent-color","aspect-ratio","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","content-visibility","margin-block","margin-block-end","margin-block-start","margin-inline","margin-inline-end","margin-inline-start","overflow-anchor","overscroll-behavior","padding-block","padding-block-end","padding-block-start","padding-inline","padding-inline-end","padding-inline-start","scroll-snap-stop","scrollbar-3d-light-color","scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-track-color","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","shape-inside","zoom"],w=n(g),x=["font-display","font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],_=n(x),E=["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"],M=n(E),T=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],S=n(T),D=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","blur","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","brightness","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","conic-gradient","contain","content","contents","content-box","context-menu","continuous","contrast","copy","counter","counters","cover","crop","cross","crosshair","cubic-bezier","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","drop-shadow","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","grayscale","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","hue-rotate","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","manipulation","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiple_mask_images","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeating-conic-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturate","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","sepia","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],I=n(D),P=e.concat(i).concat(o).concat(c).concat(v).concat(g).concat(T).concat(D);t.registerHelper("hintWords","css",P);function B($,q){for(var G=!1,H;(H=$.next())!=null;){if(G&&H=="/"){q.tokenize=null;break}G=H=="*"}return["comment","comment"]}t.defineMIME("text/css",{documentTypes:r,mediaTypes:a,mediaFeatures:l,mediaValueKeywords:d,propertyKeywords:h,nonStandardPropertyKeywords:w,fontProperties:_,counterDescriptors:M,colorKeywords:S,valueKeywords:I,tokenHooks:{"/":function($,q){return $.eat("*")?(q.tokenize=B,B($,q)):!1}},name:"css"}),t.defineMIME("text/x-scss",{mediaTypes:a,mediaFeatures:l,mediaValueKeywords:d,propertyKeywords:h,nonStandardPropertyKeywords:w,colorKeywords:S,valueKeywords:I,fontProperties:_,allowNested:!0,lineComment:"//",tokenHooks:{"/":function($,q){return $.eat("/")?($.skipToEnd(),["comment","comment"]):$.eat("*")?(q.tokenize=B,B($,q)):["operator","operator"]},":":function($){return $.match(/^\s*\{/,!1)?[null,null]:!1},$:function($){return $.match(/^[\w-]+/),$.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function($){return $.eat("{")?[null,"interpolation"]:!1}},name:"css",helperType:"scss"}),t.defineMIME("text/x-less",{mediaTypes:a,mediaFeatures:l,mediaValueKeywords:d,propertyKeywords:h,nonStandardPropertyKeywords:w,colorKeywords:S,valueKeywords:I,fontProperties:_,allowNested:!0,lineComment:"//",tokenHooks:{"/":function($,q){return $.eat("/")?($.skipToEnd(),["comment","comment"]):$.eat("*")?(q.tokenize=B,B($,q)):["operator","operator"]},"@":function($){return $.eat("{")?[null,"interpolation"]:$.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)?!1:($.eatWhile(/[\w\\\-]/),$.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),t.defineMIME("text/x-gss",{documentTypes:r,mediaTypes:a,mediaFeatures:l,propertyKeywords:h,nonStandardPropertyKeywords:w,fontProperties:_,counterDescriptors:M,colorKeywords:S,valueKeywords:I,supportsAtComponent:!0,tokenHooks:{"/":function($,q){return $.eat("*")?(q.tokenize=B,B($,q)):!1}},name:"css",helperType:"gss"})})})();(function(b,u){(function(t){t(bn.exports,jm.exports)})(function(t){var n="this super static final const abstract class extends external factory implements mixin get native set typedef with enum throw rethrow assert break case continue default in return new deferred async await covariant try catch finally do else for if switch while import library export part of show hide is as extension on yield late required".split(" "),e="try catch finally do else for if switch while".split(" "),r="true false null".split(" "),i="void bool num int double dynamic var String Null Never".split(" ");function a(w){for(var x={},_=0;_<w.length;++_)x[w[_]]=!0;return x}function o(w){(w.interpolationStack||(w.interpolationStack=[])).push(w.tokenize)}function l(w){return(w.interpolationStack||(w.interpolationStack=[])).pop()}function c(w){return w.interpolationStack?w.interpolationStack.length:0}t.defineMIME("application/dart",{name:"clike",keywords:a(n),blockKeywords:a(e),builtin:a(i),atoms:a(r),hooks:{"@":function(w){return w.eatWhile(/[\w\$_\.]/),"meta"},"'":function(w,x){return d("'",w,x,!1)},'"':function(w,x){return d('"',w,x,!1)},r:function(w,x){var _=w.peek();return _=="'"||_=='"'?d(w.next(),w,x,!0):!1},"}":function(w,x){return c(x)>0?(x.tokenize=l(x),null):!1},"/":function(w,x){return w.eat("*")?(x.tokenize=g(1),x.tokenize(w,x)):!1},token:function(w,x,_){if(_=="variable"){var E=RegExp("^[_$]*[A-Z][a-zA-Z0-9_$]*$","g");if(E.test(w.current()))return"variable-2"}}}});function d(w,x,_,E){var M=!1;if(x.eat(w))if(x.eat(w))M=!0;else return"string";function T(S,D){for(var I=!1;!S.eol();){if(!E&&!I&&S.peek()=="$")return o(D),D.tokenize=v,"string";var P=S.next();if(P==w&&!I&&(!M||S.match(w+w))){D.tokenize=null;break}I=!E&&!I&&P=="\\"}return"string"}return _.tokenize=T,T(x,_)}function v(w,x){return w.eat("$"),w.eat("{")?x.tokenize=null:x.tokenize=h,null}function h(w,x){return w.eatWhile(/[\w_]/),x.tokenize=l(x),"variable"}function g(w){return function(x,_){for(var E;E=x.next();)if(E=="*"&&x.eat("/"))if(w==1){_.tokenize=null;break}else return _.tokenize=g(w-1),_.tokenize(x,_);else if(E=="/"&&x.eat("*"))return _.tokenize=g(w+1),_.tokenize(x,_);return"comment"}}t.registerHelper("hintWords","application/dart",n.concat(r).concat(i)),t.defineMode("dart",function(w){return t.getMode(w,"application/dart")},"clike")})})();(function(b,u){(function(t){t(bn.exports)})(function(t){t.defineMode("diff",function(){var n={"+":"positive","-":"negative","@":"meta"};return{token:function(e){var r=e.string.search(/[\t ]+?$/);if(!e.sol()||r===0)return e.skipToEnd(),("error "+(n[e.string.charAt(0)]||"")).replace(/ $/,"");var i=n[e.peek()]||e.skipToEnd();return r===-1?e.skipToEnd():e.pos=r,i}}}),t.defineMIME("text/x-diff","diff")})})();var Wm={exports:{}};(function(b,u){(function(t){t(bn.exports)})(function(t){t.defineSimpleMode=function(v,h){t.defineMode(v,function(g){return t.simpleMode(g,h)})},t.simpleMode=function(v,h){n(h,"start");var g={},w=h.meta||{},x=!1;for(var _ in h)if(_!=w&&h.hasOwnProperty(_))for(var E=g[_]=[],M=h[_],T=0;T<M.length;T++){var S=M[T];E.push(new i(S,h)),(S.indent||S.dedent)&&(x=!0)}var D={startState:function(){return{state:"start",pending:null,local:null,localState:null,indent:x?[]:null}},copyState:function(P){var B={state:P.state,pending:P.pending,local:P.local,localState:null,indent:P.indent&&P.indent.slice(0)};P.localState&&(B.localState=t.copyState(P.local.mode,P.localState)),P.stack&&(B.stack=P.stack.slice(0));for(var $=P.persistentStates;$;$=$.next)B.persistentStates={mode:$.mode,spec:$.spec,state:$.state==P.localState?B.localState:t.copyState($.mode,$.state),next:B.persistentStates};return B},token:a(g,v),innerMode:function(P){return P.local&&{mode:P.local.mode,state:P.localState}},indent:d(g,w)};if(w)for(var I in w)w.hasOwnProperty(I)&&(D[I]=w[I]);return D};function n(v,h){if(!v.hasOwnProperty(h))throw new Error("Undefined state "+h+" in simple mode")}function e(v,h){if(!v)return/(?:)/;var g="";return v instanceof RegExp?(v.ignoreCase&&(g="i"),v.unicode&&(g+="u"),v=v.source):v=String(v),new RegExp((h===!1?"":"^")+"(?:"+v+")",g)}function r(v){if(!v)return null;if(v.apply)return v;if(typeof v=="string")return v.replace(/\./g," ");for(var h=[],g=0;g<v.length;g++)h.push(v[g]&&v[g].replace(/\./g," "));return h}function i(v,h){(v.next||v.push)&&n(h,v.next||v.push),this.regex=e(v.regex),this.token=r(v.token),this.data=v}function a(v,h){return function(g,w){if(w.pending){var x=w.pending.shift();return w.pending.length==0&&(w.pending=null),g.pos+=x.text.length,x.token}if(w.local)if(w.local.end&&g.match(w.local.end)){var _=w.local.endToken||null;return w.local=w.localState=null,_}else{var _=w.local.mode.token(g,w.localState),E;return w.local.endScan&&(E=w.local.endScan.exec(g.current()))&&(g.pos=g.start+E.index),_}for(var M=v[w.state],T=0;T<M.length;T++){var S=M[T],D=(!S.data.sol||g.sol())&&g.match(S.regex);if(D){S.data.next?w.state=S.data.next:S.data.push?((w.stack||(w.stack=[])).push(w.state),w.state=S.data.push):S.data.pop&&w.stack&&w.stack.length&&(w.state=w.stack.pop()),S.data.mode&&l(h,w,S.data.mode,S.token),S.data.indent&&w.indent.push(g.indentation()+h.indentUnit),S.data.dedent&&w.indent.pop();var I=S.token;if(I&&I.apply&&(I=I(D)),D.length>2&&S.token&&typeof S.token!="string"){for(var P=2;P<D.length;P++)D[P]&&(w.pending||(w.pending=[])).push({text:D[P],token:S.token[P-1]});return g.backUp(D[0].length-(D[1]?D[1].length:0)),I[0]}else return I&&I.join?I[0]:I}}return g.next(),null}}function o(v,h){if(v===h)return!0;if(!v||typeof v!="object"||!h||typeof h!="object")return!1;var g=0;for(var w in v)if(v.hasOwnProperty(w)){if(!h.hasOwnProperty(w)||!o(v[w],h[w]))return!1;g++}for(var w in h)h.hasOwnProperty(w)&&g--;return g==0}function l(v,h,g,w){var x;if(g.persistent)for(var _=h.persistentStates;_&&!x;_=_.next)(g.spec?o(g.spec,_.spec):g.mode==_.mode)&&(x=_);var E=x?x.mode:g.mode||t.getMode(v,g.spec),M=x?x.state:t.startState(E);g.persistent&&!x&&(h.persistentStates={mode:E,spec:g.spec,state:M,next:h.persistentStates}),h.localState=M,h.local={mode:E,end:g.end&&e(g.end),endScan:g.end&&g.forceEnd!==!1&&e(g.end,!1),endToken:w&&w.join?w[w.length-1]:w}}function c(v,h){for(var g=0;g<h.length;g++)if(h[g]===v)return!0}function d(v,h){return function(g,w,x){if(g.local&&g.local.mode.indent)return g.local.mode.indent(g.localState,w,x);if(g.indent==null||g.local||h.dontIndentStates&&c(g.state,h.dontIndentStates)>-1)return t.Pass;var _=g.indent.length-1,E=v[g.state];e:for(;;){for(var M=0;M<E.length;M++){var T=E[M];if(T.data.dedent&&T.data.dedentIfLineStart!==!1){var S=T.regex.exec(w);if(S&&S[0]){_--,(T.next||T.push)&&(E=v[T.next||T.push]),w=w.slice(S[0].length);continue e}}}break}return _<0?0:g.indent[_]}}})})();(function(b,u){(function(t){t(bn.exports,Wm.exports)})(function(t){var n="from",e=new RegExp("^(\\s*)\\b("+n+")\\b","i"),r=["run","cmd","entrypoint","shell"],i=new RegExp("^(\\s*)("+r.join("|")+")(\\s+\\[)","i"),a="expose",o=new RegExp("^(\\s*)("+a+")(\\s+)","i"),l=["arg","from","maintainer","label","env","add","copy","volume","user","workdir","onbuild","stopsignal","healthcheck","shell"],c=[n,a].concat(r).concat(l),d="("+c.join("|")+")",v=new RegExp("^(\\s*)"+d+"(\\s*)(#.*)?$","i"),h=new RegExp("^(\\s*)"+d+"(\\s+)","i");t.defineSimpleMode("dockerfile",{start:[{regex:/^\s*#.*$/,sol:!0,token:"comment"},{regex:e,token:[null,"keyword"],sol:!0,next:"from"},{regex:v,token:[null,"keyword",null,"error"],sol:!0},{regex:i,token:[null,"keyword",null],sol:!0,next:"array"},{regex:o,token:[null,"keyword",null],sol:!0,next:"expose"},{regex:h,token:[null,"keyword",null],sol:!0,next:"arguments"},{regex:/./,token:null}],from:[{regex:/\s*$/,token:null,next:"start"},{regex:/(\s*)(#.*)$/,token:[null,"error"],next:"start"},{regex:/(\s*\S+\s+)(as)/i,token:[null,"keyword"],next:"start"},{token:null,next:"start"}],single:[{regex:/(?:[^\\']|\\.)/,token:"string"},{regex:/'/,token:"string",pop:!0}],double:[{regex:/(?:[^\\"]|\\.)/,token:"string"},{regex:/"/,token:"string",pop:!0}],array:[{regex:/\]/,token:null,next:"start"},{regex:/"(?:[^\\"]|\\.)*"?/,token:"string"}],expose:[{regex:/\d+$/,token:"number",next:"start"},{regex:/[^\d]+$/,token:null,next:"start"},{regex:/\d+/,token:"number"},{regex:/[^\d]+/,token:null},{token:null,next:"start"}],arguments:[{regex:/^\s*#.*$/,sol:!0,token:"comment"},{regex:/"(?:[^\\"]|\\.)*"?$/,token:"string",next:"start"},{regex:/"/,token:"string",push:"double"},{regex:/'(?:[^\\']|\\.)*'?$/,token:"string",next:"start"},{regex:/'/,token:"string",push:"single"},{regex:/[^#"']+[\\`]$/,token:null},{regex:/[^#"']+$/,token:null,next:"start"},{regex:/[^#"']+/,token:null},{token:null,next:"start"}],meta:{lineComment:"#"}}),t.defineMIME("text/x-dockerfile","dockerfile")})})();(function(b,u){(function(t){t(bn.exports)})(function(t){t.defineMIME("text/x-erlang","erlang"),t.defineMode("erlang",function(n){var e=["-type","-spec","-export_type","-opaque"],r=["after","begin","catch","case","cond","end","fun","if","let","of","query","receive","try","when"],i=/[\->,;]/,a=["->",";",","],o=["and","andalso","band","bnot","bor","bsl","bsr","bxor","div","not","or","orelse","rem","xor"],l=/[\+\-\*\/<>=\|:!]/,c=["=","+","-","*","/",">",">=","<","=<","=:=","==","=/=","/=","||","<-","!"],d=/[<\(\[\{]/,v=["<<","(","[","{"],h=/[>\)\]\}]/,g=["}","]",")",">>"],w=["is_atom","is_binary","is_bitstring","is_boolean","is_float","is_function","is_integer","is_list","is_number","is_pid","is_port","is_record","is_reference","is_tuple","atom","binary","bitstring","boolean","function","integer","list","number","pid","port","record","reference","tuple"],x=["abs","adler32","adler32_combine","alive","apply","atom_to_binary","atom_to_list","binary_to_atom","binary_to_existing_atom","binary_to_list","binary_to_term","bit_size","bitstring_to_list","byte_size","check_process_code","contact_binary","crc32","crc32_combine","date","decode_packet","delete_module","disconnect_node","element","erase","exit","float","float_to_list","garbage_collect","get","get_keys","group_leader","halt","hd","integer_to_list","internal_bif","iolist_size","iolist_to_binary","is_alive","is_atom","is_binary","is_bitstring","is_boolean","is_float","is_function","is_integer","is_list","is_number","is_pid","is_port","is_process_alive","is_record","is_reference","is_tuple","length","link","list_to_atom","list_to_binary","list_to_bitstring","list_to_existing_atom","list_to_float","list_to_integer","list_to_pid","list_to_tuple","load_module","make_ref","module_loaded","monitor_node","node","node_link","node_unlink","nodes","notalive","now","open_port","pid_to_list","port_close","port_command","port_connect","port_control","pre_loaded","process_flag","process_info","processes","purge_module","put","register","registered","round","self","setelement","size","spawn","spawn_link","spawn_monitor","spawn_opt","split_binary","statistics","term_to_binary","time","throw","tl","trunc","tuple_size","tuple_to_list","unlink","unregister","whereis"],_=/[\w@----]/,E=/[0-7]{1,3}|[bdefnrstv\\"']|\^[a-zA-Z]|x[0-9a-zA-Z]{2}|x{[0-9a-zA-Z]+}/;function M(J,pe){if(pe.in_string)return pe.in_string=!D(J),q(pe,J,"string");if(pe.in_atom)return pe.in_atom=!I(J),q(pe,J,"atom");if(J.eatSpace())return q(pe,J,"whitespace");if(!O(pe)&&J.match(/-\s*[a-z--][\w----]*/))return $(J.current(),e)?q(pe,J,"type"):q(pe,J,"attribute");var Ee=J.next();if(Ee=="%")return J.skipToEnd(),q(pe,J,"comment");if(Ee==":")return q(pe,J,"colon");if(Ee=="?")return J.eatSpace(),J.eatWhile(_),q(pe,J,"macro");if(Ee=="#")return J.eatSpace(),J.eatWhile(_),q(pe,J,"record");if(Ee=="$")return J.next()=="\\"&&!J.match(E)?q(pe,J,"error"):q(pe,J,"number");if(Ee==".")return q(pe,J,"dot");if(Ee=="'"){if(!(pe.in_atom=!I(J))){if(J.match(/\s*\/\s*[0-9]/,!1))return J.match(/\s*\/\s*[0-9]/,!0),q(pe,J,"fun");if(J.match(/\s*\(/,!1)||J.match(/\s*:/,!1))return q(pe,J,"function")}return q(pe,J,"atom")}if(Ee=='"')return pe.in_string=!D(J),q(pe,J,"string");if(/[A-Z_--]/.test(Ee))return J.eatWhile(_),q(pe,J,"variable");if(/[a-z_--]/.test(Ee)){if(J.eatWhile(_),J.match(/\s*\/\s*[0-9]/,!1))return J.match(/\s*\/\s*[0-9]/,!0),q(pe,J,"fun");var Le=J.current();return $(Le,r)?q(pe,J,"keyword"):$(Le,o)?q(pe,J,"operator"):J.match(/\s*\(/,!1)?$(Le,x)&&(O(pe).token!=":"||O(pe,2).token=="erlang")?q(pe,J,"builtin"):$(Le,w)?q(pe,J,"guard"):q(pe,J,"function"):B(J)==":"?Le=="erlang"?q(pe,J,"builtin"):q(pe,J,"function"):$(Le,["true","false"])?q(pe,J,"boolean"):q(pe,J,"atom")}var Re=/[0-9]/,Ce=/[0-9a-zA-Z]/;return Re.test(Ee)?(J.eatWhile(Re),J.eat("#")?J.eatWhile(Ce)||J.backUp(1):J.eat(".")&&(J.eatWhile(Re)?J.eat(/[eE]/)&&(J.eat(/[-+]/)?J.eatWhile(Re)||J.backUp(2):J.eatWhile(Re)||J.backUp(1)):J.backUp(1)),q(pe,J,"number")):T(J,d,v)?q(pe,J,"open_paren"):T(J,h,g)?q(pe,J,"close_paren"):S(J,i,a)?q(pe,J,"separator"):S(J,l,c)?q(pe,J,"operator"):q(pe,J,null)}function T(J,pe,Ee){if(J.current().length==1&&pe.test(J.current())){for(J.backUp(1);pe.test(J.peek());)if(J.next(),$(J.current(),Ee))return!0;J.backUp(J.current().length-1)}return!1}function S(J,pe,Ee){if(J.current().length==1&&pe.test(J.current())){for(;pe.test(J.peek());)J.next();for(;0<J.current().length;){if($(J.current(),Ee))return!0;J.backUp(1)}J.next()}return!1}function D(J){return P(J,'"',"\\")}function I(J){return P(J,"'","\\")}function P(J,pe,Ee){for(;!J.eol();){var Le=J.next();if(Le==pe)return!0;Le==Ee&&J.next()}return!1}function B(J){var pe=J.match(/^\s*([^\s%])/,!1);return pe?pe[1]:""}function $(J,pe){return-1<pe.indexOf(J)}function q(J,pe,Ee){switch(Q(J,H(Ee,pe)),Ee){case"atom":return"atom";case"attribute":return"attribute";case"boolean":return"atom";case"builtin":return"builtin";case"close_paren":return null;case"colon":return null;case"comment":return"comment";case"dot":return null;case"error":return"error";case"fun":return"meta";case"function":return"tag";case"guard":return"property";case"keyword":return"keyword";case"macro":return"variable-2";case"number":return"number";case"open_paren":return null;case"operator":return"operator";case"record":return"bracket";case"separator":return null;case"string":return"string";case"type":return"def";case"variable":return"variable";default:return null}}function G(J,pe,Ee,Le){return{token:J,column:pe,indent:Ee,type:Le}}function H(J,pe){return G(pe.current(),pe.column(),pe.indentation(),J)}function z(J){return G(J,0,0,J)}function O(J,pe){var Ee=J.tokenStack.length,Le=pe||1;return Ee<Le?!1:J.tokenStack[Ee-Le]}function Q(J,pe){pe.type=="comment"||pe.type=="whitespace"||(J.tokenStack=ie(J.tokenStack,pe),J.tokenStack=L(J.tokenStack))}function ie(J,pe){var Ee=J.length-1;return 0<Ee&&J[Ee].type==="record"&&pe.type==="dot"?J.pop():(0<Ee&&J[Ee].type==="group"&&J.pop(),J.push(pe)),J}function L(J){if(!J.length)return J;var pe=J.length-1;if(J[pe].type==="dot")return[];if(pe>1&&J[pe].type==="fun"&&J[pe-1].token==="fun")return J.slice(0,pe-1);switch(J[pe].token){case"}":return F(J,{g:["{"]});case"]":return F(J,{i:["["]});case")":return F(J,{i:["("]});case">>":return F(J,{i:["<<"]});case"end":return F(J,{i:["begin","case","fun","if","receive","try"]});case",":return F(J,{e:["begin","try","when","->",",","(","[","{","<<"]});case"->":return F(J,{r:["when"],m:["try","if","case","receive"]});case";":return F(J,{E:["case","fun","if","receive","try","when"]});case"catch":return F(J,{e:["try"]});case"of":return F(J,{e:["case"]});case"after":return F(J,{e:["receive","try"]});default:return J}}function F(J,pe){for(var Ee in pe)for(var Le=J.length-1,Re=pe[Ee],Ce=Le-1;-1<Ce;Ce--)if($(J[Ce].token,Re)){var ne=J.slice(0,Ce);switch(Ee){case"m":return ne.concat(J[Ce]).concat(J[Le]);case"r":return ne.concat(J[Le]);case"i":return ne;case"g":return ne.concat(z("group"));case"E":return ne.concat(J[Ce]);case"e":return ne.concat(J[Ce])}}return Ee=="E"?[]:J}function X(J,pe){var Ee,Le=n.indentUnit,Re=se(pe),Ce=O(J,1),ne=O(J,2);return J.in_string||J.in_atom?t.Pass:ne?Ce.token=="when"?Ce.column+Le:Re==="when"&&ne.type==="function"?ne.indent+Le:Re==="("&&Ce.token==="fun"?Ce.column+3:Re==="catch"&&(Ee=fe(J,["try"]))?Ee.column:$(Re,["end","after","of"])?(Ee=fe(J,["begin","case","fun","if","receive","try"]),Ee?Ee.column:t.Pass):$(Re,g)?(Ee=fe(J,v),Ee?Ee.column:t.Pass):$(Ce.token,[",","|","||"])||$(Re,[",","|","||"])?(Ee=Y(J),Ee?Ee.column+Ee.token.length:Le):Ce.token=="->"?$(ne.token,["receive","case","if","try"])?ne.column+Le+Le:ne.column+Le:$(Ce.token,v)?Ce.column+Ce.token.length:(Ee=j(J),ae(Ee)?Ee.column+Le:0):0}function se(J){var pe=J.match(/,|[a-z]+|\}|\]|\)|>>|\|+|\(/);return ae(pe)&&pe.index===0?pe[0]:""}function Y(J){var pe=J.tokenStack.slice(0,-1),Ee=ve(pe,"type",["open_paren"]);return ae(pe[Ee])?pe[Ee]:!1}function j(J){var pe=J.tokenStack,Ee=ve(pe,"type",["open_paren","separator","keyword"]),Le=ve(pe,"type",["operator"]);return ae(Ee)&&ae(Le)&&Ee<Le?pe[Ee+1]:ae(Ee)?pe[Ee]:!1}function fe(J,pe){var Ee=J.tokenStack,Le=ve(Ee,"token",pe);return ae(Ee[Le])?Ee[Le]:!1}function ve(J,pe,Ee){for(var Le=J.length-1;-1<Le;Le--)if($(J[Le][pe],Ee))return Le;return!1}function ae(J){return J!==!1&&J!=null}return{startState:function(){return{tokenStack:[],in_string:!1,in_atom:!1}},token:function(J,pe){return M(J,pe)},indent:function(J,pe){return X(J,pe)},lineComment:"%"}})})})();(function(b,u){(function(t){t(bn.exports)})(function(t){t.defineMode("go",function(n){var e=n.indentUnit,r={break:!0,case:!0,chan:!0,const:!0,continue:!0,default:!0,defer:!0,else:!0,fallthrough:!0,for:!0,func:!0,go:!0,goto:!0,if:!0,import:!0,interface:!0,map:!0,package:!0,range:!0,return:!0,select:!0,struct:!0,switch:!0,type:!0,var:!0,bool:!0,byte:!0,complex64:!0,complex128:!0,float32:!0,float64:!0,int8:!0,int16:!0,int32:!0,int64:!0,string:!0,uint8:!0,uint16:!0,uint32:!0,uint64:!0,int:!0,uint:!0,uintptr:!0,error:!0,rune:!0},i={true:!0,false:!0,iota:!0,nil:!0,append:!0,cap:!0,close:!0,complex:!0,copy:!0,delete:!0,imag:!0,len:!0,make:!0,new:!0,panic:!0,print:!0,println:!0,real:!0,recover:!0},a=/[+\-*&^%:=<>!|\/]/,o;function l(w,x){var _=w.next();if(_=='"'||_=="'"||_=="`")return x.tokenize=c(_),x.tokenize(w,x);if(/[\d\.]/.test(_))return _=="."?w.match(/^[0-9]+([eE][\-+]?[0-9]+)?/):_=="0"?w.match(/^[xX][0-9a-fA-F]+/)||w.match(/^0[0-7]+/):w.match(/^[0-9]*\.?[0-9]*([eE][\-+]?[0-9]+)?/),"number";if(/[\[\]{}\(\),;\:\.]/.test(_))return o=_,null;if(_=="/"){if(w.eat("*"))return x.tokenize=d,d(w,x);if(w.eat("/"))return w.skipToEnd(),"comment"}if(a.test(_))return w.eatWhile(a),"operator";w.eatWhile(/[\w\$_\xa1-\uffff]/);var E=w.current();return r.propertyIsEnumerable(E)?((E=="case"||E=="default")&&(o="case"),"keyword"):i.propertyIsEnumerable(E)?"atom":"variable"}function c(w){return function(x,_){for(var E=!1,M,T=!1;(M=x.next())!=null;){if(M==w&&!E){T=!0;break}E=!E&&w!="`"&&M=="\\"}return(T||!(E||w=="`"))&&(_.tokenize=l),"string"}}function d(w,x){for(var _=!1,E;E=w.next();){if(E=="/"&&_){x.tokenize=l;break}_=E=="*"}return"comment"}function v(w,x,_,E,M){this.indented=w,this.column=x,this.type=_,this.align=E,this.prev=M}function h(w,x,_){return w.context=new v(w.indented,x,_,null,w.context)}function g(w){if(!!w.context.prev){var x=w.context.type;return(x==")"||x=="]"||x=="}")&&(w.indented=w.context.indented),w.context=w.context.prev}}return{startState:function(w){return{tokenize:null,context:new v((w||0)-e,0,"top",!1),indented:0,startOfLine:!0}},token:function(w,x){var _=x.context;if(w.sol()&&(_.align==null&&(_.align=!1),x.indented=w.indentation(),x.startOfLine=!0,_.type=="case"&&(_.type="}")),w.eatSpace())return null;o=null;var E=(x.tokenize||l)(w,x);return E=="comment"||(_.align==null&&(_.align=!0),o=="{"?h(x,w.column(),"}"):o=="["?h(x,w.column(),"]"):o=="("?h(x,w.column(),")"):o=="case"?_.type="case":(o=="}"&&_.type=="}"||o==_.type)&&g(x),x.startOfLine=!1),E},indent:function(w,x){if(w.tokenize!=l&&w.tokenize!=null)return t.Pass;var _=w.context,E=x&&x.charAt(0);if(_.type=="case"&&/^(?:case|default)\b/.test(x))return w.context.type="}",_.indented;var M=E==_.type;return _.align?_.column+(M?0:1):_.indented+(M?0:e)},electricChars:"{}):",closeBrackets:"()[]{}''\"\"``",fold:"brace",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//"}}),t.defineMIME("text/x-go","go")})})();(function(b,u){(function(t){t(bn.exports)})(function(t){t.defineMode("groovy",function(n){function e(E){for(var M={},T=E.split(" "),S=0;S<T.length;++S)M[T[S]]=!0;return M}var r=e("abstract as assert boolean break byte case catch char class const continue def default do double else enum extends final finally float for goto if implements import in instanceof int interface long native new package private protected public return short static strictfp super switch synchronized threadsafe throw throws trait transient try void volatile while"),i=e("catch class def do else enum finally for if interface switch trait try while"),a=e("return break continue"),o=e("null true false this"),l;function c(E,M){var T=E.next();if(T=='"'||T=="'")return d(T,E,M);if(/[\[\]{}\(\),;\:\.]/.test(T))return l=T,null;if(/\d/.test(T))return E.eatWhile(/[\w\.]/),E.eat(/eE/)&&(E.eat(/\+\-/),E.eatWhile(/\d/)),"number";if(T=="/"){if(E.eat("*"))return M.tokenize.push(h),h(E,M);if(E.eat("/"))return E.skipToEnd(),"comment";if(g(M.lastToken,!1))return d(T,E,M)}if(T=="-"&&E.eat(">"))return l="->",null;if(/[+\-*&%=<>!?|\/~]/.test(T))return E.eatWhile(/[+\-*&%=<>|~]/),"operator";if(E.eatWhile(/[\w\$_]/),T=="@")return E.eatWhile(/[\w\$_\.]/),"meta";if(M.lastToken==".")return"property";if(E.eat(":"))return l="proplabel","property";var S=E.current();return o.propertyIsEnumerable(S)?"atom":r.propertyIsEnumerable(S)?(i.propertyIsEnumerable(S)?l="newstatement":a.propertyIsEnumerable(S)&&(l="standalone"),"keyword"):"variable"}c.isBase=!0;function d(E,M,T){var S=!1;if(E!="/"&&M.eat(E))if(M.eat(E))S=!0;else return"string";function D(I,P){for(var B=!1,$,q=!S;($=I.next())!=null;){if($==E&&!B){if(!S)break;if(I.match(E+E)){q=!0;break}}if(E=='"'&&$=="$"&&!B&&I.eat("{"))return P.tokenize.push(v()),"string";B=!B&&$=="\\"}return q&&P.tokenize.pop(),"string"}return T.tokenize.push(D),D(M,T)}function v(){var E=1;function M(T,S){if(T.peek()=="}"){if(E--,E==0)return S.tokenize.pop(),S.tokenize[S.tokenize.length-1](T,S)}else T.peek()=="{"&&E++;return c(T,S)}return M.isBase=!0,M}function h(E,M){for(var T=!1,S;S=E.next();){if(S=="/"&&T){M.tokenize.pop();break}T=S=="*"}return"comment"}function g(E,M){return!E||E=="operator"||E=="->"||/[\.\[\{\(,;:]/.test(E)||E=="newstatement"||E=="keyword"||E=="proplabel"||E=="standalone"&&!M}function w(E,M,T,S,D){this.indented=E,this.column=M,this.type=T,this.align=S,this.prev=D}function x(E,M,T){return E.context=new w(E.indented,M,T,null,E.context)}function _(E){var M=E.context.type;return(M==")"||M=="]"||M=="}")&&(E.indented=E.context.indented),E.context=E.context.prev}return{startState:function(E){return{tokenize:[c],context:new w((E||0)-n.indentUnit,0,"top",!1),indented:0,startOfLine:!0,lastToken:null}},token:function(E,M){var T=M.context;if(E.sol()&&(T.align==null&&(T.align=!1),M.indented=E.indentation(),M.startOfLine=!0,T.type=="statement"&&!g(M.lastToken,!0)&&(_(M),T=M.context)),E.eatSpace())return null;l=null;var S=M.tokenize[M.tokenize.length-1](E,M);if(S=="comment")return S;if(T.align==null&&(T.align=!0),(l==";"||l==":")&&T.type=="statement")_(M);else if(l=="->"&&T.type=="statement"&&T.prev.type=="}")_(M),M.context.align=!1;else if(l=="{")x(M,E.column(),"}");else if(l=="[")x(M,E.column(),"]");else if(l=="(")x(M,E.column(),")");else if(l=="}"){for(;T.type=="statement";)T=_(M);for(T.type=="}"&&(T=_(M));T.type=="statement";)T=_(M)}else l==T.type?_(M):(T.type=="}"||T.type=="top"||T.type=="statement"&&l=="newstatement")&&x(M,E.column(),"statement");return M.startOfLine=!1,M.lastToken=l||S,S},indent:function(E,M){if(!E.tokenize[E.tokenize.length-1].isBase)return t.Pass;var T=M&&M.charAt(0),S=E.context;S.type=="statement"&&!g(E.lastToken,!0)&&(S=S.prev);var D=T==S.type;return S.type=="statement"?S.indented+(T=="{"?0:n.indentUnit):S.align?S.column+(D?0:1):S.indented+(D?0:n.indentUnit)},electricChars:"{}",closeBrackets:{triples:`'"`},fold:"brace",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//"}}),t.defineMIME("text/x-groovy","groovy")})})();var __={exports:{}},Zp={exports:{}};(function(b,u){(function(t){t(bn.exports)})(function(t){var n={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},e={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};t.defineMode("xml",function(r,i){var a=r.indentUnit,o={},l=i.htmlMode?n:e;for(var c in l)o[c]=l[c];for(var c in i)o[c]=i[c];var d,v;function h(O,Q){function ie(X){return Q.tokenize=X,X(O,Q)}var L=O.next();if(L=="<")return O.eat("!")?O.eat("[")?O.match("CDATA[")?ie(x("atom","]]>")):null:O.match("--")?ie(x("comment","-->")):O.match("DOCTYPE",!0,!0)?(O.eatWhile(/[\w\._\-]/),ie(_(1))):null:O.eat("?")?(O.eatWhile(/[\w\._\-]/),Q.tokenize=x("meta","?>"),"meta"):(d=O.eat("/")?"closeTag":"openTag",Q.tokenize=g,"tag bracket");if(L=="&"){var F;return O.eat("#")?O.eat("x")?F=O.eatWhile(/[a-fA-F\d]/)&&O.eat(";"):F=O.eatWhile(/[\d]/)&&O.eat(";"):F=O.eatWhile(/[\w\.\-:]/)&&O.eat(";"),F?"atom":"error"}else return O.eatWhile(/[^&<]/),null}h.isInText=!0;function g(O,Q){var ie=O.next();if(ie==">"||ie=="/"&&O.eat(">"))return Q.tokenize=h,d=ie==">"?"endTag":"selfcloseTag","tag bracket";if(ie=="=")return d="equals",null;if(ie=="<"){Q.tokenize=h,Q.state=D,Q.tagName=Q.tagStart=null;var L=Q.tokenize(O,Q);return L?L+" tag error":"tag error"}else return/[\'\"]/.test(ie)?(Q.tokenize=w(ie),Q.stringStartCol=O.column(),Q.tokenize(O,Q)):(O.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function w(O){var Q=function(ie,L){for(;!ie.eol();)if(ie.next()==O){L.tokenize=g;break}return"string"};return Q.isInAttribute=!0,Q}function x(O,Q){return function(ie,L){for(;!ie.eol();){if(ie.match(Q)){L.tokenize=h;break}ie.next()}return O}}function _(O){return function(Q,ie){for(var L;(L=Q.next())!=null;){if(L=="<")return ie.tokenize=_(O+1),ie.tokenize(Q,ie);if(L==">")if(O==1){ie.tokenize=h;break}else return ie.tokenize=_(O-1),ie.tokenize(Q,ie)}return"meta"}}function E(O){return O&&O.toLowerCase()}function M(O,Q,ie){this.prev=O.context,this.tagName=Q||"",this.indent=O.indented,this.startOfLine=ie,(o.doNotIndent.hasOwnProperty(Q)||O.context&&O.context.noIndent)&&(this.noIndent=!0)}function T(O){O.context&&(O.context=O.context.prev)}function S(O,Q){for(var ie;;){if(!O.context||(ie=O.context.tagName,!o.contextGrabbers.hasOwnProperty(E(ie))||!o.contextGrabbers[E(ie)].hasOwnProperty(E(Q))))return;T(O)}}function D(O,Q,ie){return O=="openTag"?(ie.tagStart=Q.column(),I):O=="closeTag"?P:D}function I(O,Q,ie){return O=="word"?(ie.tagName=Q.current(),v="tag",q):o.allowMissingTagName&&O=="endTag"?(v="tag bracket",q(O,Q,ie)):(v="error",I)}function P(O,Q,ie){if(O=="word"){var L=Q.current();return ie.context&&ie.context.tagName!=L&&o.implicitlyClosed.hasOwnProperty(E(ie.context.tagName))&&T(ie),ie.context&&ie.context.tagName==L||o.matchClosing===!1?(v="tag",B):(v="tag error",$)}else return o.allowMissingTagName&&O=="endTag"?(v="tag bracket",B(O,Q,ie)):(v="error",$)}function B(O,Q,ie){return O!="endTag"?(v="error",B):(T(ie),D)}function $(O,Q,ie){return v="error",B(O,Q,ie)}function q(O,Q,ie){if(O=="word")return v="attribute",G;if(O=="endTag"||O=="selfcloseTag"){var L=ie.tagName,F=ie.tagStart;return ie.tagName=ie.tagStart=null,O=="selfcloseTag"||o.autoSelfClosers.hasOwnProperty(E(L))?S(ie,L):(S(ie,L),ie.context=new M(ie,L,F==ie.indented)),D}return v="error",q}function G(O,Q,ie){return O=="equals"?H:(o.allowMissing||(v="error"),q(O,Q,ie))}function H(O,Q,ie){return O=="string"?z:O=="word"&&o.allowUnquoted?(v="string",q):(v="error",q(O,Q,ie))}function z(O,Q,ie){return O=="string"?z:q(O,Q,ie)}return{startState:function(O){var Q={tokenize:h,state:D,indented:O||0,tagName:null,tagStart:null,context:null};return O!=null&&(Q.baseIndent=O),Q},token:function(O,Q){if(!Q.tagName&&O.sol()&&(Q.indented=O.indentation()),O.eatSpace())return null;d=null;var ie=Q.tokenize(O,Q);return(ie||d)&&ie!="comment"&&(v=null,Q.state=Q.state(d||ie,O,Q),v&&(ie=v=="error"?ie+" error":v)),ie},indent:function(O,Q,ie){var L=O.context;if(O.tokenize.isInAttribute)return O.tagStart==O.indented?O.stringStartCol+1:O.indented+a;if(L&&L.noIndent)return t.Pass;if(O.tokenize!=g&&O.tokenize!=h)return ie?ie.match(/^(\s*)/)[0].length:0;if(O.tagName)return o.multilineTagIndentPastTag!==!1?O.tagStart+O.tagName.length+2:O.tagStart+a*(o.multilineTagIndentFactor||1);if(o.alignCDATA&&/<!\[CDATA\[/.test(Q))return 0;var F=Q&&/^<(\/)?([\w_:\.-]*)/.exec(Q);if(F&&F[1])for(;L;)if(L.tagName==F[2]){L=L.prev;break}else if(o.implicitlyClosed.hasOwnProperty(E(L.tagName)))L=L.prev;else break;else if(F)for(;L;){var X=o.contextGrabbers[E(L.tagName)];if(X&&X.hasOwnProperty(E(F[2])))L=L.prev;else break}for(;L&&L.prev&&!L.startOfLine;)L=L.prev;return L?L.indent+a:O.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:o.htmlMode?"html":"xml",helperType:o.htmlMode?"html":"xml",skipAttribute:function(O){O.state==H&&(O.state=q)},xmlCurrentTag:function(O){return O.tagName?{name:O.tagName,close:O.type=="closeTag"}:null},xmlCurrentContext:function(O){for(var Q=[],ie=O.context;ie;ie=ie.prev)Q.push(ie.tagName);return Q.reverse()}}}),t.defineMIME("text/xml","xml"),t.defineMIME("application/xml","xml"),t.mimeModes.hasOwnProperty("text/html")||t.defineMIME("text/html",{name:"xml",htmlMode:!0})})})();var Um={exports:{}};(function(b,u){(function(t){t(bn.exports)})(function(t){t.defineMode("javascript",function(n,e){var r=n.indentUnit,i=e.statementIndent,a=e.jsonld,o=e.json||a,l=e.trackScope!==!1,c=e.typescript,d=e.wordCharacters||/[\w$\xa1-\uffff]/,v=function(){function te(Yn){return{type:Yn,style:"keyword"}}var we=te("keyword a"),je=te("keyword b"),Je=te("keyword c"),Ft=te("keyword d"),gt=te("operator"),st={type:"atom",style:"atom"};return{if:te("if"),while:we,with:we,else:je,do:je,try:je,finally:je,return:Ft,break:Ft,continue:Ft,new:te("new"),delete:Je,void:Je,throw:Je,debugger:te("debugger"),var:te("var"),const:te("var"),let:te("var"),function:te("function"),catch:te("catch"),for:te("for"),switch:te("switch"),case:te("case"),default:te("default"),in:gt,typeof:gt,instanceof:gt,true:st,false:st,null:st,undefined:st,NaN:st,Infinity:st,this:te("this"),class:te("class"),super:te("atom"),yield:Je,export:te("export"),import:te("import"),extends:Je,await:Je}}(),h=/[+\-*&%=<>!?|~^@]/,g=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function w(te){for(var we=!1,je,Je=!1;(je=te.next())!=null;){if(!we){if(je=="/"&&!Je)return;je=="["?Je=!0:Je&&je=="]"&&(Je=!1)}we=!we&&je=="\\"}}var x,_;function E(te,we,je){return x=te,_=je,we}function M(te,we){var je=te.next();if(je=='"'||je=="'")return we.tokenize=T(je),we.tokenize(te,we);if(je=="."&&te.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return E("number","number");if(je=="."&&te.match(".."))return E("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(je))return E(je);if(je=="="&&te.eat(">"))return E("=>","operator");if(je=="0"&&te.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return E("number","number");if(/\d/.test(je))return te.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),E("number","number");if(je=="/")return te.eat("*")?(we.tokenize=S,S(te,we)):te.eat("/")?(te.skipToEnd(),E("comment","comment")):Ve(te,we,1)?(w(te),te.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),E("regexp","string-2")):(te.eat("="),E("operator","operator",te.current()));if(je=="`")return we.tokenize=D,D(te,we);if(je=="#"&&te.peek()=="!")return te.skipToEnd(),E("meta","meta");if(je=="#"&&te.eatWhile(d))return E("variable","property");if(je=="<"&&te.match("!--")||je=="-"&&te.match("->")&&!/\S/.test(te.string.slice(0,te.start)))return te.skipToEnd(),E("comment","comment");if(h.test(je))return(je!=">"||!we.lexical||we.lexical.type!=">")&&(te.eat("=")?(je=="!"||je=="=")&&te.eat("="):/[<>*+\-|&?]/.test(je)&&(te.eat(je),je==">"&&te.eat(je))),je=="?"&&te.eat(".")?E("."):E("operator","operator",te.current());if(d.test(je)){te.eatWhile(d);var Je=te.current();if(we.lastType!="."){if(v.propertyIsEnumerable(Je)){var Ft=v[Je];return E(Ft.type,Ft.style,Je)}if(Je=="async"&&te.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return E("async","keyword",Je)}return E("variable","variable",Je)}}function T(te){return function(we,je){var Je=!1,Ft;if(a&&we.peek()=="@"&&we.match(g))return je.tokenize=M,E("jsonld-keyword","meta");for(;(Ft=we.next())!=null&&!(Ft==te&&!Je);)Je=!Je&&Ft=="\\";return Je||(je.tokenize=M),E("string","string")}}function S(te,we){for(var je=!1,Je;Je=te.next();){if(Je=="/"&&je){we.tokenize=M;break}je=Je=="*"}return E("comment","comment")}function D(te,we){for(var je=!1,Je;(Je=te.next())!=null;){if(!je&&(Je=="`"||Je=="$"&&te.eat("{"))){we.tokenize=M;break}je=!je&&Je=="\\"}return E("quasi","string-2",te.current())}var I="([{}])";function P(te,we){we.fatArrowAt&&(we.fatArrowAt=null);var je=te.string.indexOf("=>",te.start);if(!(je<0)){if(c){var Je=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(te.string.slice(te.start,je));Je&&(je=Je.index)}for(var Ft=0,gt=!1,st=je-1;st>=0;--st){var Yn=te.string.charAt(st),Wn=I.indexOf(Yn);if(Wn>=0&&Wn<3){if(!Ft){++st;break}if(--Ft==0){Yn=="("&&(gt=!0);break}}else if(Wn>=3&&Wn<6)++Ft;else if(d.test(Yn))gt=!0;else if(/["'\/`]/.test(Yn))for(;;--st){if(st==0)return;var Di=te.string.charAt(st-1);if(Di==Yn&&te.string.charAt(st-2)!="\\"){st--;break}}else if(gt&&!Ft){++st;break}}gt&&!Ft&&(we.fatArrowAt=st)}}var B={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function $(te,we,je,Je,Ft,gt){this.indented=te,this.column=we,this.type=je,this.prev=Ft,this.info=gt,Je!=null&&(this.align=Je)}function q(te,we){if(!l)return!1;for(var je=te.localVars;je;je=je.next)if(je.name==we)return!0;for(var Je=te.context;Je;Je=Je.prev)for(var je=Je.vars;je;je=je.next)if(je.name==we)return!0}function G(te,we,je,Je,Ft){var gt=te.cc;for(H.state=te,H.stream=Ft,H.marked=null,H.cc=gt,H.style=we,te.lexical.hasOwnProperty("align")||(te.lexical.align=!0);;){var st=gt.length?gt.pop():o?Re:Ee;if(st(je,Je)){for(;gt.length&&gt[gt.length-1].lex;)gt.pop()();return H.marked?H.marked:je=="variable"&&q(te,Je)?"variable-2":we}}}var H={state:null,column:null,marked:null,cc:null};function z(){for(var te=arguments.length-1;te>=0;te--)H.cc.push(arguments[te])}function O(){return z.apply(null,arguments),!0}function Q(te,we){for(var je=we;je;je=je.next)if(je.name==te)return!0;return!1}function ie(te){var we=H.state;if(H.marked="def",!!l){if(we.context){if(we.lexical.info=="var"&&we.context&&we.context.block){var je=L(te,we.context);if(je!=null){we.context=je;return}}else if(!Q(te,we.localVars)){we.localVars=new se(te,we.localVars);return}}e.globalVars&&!Q(te,we.globalVars)&&(we.globalVars=new se(te,we.globalVars))}}function L(te,we){if(we)if(we.block){var je=L(te,we.prev);return je?je==we.prev?we:new X(je,we.vars,!0):null}else return Q(te,we.vars)?we:new X(we.prev,new se(te,we.vars),!1);else return null}function F(te){return te=="public"||te=="private"||te=="protected"||te=="abstract"||te=="readonly"}function X(te,we,je){this.prev=te,this.vars=we,this.block=je}function se(te,we){this.name=te,this.next=we}var Y=new se("this",new se("arguments",null));function j(){H.state.context=new X(H.state.context,H.state.localVars,!1),H.state.localVars=Y}function fe(){H.state.context=new X(H.state.context,H.state.localVars,!0),H.state.localVars=null}j.lex=fe.lex=!0;function ve(){H.state.localVars=H.state.context.vars,H.state.context=H.state.context.prev}ve.lex=!0;function ae(te,we){var je=function(){var Je=H.state,Ft=Je.indented;if(Je.lexical.type=="stat")Ft=Je.lexical.indented;else for(var gt=Je.lexical;gt&&gt.type==")"&&gt.align;gt=gt.prev)Ft=gt.indented;Je.lexical=new $(Ft,H.stream.column(),te,null,Je.lexical,we)};return je.lex=!0,je}function J(){var te=H.state;te.lexical.prev&&(te.lexical.type==")"&&(te.indented=te.lexical.indented),te.lexical=te.lexical.prev)}J.lex=!0;function pe(te){function we(je){return je==te?O():te==";"||je=="}"||je==")"||je=="]"?z():O(we)}return we}function Ee(te,we){return te=="var"?O(ae("vardef",we),In,pe(";"),J):te=="keyword a"?O(ae("form"),ne,Ee,J):te=="keyword b"?O(ae("form"),Ee,J):te=="keyword d"?H.stream.match(/^\s*$/,!1)?O():O(ae("stat"),ue,pe(";"),J):te=="debugger"?O(pe(";")):te=="{"?O(ae("}"),fe,zn,J,ve):te==";"?O():te=="if"?(H.state.lexical.info=="else"&&H.state.cc[H.state.cc.length-1]==J&&H.state.cc.pop()(),O(ae("form"),ne,Ee,J,Ia)):te=="function"?O(ii):te=="for"?O(ae("form"),fe,Fs,Ee,ve,J):te=="class"||c&&we=="interface"?(H.marked="keyword",O(ae("form",te=="class"?te:we),Ki,J)):te=="variable"?c&&we=="declare"?(H.marked="keyword",O(Ee)):c&&(we=="module"||we=="enum"||we=="type")&&H.stream.match(/^\s*\w/,!1)?(H.marked="keyword",we=="enum"?O(Cr):we=="type"?O(va,pe("operator"),Tt,pe(";")):O(ae("form"),lr,pe("{"),ae("}"),zn,J,J)):c&&we=="namespace"?(H.marked="keyword",O(ae("form"),Re,Ee,J)):c&&we=="abstract"?(H.marked="keyword",O(Ee)):O(ae("stat"),ot):te=="switch"?O(ae("form"),ne,pe("{"),ae("}","switch"),fe,zn,J,J,ve):te=="case"?O(Re,pe(":")):te=="default"?O(pe(":")):te=="catch"?O(ae("form"),j,Le,Ee,J,ve):te=="export"?O(ae("stat"),Vi,J):te=="import"?O(ae("stat"),Fn,J):te=="async"?O(Ee):we=="@"?O(Re,Ee):z(ae("stat"),Re,pe(";"),J)}function Le(te){if(te=="(")return O(cr,pe(")"))}function Re(te,we){return me(te,we,!1)}function Ce(te,we){return me(te,we,!0)}function ne(te){return te!="("?z():O(ae(")"),ue,pe(")"),J)}function me(te,we,je){if(H.state.fatArrowAt==H.stream.start){var Je=je?Ge:Ke;if(te=="(")return O(j,ae(")"),Dt(cr,")"),J,pe("=>"),Je,ve);if(te=="variable")return z(j,lr,pe("=>"),Je,ve)}var Ft=je?ze:Te;return B.hasOwnProperty(te)?O(Ft):te=="function"?O(ii,Ft):te=="class"||c&&we=="interface"?(H.marked="keyword",O(ae("form"),xr,J)):te=="keyword c"||te=="async"?O(je?Ce:Re):te=="("?O(ae(")"),ue,pe(")"),J,Ft):te=="operator"||te=="spread"?O(je?Ce:Re):te=="["?O(ae("]"),hn,J,Ft):te=="{"?wn(wt,"}",null,Ft):te=="quasi"?z(We,Ft):te=="new"?O(_e(je)):O()}function ue(te){return te.match(/[;\}\)\],]/)?z():z(Re)}function Te(te,we){return te==","?O(ue):ze(te,we,!1)}function ze(te,we,je){var Je=je==!1?Te:ze,Ft=je==!1?Re:Ce;if(te=="=>")return O(j,je?Ge:Ke,ve);if(te=="operator")return/\+\+|--/.test(we)||c&&we=="!"?O(Je):c&&we=="<"&&H.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?O(ae(">"),Dt(Tt,">"),J,Je):we=="?"?O(Re,pe(":"),Ft):O(Ft);if(te=="quasi")return z(We,Je);if(te!=";"){if(te=="(")return wn(Ce,")","call",Je);if(te==".")return O(nt,Je);if(te=="[")return O(ae("]"),ue,pe("]"),J,Je);if(c&&we=="as")return H.marked="keyword",O(Tt,Je);if(te=="regexp")return H.state.lastType=H.marked="operator",H.stream.backUp(H.stream.pos-H.stream.start-1),O(Ft)}}function We(te,we){return te!="quasi"?z():we.slice(we.length-2)!="${"?O(We):O(ue,et)}function et(te){if(te=="}")return H.marked="string-2",H.state.tokenize=D,O(We)}function Ke(te){return P(H.stream,H.state),z(te=="{"?Ee:Re)}function Ge(te){return P(H.stream,H.state),z(te=="{"?Ee:Ce)}function _e(te){return function(we){return we=="."?O(te?Ae:Ue):we=="variable"&&c?O(ji,te?ze:Te):z(te?Ce:Re)}}function Ue(te,we){if(we=="target")return H.marked="keyword",O(Te)}function Ae(te,we){if(we=="target")return H.marked="keyword",O(ze)}function ot(te){return te==":"?O(J,Ee):z(Te,pe(";"),J)}function nt(te){if(te=="variable")return H.marked="property",O()}function wt(te,we){if(te=="async")return H.marked="property",O(wt);if(te=="variable"||H.style=="keyword"){if(H.marked="property",we=="get"||we=="set")return O(bt);var je;return c&&H.state.fatArrowAt==H.stream.start&&(je=H.stream.match(/^\s*:\s*/,!1))&&(H.state.fatArrowAt=H.stream.pos+je[0].length),O(Et)}else{if(te=="number"||te=="string")return H.marked=a?"property":H.style+" property",O(Et);if(te=="jsonld-keyword")return O(Et);if(c&&F(we))return H.marked="keyword",O(wt);if(te=="[")return O(Re,kr,pe("]"),Et);if(te=="spread")return O(Ce,Et);if(we=="*")return H.marked="keyword",O(wt);if(te==":")return z(Et)}}function bt(te){return te!="variable"?z(Et):(H.marked="property",O(ii))}function Et(te){if(te==":")return O(Ce);if(te=="(")return z(ii)}function Dt(te,we,je){function Je(Ft,gt){if(je?je.indexOf(Ft)>-1:Ft==","){var st=H.state.lexical;return st.info=="call"&&(st.pos=(st.pos||0)+1),O(function(Yn,Wn){return Yn==we||Wn==we?z():z(te)},Je)}return Ft==we||gt==we?O():je&&je.indexOf(";")>-1?z(te):O(pe(we))}return function(Ft,gt){return Ft==we||gt==we?O():z(te,Je)}}function wn(te,we,je){for(var Je=3;Je<arguments.length;Je++)H.cc.push(arguments[Je]);return O(ae(we,je),Dt(te,we),J)}function zn(te){return te=="}"?O():z(Ee,zn)}function kr(te,we){if(c){if(te==":")return O(Tt);if(we=="?")return O(kr)}}function vt(te,we){if(c&&(te==":"||we=="in"))return O(Tt)}function bi(te){if(c&&te==":")return H.stream.match(/^\s*\w+\s+is\b/,!1)?O(Re,tr,Tt):O(Tt)}function tr(te,we){if(we=="is")return H.marked="keyword",O()}function Tt(te,we){if(we=="keyof"||we=="typeof"||we=="infer"||we=="readonly")return H.marked="keyword",O(we=="typeof"?Ce:Tt);if(te=="variable"||we=="void")return H.marked="type",O(Zr);if(we=="|"||we=="&")return O(Tt);if(te=="string"||te=="number"||te=="atom")return O(Zr);if(te=="[")return O(ae("]"),Dt(Tt,"]",","),J,Zr);if(te=="{")return O(ae("}"),Rn,J,Zr);if(te=="(")return O(Dt(ha,")"),Dn,Zr);if(te=="<")return O(Dt(Tt,">"),Tt);if(te=="quasi")return z(sr,Zr)}function Dn(te){if(te=="=>")return O(Tt)}function Rn(te){return te.match(/[\}\)\]]/)?O():te==","||te==";"?O(Rn):z(pn,Rn)}function pn(te,we){if(te=="variable"||H.style=="keyword")return H.marked="property",O(pn);if(we=="?"||te=="number"||te=="string")return O(pn);if(te==":")return O(Tt);if(te=="[")return O(pe("variable"),vt,pe("]"),pn);if(te=="(")return z(Zn,pn);if(!te.match(/[;\}\)\],]/))return O()}function sr(te,we){return te!="quasi"?z():we.slice(we.length-2)!="${"?O(sr):O(Tt,dr)}function dr(te){if(te=="}")return H.marked="string-2",H.state.tokenize=D,O(sr)}function ha(te,we){return te=="variable"&&H.stream.match(/^\s*[?:]/,!1)||we=="?"?O(ha):te==":"?O(Tt):te=="spread"?O(ha):z(Tt)}function Zr(te,we){if(we=="<")return O(ae(">"),Dt(Tt,">"),J,Zr);if(we=="|"||te=="."||we=="&")return O(Tt);if(te=="[")return O(Tt,pe("]"),Zr);if(we=="extends"||we=="implements")return H.marked="keyword",O(Tt);if(we=="?")return O(Tt,pe(":"),Tt)}function ji(te,we){if(we=="<")return O(ae(">"),Dt(Tt,">"),J,Zr)}function Wt(){return z(Tt,Ut)}function Ut(te,we){if(we=="=")return O(Tt)}function In(te,we){return we=="enum"?(H.marked="keyword",O(Cr)):z(lr,kr,Yr,ri)}function lr(te,we){if(c&&F(we))return H.marked="keyword",O(lr);if(te=="variable")return ie(we),O();if(te=="spread")return O(lr);if(te=="[")return wn(Ni,"]");if(te=="{")return wn(yi,"}")}function yi(te,we){return te=="variable"&&!H.stream.match(/^\s*:/,!1)?(ie(we),O(Yr)):(te=="variable"&&(H.marked="property"),te=="spread"?O(lr):te=="}"?z():te=="["?O(Re,pe("]"),pe(":"),yi):O(pe(":"),lr,Yr))}function Ni(){return z(lr,Yr)}function Yr(te,we){if(we=="=")return O(Ce)}function ri(te){if(te==",")return O(In)}function Ia(te,we){if(te=="keyword b"&&we=="else")return O(ae("form","else"),Ee,J)}function Fs(te,we){if(we=="await")return O(Fs);if(te=="(")return O(ae(")"),To,J)}function To(te){return te=="var"?O(In,La):te=="variable"?O(La):z(La)}function La(te,we){return te==")"?O():te==";"?O(La):we=="in"||we=="of"?(H.marked="keyword",O(Re,La)):z(Re,La)}function ii(te,we){if(we=="*")return H.marked="keyword",O(ii);if(te=="variable")return ie(we),O(ii);if(te=="(")return O(j,ae(")"),Dt(cr,")"),J,bi,Ee,ve);if(c&&we=="<")return O(ae(">"),Dt(Wt,">"),J,ii)}function Zn(te,we){if(we=="*")return H.marked="keyword",O(Zn);if(te=="variable")return ie(we),O(Zn);if(te=="(")return O(j,ae(")"),Dt(cr,")"),J,bi,ve);if(c&&we=="<")return O(ae(">"),Dt(Wt,">"),J,Zn)}function va(te,we){if(te=="keyword"||te=="variable")return H.marked="type",O(va);if(we=="<")return O(ae(">"),Dt(Wt,">"),J)}function cr(te,we){return we=="@"&&O(Re,cr),te=="spread"?O(cr):c&&F(we)?(H.marked="keyword",O(cr)):c&&te=="this"?O(kr,Yr):z(lr,kr,Yr)}function xr(te,we){return te=="variable"?Ki(te,we):Nr(te,we)}function Ki(te,we){if(te=="variable")return ie(we),O(Nr)}function Nr(te,we){if(we=="<")return O(ae(">"),Dt(Wt,">"),J,Nr);if(we=="extends"||we=="implements"||c&&te==",")return we=="implements"&&(H.marked="keyword"),O(c?Tt:Re,Nr);if(te=="{")return O(ae("}"),Fr,J)}function Fr(te,we){if(te=="async"||te=="variable"&&(we=="static"||we=="get"||we=="set"||c&&F(we))&&H.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return H.marked="keyword",O(Fr);if(te=="variable"||H.style=="keyword")return H.marked="property",O(Br,Fr);if(te=="number"||te=="string")return O(Br,Fr);if(te=="[")return O(Re,kr,pe("]"),Br,Fr);if(we=="*")return H.marked="keyword",O(Fr);if(c&&te=="(")return z(Zn,Fr);if(te==";"||te==",")return O(Fr);if(te=="}")return O();if(we=="@")return O(Re,Fr)}function Br(te,we){if(we=="!"||we=="?")return O(Br);if(te==":")return O(Tt,Yr);if(we=="=")return O(Ce);var je=H.state.lexical.prev,Je=je&&je.info=="interface";return z(Je?Zn:ii)}function Vi(te,we){return we=="*"?(H.marked="keyword",O(Hr,pe(";"))):we=="default"?(H.marked="keyword",O(Re,pe(";"))):te=="{"?O(Dt(pa,"}"),Hr,pe(";")):z(Ee)}function pa(te,we){if(we=="as")return H.marked="keyword",O(pe("variable"));if(te=="variable")return z(Ce,pa)}function Fn(te){return te=="string"?O():te=="("?z(Re):te=="."?z(Te):z(Ct,Pr,Hr)}function Ct(te,we){return te=="{"?wn(Ct,"}"):(te=="variable"&&ie(we),we=="*"&&(H.marked="keyword"),O(ro))}function Pr(te){if(te==",")return O(Ct,Pr)}function ro(te,we){if(we=="as")return H.marked="keyword",O(Ct)}function Hr(te,we){if(we=="from")return H.marked="keyword",O(Re)}function hn(te){return te=="]"?O():z(Dt(Ce,"]"))}function Cr(){return z(ae("form"),lr,pe("{"),ae("}"),Dt(ga,"}"),J,J)}function ga(){return z(lr,Yr)}function Wi(te,we){return te.lastType=="operator"||te.lastType==","||h.test(we.charAt(0))||/[,.]/.test(we.charAt(0))}function Ve(te,we,je){return we.tokenize==M&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(we.lastType)||we.lastType=="quasi"&&/\{\s*$/.test(te.string.slice(0,te.pos-(je||0)))}return{startState:function(te){var we={tokenize:M,lastType:"sof",cc:[],lexical:new $((te||0)-r,0,"block",!1),localVars:e.localVars,context:e.localVars&&new X(null,null,!1),indented:te||0};return e.globalVars&&typeof e.globalVars=="object"&&(we.globalVars=e.globalVars),we},token:function(te,we){if(te.sol()&&(we.lexical.hasOwnProperty("align")||(we.lexical.align=!1),we.indented=te.indentation(),P(te,we)),we.tokenize!=S&&te.eatSpace())return null;var je=we.tokenize(te,we);return x=="comment"?je:(we.lastType=x=="operator"&&(_=="++"||_=="--")?"incdec":x,G(we,je,x,_,te))},indent:function(te,we){if(te.tokenize==S||te.tokenize==D)return t.Pass;if(te.tokenize!=M)return 0;var je=we&&we.charAt(0),Je=te.lexical,Ft;if(!/^\s*else\b/.test(we))for(var gt=te.cc.length-1;gt>=0;--gt){var st=te.cc[gt];if(st==J)Je=Je.prev;else if(st!=Ia&&st!=ve)break}for(;(Je.type=="stat"||Je.type=="form")&&(je=="}"||(Ft=te.cc[te.cc.length-1])&&(Ft==Te||Ft==ze)&&!/^[,\.=+\-*:?[\(]/.test(we));)Je=Je.prev;i&&Je.type==")"&&Je.prev.type=="stat"&&(Je=Je.prev);var Yn=Je.type,Wn=je==Yn;return Yn=="vardef"?Je.indented+(te.lastType=="operator"||te.lastType==","?Je.info.length+1:0):Yn=="form"&&je=="{"?Je.indented:Yn=="form"?Je.indented+r:Yn=="stat"?Je.indented+(Wi(te,we)?i||r:0):Je.info=="switch"&&!Wn&&e.doubleIndentSwitch!=!1?Je.indented+(/^(?:case|default)\b/.test(we)?r:2*r):Je.align?Je.column+(Wn?0:1):Je.indented+(Wn?0:r)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:o?null:"/*",blockCommentEnd:o?null:"*/",blockCommentContinue:o?null:" * ",lineComment:o?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:o?"json":"javascript",jsonldMode:a,jsonMode:o,expressionAllowed:Ve,skipExpression:function(te){G(te,"atom","atom","true",new t.StringStream("",2,null))}}}),t.registerHelper("wordChars","javascript",/[\w$]/),t.defineMIME("text/javascript","javascript"),t.defineMIME("text/ecmascript","javascript"),t.defineMIME("application/javascript","javascript"),t.defineMIME("application/x-javascript","javascript"),t.defineMIME("application/ecmascript","javascript"),t.defineMIME("application/json",{name:"javascript",json:!0}),t.defineMIME("application/x-json",{name:"javascript",json:!0}),t.defineMIME("application/manifest+json",{name:"javascript",json:!0}),t.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),t.defineMIME("text/typescript",{name:"javascript",typescript:!0}),t.defineMIME("application/typescript",{name:"javascript",typescript:!0})})})();(function(b,u){(function(t){t(bn.exports,Zp.exports,Um.exports,E_.exports)})(function(t){var n={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]};function e(d,v,h){var g=d.current(),w=g.search(v);return w>-1?d.backUp(g.length-w):g.match(/<\/?$/)&&(d.backUp(g.length),d.match(v,!1)||d.match(g)),h}var r={};function i(d){var v=r[d];return v||(r[d]=new RegExp("\\s+"+d+`\\s*=\\s*('|")?([^'"]+)('|")?\\s*`))}function a(d,v){var h=d.match(i(v));return h?/^\s*(.*?)\s*$/.exec(h[2])[1]:""}function o(d,v){return new RegExp((v?"^":"")+"</\\s*"+d+"\\s*>","i")}function l(d,v){for(var h in d)for(var g=v[h]||(v[h]=[]),w=d[h],x=w.length-1;x>=0;x--)g.unshift(w[x])}function c(d,v){for(var h=0;h<d.length;h++){var g=d[h];if(!g[0]||g[1].test(a(v,g[0])))return g[2]}}t.defineMode("htmlmixed",function(d,v){var h=t.getMode(d,{name:"xml",htmlMode:!0,multilineTagIndentFactor:v.multilineTagIndentFactor,multilineTagIndentPastTag:v.multilineTagIndentPastTag,allowMissingTagName:v.allowMissingTagName}),g={},w=v&&v.tags,x=v&&v.scriptTypes;if(l(n,g),w&&l(w,g),x)for(var _=x.length-1;_>=0;_--)g.script.unshift(["type",x[_].matches,x[_].mode]);function E(M,T){var S=h.token(M,T.htmlState),D=/\btag\b/.test(S),I;if(D&&!/[<>\s\/]/.test(M.current())&&(I=T.htmlState.tagName&&T.htmlState.tagName.toLowerCase())&&g.hasOwnProperty(I))T.inTag=I+" ";else if(T.inTag&&D&&/>$/.test(M.current())){var P=/^([\S]+) (.*)/.exec(T.inTag);T.inTag=null;var B=M.current()==">"&&c(g[P[1]],P[2]),$=t.getMode(d,B),q=o(P[1],!0),G=o(P[1],!1);T.token=function(H,z){return H.match(q,!1)?(z.token=E,z.localState=z.localMode=null,null):e(H,G,z.localMode.token(H,z.localState))},T.localMode=$,T.localState=t.startState($,h.indent(T.htmlState,"",""))}else T.inTag&&(T.inTag+=M.current(),M.eol()&&(T.inTag+=" "));return S}return{startState:function(){var M=t.startState(h);return{token:E,inTag:null,localMode:null,localState:null,htmlState:M}},copyState:function(M){var T;return M.localState&&(T=t.copyState(M.localMode,M.localState)),{token:M.token,inTag:M.inTag,localMode:M.localMode,localState:T,htmlState:t.copyState(h,M.htmlState)}},token:function(M,T){return T.token(M,T)},indent:function(M,T,S){return!M.localMode||/^\s*<\//.test(T)?h.indent(M.htmlState,T,S):M.localMode.indent?M.localMode.indent(M.localState,T,S):t.Pass},innerMode:function(M){return{state:M.localState||M.htmlState,mode:M.localMode||h}}}},"xml","javascript","css"),t.defineMIME("text/html","htmlmixed")})})();(function(b,u){(function(t){t(bn.exports)})(function(t){t.defineMode("http",function(){function n(d,v){return d.skipToEnd(),v.cur=l,"error"}function e(d,v){return d.match(/^HTTP\/\d\.\d/)?(v.cur=r,"keyword"):d.match(/^[A-Z]+/)&&/[ \t]/.test(d.peek())?(v.cur=a,"keyword"):n(d,v)}function r(d,v){var h=d.match(/^\d+/);if(!h)return n(d,v);v.cur=i;var g=Number(h[0]);return g>=100&&g<200?"positive informational":g>=200&&g<300?"positive success":g>=300&&g<400?"positive redirect":g>=400&&g<500?"negative client-error":g>=500&&g<600?"negative server-error":"error"}function i(d,v){return d.skipToEnd(),v.cur=l,null}function a(d,v){return d.eatWhile(/\S/),v.cur=o,"string-2"}function o(d,v){return d.match(/^HTTP\/\d\.\d$/)?(v.cur=l,"keyword"):n(d,v)}function l(d){return d.sol()&&!d.eat(/[ \t]/)?d.match(/^.*?:/)?"atom":(d.skipToEnd(),"error"):(d.skipToEnd(),"string")}function c(d){return d.skipToEnd(),null}return{token:function(d,v){var h=v.cur;return h!=l&&h!=c&&d.eatSpace()?null:h(d,v)},blankLine:function(d){d.cur=c},startState:function(){return{cur:e}}}}),t.defineMIME("message/http","http")})})();(function(b,u){(function(t){t(bn.exports,Zp.exports,Um.exports)})(function(t){function n(r,i,a,o){this.state=r,this.mode=i,this.depth=a,this.prev=o}function e(r){return new n(t.copyState(r.mode,r.state),r.mode,r.depth,r.prev&&e(r.prev))}t.defineMode("jsx",function(r,i){var a=t.getMode(r,{name:"xml",allowMissing:!0,multilineTagIndentPastTag:!1,allowMissingTagName:!0}),o=t.getMode(r,i&&i.base||"javascript");function l(h){var g=h.tagName;h.tagName=null;var w=a.indent(h,"","");return h.tagName=g,w}function c(h,g){return g.context.mode==a?d(h,g,g.context):v(h,g,g.context)}function d(h,g,w){if(w.depth==2)return h.match(/^.*?\*\//)?w.depth=1:h.skipToEnd(),"comment";if(h.peek()=="{"){a.skipAttribute(w.state);var x=l(w.state),_=w.state.context;if(_&&h.match(/^[^>]*>\s*$/,!1)){for(;_.prev&&!_.startOfLine;)_=_.prev;_.startOfLine?x-=r.indentUnit:w.prev.state.lexical&&(x=w.prev.state.lexical.indented)}else w.depth==1&&(x+=r.indentUnit);return g.context=new n(t.startState(o,x),o,0,g.context),null}if(w.depth==1){if(h.peek()=="<")return a.skipAttribute(w.state),g.context=new n(t.startState(a,l(w.state)),a,0,g.context),null;if(h.match("//"))return h.skipToEnd(),"comment";if(h.match("/*"))return w.depth=2,c(h,g)}var E=a.token(h,w.state),M=h.current(),T;return/\btag\b/.test(E)?/>$/.test(M)?w.state.context?w.depth=0:g.context=g.context.prev:/^</.test(M)&&(w.depth=1):!E&&(T=M.indexOf("{"))>-1&&h.backUp(M.length-T),E}function v(h,g,w){if(h.peek()=="<"&&o.expressionAllowed(h,w.state))return g.context=new n(t.startState(a,o.indent(w.state,"","")),a,0,g.context),o.skipExpression(w.state),null;var x=o.token(h,w.state);if(!x&&w.depth!=null){var _=h.current();_=="{"?w.depth++:_=="}"&&--w.depth==0&&(g.context=g.context.prev)}return x}return{startState:function(){return{context:new n(t.startState(o),o)}},copyState:function(h){return{context:e(h.context)}},token:c,indent:function(h,g,w){return h.context.mode.indent(h.context.state,g,w)},innerMode:function(h){return h.context}}},"xml","javascript"),t.defineMIME("text/jsx","jsx"),t.defineMIME("text/typescript-jsx",{name:"jsx",base:{name:"javascript",typescript:!0}})})})();(function(b,u){(function(t){t(bn.exports)})(function(t){t.defineMode("cmake",function(){var n=/({)?[a-zA-Z0-9_]+(})?/;function e(i,a){for(var o,l,c=!1;!i.eol()&&(o=i.next())!=a.pending;){if(o==="$"&&l!="\\"&&a.pending=='"'){c=!0;break}l=o}return c&&i.backUp(1),o==a.pending?a.continueString=!1:a.continueString=!0,"string"}function r(i,a){var o=i.next();return o==="$"?i.match(n)?"variable-2":"variable":a.continueString?(i.backUp(1),e(i,a)):i.match(/(\s+)?\w+\(/)||i.match(/(\s+)?\w+\ \(/)?(i.backUp(1),"def"):o=="#"?(i.skipToEnd(),"comment"):o=="'"||o=='"'?(a.pending=o,e(i,a)):o=="("||o==")"?"bracket":o.match(/[0-9]/)?"number":(i.eatWhile(/[\w-]/),null)}return{startState:function(){var i={};return i.inDefinition=!1,i.inInclude=!1,i.continueString=!1,i.pending=!1,i},token:function(i,a){return i.eatSpace()?null:r(i,a)}}}),t.defineMIME("text/x-cmake","cmake")})})();var S_={exports:{}};(function(b,u){(function(t){t(bn.exports)})(function(t){t.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["asc","pgp","sig"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy","cbl"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp","cs"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists\.txt$/},{name:"CoffeeScript",mimes:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded JavaScript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Esper",mime:"text/x-esper",mode:"sql"},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90","f95"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history)\.md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"text/jinja2",mode:"jinja2",ext:["j2","jinja","jinja2"]},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"],alias:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb","wl","wls"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective-C",mime:"text/x-objectivec",mode:"clike",ext:["m"],alias:["objective-c","objc"]},{name:"Objective-C++",mime:"text/x-objectivec++",mode:"clike",ext:["mm"],alias:["objective-c++","objc++"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PostgreSQL",mime:"text/x-pgsql",mode:"sql"},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"SML",mime:"text/x-sml",mode:"mllike",ext:["sml","sig","fun","smackspec"]},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx","tex"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v","sv","svh"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]},{name:"WebAssembly",mime:"text/webassembly",mode:"wast",ext:["wat","wast"]}];for(var n=0;n<t.modeInfo.length;n++){var e=t.modeInfo[n];e.mimes&&(e.mime=e.mimes[0])}t.findModeByMIME=function(r){r=r.toLowerCase();for(var i=0;i<t.modeInfo.length;i++){var a=t.modeInfo[i];if(a.mime==r)return a;if(a.mimes){for(var o=0;o<a.mimes.length;o++)if(a.mimes[o]==r)return a}}if(/\+xml$/.test(r))return t.findModeByMIME("application/xml");if(/\+json$/.test(r))return t.findModeByMIME("application/json")},t.findModeByExtension=function(r){r=r.toLowerCase();for(var i=0;i<t.modeInfo.length;i++){var a=t.modeInfo[i];if(a.ext){for(var o=0;o<a.ext.length;o++)if(a.ext[o]==r)return a}}},t.findModeByFileName=function(r){for(var i=0;i<t.modeInfo.length;i++){var a=t.modeInfo[i];if(a.file&&a.file.test(r))return a}var o=r.lastIndexOf("."),l=o>-1&&r.substring(o+1,r.length);if(l)return t.findModeByExtension(l)},t.findModeByName=function(r){r=r.toLowerCase();for(var i=0;i<t.modeInfo.length;i++){var a=t.modeInfo[i];if(a.name.toLowerCase()==r)return a;if(a.alias){for(var o=0;o<a.alias.length;o++)if(a.alias[o].toLowerCase()==r)return a}}}})})();(function(b,u){(function(t){t(bn.exports,Zp.exports,S_.exports)})(function(t){t.defineMode("markdown",function(n,e){var r=t.getMode(n,"text/html"),i=r.name=="null";function a(Y){if(t.findModeByName){var j=t.findModeByName(Y);j&&(Y=j.mime||j.mimes[0])}var fe=t.getMode(n,Y);return fe.name=="null"?null:fe}e.highlightFormatting===void 0&&(e.highlightFormatting=!1),e.maxBlockquoteDepth===void 0&&(e.maxBlockquoteDepth=0),e.taskLists===void 0&&(e.taskLists=!1),e.strikethrough===void 0&&(e.strikethrough=!1),e.emoji===void 0&&(e.emoji=!1),e.fencedCodeBlockHighlighting===void 0&&(e.fencedCodeBlockHighlighting=!0),e.fencedCodeBlockDefaultMode===void 0&&(e.fencedCodeBlockDefaultMode="text/plain"),e.xml===void 0&&(e.xml=!0),e.tokenTypeOverrides===void 0&&(e.tokenTypeOverrides={});var o={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"};for(var l in o)o.hasOwnProperty(l)&&e.tokenTypeOverrides[l]&&(o[l]=e.tokenTypeOverrides[l]);var c=/^([*\-_])(?:\s*\1){2,}\s*$/,d=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,v=/^\[(x| )\](?=\s)/i,h=e.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,g=/^ {0,3}(?:\={1,}|-{2,})\s*$/,w=/^[^#!\[\]*_\\<>` "'(~:]+/,x=/^(~~~+|```+)[ \t]*([\w\/+#-]*)[^\n`]*$/,_=/^\s*\[[^\]]+?\]:.*$/,E=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/,M="    ";function T(Y,j,fe){return j.f=j.inline=fe,fe(Y,j)}function S(Y,j,fe){return j.f=j.block=fe,fe(Y,j)}function D(Y){return!Y||!/\S/.test(Y.string)}function I(Y){if(Y.linkTitle=!1,Y.linkHref=!1,Y.linkText=!1,Y.em=!1,Y.strong=!1,Y.strikethrough=!1,Y.quote=0,Y.indentedCode=!1,Y.f==B){var j=i;if(!j){var fe=t.innerMode(r,Y.htmlState);j=fe.mode.name=="xml"&&fe.state.tagStart===null&&!fe.state.context&&fe.state.tokenize.isInText}j&&(Y.f=H,Y.block=P,Y.htmlState=null)}return Y.trailingSpace=0,Y.trailingSpaceNewLine=!1,Y.prevLine=Y.thisLine,Y.thisLine={stream:null},null}function P(Y,j){var fe=Y.column()===j.indentation,ve=D(j.prevLine.stream),ae=j.indentedCode,J=j.prevLine.hr,pe=j.list!==!1,Ee=(j.listStack[j.listStack.length-1]||0)+3;j.indentedCode=!1;var Le=j.indentation;if(j.indentationDiff===null&&(j.indentationDiff=j.indentation,pe)){for(j.list=null;Le<j.listStack[j.listStack.length-1];)j.listStack.pop(),j.listStack.length?j.indentation=j.listStack[j.listStack.length-1]:j.list=!1;j.list!==!1&&(j.indentationDiff=Le-j.listStack[j.listStack.length-1])}var Re=!ve&&!J&&!j.prevLine.header&&(!pe||!ae)&&!j.prevLine.fencedCodeEnd,Ce=(j.list===!1||J||ve)&&j.indentation<=Ee&&Y.match(c),ne=null;if(j.indentationDiff>=4&&(ae||j.prevLine.fencedCodeEnd||j.prevLine.header||ve))return Y.skipToEnd(),j.indentedCode=!0,o.code;if(Y.eatSpace())return null;if(fe&&j.indentation<=Ee&&(ne=Y.match(h))&&ne[1].length<=6)return j.quote=0,j.header=ne[1].length,j.thisLine.header=!0,e.highlightFormatting&&(j.formatting="header"),j.f=j.inline,q(j);if(j.indentation<=Ee&&Y.eat(">"))return j.quote=fe?1:j.quote+1,e.highlightFormatting&&(j.formatting="quote"),Y.eatSpace(),q(j);if(!Ce&&!j.setext&&fe&&j.indentation<=Ee&&(ne=Y.match(d))){var me=ne[1]?"ol":"ul";return j.indentation=Le+Y.current().length,j.list=!0,j.quote=0,j.listStack.push(j.indentation),j.em=!1,j.strong=!1,j.code=!1,j.strikethrough=!1,e.taskLists&&Y.match(v,!1)&&(j.taskList=!0),j.f=j.inline,e.highlightFormatting&&(j.formatting=["list","list-"+me]),q(j)}else{if(fe&&j.indentation<=Ee&&(ne=Y.match(x,!0)))return j.quote=0,j.fencedEndRE=new RegExp(ne[1]+"+ *$"),j.localMode=e.fencedCodeBlockHighlighting&&a(ne[2]||e.fencedCodeBlockDefaultMode),j.localMode&&(j.localState=t.startState(j.localMode)),j.f=j.block=$,e.highlightFormatting&&(j.formatting="code-block"),j.code=-1,q(j);if(j.setext||(!Re||!pe)&&!j.quote&&j.list===!1&&!j.code&&!Ce&&!_.test(Y.string)&&(ne=Y.lookAhead(1))&&(ne=ne.match(g)))return j.setext?(j.header=j.setext,j.setext=0,Y.skipToEnd(),e.highlightFormatting&&(j.formatting="header")):(j.header=ne[0].charAt(0)=="="?1:2,j.setext=j.header),j.thisLine.header=!0,j.f=j.inline,q(j);if(Ce)return Y.skipToEnd(),j.hr=!0,j.thisLine.hr=!0,o.hr;if(Y.peek()==="[")return T(Y,j,L)}return T(Y,j,j.inline)}function B(Y,j){var fe=r.token(Y,j.htmlState);if(!i){var ve=t.innerMode(r,j.htmlState);(ve.mode.name=="xml"&&ve.state.tagStart===null&&!ve.state.context&&ve.state.tokenize.isInText||j.md_inside&&Y.current().indexOf(">")>-1)&&(j.f=H,j.block=P,j.htmlState=null)}return fe}function $(Y,j){var fe=j.listStack[j.listStack.length-1]||0,ve=j.indentation<fe,ae=fe+3;if(j.fencedEndRE&&j.indentation<=ae&&(ve||Y.match(j.fencedEndRE))){e.highlightFormatting&&(j.formatting="code-block");var J;return ve||(J=q(j)),j.localMode=j.localState=null,j.block=P,j.f=H,j.fencedEndRE=null,j.code=0,j.thisLine.fencedCodeEnd=!0,ve?S(Y,j,j.block):J}else return j.localMode?j.localMode.token(Y,j.localState):(Y.skipToEnd(),o.code)}function q(Y){var j=[];if(Y.formatting){j.push(o.formatting),typeof Y.formatting=="string"&&(Y.formatting=[Y.formatting]);for(var fe=0;fe<Y.formatting.length;fe++)j.push(o.formatting+"-"+Y.formatting[fe]),Y.formatting[fe]==="header"&&j.push(o.formatting+"-"+Y.formatting[fe]+"-"+Y.header),Y.formatting[fe]==="quote"&&(!e.maxBlockquoteDepth||e.maxBlockquoteDepth>=Y.quote?j.push(o.formatting+"-"+Y.formatting[fe]+"-"+Y.quote):j.push("error"))}if(Y.taskOpen)return j.push("meta"),j.length?j.join(" "):null;if(Y.taskClosed)return j.push("property"),j.length?j.join(" "):null;if(Y.linkHref?j.push(o.linkHref,"url"):(Y.strong&&j.push(o.strong),Y.em&&j.push(o.em),Y.strikethrough&&j.push(o.strikethrough),Y.emoji&&j.push(o.emoji),Y.linkText&&j.push(o.linkText),Y.code&&j.push(o.code),Y.image&&j.push(o.image),Y.imageAltText&&j.push(o.imageAltText,"link"),Y.imageMarker&&j.push(o.imageMarker)),Y.header&&j.push(o.header,o.header+"-"+Y.header),Y.quote&&(j.push(o.quote),!e.maxBlockquoteDepth||e.maxBlockquoteDepth>=Y.quote?j.push(o.quote+"-"+Y.quote):j.push(o.quote+"-"+e.maxBlockquoteDepth)),Y.list!==!1){var ve=(Y.listStack.length-1)%3;ve?ve===1?j.push(o.list2):j.push(o.list3):j.push(o.list1)}return Y.trailingSpaceNewLine?j.push("trailing-space-new-line"):Y.trailingSpace&&j.push("trailing-space-"+(Y.trailingSpace%2?"a":"b")),j.length?j.join(" "):null}function G(Y,j){if(Y.match(w,!0))return q(j)}function H(Y,j){var fe=j.text(Y,j);if(typeof fe!="undefined")return fe;if(j.list)return j.list=null,q(j);if(j.taskList){var ve=Y.match(v,!0)[1]===" ";return ve?j.taskOpen=!0:j.taskClosed=!0,e.highlightFormatting&&(j.formatting="task"),j.taskList=!1,q(j)}if(j.taskOpen=!1,j.taskClosed=!1,j.header&&Y.match(/^#+$/,!0))return e.highlightFormatting&&(j.formatting="header"),q(j);var ae=Y.next();if(j.linkTitle){j.linkTitle=!1;var J=ae;ae==="("&&(J=")"),J=(J+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1");var pe="^\\s*(?:[^"+J+"\\\\]+|\\\\\\\\|\\\\.)"+J;if(Y.match(new RegExp(pe),!0))return o.linkHref}if(ae==="`"){var Ee=j.formatting;e.highlightFormatting&&(j.formatting="code"),Y.eatWhile("`");var Le=Y.current().length;if(j.code==0&&(!j.quote||Le==1))return j.code=Le,q(j);if(Le==j.code){var Re=q(j);return j.code=0,Re}else return j.formatting=Ee,q(j)}else if(j.code)return q(j);if(ae==="\\"&&(Y.next(),e.highlightFormatting)){var Ce=q(j),ne=o.formatting+"-escape";return Ce?Ce+" "+ne:ne}if(ae==="!"&&Y.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return j.imageMarker=!0,j.image=!0,e.highlightFormatting&&(j.formatting="image"),q(j);if(ae==="["&&j.imageMarker&&Y.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return j.imageMarker=!1,j.imageAltText=!0,e.highlightFormatting&&(j.formatting="image"),q(j);if(ae==="]"&&j.imageAltText){e.highlightFormatting&&(j.formatting="image");var Ce=q(j);return j.imageAltText=!1,j.image=!1,j.inline=j.f=O,Ce}if(ae==="["&&!j.image)return j.linkText&&Y.match(/^.*?\]/)||(j.linkText=!0,e.highlightFormatting&&(j.formatting="link")),q(j);if(ae==="]"&&j.linkText){e.highlightFormatting&&(j.formatting="link");var Ce=q(j);return j.linkText=!1,j.inline=j.f=Y.match(/\(.*?\)| ?\[.*?\]/,!1)?O:H,Ce}if(ae==="<"&&Y.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1)){j.f=j.inline=z,e.highlightFormatting&&(j.formatting="link");var Ce=q(j);return Ce?Ce+=" ":Ce="",Ce+o.linkInline}if(ae==="<"&&Y.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1)){j.f=j.inline=z,e.highlightFormatting&&(j.formatting="link");var Ce=q(j);return Ce?Ce+=" ":Ce="",Ce+o.linkEmail}if(e.xml&&ae==="<"&&Y.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,!1)){var me=Y.string.indexOf(">",Y.pos);if(me!=-1){var ue=Y.string.substring(Y.start,me);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(ue)&&(j.md_inside=!0)}return Y.backUp(1),j.htmlState=t.startState(r),S(Y,j,B)}if(e.xml&&ae==="<"&&Y.match(/^\/\w*?>/))return j.md_inside=!1,"tag";if(ae==="*"||ae==="_"){for(var Te=1,ze=Y.pos==1?" ":Y.string.charAt(Y.pos-2);Te<3&&Y.eat(ae);)Te++;var We=Y.peek()||" ",et=!/\s/.test(We)&&(!E.test(We)||/\s/.test(ze)||E.test(ze)),Ke=!/\s/.test(ze)&&(!E.test(ze)||/\s/.test(We)||E.test(We)),Ge=null,_e=null;if(Te%2&&(!j.em&&et&&(ae==="*"||!Ke||E.test(ze))?Ge=!0:j.em==ae&&Ke&&(ae==="*"||!et||E.test(We))&&(Ge=!1)),Te>1&&(!j.strong&&et&&(ae==="*"||!Ke||E.test(ze))?_e=!0:j.strong==ae&&Ke&&(ae==="*"||!et||E.test(We))&&(_e=!1)),_e!=null||Ge!=null){e.highlightFormatting&&(j.formatting=Ge==null?"strong":_e==null?"em":"strong em"),Ge===!0&&(j.em=ae),_e===!0&&(j.strong=ae);var Re=q(j);return Ge===!1&&(j.em=!1),_e===!1&&(j.strong=!1),Re}}else if(ae===" "&&(Y.eat("*")||Y.eat("_"))){if(Y.peek()===" ")return q(j);Y.backUp(1)}if(e.strikethrough){if(ae==="~"&&Y.eatWhile(ae)){if(j.strikethrough){e.highlightFormatting&&(j.formatting="strikethrough");var Re=q(j);return j.strikethrough=!1,Re}else if(Y.match(/^[^\s]/,!1))return j.strikethrough=!0,e.highlightFormatting&&(j.formatting="strikethrough"),q(j)}else if(ae===" "&&Y.match("~~",!0)){if(Y.peek()===" ")return q(j);Y.backUp(2)}}if(e.emoji&&ae===":"&&Y.match(/^(?:[a-z_\d+][a-z_\d+-]*|\-[a-z_\d+][a-z_\d+-]*):/)){j.emoji=!0,e.highlightFormatting&&(j.formatting="emoji");var Ue=q(j);return j.emoji=!1,Ue}return ae===" "&&(Y.match(/^ +$/,!1)?j.trailingSpace++:j.trailingSpace&&(j.trailingSpaceNewLine=!0)),q(j)}function z(Y,j){var fe=Y.next();if(fe===">"){j.f=j.inline=H,e.highlightFormatting&&(j.formatting="link");var ve=q(j);return ve?ve+=" ":ve="",ve+o.linkInline}return Y.match(/^[^>]+/,!0),o.linkInline}function O(Y,j){if(Y.eatSpace())return null;var fe=Y.next();return fe==="("||fe==="["?(j.f=j.inline=ie(fe==="("?")":"]"),e.highlightFormatting&&(j.formatting="link-string"),j.linkHref=!0,q(j)):"error"}var Q={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/};function ie(Y){return function(j,fe){var ve=j.next();if(ve===Y){fe.f=fe.inline=H,e.highlightFormatting&&(fe.formatting="link-string");var ae=q(fe);return fe.linkHref=!1,ae}return j.match(Q[Y]),fe.linkHref=!0,q(fe)}}function L(Y,j){return Y.match(/^([^\]\\]|\\.)*\]:/,!1)?(j.f=F,Y.next(),e.highlightFormatting&&(j.formatting="link"),j.linkText=!0,q(j)):T(Y,j,H)}function F(Y,j){if(Y.match("]:",!0)){j.f=j.inline=X,e.highlightFormatting&&(j.formatting="link");var fe=q(j);return j.linkText=!1,fe}return Y.match(/^([^\]\\]|\\.)+/,!0),o.linkText}function X(Y,j){return Y.eatSpace()?null:(Y.match(/^[^\s]+/,!0),Y.peek()===void 0?j.linkTitle=!0:Y.match(/^(?:\s+(?:"(?:[^"\\]|\\.)+"|'(?:[^'\\]|\\.)+'|\((?:[^)\\]|\\.)+\)))?/,!0),j.f=j.inline=H,o.linkHref+" url")}var se={startState:function(){return{f:P,prevLine:{stream:null},thisLine:{stream:null},block:P,htmlState:null,indentation:0,inline:H,text:G,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(Y){return{f:Y.f,prevLine:Y.prevLine,thisLine:Y.thisLine,block:Y.block,htmlState:Y.htmlState&&t.copyState(r,Y.htmlState),indentation:Y.indentation,localMode:Y.localMode,localState:Y.localMode?t.copyState(Y.localMode,Y.localState):null,inline:Y.inline,text:Y.text,formatting:!1,linkText:Y.linkText,linkTitle:Y.linkTitle,linkHref:Y.linkHref,code:Y.code,em:Y.em,strong:Y.strong,strikethrough:Y.strikethrough,emoji:Y.emoji,header:Y.header,setext:Y.setext,hr:Y.hr,taskList:Y.taskList,list:Y.list,listStack:Y.listStack.slice(0),quote:Y.quote,indentedCode:Y.indentedCode,trailingSpace:Y.trailingSpace,trailingSpaceNewLine:Y.trailingSpaceNewLine,md_inside:Y.md_inside,fencedEndRE:Y.fencedEndRE}},token:function(Y,j){if(j.formatting=!1,Y!=j.thisLine.stream){if(j.header=0,j.hr=!1,Y.match(/^\s*$/,!0))return I(j),null;if(j.prevLine=j.thisLine,j.thisLine={stream:Y},j.taskList=!1,j.trailingSpace=0,j.trailingSpaceNewLine=!1,!j.localState&&(j.f=j.block,j.f!=B)){var fe=Y.match(/^\s*/,!0)[0].replace(/\t/g,M).length;if(j.indentation=fe,j.indentationDiff=null,fe>0)return null}}return j.f(Y,j)},innerMode:function(Y){return Y.block==B?{state:Y.htmlState,mode:r}:Y.localState?{state:Y.localState,mode:Y.localMode}:{state:Y,mode:se}},indent:function(Y,j,fe){return Y.block==B&&r.indent?r.indent(Y.htmlState,j,fe):Y.localState&&Y.localMode.indent?Y.localMode.indent(Y.localState,j,fe):t.Pass},blankLine:I,getType:q,blockCommentStart:"<!--",blockCommentEnd:"-->",closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return se},"xml"),t.defineMIME("text/markdown","markdown"),t.defineMIME("text/x-markdown","markdown")})})();(function(b,u){(function(t){t(bn.exports)})(function(t){t.defineMode("octave",function(){function n(x){return new RegExp("^(("+x.join(")|(")+"))\\b")}var e=new RegExp("^[\\+\\-\\*/&|\\^~<>!@'\\\\]"),r=new RegExp("^[\\(\\[\\{\\},:=;\\.]"),i=new RegExp("^((==)|(~=)|(<=)|(>=)|(<<)|(>>)|(\\.[\\+\\-\\*/\\^\\\\]))"),a=new RegExp("^((!=)|(\\+=)|(\\-=)|(\\*=)|(/=)|(&=)|(\\|=)|(\\^=))"),o=new RegExp("^((>>=)|(<<=))"),l=new RegExp("^[\\]\\)]"),c=new RegExp("^[_A-Za-z\xA1-\uFFFF][_A-Za-z0-9\xA1-\uFFFF]*"),d=n(["error","eval","function","abs","acos","atan","asin","cos","cosh","exp","log","prod","sum","log10","max","min","sign","sin","sinh","sqrt","tan","reshape","break","zeros","default","margin","round","ones","rand","syn","ceil","floor","size","clear","zeros","eye","mean","std","cov","det","eig","inv","norm","rank","trace","expm","logm","sqrtm","linspace","plot","title","xlabel","ylabel","legend","text","grid","meshgrid","mesh","num2str","fft","ifft","arrayfun","cellfun","input","fliplr","flipud","ismember"]),v=n(["return","case","switch","else","elseif","end","endif","endfunction","if","otherwise","do","for","while","try","catch","classdef","properties","events","methods","global","persistent","endfor","endwhile","printf","sprintf","disp","until","continue","pkg"]);function h(x,_){return!x.sol()&&x.peek()==="'"?(x.next(),_.tokenize=w,"operator"):(_.tokenize=w,w(x,_))}function g(x,_){return x.match(/^.*%}/)?(_.tokenize=w,"comment"):(x.skipToEnd(),"comment")}function w(x,_){if(x.eatSpace())return null;if(x.match("%{"))return _.tokenize=g,x.skipToEnd(),"comment";if(x.match(/^[%#]/))return x.skipToEnd(),"comment";if(x.match(/^[0-9\.+-]/,!1)){if(x.match(/^[+-]?0x[0-9a-fA-F]+[ij]?/))return x.tokenize=w,"number";if(x.match(/^[+-]?\d*\.\d+([EeDd][+-]?\d+)?[ij]?/)||x.match(/^[+-]?\d+([EeDd][+-]?\d+)?[ij]?/))return"number"}if(x.match(n(["nan","NaN","inf","Inf"])))return"number";var E=x.match(/^"(?:[^"]|"")*("|$)/)||x.match(/^'(?:[^']|'')*('|$)/);return E?E[1]?"string":"string error":x.match(v)?"keyword":x.match(d)?"builtin":x.match(c)?"variable":x.match(e)||x.match(i)?"operator":x.match(r)||x.match(a)||x.match(o)?null:x.match(l)?(_.tokenize=h,null):(x.next(),"error")}return{startState:function(){return{tokenize:w}},token:function(x,_){var E=_.tokenize(x,_);return(E==="number"||E==="variable")&&(_.tokenize=h),E},lineComment:"%",fold:"indent"}}),t.defineMIME("text/x-octave","octave")})})();(function(b,u){(function(t){t(bn.exports)})(function(t){t.defineMode("nginx",function(n){function e(w){for(var x={},_=w.split(" "),E=0;E<_.length;++E)x[_[E]]=!0;return x}var r=e("break return rewrite set accept_mutex accept_mutex_delay access_log add_after_body add_before_body add_header addition_types aio alias allow ancient_browser ancient_browser_value auth_basic auth_basic_user_file auth_http auth_http_header auth_http_timeout autoindex autoindex_exact_size autoindex_localtime charset charset_types client_body_buffer_size client_body_in_file_only client_body_in_single_buffer client_body_temp_path client_body_timeout client_header_buffer_size client_header_timeout client_max_body_size connection_pool_size create_full_put_path daemon dav_access dav_methods debug_connection debug_points default_type degradation degrade deny devpoll_changes devpoll_events directio directio_alignment empty_gif env epoll_events error_log eventport_events expires fastcgi_bind fastcgi_buffer_size fastcgi_buffers fastcgi_busy_buffers_size fastcgi_cache fastcgi_cache_key fastcgi_cache_methods fastcgi_cache_min_uses fastcgi_cache_path fastcgi_cache_use_stale fastcgi_cache_valid fastcgi_catch_stderr fastcgi_connect_timeout fastcgi_hide_header fastcgi_ignore_client_abort fastcgi_ignore_headers fastcgi_index fastcgi_intercept_errors fastcgi_max_temp_file_size fastcgi_next_upstream fastcgi_param fastcgi_pass_header fastcgi_pass_request_body fastcgi_pass_request_headers fastcgi_read_timeout fastcgi_send_lowat fastcgi_send_timeout fastcgi_split_path_info fastcgi_store fastcgi_store_access fastcgi_temp_file_write_size fastcgi_temp_path fastcgi_upstream_fail_timeout fastcgi_upstream_max_fails flv geoip_city geoip_country google_perftools_profiles gzip gzip_buffers gzip_comp_level gzip_disable gzip_hash gzip_http_version gzip_min_length gzip_no_buffer gzip_proxied gzip_static gzip_types gzip_vary gzip_window if_modified_since ignore_invalid_headers image_filter image_filter_buffer image_filter_jpeg_quality image_filter_transparency imap_auth imap_capabilities imap_client_buffer index ip_hash keepalive_requests keepalive_timeout kqueue_changes kqueue_events large_client_header_buffers limit_conn limit_conn_log_level limit_rate limit_rate_after limit_req limit_req_log_level limit_req_zone limit_zone lingering_time lingering_timeout lock_file log_format log_not_found log_subrequest map_hash_bucket_size map_hash_max_size master_process memcached_bind memcached_buffer_size memcached_connect_timeout memcached_next_upstream memcached_read_timeout memcached_send_timeout memcached_upstream_fail_timeout memcached_upstream_max_fails merge_slashes min_delete_depth modern_browser modern_browser_value msie_padding msie_refresh multi_accept open_file_cache open_file_cache_errors open_file_cache_events open_file_cache_min_uses open_file_cache_valid open_log_file_cache output_buffers override_charset perl perl_modules perl_require perl_set pid pop3_auth pop3_capabilities port_in_redirect postpone_gzipping postpone_output protocol proxy proxy_bind proxy_buffer proxy_buffer_size proxy_buffering proxy_buffers proxy_busy_buffers_size proxy_cache proxy_cache_key proxy_cache_methods proxy_cache_min_uses proxy_cache_path proxy_cache_use_stale proxy_cache_valid proxy_connect_timeout proxy_headers_hash_bucket_size proxy_headers_hash_max_size proxy_hide_header proxy_ignore_client_abort proxy_ignore_headers proxy_intercept_errors proxy_max_temp_file_size proxy_method proxy_next_upstream proxy_pass_error_message proxy_pass_header proxy_pass_request_body proxy_pass_request_headers proxy_read_timeout proxy_redirect proxy_send_lowat proxy_send_timeout proxy_set_body proxy_set_header proxy_ssl_session_reuse proxy_store proxy_store_access proxy_temp_file_write_size proxy_temp_path proxy_timeout proxy_upstream_fail_timeout proxy_upstream_max_fails random_index read_ahead real_ip_header recursive_error_pages request_pool_size reset_timedout_connection resolver resolver_timeout rewrite_log rtsig_overflow_events rtsig_overflow_test rtsig_overflow_threshold rtsig_signo satisfy secure_link_secret send_lowat send_timeout sendfile sendfile_max_chunk server_name_in_redirect server_names_hash_bucket_size server_names_hash_max_size server_tokens set_real_ip_from smtp_auth smtp_capabilities smtp_client_buffer smtp_greeting_delay so_keepalive source_charset ssi ssi_ignore_recycled_buffers ssi_min_file_chunk ssi_silent_errors ssi_types ssi_value_length ssl ssl_certificate ssl_certificate_key ssl_ciphers ssl_client_certificate ssl_crl ssl_dhparam ssl_engine ssl_prefer_server_ciphers ssl_protocols ssl_session_cache ssl_session_timeout ssl_verify_client ssl_verify_depth starttls stub_status sub_filter sub_filter_once sub_filter_types tcp_nodelay tcp_nopush thread_stack_size timeout timer_resolution types_hash_bucket_size types_hash_max_size underscores_in_headers uninitialized_variable_warn use user userid userid_domain userid_expires userid_mark userid_name userid_p3p userid_path userid_service valid_referers variables_hash_bucket_size variables_hash_max_size worker_connections worker_cpu_affinity worker_priority worker_processes worker_rlimit_core worker_rlimit_nofile worker_rlimit_sigpending worker_threads working_directory xclient xml_entities xslt_stylesheet xslt_typesdrew@li229-23"),i=e("http mail events server types location upstream charset_map limit_except if geo map"),a=e("include root server server_name listen internal proxy_pass memcached_pass fastcgi_pass try_files"),o=n.indentUnit,l;function c(w,x){return l=x,w}function d(w,x){w.eatWhile(/[\w\$_]/);var _=w.current();if(r.propertyIsEnumerable(_))return"keyword";if(i.propertyIsEnumerable(_))return"variable-2";if(a.propertyIsEnumerable(_))return"string-2";var E=w.next();if(E=="@")return w.eatWhile(/[\w\\\-]/),c("meta",w.current());if(E=="/"&&w.eat("*"))return x.tokenize=v,v(w,x);if(E=="<"&&w.eat("!"))return x.tokenize=h,h(w,x);if(E=="=")c(null,"compare");else return(E=="~"||E=="|")&&w.eat("=")?c(null,"compare"):E=='"'||E=="'"?(x.tokenize=g(E),x.tokenize(w,x)):E=="#"?(w.skipToEnd(),c("comment","comment")):E=="!"?(w.match(/^\s*\w*/),c("keyword","important")):/\d/.test(E)?(w.eatWhile(/[\w.%]/),c("number","unit")):/[,.+>*\/]/.test(E)?c(null,"select-op"):/[;{}:\[\]]/.test(E)?c(null,E):(w.eatWhile(/[\w\\\-]/),c("variable","variable"))}function v(w,x){for(var _=!1,E;(E=w.next())!=null;){if(_&&E=="/"){x.tokenize=d;break}_=E=="*"}return c("comment","comment")}function h(w,x){for(var _=0,E;(E=w.next())!=null;){if(_>=2&&E==">"){x.tokenize=d;break}_=E=="-"?_+1:0}return c("comment","comment")}function g(w){return function(x,_){for(var E=!1,M;(M=x.next())!=null&&!(M==w&&!E);)E=!E&&M=="\\";return E||(_.tokenize=d),c("string","string")}}return{startState:function(w){return{tokenize:d,baseIndent:w||0,stack:[]}},token:function(w,x){if(w.eatSpace())return null;l=null;var _=x.tokenize(w,x),E=x.stack[x.stack.length-1];return l=="hash"&&E=="rule"?_="atom":_=="variable"&&(E=="rule"?_="number":(!E||E=="@media{")&&(_="tag")),E=="rule"&&/^[\{\};]$/.test(l)&&x.stack.pop(),l=="{"?E=="@media"?x.stack[x.stack.length-1]="@media{":x.stack.push("{"):l=="}"?x.stack.pop():l=="@media"?x.stack.push("@media"):E=="{"&&l!="comment"&&x.stack.push("rule"),_},indent:function(w,x){var _=w.stack.length;return/^\}/.test(x)&&(_-=w.stack[w.stack.length-1]=="rule"?2:1),w.baseIndent+_*o},electricChars:"}"}}),t.defineMIME("text/x-nginx-conf","nginx")})})();(function(b,u){(function(t){t(bn.exports)})(function(t){t.defineMode("pascal",function(){function n(d){for(var v={},h=d.split(" "),g=0;g<h.length;++g)v[h[g]]=!0;return v}var e=n("absolute and array asm begin case const constructor destructor div do downto else end file for function goto if implementation in inherited inline interface label mod nil not object of operator or packed procedure program record reintroduce repeat self set shl shr string then to type unit until uses var while with xor as class dispinterface except exports finalization finally initialization inline is library on out packed property raise resourcestring threadvar try absolute abstract alias assembler bitpacked break cdecl continue cppdecl cvar default deprecated dynamic enumerator experimental export external far far16 forward generic helper implements index interrupt iocheck local message name near nodefault noreturn nostackframe oldfpccall otherwise overload override pascal platform private protected public published read register reintroduce result safecall saveregisters softfloat specialize static stdcall stored strict unaligned unimplemented varargs virtual write"),r={null:!0},i=/[+\-*&%=<>!?|\/]/;function a(d,v){var h=d.next();if(h=="#"&&v.startOfLine)return d.skipToEnd(),"meta";if(h=='"'||h=="'")return v.tokenize=o(h),v.tokenize(d,v);if(h=="("&&d.eat("*"))return v.tokenize=l,l(d,v);if(h=="{")return v.tokenize=c,c(d,v);if(/[\[\]\(\),;\:\.]/.test(h))return null;if(/\d/.test(h))return d.eatWhile(/[\w\.]/),"number";if(h=="/"&&d.eat("/"))return d.skipToEnd(),"comment";if(i.test(h))return d.eatWhile(i),"operator";d.eatWhile(/[\w\$_]/);var g=d.current();return e.propertyIsEnumerable(g)?"keyword":r.propertyIsEnumerable(g)?"atom":"variable"}function o(d){return function(v,h){for(var g=!1,w,x=!1;(w=v.next())!=null;){if(w==d&&!g){x=!0;break}g=!g&&w=="\\"}return(x||!g)&&(h.tokenize=null),"string"}}function l(d,v){for(var h=!1,g;g=d.next();){if(g==")"&&h){v.tokenize=null;break}h=g=="*"}return"comment"}function c(d,v){for(var h;h=d.next();)if(h=="}"){v.tokenize=null;break}return"comment"}return{startState:function(){return{tokenize:null}},token:function(d,v){if(d.eatSpace())return null;var h=(v.tokenize||a)(d,v);return h=="comment"||h=="meta",h},electricChars:"{}"}}),t.defineMIME("text/x-pascal","pascal")})})();(function(b,u){(function(t){t(bn.exports)})(function(t){t.defineMode("perl",function(){var a={"->":4,"++":4,"--":4,"**":4,"=~":4,"!~":4,"*":4,"/":4,"%":4,x:4,"+":4,"-":4,".":4,"<<":4,">>":4,"<":4,">":4,"<=":4,">=":4,lt:4,gt:4,le:4,ge:4,"==":4,"!=":4,"<=>":4,eq:4,ne:4,cmp:4,"~~":4,"&":4,"|":4,"^":4,"&&":4,"||":4,"//":4,"..":4,"...":4,"?":4,":":4,"=":4,"+=":4,"-=":4,"*=":4,",":4,"=>":4,"::":4,not:4,and:4,or:4,xor:4,BEGIN:[5,1],END:[5,1],PRINT:[5,1],PRINTF:[5,1],GETC:[5,1],READ:[5,1],READLINE:[5,1],DESTROY:[5,1],TIE:[5,1],TIEHANDLE:[5,1],UNTIE:[5,1],STDIN:5,STDIN_TOP:5,STDOUT:5,STDOUT_TOP:5,STDERR:5,STDERR_TOP:5,$ARG:5,$_:5,"@ARG":5,"@_":5,$LIST_SEPARATOR:5,'$"':5,$PROCESS_ID:5,$PID:5,$$:5,$REAL_GROUP_ID:5,$GID:5,"$(":5,$EFFECTIVE_GROUP_ID:5,$EGID:5,"$)":5,$PROGRAM_NAME:5,$0:5,$SUBSCRIPT_SEPARATOR:5,$SUBSEP:5,"$;":5,$REAL_USER_ID:5,$UID:5,"$<":5,$EFFECTIVE_USER_ID:5,$EUID:5,"$>":5,$a:5,$b:5,$COMPILING:5,"$^C":5,$DEBUGGING:5,"$^D":5,"${^ENCODING}":5,$ENV:5,"%ENV":5,$SYSTEM_FD_MAX:5,"$^F":5,"@F":5,"${^GLOBAL_PHASE}":5,"$^H":5,"%^H":5,"@INC":5,"%INC":5,$INPLACE_EDIT:5,"$^I":5,"$^M":5,$OSNAME:5,"$^O":5,"${^OPEN}":5,$PERLDB:5,"$^P":5,$SIG:5,"%SIG":5,$BASETIME:5,"$^T":5,"${^TAINT}":5,"${^UNICODE}":5,"${^UTF8CACHE}":5,"${^UTF8LOCALE}":5,$PERL_VERSION:5,"$^V":5,"${^WIN32_SLOPPY_STAT}":5,$EXECUTABLE_NAME:5,"$^X":5,$1:5,$MATCH:5,"$&":5,"${^MATCH}":5,$PREMATCH:5,"$`":5,"${^PREMATCH}":5,$POSTMATCH:5,"$'":5,"${^POSTMATCH}":5,$LAST_PAREN_MATCH:5,"$+":5,$LAST_SUBMATCH_RESULT:5,"$^N":5,"@LAST_MATCH_END":5,"@+":5,"%LAST_PAREN_MATCH":5,"%+":5,"@LAST_MATCH_START":5,"@-":5,"%LAST_MATCH_START":5,"%-":5,$LAST_REGEXP_CODE_RESULT:5,"$^R":5,"${^RE_DEBUG_FLAGS}":5,"${^RE_TRIE_MAXBUF}":5,$ARGV:5,"@ARGV":5,ARGV:5,ARGVOUT:5,$OUTPUT_FIELD_SEPARATOR:5,$OFS:5,"$,":5,$INPUT_LINE_NUMBER:5,$NR:5,"$.":5,$INPUT_RECORD_SEPARATOR:5,$RS:5,"$/":5,$OUTPUT_RECORD_SEPARATOR:5,$ORS:5,"$\\":5,$OUTPUT_AUTOFLUSH:5,"$|":5,$ACCUMULATOR:5,"$^A":5,$FORMAT_FORMFEED:5,"$^L":5,$FORMAT_PAGE_NUMBER:5,"$%":5,$FORMAT_LINES_LEFT:5,"$-":5,$FORMAT_LINE_BREAK_CHARACTERS:5,"$:":5,$FORMAT_LINES_PER_PAGE:5,"$=":5,$FORMAT_TOP_NAME:5,"$^":5,$FORMAT_NAME:5,"$~":5,"${^CHILD_ERROR_NATIVE}":5,$EXTENDED_OS_ERROR:5,"$^E":5,$EXCEPTIONS_BEING_CAUGHT:5,"$^S":5,$WARNING:5,"$^W":5,"${^WARNING_BITS}":5,$OS_ERROR:5,$ERRNO:5,"$!":5,"%OS_ERROR":5,"%ERRNO":5,"%!":5,$CHILD_ERROR:5,"$?":5,$EVAL_ERROR:5,"$@":5,$OFMT:5,"$#":5,"$*":5,$ARRAY_BASE:5,"$[":5,$OLD_PERL_VERSION:5,"$]":5,if:[1,1],elsif:[1,1],else:[1,1],while:[1,1],unless:[1,1],for:[1,1],foreach:[1,1],abs:1,accept:1,alarm:1,atan2:1,bind:1,binmode:1,bless:1,bootstrap:1,break:1,caller:1,chdir:1,chmod:1,chomp:1,chop:1,chown:1,chr:1,chroot:1,close:1,closedir:1,connect:1,continue:[1,1],cos:1,crypt:1,dbmclose:1,dbmopen:1,default:1,defined:1,delete:1,die:1,do:1,dump:1,each:1,endgrent:1,endhostent:1,endnetent:1,endprotoent:1,endpwent:1,endservent:1,eof:1,eval:1,exec:1,exists:1,exit:1,exp:1,fcntl:1,fileno:1,flock:1,fork:1,format:1,formline:1,getc:1,getgrent:1,getgrgid:1,getgrnam:1,gethostbyaddr:1,gethostbyname:1,gethostent:1,getlogin:1,getnetbyaddr:1,getnetbyname:1,getnetent:1,getpeername:1,getpgrp:1,getppid:1,getpriority:1,getprotobyname:1,getprotobynumber:1,getprotoent:1,getpwent:1,getpwnam:1,getpwuid:1,getservbyname:1,getservbyport:1,getservent:1,getsockname:1,getsockopt:1,given:1,glob:1,gmtime:1,goto:1,grep:1,hex:1,import:1,index:1,int:1,ioctl:1,join:1,keys:1,kill:1,last:1,lc:1,lcfirst:1,length:1,link:1,listen:1,local:2,localtime:1,lock:1,log:1,lstat:1,m:null,map:1,mkdir:1,msgctl:1,msgget:1,msgrcv:1,msgsnd:1,my:2,new:1,next:1,no:1,oct:1,open:1,opendir:1,ord:1,our:2,pack:1,package:1,pipe:1,pop:1,pos:1,print:1,printf:1,prototype:1,push:1,q:null,qq:null,qr:null,quotemeta:null,qw:null,qx:null,rand:1,read:1,readdir:1,readline:1,readlink:1,readpipe:1,recv:1,redo:1,ref:1,rename:1,require:1,reset:1,return:1,reverse:1,rewinddir:1,rindex:1,rmdir:1,s:null,say:1,scalar:1,seek:1,seekdir:1,select:1,semctl:1,semget:1,semop:1,send:1,setgrent:1,sethostent:1,setnetent:1,setpgrp:1,setpriority:1,setprotoent:1,setpwent:1,setservent:1,setsockopt:1,shift:1,shmctl:1,shmget:1,shmread:1,shmwrite:1,shutdown:1,sin:1,sleep:1,socket:1,socketpair:1,sort:1,splice:1,split:1,sprintf:1,sqrt:1,srand:1,stat:1,state:1,study:1,sub:1,substr:1,symlink:1,syscall:1,sysopen:1,sysread:1,sysseek:1,system:1,syswrite:1,tell:1,telldir:1,tie:1,tied:1,time:1,times:1,tr:null,truncate:1,uc:1,ucfirst:1,umask:1,undef:1,unlink:1,unpack:1,unshift:1,untie:1,use:1,utime:1,values:1,vec:1,wait:1,waitpid:1,wantarray:1,warn:1,when:1,write:1,y:null},o="string-2",l=/[goseximacplud]/;function c(h,g,w,x,_){return g.chain=null,g.style=null,g.tail=null,g.tokenize=function(E,M){for(var T=!1,S,D=0;S=E.next();){if(S===w[D]&&!T)return w[++D]!==void 0?(M.chain=w[D],M.style=x,M.tail=_):_&&E.eatWhile(_),M.tokenize=v,x;T=!T&&S=="\\"}return x},g.tokenize(h,g)}function d(h,g,w){return g.tokenize=function(x,_){return x.string==w&&(_.tokenize=v),x.skipToEnd(),"string"},g.tokenize(h,g)}function v(h,g){if(h.eatSpace())return null;if(g.chain)return c(h,g,g.chain,g.style,g.tail);if(h.match(/^(\-?((\d[\d_]*)?\.\d+(e[+-]?\d+)?|\d+\.\d*)|0x[\da-fA-F_]+|0b[01_]+|\d[\d_]*(e[+-]?\d+)?)/))return"number";if(h.match(/^<<(?=[_a-zA-Z])/))return h.eatWhile(/\w/),d(h,g,h.current().substr(2));if(h.sol()&&h.match(/^\=item(?!\w)/))return d(h,g,"=cut");var w=h.next();if(w=='"'||w=="'"){if(e(h,3)=="<<"+w){var x=h.pos;h.eatWhile(/\w/);var _=h.current().substr(1);if(_&&h.eat(w))return d(h,g,_);h.pos=x}return c(h,g,[w],"string")}if(w=="q"){var E=n(h,-2);if(!(E&&/\w/.test(E))){if(E=n(h,0),E=="x"){if(E=n(h,1),E=="(")return i(h,2),c(h,g,[")"],o,l);if(E=="[")return i(h,2),c(h,g,["]"],o,l);if(E=="{")return i(h,2),c(h,g,["}"],o,l);if(E=="<")return i(h,2),c(h,g,[">"],o,l);if(/[\^'"!~\/]/.test(E))return i(h,1),c(h,g,[h.eat(E)],o,l)}else if(E=="q"){if(E=n(h,1),E=="(")return i(h,2),c(h,g,[")"],"string");if(E=="[")return i(h,2),c(h,g,["]"],"string");if(E=="{")return i(h,2),c(h,g,["}"],"string");if(E=="<")return i(h,2),c(h,g,[">"],"string");if(/[\^'"!~\/]/.test(E))return i(h,1),c(h,g,[h.eat(E)],"string")}else if(E=="w"){if(E=n(h,1),E=="(")return i(h,2),c(h,g,[")"],"bracket");if(E=="[")return i(h,2),c(h,g,["]"],"bracket");if(E=="{")return i(h,2),c(h,g,["}"],"bracket");if(E=="<")return i(h,2),c(h,g,[">"],"bracket");if(/[\^'"!~\/]/.test(E))return i(h,1),c(h,g,[h.eat(E)],"bracket")}else if(E=="r"){if(E=n(h,1),E=="(")return i(h,2),c(h,g,[")"],o,l);if(E=="[")return i(h,2),c(h,g,["]"],o,l);if(E=="{")return i(h,2),c(h,g,["}"],o,l);if(E=="<")return i(h,2),c(h,g,[">"],o,l);if(/[\^'"!~\/]/.test(E))return i(h,1),c(h,g,[h.eat(E)],o,l)}else if(/[\^'"!~\/(\[{<]/.test(E)){if(E=="(")return i(h,1),c(h,g,[")"],"string");if(E=="[")return i(h,1),c(h,g,["]"],"string");if(E=="{")return i(h,1),c(h,g,["}"],"string");if(E=="<")return i(h,1),c(h,g,[">"],"string");if(/[\^'"!~\/]/.test(E))return c(h,g,[h.eat(E)],"string")}}}if(w=="m"){var E=n(h,-2);if(!(E&&/\w/.test(E))&&(E=h.eat(/[(\[{<\^'"!~\/]/),E)){if(/[\^'"!~\/]/.test(E))return c(h,g,[E],o,l);if(E=="(")return c(h,g,[")"],o,l);if(E=="[")return c(h,g,["]"],o,l);if(E=="{")return c(h,g,["}"],o,l);if(E=="<")return c(h,g,[">"],o,l)}}if(w=="s"){var E=/[\/>\]})\w]/.test(n(h,-2));if(!E&&(E=h.eat(/[(\[{<\^'"!~\/]/),E))return E=="["?c(h,g,["]","]"],o,l):E=="{"?c(h,g,["}","}"],o,l):E=="<"?c(h,g,[">",">"],o,l):E=="("?c(h,g,[")",")"],o,l):c(h,g,[E,E],o,l)}if(w=="y"){var E=/[\/>\]})\w]/.test(n(h,-2));if(!E&&(E=h.eat(/[(\[{<\^'"!~\/]/),E))return E=="["?c(h,g,["]","]"],o,l):E=="{"?c(h,g,["}","}"],o,l):E=="<"?c(h,g,[">",">"],o,l):E=="("?c(h,g,[")",")"],o,l):c(h,g,[E,E],o,l)}if(w=="t"){var E=/[\/>\]})\w]/.test(n(h,-2));if(!E&&(E=h.eat("r"),E&&(E=h.eat(/[(\[{<\^'"!~\/]/),E)))return E=="["?c(h,g,["]","]"],o,l):E=="{"?c(h,g,["}","}"],o,l):E=="<"?c(h,g,[">",">"],o,l):E=="("?c(h,g,[")",")"],o,l):c(h,g,[E,E],o,l)}if(w=="`")return c(h,g,[w],"variable-2");if(w=="/")return/~\s*$/.test(e(h))?c(h,g,[w],o,l):"operator";if(w=="$"){var x=h.pos;if(h.eatWhile(/\d/)||h.eat("{")&&h.eatWhile(/\d/)&&h.eat("}"))return"variable-2";h.pos=x}if(/[$@%]/.test(w)){var x=h.pos;if(h.eat("^")&&h.eat(/[A-Z]/)||!/[@$%&]/.test(n(h,-2))&&h.eat(/[=|\\\-#?@;:&`~\^!\[\]*'"$+.,\/<>()]/)){var E=h.current();if(a[E])return"variable-2"}h.pos=x}if(/[$@%&]/.test(w)&&(h.eatWhile(/[\w$]/)||h.eat("{")&&h.eatWhile(/[\w$]/)&&h.eat("}"))){var E=h.current();return a[E]?"variable-2":"variable"}if(w=="#"&&n(h,-2)!="$")return h.skipToEnd(),"comment";if(/[:+\-\^*$&%@=<>!?|\/~\.]/.test(w)){var x=h.pos;if(h.eatWhile(/[:+\-\^*$&%@=<>!?|\/~\.]/),a[h.current()])return"operator";h.pos=x}if(w=="_"&&h.pos==1){if(r(h,6)=="_END__")return c(h,g,["\0"],"comment");if(r(h,7)=="_DATA__")return c(h,g,["\0"],"variable-2");if(r(h,7)=="_C__")return c(h,g,["\0"],"string")}if(/\w/.test(w)){var x=h.pos;if(n(h,-2)=="{"&&(n(h,0)=="}"||h.eatWhile(/\w/)&&n(h,0)=="}"))return"string";h.pos=x}if(/[A-Z]/.test(w)){var M=n(h,-2),x=h.pos;if(h.eatWhile(/[A-Z_]/),/[\da-z]/.test(n(h,0)))h.pos=x;else{var E=a[h.current()];return E?(E[1]&&(E=E[0]),M!=":"?E==1?"keyword":E==2?"def":E==3?"atom":E==4?"operator":E==5?"variable-2":"meta":"meta"):"meta"}}if(/[a-zA-Z_]/.test(w)){var M=n(h,-2);h.eatWhile(/\w/);var E=a[h.current()];return E?(E[1]&&(E=E[0]),M!=":"?E==1?"keyword":E==2?"def":E==3?"atom":E==4?"operator":E==5?"variable-2":"meta":"meta"):"meta"}return null}return{startState:function(){return{tokenize:v,chain:null,style:null,tail:null}},token:function(h,g){return(g.tokenize||v)(h,g)},lineComment:"#"}}),t.registerHelper("wordChars","perl",/[\w$]/),t.defineMIME("text/x-perl","perl");function n(a,o){return a.string.charAt(a.pos+(o||0))}function e(a,o){if(o){var l=a.pos-o;return a.string.substr(l>=0?l:0,o)}else return a.string.substr(0,a.pos-1)}function r(a,o){var l=a.string.length,c=l-a.pos+1;return a.string.substr(a.pos,o&&o<l?o:c)}function i(a,o){var l=a.pos+o,c;l<=0?a.pos=0:l>=(c=a.string.length-1)?a.pos=c:a.pos=l}})})();(function(b,u){(function(t){t(bn.exports,__.exports,jm.exports)})(function(t){function n(d){for(var v={},h=d.split(" "),g=0;g<h.length;++g)v[h[g]]=!0;return v}function e(d,v,h){return d.length==0?r(v):function(g,w){for(var x=d[0],_=0;_<x.length;_++)if(g.match(x[_][0]))return w.tokenize=e(d.slice(1),v),x[_][1];return w.tokenize=r(v,h),"string"}}function r(d,v){return function(h,g){return i(h,g,d,v)}}function i(d,v,h,g){if(g!==!1&&d.match("${",!1)||d.match("{$",!1))return v.tokenize=null,"string";if(g!==!1&&d.match(/^\$[a-zA-Z_][a-zA-Z0-9_]*/))return d.match("[",!1)&&(v.tokenize=e([[["[",null]],[[/\d[\w\.]*/,"number"],[/\$[a-zA-Z_][a-zA-Z0-9_]*/,"variable-2"],[/[\w\$]+/,"variable"]],[["]",null]]],h,g)),d.match(/^->\w/,!1)&&(v.tokenize=e([[["->",null]],[[/[\w]+/,"variable"]]],h,g)),"variable-2";for(var w=!1;!d.eol()&&(w||g===!1||!d.match("{$",!1)&&!d.match(/^(\$[a-zA-Z_][a-zA-Z0-9_]*|\$\{)/,!1));){if(!w&&d.match(h)){v.tokenize=null,v.tokStack.pop(),v.tokStack.pop();break}w=d.next()=="\\"&&!w}return"string"}var a="abstract and array as break case catch class clone const continue declare default do else elseif enddeclare endfor endforeach endif endswitch endwhile enum extends final for foreach function global goto if implements interface instanceof namespace new or private protected public static switch throw trait try use var while xor die echo empty exit eval include include_once isset list require require_once return print unset __halt_compiler self static parent yield insteadof finally readonly match",o="true false null TRUE FALSE NULL __CLASS__ __DIR__ __FILE__ __LINE__ __METHOD__ __FUNCTION__ __NAMESPACE__ __TRAIT__",l="func_num_args func_get_arg func_get_args strlen strcmp strncmp strcasecmp strncasecmp each error_reporting define defined trigger_error user_error set_error_handler restore_error_handler get_declared_classes get_loaded_extensions extension_loaded get_extension_funcs debug_backtrace constant bin2hex hex2bin sleep usleep time mktime gmmktime strftime gmstrftime strtotime date gmdate getdate localtime checkdate flush wordwrap htmlspecialchars htmlentities html_entity_decode md5 md5_file crc32 getimagesize image_type_to_mime_type phpinfo phpversion phpcredits strnatcmp strnatcasecmp substr_count strspn strcspn strtok strtoupper strtolower strpos strrpos strrev hebrev hebrevc nl2br basename dirname pathinfo stripslashes stripcslashes strstr stristr strrchr str_shuffle str_word_count strcoll substr substr_replace quotemeta ucfirst ucwords strtr addslashes addcslashes rtrim str_replace str_repeat count_chars chunk_split trim ltrim strip_tags similar_text explode implode setlocale localeconv parse_str str_pad chop strchr sprintf printf vprintf vsprintf sscanf fscanf parse_url urlencode urldecode rawurlencode rawurldecode readlink linkinfo link unlink exec system escapeshellcmd escapeshellarg passthru shell_exec proc_open proc_close rand srand getrandmax mt_rand mt_srand mt_getrandmax base64_decode base64_encode abs ceil floor round is_finite is_nan is_infinite bindec hexdec octdec decbin decoct dechex base_convert number_format fmod ip2long long2ip getenv putenv getopt microtime gettimeofday getrusage uniqid quoted_printable_decode set_time_limit get_cfg_var magic_quotes_runtime set_magic_quotes_runtime get_magic_quotes_gpc get_magic_quotes_runtime import_request_variables error_log serialize unserialize memory_get_usage memory_get_peak_usage var_dump var_export debug_zval_dump print_r highlight_file show_source highlight_string ini_get ini_get_all ini_set ini_alter ini_restore get_include_path set_include_path restore_include_path setcookie header headers_sent connection_aborted connection_status ignore_user_abort parse_ini_file is_uploaded_file move_uploaded_file intval floatval doubleval strval gettype settype is_null is_resource is_bool is_long is_float is_int is_integer is_double is_real is_numeric is_string is_array is_object is_scalar ereg ereg_replace eregi eregi_replace split spliti join sql_regcase dl pclose popen readfile rewind rmdir umask fclose feof fgetc fgets fgetss fread fopen fpassthru ftruncate fstat fseek ftell fflush fwrite fputs mkdir rename copy tempnam tmpfile file file_get_contents file_put_contents stream_select stream_context_create stream_context_set_params stream_context_set_option stream_context_get_options stream_filter_prepend stream_filter_append fgetcsv flock get_meta_tags stream_set_write_buffer set_file_buffer set_socket_blocking stream_set_blocking socket_set_blocking stream_get_meta_data stream_register_wrapper stream_wrapper_register stream_set_timeout socket_set_timeout socket_get_status realpath fnmatch fsockopen pfsockopen pack unpack get_browser crypt opendir closedir chdir getcwd rewinddir readdir dir glob fileatime filectime filegroup fileinode filemtime fileowner fileperms filesize filetype file_exists is_writable is_writeable is_readable is_executable is_file is_dir is_link stat lstat chown touch clearstatcache mail ob_start ob_flush ob_clean ob_end_flush ob_end_clean ob_get_flush ob_get_clean ob_get_length ob_get_level ob_get_status ob_get_contents ob_implicit_flush ob_list_handlers ksort krsort natsort natcasesort asort arsort sort rsort usort uasort uksort shuffle array_walk count end prev next reset current key min max in_array array_search extract compact array_fill range array_multisort array_push array_pop array_shift array_unshift array_splice array_slice array_merge array_merge_recursive array_keys array_values array_count_values array_reverse array_reduce array_pad array_flip array_change_key_case array_rand array_unique array_intersect array_intersect_assoc array_diff array_diff_assoc array_sum array_filter array_map array_chunk array_key_exists array_intersect_key array_combine array_column pos sizeof key_exists assert assert_options version_compare ftok str_rot13 aggregate session_name session_module_name session_save_path session_id session_regenerate_id session_decode session_register session_unregister session_is_registered session_encode session_start session_destroy session_unset session_set_save_handler session_cache_limiter session_cache_expire session_set_cookie_params session_get_cookie_params session_write_close preg_match preg_match_all preg_replace preg_replace_callback preg_split preg_quote preg_grep overload ctype_alnum ctype_alpha ctype_cntrl ctype_digit ctype_lower ctype_graph ctype_print ctype_punct ctype_space ctype_upper ctype_xdigit virtual apache_request_headers apache_note apache_lookup_uri apache_child_terminate apache_setenv apache_response_headers apache_get_version getallheaders mysql_connect mysql_pconnect mysql_close mysql_select_db mysql_create_db mysql_drop_db mysql_query mysql_unbuffered_query mysql_db_query mysql_list_dbs mysql_list_tables mysql_list_fields mysql_list_processes mysql_error mysql_errno mysql_affected_rows mysql_insert_id mysql_result mysql_num_rows mysql_num_fields mysql_fetch_row mysql_fetch_array mysql_fetch_assoc mysql_fetch_object mysql_data_seek mysql_fetch_lengths mysql_fetch_field mysql_field_seek mysql_free_result mysql_field_name mysql_field_table mysql_field_len mysql_field_type mysql_field_flags mysql_escape_string mysql_real_escape_string mysql_stat mysql_thread_id mysql_client_encoding mysql_get_client_info mysql_get_host_info mysql_get_proto_info mysql_get_server_info mysql_info mysql mysql_fieldname mysql_fieldtable mysql_fieldlen mysql_fieldtype mysql_fieldflags mysql_selectdb mysql_createdb mysql_dropdb mysql_freeresult mysql_numfields mysql_numrows mysql_listdbs mysql_listtables mysql_listfields mysql_db_name mysql_dbname mysql_tablename mysql_table_name pg_connect pg_pconnect pg_close pg_connection_status pg_connection_busy pg_connection_reset pg_host pg_dbname pg_port pg_tty pg_options pg_ping pg_query pg_send_query pg_cancel_query pg_fetch_result pg_fetch_row pg_fetch_assoc pg_fetch_array pg_fetch_object pg_fetch_all pg_affected_rows pg_get_result pg_result_seek pg_result_status pg_free_result pg_last_oid pg_num_rows pg_num_fields pg_field_name pg_field_num pg_field_size pg_field_type pg_field_prtlen pg_field_is_null pg_get_notify pg_get_pid pg_result_error pg_last_error pg_last_notice pg_put_line pg_end_copy pg_copy_to pg_copy_from pg_trace pg_untrace pg_lo_create pg_lo_unlink pg_lo_open pg_lo_close pg_lo_read pg_lo_write pg_lo_read_all pg_lo_import pg_lo_export pg_lo_seek pg_lo_tell pg_escape_string pg_escape_bytea pg_unescape_bytea pg_client_encoding pg_set_client_encoding pg_meta_data pg_convert pg_insert pg_update pg_delete pg_select pg_exec pg_getlastoid pg_cmdtuples pg_errormessage pg_numrows pg_numfields pg_fieldname pg_fieldsize pg_fieldtype pg_fieldnum pg_fieldprtlen pg_fieldisnull pg_freeresult pg_result pg_loreadall pg_locreate pg_lounlink pg_loopen pg_loclose pg_loread pg_lowrite pg_loimport pg_loexport http_response_code get_declared_traits getimagesizefromstring socket_import_stream stream_set_chunk_size trait_exists header_register_callback class_uses session_status session_register_shutdown echo print global static exit array empty eval isset unset die include require include_once require_once json_decode json_encode json_last_error json_last_error_msg curl_close curl_copy_handle curl_errno curl_error curl_escape curl_exec curl_file_create curl_getinfo curl_init curl_multi_add_handle curl_multi_close curl_multi_exec curl_multi_getcontent curl_multi_info_read curl_multi_init curl_multi_remove_handle curl_multi_select curl_multi_setopt curl_multi_strerror curl_pause curl_reset curl_setopt_array curl_setopt curl_share_close curl_share_init curl_share_setopt curl_strerror curl_unescape curl_version mysqli_affected_rows mysqli_autocommit mysqli_change_user mysqli_character_set_name mysqli_close mysqli_commit mysqli_connect_errno mysqli_connect_error mysqli_connect mysqli_data_seek mysqli_debug mysqli_dump_debug_info mysqli_errno mysqli_error_list mysqli_error mysqli_fetch_all mysqli_fetch_array mysqli_fetch_assoc mysqli_fetch_field_direct mysqli_fetch_field mysqli_fetch_fields mysqli_fetch_lengths mysqli_fetch_object mysqli_fetch_row mysqli_field_count mysqli_field_seek mysqli_field_tell mysqli_free_result mysqli_get_charset mysqli_get_client_info mysqli_get_client_stats mysqli_get_client_version mysqli_get_connection_stats mysqli_get_host_info mysqli_get_proto_info mysqli_get_server_info mysqli_get_server_version mysqli_info mysqli_init mysqli_insert_id mysqli_kill mysqli_more_results mysqli_multi_query mysqli_next_result mysqli_num_fields mysqli_num_rows mysqli_options mysqli_ping mysqli_prepare mysqli_query mysqli_real_connect mysqli_real_escape_string mysqli_real_query mysqli_reap_async_query mysqli_refresh mysqli_rollback mysqli_select_db mysqli_set_charset mysqli_set_local_infile_default mysqli_set_local_infile_handler mysqli_sqlstate mysqli_ssl_set mysqli_stat mysqli_stmt_init mysqli_store_result mysqli_thread_id mysqli_thread_safe mysqli_use_result mysqli_warning_count";t.registerHelper("hintWords","php",[a,o,l].join(" ").split(" ")),t.registerHelper("wordChars","php",/[\w$]/);var c={name:"clike",helperType:"php",keywords:n(a),blockKeywords:n("catch do else elseif for foreach if switch try while finally"),defKeywords:n("class enum function interface namespace trait"),atoms:n(o),builtin:n(l),multiLineStrings:!0,hooks:{$:function(d){return d.eatWhile(/[\w\$_]/),"variable-2"},"<":function(d,v){var h;if(h=d.match(/^<<\s*/)){var g=d.eat(/['"]/);d.eatWhile(/[\w\.]/);var w=d.current().slice(h[0].length+(g?2:1));if(g&&d.eat(g),w)return(v.tokStack||(v.tokStack=[])).push(w,0),v.tokenize=r(w,g!="'"),"string"}return!1},"#":function(d){for(;!d.eol()&&!d.match("?>",!1);)d.next();return"comment"},"/":function(d){if(d.eat("/")){for(;!d.eol()&&!d.match("?>",!1);)d.next();return"comment"}return!1},'"':function(d,v){return(v.tokStack||(v.tokStack=[])).push('"',0),v.tokenize=r('"'),"string"},"{":function(d,v){return v.tokStack&&v.tokStack.length&&v.tokStack[v.tokStack.length-1]++,!1},"}":function(d,v){return v.tokStack&&v.tokStack.length>0&&!--v.tokStack[v.tokStack.length-1]&&(v.tokenize=r(v.tokStack[v.tokStack.length-2])),!1}}};t.defineMode("php",function(d,v){var h=t.getMode(d,v&&v.htmlMode||"text/html"),g=t.getMode(d,c);function w(x,_){var E=_.curMode==g;if(x.sol()&&_.pending&&_.pending!='"'&&_.pending!="'"&&(_.pending=null),E)return E&&_.php.tokenize==null&&x.match("?>")?(_.curMode=h,_.curState=_.html,_.php.context.prev||(_.php=null),"meta"):g.token(x,_.curState);if(x.match(/^<\?\w*/))return _.curMode=g,_.php||(_.php=t.startState(g,h.indent(_.html,"",""))),_.curState=_.php,"meta";if(_.pending=='"'||_.pending=="'"){for(;!x.eol()&&x.next()!=_.pending;);var M="string"}else if(_.pending&&x.pos<_.pending.end){x.pos=_.pending.end;var M=_.pending.style}else var M=h.token(x,_.curState);_.pending&&(_.pending=null);var T=x.current(),S=T.search(/<\?/),D;return S!=-1&&(M=="string"&&(D=T.match(/[\'\"]$/))&&!/\?>/.test(T)?_.pending=D[0]:_.pending={end:x.pos,style:M},x.backUp(T.length-S)),M}return{startState:function(){var x=t.startState(h),_=v.startOpen?t.startState(g):null;return{html:x,php:_,curMode:v.startOpen?g:h,curState:v.startOpen?_:x,pending:null}},copyState:function(x){var _=x.html,E=t.copyState(h,_),M=x.php,T=M&&t.copyState(g,M),S;return x.curMode==h?S=E:S=T,{html:E,php:T,curMode:x.curMode,curState:S,pending:x.pending}},token:w,indent:function(x,_,E){return x.curMode!=g&&/^\s*<\//.test(_)||x.curMode==g&&/^\?>/.test(_)?h.indent(x.html,_,E):x.curMode.indent(x.curState,_,E)},blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",innerMode:function(x){return{state:x.curState,mode:x.curMode}}}},"htmlmixed","clike"),t.defineMIME("application/x-httpd-php","php"),t.defineMIME("application/x-httpd-php-open",{name:"php",startOpen:!0}),t.defineMIME("text/x-php",c)})})();(function(b,u){(function(t){t(bn.exports)})(function(t){t.defineMode("powershell",function(){function n(z,O){O=O||{};for(var Q=O.prefix!==void 0?O.prefix:"^",ie=O.suffix!==void 0?O.suffix:"\\b",L=0;L<z.length;L++)z[L]instanceof RegExp?z[L]=z[L].source:z[L]=z[L].replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");return new RegExp(Q+"("+z.join("|")+")"+ie,"i")}var e="(?=[^A-Za-z\\d\\-_]|$)",r=/[\w\-:]/,i=n([/begin|break|catch|continue|data|default|do|dynamicparam/,/else|elseif|end|exit|filter|finally|for|foreach|from|function|if|in/,/param|process|return|switch|throw|trap|try|until|where|while/],{suffix:e}),a=/[\[\]{},;`\\\.]|@[({]/,o=n(["f",/b?not/,/[ic]?split/,"join",/is(not)?/,"as",/[ic]?(eq|ne|[gl][te])/,/[ic]?(not)?(like|match|contains)/,/[ic]?replace/,/b?(and|or|xor)/],{prefix:"-"}),l=/[+\-*\/%]=|\+\+|--|\.\.|[+\-*&^%:=!|\/]|<(?!#)|(?!#)>/,c=n([o,l],{suffix:""}),d=/^((0x[\da-f]+)|((\d+\.\d+|\d\.|\.\d+|\d+)(e[\+\-]?\d+)?))[ld]?([kmgtp]b)?/i,v=/^[A-Za-z\_][A-Za-z\-\_\d]*\b/,h=/[A-Z]:|%|\?/i,g=n([/Add-(Computer|Content|History|Member|PSSnapin|Type)/,/Checkpoint-Computer/,/Clear-(Content|EventLog|History|Host|Item(Property)?|Variable)/,/Compare-Object/,/Complete-Transaction/,/Connect-PSSession/,/ConvertFrom-(Csv|Json|SecureString|StringData)/,/Convert-Path/,/ConvertTo-(Csv|Html|Json|SecureString|Xml)/,/Copy-Item(Property)?/,/Debug-Process/,/Disable-(ComputerRestore|PSBreakpoint|PSRemoting|PSSessionConfiguration)/,/Disconnect-PSSession/,/Enable-(ComputerRestore|PSBreakpoint|PSRemoting|PSSessionConfiguration)/,/(Enter|Exit)-PSSession/,/Export-(Alias|Clixml|Console|Counter|Csv|FormatData|ModuleMember|PSSession)/,/ForEach-Object/,/Format-(Custom|List|Table|Wide)/,new RegExp("Get-(Acl|Alias|AuthenticodeSignature|ChildItem|Command|ComputerRestorePoint|Content|ControlPanelItem|Counter|Credential|Culture|Date|Event|EventLog|EventSubscriber|ExecutionPolicy|FormatData|Help|History|Host|HotFix|Item|ItemProperty|Job|Location|Member|Module|PfxCertificate|Process|PSBreakpoint|PSCallStack|PSDrive|PSProvider|PSSession|PSSessionConfiguration|PSSnapin|Random|Service|TraceSource|Transaction|TypeData|UICulture|Unique|Variable|Verb|WinEvent|WmiObject)"),/Group-Object/,/Import-(Alias|Clixml|Counter|Csv|LocalizedData|Module|PSSession)/,/ImportSystemModules/,/Invoke-(Command|Expression|History|Item|RestMethod|WebRequest|WmiMethod)/,/Join-Path/,/Limit-EventLog/,/Measure-(Command|Object)/,/Move-Item(Property)?/,new RegExp("New-(Alias|Event|EventLog|Item(Property)?|Module|ModuleManifest|Object|PSDrive|PSSession|PSSessionConfigurationFile|PSSessionOption|PSTransportOption|Service|TimeSpan|Variable|WebServiceProxy|WinEvent)"),/Out-(Default|File|GridView|Host|Null|Printer|String)/,/Pause/,/(Pop|Push)-Location/,/Read-Host/,/Receive-(Job|PSSession)/,/Register-(EngineEvent|ObjectEvent|PSSessionConfiguration|WmiEvent)/,/Remove-(Computer|Event|EventLog|Item(Property)?|Job|Module|PSBreakpoint|PSDrive|PSSession|PSSnapin|TypeData|Variable|WmiObject)/,/Rename-(Computer|Item(Property)?)/,/Reset-ComputerMachinePassword/,/Resolve-Path/,/Restart-(Computer|Service)/,/Restore-Computer/,/Resume-(Job|Service)/,/Save-Help/,/Select-(Object|String|Xml)/,/Send-MailMessage/,new RegExp("Set-(Acl|Alias|AuthenticodeSignature|Content|Date|ExecutionPolicy|Item(Property)?|Location|PSBreakpoint|PSDebug|PSSessionConfiguration|Service|StrictMode|TraceSource|Variable|WmiInstance)"),/Show-(Command|ControlPanelItem|EventLog)/,/Sort-Object/,/Split-Path/,/Start-(Job|Process|Service|Sleep|Transaction|Transcript)/,/Stop-(Computer|Job|Process|Service|Transcript)/,/Suspend-(Job|Service)/,/TabExpansion2/,/Tee-Object/,/Test-(ComputerSecureChannel|Connection|ModuleManifest|Path|PSSessionConfigurationFile)/,/Trace-Command/,/Unblock-File/,/Undo-Transaction/,/Unregister-(Event|PSSessionConfiguration)/,/Update-(FormatData|Help|List|TypeData)/,/Use-Transaction/,/Wait-(Event|Job|Process)/,/Where-Object/,/Write-(Debug|Error|EventLog|Host|Output|Progress|Verbose|Warning)/,/cd|help|mkdir|more|oss|prompt/,/ac|asnp|cat|cd|chdir|clc|clear|clhy|cli|clp|cls|clv|cnsn|compare|copy|cp|cpi|cpp|cvpa|dbp|del|diff|dir|dnsn|ebp/,/echo|epal|epcsv|epsn|erase|etsn|exsn|fc|fl|foreach|ft|fw|gal|gbp|gc|gci|gcm|gcs|gdr|ghy|gi|gjb|gl|gm|gmo|gp|gps/,/group|gsn|gsnp|gsv|gu|gv|gwmi|h|history|icm|iex|ihy|ii|ipal|ipcsv|ipmo|ipsn|irm|ise|iwmi|iwr|kill|lp|ls|man|md/,/measure|mi|mount|move|mp|mv|nal|ndr|ni|nmo|npssc|nsn|nv|ogv|oh|popd|ps|pushd|pwd|r|rbp|rcjb|rcsn|rd|rdr|ren|ri/,/rjb|rm|rmdir|rmo|rni|rnp|rp|rsn|rsnp|rujb|rv|rvpa|rwmi|sajb|sal|saps|sasv|sbp|sc|select|set|shcm|si|sl|sleep|sls/,/sort|sp|spjb|spps|spsv|start|sujb|sv|swmi|tee|trcm|type|where|wjb|write/],{prefix:"",suffix:""}),w=n([/[$?^_]|Args|ConfirmPreference|ConsoleFileName|DebugPreference|Error|ErrorActionPreference|ErrorView|ExecutionContext/,/FormatEnumerationLimit|Home|Host|Input|MaximumAliasCount|MaximumDriveCount|MaximumErrorCount|MaximumFunctionCount/,/MaximumHistoryCount|MaximumVariableCount|MyInvocation|NestedPromptLevel|OutputEncoding|Pid|Profile|ProgressPreference/,/PSBoundParameters|PSCommandPath|PSCulture|PSDefaultParameterValues|PSEmailServer|PSHome|PSScriptRoot|PSSessionApplicationName/,/PSSessionConfigurationName|PSSessionOption|PSUICulture|PSVersionTable|Pwd|ShellId|StackTrace|VerbosePreference/,/WarningPreference|WhatIfPreference/,/Event|EventArgs|EventSubscriber|Sender/,/Matches|Ofs|ForEach|LastExitCode|PSCmdlet|PSItem|PSSenderInfo|This/,/true|false|null/],{prefix:"\\$",suffix:""}),x=n([h,g,w],{suffix:e}),_={keyword:i,number:d,operator:c,builtin:x,punctuation:a,identifier:v};function E(z,O){var Q=O.returnStack[O.returnStack.length-1];if(Q&&Q.shouldReturnFrom(O))return O.tokenize=Q.tokenize,O.returnStack.pop(),O.tokenize(z,O);if(z.eatSpace())return null;if(z.eat("("))return O.bracketNesting+=1,"punctuation";if(z.eat(")"))return O.bracketNesting-=1,"punctuation";for(var ie in _)if(z.match(_[ie]))return ie;var L=z.next();if(L==="'")return M(z,O);if(L==="$")return $(z,O);if(L==='"')return T(z,O);if(L==="<"&&z.eat("#"))return O.tokenize=B,B(z,O);if(L==="#")return z.skipToEnd(),"comment";if(L==="@"){var F=z.eat(/["']/);if(F&&z.eol())return O.tokenize=G,O.startQuote=F[0],G(z,O);if(z.eol())return"error";if(z.peek().match(/[({]/))return"punctuation";if(z.peek().match(r))return $(z,O)}return"error"}function M(z,O){for(var Q;(Q=z.peek())!=null;)if(z.next(),Q==="'"&&!z.eat("'"))return O.tokenize=E,"string";return"error"}function T(z,O){for(var Q;(Q=z.peek())!=null;){if(Q==="$")return O.tokenize=S,"string";if(z.next(),Q==="`"){z.next();continue}if(Q==='"'&&!z.eat('"'))return O.tokenize=E,"string"}return"error"}function S(z,O){return P(z,O,T)}function D(z,O){return O.tokenize=G,O.startQuote='"',G(z,O)}function I(z,O){return P(z,O,D)}function P(z,O,Q){if(z.match("$(")){var ie=O.bracketNesting;return O.returnStack.push({shouldReturnFrom:function(L){return L.bracketNesting===ie},tokenize:Q}),O.tokenize=E,O.bracketNesting+=1,"punctuation"}else return z.next(),O.returnStack.push({shouldReturnFrom:function(){return!0},tokenize:Q}),O.tokenize=$,O.tokenize(z,O)}function B(z,O){for(var Q=!1,ie;(ie=z.next())!=null;){if(Q&&ie==">"){O.tokenize=E;break}Q=ie==="#"}return"comment"}function $(z,O){var Q=z.peek();return z.eat("{")?(O.tokenize=q,q(z,O)):Q!=null&&Q.match(r)?(z.eatWhile(r),O.tokenize=E,"variable-2"):(O.tokenize=E,"error")}function q(z,O){for(var Q;(Q=z.next())!=null;)if(Q==="}"){O.tokenize=E;break}return"variable-2"}function G(z,O){var Q=O.startQuote;if(z.sol()&&z.match(new RegExp(Q+"@")))O.tokenize=E;else if(Q==='"')for(;!z.eol();){var ie=z.peek();if(ie==="$")return O.tokenize=I,"string";z.next(),ie==="`"&&z.next()}else z.skipToEnd();return"string"}var H={startState:function(){return{returnStack:[],bracketNesting:0,tokenize:E}},token:function(z,O){return O.tokenize(z,O)},blockCommentStart:"<#",blockCommentEnd:"#>",lineComment:"#",fold:"brace"};return H}),t.defineMIME("application/x-powershell","powershell")})})();(function(b,u){(function(t){t(bn.exports)})(function(t){function n(o){return new RegExp("^(("+o.join(")|(")+"))\\b","i")}var e=["package","message","import","syntax","required","optional","repeated","reserved","default","extensions","packed","bool","bytes","double","enum","float","string","int32","int64","uint32","uint64","sint32","sint64","fixed32","fixed64","sfixed32","sfixed64","option","service","rpc","returns"],r=n(e);t.registerHelper("hintWords","protobuf",e);var i=new RegExp("^[_A-Za-z\xA1-\uFFFF][_A-Za-z0-9\xA1-\uFFFF]*");function a(o){return o.eatSpace()?null:o.match("//")?(o.skipToEnd(),"comment"):o.match(/^[0-9\.+-]/,!1)&&(o.match(/^[+-]?0x[0-9a-fA-F]+/)||o.match(/^[+-]?\d*\.\d+([EeDd][+-]?\d+)?/)||o.match(/^[+-]?\d+([EeDd][+-]?\d+)?/))?"number":o.match(/^"([^"]|(""))*"/)||o.match(/^'([^']|(''))*'/)?"string":o.match(r)?"keyword":o.match(i)?"variable":(o.next(),null)}t.defineMode("protobuf",function(){return{token:a,fold:"brace"}}),t.defineMIME("text/x-protobuf","protobuf")})})();(function(b,u){(function(t){t(bn.exports)})(function(t){function n(l){return new RegExp("^(("+l.join(")|(")+"))\\b")}var e=n(["and","or","not","is"]),r=["as","assert","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","lambda","pass","raise","return","try","while","with","yield","in"],i=["abs","all","any","bin","bool","bytearray","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip","__import__","NotImplemented","Ellipsis","__debug__"];t.registerHelper("hintWords","python",r.concat(i));function a(l){return l.scopes[l.scopes.length-1]}t.defineMode("python",function(l,c){for(var d="error",v=c.delimiters||c.singleDelimiters||/^[\(\)\[\]\{\}@,:`=;\.\\]/,h=[c.singleOperators,c.doubleOperators,c.doubleDelimiters,c.tripleDelimiters,c.operators||/^([-+*/%\/&|^]=?|[<>=]+|\/\/=?|\*\*=?|!=|[~!@]|\.\.\.)/],g=0;g<h.length;g++)h[g]||h.splice(g--,1);var w=c.hangingIndent||l.indentUnit,x=r,_=i;c.extra_keywords!=null&&(x=x.concat(c.extra_keywords)),c.extra_builtins!=null&&(_=_.concat(c.extra_builtins));var E=!(c.version&&Number(c.version)<3);if(E){var M=c.identifiers||/^[_A-Za-z\u00A1-\uFFFF][_A-Za-z0-9\u00A1-\uFFFF]*/;x=x.concat(["nonlocal","False","True","None","async","await"]),_=_.concat(["ascii","bytes","exec","print"]);var T=new RegExp(`^(([rbuf]|(br)|(rb)|(fr)|(rf))?('{3}|"{3}|['"]))`,"i")}else{var M=c.identifiers||/^[_A-Za-z][_A-Za-z0-9]*/;x=x.concat(["exec","print"]),_=_.concat(["apply","basestring","buffer","cmp","coerce","execfile","file","intern","long","raw_input","reduce","reload","unichr","unicode","xrange","False","True","None"]);var T=new RegExp(`^(([rubf]|(ur)|(br))?('{3}|"{3}|['"]))`,"i")}var S=n(x),D=n(_);function I(Q,ie){var L=Q.sol()&&ie.lastToken!="\\";if(L&&(ie.indent=Q.indentation()),L&&a(ie).type=="py"){var F=a(ie).offset;if(Q.eatSpace()){var X=Q.indentation();return X>F?q(ie):X<F&&H(Q,ie)&&Q.peek()!="#"&&(ie.errorToken=!0),null}else{var se=P(Q,ie);return F>0&&H(Q,ie)&&(se+=" "+d),se}}return P(Q,ie)}function P(Q,ie,L){if(Q.eatSpace())return null;if(!L&&Q.match(/^#.*/))return"comment";if(Q.match(/^[0-9\.]/,!1)){var F=!1;if(Q.match(/^[\d_]*\.\d+(e[\+\-]?\d+)?/i)&&(F=!0),Q.match(/^[\d_]+\.\d*/)&&(F=!0),Q.match(/^\.\d+/)&&(F=!0),F)return Q.eat(/J/i),"number";var X=!1;if(Q.match(/^0x[0-9a-f_]+/i)&&(X=!0),Q.match(/^0b[01_]+/i)&&(X=!0),Q.match(/^0o[0-7_]+/i)&&(X=!0),Q.match(/^[1-9][\d_]*(e[\+\-]?[\d_]+)?/)&&(Q.eat(/J/i),X=!0),Q.match(/^0(?![\dx])/i)&&(X=!0),X)return Q.eat(/L/i),"number"}if(Q.match(T)){var se=Q.current().toLowerCase().indexOf("f")!==-1;return se?(ie.tokenize=B(Q.current(),ie.tokenize),ie.tokenize(Q,ie)):(ie.tokenize=$(Q.current(),ie.tokenize),ie.tokenize(Q,ie))}for(var Y=0;Y<h.length;Y++)if(Q.match(h[Y]))return"operator";return Q.match(v)?"punctuation":ie.lastToken=="."&&Q.match(M)?"property":Q.match(S)||Q.match(e)?"keyword":Q.match(D)?"builtin":Q.match(/^(self|cls)\b/)?"variable-2":Q.match(M)?ie.lastToken=="def"||ie.lastToken=="class"?"def":"variable":(Q.next(),L?null:d)}function B(Q,ie){for(;"rubf".indexOf(Q.charAt(0).toLowerCase())>=0;)Q=Q.substr(1);var L=Q.length==1,F="string";function X(Y){return function(j,fe){var ve=P(j,fe,!0);return ve=="punctuation"&&(j.current()=="{"?fe.tokenize=X(Y+1):j.current()=="}"&&(Y>1?fe.tokenize=X(Y-1):fe.tokenize=se)),ve}}function se(Y,j){for(;!Y.eol();)if(Y.eatWhile(/[^'"\{\}\\]/),Y.eat("\\")){if(Y.next(),L&&Y.eol())return F}else{if(Y.match(Q))return j.tokenize=ie,F;if(Y.match("{{"))return F;if(Y.match("{",!1))return j.tokenize=X(0),Y.current()?F:j.tokenize(Y,j);if(Y.match("}}"))return F;if(Y.match("}"))return d;Y.eat(/['"]/)}if(L){if(c.singleLineStringErrors)return d;j.tokenize=ie}return F}return se.isString=!0,se}function $(Q,ie){for(;"rubf".indexOf(Q.charAt(0).toLowerCase())>=0;)Q=Q.substr(1);var L=Q.length==1,F="string";function X(se,Y){for(;!se.eol();)if(se.eatWhile(/[^'"\\]/),se.eat("\\")){if(se.next(),L&&se.eol())return F}else{if(se.match(Q))return Y.tokenize=ie,F;se.eat(/['"]/)}if(L){if(c.singleLineStringErrors)return d;Y.tokenize=ie}return F}return X.isString=!0,X}function q(Q){for(;a(Q).type!="py";)Q.scopes.pop();Q.scopes.push({offset:a(Q).offset+l.indentUnit,type:"py",align:null})}function G(Q,ie,L){var F=Q.match(/^[\s\[\{\(]*(?:#|$)/,!1)?null:Q.column()+1;ie.scopes.push({offset:ie.indent+w,type:L,align:F})}function H(Q,ie){for(var L=Q.indentation();ie.scopes.length>1&&a(ie).offset>L;){if(a(ie).type!="py")return!0;ie.scopes.pop()}return a(ie).offset!=L}function z(Q,ie){Q.sol()&&(ie.beginningOfLine=!0,ie.dedent=!1);var L=ie.tokenize(Q,ie),F=Q.current();if(ie.beginningOfLine&&F=="@")return Q.match(M,!1)?"meta":E?"operator":d;if(/\S/.test(F)&&(ie.beginningOfLine=!1),(L=="variable"||L=="builtin")&&ie.lastToken=="meta"&&(L="meta"),(F=="pass"||F=="return")&&(ie.dedent=!0),F=="lambda"&&(ie.lambda=!0),F==":"&&!ie.lambda&&a(ie).type=="py"&&Q.match(/^\s*(?:#|$)/,!1)&&q(ie),F.length==1&&!/string|comment/.test(L)){var X="[({".indexOf(F);if(X!=-1&&G(Q,ie,"])}".slice(X,X+1)),X="])}".indexOf(F),X!=-1)if(a(ie).type==F)ie.indent=ie.scopes.pop().offset-w;else return d}return ie.dedent&&Q.eol()&&a(ie).type=="py"&&ie.scopes.length>1&&ie.scopes.pop(),L}var O={startState:function(Q){return{tokenize:I,scopes:[{offset:Q||0,type:"py",align:null}],indent:Q||0,lastToken:null,lambda:!1,dedent:0}},token:function(Q,ie){var L=ie.errorToken;L&&(ie.errorToken=!1);var F=z(Q,ie);return F&&F!="comment"&&(ie.lastToken=F=="keyword"||F=="punctuation"?Q.current():F),F=="punctuation"&&(F=null),Q.eol()&&ie.lambda&&(ie.lambda=!1),L?F+" "+d:F},indent:function(Q,ie){if(Q.tokenize!=I)return Q.tokenize.isString?t.Pass:0;var L=a(Q),F=L.type==ie.charAt(0)||L.type=="py"&&!Q.dedent&&/^(else:|elif |except |finally:)/.test(ie);return L.align!=null?L.align-(F?1:0):L.offset-(F?w:0)},electricInput:/^\s*([\}\]\)]|else:|elif |except |finally:)$/,closeBrackets:{triples:`'"`},lineComment:"#",fold:"indent"};return O}),t.defineMIME("text/x-python","python");var o=function(l){return l.split(" ")};t.defineMIME("text/x-cython",{name:"python",extra_keywords:o("by cdef cimport cpdef ctypedef enum except extern gil include nogil property public readonly struct union DEF IF ELIF ELSE")})})})();(function(b,u){(function(t){t(bn.exports)})(function(t){t.registerHelper("wordChars","r",/[\w.]/),t.defineMode("r",function(n){function e(I){for(var P={},B=0;B<I.length;++B)P[I[B]]=!0;return P}var r=["NULL","NA","Inf","NaN","NA_integer_","NA_real_","NA_complex_","NA_character_","TRUE","FALSE"],i=["list","quote","bquote","eval","return","call","parse","deparse"],a=["if","else","repeat","while","function","for","in","next","break"],o=["if","else","repeat","while","function","for"];t.registerHelper("hintWords","r",r.concat(i,a));var l=e(r),c=e(i),d=e(a),v=e(o),h=/[+\-*\/^<>=!&|~$:]/,g;function w(I,P){g=null;var B=I.next();if(B=="#")return I.skipToEnd(),"comment";if(B=="0"&&I.eat("x"))return I.eatWhile(/[\da-f]/i),"number";if(B=="."&&I.eat(/\d/))return I.match(/\d*(?:e[+\-]?\d+)?/),"number";if(/\d/.test(B))return I.match(/\d*(?:\.\d+)?(?:e[+\-]\d+)?L?/),"number";if(B=="'"||B=='"')return P.tokenize=x(B),"string";if(B=="`")return I.match(/[^`]+`/),"variable-3";if(B=="."&&I.match(/.(?:[.]|\d+)/))return"keyword";if(/[a-zA-Z\.]/.test(B)){I.eatWhile(/[\w\.]/);var $=I.current();return l.propertyIsEnumerable($)?"atom":d.propertyIsEnumerable($)?(v.propertyIsEnumerable($)&&!I.match(/\s*if(\s+|$)/,!1)&&(g="block"),"keyword"):c.propertyIsEnumerable($)?"builtin":"variable"}else return B=="%"?(I.skipTo("%")&&I.next(),"operator variable-2"):B=="<"&&I.eat("-")||B=="<"&&I.match("<-")||B=="-"&&I.match(/>>?/)?"operator arrow":B=="="&&P.ctx.argList?"arg-is":h.test(B)?B=="$"?"operator dollar":(I.eatWhile(h),"operator"):/[\(\){}\[\];]/.test(B)?(g=B,B==";"?"semi":null):null}function x(I){return function(P,B){if(P.eat("\\")){var $=P.next();return $=="x"?P.match(/^[a-f0-9]{2}/i):($=="u"||$=="U")&&P.eat("{")&&P.skipTo("}")?P.next():$=="u"?P.match(/^[a-f0-9]{4}/i):$=="U"?P.match(/^[a-f0-9]{8}/i):/[0-7]/.test($)&&P.match(/^[0-7]{1,2}/),"string-2"}else{for(var q;(q=P.next())!=null;){if(q==I){B.tokenize=w;break}if(q=="\\"){P.backUp(1);break}}return"string"}}}var _=1,E=2,M=4;function T(I,P,B){I.ctx={type:P,indent:I.indent,flags:0,column:B.column(),prev:I.ctx}}function S(I,P){var B=I.ctx;I.ctx={type:B.type,indent:B.indent,flags:B.flags|P,column:B.column,prev:B.prev}}function D(I){I.indent=I.ctx.indent,I.ctx=I.ctx.prev}return{startState:function(){return{tokenize:w,ctx:{type:"top",indent:-n.indentUnit,flags:E},indent:0,afterIdent:!1}},token:function(I,P){if(I.sol()&&((P.ctx.flags&3)==0&&(P.ctx.flags|=E),P.ctx.flags&M&&D(P),P.indent=I.indentation()),I.eatSpace())return null;var B=P.tokenize(I,P);return B!="comment"&&(P.ctx.flags&E)==0&&S(P,_),(g==";"||g=="{"||g=="}")&&P.ctx.type=="block"&&D(P),g=="{"?T(P,"}",I):g=="("?(T(P,")",I),P.afterIdent&&(P.ctx.argList=!0)):g=="["?T(P,"]",I):g=="block"?T(P,"block",I):g==P.ctx.type?D(P):P.ctx.type=="block"&&B!="comment"&&S(P,M),P.afterIdent=B=="variable"||B=="keyword",B},indent:function(I,P){if(I.tokenize!=w)return 0;var B=P&&P.charAt(0),$=I.ctx,q=B==$.type;return $.flags&M&&($=$.prev),$.type=="block"?$.indent+(B=="{"?0:n.indentUnit):$.flags&_?$.column+(q?0:1):$.indent+(q?0:n.indentUnit)},lineComment:"#"}}),t.defineMIME("text/x-rsrc","r")})})();(function(b,u){(function(t){t(bn.exports)})(function(t){function n(c){for(var d={},v=0,h=c.length;v<h;++v)d[c[v]]=!0;return d}var e=["alias","and","BEGIN","begin","break","case","class","def","defined?","do","else","elsif","END","end","ensure","false","for","if","in","module","next","not","or","redo","rescue","retry","return","self","super","then","true","undef","unless","until","when","while","yield","nil","raise","throw","catch","fail","loop","callcc","caller","lambda","proc","public","protected","private","require","load","require_relative","extend","autoload","__END__","__FILE__","__LINE__","__dir__"],r=n(e),i=n(["def","class","case","for","while","until","module","then","catch","loop","proc","begin"]),a=n(["end","until"]),o={"[":"]","{":"}","(":")"},l={"]":"[","}":"{",")":"("};t.defineMode("ruby",function(c){var d;function v(T,S,D){return D.tokenize.push(T),T(S,D)}function h(T,S){if(T.sol()&&T.match("=begin")&&T.eol())return S.tokenize.push(M),"comment";if(T.eatSpace())return null;var D=T.next(),I;if(D=="`"||D=="'"||D=='"')return v(_(D,"string",D=='"'||D=="`"),T,S);if(D=="/")return g(T)?v(_(D,"string-2",!0),T,S):"operator";if(D=="%"){var P="string",B=!0;T.eat("s")?P="atom":T.eat(/[WQ]/)?P="string":T.eat(/[r]/)?P="string-2":T.eat(/[wxq]/)&&(P="string",B=!1);var $=T.eat(/[^\w\s=]/);return $?(o.propertyIsEnumerable($)&&($=o[$]),v(_($,P,B,!0),T,S)):"operator"}else{if(D=="#")return T.skipToEnd(),"comment";if(D=="<"&&(I=T.match(/^<([-~])[\`\"\']?([a-zA-Z_?]\w*)[\`\"\']?(?:;|$)/)))return v(E(I[2],I[1]),T,S);if(D=="0")return T.eat("x")?T.eatWhile(/[\da-fA-F]/):T.eat("b")?T.eatWhile(/[01]/):T.eatWhile(/[0-7]/),"number";if(/\d/.test(D))return T.match(/^[\d_]*(?:\.[\d_]+)?(?:[eE][+\-]?[\d_]+)?/),"number";if(D=="?"){for(;T.match(/^\\[CM]-/););return T.eat("\\")?T.eatWhile(/\w/):T.next(),"string"}else{if(D==":")return T.eat("'")?v(_("'","atom",!1),T,S):T.eat('"')?v(_('"',"atom",!0),T,S):T.eat(/[\<\>]/)?(T.eat(/[\<\>]/),"atom"):T.eat(/[\+\-\*\/\&\|\:\!]/)?"atom":T.eat(/[a-zA-Z$@_\xa1-\uffff]/)?(T.eatWhile(/[\w$\xa1-\uffff]/),T.eat(/[\?\!\=]/),"atom"):"operator";if(D=="@"&&T.match(/^@?[a-zA-Z_\xa1-\uffff]/))return T.eat("@"),T.eatWhile(/[\w\xa1-\uffff]/),"variable-2";if(D=="$")return T.eat(/[a-zA-Z_]/)?T.eatWhile(/[\w]/):T.eat(/\d/)?T.eat(/\d/):T.next(),"variable-3";if(/[a-zA-Z_\xa1-\uffff]/.test(D))return T.eatWhile(/[\w\xa1-\uffff]/),T.eat(/[\?\!]/),T.eat(":")?"atom":"ident";if(D=="|"&&(S.varList||S.lastTok=="{"||S.lastTok=="do"))return d="|",null;if(/[\(\)\[\]{}\\;]/.test(D))return d=D,null;if(D=="-"&&T.eat(">"))return"arrow";if(/[=+\-\/*:\.^%<>~|]/.test(D)){var q=T.eatWhile(/[=+\-\/*:\.^%<>~|]/);return D=="."&&!q&&(d="."),"operator"}else return null}}}function g(T){for(var S=T.pos,D=0,I,P=!1,B=!1;(I=T.next())!=null;)if(B)B=!1;else{if("[{(".indexOf(I)>-1)D++;else if("]})".indexOf(I)>-1){if(D--,D<0)break}else if(I=="/"&&D==0){P=!0;break}B=I=="\\"}return T.backUp(T.pos-S),P}function w(T){return T||(T=1),function(S,D){if(S.peek()=="}"){if(T==1)return D.tokenize.pop(),D.tokenize[D.tokenize.length-1](S,D);D.tokenize[D.tokenize.length-1]=w(T-1)}else S.peek()=="{"&&(D.tokenize[D.tokenize.length-1]=w(T+1));return h(S,D)}}function x(){var T=!1;return function(S,D){return T?(D.tokenize.pop(),D.tokenize[D.tokenize.length-1](S,D)):(T=!0,h(S,D))}}function _(T,S,D,I){return function(P,B){var $=!1,q;for(B.context.type==="read-quoted-paused"&&(B.context=B.context.prev,P.eat("}"));(q=P.next())!=null;){if(q==T&&(I||!$)){B.tokenize.pop();break}if(D&&q=="#"&&!$){if(P.eat("{")){T=="}"&&(B.context={prev:B.context,type:"read-quoted-paused"}),B.tokenize.push(w());break}else if(/[@\$]/.test(P.peek())){B.tokenize.push(x());break}}$=!$&&q=="\\"}return S}}function E(T,S){return function(D,I){return S&&D.eatSpace(),D.match(T)?I.tokenize.pop():D.skipToEnd(),"string"}}function M(T,S){return T.sol()&&T.match("=end")&&T.eol()&&S.tokenize.pop(),T.skipToEnd(),"comment"}return{startState:function(){return{tokenize:[h],indented:0,context:{type:"top",indented:-c.indentUnit},continuedLine:!1,lastTok:null,varList:!1}},token:function(T,S){d=null,T.sol()&&(S.indented=T.indentation());var D=S.tokenize[S.tokenize.length-1](T,S),I,P=d;if(D=="ident"){var B=T.current();D=S.lastTok=="."?"property":r.propertyIsEnumerable(T.current())?"keyword":/^[A-Z]/.test(B)?"tag":S.lastTok=="def"||S.lastTok=="class"||S.varList?"def":"variable",D=="keyword"&&(P=B,i.propertyIsEnumerable(B)?I="indent":a.propertyIsEnumerable(B)?I="dedent":((B=="if"||B=="unless")&&T.column()==T.indentation()||B=="do"&&S.context.indented<S.indented)&&(I="indent"))}return(d||D&&D!="comment")&&(S.lastTok=P),d=="|"&&(S.varList=!S.varList),I=="indent"||/[\(\[\{]/.test(d)?S.context={prev:S.context,type:d||D,indented:S.indented}:(I=="dedent"||/[\)\]\}]/.test(d))&&S.context.prev&&(S.context=S.context.prev),T.eol()&&(S.continuedLine=d=="\\"||D=="operator"),D},indent:function(T,S){if(T.tokenize[T.tokenize.length-1]!=h)return t.Pass;var D=S&&S.charAt(0),I=T.context,P=I.type==l[D]||I.type=="keyword"&&/^(?:end|until|else|elsif|when|rescue)\b/.test(S);return I.indented+(P?0:c.indentUnit)+(T.continuedLine?c.indentUnit:0)},electricInput:/^\s*(?:end|rescue|elsif|else|\})$/,lineComment:"#",fold:"indent"}}),t.defineMIME("text/x-ruby","ruby"),t.registerHelper("hintWords","ruby",e)})})();(function(b,u){(function(t){t(bn.exports,Wm.exports)})(function(t){t.defineSimpleMode("rust",{start:[{regex:/b?"/,token:"string",next:"string"},{regex:/b?r"/,token:"string",next:"string_raw"},{regex:/b?r#+"/,token:"string",next:"string_raw_hash"},{regex:/'(?:[^'\\]|\\(?:[nrt0'"]|x[\da-fA-F]{2}|u\{[\da-fA-F]{6}\}))'/,token:"string-2"},{regex:/b'(?:[^']|\\(?:['\\nrt0]|x[\da-fA-F]{2}))'/,token:"string-2"},{regex:/(?:(?:[0-9][0-9_]*)(?:(?:[Ee][+-]?[0-9_]+)|\.[0-9_]+(?:[Ee][+-]?[0-9_]+)?)(?:f32|f64)?)|(?:0(?:b[01_]+|(?:o[0-7_]+)|(?:x[0-9a-fA-F_]+))|(?:[0-9][0-9_]*))(?:u8|u16|u32|u64|i8|i16|i32|i64|isize|usize)?/,token:"number"},{regex:/(let(?:\s+mut)?|fn|enum|mod|struct|type|union)(\s+)([a-zA-Z_][a-zA-Z0-9_]*)/,token:["keyword",null,"def"]},{regex:/(?:abstract|alignof|as|async|await|box|break|continue|const|crate|do|dyn|else|enum|extern|fn|for|final|if|impl|in|loop|macro|match|mod|move|offsetof|override|priv|proc|pub|pure|ref|return|self|sizeof|static|struct|super|trait|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,token:"keyword"},{regex:/\b(?:Self|isize|usize|char|bool|u8|u16|u32|u64|f16|f32|f64|i8|i16|i32|i64|str|Option)\b/,token:"atom"},{regex:/\b(?:true|false|Some|None|Ok|Err)\b/,token:"builtin"},{regex:/\b(fn)(\s+)([a-zA-Z_][a-zA-Z0-9_]*)/,token:["keyword",null,"def"]},{regex:/#!?\[.*\]/,token:"meta"},{regex:/\/\/.*/,token:"comment"},{regex:/\/\*/,token:"comment",next:"comment"},{regex:/[-+\/*=<>!]+/,token:"operator"},{regex:/[a-zA-Z_]\w*!/,token:"variable-3"},{regex:/[a-zA-Z_]\w*/,token:"variable"},{regex:/[\{\[\(]/,indent:!0},{regex:/[\}\]\)]/,dedent:!0}],string:[{regex:/"/,token:"string",next:"start"},{regex:/(?:[^\\"]|\\(?:.|$))*/,token:"string"}],string_raw:[{regex:/"/,token:"string",next:"start"},{regex:/[^"]*/,token:"string"}],string_raw_hash:[{regex:/"#+/,token:"string",next:"start"},{regex:/(?:[^"]|"(?!#))*/,token:"string"}],comment:[{regex:/.*?\*\//,token:"comment",next:"start"},{regex:/.*/,token:"comment"}],meta:{dontIndentStates:["comment"],electricInput:/^\s*\}$/,blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",fold:"brace"}}),t.defineMIME("text/x-rustsrc","rust"),t.defineMIME("text/rust","rust")})})();(function(b,u){(function(t){t(bn.exports)})(function(t){t.defineMode("sql",function(c,d){var v=d.client||{},h=d.atoms||{false:!0,true:!0,null:!0},g=d.builtin||o(l),w=d.keywords||o(a),x=d.operatorChars||/^[*+\-%<>!=&|~^\/]/,_=d.support||{},E=d.hooks||{},M=d.dateSQL||{date:!0,time:!0,timestamp:!0},T=d.backslashStringEscapes!==!1,S=d.brackets||/^[\{}\(\)\[\]]/,D=d.punctuation||/^[;.,:]/;function I(G,H){var z=G.next();if(E[z]){var O=E[z](G,H);if(O!==!1)return O}if(_.hexNumber&&(z=="0"&&G.match(/^[xX][0-9a-fA-F]+/)||(z=="x"||z=="X")&&G.match(/^'[0-9a-fA-F]+'/)))return"number";if(_.binaryNumber&&((z=="b"||z=="B")&&G.match(/^'[01]+'/)||z=="0"&&G.match(/^b[01]+/)))return"number";if(z.charCodeAt(0)>47&&z.charCodeAt(0)<58)return G.match(/^[0-9]*(\.[0-9]+)?([eE][-+]?[0-9]+)?/),_.decimallessFloat&&G.match(/^\.(?!\.)/),"number";if(z=="?"&&(G.eatSpace()||G.eol()||G.eat(";")))return"variable-3";if(z=="'"||z=='"'&&_.doubleQuote)return H.tokenize=P(z),H.tokenize(G,H);if((_.nCharCast&&(z=="n"||z=="N")||_.charsetCast&&z=="_"&&G.match(/[a-z][a-z0-9]*/i))&&(G.peek()=="'"||G.peek()=='"'))return"keyword";if(_.escapeConstant&&(z=="e"||z=="E")&&(G.peek()=="'"||G.peek()=='"'&&_.doubleQuote))return H.tokenize=function(ie,L){return(L.tokenize=P(ie.next(),!0))(ie,L)},"keyword";if(_.commentSlashSlash&&z=="/"&&G.eat("/"))return G.skipToEnd(),"comment";if(_.commentHash&&z=="#"||z=="-"&&G.eat("-")&&(!_.commentSpaceRequired||G.eat(" ")))return G.skipToEnd(),"comment";if(z=="/"&&G.eat("*"))return H.tokenize=B(1),H.tokenize(G,H);if(z=="."){if(_.zerolessFloat&&G.match(/^(?:\d+(?:e[+-]?\d+)?)/i))return"number";if(G.match(/^\.+/))return null;if(_.ODBCdotTable&&G.match(/^[\w\d_$#]+/))return"variable-2"}else{if(x.test(z))return G.eatWhile(x),"operator";if(S.test(z))return"bracket";if(D.test(z))return G.eatWhile(D),"punctuation";if(z=="{"&&(G.match(/^( )*(d|D|t|T|ts|TS)( )*'[^']*'( )*}/)||G.match(/^( )*(d|D|t|T|ts|TS)( )*"[^"]*"( )*}/)))return"number";G.eatWhile(/^[_\w\d]/);var Q=G.current().toLowerCase();return M.hasOwnProperty(Q)&&(G.match(/^( )+'[^']*'/)||G.match(/^( )+"[^"]*"/))?"number":h.hasOwnProperty(Q)?"atom":g.hasOwnProperty(Q)?"type":w.hasOwnProperty(Q)?"keyword":v.hasOwnProperty(Q)?"builtin":null}}function P(G,H){return function(z,O){for(var Q=!1,ie;(ie=z.next())!=null;){if(ie==G&&!Q){O.tokenize=I;break}Q=(T||H)&&!Q&&ie=="\\"}return"string"}}function B(G){return function(H,z){var O=H.match(/^.*?(\/\*|\*\/)/);return O?O[1]=="/*"?z.tokenize=B(G+1):G>1?z.tokenize=B(G-1):z.tokenize=I:H.skipToEnd(),"comment"}}function $(G,H,z){H.context={prev:H.context,indent:G.indentation(),col:G.column(),type:z}}function q(G){G.indent=G.context.indent,G.context=G.context.prev}return{startState:function(){return{tokenize:I,context:null}},token:function(G,H){if(G.sol()&&H.context&&H.context.align==null&&(H.context.align=!1),H.tokenize==I&&G.eatSpace())return null;var z=H.tokenize(G,H);if(z=="comment")return z;H.context&&H.context.align==null&&(H.context.align=!0);var O=G.current();return O=="("?$(G,H,")"):O=="["?$(G,H,"]"):H.context&&H.context.type==O&&q(H),z},indent:function(G,H){var z=G.context;if(!z)return t.Pass;var O=H.charAt(0)==z.type;return z.align?z.col+(O?0:1):z.indent+(O?0:c.indentUnit)},blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:_.commentSlashSlash?"//":_.commentHash?"#":"--",closeBrackets:"()[]{}''\"\"``"}});function n(c){for(var d;(d=c.next())!=null;)if(d=="`"&&!c.eat("`"))return"variable-2";return c.backUp(c.current().length-1),c.eatWhile(/\w/)?"variable-2":null}function e(c){for(var d;(d=c.next())!=null;)if(d=='"'&&!c.eat('"'))return"variable-2";return c.backUp(c.current().length-1),c.eatWhile(/\w/)?"variable-2":null}function r(c){return c.eat("@")&&(c.match("session."),c.match("local."),c.match("global.")),c.eat("'")?(c.match(/^.*'/),"variable-2"):c.eat('"')?(c.match(/^.*"/),"variable-2"):c.eat("`")?(c.match(/^.*`/),"variable-2"):c.match(/^[0-9a-zA-Z$\.\_]+/)?"variable-2":null}function i(c){return c.eat("N")?"atom":c.match(/^[a-zA-Z.#!?]/)?"variable-2":null}var a="alter and as asc between by count create delete desc distinct drop from group having in insert into is join like not on or order select set table union update values where limit ";function o(c){for(var d={},v=c.split(" "),h=0;h<v.length;++h)d[v[h]]=!0;return d}var l="bool boolean bit blob enum long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision real date datetime year unsigned signed decimal numeric";t.defineMIME("text/x-sql",{name:"sql",keywords:o(a+"begin"),builtin:o(l),atoms:o("false true null unknown"),dateSQL:o("date time timestamp"),support:o("ODBCdotTable doubleQuote binaryNumber hexNumber")}),t.defineMIME("text/x-mssql",{name:"sql",client:o("$partition binary_checksum checksum connectionproperty context_info current_request_id error_line error_message error_number error_procedure error_severity error_state formatmessage get_filestream_transaction_context getansinull host_id host_name isnull isnumeric min_active_rowversion newid newsequentialid rowcount_big xact_state object_id"),keywords:o(a+"begin trigger proc view index for add constraint key primary foreign collate clustered nonclustered declare exec go if use index holdlock nolock nowait paglock readcommitted readcommittedlock readpast readuncommitted repeatableread rowlock serializable snapshot tablock tablockx updlock with"),builtin:o("bigint numeric bit smallint decimal smallmoney int tinyint money float real char varchar text nchar nvarchar ntext binary varbinary image cursor timestamp hierarchyid uniqueidentifier sql_variant xml table "),atoms:o("is not null like and or in left right between inner outer join all any some cross unpivot pivot exists"),operatorChars:/^[*+\-%<>!=^\&|\/]/,brackets:/^[\{}\(\)]/,punctuation:/^[;.,:/]/,backslashStringEscapes:!1,dateSQL:o("date datetimeoffset datetime2 smalldatetime datetime time"),hooks:{"@":r}}),t.defineMIME("text/x-mysql",{name:"sql",client:o("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:o(a+"accessible action add after algorithm all analyze asensitive at authors auto_increment autocommit avg avg_row_length before binary binlog both btree cache call cascade cascaded case catalog_name chain change changed character check checkpoint checksum class_origin client_statistics close coalesce code collate collation collations column columns comment commit committed completion concurrent condition connection consistent constraint contains continue contributors convert cross current current_date current_time current_timestamp current_user cursor data database databases day_hour day_microsecond day_minute day_second deallocate dec declare default delay_key_write delayed delimiter des_key_file describe deterministic dev_pop dev_samp deviance diagnostics directory disable discard distinctrow div dual dumpfile each elseif enable enclosed end ends engine engines enum errors escape escaped even event events every execute exists exit explain extended fast fetch field fields first flush for force foreign found_rows full fulltext function general get global grant grants group group_concat handler hash help high_priority hosts hour_microsecond hour_minute hour_second if ignore ignore_server_ids import index index_statistics infile inner innodb inout insensitive insert_method install interval invoker isolation iterate key keys kill language last leading leave left level limit linear lines list load local localtime localtimestamp lock logs low_priority master master_heartbeat_period master_ssl_verify_server_cert masters match max max_rows maxvalue message_text middleint migrate min min_rows minute_microsecond minute_second mod mode modifies modify mutex mysql_errno natural next no no_write_to_binlog offline offset one online open optimize option optionally out outer outfile pack_keys parser partition partitions password phase plugin plugins prepare preserve prev primary privileges procedure processlist profile profiles purge query quick range read read_write reads real rebuild recover references regexp relaylog release remove rename reorganize repair repeatable replace require resignal restrict resume return returns revoke right rlike rollback rollup row row_format rtree savepoint schedule schema schema_name schemas second_microsecond security sensitive separator serializable server session share show signal slave slow smallint snapshot soname spatial specific sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sqlexception sqlstate sqlwarning ssl start starting starts status std stddev stddev_pop stddev_samp storage straight_join subclass_origin sum suspend table_name table_statistics tables tablespace temporary terminated to trailing transaction trigger triggers truncate uncommitted undo uninstall unique unlock upgrade usage use use_frm user user_resources user_statistics using utc_date utc_time utc_timestamp value variables varying view views warnings when while with work write xa xor year_month zerofill begin do then else loop repeat"),builtin:o("bool boolean bit blob decimal double float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision date datetime year unsigned signed numeric"),atoms:o("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^]/,dateSQL:o("date time timestamp"),support:o("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber doubleQuote nCharCast charsetCast commentHash commentSpaceRequired"),hooks:{"@":r,"`":n,"\\":i}}),t.defineMIME("text/x-mariadb",{name:"sql",client:o("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:o(a+"accessible action add after algorithm all always analyze asensitive at authors auto_increment autocommit avg avg_row_length before binary binlog both btree cache call cascade cascaded case catalog_name chain change changed character check checkpoint checksum class_origin client_statistics close coalesce code collate collation collations column columns comment commit committed completion concurrent condition connection consistent constraint contains continue contributors convert cross current current_date current_time current_timestamp current_user cursor data database databases day_hour day_microsecond day_minute day_second deallocate dec declare default delay_key_write delayed delimiter des_key_file describe deterministic dev_pop dev_samp deviance diagnostics directory disable discard distinctrow div dual dumpfile each elseif enable enclosed end ends engine engines enum errors escape escaped even event events every execute exists exit explain extended fast fetch field fields first flush for force foreign found_rows full fulltext function general generated get global grant grants group group_concat handler hard hash help high_priority hosts hour_microsecond hour_minute hour_second if ignore ignore_server_ids import index index_statistics infile inner innodb inout insensitive insert_method install interval invoker isolation iterate key keys kill language last leading leave left level limit linear lines list load local localtime localtimestamp lock logs low_priority master master_heartbeat_period master_ssl_verify_server_cert masters match max max_rows maxvalue message_text middleint migrate min min_rows minute_microsecond minute_second mod mode modifies modify mutex mysql_errno natural next no no_write_to_binlog offline offset one online open optimize option optionally out outer outfile pack_keys parser partition partitions password persistent phase plugin plugins prepare preserve prev primary privileges procedure processlist profile profiles purge query quick range read read_write reads real rebuild recover references regexp relaylog release remove rename reorganize repair repeatable replace require resignal restrict resume return returns revoke right rlike rollback rollup row row_format rtree savepoint schedule schema schema_name schemas second_microsecond security sensitive separator serializable server session share show shutdown signal slave slow smallint snapshot soft soname spatial specific sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sqlexception sqlstate sqlwarning ssl start starting starts status std stddev stddev_pop stddev_samp storage straight_join subclass_origin sum suspend table_name table_statistics tables tablespace temporary terminated to trailing transaction trigger triggers truncate uncommitted undo uninstall unique unlock upgrade usage use use_frm user user_resources user_statistics using utc_date utc_time utc_timestamp value variables varying view views virtual warnings when while with work write xa xor year_month zerofill begin do then else loop repeat"),builtin:o("bool boolean bit blob decimal double float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision date datetime year unsigned signed numeric"),atoms:o("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^]/,dateSQL:o("date time timestamp"),support:o("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber doubleQuote nCharCast charsetCast commentHash commentSpaceRequired"),hooks:{"@":r,"`":n,"\\":i}}),t.defineMIME("text/x-sqlite",{name:"sql",client:o("auth backup bail binary changes check clone databases dbinfo dump echo eqp exit explain fullschema headers help import imposter indexes iotrace limit lint load log mode nullvalue once open output print prompt quit read restore save scanstats schema separator session shell show stats system tables testcase timeout timer trace vfsinfo vfslist vfsname width"),keywords:o(a+"abort action add after all analyze attach autoincrement before begin cascade case cast check collate column commit conflict constraint cross current_date current_time current_timestamp database default deferrable deferred detach each else end escape except exclusive exists explain fail for foreign full glob if ignore immediate index indexed initially inner instead intersect isnull key left limit match natural no notnull null of offset outer plan pragma primary query raise recursive references regexp reindex release rename replace restrict right rollback row savepoint temp temporary then to transaction trigger unique using vacuum view virtual when with without"),builtin:o("bool boolean bit blob decimal double float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text clob bigint int int2 int8 integer float double char varchar date datetime year unsigned signed numeric real"),atoms:o("null current_date current_time current_timestamp"),operatorChars:/^[*+\-%<>!=&|/~]/,dateSQL:o("date time timestamp datetime"),support:o("decimallessFloat zerolessFloat"),identifierQuote:'"',hooks:{"@":r,":":r,"?":r,$:r,'"':e,"`":n}}),t.defineMIME("text/x-cassandra",{name:"sql",client:{},keywords:o("add all allow alter and any apply as asc authorize batch begin by clustering columnfamily compact consistency count create custom delete desc distinct drop each_quorum exists filtering from grant if in index insert into key keyspace keyspaces level limit local_one local_quorum modify nan norecursive nosuperuser not of on one order password permission permissions primary quorum rename revoke schema select set storage superuser table three to token truncate ttl two type unlogged update use user users using values where with writetime"),builtin:o("ascii bigint blob boolean counter decimal double float frozen inet int list map static text timestamp timeuuid tuple uuid varchar varint"),atoms:o("false true infinity NaN"),operatorChars:/^[<>=]/,dateSQL:{},support:o("commentSlashSlash decimallessFloat"),hooks:{}}),t.defineMIME("text/x-plsql",{name:"sql",client:o("appinfo arraysize autocommit autoprint autorecovery autotrace blockterminator break btitle cmdsep colsep compatibility compute concat copycommit copytypecheck define describe echo editfile embedded escape exec execute feedback flagger flush heading headsep instance linesize lno loboffset logsource long longchunksize markup native newpage numformat numwidth pagesize pause pno recsep recsepchar release repfooter repheader serveroutput shiftinout show showmode size spool sqlblanklines sqlcase sqlcode sqlcontinue sqlnumber sqlpluscompatibility sqlprefix sqlprompt sqlterminator suffix tab term termout time timing trimout trimspool ttitle underline verify version wrap"),keywords:o("abort accept access add all alter and any array arraylen as asc assert assign at attributes audit authorization avg base_table begin between binary_integer body boolean by case cast char char_base check close cluster clusters colauth column comment commit compress connect connected constant constraint crash create current currval cursor data_base database date dba deallocate debugoff debugon decimal declare default definition delay delete desc digits dispose distinct do drop else elseif elsif enable end entry escape exception exception_init exchange exclusive exists exit external fast fetch file for force form from function generic goto grant group having identified if immediate in increment index indexes indicator initial initrans insert interface intersect into is key level library like limited local lock log logging long loop master maxextents maxtrans member minextents minus mislabel mode modify multiset new next no noaudit nocompress nologging noparallel not nowait number_base object of off offline on online only open option or order out package parallel partition pctfree pctincrease pctused pls_integer positive positiven pragma primary prior private privileges procedure public raise range raw read rebuild record ref references refresh release rename replace resource restrict return returning returns reverse revoke rollback row rowid rowlabel rownum rows run savepoint schema segment select separate session set share snapshot some space split sql start statement storage subtype successful synonym tabauth table tables tablespace task terminate then to trigger truncate type union unique unlimited unrecoverable unusable update use using validate value values variable view views when whenever where while with work"),builtin:o("abs acos add_months ascii asin atan atan2 average bfile bfilename bigserial bit blob ceil character chartorowid chr clob concat convert cos cosh count dec decode deref dual dump dup_val_on_index empty error exp false float floor found glb greatest hextoraw initcap instr instrb int integer isopen last_day least length lengthb ln lower lpad ltrim lub make_ref max min mlslabel mod months_between natural naturaln nchar nclob new_time next_day nextval nls_charset_decl_len nls_charset_id nls_charset_name nls_initcap nls_lower nls_sort nls_upper nlssort no_data_found notfound null number numeric nvarchar2 nvl others power rawtohex real reftohex round rowcount rowidtochar rowtype rpad rtrim serial sign signtype sin sinh smallint soundex sqlcode sqlerrm sqrt stddev string substr substrb sum sysdate tan tanh to_char text to_date to_label to_multi_byte to_number to_single_byte translate true trunc uid unlogged upper user userenv varchar varchar2 variance varying vsize xml"),operatorChars:/^[*\/+\-%<>!=~]/,dateSQL:o("date time timestamp"),support:o("doubleQuote nCharCast zerolessFloat binaryNumber hexNumber")}),t.defineMIME("text/x-hive",{name:"sql",keywords:o("select alter $elem$ $key$ $value$ add after all analyze and archive as asc before between binary both bucket buckets by cascade case cast change cluster clustered clusterstatus collection column columns comment compute concatenate continue create cross cursor data database databases dbproperties deferred delete delimited desc describe directory disable distinct distribute drop else enable end escaped exclusive exists explain export extended external fetch fields fileformat first format formatted from full function functions grant group having hold_ddltime idxproperties if import in index indexes inpath inputdriver inputformat insert intersect into is items join keys lateral left like limit lines load local location lock locks mapjoin materialized minus msck no_drop nocompress not of offline on option or order out outer outputdriver outputformat overwrite partition partitioned partitions percent plus preserve procedure purge range rcfile read readonly reads rebuild recordreader recordwriter recover reduce regexp rename repair replace restrict revoke right rlike row schema schemas semi sequencefile serde serdeproperties set shared show show_database sort sorted ssl statistics stored streamtable table tables tablesample tblproperties temporary terminated textfile then tmp to touch transform trigger unarchive undo union uniquejoin unlock update use using utc utc_tmestamp view when where while with admin authorization char compact compactions conf cube current current_date current_timestamp day decimal defined dependency directories elem_type exchange file following for grouping hour ignore inner interval jar less logical macro minute month more none noscan over owner partialscan preceding pretty principals protection reload rewrite role roles rollup rows second server sets skewed transactions truncate unbounded unset uri user values window year"),builtin:o("bool boolean long timestamp tinyint smallint bigint int float double date datetime unsigned string array struct map uniontype key_type utctimestamp value_type varchar"),atoms:o("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:o("date timestamp"),support:o("ODBCdotTable doubleQuote binaryNumber hexNumber")}),t.defineMIME("text/x-pgsql",{name:"sql",client:o("source"),keywords:o(a+"a abort abs absent absolute access according action ada add admin after aggregate alias all allocate also alter always analyse analyze and any are array array_agg array_max_cardinality as asc asensitive assert assertion assignment asymmetric at atomic attach attribute attributes authorization avg backward base64 before begin begin_frame begin_partition bernoulli between bigint binary bit bit_length blob blocked bom boolean both breadth by c cache call called cardinality cascade cascaded case cast catalog catalog_name ceil ceiling chain char char_length character character_length character_set_catalog character_set_name character_set_schema characteristics characters check checkpoint class class_origin clob close cluster coalesce cobol collate collation collation_catalog collation_name collation_schema collect column column_name columns command_function command_function_code comment comments commit committed concurrently condition condition_number configuration conflict connect connection connection_name constant constraint constraint_catalog constraint_name constraint_schema constraints constructor contains content continue control conversion convert copy corr corresponding cost count covar_pop covar_samp create cross csv cube cume_dist current current_catalog current_date current_default_transform_group current_path current_role current_row current_schema current_time current_timestamp current_transform_group_for_type current_user cursor cursor_name cycle data database datalink datatype date datetime_interval_code datetime_interval_precision day db deallocate debug dec decimal declare default defaults deferrable deferred defined definer degree delete delimiter delimiters dense_rank depends depth deref derived desc describe descriptor detach detail deterministic diagnostics dictionary disable discard disconnect dispatch distinct dlnewcopy dlpreviouscopy dlurlcomplete dlurlcompleteonly dlurlcompletewrite dlurlpath dlurlpathonly dlurlpathwrite dlurlscheme dlurlserver dlvalue do document domain double drop dump dynamic dynamic_function dynamic_function_code each element else elseif elsif empty enable encoding encrypted end end_frame end_partition endexec enforced enum equals errcode error escape event every except exception exclude excluding exclusive exec execute exists exit exp explain expression extension external extract false family fetch file filter final first first_value flag float floor following for force foreach foreign fortran forward found frame_row free freeze from fs full function functions fusion g general generated get global go goto grant granted greatest group grouping groups handler having header hex hierarchy hint hold hour id identity if ignore ilike immediate immediately immutable implementation implicit import in include including increment indent index indexes indicator info inherit inherits initially inline inner inout input insensitive insert instance instantiable instead int integer integrity intersect intersection interval into invoker is isnull isolation join k key key_member key_type label lag language large last last_value lateral lead leading leakproof least left length level library like like_regex limit link listen ln load local localtime localtimestamp location locator lock locked log logged loop lower m map mapping match matched materialized max max_cardinality maxvalue member merge message message_length message_octet_length message_text method min minute minvalue mod mode modifies module month more move multiset mumps name names namespace national natural nchar nclob nesting new next nfc nfd nfkc nfkd nil no none normalize normalized not nothing notice notify notnull nowait nth_value ntile null nullable nullif nulls number numeric object occurrences_regex octet_length octets of off offset oids old on only open operator option options or order ordering ordinality others out outer output over overlaps overlay overriding owned owner p pad parallel parameter parameter_mode parameter_name parameter_ordinal_position parameter_specific_catalog parameter_specific_name parameter_specific_schema parser partial partition pascal passing passthrough password path percent percent_rank percentile_cont percentile_disc perform period permission pg_context pg_datatype_name pg_exception_context pg_exception_detail pg_exception_hint placing plans pli policy portion position position_regex power precedes preceding precision prepare prepared preserve primary print_strict_params prior privileges procedural procedure procedures program public publication query quote raise range rank read reads real reassign recheck recovery recursive ref references referencing refresh regr_avgx regr_avgy regr_count regr_intercept regr_r2 regr_slope regr_sxx regr_sxy regr_syy reindex relative release rename repeatable replace replica requiring reset respect restart restore restrict result result_oid return returned_cardinality returned_length returned_octet_length returned_sqlstate returning returns reverse revoke right role rollback rollup routine routine_catalog routine_name routine_schema routines row row_count row_number rows rowtype rule savepoint scale schema schema_name schemas scope scope_catalog scope_name scope_schema scroll search second section security select selective self sensitive sequence sequences serializable server server_name session session_user set setof sets share show similar simple size skip slice smallint snapshot some source space specific specific_name specifictype sql sqlcode sqlerror sqlexception sqlstate sqlwarning sqrt stable stacked standalone start state statement static statistics stddev_pop stddev_samp stdin stdout storage strict strip structure style subclass_origin submultiset subscription substring substring_regex succeeds sum symmetric sysid system system_time system_user t table table_name tables tablesample tablespace temp template temporary text then ties time timestamp timezone_hour timezone_minute to token top_level_count trailing transaction transaction_active transactions_committed transactions_rolled_back transform transforms translate translate_regex translation treat trigger trigger_catalog trigger_name trigger_schema trim trim_array true truncate trusted type types uescape unbounded uncommitted under unencrypted union unique unknown unlink unlisten unlogged unnamed unnest until untyped update upper uri usage use_column use_variable user user_defined_type_catalog user_defined_type_code user_defined_type_name user_defined_type_schema using vacuum valid validate validator value value_of values var_pop var_samp varbinary varchar variable_conflict variadic varying verbose version versioning view views volatile warning when whenever where while whitespace width_bucket window with within without work wrapper write xml xmlagg xmlattributes xmlbinary xmlcast xmlcomment xmlconcat xmldeclaration xmldocument xmlelement xmlexists xmlforest xmliterate xmlnamespaces xmlparse xmlpi xmlquery xmlroot xmlschema xmlserialize xmltable xmltext xmlvalidate year yes zone"),builtin:o("bigint int8 bigserial serial8 bit varying varbit boolean bool box bytea character char varchar cidr circle date double precision float8 inet integer int int4 interval json jsonb line lseg macaddr macaddr8 money numeric decimal path pg_lsn point polygon real float4 smallint int2 smallserial serial2 serial serial4 text time without zone with timetz timestamp timestamptz tsquery tsvector txid_snapshot uuid xml"),atoms:o("false true null unknown"),operatorChars:/^[*\/+\-%<>!=&|^\/#@?~]/,backslashStringEscapes:!1,dateSQL:o("date time timestamp"),support:o("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber nCharCast charsetCast escapeConstant")}),t.defineMIME("text/x-gql",{name:"sql",keywords:o("ancestor and asc by contains desc descendant distinct from group has in is limit offset on order select superset where"),atoms:o("false true"),builtin:o("blob datetime first key __key__ string integer double boolean null"),operatorChars:/^[*+\-%<>!=]/}),t.defineMIME("text/x-gpsql",{name:"sql",client:o("source"),keywords:o("abort absolute access action active add admin after aggregate all also alter always analyse analyze and any array as asc assertion assignment asymmetric at authorization backward before begin between bigint binary bit boolean both by cache called cascade cascaded case cast chain char character characteristics check checkpoint class close cluster coalesce codegen collate column comment commit committed concurrency concurrently configuration connection constraint constraints contains content continue conversion copy cost cpu_rate_limit create createdb createexttable createrole createuser cross csv cube current current_catalog current_date current_role current_schema current_time current_timestamp current_user cursor cycle data database day deallocate dec decimal declare decode default defaults deferrable deferred definer delete delimiter delimiters deny desc dictionary disable discard distinct distributed do document domain double drop dxl each else enable encoding encrypted end enum errors escape every except exchange exclude excluding exclusive execute exists explain extension external extract false family fetch fields filespace fill filter first float following for force foreign format forward freeze from full function global grant granted greatest group group_id grouping handler hash having header hold host hour identity if ignore ilike immediate immutable implicit in including inclusive increment index indexes inherit inherits initially inline inner inout input insensitive insert instead int integer intersect interval into invoker is isnull isolation join key language large last leading least left level like limit list listen load local localtime localtimestamp location lock log login mapping master match maxvalue median merge minute minvalue missing mode modifies modify month move name names national natural nchar new newline next no nocreatedb nocreateexttable nocreaterole nocreateuser noinherit nologin none noovercommit nosuperuser not nothing notify notnull nowait null nullif nulls numeric object of off offset oids old on only operator option options or order ordered others out outer over overcommit overlaps overlay owned owner parser partial partition partitions passing password percent percentile_cont percentile_disc placing plans position preceding precision prepare prepared preserve primary prior privileges procedural procedure protocol queue quote randomly range read readable reads real reassign recheck recursive ref references reindex reject relative release rename repeatable replace replica reset resource restart restrict returning returns revoke right role rollback rollup rootpartition row rows rule savepoint scatter schema scroll search second security segment select sequence serializable session session_user set setof sets share show similar simple smallint some split sql stable standalone start statement statistics stdin stdout storage strict strip subpartition subpartitions substring superuser symmetric sysid system table tablespace temp template temporary text then threshold ties time timestamp to trailing transaction treat trigger trim true truncate trusted type unbounded uncommitted unencrypted union unique unknown unlisten until update user using vacuum valid validation validator value values varchar variadic varying verbose version view volatile web when where whitespace window with within without work writable write xml xmlattributes xmlconcat xmlelement xmlexists xmlforest xmlparse xmlpi xmlroot xmlserialize year yes zone"),builtin:o("bigint int8 bigserial serial8 bit varying varbit boolean bool box bytea character char varchar cidr circle date double precision float float8 inet integer int int4 interval json jsonb line lseg macaddr macaddr8 money numeric decimal path pg_lsn point polygon real float4 smallint int2 smallserial serial2 serial serial4 text time without zone with timetz timestamp timestamptz tsquery tsvector txid_snapshot uuid xml"),atoms:o("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^\/#@?~]/,dateSQL:o("date time timestamp"),support:o("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber nCharCast charsetCast")}),t.defineMIME("text/x-sparksql",{name:"sql",keywords:o("add after all alter analyze and anti archive array as asc at between bucket buckets by cache cascade case cast change clear cluster clustered codegen collection column columns comment commit compact compactions compute concatenate cost create cross cube current current_date current_timestamp database databases data dbproperties defined delete delimited deny desc describe dfs directories distinct distribute drop else end escaped except exchange exists explain export extended external false fields fileformat first following for format formatted from full function functions global grant group grouping having if ignore import in index indexes inner inpath inputformat insert intersect interval into is items join keys last lateral lazy left like limit lines list load local location lock locks logical macro map minus msck natural no not null nulls of on optimize option options or order out outer outputformat over overwrite partition partitioned partitions percent preceding principals purge range recordreader recordwriter recover reduce refresh regexp rename repair replace reset restrict revoke right rlike role roles rollback rollup row rows schema schemas select semi separated serde serdeproperties set sets show skewed sort sorted start statistics stored stratify struct table tables tablesample tblproperties temp temporary terminated then to touch transaction transactions transform true truncate unarchive unbounded uncache union unlock unset use using values view when where window with"),builtin:o("abs acos acosh add_months aggregate and any approx_count_distinct approx_percentile array array_contains array_distinct array_except array_intersect array_join array_max array_min array_position array_remove array_repeat array_sort array_union arrays_overlap arrays_zip ascii asin asinh assert_true atan atan2 atanh avg base64 between bigint bin binary bit_and bit_count bit_get bit_length bit_or bit_xor bool_and bool_or boolean bround btrim cardinality case cast cbrt ceil ceiling char char_length character_length chr coalesce collect_list collect_set concat concat_ws conv corr cos cosh cot count count_if count_min_sketch covar_pop covar_samp crc32 cume_dist current_catalog current_database current_date current_timestamp current_timezone current_user date date_add date_format date_from_unix_date date_part date_sub date_trunc datediff day dayofmonth dayofweek dayofyear decimal decode degrees delimited dense_rank div double e element_at elt encode every exists exp explode explode_outer expm1 extract factorial filter find_in_set first first_value flatten float floor forall format_number format_string from_csv from_json from_unixtime from_utc_timestamp get_json_object getbit greatest grouping grouping_id hash hex hour hypot if ifnull in initcap inline inline_outer input_file_block_length input_file_block_start input_file_name inputformat instr int isnan isnotnull isnull java_method json_array_length json_object_keys json_tuple kurtosis lag last last_day last_value lcase lead least left length levenshtein like ln locate log log10 log1p log2 lower lpad ltrim make_date make_dt_interval make_interval make_timestamp make_ym_interval map map_concat map_entries map_filter map_from_arrays map_from_entries map_keys map_values map_zip_with max max_by md5 mean min min_by minute mod monotonically_increasing_id month months_between named_struct nanvl negative next_day not now nth_value ntile nullif nvl nvl2 octet_length or outputformat overlay parse_url percent_rank percentile percentile_approx pi pmod posexplode posexplode_outer position positive pow power printf quarter radians raise_error rand randn random rank rcfile reflect regexp regexp_extract regexp_extract_all regexp_like regexp_replace repeat replace reverse right rint rlike round row_number rpad rtrim schema_of_csv schema_of_json second sentences sequence sequencefile serde session_window sha sha1 sha2 shiftleft shiftright shiftrightunsigned shuffle sign signum sin sinh size skewness slice smallint some sort_array soundex space spark_partition_id split sqrt stack std stddev stddev_pop stddev_samp str_to_map string struct substr substring substring_index sum tan tanh textfile timestamp timestamp_micros timestamp_millis timestamp_seconds tinyint to_csv to_date to_json to_timestamp to_unix_timestamp to_utc_timestamp transform transform_keys transform_values translate trim trunc try_add try_divide typeof ucase unbase64 unhex uniontype unix_date unix_micros unix_millis unix_seconds unix_timestamp upper uuid var_pop var_samp variance version weekday weekofyear when width_bucket window xpath xpath_boolean xpath_double xpath_float xpath_int xpath_long xpath_number xpath_short xpath_string xxhash64 year zip_with"),atoms:o("false true null"),operatorChars:/^[*\/+\-%<>!=~&|^]/,dateSQL:o("date time timestamp"),support:o("ODBCdotTable doubleQuote zerolessFloat")}),t.defineMIME("text/x-esper",{name:"sql",client:o("source"),keywords:o("alter and as asc between by count create delete desc distinct drop from group having in insert into is join like not on or order select set table union update values where limit after all and as at asc avedev avg between by case cast coalesce count create current_timestamp day days delete define desc distinct else end escape events every exists false first from full group having hour hours in inner insert instanceof into irstream is istream join last lastweekday left limit like max match_recognize matches median measures metadatasql min minute minutes msec millisecond milliseconds not null offset on or order outer output partition pattern prev prior regexp retain-union retain-intersection right rstream sec second seconds select set some snapshot sql stddev sum then true unidirectional until update variable weekday when where window"),builtin:{},atoms:o("false true null"),operatorChars:/^[*+\-%<>!=&|^\/#@?~]/,dateSQL:o("time"),support:o("decimallessFloat zerolessFloat binaryNumber hexNumber")})})})();(function(b,u){(function(t){t(bn.exports)})(function(t){function n(B){for(var $={},q=0;q<B.length;q++)$[B[q]]=!0;return $}var e=n(["_","var","let","class","enum","extension","import","protocol","struct","func","typealias","associatedtype","open","public","internal","fileprivate","private","deinit","init","new","override","self","subscript","super","convenience","dynamic","final","indirect","lazy","required","static","unowned","unowned(safe)","unowned(unsafe)","weak","as","is","break","case","continue","default","else","fallthrough","for","guard","if","in","repeat","switch","where","while","defer","return","inout","mutating","nonmutating","catch","do","rethrows","throw","throws","try","didSet","get","set","willSet","assignment","associativity","infix","left","none","operator","postfix","precedence","precedencegroup","prefix","right","Any","AnyObject","Type","dynamicType","Self","Protocol","__COLUMN__","__FILE__","__FUNCTION__","__LINE__"]),r=n(["var","let","class","enum","extension","import","protocol","struct","func","typealias","associatedtype","for"]),i=n(["true","false","nil","self","super","_"]),a=n(["Array","Bool","Character","Dictionary","Double","Float","Int","Int8","Int16","Int32","Int64","Never","Optional","Set","String","UInt8","UInt16","UInt32","UInt64","Void"]),o="+-/*%=|&<>~^?!",l=":;,.(){}[]",c=/^\-?0b[01][01_]*/,d=/^\-?0o[0-7][0-7_]*/,v=/^\-?0x[\dA-Fa-f][\dA-Fa-f_]*(?:(?:\.[\dA-Fa-f][\dA-Fa-f_]*)?[Pp]\-?\d[\d_]*)?/,h=/^\-?\d[\d_]*(?:\.\d[\d_]*)?(?:[Ee]\-?\d[\d_]*)?/,g=/^\$\d+|(`?)[_A-Za-z][_A-Za-z$0-9]*\1/,w=/^\.(?:\$\d+|(`?)[_A-Za-z][_A-Za-z$0-9]*\1)/,x=/^\#[A-Za-z]+/,_=/^@(?:\$\d+|(`?)[_A-Za-z][_A-Za-z$0-9]*\1)/;function E(B,$,q){if(B.sol()&&($.indented=B.indentation()),B.eatSpace())return null;var G=B.peek();if(G=="/"){if(B.match("//"))return B.skipToEnd(),"comment";if(B.match("/*"))return $.tokenize.push(S),S(B,$)}if(B.match(x))return"builtin";if(B.match(_))return"attribute";if(B.match(c)||B.match(d)||B.match(v)||B.match(h))return"number";if(B.match(w))return"property";if(o.indexOf(G)>-1)return B.next(),"operator";if(l.indexOf(G)>-1)return B.next(),B.match(".."),"punctuation";var H;if(H=B.match(/("""|"|')/)){var z=T.bind(null,H[0]);return $.tokenize.push(z),z(B,$)}if(B.match(g)){var O=B.current();return a.hasOwnProperty(O)?"variable-2":i.hasOwnProperty(O)?"atom":e.hasOwnProperty(O)?(r.hasOwnProperty(O)&&($.prev="define"),"keyword"):q=="define"?"def":"variable"}return B.next(),null}function M(){var B=0;return function($,q,G){var H=E($,q,G);if(H=="punctuation"){if($.current()=="(")++B;else if($.current()==")"){if(B==0)return $.backUp(1),q.tokenize.pop(),q.tokenize[q.tokenize.length-1]($,q);--B}}return H}}function T(B,$,q){for(var G=B.length==1,H,z=!1;H=$.peek();)if(z){if($.next(),H=="(")return q.tokenize.push(M()),"string";z=!1}else{if($.match(B))return q.tokenize.pop(),"string";$.next(),z=H=="\\"}return G&&q.tokenize.pop(),"string"}function S(B,$){for(var q;B.match(/^[^/*]+/,!0),q=B.next(),!!q;)q==="/"&&B.eat("*")?$.tokenize.push(S):q==="*"&&B.eat("/")&&$.tokenize.pop();return"comment"}function D(B,$,q){this.prev=B,this.align=$,this.indented=q}function I(B,$){var q=$.match(/^\s*($|\/[\/\*])/,!1)?null:$.column()+1;B.context=new D(B.context,q,B.indented)}function P(B){B.context&&(B.indented=B.context.indented,B.context=B.context.prev)}t.defineMode("swift",function(B){return{startState:function(){return{prev:null,context:null,indented:0,tokenize:[]}},token:function($,q){var G=q.prev;q.prev=null;var H=q.tokenize[q.tokenize.length-1]||E,z=H($,q,G);if(!z||z=="comment"?q.prev=G:q.prev||(q.prev=z),z=="punctuation"){var O=/[\(\[\{]|([\]\)\}])/.exec($.current());O&&(O[1]?P:I)(q,$)}return z},indent:function($,q){var G=$.context;if(!G)return 0;var H=/^[\]\}\)]/.test(q);return G.align!=null?G.align-(H?1:0):G.indented+(H?0:B.indentUnit)},electricInput:/^\s*[\)\}\]]$/,lineComment:"//",blockCommentStart:"/*",blockCommentEnd:"*/",fold:"brace",closeBrackets:"()[]{}''\"\"``"}}),t.defineMIME("text/x-swift","swift")})})();(function(b,u){(function(t){t(bn.exports)})(function(t){t.defineMode("vb",function(n,e){var r="error";function i(L){return new RegExp("^(("+L.join(")|(")+"))\\b","i")}var a=new RegExp("^[\\+\\-\\*/%&\\\\|\\^~<>!]"),o=new RegExp("^[\\(\\)\\[\\]\\{\\}@,:`=;\\.]"),l=new RegExp("^((==)|(<>)|(<=)|(>=)|(<>)|(<<)|(>>)|(//)|(\\*\\*))"),c=new RegExp("^((\\+=)|(\\-=)|(\\*=)|(%=)|(/=)|(&=)|(\\|=)|(\\^=))"),d=new RegExp("^((//=)|(>>=)|(<<=)|(\\*\\*=))"),v=new RegExp("^[_A-Za-z][_A-Za-z0-9]*"),h=["class","module","sub","enum","select","while","if","function","get","set","property","try","structure","synclock","using","with"],g=["else","elseif","case","catch","finally"],w=["next","loop"],x=["and","andalso","or","orelse","xor","in","not","is","isnot","like"],_=i(x),E=["#const","#else","#elseif","#end","#if","#region","addhandler","addressof","alias","as","byref","byval","cbool","cbyte","cchar","cdate","cdbl","cdec","cint","clng","cobj","compare","const","continue","csbyte","cshort","csng","cstr","cuint","culng","cushort","declare","default","delegate","dim","directcast","each","erase","error","event","exit","explicit","false","for","friend","gettype","goto","handles","implements","imports","infer","inherits","interface","isfalse","istrue","lib","me","mod","mustinherit","mustoverride","my","mybase","myclass","namespace","narrowing","new","nothing","notinheritable","notoverridable","of","off","on","operator","option","optional","out","overloads","overridable","overrides","paramarray","partial","private","protected","public","raiseevent","readonly","redim","removehandler","resume","return","shadows","shared","static","step","stop","strict","then","throw","to","true","trycast","typeof","until","until","when","widening","withevents","writeonly"],M=["object","boolean","char","string","byte","sbyte","short","ushort","int16","uint16","integer","uinteger","int32","uint32","long","ulong","int64","uint64","decimal","single","double","float","date","datetime","intptr","uintptr"],T=i(E),S=i(M),D='"',I=i(h),P=i(g),B=i(w),$=i(["end"]),q=i(["do"]);t.registerHelper("hintWords","vb",h.concat(g).concat(w).concat(x).concat(E).concat(M));function G(L,F){F.currentIndent++}function H(L,F){F.currentIndent--}function z(L,F){if(L.eatSpace())return null;var X=L.peek();if(X==="'")return L.skipToEnd(),"comment";if(L.match(/^((&H)|(&O))?[0-9\.a-f]/i,!1)){var se=!1;if((L.match(/^\d*\.\d+F?/i)||L.match(/^\d+\.\d*F?/)||L.match(/^\.\d+F?/))&&(se=!0),se)return L.eat(/J/i),"number";var Y=!1;if(L.match(/^&H[0-9a-f]+/i)||L.match(/^&O[0-7]+/i)?Y=!0:L.match(/^[1-9]\d*F?/)?(L.eat(/J/i),Y=!0):L.match(/^0(?![\dx])/i)&&(Y=!0),Y)return L.eat(/L/i),"number"}return L.match(D)?(F.tokenize=O(L.current()),F.tokenize(L,F)):L.match(d)||L.match(c)?null:L.match(l)||L.match(a)||L.match(_)?"operator":L.match(o)?null:L.match(q)?(G(L,F),F.doInCurrentLine=!0,"keyword"):L.match(I)?(F.doInCurrentLine?F.doInCurrentLine=!1:G(L,F),"keyword"):L.match(P)?"keyword":L.match($)?(H(L,F),H(L,F),"keyword"):L.match(B)?(H(L,F),"keyword"):L.match(S)||L.match(T)?"keyword":L.match(v)?"variable":(L.next(),r)}function O(L){var F=L.length==1,X="string";return function(se,Y){for(;!se.eol();){if(se.eatWhile(/[^'"]/),se.match(L))return Y.tokenize=z,X;se.eat(/['"]/)}if(F){if(e.singleLineStringErrors)return r;Y.tokenize=z}return X}}function Q(L,F){var X=F.tokenize(L,F),se=L.current();if(se===".")return X=F.tokenize(L,F),X==="variable"?"variable":r;var Y="[({".indexOf(se);return Y!==-1&&G(L,F),Y="])}".indexOf(se),Y!==-1&&H(L,F)?r:X}var ie={electricChars:"dDpPtTfFeE ",startState:function(){return{tokenize:z,lastToken:null,currentIndent:0,nextLineIndent:0,doInCurrentLine:!1}},token:function(L,F){L.sol()&&(F.currentIndent+=F.nextLineIndent,F.nextLineIndent=0,F.doInCurrentLine=0);var X=Q(L,F);return F.lastToken={style:X,content:L.current()},X},indent:function(L,F){var X=F.replace(/^\s+|\s+$/g,"");return X.match(B)||X.match($)||X.match(P)?n.indentUnit*(L.currentIndent-1):L.currentIndent<0?0:L.currentIndent*n.indentUnit},lineComment:"'"};return ie}),t.defineMIME("text/x-vb","vb")})})();(function(b,u){(function(t){t(bn.exports)})(function(t){t.defineMode("velocity",function(){function n(h){for(var g={},w=h.split(" "),x=0;x<w.length;++x)g[w[x]]=!0;return g}var e=n("#end #else #break #stop #[[ #]] #{end} #{else} #{break} #{stop}"),r=n("#if #elseif #foreach #set #include #parse #macro #define #evaluate #{if} #{elseif} #{foreach} #{set} #{include} #{parse} #{macro} #{define} #{evaluate}"),i=n("$foreach.count $foreach.hasNext $foreach.first $foreach.last $foreach.topmost $foreach.parent.count $foreach.parent.hasNext $foreach.parent.first $foreach.parent.last $foreach.parent $velocityCount $!bodyContent $bodyContent"),a=/[+\-*&%=<>!?:\/|]/;function o(h,g,w){return g.tokenize=w,w(h,g)}function l(h,g){var w=g.beforeParams;g.beforeParams=!1;var x=h.next();if(x=="'"&&!g.inString&&g.inParams)return g.lastTokenWasBuiltin=!1,o(h,g,c(x));if(x=='"'){if(g.lastTokenWasBuiltin=!1,g.inString)return g.inString=!1,"string";if(g.inParams)return o(h,g,c(x))}else{if(/[\[\]{}\(\),;\.]/.test(x))return x=="("&&w?g.inParams=!0:x==")"&&(g.inParams=!1,g.lastTokenWasBuiltin=!0),null;if(/\d/.test(x))return g.lastTokenWasBuiltin=!1,h.eatWhile(/[\w\.]/),"number";if(x=="#"&&h.eat("*"))return g.lastTokenWasBuiltin=!1,o(h,g,d);if(x=="#"&&h.match(/ *\[ *\[/))return g.lastTokenWasBuiltin=!1,o(h,g,v);if(x=="#"&&h.eat("#"))return g.lastTokenWasBuiltin=!1,h.skipToEnd(),"comment";if(x=="$")return h.eat("!"),h.eatWhile(/[\w\d\$_\.{}-]/),i&&i.propertyIsEnumerable(h.current())?"keyword":(g.lastTokenWasBuiltin=!0,g.beforeParams=!0,"builtin");if(a.test(x))return g.lastTokenWasBuiltin=!1,h.eatWhile(a),"operator";h.eatWhile(/[\w\$_{}@]/);var _=h.current();return e&&e.propertyIsEnumerable(_)?"keyword":r&&r.propertyIsEnumerable(_)||h.current().match(/^#@?[a-z0-9_]+ *$/i)&&h.peek()=="("&&!(r&&r.propertyIsEnumerable(_.toLowerCase()))?(g.beforeParams=!0,g.lastTokenWasBuiltin=!1,"keyword"):g.inString?(g.lastTokenWasBuiltin=!1,"string"):h.pos>_.length&&h.string.charAt(h.pos-_.length-1)=="."&&g.lastTokenWasBuiltin?"builtin":(g.lastTokenWasBuiltin=!1,null)}}function c(h){return function(g,w){for(var x=!1,_,E=!1;(_=g.next())!=null;){if(_==h&&!x){E=!0;break}if(h=='"'&&g.peek()=="$"&&!x){w.inString=!0,E=!0;break}x=!x&&_=="\\"}return E&&(w.tokenize=l),"string"}}function d(h,g){for(var w=!1,x;x=h.next();){if(x=="#"&&w){g.tokenize=l;break}w=x=="*"}return"comment"}function v(h,g){for(var w=0,x;x=h.next();){if(x=="#"&&w==2){g.tokenize=l;break}x=="]"?w++:x!=" "&&(w=0)}return"meta"}return{startState:function(){return{tokenize:l,beforeParams:!1,inParams:!1,inString:!1,lastTokenWasBuiltin:!1}},token:function(h,g){return h.eatSpace()?null:g.tokenize(h,g)},blockCommentStart:"#*",blockCommentEnd:"*#",lineComment:"##",fold:"velocity"}}),t.defineMIME("text/velocity","velocity")})})();(function(b,u){(function(t){t(bn.exports)})(function(t){t.defineMode("yaml",function(){var n=["true","false","on","off","yes","no"],e=new RegExp("\\b(("+n.join(")|(")+"))$","i");return{token:function(r,i){var a=r.peek(),o=i.escaped;if(i.escaped=!1,a=="#"&&(r.pos==0||/\s/.test(r.string.charAt(r.pos-1))))return r.skipToEnd(),"comment";if(r.match(/^('([^']|\\.)*'?|"([^"]|\\.)*"?)/))return"string";if(i.literal&&r.indentation()>i.keyCol)return r.skipToEnd(),"string";if(i.literal&&(i.literal=!1),r.sol()){if(i.keyCol=0,i.pair=!1,i.pairStart=!1,r.match("---")||r.match("..."))return"def";if(r.match(/\s*-\s+/))return"meta"}if(r.match(/^(\{|\}|\[|\])/))return a=="{"?i.inlinePairs++:a=="}"?i.inlinePairs--:a=="["?i.inlineList++:i.inlineList--,"meta";if(i.inlineList>0&&!o&&a==",")return r.next(),"meta";if(i.inlinePairs>0&&!o&&a==",")return i.keyCol=0,i.pair=!1,i.pairStart=!1,r.next(),"meta";if(i.pairStart){if(r.match(/^\s*(\||\>)\s*/))return i.literal=!0,"meta";if(r.match(/^\s*(\&|\*)[a-z0-9\._-]+\b/i))return"variable-2";if(i.inlinePairs==0&&r.match(/^\s*-?[0-9\.\,]+\s?$/)||i.inlinePairs>0&&r.match(/^\s*-?[0-9\.\,]+\s?(?=(,|}))/))return"number";if(r.match(e))return"keyword"}return!i.pair&&r.match(/^\s*(?:[,\[\]{}&*!|>'"%@`][^\s'":]|[^,\[\]{}#&*!|>'"%@`])[^#]*?(?=\s*:($|\s))/)?(i.pair=!0,i.keyCol=r.indentation(),"atom"):i.pair&&r.match(/^:\s*/)?(i.pairStart=!0,"meta"):(i.pairStart=!1,i.escaped=a=="\\",r.next(),null)},startState:function(){return{pair:!1,pairStart:!1,keyCol:0,inlinePairs:0,inlineList:0,literal:!1,escaped:!1}},lineComment:"#",fold:"indent"}}),t.defineMIME("text/x-yaml","yaml"),t.defineMIME("text/yaml","yaml")})})();(function(b,u){(function(t){t(bn.exports)})(function(t){function n(i,a,o){this.orientation=a,this.scroll=o,this.screen=this.total=this.size=1,this.pos=0,this.node=document.createElement("div"),this.node.className=i+"-"+a,this.inner=this.node.appendChild(document.createElement("div"));var l=this;t.on(this.inner,"mousedown",function(d){if(d.which!=1)return;t.e_preventDefault(d);var v=l.orientation=="horizontal"?"pageX":"pageY",h=d[v],g=l.pos;function w(){t.off(document,"mousemove",x),t.off(document,"mouseup",w)}function x(_){if(_.which!=1)return w();l.moveTo(g+(_[v]-h)*(l.total/l.size))}t.on(document,"mousemove",x),t.on(document,"mouseup",w)}),t.on(this.node,"click",function(d){t.e_preventDefault(d);var v=l.inner.getBoundingClientRect(),h;l.orientation=="horizontal"?h=d.clientX<v.left?-1:d.clientX>v.right?1:0:h=d.clientY<v.top?-1:d.clientY>v.bottom?1:0,l.moveTo(l.pos+h*l.screen)});function c(d){var v=t.wheelEventPixels(d)[l.orientation=="horizontal"?"x":"y"],h=l.pos;l.moveTo(l.pos+v),l.pos!=h&&t.e_preventDefault(d)}t.on(this.node,"mousewheel",c),t.on(this.node,"DOMMouseScroll",c)}n.prototype.setPos=function(i,a){return i<0&&(i=0),i>this.total-this.screen&&(i=this.total-this.screen),!a&&i==this.pos?!1:(this.pos=i,this.inner.style[this.orientation=="horizontal"?"left":"top"]=i*(this.size/this.total)+"px",!0)},n.prototype.moveTo=function(i){this.setPos(i)&&this.scroll(i,this.orientation)};var e=10;n.prototype.update=function(i,a,o){var l=this.screen!=a||this.total!=i||this.size!=o;l&&(this.screen=a,this.total=i,this.size=o);var c=this.screen*(this.size/this.total);c<e&&(this.size-=e-c,c=e),this.inner.style[this.orientation=="horizontal"?"width":"height"]=c+"px",this.setPos(this.pos,l)};function r(i,a,o){this.addClass=i,this.horiz=new n(i,"horizontal",o),a(this.horiz.node),this.vert=new n(i,"vertical",o),a(this.vert.node),this.width=null}r.prototype.update=function(i){if(this.width==null){var a=window.getComputedStyle?window.getComputedStyle(this.horiz.node):this.horiz.node.currentStyle;a&&(this.width=parseInt(a.height))}var o=this.width||0,l=i.scrollWidth>i.clientWidth+1,c=i.scrollHeight>i.clientHeight+1;return this.vert.node.style.display=c?"block":"none",this.horiz.node.style.display=l?"block":"none",c&&(this.vert.update(i.scrollHeight,i.clientHeight,i.viewHeight-(l?o:0)),this.vert.node.style.bottom=l?o+"px":"0"),l&&(this.horiz.update(i.scrollWidth,i.clientWidth,i.viewWidth-(c?o:0)-i.barLeft),this.horiz.node.style.right=c?o+"px":"0",this.horiz.node.style.left=i.barLeft+"px"),{right:c?o:0,bottom:l?o:0}},r.prototype.setScrollTop=function(i){this.vert.setPos(i)},r.prototype.setScrollLeft=function(i){this.horiz.setPos(i)},r.prototype.clear=function(){var i=this.horiz.node.parentNode;i.removeChild(this.horiz.node),i.removeChild(this.vert.node)},t.scrollbarModel.simple=function(i,a){return new r("CodeMirror-simplescroll",i,a)},t.scrollbarModel.overlay=function(i,a){return new r("CodeMirror-overlayscroll",i,a)}})})();var M_=["c","cpp","csharp","erlang","go","groovy","java","kotlin","makefile","objectivec","perl","python","rust","swift","vbnet"],qm=function(){function b(u,t){Fe(this,b),this.editor=void 0,this.options=void 0,this.codeMirror=void 0,this.mode="plain",this.container=void 0,this.editor=u,this.options=t,this.container=t.container||V(this.renderTemplate())}return Be(b,[{key:"renderTemplate",value:function(){return'<div class="data-codeblock-container"><div class="data-codeblock-content"></div></div>'}},{key:"getConfig",value:function(t,n){var e=this.codeMirror?this.codeMirror.getOption("indentUnit"):M_.indexOf(n||"")>-1?4:2,r=t?t.match(/^ {2,4}(?=[^\s])/gm):null;return r&&(e=r.reduce(function(i,a){return Math.min(i,a.length)},1/0)),{tabSize:e,indentUnit:e,scrollbarStyle:"simple",readOnly:!ge(this.editor)||this.editor.readonly,viewportMargin:1/0}}},{key:"getSyntax",value:function(t){return this.options.synatxMap[t]||t}},{key:"create",value:function(t,n,e){var r=this;this.mode=t;var i=this.getSyntax(t);return this.codeMirror=yd(this.container.find(".data-codeblock-content").get(),Ie(Ie({value:n,mode:i,lineNumbers:!0,lineWrapping:!1,autofocus:!1,dragDrop:!1},this.getConfig(n,i)),e)),this.codeMirror.on("mousedown",function(a,o){(!ge(r.editor)||r.editor.readonly)&&(o.preventDefault(),o.stopPropagation())}),this.codeMirror.on("focus",function(){var a=r.options.onFocus;a&&a()}),this.codeMirror.on("blur",function(){var a,o=r.options.onBlur;(a=r.codeMirror)===null||a===void 0||a.setCursor(r.codeMirror.lineCount()-1,0),o&&o()}),mt?this.codeMirror.on("touchstart",function(a,o){var l=r.options.onMouseDown;l&&l(o)}):this.codeMirror.on("mousedown",function(a,o){var l=r.options.onMouseDown;l&&l(o)}),this.codeMirror.on("change",Kt.exports.debounce(function(){!ge(r.editor)||r.save()},50)),this.codeMirror.setOption("extraKeys",{Enter:function(o){var l=r.getConfig(o.getValue());Object.keys(l).forEach(function(c){return o.setOption(c,l[c])}),o.execCommand("newlineAndIndent")}}),this.codeMirror.on("keydown",function(a,o){(yt("mod+z",o)||yt("mod+y",o)||yt("mod+shift+z",o))&&o.stopPropagation();var l=a.lineCount(),c=a.getCursor(),d=c.line,v=c.ch,h=r.options,g=h.onUpFocus,w=h.onDownFocus,x=h.onLeftFocus,_=h.onRightFocus,E=a.getLine(d);if(d===l-1&&v===E.length){if(yt("down",o)||yt("ctrl+n",o)){w&&w(o);return}else if(yt("right",o)||yt("shift+right",o)||yt("ctrl+e",o)||yt("ctrl+f",o)){_&&_(o);return}}d===0&&v===0&&(yt("up",o)||yt("ctrl+p",o)?g&&g(o):(yt("left",o)||yt("shift+left",o)||yt("ctrl+b",o)||yt("ctrl+a",o))&&x&&x(o))}),this.container.on("mousedown",function(a){var o;!((o=r.codeMirror)===null||o===void 0)&&o.hasFocus()||setTimeout(function(){var l;(l=r.codeMirror)===null||l===void 0||l.focus()},0)}),this.codeMirror}},{key:"setAutoWrap",value:function(t){var n;(n=this.codeMirror)===null||n===void 0||n.setOption("lineWrapping",t)}},{key:"update",value:function(t,n){var e,r;if(this.mode=t,n!==void 0){var i;(i=this.codeMirror)===null||i===void 0||i.setValue(n)}(e=this.codeMirror)===null||e===void 0||e.setOption("mode",this.getSyntax(t)),(r=this.codeMirror)===null||r===void 0||r.setOption("readOnly",!!(!ge(this.editor)||this.editor.readonly)),this.save()}},{key:"render",value:function(t,n,e){var r=this.container.find(".data-codeblock-content");t=this.getSyntax(t);var i=V('<div class="CodeMirror"><pre class="cm-s-default" /></div>');r.append(i);var a=i.find("pre")[0];this.runMode(n||"",t,a,Ie(Ie({},this.getConfig(n,t)),e))}},{key:"save",value:function(){if(!(!ge(this.editor)||!this.codeMirror)&&!this.editor.change.isComposing()){var t=this.codeMirror.getValue(),n=this.options.onSave;n&&n(this.mode,t)}}},{key:"focus",value:function(){!this.codeMirror||this.codeMirror.focus()}},{key:"select",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;if(!!this.codeMirror)if(this.codeMirror.focus(),t)this.codeMirror.setSelection({line:0,ch:0});else{var n=this.codeMirror.lineCount()-1,e=this.codeMirror.getLine(n);this.codeMirror.setSelection({line:n,ch:e.length})}}},{key:"runMode",value:function(t,n,e,r){var i=yd.getMode(yd.defaults,n);if(/MSIE \d/.test(navigator.userAgent),e.appendChild){var a=r&&r.tabSize||yd.defaults.tabSize,o=e,l=0;o.innerHTML="",e=function(_,E){if(_===`
`){var M=document.createElement("br");o.appendChild(M),l=0;return}for(var T="",S=0;;){var D=_.indexOf("	",S);if(D===-1){T+=_.slice(S),l+=_.length-S;break}else{l+=D-S,T+=_.slice(S,D);var I=a-l%a;l+=I;for(var P=0;P<I;++P)T+=" ";S=D+1}}if(E){var B=o.appendChild(document.createElement("span"));B.className="cm-"+E.replace(/ +/g," cm-"),B.appendChild(document.createTextNode(T))}else o.appendChild(document.createTextNode(T))}}for(var c=yd.splitLines(t),d=r&&r.state||yd.startState(i),v=0,h=c.length;v<h;++v){v&&e(`
`);var g=new yd.StringStream(c[v]);for(!g.string&&i.blankLine&&i.blankLine(d);!g.eol();){var w=i.token?i.token(g,d):"";e(g.current(),w,v,g.start,d),g.start=g.pos}}}}]),b}(),T_=hm.Option,Yp=or({name:"am-codeblock-select",components:{ASelect:hm,ASelectOption:T_},props:{modeDatas:Array,defaultValue:String,getContainer:Function,onSelect:Function},methods:{filter:function(u,t){u=u.toLowerCase();var n=t.key||"",e=t.name||"";return e=e.toLowerCase(),n.includes(u)||e.includes(u)}}});function A_(b,u,t,n,e,r){var i=Tn("a-select-option"),a=Tn("a-select");return ct(),hr(a,{"show-search":!0,size:"small",bordered:!1,style:{"min-width":"128px"},"default-value":b.defaultValue,"get-popup-container":b.getContainer,onSelect:b.onSelect,"filter-option":b.filter},{default:Pn(function(){return[(ct(!0),zt(da,null,So(b.modeDatas,function(o){return ct(),hr(i,{name:o.name,value:o.value,key:o.value},{default:Pn(function(){return[Nc(pi(o.name),1)]}),_:2},1032,["name","value"])}),128))]}),_:1},8,["default-value","get-popup-container","onSelect","filter-option"])}Yp.render=A_;Yp.__file="src/component/select/component.vue";var N_=function(b,u,t,n){var e=xu(Yp,{modeDatas:u,defaultValue:t,getContainer:b?function(){return b}:void 0,onSelect:n});return e.mount(b),e},Xg=[{value:"plain",syntax:"simplemode",name:"Plain Text"},{value:"bash",syntax:"shell",name:"Bash"},{value:"basic",syntax:"vbscript",name:"Basic"},{value:"c",syntax:"text/x-csrc",name:"C"},{value:"cpp",syntax:"text/x-c++src",name:"C++"},{value:"csharp",syntax:"text/x-csharp",name:"C#"},{value:"css",syntax:"css",name:"CSS"},{value:"dart",syntax:"dart",name:"Dart"},{value:"diff",syntax:"diff",name:"Diff"},{value:"dockerfile",syntax:"dockerfile",name:"Dockerfile"},{value:"erlang",syntax:"erlang",name:"Erlang"},{value:"git",syntax:"shell",name:"Git"},{value:"go",syntax:"go",name:"Go"},{value:"graphql",syntax:"simplemode",name:"GraphQL"},{value:"groovy",syntax:"groovy",name:"Groovy"},{value:"html",syntax:"htmlmixed",name:"HTML"},{value:"http",syntax:"http",name:"HTTP"},{value:"java",syntax:"text/x-java",name:"Java"},{value:"javascript",syntax:"text/javascript",name:"JavaScript"},{value:"json",syntax:"application/json",name:"JSON"},{value:"jsx",syntax:"jsx",name:"JSX"},{value:"katex",syntax:"simplemode",name:"KaTeX"},{value:"kotlin",syntax:"text/x-kotlin",name:"Kotlin"},{value:"less",syntax:"css",name:"Less"},{value:"makefile",syntax:"cmake",name:"Makefile"},{value:"markdown",syntax:"markdown",name:"Markdown"},{value:"matlab",syntax:"octave",name:"MATLAB"},{value:"nginx",syntax:"nginx",name:"Nginx"},{value:"objectivec",syntax:"text/x-objectivec",name:"Objective-C"},{value:"pascal",syntax:"pascal",name:"Pascal"},{value:"perl",syntax:"perl",name:"Perl"},{value:"php",syntax:"php",name:"PHP"},{value:"powershell",syntax:"powershell",name:"PowerShell"},{value:"protobuf",syntax:"protobuf",name:"Protobuf"},{value:"python",syntax:"python",name:"Python"},{value:"r",syntax:"r",name:"R"},{value:"ruby",syntax:"ruby",name:"Ruby"},{value:"rust",syntax:"rust",name:"Rust"},{value:"scala",syntax:"text/x-scala",name:"Scala"},{value:"shell",syntax:"shell",name:"Shell"},{value:"sql",syntax:"text/x-sql",name:"SQL"},{value:"swift",syntax:"swift",name:"Swift"},{value:"typescript",syntax:"text/typescript",name:"TypeScript"},{value:"vbnet",syntax:"vb",name:"VB.net"},{value:"velocity",syntax:"velocity",name:"Velocity"},{value:"xml",syntax:"xml",name:"XML"},{value:"yaml",syntax:"yaml",name:"YAML"}];function D_(b,u){u===void 0&&(u={});var t=u.insertAt;if(!(!b||typeof document=="undefined")){var n=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",t==="top"&&n.firstChild?n.insertBefore(e,n.firstChild):n.appendChild(e),e.styleSheet?e.styleSheet.cssText=b:e.appendChild(document.createTextNode(b))}}var I_=`.data-codeblock-container {\r
     position: relative;\r
     padding: 0;\r
     overflow: visible;\r
     border: 1px solid #e8e8e8;\r
     border-radius: 2px 2px;\r
     text-indent: 0;\r
 }\r
 \r
 .data-codeblock-container .am-embed-toolbar-item {\r
     float: right;\r
     line-height: 32px;\r
 }\r
 \r
 .data-codeblock-content {\r
      background: #f9f9f9;\r
      overflow: auto;\r
 }\r
 \r
 .am-engine .CodeMirror,\r
 .am-engine-view .CodeMirror {\r
      font-family: monospace;\r
      font-size: 13px;\r
      line-height: 21px;\r
      color: #595959;\r
      direction: ltr;\r
      height: auto;\r
      overflow: hidden;\r
      background: transparent;\r
 }\r
 \r
 .am-engine .CodeMirror-lines,\r
 .am-engine-view .CodeMirror-lines {\r
      padding: 8px 0;\r
 }\r
 \r
 .am-engine .CodeMirror-scrollbar-filler,\r
 .am-engine-view .CodeMirror-scrollbar-filler,\r
 .am-engine .CodeMirror-gutter-filler,\r
 .am-engine-view .CodeMirror-gutter-filler {\r
      background-color: white;\r
     \r
     /* The little square between H and V scrollbars */\r
     \r
 }\r
 \r
 .am-engine .CodeMirror-gutters,\r
 .am-engine-view .CodeMirror-gutters {\r
      border: 0;\r
      white-space: nowrap;\r
      padding: 0 8px;\r
      background-color: unset;\r
     \r
 }\r
 \r
 .am-engine .CodeMirror-linenumber,\r
 .am-engine-view .CodeMirror-linenumber {\r
      padding: 0;\r
      min-width: 20px;\r
      text-align: right;\r
      color: #BFBFBF;\r
      white-space: nowrap;\r
     \r
 }\r
 \r
 .am-engine .CodeMirror-guttermarker,\r
 .am-engine-view .CodeMirror-guttermarker {\r
      color: black;\r
     \r
 }\r
 \r
 .am-engine .CodeMirror-guttermarker-subtle,\r
 .am-engine-view .CodeMirror-guttermarker-subtle {\r
      color: #999;\r
     \r
 }\r
 \r
 .am-engine .CodeMirror-cursor,\r
 .am-engine-view .CodeMirror-cursor {\r
      border-left: 1px solid black;\r
      border-right: none;\r
      width: 0;\r
     \r
 }\r
 \r
 .am-engine .CodeMirror div.CodeMirror-secondarycursor,\r
 .am-engine-view .CodeMirror div.CodeMirror-secondarycursor {\r
      border-left: 1px solid silver;\r
     \r
 }\r
 \r
 .am-engine .cm-fat-cursor .CodeMirror-cursor,\r
 .am-engine-view .cm-fat-cursor .CodeMirror-cursor {\r
      width: auto;\r
      border: 0 !important;\r
      background: #7e7;\r
     \r
 }\r
 \r
 .am-engine .cm-fat-cursor div.CodeMirror-cursors,\r
 .am-engine-view .cm-fat-cursor div.CodeMirror-cursors {\r
      z-index: 1;\r
     \r
 }\r
 \r
 .am-engine .cm-fat-cursor-mark,\r
 .am-engine-view .cm-fat-cursor-mark {\r
      background-color: rgba(20, 255, 20, 0.5);\r
      -webkit-animation: blink 1.06s steps(1) infinite;\r
      animation: blink 1.06s steps(1) infinite;\r
     \r
 }\r
 \r
 .am-engine .cm-animate-fat-cursor,\r
 .am-engine-view .cm-animate-fat-cursor {\r
      width: auto;\r
      border: 0;\r
      -webkit-animation: blink 1.06s steps(1) infinite;\r
      animation: blink 1.06s steps(1) infinite;\r
      background-color: #7e7;\r
     \r
 }\r
 \r
 @-webkit-keyframes blink {\r
      50% {\r
          background-color: transparent;\r
         \r
     }\r
 \r
     \r
 }\r
 \r
 @keyframes blink {\r
      50% {\r
          background-color: transparent;\r
         \r
     }\r
 \r
     \r
 }\r
 \r
 .am-engine .cm-tab,\r
 .am-engine-view .cm-tab {\r
      display: inline-block;\r
      text-decoration: inherit;\r
     \r
 }\r
 \r
 .am-engine .CodeMirror-rulers,\r
 .am-engine-view .CodeMirror-rulers {\r
      position: absolute;\r
      left: 0;\r
      right: 0;\r
      top: -50px;\r
      bottom: -20px;\r
      overflow: hidden;\r
     \r
 }\r
 \r
 .am-engine .CodeMirror-ruler,\r
 .am-engine-view .CodeMirror-ruler {\r
      border-left: 1px solid #ccc;\r
      top: 0;\r
      bottom: 0;\r
      position: absolute;\r
     \r
 }\r
 \r
 .am-engine .cm-s-default .cm-header,\r
 .am-engine-view .cm-s-default .cm-header {\r
      color: blue;\r
     \r
 }\r
 \r
 .am-engine .cm-s-default .cm-quote,\r
 .am-engine-view .cm-s-default .cm-quote {\r
      color: #090;\r
     \r
 }\r
 \r
 .am-engine .cm-negative,\r
 .am-engine-view .cm-negative {\r
      color: #d44;\r
     \r
 }\r
 \r
 .am-engine .cm-positive,\r
 .am-engine-view .cm-positive {\r
      color: #292;\r
     \r
 }\r
 \r
 .am-engine .cm-header,\r
 .am-engine-view .cm-header,\r
 .am-engine .cm-strong,\r
 .am-engine-view .cm-strong {\r
      font-weight: bold;\r
     \r
 }\r
 \r
 .am-engine .cm-em,\r
 .am-engine-view .cm-em {\r
      font-style: italic;\r
     \r
 }\r
 \r
 .am-engine .cm-link,\r
 .am-engine-view .cm-link {\r
      text-decoration: underline;\r
     \r
 }\r
 \r
 .am-engine .cm-strikethrough,\r
 .am-engine-view .cm-strikethrough {\r
      text-decoration: line-through;\r
     \r
 }\r
 \r
 .am-engine .cm-s-default .cm-keyword,\r
 .am-engine-view .cm-s-default .cm-keyword {\r
      color: #d73a49;\r
     \r
 }\r
 \r
 .am-engine .cm-s-default .cm-atom,\r
 .am-engine-view .cm-s-default .cm-atom {\r
      color: #905;\r
     \r
 }\r
 \r
 .am-engine .cm-s-default .cm-number,\r
 .am-engine-view .cm-s-default .cm-number {\r
      color: #005cc5;\r
     \r
 }\r
 \r
 .am-engine .cm-s-default .cm-def,\r
 .am-engine-view .cm-s-default .cm-def {\r
      color: #005cc5;\r
     \r
 }\r
 \r
 .am-engine .cm-s-default .cm-variable-2,\r
 .am-engine-view .cm-s-default .cm-variable-2 {\r
      color: #005cc5;\r
     \r
 }\r
 \r
 .am-engine .cm-s-default .cm-variable-3,\r
 .am-engine-view .cm-s-default .cm-variable-3,\r
 .am-engine .cm-s-default .cm-type,\r
 .am-engine-view .cm-s-default .cm-type {\r
      color: #22863a;\r
     \r
 }\r
 \r
 .am-engine .cm-s-default .cm-comment,\r
 .am-engine-view .cm-s-default .cm-comment {\r
      color: #6a737d;\r
     \r
 }\r
 \r
 .am-engine .cm-s-default .cm-string,\r
 .am-engine-view .cm-s-default .cm-string {\r
      color: #690;\r
     \r
 }\r
 \r
 .am-engine .cm-s-default .cm-string-2,\r
 .am-engine-view .cm-s-default .cm-string-2 {\r
      color: #690;\r
     \r
 }\r
 \r
 .am-engine .cm-s-default .cm-meta,\r
 .am-engine-view .cm-s-default .cm-meta {\r
      color: #1f7f9a;\r
     \r
 }\r
 \r
 .am-engine .cm-s-default .cm-qualifier,\r
 .am-engine-view .cm-s-default .cm-qualifier {\r
      color: #555;\r
     \r
 }\r
 \r
 .am-engine .cm-s-default .cm-builtin,\r
 .am-engine-view .cm-s-default .cm-builtin {\r
      color: #6f42c1;\r
     \r
 }\r
 \r
 .am-engine .cm-s-default .cm-bracket,\r
 .am-engine-view .cm-s-default .cm-bracket {\r
      color: #997;\r
     \r
 }\r
 \r
 .am-engine .cm-s-default .cm-tag,\r
 .am-engine-view .cm-s-default .cm-tag {\r
      color: #22863a;\r
     \r
 }\r
 \r
 .am-engine .cm-s-default .cm-attribute,\r
 .am-engine-view .cm-s-default .cm-attribute {\r
      color: #6f42c1;\r
     \r
 }\r
 \r
 .am-engine .cm-s-default .cm-hr,\r
 .am-engine-view .cm-s-default .cm-hr {\r
      color: #999;\r
     \r
 }\r
 \r
 .am-engine .cm-s-default .cm-link,\r
 .am-engine-view .cm-s-default .cm-link {\r
      color: #00c;\r
     \r
 }\r
 \r
 .am-engine .cm-s-default .cm-error,\r
 .am-engine-view .cm-s-default .cm-error {\r
      color: #f00;\r
     \r
 }\r
 \r
 .am-engine .cm-invalidchar,\r
 .am-engine-view .cm-invalidchar {\r
      color: #f00;\r
     \r
 }\r
 \r
 .am-engine .cm-s-default .cm-operator,\r
 .am-engine-view .cm-s-default .cm-operator {\r
      color: #d73a49;\r
     \r
 }\r
 \r
 .am-engine .cm-s-default .cm-property,\r
 .am-engine-view .cm-s-default .cm-property {\r
      color: #005cc5;\r
     \r
 }\r
 \r
 .am-engine .CodeMirror-composing,\r
 .am-engine-view .CodeMirror-composing {\r
      border-bottom: 2px solid;\r
     \r
 }\r
 \r
 .am-engine div.CodeMirror span.CodeMirror-matchingbracket,\r
 .am-engine-view div.CodeMirror span.CodeMirror-matchingbracket {\r
      color: #0b0;\r
     \r
 }\r
 \r
 .am-engine div.CodeMirror span.CodeMirror-nonmatchingbracket,\r
 .am-engine-view div.CodeMirror span.CodeMirror-nonmatchingbracket {\r
      color: #a22;\r
     \r
 }\r
 \r
 .am-engine .CodeMirror-matchingtag,\r
 .am-engine-view .CodeMirror-matchingtag {\r
      background: rgba(255, 150, 0, 0.3);\r
     \r
 }\r
 \r
 .am-engine .CodeMirror-activeline-background,\r
 .am-engine-view .CodeMirror-activeline-background {\r
      background: transparent;\r
     \r
 }\r
 \r
 .am-engine .CodeMirror-scroll,\r
 .am-engine-view .CodeMirror-scroll {\r
      overflow: scroll !important;\r
     \r
     /* Things will break if this is overridden */\r
     \r
     /* 30px is the magic margin used to hide the element's real scrollbars */\r
     \r
     /* See overflow: hidden in .CodeMirror */\r
      margin-bottom: -50px;\r
      margin-right: -50px;\r
      padding-bottom: 50px;\r
      outline: none;\r
     \r
     /* Prevent dragging from highlighting the element */\r
      position: relative;\r
      z-index: 0;\r
     \r
 }\r
 \r
 .am-engine .CodeMirror-sizer,\r
 .am-engine-view .CodeMirror-sizer {\r
      position: relative;\r
      border-right: 50px solid transparent;\r
      min-height: auto !important;\r
     \r
 }\r
 \r
 .am-engine .CodeMirror-vscrollbar,\r
 .am-engine-view .CodeMirror-vscrollbar,\r
 .am-engine .CodeMirror-hscrollbar,\r
 .am-engine-view .CodeMirror-hscrollbar,\r
 .am-engine .CodeMirror-scrollbar-filler,\r
 .am-engine-view .CodeMirror-scrollbar-filler,\r
 .am-engine .CodeMirror-gutter-filler,\r
 .am-engine-view .CodeMirror-gutter-filler {\r
      position: absolute;\r
      z-index: 6;\r
      display: none;\r
     \r
 }\r
 \r
 .am-engine .CodeMirror-vscrollbar,\r
 .am-engine-view .CodeMirror-vscrollbar {\r
      right: 0;\r
      top: 0;\r
      overflow-x: hidden;\r
      overflow-y: scroll;\r
      display: none;\r
     \r
 }\r
 \r
 .am-engine .CodeMirror-hscrollbar,\r
 .am-engine-view .CodeMirror-hscrollbar {\r
      bottom: 0;\r
      left: 0;\r
      overflow-y: hidden;\r
      overflow-x: scroll;\r
      display: none;\r
     \r
 }\r
 \r
 .am-engine .CodeMirror-scrollbar-filler,\r
 .am-engine-view .CodeMirror-scrollbar-filler {\r
      right: 0;\r
      bottom: 0;\r
     \r
 }\r
 \r
 .am-engine .CodeMirror-gutter-filler,\r
 .am-engine-view .CodeMirror-gutter-filler {\r
      left: 0;\r
      bottom: 0;\r
     \r
 }\r
 \r
 .am-engine .CodeMirror-gutters,\r
 .am-engine-view .CodeMirror-gutters {\r
      position: absolute;\r
      left: 0;\r
      top: 0;\r
      min-height: 100%;\r
      background: #f9f9f9;\r
      z-index: 3;\r
 }\r
 \r
 .am-engine .CodeMirror-gutter,\r
 .am-engine-view .CodeMirror-gutter {\r
      white-space: normal;\r
      height: 100%;\r
      display: inline-block;\r
      vertical-align: top;\r
      margin-bottom: -30px;\r
     \r
 }\r
 \r
 .am-engine .CodeMirror-gutter-wrapper,\r
 .am-engine-view .CodeMirror-gutter-wrapper {\r
      position: absolute;\r
      z-index: 4;\r
      background: none !important;\r
      border: none !important;\r
     \r
 }\r
 \r
 .am-engine .CodeMirror-gutter-background,\r
 .am-engine-view .CodeMirror-gutter-background {\r
      position: absolute;\r
      top: 0;\r
      bottom: 0;\r
      z-index: 4;\r
     \r
 }\r
 \r
 .am-engine .CodeMirror-gutter-elt,\r
 .am-engine-view .CodeMirror-gutter-elt {\r
      position: absolute;\r
      cursor: default;\r
      z-index: 4;\r
     \r
 }\r
 \r
 .am-engine .CodeMirror-gutter-wrapper ::-moz-selection,\r
 .am-engine-view .CodeMirror-gutter-wrapper ::-moz-selection {\r
      background-color: transparent;\r
     \r
 }\r
 \r
 .am-engine .CodeMirror-gutter-wrapper ::selection,\r
 .am-engine-view .CodeMirror-gutter-wrapper ::selection {\r
      background-color: transparent;\r
     \r
 }\r
 \r
 .am-engine .CodeMirror-gutter-wrapper ::-moz-selection,\r
 .am-engine-view .CodeMirror-gutter-wrapper ::-moz-selection {\r
      background-color: transparent;\r
     \r
 }\r
 \r
 .am-engine .CodeMirror-lines,\r
 .am-engine-view .CodeMirror-lines {\r
      cursor: text;\r
      min-height: 40px;\r
     \r
     /* prevents collapsing before first draw */\r
     \r
 }\r
 \r
 .am-engine .CodeMirror pre,\r
 .am-engine-view .CodeMirror pre {\r
     \r
     /* Reset some styles that the rest of the page might have set */\r
      border-radius: 0;\r
      border-width: 0;\r
      background: transparent;\r
      font-family: inherit;\r
      font-size: inherit;\r
      margin: 0;\r
      white-space: pre;\r
      word-wrap: normal;\r
      line-height: inherit;\r
      color: inherit;\r
      z-index: 2;\r
      position: relative;\r
      overflow: visible;\r
      -webkit-tap-highlight-color: transparent;\r
      font-variant-ligatures: contextual;\r
     \r
 }\r
 \r
 .am-engine .CodeMirror-wrap pre,\r
 .am-engine-view .CodeMirror-wrap pre {\r
      word-wrap: break-word;\r
      white-space: pre-wrap;\r
      word-break: normal;\r
     \r
 }\r
 \r
 .am-engine .CodeMirror-linebackground,\r
 .am-engine-view .CodeMirror-linebackground {\r
      position: absolute;\r
      left: 0;\r
      right: 0;\r
      top: 0;\r
      bottom: 0;\r
      z-index: 0;\r
     \r
 }\r
 \r
 .am-engine .CodeMirror-linewidget,\r
 .am-engine-view .CodeMirror-linewidget {\r
      position: relative;\r
      z-index: 2;\r
      padding: 0.1px;\r
     \r
     /* Force widget margins to stay inside of the container */\r
     \r
 }\r
 \r
 .am-engine .CodeMirror-rtl pre,\r
 .am-engine-view .CodeMirror-rtl pre {\r
      direction: rtl;\r
     \r
 }\r
 \r
 .am-engine .CodeMirror-code,\r
 .am-engine-view .CodeMirror-code {\r
      outline: none;\r
     \r
 }\r
 \r
 .am-engine .CodeMirror-scroll,\r
 .am-engine-view .CodeMirror-scroll,\r
 .am-engine .CodeMirror-sizer,\r
 .am-engine-view .CodeMirror-sizer,\r
 .am-engine .CodeMirror-gutter,\r
 .am-engine-view .CodeMirror-gutter,\r
 .am-engine .CodeMirror-gutters,\r
 .am-engine-view .CodeMirror-gutters,\r
 .am-engine .CodeMirror-linenumber,\r
 .am-engine-view .CodeMirror-linenumber {\r
      box-sizing: content-box;\r
     \r
 }\r
 \r
 .am-engine .CodeMirror-simplescroll-horizontal, .am-engine-view .CodeMirror-simplescroll-horizontal {\r
      bottom: 4px;\r
      cursor: pointer;\r
 }\r
 \r
 .am-engine .CodeMirror-measure,\r
 .am-engine-view .CodeMirror-measure {\r
      position: absolute;\r
      width: 100%;\r
      height: 0;\r
      overflow: hidden;\r
      visibility: hidden;\r
     \r
 }\r
 \r
 .am-engine .CodeMirror-cursor,\r
 .am-engine-view .CodeMirror-cursor {\r
      position: absolute;\r
      pointer-events: none;\r
     \r
 }\r
 \r
 .am-engine .CodeMirror-measure pre,\r
 .am-engine-view .CodeMirror-measure pre {\r
      position: static;\r
     \r
 }\r
 \r
 .am-engine div.CodeMirror-cursors,\r
 .am-engine-view div.CodeMirror-cursors {\r
      visibility: hidden;\r
      position: relative;\r
      z-index: 3;\r
     \r
 }\r
 \r
 .am-engine div.CodeMirror-dragcursors,\r
 .am-engine-view div.CodeMirror-dragcursors {\r
      visibility: visible;\r
     \r
 }\r
 \r
 .am-engine .CodeMirror-focused div.CodeMirror-cursors,\r
 .am-engine-view .CodeMirror-focused div.CodeMirror-cursors {\r
      visibility: visible;\r
     \r
 }\r
 \r
 .am-engine .CodeMirror-selected,\r
 .am-engine-view .CodeMirror-selected {\r
      background: #e8e8e8;\r
     \r
 }\r
 \r
 .am-engine .CodeMirror-focused .CodeMirror-selected,\r
 .am-engine-view .CodeMirror-focused .CodeMirror-selected {\r
      background: #b3d7fd;\r
     \r
 }\r
 \r
 .am-engine .CodeMirror-crosshair,\r
 .am-engine-view .CodeMirror-crosshair {\r
      cursor: crosshair;\r
     \r
 }\r
 \r
 .am-engine .CodeMirror-line::-moz-selection,\r
 .am-engine-view .CodeMirror-line::-moz-selection,\r
 .am-engine .CodeMirror-line>span::-moz-selection,\r
 .am-engine-view .CodeMirror-line>span::-moz-selection,\r
 .am-engine .CodeMirror-line>span>span::-moz-selection,\r
 .am-engine-view .CodeMirror-line>span>span::-moz-selection {\r
      background: #b3d7fd;\r
     \r
 }\r
 \r
 .am-engine .CodeMirror-line::selection,\r
 .am-engine-view .CodeMirror-line::selection,\r
 .am-engine .CodeMirror-line>span::selection,\r
 .am-engine-view .CodeMirror-line>span::selection,\r
 .am-engine .CodeMirror-line>span>span::selection,\r
 .am-engine-view .CodeMirror-line>span>span::selection {\r
      background: #b3d7fd;\r
     \r
 }\r
 \r
 .am-engine .CodeMirror-line::-moz-selection,\r
 .am-engine-view .CodeMirror-line::-moz-selection,\r
 .am-engine .CodeMirror-line>span::-moz-selection,\r
 .am-engine-view .CodeMirror-line>span::-moz-selection,\r
 .am-engine .CodeMirror-line>span>span::-moz-selection,\r
 .am-engine-view .CodeMirror-line>span>span::-moz-selection {\r
      background: #b3d7fd;\r
     \r
 }\r
 \r
 .am-engine .cm-searching,\r
 .am-engine-view .cm-searching {\r
      background-color: #ffa;\r
      background-color: rgba(255, 255, 0, 0.4);\r
     \r
 }\r
 \r
 .am-engine .cm-force-border,\r
 .am-engine-view .cm-force-border {\r
      padding-right: 0.1px;\r
     \r
 }\r
 \r
 @media print {\r
 \r
     /* .am-engine,\r
      .am-engine-view { */\r
         \r
         /* Hide the cursor when printing */\r
         \r
     /* } */\r
 \r
      .am-engine .CodeMirror div.CodeMirror-cursors,\r
      .am-engine-view .CodeMirror div.CodeMirror-cursors {\r
          visibility: hidden;\r
         \r
     }\r
 \r
     \r
 }\r
 \r
 .am-engine .cm-tab-wrap-hack:after,\r
 .am-engine-view .cm-tab-wrap-hack:after {\r
      content: '';\r
     \r
 }\r
 \r
 .am-engine span.CodeMirror-selectedtext,\r
 .am-engine-view span.CodeMirror-selectedtext {\r
      background: none;\r
     \r
 }\r
 \r
 .am-engine-view .data-codeblock-container {\r
      margin: 5px 0;\r
     \r
 }\r
 \r
 .am-content-editor .am-engine .data-codeblock-container .CodeMirror-lines {\r
     min-height: 40px;\r
 }`;D_(I_);var rp=Mt("modeNameMap"),yf=Mt("modeSynatxMap"),Go=Mt("viewAutoWrap"),Sc=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.mirror=void 0,n.resize=function(){var a;return(a=n.codeEditor)===null||a===void 0?void 0:a.container.find(".data-codeblock-content")},n.codeEditor=void 0,Object.defineProperty(Ye(n),rp,{writable:!0,value:{}}),Object.defineProperty(Ye(n),yf,{writable:!0,value:{}}),Object.defineProperty(Ye(n),Go,{writable:!0,value:void 0}),n}return Be(t,[{key:"init",value:function(){var e=this;Vh||(At(St(t.prototype),"init",this).call(this),!this.codeEditor&&(Xg.forEach(function(r){oe(e,rp)[rp][r.value]=r.name,oe(e,yf)[yf][r.value]=r.syntax}),this.codeEditor=new qm(this.editor,{synatxMap:oe(this,yf)[yf],onSave:function(i,a){var o=e.getValue();i===(o==null?void 0:o.mode)&&a===o.code||e.setValue({mode:i,code:a})},onMouseDown:function(i){e.activated||setTimeout(function(){e.editor.card.activate(e.root,Os.MOUSE_DOWN)},10)},onUpFocus:function(i){var a;if(!!ge(e.editor)){i.preventDefault();var o=e.editor,l=o.change,c=o.card,d=l.range.get().cloneRange(),v=e.root.prev(),h=v?c.find(v):void 0;if(h!=null&&h.onSelectUp)h.onSelectUp(i);else if(v)c.focusPrevBlock(e,d,!1),l.range.select(d);else{e.focus(d,!0),l.range.select(d);return}e.activate(!1),(a=e.toolbarModel)===null||a===void 0||a.hide()}},onDownFocus:function(i){var a;if(!!ge(e.editor)){i.preventDefault();var o=e.editor,l=o.change,c=o.card,d=l.range.get().cloneRange(),v=e.root.next(),h=v?c.find(v):void 0;if(h!=null&&h.onSelectDown)h.onSelectDown(i);else if(v)c.focusNextBlock(e,d,!1),l.range.select(d);else{e.focus(d,!1),l.range.select(d);return}e.activate(!1),(a=e.toolbarModel)===null||a===void 0||a.hide()}},onLeftFocus:function(i){var a;if(!!ge(e.editor)){i.preventDefault();var o=e.editor.change,l=o.range.get().cloneRange();e.focus(l,!0),o.range.select(l),e.activate(!1),(a=e.toolbarModel)===null||a===void 0||a.hide()}},onRightFocus:function(i){var a;if(!!ge(e.editor)){i.preventDefault();var o=e.editor.change,l=o.range.get().cloneRange();e.focus(l,!1),o.range.select(l),e.activate(!1),(a=e.toolbarModel)===null||a===void 0||a.hide()}}})))}},{key:"toolbar",value:function(){var e=this;return this.loading?[]:!ge(this.editor)||this.editor.readonly?[{type:"copy"},{type:"switch",content:this.editor.language.get(t.cardName,"autoWrap"),getState:function(){if(oe(e,Go)[Go]===void 0){var i;oe(e,Go)[Go]=!!(!((i=e.getValue())===null||i===void 0)&&i.autoWrap)}return oe(e,Go)[Go]},onClick:function(){var i,a=!oe(e,Go)[Go];oe(e,Go)[Go]=a,(i=e.codeEditor)===null||i===void 0||i.setAutoWrap(a)}}]:[{type:"dnd"},{type:"copy"},{type:"delete"},{type:"node",node:V("<div />"),didMount:function(i){setTimeout(function(){var a;N_(i.get(),e.constructor.getModes(),((a=e.codeEditor)===null||a===void 0?void 0:a.mode)||"plain",function(o){setTimeout(function(){var l;e.focusEditor(),(l=e.codeEditor)===null||l===void 0||l.update(o)},10)})},100)}},{type:"switch",content:this.editor.language.get(t.cardName,"autoWrap"),getState:function(){var i;return!!(!((i=e.getValue())===null||i===void 0)&&i.autoWrap)},onClick:function(){var i,a=e.getValue(),o=!(a!=null&&a.autoWrap);e.setValue({autoWrap:o}),(i=e.codeEditor)===null||i===void 0||i.setAutoWrap(o)}}]}},{key:"focusEditor",value:function(){var e;(e=this.codeEditor)===null||e===void 0||e.focus(),this.editor.card.activate(this.root)}},{key:"onSelectLeft",value:function(e){var r;!this.codeEditor||(e.preventDefault(),this.codeEditor.select(!1),this.activate(!0),(r=this.toolbarModel)===null||r===void 0||r.show())}},{key:"onSelectRight",value:function(e){var r;!this.codeEditor||(e.preventDefault(),this.codeEditor.select(!0),this.activate(!0),(r=this.toolbarModel)===null||r===void 0||r.show())}},{key:"onSelectDown",value:function(e){var r;!this.codeEditor||(e.preventDefault(),this.codeEditor.focus(),this.activate(!0),(r=this.toolbarModel)===null||r===void 0||r.show())}},{key:"onSelectUp",value:function(e){var r;!this.codeEditor||(e.preventDefault(),this.codeEditor.focus(),this.activate(!0),(r=this.toolbarModel)===null||r===void 0||r.show())}},{key:"render",value:function(){var e=this;if(!!this.codeEditor){this.codeEditor.container.inEditor()||(this.codeEditor.container=V(this.codeEditor.renderTemplate()),this.mirror=void 0,this.getCenter().empty().append(this.codeEditor.container));var r=this.getValue(),i=(r==null?void 0:r.mode)||"plain",a=(r==null?void 0:r.code)||"";if(ge(this.editor)){if(this.mirror){this.codeEditor.update(i,a),this.codeEditor.setAutoWrap(!!(r!=null&&r.autoWrap));return}setTimeout(function(){var l;e.mirror=(l=e.codeEditor)===null||l===void 0?void 0:l.create(i,a,{lineWrapping:!!(r!=null&&r.autoWrap)})},50)}else{var o;(o=this.codeEditor)===null||o===void 0||o.create(i,a,{lineWrapping:!!(r!=null&&r.autoWrap)})}}}}],[{key:"cardName",get:function(){return"codeblock"}},{key:"cardType",get:function(){return un.BLOCK}},{key:"autoSelected",get:function(){return!1}},{key:"singleSelectable",get:function(){return!1}},{key:"getModes",value:function(){return Xg}},{key:"lazyRender",get:function(){return!0}}]),t}(ni),L_={codeblock:{autoWrap:"Auto Wrap"}},O_={codeblock:{autoWrap:"\u81EA\u52A8\u6362\u884C"}},z_={"en-US":L_,"zh-CN":O_},ip={text:"plain",sh:"bash",ts:"typescript",js:"javascript",py:"python",puml:"plantuml",uml:"plantuml",vb:"basic",md:"markdown","c++":"cpp","c#":"csharp"},R_=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.markdown=function(a){if(!(!ge(n.editor)||n.options.markdown===!1)){var o=n.editor,l=o.change,c=o.node,d=o.command,v=n.editor.block,h=l.range.get();if(!(!h.collapsed||l.isComposing()||!n.markdown)){var g=v.closest(h.startNode);if(!!c.isRootBlock(g)){var w=v.getLeftText(g),x=/^`{3,}(.*){0,20}$/.exec(w);if(x){var _=(x[1]===void 0?"":x[1]).trim().toLowerCase(),E=Ie(Ie({},n.options.alias||{}),ip),M=E[_]||_;if(M||M==="")return a.preventDefault(),v.removeLeftText(g),d.execute(n.constructor.pluginName,M),g.remove(),!1}}}}},n.pasteSchema=function(a){a.add([{type:"block",name:"pre",attributes:{"data-syntax":"*",class:"*",language:"*"}},{type:"block",name:"code",attributes:{"data-syntax":{required:!0,value:"*"}}},{type:"block",name:"code",attributes:{language:{required:!0,value:"*"}}},{type:"block",name:"code",attributes:{class:{required:!0,value:"*"}}},{type:"block",name:"div",attributes:{"data-syntax":{required:!0,value:"*"}}}])},n.pasteHtml=function(a){var o;if(!(!ge(n.editor)||a.isText())){if(((o=a.get())===null||o===void 0?void 0:o.hasAttribute("data-syntax"))||a.name==="pre"){var l=a.attributes("data-syntax");if(!l){var c=function(g){var w,x=g==null||(w=g.get())===null||w===void 0?void 0:w.classList;if(!!x)for(var _=0;_<x.length;_++){var E=x.item(_);if(E&&E.startsWith("language-")){var M=E.split("-");return M.shift(),M.join("-")}}};a.name==="pre"&&(l=a.attributes("language"),l||(l=c(a)));var d=a.find("code");!l&&d.length>0&&(l=d.attributes("data-syntax")||d.attributes("language"),l||(l=c(d)))}var v=new _o(a,n.editor).toText(void 0,void 0,!1);return v=Ai(v.replace(/\u200b/g,"")),n.editor.card.replaceNode(a,"codeblock",{mode:l||"plain",code:v}),a.remove(),!1}return!0}},n.checkMarkdownMath=function(a){var o;return!(!((o=n.checkMarkdown(a))===null||o===void 0)&&o.match)},n.checkMarkdown=function(a){if(!(!ge(n.editor)||!n.markdown||!a.isText())){var o=a.text();if(!!o){var l=/`{3,}/,c=l.exec(o);return{reg:l,match:c}}}},n.pasteMarkdown=function(a){var o=n.checkMarkdown(a);if(!!o){var l=o.match;if(!!l){var c=n.editor.card,d="",v={};Sc.getModes().forEach(function(M){v[M.value]=M.name});var h=Object.keys(v).concat(Object.keys(ip)).concat(Object.keys(n.options.alias||{})).sort(function(M,T){return M.length>T.length?-1:1}),g=function(T){var S,D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"text",I=T.join(`
`),P=Ai(I);P.endsWith(`
`)&&(P=P.substr(0,P.length-1));var B=V("<div></div>"),$=c.replaceNode(B,"codeblock",{mode:D,code:P});return B.remove(),(S=$.get())===null||S===void 0?void 0:S.outerHTML},w=a.text().split(/\n|\r\n/),x=[],_=!1,E="text";w.forEach(function(M){var T=/^(.*)`{3,}(\s)*$/.exec(M);if(T&&_){x.push(T[1]),d+=g(x,E)+`
`,E="text",_=!1,x=[];return}if(T=/^`{3,}(.*)/.exec(M),T){_=!0,E=h.find(function(D){return T&&(T[1]||"").trim().toLowerCase().indexOf(D)===0})||"text";var S=Ie(Ie({},n.options.alias||{}),ip);E=S[E]||E}else _?x.push(M):d+=M+`
`}),x.length>0&&(d+=g(x,E)+`
`),a.text(d)}}},n.parseHtml=function(a,o){var l=[];return a.find("[".concat(Gt,'="').concat(Sc.cardName,'"],[').concat(_n,'="').concat(Sc.cardName,'"]')).each(function(c){var d=V(c),v=n.editor.card.find(d),h=(v==null?void 0:v.getValue())||wr(d.attributes(er));if(h){d.empty();var g={};Sc.getModes().forEach(function(E){g[E.value]=E.syntax});var w=new qm(n.editor,{synatxMap:g}),x=w.container.find(".data-codeblock-content");x.css({border:"1px solid #e8e8e8",padding:"8px"}),w.render(h.mode||"plain",h.code||""),x.addClass(fp),x.hide(),document.body.appendChild(x[0]),x.traverse(function(E){var M,T;if(E.type===Node.ELEMENT_NODE&&(((M=E.get())===null||M===void 0||(T=M.classList)===null||T===void 0?void 0:T.length)||0)>0){var S=E.get(),D=window.getComputedStyle(S);["color","margin","padding","background"].forEach(function(I){S.style[I]=D.getPropertyValue(I)})}}),x.show(),x.css("background","#f9f9f9"),d.append(x),d.removeAttributes(Gt),d.removeAttributes(gi),d.removeAttributes(er),d.attributes("data-syntax",h.mode||"plain"),x.removeClass(fp).removeClass("data-codeblock-content");var _=d;o&&(_=o(d,h),d.replaceWith(_)),l.push(_)}else d.remove()}),l},n}return Be(t,[{key:"init",value:function(){this.editor.language.add(z_),this.editor.on("parse:html",this.parseHtml),this.editor.on("paste:schema",this.pasteSchema),this.editor.on("paste:each",this.pasteHtml),ge(this.editor)&&this.markdown&&(this.editor.on("keydown:enter",this.markdown),this.editor.on("paste:markdown-check",this.checkMarkdownMath),this.editor.on("paste:markdown-before",this.pasteMarkdown))}},{key:"execute",value:function(e,r){if(!!ge(this.editor)){var i=this.editor.card,a=i.insert(Sc.cardName,{mode:e,code:r});setTimeout(function(){a.focusEditor()},200)}}},{key:"hotkey",value:function(){return this.options.hotkey||""}},{key:"destroy",value:function(){this.editor.off("parse:html",this.parseHtml),this.editor.off("paste:schema",this.pasteSchema),this.editor.off("paste:each",this.pasteHtml),ge(this.editor)&&this.markdown&&(this.editor.off("keydown:enter",this.markdown),this.editor.off("paste:markdown-check",this.checkMarkdownMath),this.editor.off("paste:markdown-before",this.pasteMarkdown))}}],[{key:"pluginName",get:function(){return"codeblock"}}]),t}(Rr);function F_(b,u){u===void 0&&(u={});var t=u.insertAt;if(!(!b||typeof document=="undefined")){var n=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",t==="top"&&n.firstChild?n.insertBefore(e,n.firstChild):n.appendChild(e),e.styleSheet?e.styleSheet.cssText=b:e.appendChild(document.createTextNode(b))}}var B_=`.data-file {\r
    display: flex;\r
    height: 24px;\r
    line-height: 24px;\r
    cursor: pointer;\r
    white-space: nowrap;\r
    overflow: hidden;\r
    text-overflow: ellipsis;\r
  }\r
  .data-file .data-file-icon {\r
    flex: auto;\r
    width: 24px;\r
    height: 24px;\r
    font-size: 16px;\r
    text-align: center;\r
  }\r
  .data-file .data-file-title {\r
    flex: auto;\r
    font-size: 14px;\r
    margin-right: 4px;\r
    overflow: hidden;\r
    text-overflow: ellipsis;\r
  }\r
  .data-file .data-file-size {\r
    flex: auto;\r
    font-size: 12px;\r
  }\r
  .data-file-done {\r
    color: #096DD9;\r
  }\r
  .data-file-uploading,\r
  .data-file-error {\r
    color: #595959;\r
  }\r
  .data-file-uploading .data-file-size,\r
  .data-file-error .data-file-size {\r
    color: #8C8C8C;\r
  }\r
  .data-file-error {\r
    padding: 2px 4px;\r
    background: #f5f5f5;\r
    display: flex;\r
    border-radius: 4px;\r
    max-width: 200px;\r
    overflow: hidden;\r
    text-overflow: ellipsis;\r
    white-space: nowrap;\r
    font-size: 12px;\r
    align-items: center;\r
    -webkit-user-select: none;\r
       -moz-user-select: none;\r
        -ms-user-select: none;\r
            user-select: none;\r
    cursor: pointer;\r
}\r
\r
.am-engine [data-card-key="file"].card-selected [data-card-element=center].data-card-background-selected {\r
    border-radius: 4px;\r
}\r
\r
.data-file-error .data-icon {\r
    font-size: 12px;\r
}\r
\r
.data-file-error .data-icon-error {\r
    color: red;\r
    margin-right: 8px;\r
}\r
\r
.data-file-error .data-icon-copy {\r
    margin-left: 8px;\r
    cursor: pointer;\r
}`;F_(B_);var mu=function(b){ft(t,b);var u=ht(t);function t(){var n,e;Fe(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return e=u.call.apply(u,[this].concat(i)),e.container=void 0,e.getMaxWidth=function(){var o,l=e.editor.block.closest(e.root),c=e.root.find(".data-file-size");return l.get().clientWidth-36-((c==null||(o=c.get())===null||o===void 0?void 0:o.clientWidth)||0)},e.onWindowResize=function(){e.updateMaxWidth()},e.updateMaxWidth=function(){var o=e.getMaxWidth();e.root.find(".data-file-title").css("max-width",Math.max(o,0)+"px")},e.onBeforeRender=function(o,l){var c=e.editor.plugin.findPlugin("file");if(c){var d=c.options||{},v=d.onBeforeRender;if(v)return v(o,l)}return l},e.previewFile=function(){var o=e.getValue();if(!!(o!=null&&o.preview)){var l=o.preview;window.open(_l(e.onBeforeRender("preview",l)))}},e.downloadFile=function(){var o=e.getValue();if(!!(o!=null&&o.download)){var l=o.download;window.open(_l(e.onBeforeRender("download",l)))}},e.destroy=function(){At((n=Ye(e),St(t.prototype)),"destroy",n).call(n),e.container=void 0,window.removeEventListener("resize",e.onWindowResize),e.editor.off("editor:resize",e.onWindowResize)},e}return Be(t,[{key:"getLocales",value:function(){return this.editor.language.get("file")}},{key:"toolbar",value:function(){var e=[],r=this.getValue();if(!r)return e;var i=r.status,a=r.preview,o=r.download,l=this.getLocales();return i==="done"&&(a&&e.push({type:"button",content:'<span class="data-icon data-icon-preview" />',title:l.preview,onClick:this.previewFile}),o&&e.push({type:"button",content:'<span class="data-icon data-icon-download" />',title:l.download,onClick:this.downloadFile}),!(!ge(this.editor)||this.editor.readonly)&&e.length>0&&e.push({type:"separator"})),!ge(this.editor)||this.editor.readonly||e.push({type:"delete"}),e}},{key:"renderTemplate",value:function(e){var r=e.name,i=e.status,a=e.message,o=e.percent,l=e.size,c=this.getLocales();if(i==="error")return'<span class="data-file-error"><span class="data-icon data-icon-error"></span>'.concat(a||c.loadError,'<span class="data-icon data-icon-copy"></span></span>');var d='<span class="data-icon data-icon-attachment"></span>';i==="uploading"&&(d=`<i class="data-anticon">
                        <svg viewBox="0 0 1024 1024" class="data-anticon-spin" data-icon="loading" width="1em" height="1em" fill="currentColor" aria-hidden="true">
                            <path d="M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 0 0-94.3-139.9 437.71 437.71 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"></path>
                        </svg>
                    </i>
                    `);var v="",h=l?Im(l):"";h&&(v='<span class="data-file-size">('.concat(Sr(h),")</span>"));var g="";return i==="uploading"&&(g='<span class="percent">'.concat(o||0,"%</span>")),`
        <span class="data-file data-file-`.concat(i,`">
            <span class="data-file-icon">`).concat(d,`</span>
            `).concat(g,`
            <span class="data-file-title">`).concat(Sr(r),`</span>
            `).concat(v,`
        </span>
        `)}},{key:"bindErrorEvent",value:function(e){var r=this,i=e.find(".data-icon-copy");i.on("mouseenter",function(){An.show(i,r.editor.language.get("image","errorMessageCopy").toString())}),i.on("mouseleave",function(){An.hide()}),i.on("click",function(a){var o;a.stopPropagation(),a.preventDefault(),An.hide(),r.editor.clipboard.copy(((o=r.getValue())===null||o===void 0?void 0:o.message)||"Error message"),r.editor.messageSuccess(r.editor.language.get("copy","success").toString())})}},{key:"setProgressPercent",value:function(e){var r;(r=this.container)===null||r===void 0||r.find(".percent").html("".concat(e,"%")),this.setValue({percent:e})}},{key:"onActivate",value:function(e){var r,i;e?(r=this.container)===null||r===void 0||r.addClass("data-file-active"):(i=this.container)===null||i===void 0||i.removeClass("data-file-active")}},{key:"render",value:function(){var e,r=this.getValue();!r||(!this.container||this.container.length===0?(this.container=V(this.renderTemplate(r)),this.getCenter().empty().append(this.container)):this.container=this.getCenter().first(),ge(this.editor)?this.container.attributes("draggable","true"):this.renderView(),r.status==="error"&&this.bindErrorEvent(this.root),(e=this.container)===null||e===void 0||e.find(".percent").html("".concat(r.percent,"%")),this.updateMaxWidth(),window.addEventListener("resize",this.onWindowResize),this.editor.on("editor:resize",this.onWindowResize))}},{key:"renderView",value:function(){var e;(e=this.container)===null||e===void 0||e.on("click",this.downloadFile)}},{key:"didUpdate",value:function(){var e,r,i;At(St(t.prototype),"didUpdate",this).call(this),(e=this.toolbarModel)===null||e===void 0||(r=e.getContainer())===null||r===void 0||r.remove(),(i=this.toolbarModel)===null||i===void 0||i.create()}}],[{key:"cardName",get:function(){return"file"}},{key:"cardType",get:function(){return un.INLINE}},{key:"selectStyleType",get:function(){return zs.BACKGROUND}},{key:"autoSelected",get:function(){return!1}}]),t}(ni),$m=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.cardComponents={},n.extensionNames=["*"],n.dropFiles=function(a){if(!!ge(n.editor)&&(a=a.filter(function(o){return n.isFile(o)}),a.length!==0))return n.editor.command.execute("file-uploader",a),!1},n.pasteFiles=function(a){var o=a.files;if(!!ge(n.editor)&&(o=o.filter(function(l){return n.isFile(l)}),o.length!==0))return n.editor.command.execute("file-uploader",o.filter(function(l){return n.isFile(l)}),o),!1},n.pasteEach=function(a){if(a.isCard()&&a.attributes(_n)){if(a.attributes(_n)!=="file")return;var o=wr(a.attributes(er));if(!o||!o.url){a.remove();return}o.status==="uploading"&&(o.percent=0,a.attributes(er,Rs(Ie(Ie({},o),{},{status:"done"}))));return}},n}return Be(t,[{key:"init",value:function(){ge(this.editor)&&(this.editor.on("drop:files",this.dropFiles),this.editor.on("paste:event",this.pasteFiles),this.editor.on("paste:each",this.pasteEach));var e=this.options.file||{},r=e.accept;if(typeof r=="string"&&(r=r.split(",")),Array.isArray(r)){var i=[];(r||[]).forEach(function(a){a=a.trim();var o=a.split(".").pop();o&&i.push(o)}),i.length>0&&(this.extensionNames=i)}else Jn(r)==="object"&&(this.extensionNames=r)}},{key:"isFile",value:function(e){var r,i=(r=Of(e))!==null&&r!==void 0?r:"",a=Array.isArray(this.extensionNames)?this.extensionNames:Object.keys(this.extensionNames);return a.indexOf("*")>=0||a.indexOf(i)>=0}},{key:"execute",value:function(){var n=zr(Qt.mark(function r(i){var a=this,o,l,c,d,v,h,g,w,x,_,E,M,T,S,D,I,P;return Qt.wrap(function($){for(;;)switch($.prev=$.next){case 0:if(ge(this.editor)){$.next=2;break}return $.abrupt("return");case 2:if(o=this.editor,l=o.request,c=o.card,d=o.language,v=this.options,h=v.action,g=v.data,w=v.type,x=v.contentType,_=v.multiple,E=v.crossOrigin,M=v.withCredentials,T=v.headers,S=v.name,D=this.options.parse,I=this.options.limitSize||5242880,Array.isArray(i)){$.next=11;break}return P=Array.isArray(this.extensionNames)?"."+this.extensionNames.join(",."):Object.values(this.extensionNames).join(","),$.next=10,l.getFiles({event:i,accept:Df?"*":P.length>0?P:"",multiple:_});case 10:i=$.sent;case 11:if(i.length!==0){$.next=13;break}return $.abrupt("return");case 13:return l.upload({url:h,data:g,type:w,contentType:x,crossOrigin:E,withCredentials:M,headers:typeof T=="function"?T():T,onBefore:function(G){return G.size>I?(a.editor.messageError(d.get("file","uploadLimitError").toString().replace("$size",(I/1024/1024).toFixed(0)+"M")),!1):!0},onReady:function(G){if(!(!ge(a.editor)||!!a.cardComponents[G.uid])){var H=c.insert("file",{status:"uploading",name:G.name,size:G.size});a.cardComponents[G.uid]=H}},onUploading:function(G,H){var z=H.percent,O=a.cardComponents[G.uid||""];!O||O.setProgressPercent(z)},onSuccess:function(G,H){var z=a.cardComponents[H.uid||""];if(!!z){var O=G.url||G.data&&G.data.url,Q=G.preview||G.data&&G.data.preview,ie=G.download||G.data&&G.data.download,L={result:!0,data:{status:"done",url:O,preview:Q,download:ie}};if(D){var F=D(G);if(F.result){var X=L.data;typeof F.data=="string"?L.data=Ie(Ie({},X),{},{url:F.data}):(X.url=F.data.url,F.data.status!==void 0&&(X=Ie(Ie({},X),{},{status:F.data.status})),F.data.preview!==void 0&&(X=Ie(Ie({},X),{},{preview:F.data.preview})),F.data.download!==void 0&&(X=Ie(Ie({},X),{},{download:F.data.download})),L.data=Ie({},X))}else L={result:!1,data:F.data.toString()}}else O||(L={result:!1,data:G.data});if(!L.result)c.update(z.id,{status:"error",message:typeof L.data=="string"?L.data:a.editor.language.get("file","uploadError")});else{var se=typeof L.data=="string"?{url:L.data}:Ie({},L.data);a.editor.card.update(z.id,se)}delete a.cardComponents[H.uid||""]}},onError:function(G,H){var z=a.cardComponents[H.uid||""];!z||(c.update(z.id,{status:"error",message:G.message||a.editor.language.get("file","uploadError")}),delete a.cardComponents[H.uid||""])}},i,S),$.abrupt("return");case 15:case"end":return $.stop()}},r,this)}));function e(r){return n.apply(this,arguments)}return e}()},{key:"destroy",value:function(){ge(this.editor)&&(this.editor.off("drop:files",this.dropFiles),this.editor.off("paste:event",this.pasteFiles),this.editor.off("paste:each",this.pasteEach))}}],[{key:"pluginName",get:function(){return"file-uploader"}}]),t}(Rr),P_={file:{errorMessageCopy:"Copy error message",loadError:"The file failed to load!",uploadError:"The picture failed to upload!",uploadLimitError:"Upload file size is limited to $size",download:"Download",preview:"Preview"}},H_={file:{errorMessageCopy:"\u590D\u5236\u9519\u8BEF\u4FE1\u606F",loadError:"\u6587\u4EF6\u52A0\u8F7D\u5931\u8D25\uFF01",uploadError:"\u4E0A\u4F20\u6587\u4EF6\u5931\u8D25\uFF01",uploadLimitError:"\u4E0A\u4F20\u6587\u4EF6\u5927\u5C0F\u9650\u5236\u4E3A $size",download:"\u4E0B\u8F7D",preview:"\u9884\u89C8"}},j_={"en-US":P_,"zh-CN":H_},W_=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.pasteSchema=function(a){a.add({type:"inline",name:"span",attributes:{"data-type":{required:!0,value:mu.cardName},"data-value":"*"}})},n.pasteHtml=function(a){if(!!ge(n.editor)){if(a.isElement()){var o=a.attributes("data-type");if(o===mu.cardName){var l=a.attributes("data-value"),c=wr(l);return c.url?(n.editor.card.replaceNode(a,mu.cardName,c),a.remove(),!1):void 0}}return!0}},n.parseHtml=function(a,o){var l=[];return a.find("[".concat(Gt,'="').concat(mu.cardName,'"],[').concat(_n,'="').concat(mu.cardName,'"')).each(function(c){var d=V(c),v=n.editor.card.find(d),h=(v==null?void 0:v.getValue())||wr(d.attributes(er));if((h==null?void 0:h.url)&&h.status==="done"){var g='<span data-type="'.concat(mu.cardName,'" data-value="').concat(Rs(h),'"><a target="_blank" href="').concat(h.url,'" style="word-wrap: break-word;color: #096DD9;touch-action: manipulation;background-color: rgba(0,0,0,0);text-decoration: none;outline: none;cursor: pointer;transition: color .3s;"><span style="font-size: 14px;">\u{1F4CE}</span>').concat(h.name,"</a></span>");d.empty();var w=V(g);o&&(w=o(w,h)),d.replaceWith(w),l.push(w)}else d.remove()}),l},n}return Be(t,[{key:"init",value:function(){this.editor.language.add(j_),this.editor.on("parse:html",this.parseHtml),this.editor.on("paste:each",this.pasteHtml),this.editor.on("paste:schema",this.pasteSchema)}},{key:"execute",value:function(e,r,i,a,o,l){var c={status:e,url:r,name:i||r,size:a,preview:o,download:l};e==="error"&&(c.url="",c.message=r),this.editor.card.insert("file",c)}},{key:"waiting",value:function(){var n=zr(Qt.mark(function r(i){var a=this,o,l,c,d;return Qt.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return o=this.editor.card,l=function(w){var x;return w.root.inEditor()&&w.name===mu.cardName&&((x=w.getValue())===null||x===void 0?void 0:x.status)==="uploading"},c=function(){return o.components.find(l)},d=function(w){var x=6e4;return new Promise(function(_,E){if(i){var M=i(a.name,w);if(M===!1)return E({name:a.name,card:w});typeof M=="number"&&(x=M)}var T=new Date().getTime(),S=new Date().getTime(),D=function I(){if(S-T>=x)return _();setTimeout(function(){l(w)?I():_()},10)};D()})},h.abrupt("return",new Promise(function(){var g=zr(Qt.mark(function w(x,_){var E,M;return Qt.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:E=c(),M=function D(I){d(I).then(function(){var P=c();P?D(P):x()}).catch(_)},E?M(E):x();case 3:case"end":return S.stop()}},w)}));return function(w,x){return g.apply(this,arguments)}}()));case 5:case"end":return h.stop()}},r,this)}));function e(r){return n.apply(this,arguments)}return e}()},{key:"destroy",value:function(){this.editor.off("parse:html",this.parseHtml),this.editor.off("paste:each",this.pasteHtml),this.editor.off("paste:schema",this.pasteSchema)}}],[{key:"pluginName",get:function(){return"file"}}]),t}(Rr);function U_(b,u){u===void 0&&(u={});var t=u.insertAt;if(!(!b||typeof document=="undefined")){var n=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",t==="top"&&n.firstChild?n.insertBefore(e,n.firstChild):n.appendChild(e),e.styleSheet?e.styleSheet.cssText=b:e.appendChild(document.createTextNode(b))}}var q_=`.am-engine .card-hr,.am-engine-view .card-hr {\r
    border: 1px solid transparent;\r
    padding: 18px 0;\r
    border-radius: 2px 2px;\r
}\r
\r
.am-engine .card-hr hr,.am-engine-view .card-hr hr {\r
    box-sizing: border-box;\r
    position: absolute;\r
    top: 50%;\r
    left: 0;\r
    margin-top: -1px;\r
    width: 100%;\r
    height: 2px;\r
    background-color: #e8e8e8;\r
    padding: 0;\r
    border: 1px solid transparent;\r
}\r
\r
.am-engine .card-hr:hover , .am-engine .card-hr.hr-activated {\r
    background-color: #f4f4f4;\r
}`;U_(q_);var $h=function(b){ft(t,b);var u=ht(t);function t(){return Fe(this,t),u.apply(this,arguments)}return Be(t,[{key:"toolbar",value:function(){return!ge(this.editor)||this.editor.readonly?[]:[{type:"dnd"},{type:"copy"},{type:"delete"}]}},{key:"onActivate",value:function(e){At(St(t.prototype),"onActivate",this).call(this,e);var r="hr-activated",i=this.getCenter();e?i.addClass(r):i.removeClass(r)}},{key:"onSelectByOther",value:function(e,r){At(St(t.prototype),"onSelectByOther",this).call(this,e,r),this.getCenter().find("hr").css("background-color",e?r.rgb:"")}},{key:"onActivateByOther",value:function(e,r){this.onSelectByOther(e,r)}},{key:"render",value:function(){return this.getCenter().addClass("card-hr"),"<hr />"}}],[{key:"cardName",get:function(){return"hr"}},{key:"cardType",get:function(){return un.BLOCK}},{key:"autoActivate",get:function(){return!1}},{key:"selectStyleType",get:function(){return zs.BACKGROUND}}]),t}(ni),$_=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.markdown=function(a){if(!(!ge(n.editor)||n.options.markdown===!1)){var o=n.editor,l=o.change,c=o.command,d=o.node,v=l.range.get();if(!(!v.collapsed||l.isComposing()||!n.markdown)){var h=n.editor.block,g=h.closest(v.startNode);if(!!d.isRootBlock(g)){var w=h.getLeftText(g),x=/^[-]{3,}$/.exec(w);if(x)return a.preventDefault(),h.removeLeftText(g),c.execute(n.constructor.pluginName),!1}}}},n.checkMarkdownMath=function(a){var o;return!(!((o=n.checkMarkdown(a))===null||o===void 0)&&o.match)},n.checkMarkdown=function(a){if(!(!ge(n.editor)||!n.markdown||!a.isText())){var o=a.text(),l=/(^|\r\n|\n)((-\s*){3,})\s?(\r\n|\n|$)/,c=l.exec(o);return{reg:l,match:c}}},n.pasteMarkdown=function(a){var o=n.checkMarkdown(a);if(!!o){var l=o.reg,c=o.match;if(!!c){for(var d="",v=a.clone(!0).get(),h=n.editor.card;v.textContent&&(c=l.exec(v.textContent));){var g,w=v.splitText(c.index);d+=v.textContent,v=w.splitText(c[0].length);var x=h.replaceNode(V(w),"hr");w.remove(),d+=c[1]+((g=x.get())===null||g===void 0?void 0:g.outerHTML)+`
`}d+=v.textContent,a.text(d)}}},n.pasteSchema=function(a){a.add([{type:"block",name:"hr",isVoid:!0}])},n.pasteHtml=function(a){if(!!ge(n.editor))return a.name==="hr"?(n.editor.card.replaceNode(a,$h.cardName),!1):!0},n.parseHtml=function(a,o){var l=[];return a.find("[".concat(Gt,"=").concat($h.cardName)).each(function(c){var d=V(c),v=d.find("hr");if(v.css({"background-color":"#e8e8e8",border:"1px solid transparent",margin:"18px 0"}),o){var h=n.editor.card.find(d),g=(h==null?void 0:h.getValue())||wr(d.attributes(er));v=o(v,g)}d.replaceWith(v),l.push(v)}),l},n}return Be(t,[{key:"init",value:function(){this.editor.on("parse:html",this.parseHtml),this.editor.on("paste:schema",this.pasteSchema),this.editor.on("paste:each",this.pasteHtml),ge(this.editor)&&(this.editor.on("keydown:enter",this.markdown),this.editor.on("paste:markdown-check",this.checkMarkdownMath),this.editor.on("paste:markdown",this.pasteMarkdown))}},{key:"execute",value:function(){if(!!ge(this.editor)){var e=this.editor.card;e.insert($h.cardName)}}},{key:"hotkey",value:function(){return this.options.hotkey||"mod+shift+e"}},{key:"destroy",value:function(){this.editor.off("parse:html",this.parseHtml),this.editor.off("paste:schema",this.pasteSchema),this.editor.off("paste:each",this.pasteHtml),ge(this.editor)&&(this.editor.off("keydown:enter",this.markdown),this.editor.off("paste:markdown-check",this.checkMarkdownMath),this.editor.off("paste:markdown",this.pasteMarkdown))}}],[{key:"pluginName",get:function(){return"hr"}}]),t}(Rr),Gm={exports:{}};/*! PhotoSwipe - v4.1.3 - 2019-01-08
* http://photoswipe.com
* Copyright (c) 2019 Dmitry Semenov; */(function(b,u){(function(t,n){b.exports=n()})(ca,function(){var t=function(n,e,r,i){var a={features:null,bind:function(K,ce,be,ye){var tt=(ye?"remove":"add")+"EventListener";ce=ce.split(" ");for(var at=0;at<ce.length;at++)ce[at]&&K[tt](ce[at],be,!1)},isArray:function(K){return K instanceof Array},createEl:function(K,ce){var be=document.createElement(ce||"div");return K&&(be.className=K),be},getScrollY:function(){var K=window.pageYOffset;return K!==void 0?K:document.documentElement.scrollTop},unbind:function(K,ce,be){a.bind(K,ce,be,!0)},removeClass:function(K,ce){var be=new RegExp("(\\s|^)"+ce+"(\\s|$)");K.className=K.className.replace(be," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(K,ce){a.hasClass(K,ce)||(K.className+=(K.className?" ":"")+ce)},hasClass:function(K,ce){return K.className&&new RegExp("(^|\\s)"+ce+"(\\s|$)").test(K.className)},getChildByClass:function(K,ce){for(var be=K.firstChild;be;){if(a.hasClass(be,ce))return be;be=be.nextSibling}},arraySearch:function(K,ce,be){for(var ye=K.length;ye--;)if(K[ye][be]===ce)return ye;return-1},extend:function(K,ce,be){for(var ye in ce)if(ce.hasOwnProperty(ye)){if(be&&K.hasOwnProperty(ye))continue;K[ye]=ce[ye]}},easing:{sine:{out:function(K){return Math.sin(K*(Math.PI/2))},inOut:function(K){return-(Math.cos(Math.PI*K)-1)/2}},cubic:{out:function(K){return--K*K*K+1}}},detectFeatures:function(){if(a.features)return a.features;var K=a.createEl(),ce=K.style,be="",ye={};if(ye.oldIE=document.all&&!document.addEventListener,ye.touch="ontouchstart"in window,window.requestAnimationFrame&&(ye.raf=window.requestAnimationFrame,ye.caf=window.cancelAnimationFrame),ye.pointerEvent=!!window.PointerEvent||navigator.msPointerEnabled,!ye.pointerEvent){var tt=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var at=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);at&&at.length>0&&(at=parseInt(at[1],10),at>=1&&at<8&&(ye.isOldIOSPhone=!0))}var Rt=tt.match(/Android\s([0-9\.]*)/),Zt=Rt?Rt[1]:0;Zt=parseFloat(Zt),Zt>=1&&(Zt<4.4&&(ye.isOldAndroid=!0),ye.androidVersion=Zt),ye.isMobileOpera=/opera mini|opera mobi/i.test(tt)}for(var Bt=["transform","perspective","animationName"],nn=["","webkit","Moz","ms","O"],gn,Ii,fr=0;fr<4;fr++){be=nn[fr];for(var Li=0;Li<3;Li++)gn=Bt[Li],Ii=be+(be?gn.charAt(0).toUpperCase()+gn.slice(1):gn),!ye[gn]&&Ii in ce&&(ye[gn]=Ii);be&&!ye.raf&&(be=be.toLowerCase(),ye.raf=window[be+"RequestAnimationFrame"],ye.raf&&(ye.caf=window[be+"CancelAnimationFrame"]||window[be+"CancelRequestAnimationFrame"]))}if(!ye.raf){var uo=0;ye.raf=function(ya){var Pl=new Date().getTime(),Bu=Math.max(0,16-(Pl-uo)),Hd=window.setTimeout(function(){ya(Pl+Bu)},Bu);return uo=Pl+Bu,Hd},ye.caf=function(ya){clearTimeout(ya)}}return ye.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,a.features=ye,ye}};a.detectFeatures(),a.features.oldIE&&(a.bind=function(K,ce,be,ye){ce=ce.split(" ");for(var tt=(ye?"detach":"attach")+"Event",at,Rt=function(){be.handleEvent.call(be)},Zt=0;Zt<ce.length;Zt++)if(at=ce[Zt],at)if(typeof be=="object"&&be.handleEvent){if(!ye)be["oldIE"+at]=Rt;else if(!be["oldIE"+at])return!1;K[tt]("on"+at,be["oldIE"+at])}else K[tt]("on"+at,be)});var o=this,l=25,c=3,d={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(K){return K.tagName==="A"},getDoubleTapZoom:function(K,ce){return K||ce.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};a.extend(d,i);var v=function(){return{x:0,y:0}},h,g,w,x,_,E,M=v(),T=v(),S=v(),D,I,P,B={},$,q,G,H,z,O,Q=0,ie={},L=v(),F,X,se=0,Y,j,fe,ve,ae,J,pe=!0,Ee,Le=[],Re,Ce,ne,me,ue,Te,ze,We={},et=!1,Ke,Ge=function(K,ce){a.extend(o,ce.publicMethods),Le.push(K)},_e=function(K){var ce=qn();return K>ce-1?K-ce:K<0?ce+K:K},Ue={},Ae=function(K,ce){return Ue[K]||(Ue[K]=[]),Ue[K].push(ce)},ot=function(K){var ce=Ue[K];if(ce){var be=Array.prototype.slice.call(arguments);be.shift();for(var ye=0;ye<ce.length;ye++)ce[ye].apply(o,be)}},nt=function(){return new Date().getTime()},wt=function(K){io=K,o.bg.style.opacity=K*d.bgOpacity},bt=function(K,ce,be,ye,tt){(!et||tt&&tt!==o.currItem)&&(ye=ye/(tt?tt.fitRatio:o.currItem.fitRatio)),K[ae]=G+ce+"px, "+be+"px"+H+" scale("+ye+")"},Et=function(K){Yn&&(K&&($>o.currItem.fitRatio?et||(oo(o.currItem,!1,!0),et=!0):et&&(oo(o.currItem),et=!1)),bt(Yn,S.x,S.y,$))},Dt=function(K){K.container&&bt(K.container.style,K.initialPosition.x,K.initialPosition.y,K.initialZoomLevel,K)},wn=function(K,ce){ce[ae]=G+K+"px, 0px"+H},zn=function(K,ce){if(!d.loop&&ce){var be=x+(L.x*Q-K)/L.x,ye=Math.round(K-st.x);(be<0&&ye>0||be>=qn()-1&&ye<0)&&(K=st.x+ye*d.mainScrollEndFriction)}st.x=K,wn(K,_)},kr=function(K,ce){var be=Di[K]-ie[K];return T[K]+M[K]+be-be*(ce/q)},vt=function(K,ce){K.x=ce.x,K.y=ce.y,ce.id&&(K.id=ce.id)},bi=function(K){K.x=Math.round(K.x),K.y=Math.round(K.y)},tr=null,Tt=function(){tr&&(a.unbind(document,"mousemove",Tt),a.addClass(n,"pswp--has_mouse"),d.mouseUsed=!0,ot("mouseUsed")),tr=setTimeout(function(){tr=null},100)},Dn=function(){a.bind(document,"keydown",o),ze.transform&&a.bind(o.scrollWrap,"click",o),d.mouseUsed||a.bind(document,"mousemove",Tt),a.bind(window,"resize scroll orientationchange",o),ot("bindEvents")},Rn=function(){a.unbind(window,"resize scroll orientationchange",o),a.unbind(window,"scroll",P.scroll),a.unbind(document,"keydown",o),a.unbind(document,"mousemove",Tt),ze.transform&&a.unbind(o.scrollWrap,"click",o),Cr&&a.unbind(window,D,o),clearTimeout(Ke),ot("unbindEvents")},pn=function(K,ce){var be=pr(o.currItem,B,K);return ce&&(gt=be),be},sr=function(K){return K||(K=o.currItem),K.initialZoomLevel},dr=function(K){return K||(K=o.currItem),K.w>0?d.maxSpreadZoom:1},ha=function(K,ce,be,ye){return ye===o.currItem.initialZoomLevel?(be[K]=o.currItem.initialPosition[K],!0):(be[K]=kr(K,ye),be[K]>ce.min[K]?(be[K]=ce.min[K],!0):be[K]<ce.max[K]?(be[K]=ce.max[K],!0):!1)},Zr=function(){if(ae){var K=ze.perspective&&!Ee;G="translate"+(K?"3d(":"("),H=ze.perspective?", 0px)":")";return}ae="left",a.addClass(n,"pswp--ie"),wn=function(ce,be){be.left=ce+"px"},Dt=function(ce){var be=ce.fitRatio>1?1:ce.fitRatio,ye=ce.container.style,tt=be*ce.w,at=be*ce.h;ye.width=tt+"px",ye.height=at+"px",ye.left=ce.initialPosition.x+"px",ye.top=ce.initialPosition.y+"px"},Et=function(){if(Yn){var ce=Yn,be=o.currItem,ye=be.fitRatio>1?1:be.fitRatio,tt=ye*be.w,at=ye*be.h;ce.width=tt+"px",ce.height=at+"px",ce.left=S.x+"px",ce.top=S.y+"px"}}},ji=function(K){var ce="";d.escKey&&K.keyCode===27?ce="close":d.arrowKeys&&(K.keyCode===37?ce="prev":K.keyCode===39&&(ce="next")),ce&&!K.ctrlKey&&!K.altKey&&!K.shiftKey&&!K.metaKey&&(K.preventDefault?K.preventDefault():K.returnValue=!1,o[ce]())},Wt=function(K){!K||(Ve||Wi||Wn||Ct)&&(K.preventDefault(),K.stopPropagation())},Ut=function(){o.setScrollOffset(0,a.getScrollY())},In={},lr=0,yi=function(K){In[K]&&(In[K].raf&&Ce(In[K].raf),lr--,delete In[K])},Ni=function(K){In[K]&&yi(K),In[K]||(lr++,In[K]={})},Yr=function(){for(var K in In)In.hasOwnProperty(K)&&yi(K)},ri=function(K,ce,be,ye,tt,at,Rt){var Zt=nt(),Bt;Ni(K);var nn=function(){if(In[K]){if(Bt=nt()-Zt,Bt>=ye){yi(K),at(be),Rt&&Rt();return}at((be-ce)*tt(Bt/ye)+ce),In[K].raf=Re(nn)}};nn()},Ia={shout:ot,listen:Ae,viewportSize:B,options:d,isMainScrollAnimating:function(){return Wn},getZoomLevel:function(){return $},getCurrentIndex:function(){return x},isDragging:function(){return Cr},isZooming:function(){return Je},setScrollOffset:function(K,ce){ie.x=K,Te=ie.y=ce,ot("updateScrollOffset",ie)},applyZoomPan:function(K,ce,be,ye){S.x=ce,S.y=be,$=K,Et(ye)},init:function(){if(!(h||g)){var K;o.framework=a,o.template=n,o.bg=a.getChildByClass(n,"pswp__bg"),ne=n.className,h=!0,ze=a.detectFeatures(),Re=ze.raf,Ce=ze.caf,ae=ze.transform,ue=ze.oldIE,o.scrollWrap=a.getChildByClass(n,"pswp__scroll-wrap"),o.container=a.getChildByClass(o.scrollWrap,"pswp__container"),_=o.container.style,o.itemHolders=F=[{el:o.container.children[0],wrap:0,index:-1},{el:o.container.children[1],wrap:0,index:-1},{el:o.container.children[2],wrap:0,index:-1}],F[0].el.style.display=F[2].el.style.display="none",Zr(),P={resize:o.updateSize,orientationchange:function(){clearTimeout(Ke),Ke=setTimeout(function(){B.x!==o.scrollWrap.clientWidth&&o.updateSize()},500)},scroll:Ut,keydown:ji,click:Wt};var ce=ze.isOldIOSPhone||ze.isOldAndroid||ze.isMobileOpera;for((!ze.animationName||!ze.transform||ce)&&(d.showAnimationDuration=d.hideAnimationDuration=0),K=0;K<Le.length;K++)o["init"+Le[K]]();if(e){var be=o.ui=new e(o,a);be.init()}ot("firstUpdate"),x=x||d.index||0,(isNaN(x)||x<0||x>=qn())&&(x=0),o.currItem=qi(x),(ze.isOldIOSPhone||ze.isOldAndroid)&&(pe=!1),n.setAttribute("aria-hidden","false"),d.modal&&(pe?n.style.position="fixed":(n.style.position="absolute",n.style.top=a.getScrollY()+"px")),Te===void 0&&(ot("initialLayout"),Te=me=a.getScrollY());var ye="pswp--open ";for(d.mainClass&&(ye+=d.mainClass+" "),d.showHideOpacity&&(ye+="pswp--animate_opacity "),ye+=Ee?"pswp--touch":"pswp--notouch",ye+=ze.animationName?" pswp--css_animation":"",ye+=ze.svg?" pswp--svg":"",a.addClass(n,ye),o.updateSize(),E=-1,se=null,K=0;K<c;K++)wn((K+E)*L.x,F[K].el.style);ue||a.bind(o.scrollWrap,I,o),Ae("initialZoomInEnd",function(){o.setContent(F[0],x-1),o.setContent(F[2],x+1),F[0].el.style.display=F[2].el.style.display="block",d.focus&&n.focus(),Dn()}),o.setContent(F[1],x),o.updateCurrItem(),ot("afterInit"),pe||(z=setInterval(function(){!lr&&!Cr&&!Je&&$===o.currItem.initialZoomLevel&&o.updateSize()},1e3)),a.addClass(n,"pswp--visible")}},close:function(){!h||(h=!1,g=!0,ot("close"),Rn(),Lu(o.currItem,null,!0,o.destroy))},destroy:function(){ot("destroy"),Ao&&clearTimeout(Ao),n.setAttribute("aria-hidden","true"),n.className=ne,z&&clearInterval(z),a.unbind(o.scrollWrap,I,o),a.unbind(window,"scroll",o),Ra(),Yr(),Ue=null},panTo:function(K,ce,be){be||(K>gt.min.x?K=gt.min.x:K<gt.max.x&&(K=gt.max.x),ce>gt.min.y?ce=gt.min.y:ce<gt.max.y&&(ce=gt.max.y)),S.x=K,S.y=ce,Et()},handleEvent:function(K){K=K||window.event,P[K.type]&&P[K.type](K)},goTo:function(K){K=_e(K);var ce=K-x;se=ce,x=K,o.currItem=qi(x),Q-=ce,zn(L.x*Q),Yr(),Wn=!1,o.updateCurrItem()},next:function(){o.goTo(x+1)},prev:function(){o.goTo(x-1)},updateCurrZoomItem:function(K){if(K&&ot("beforeChange",0),F[1].el.children.length){var ce=F[1].el.children[0];a.hasClass(ce,"pswp__zoom-wrap")?Yn=ce.style:Yn=null}else Yn=null;gt=o.currItem.bounds,q=$=o.currItem.initialZoomLevel,S.x=gt.center.x,S.y=gt.center.y,K&&ot("afterChange")},invalidateCurrItems:function(){O=!0;for(var K=0;K<c;K++)F[K].item&&(F[K].item.needsUpdate=!0)},updateCurrItem:function(K){if(se!==0){var ce=Math.abs(se),be;if(!(K&&ce<2)){o.currItem=qi(x),et=!1,ot("beforeChange",se),ce>=c&&(E+=se+(se>0?-c:c),ce=c);for(var ye=0;ye<ce;ye++)se>0?(be=F.shift(),F[c-1]=be,E++,wn((E+2)*L.x,be.el.style),o.setContent(be,x-ce+ye+1+1)):(be=F.pop(),F.unshift(be),E--,wn(E*L.x,be.el.style),o.setContent(be,x+ce-ye-1-1));if(Yn&&Math.abs(se)===1){var tt=qi(X);tt.initialZoomLevel!==$&&(pr(tt,B),oo(tt),Dt(tt))}se=0,o.updateCurrZoomItem(),X=x,ot("afterChange")}}},updateSize:function(K){if(!pe&&d.modal){var ce=a.getScrollY();if(Te!==ce&&(n.style.top=ce+"px",Te=ce),!K&&We.x===window.innerWidth&&We.y===window.innerHeight)return;We.x=window.innerWidth,We.y=window.innerHeight,n.style.height=We.y+"px"}if(B.x=o.scrollWrap.clientWidth,B.y=o.scrollWrap.clientHeight,Ut(),L.x=B.x+Math.round(B.x*d.spacing),L.y=B.y,zn(L.x*Q),ot("beforeResize"),E!==void 0){for(var be,ye,tt,at=0;at<c;at++)be=F[at],wn((at+E)*L.x,be.el.style),tt=x+at-1,d.loop&&qn()>2&&(tt=_e(tt)),ye=qi(tt),ye&&(O||ye.needsUpdate||!ye.bounds)?(o.cleanSlide(ye),o.setContent(be,tt),at===1&&(o.currItem=ye,o.updateCurrZoomItem(!0)),ye.needsUpdate=!1):be.index===-1&&tt>=0&&o.setContent(be,tt),ye&&ye.container&&(pr(ye,B),oo(ye),Dt(ye));O=!1}q=$=o.currItem.initialZoomLevel,gt=o.currItem.bounds,gt&&(S.x=gt.center.x,S.y=gt.center.y,Et(!0)),ot("resize")},zoomTo:function(K,ce,be,ye,tt){ce&&(q=$,Di.x=Math.abs(ce.x)-S.x,Di.y=Math.abs(ce.y)-S.y,vt(T,S));var at=pn(K,!1),Rt={};ha("x",at,Rt,K),ha("y",at,Rt,K);var Zt=$,Bt={x:S.x,y:S.y};bi(Rt);var nn=function(gn){gn===1?($=K,S.x=Rt.x,S.y=Rt.y):($=(K-Zt)*gn+Zt,S.x=(Rt.x-Bt.x)*gn+Bt.x,S.y=(Rt.y-Bt.y)*gn+Bt.y),tt&&tt(gn),Et(gn===1)};be?ri("customZoomTo",0,1,be,ye||a.easing.sine.inOut,nn):nn(1)}},Fs=30,To=10,La,ii,Zn={},va={},cr={},xr={},Ki={},Nr=[],Fr={},Br,Vi=[],pa={},Fn,Ct,Pr,ro=0,Hr=v(),hn=0,Cr,ga,Wi,Ve,te,we,je,Je,Ft,gt,st=v(),Yn,Wn,Di=v(),Kr=v(),Oa,Bs,za,io,Ps,Al=function(K,ce){return K.x===ce.x&&K.y===ce.y},Nl=function(K,ce){return Math.abs(K.x-ce.x)<l&&Math.abs(K.y-ce.y)<l},Hs=function(K,ce){return pa.x=Math.abs(K.x-ce.x),pa.y=Math.abs(K.y-ce.y),Math.sqrt(pa.x*pa.x+pa.y*pa.y)},Ra=function(){te&&(Ce(te),te=null)},Dl=function(){Cr&&(te=Re(Dl),Pd())},zd=function(){return!(d.scaleMode==="fit"&&$===o.currItem.initialZoomLevel)},Rd=function(K,ce){return!K||K===document||K.getAttribute("class")&&K.getAttribute("class").indexOf("pswp__scroll-wrap")>-1?!1:ce(K)?K:Rd(K.parentNode,ce)},js={},Qi=function(K,ce){return js.prevent=!Rd(K.target,d.isClickableElement),ot("preventDragEvent",K,ce,js),js.prevent},Tu=function(K,ce){return ce.x=K.pageX,ce.y=K.pageY,ce.id=K.identifier,ce},Au=function(K,ce,be){be.x=(K.x+ce.x)*.5,be.y=(K.y+ce.y)*.5},Il=function(K,ce,be){if(K-ii>50){var ye=Vi.length>2?Vi.shift():{};ye.x=ce,ye.y=be,Vi.push(ye),ii=K}},os=function(){var K=S.y-o.currItem.initialPosition.y;return 1-Math.abs(K/(B.y/2))},Ws={},Fd={},ao=[],Ll,Us=function(K){for(;ao.length>0;)ao.pop();return J?(Ll=0,Nr.forEach(function(ce){Ll===0?ao[0]=ce:Ll===1&&(ao[1]=ce),Ll++})):K.type.indexOf("touch")>-1?K.touches&&K.touches.length>0&&(ao[0]=Tu(K.touches[0],Ws),K.touches.length>1&&(ao[1]=Tu(K.touches[1],Fd))):(Ws.x=K.pageX,Ws.y=K.pageY,Ws.id="",ao[0]=Ws),ao},Nu=function(K,ce){var be,ye=S[K]+ce[K],tt,at=ce[K]>0,Rt=st.x+ce.x,Zt=st.x-Fr.x,Bt,nn;if(ye>gt.min[K]||ye<gt.max[K]?be=d.panEndFriction:be=1,ye=S[K]+ce[K]*be,(d.allowPanToNext||$===o.currItem.initialZoomLevel)&&(Yn?Oa==="h"&&K==="x"&&!Wi&&(at?(ye>gt.min[K]&&(be=d.panEndFriction,gt.min[K]-ye,tt=gt.min[K]-T[K]),(tt<=0||Zt<0)&&qn()>1?(nn=Rt,Zt<0&&Rt>Fr.x&&(nn=Fr.x)):gt.min.x!==gt.max.x&&(Bt=ye)):(ye<gt.max[K]&&(be=d.panEndFriction,ye-gt.max[K],tt=T[K]-gt.max[K]),(tt<=0||Zt>0)&&qn()>1?(nn=Rt,Zt>0&&Rt<Fr.x&&(nn=Fr.x)):gt.min.x!==gt.max.x&&(Bt=ye))):nn=Rt,K==="x"))return nn!==void 0&&(zn(nn,!0),nn===Fr.x?we=!1:we=!0),gt.min.x!==gt.max.x&&(Bt!==void 0?S.x=Bt:we||(S.x+=ce.x*be)),nn!==void 0;Wn||we||$>o.currItem.fitRatio&&(S[K]+=ce[K]*be)},Du=function(K){if(!(K.type==="mousedown"&&K.button>0)){if(Do){K.preventDefault();return}if(!(Pr&&K.type==="mousedown")){if(Qi(K,!0)&&K.preventDefault(),ot("pointerDown"),J){var ce=a.arraySearch(Nr,K.pointerId,"id");ce<0&&(ce=Nr.length),Nr[ce]={x:K.pageX,y:K.pageY,id:K.pointerId}}var be=Us(K),ye=be.length;je=null,Yr(),(!Cr||ye===1)&&(Cr=Bs=!0,a.bind(window,D,o),Fn=Ps=za=Ct=we=Ve=ga=Wi=!1,Oa=null,ot("firstTouchStart",be),vt(T,S),M.x=M.y=0,vt(xr,be[0]),vt(Ki,xr),Fr.x=L.x*Q,Vi=[{x:xr.x,y:xr.y}],ii=La=nt(),pn($,!0),Ra(),Dl()),!Je&&ye>1&&!Wn&&!we&&(q=$,Wi=!1,Je=ga=!0,M.y=M.x=0,vt(T,S),vt(Zn,be[0]),vt(va,be[1]),Au(Zn,va,Kr),Di.x=Math.abs(Kr.x)-S.x,Di.y=Math.abs(Kr.y)-S.y,Ft=Hs(Zn,va))}}},Bd=function(K){if(K.preventDefault(),J){var ce=a.arraySearch(Nr,K.pointerId,"id");if(ce>-1){var be=Nr[ce];be.x=K.pageX,be.y=K.pageY}}if(Cr){var ye=Us(K);if(!Oa&&!Ve&&!Je)if(st.x!==L.x*Q)Oa="h";else{var tt=Math.abs(ye[0].x-xr.x)-Math.abs(ye[0].y-xr.y);Math.abs(tt)>=To&&(Oa=tt>0?"h":"v",je=ye)}else je=ye}},Pd=function(){if(!!je){var K=je.length;if(K!==0)if(vt(Zn,je[0]),cr.x=Zn.x-xr.x,cr.y=Zn.y-xr.y,Je&&K>1){if(xr.x=Zn.x,xr.y=Zn.y,!cr.x&&!cr.y&&Al(je[1],va))return;vt(va,je[1]),Wi||(Wi=!0,ot("zoomGestureStarted"));var ce=Hs(Zn,va),be=Un(ce);be>o.currItem.initialZoomLevel+o.currItem.initialZoomLevel/15&&(Ps=!0);var ye=1,tt=sr(),at=dr();if(be<tt)if(d.pinchToClose&&!Ps&&q<=o.currItem.initialZoomLevel){var Rt=tt-be,Zt=1-Rt/(tt/1.2);wt(Zt),ot("onPinchClose",Zt),za=!0}else ye=(tt-be)/tt,ye>1&&(ye=1),be=tt-ye*(tt/3);else be>at&&(ye=(be-at)/(tt*6),ye>1&&(ye=1),be=at+ye*tt);ye<0&&(ye=0),Au(Zn,va,Hr),M.x+=Hr.x-Kr.x,M.y+=Hr.y-Kr.y,vt(Kr,Hr),S.x=kr("x",be),S.y=kr("y",be),Fn=be>$,$=be,Et()}else{if(!Oa||(Bs&&(Bs=!1,Math.abs(cr.x)>=To&&(cr.x-=je[0].x-Ki.x),Math.abs(cr.y)>=To&&(cr.y-=je[0].y-Ki.y)),xr.x=Zn.x,xr.y=Zn.y,cr.x===0&&cr.y===0))return;if(Oa==="v"&&d.closeOnVerticalDrag&&!zd()){M.y+=cr.y,S.y+=cr.y;var Bt=os();Ct=!0,ot("onVerticalDrag",Bt),wt(Bt),Et();return}Il(nt(),Zn.x,Zn.y),Ve=!0,gt=o.currItem.bounds;var nn=Nu("x",cr);nn||(Nu("y",cr),bi(S),Et())}}},Ol=function(K){if(ze.isOldAndroid){if(Pr&&K.type==="mouseup")return;K.type.indexOf("touch")>-1&&(clearTimeout(Pr),Pr=setTimeout(function(){Pr=0},600))}ot("pointerUp"),Qi(K,!1)&&K.preventDefault();var ce;if(J){var be=a.arraySearch(Nr,K.pointerId,"id");if(be>-1)if(ce=Nr.splice(be,1)[0],navigator.msPointerEnabled){var ye={4:"mouse",2:"touch",3:"pen"};ce.type=ye[K.pointerType],ce.type||(ce.type=K.pointerType||"mouse")}else ce.type=K.pointerType||"mouse"}var tt=Us(K),at,Rt=tt.length;if(K.type==="mouseup"&&(Rt=0),Rt===2)return je=null,!0;Rt===1&&vt(Ki,tt[0]),Rt===0&&!Oa&&!Wn&&(ce||(K.type==="mouseup"?ce={x:K.pageX,y:K.pageY,type:"mouse"}:K.changedTouches&&K.changedTouches[0]&&(ce={x:K.changedTouches[0].pageX,y:K.changedTouches[0].pageY,type:"touch"})),ot("touchRelease",K,ce));var Zt=-1;if(Rt===0&&(Cr=!1,a.unbind(window,D,o),Ra(),Je?Zt=0:hn!==-1&&(Zt=nt()-hn)),hn=Rt===1?nt():-1,Zt!==-1&&Zt<150?at="zoom":at="swipe",Je&&Rt<2&&(Je=!1,Rt===1&&(at="zoomPointerUp"),ot("zoomGestureEnded")),je=null,!(!Ve&&!Wi&&!Wn&&!Ct)){if(Yr(),Br||(Br=zl()),Br.calculateSwipeSpeed("x"),Ct){var Bt=os();if(Bt<d.verticalDragRange)o.close();else{var nn=S.y,gn=io;ri("verticalDrag",0,1,300,a.easing.cubic.out,function(fr){S.y=(o.currItem.initialPosition.y-nn)*fr+nn,wt((1-gn)*fr+gn),Et()}),ot("onVerticalDrag",1)}return}if((we||Wn)&&Rt===0){var Ii=Kn(at,Br);if(Ii)return;at="zoomPointerUp"}if(!Wn){if(at!=="swipe"){Rl();return}!we&&$>o.currItem.fitRatio&&Iu(Br)}}},zl=function(){var K,ce,be={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(ye){Vi.length>1?(K=nt()-ii+50,ce=Vi[Vi.length-2][ye]):(K=nt()-La,ce=Ki[ye]),be.lastFlickOffset[ye]=xr[ye]-ce,be.lastFlickDist[ye]=Math.abs(be.lastFlickOffset[ye]),be.lastFlickDist[ye]>20?be.lastFlickSpeed[ye]=be.lastFlickOffset[ye]/K:be.lastFlickSpeed[ye]=0,Math.abs(be.lastFlickSpeed[ye])<.1&&(be.lastFlickSpeed[ye]=0),be.slowDownRatio[ye]=.95,be.slowDownRatioReverse[ye]=1-be.slowDownRatio[ye],be.speedDecelerationRatio[ye]=1},calculateOverBoundsAnimOffset:function(ye,tt){be.backAnimStarted[ye]||(S[ye]>gt.min[ye]?be.backAnimDestination[ye]=gt.min[ye]:S[ye]<gt.max[ye]&&(be.backAnimDestination[ye]=gt.max[ye]),be.backAnimDestination[ye]!==void 0&&(be.slowDownRatio[ye]=.7,be.slowDownRatioReverse[ye]=1-be.slowDownRatio[ye],be.speedDecelerationRatioAbs[ye]<.05&&(be.lastFlickSpeed[ye]=0,be.backAnimStarted[ye]=!0,ri("bounceZoomPan"+ye,S[ye],be.backAnimDestination[ye],tt||300,a.easing.sine.out,function(at){S[ye]=at,Et()}))))},calculateAnimOffset:function(ye){be.backAnimStarted[ye]||(be.speedDecelerationRatio[ye]=be.speedDecelerationRatio[ye]*(be.slowDownRatio[ye]+be.slowDownRatioReverse[ye]-be.slowDownRatioReverse[ye]*be.timeDiff/10),be.speedDecelerationRatioAbs[ye]=Math.abs(be.lastFlickSpeed[ye]*be.speedDecelerationRatio[ye]),be.distanceOffset[ye]=be.lastFlickSpeed[ye]*be.speedDecelerationRatio[ye]*be.timeDiff,S[ye]+=be.distanceOffset[ye])},panAnimLoop:function(){if(In.zoomPan&&(In.zoomPan.raf=Re(be.panAnimLoop),be.now=nt(),be.timeDiff=be.now-be.lastNow,be.lastNow=be.now,be.calculateAnimOffset("x"),be.calculateAnimOffset("y"),Et(),be.calculateOverBoundsAnimOffset("x"),be.calculateOverBoundsAnimOffset("y"),be.speedDecelerationRatioAbs.x<.05&&be.speedDecelerationRatioAbs.y<.05)){S.x=Math.round(S.x),S.y=Math.round(S.y),Et(),yi("zoomPan");return}}};return be},Iu=function(K){if(K.calculateSwipeSpeed("y"),gt=o.currItem.bounds,K.backAnimDestination={},K.backAnimStarted={},Math.abs(K.lastFlickSpeed.x)<=.05&&Math.abs(K.lastFlickSpeed.y)<=.05)return K.speedDecelerationRatioAbs.x=K.speedDecelerationRatioAbs.y=0,K.calculateOverBoundsAnimOffset("x"),K.calculateOverBoundsAnimOffset("y"),!0;Ni("zoomPan"),K.lastNow=nt(),K.panAnimLoop()},Kn=function(K,ce){var be;Wn||(ro=x);var ye;if(K==="swipe"){var tt=xr.x-Ki.x,at=ce.lastFlickDist.x<10;tt>Fs&&(at||ce.lastFlickOffset.x>20)?ye=-1:tt<-Fs&&(at||ce.lastFlickOffset.x<-20)&&(ye=1)}var Rt;ye&&(x+=ye,x<0?(x=d.loop?qn()-1:0,Rt=!0):x>=qn()&&(x=d.loop?0:qn()-1,Rt=!0),(!Rt||d.loop)&&(se+=ye,Q-=ye,be=!0));var Zt=L.x*Q,Bt=Math.abs(Zt-st.x),nn;return!be&&Zt>st.x!=ce.lastFlickSpeed.x>0?nn=333:(nn=Math.abs(ce.lastFlickSpeed.x)>0?Bt/Math.abs(ce.lastFlickSpeed.x):333,nn=Math.min(nn,400),nn=Math.max(nn,250)),ro===x&&(be=!1),Wn=!0,ot("mainScrollAnimStart"),ri("mainScroll",st.x,Zt,nn,a.easing.cubic.out,zn,function(){Yr(),Wn=!1,ro=-1,(be||ro!==x)&&o.updateCurrItem(),ot("mainScrollAnimComplete")}),be&&o.updateCurrItem(!0),be},Un=function(K){return 1/Ft*K*q},Rl=function(){var K=$,ce=sr(),be=dr();$<ce?K=ce:$>be&&(K=be);var ye=1,tt,at=io;return za&&!Fn&&!Ps&&$<ce?(o.close(),!0):(za&&(tt=function(Rt){wt((ye-at)*Rt+at)}),o.zoomTo(K,0,200,a.easing.cubic.out,tt),!0)};Ge("Gestures",{publicMethods:{initGestures:function(){var K=function(ce,be,ye,tt,at){Y=ce+be,j=ce+ye,fe=ce+tt,at?ve=ce+at:ve=""};J=ze.pointerEvent,J&&ze.touch&&(ze.touch=!1),J?navigator.msPointerEnabled?K("MSPointer","Down","Move","Up","Cancel"):K("pointer","down","move","up","cancel"):ze.touch?(K("touch","start","move","end","cancel"),Ee=!0):K("mouse","down","move","up"),D=j+" "+fe+" "+ve,I=Y,J&&!Ee&&(Ee=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),o.likelyTouchDevice=Ee,P[Y]=Du,P[j]=Bd,P[fe]=Ol,ve&&(P[ve]=P[fe]),ze.touch&&(I+=" mousedown",D+=" mousemove mouseup",P.mousedown=P[Y],P.mousemove=P[j],P.mouseup=P[fe]),Ee||(d.allowPanToNext=!1)}}});var Ao,Lu=function(K,ce,be,ye){Ao&&clearTimeout(Ao),Do=!0,ss=!0;var tt;K.initialLayout?(tt=K.initialLayout,K.initialLayout=null):tt=d.getThumbBoundsFn&&d.getThumbBoundsFn(x);var at=be?d.hideAnimationDuration:d.showAnimationDuration,Rt=function(){yi("initialZoom"),be?(o.template.removeAttribute("style"),o.bg.removeAttribute("style")):(wt(1),ce&&(ce.style.display="block"),a.addClass(n,"pswp--animated-in"),ot("initialZoom"+(be?"OutEnd":"InEnd"))),ye&&ye(),Do=!1};if(!at||!tt||tt.x===void 0){ot("initialZoom"+(be?"Out":"In")),$=K.initialZoomLevel,vt(S,K.initialPosition),Et(),n.style.opacity=be?0:1,wt(1),at?setTimeout(function(){Rt()},at):Rt();return}var Zt=function(){var Bt=w,nn=!o.currItem.src||o.currItem.loadError||d.showHideOpacity;K.miniImg&&(K.miniImg.style.webkitBackfaceVisibility="hidden"),be||($=tt.w/K.w,S.x=tt.x,S.y=tt.y-me,o[nn?"template":"bg"].style.opacity=.001,Et()),Ni("initialZoom"),be&&!Bt&&a.removeClass(n,"pswp--animated-in"),nn&&(be?a[(Bt?"remove":"add")+"Class"](n,"pswp--animate_opacity"):setTimeout(function(){a.addClass(n,"pswp--animate_opacity")},30)),Ao=setTimeout(function(){if(ot("initialZoom"+(be?"Out":"In")),!be)$=K.initialZoomLevel,vt(S,K.initialPosition),Et(),wt(1),nn?n.style.opacity=1:wt(1),Ao=setTimeout(Rt,at+20);else{var gn=tt.w/K.w,Ii={x:S.x,y:S.y},fr=$,Li=io,uo=function(ya){ya===1?($=gn,S.x=tt.x,S.y=tt.y-Te):($=(gn-fr)*ya+fr,S.x=(tt.x-Ii.x)*ya+Ii.x,S.y=(tt.y-Te-Ii.y)*ya+Ii.y),Et(),nn?n.style.opacity=1-ya:wt(Li-ya*Li)};Bt?ri("initialZoom",0,1,at,a.easing.cubic.out,uo,Rt):(uo(1),Ao=setTimeout(Rt,at+20))}},be?25:90)};Zt()},Dr,Ui={},No=[],ss,Do,ir={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return Dr.length}},qi,qn,ls=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},qs=function(K,ce,be){var ye=K.bounds;ye.center.x=Math.round((Ui.x-ce)/2),ye.center.y=Math.round((Ui.y-be)/2)+K.vGap.top,ye.max.x=ce>Ui.x?Math.round(Ui.x-ce):ye.center.x,ye.max.y=be>Ui.y?Math.round(Ui.y-be)+K.vGap.top:ye.center.y,ye.min.x=ce>Ui.x?0:ye.center.x,ye.min.y=be>Ui.y?K.vGap.top:ye.center.y},pr=function(K,ce,be){if(K.src&&!K.loadError){var ye=!be;if(ye&&(K.vGap||(K.vGap={top:0,bottom:0}),ot("parseVerticalMargin",K)),Ui.x=ce.x,Ui.y=ce.y-K.vGap.top-K.vGap.bottom,ye){var tt=Ui.x/K.w,at=Ui.y/K.h;K.fitRatio=tt<at?tt:at;var Rt=d.scaleMode;Rt==="orig"?be=1:Rt==="fit"&&(be=K.fitRatio),be>1&&(be=1),K.initialZoomLevel=be,K.bounds||(K.bounds=ls())}return be?(qs(K,K.w*be,K.h*be),ye&&be===K.initialZoomLevel&&(K.initialPosition=K.bounds.center),K.bounds):void 0}else return K.w=K.h=0,K.initialZoomLevel=K.fitRatio=1,K.bounds=ls(),K.initialPosition=K.bounds.center,K.bounds},$s=function(K,ce,be,ye,tt,at){ce.loadError||ye&&(ce.imageAppended=!0,oo(ce,ye,ce===o.currItem&&et),be.appendChild(ye),at&&setTimeout(function(){ce&&ce.loaded&&ce.placeholder&&(ce.placeholder.style.display="none",ce.placeholder=null)},500))},Ou=function(K){K.loading=!0,K.loaded=!1;var ce=K.img=a.createEl("pswp__img","img"),be=function(){K.loading=!1,K.loaded=!0,K.loadComplete?K.loadComplete(K):K.img=null,ce.onload=ce.onerror=null,ce=null};return ce.onload=be,ce.onerror=function(){K.loadError=!0,be()},ce.src=K.src,ce},zu=function(K,ce){if(K.src&&K.loadError&&K.container)return ce&&(K.container.innerHTML=""),K.container.innerHTML=d.errorMsg.replace("%url%",K.src),!0},oo=function(K,ce,be){if(!!K.src){ce||(ce=K.container.lastChild);var ye=be?K.w:Math.round(K.w*K.fitRatio),tt=be?K.h:Math.round(K.h*K.fitRatio);K.placeholder&&!K.loaded&&(K.placeholder.style.width=ye+"px",K.placeholder.style.height=tt+"px"),ce.style.width=ye+"px",ce.style.height=tt+"px"}},Fl=function(){if(No.length){for(var K,ce=0;ce<No.length;ce++)K=No[ce],K.holder.index===K.index&&$s(K.index,K.item,K.baseDiv,K.img,!1,K.clearPlaceholder);No=[]}};Ge("Controller",{publicMethods:{lazyLoadItem:function(K){K=_e(K);var ce=qi(K);!ce||(ce.loaded||ce.loading)&&!O||(ot("gettingData",K,ce),ce.src&&Ou(ce))},initController:function(){a.extend(d,ir,!0),o.items=Dr=r,qi=o.getItemAt,qn=d.getNumItemsFn,qn()<3&&(d.loop=!1),Ae("beforeChange",function(K){var ce=d.preload,be=K===null?!0:K>=0,ye=Math.min(ce[0],qn()),tt=Math.min(ce[1],qn()),at;for(at=1;at<=(be?tt:ye);at++)o.lazyLoadItem(x+at);for(at=1;at<=(be?ye:tt);at++)o.lazyLoadItem(x-at)}),Ae("initialLayout",function(){o.currItem.initialLayout=d.getThumbBoundsFn&&d.getThumbBoundsFn(x)}),Ae("mainScrollAnimComplete",Fl),Ae("initialZoomInEnd",Fl),Ae("destroy",function(){for(var K,ce=0;ce<Dr.length;ce++)K=Dr[ce],K.container&&(K.container=null),K.placeholder&&(K.placeholder=null),K.img&&(K.img=null),K.preloader&&(K.preloader=null),K.loadError&&(K.loaded=K.loadError=!1);No=null})},getItemAt:function(K){return K>=0&&Dr[K]!==void 0?Dr[K]:!1},allowProgressiveImg:function(){return d.forceProgressiveLoading||!Ee||d.mouseUsed||screen.width>1200},setContent:function(K,ce){d.loop&&(ce=_e(ce));var be=o.getItemAt(K.index);be&&(be.container=null);var ye=o.getItemAt(ce),tt;if(!ye){K.el.innerHTML="";return}ot("gettingData",ce,ye),K.index=ce,K.item=ye;var at=ye.container=a.createEl("pswp__zoom-wrap");if(!ye.src&&ye.html&&(ye.html.tagName?at.appendChild(ye.html):at.innerHTML=ye.html),zu(ye),pr(ye,B),ye.src&&!ye.loadError&&!ye.loaded){if(ye.loadComplete=function(Bt){if(!!h){if(K&&K.index===ce){if(zu(Bt,!0)){Bt.loadComplete=Bt.img=null,pr(Bt,B),Dt(Bt),K.index===x&&o.updateCurrZoomItem();return}Bt.imageAppended?!Do&&Bt.placeholder&&(Bt.placeholder.style.display="none",Bt.placeholder=null):ze.transform&&(Wn||Do)?No.push({item:Bt,baseDiv:at,img:Bt.img,index:ce,holder:K,clearPlaceholder:!0}):$s(ce,Bt,at,Bt.img,Wn||Do,!0)}Bt.loadComplete=null,Bt.img=null,ot("imageLoadComplete",ce,Bt)}},a.features.transform){var Rt="pswp__img pswp__img--placeholder";Rt+=ye.msrc?"":" pswp__img--placeholder--blank";var Zt=a.createEl(Rt,ye.msrc?"img":"");ye.msrc&&(Zt.src=ye.msrc),oo(ye,Zt),at.appendChild(Zt),ye.placeholder=Zt}ye.loading||Ou(ye),o.allowProgressiveImg()&&(!ss&&ze.transform?No.push({item:ye,baseDiv:at,img:ye.img,index:ce,holder:K}):$s(ce,ye,at,ye.img,!0,!0))}else ye.src&&!ye.loadError&&(tt=a.createEl("pswp__img","img"),tt.style.opacity=1,tt.src=ye.src,oo(ye,tt),$s(ce,ye,at,tt));!ss&&ce===x?(Yn=at.style,Lu(ye,tt||ye.img)):Dt(ye),K.el.innerHTML="",K.el.appendChild(at)},cleanSlide:function(K){K.img&&(K.img.onload=K.img.onerror=null),K.loaded=K.loading=K.img=K.imageAppended=!1}}});var ma,ai={},Ru=function(K,ce,be){var ye=document.createEvent("CustomEvent"),tt={origEvent:K,target:K.target,releasePoint:ce,pointerType:be||"touch"};ye.initCustomEvent("pswpTap",!0,!0,tt),K.target.dispatchEvent(ye)};Ge("Tap",{publicMethods:{initTap:function(){Ae("firstTouchStart",o.onTapStart),Ae("touchRelease",o.onTapRelease),Ae("destroy",function(){ai={},ma=null})},onTapStart:function(K){K.length>1&&(clearTimeout(ma),ma=null)},onTapRelease:function(K,ce){if(!!ce&&!Ve&&!ga&&!lr){var be=ce;if(ma&&(clearTimeout(ma),ma=null,Nl(be,ai))){ot("doubleTap",be);return}if(ce.type==="mouse"){Ru(K,ce,"mouse");return}var ye=K.target.tagName.toUpperCase();if(ye==="BUTTON"||a.hasClass(K.target,"pswp__single-tap")){Ru(K,ce);return}vt(ai,be),ma=setTimeout(function(){Ru(K,ce),ma=null},300)}}}});var ar;Ge("DesktopZoom",{publicMethods:{initDesktopZoom:function(){ue||(Ee?Ae("mouseUsed",function(){o.setupDesktopZoom()}):o.setupDesktopZoom(!0))},setupDesktopZoom:function(K){ar={};var ce="wheel mousewheel DOMMouseScroll";Ae("bindEvents",function(){a.bind(n,ce,o.handleMouseWheel)}),Ae("unbindEvents",function(){ar&&a.unbind(n,ce,o.handleMouseWheel)}),o.mouseZoomedIn=!1;var be,ye=function(){o.mouseZoomedIn&&(a.removeClass(n,"pswp--zoomed-in"),o.mouseZoomedIn=!1),$<1?a.addClass(n,"pswp--zoom-allowed"):a.removeClass(n,"pswp--zoom-allowed"),tt()},tt=function(){be&&(a.removeClass(n,"pswp--dragging"),be=!1)};Ae("resize",ye),Ae("afterChange",ye),Ae("pointerDown",function(){o.mouseZoomedIn&&(be=!0,a.addClass(n,"pswp--dragging"))}),Ae("pointerUp",tt),K||ye()},handleMouseWheel:function(K){if($<=o.currItem.fitRatio)return d.modal&&(!d.closeOnScroll||lr||Cr?K.preventDefault():ae&&Math.abs(K.deltaY)>2&&(w=!0,o.close())),!0;if(K.stopPropagation(),ar.x=0,"deltaX"in K)K.deltaMode===1?(ar.x=K.deltaX*18,ar.y=K.deltaY*18):(ar.x=K.deltaX,ar.y=K.deltaY);else if("wheelDelta"in K)K.wheelDeltaX&&(ar.x=-.16*K.wheelDeltaX),K.wheelDeltaY?ar.y=-.16*K.wheelDeltaY:ar.y=-.16*K.wheelDelta;else if("detail"in K)ar.y=K.detail;else return;pn($,!0);var ce=S.x-ar.x,be=S.y-ar.y;(d.modal||ce<=gt.min.x&&ce>=gt.max.x&&be<=gt.min.y&&be>=gt.max.y)&&K.preventDefault(),o.panTo(ce,be)},toggleDesktopZoom:function(K){K=K||{x:B.x/2+ie.x,y:B.y/2+ie.y};var ce=d.getDoubleTapZoom(!0,o.currItem),be=$===ce;o.mouseZoomedIn=!be,o.zoomTo(be?o.currItem.initialZoomLevel:ce,K,333),a[(be?"remove":"add")+"Class"](n,"pswp--zoomed-in")}}});var Lc={history:!0,galleryUID:1},Gs,Fa,Ba,Pa,kn,Ha,Ir,us,ja,gr,ba,Bl,so=function(){return ba.hash.substring(1)},Zs=function(){Gs&&clearTimeout(Gs),Ba&&clearTimeout(Ba)},lo=function(){var K=so(),ce={};if(K.length<5)return ce;var be,ye=K.split("&");for(be=0;be<ye.length;be++)if(!!ye[be]){var tt=ye[be].split("=");tt.length<2||(ce[tt[0]]=tt[1])}if(d.galleryPIDs){var at=ce.pid;for(ce.pid=0,be=0;be<Dr.length;be++)if(Dr[be].pid===at){ce.pid=be;break}}else ce.pid=parseInt(ce.pid,10)-1;return ce.pid<0&&(ce.pid=0),ce},Fu=function(){if(Ba&&clearTimeout(Ba),lr||Cr){Ba=setTimeout(Fu,500);return}Pa?clearTimeout(Fa):Pa=!0;var K=x+1,ce=qi(x);ce.hasOwnProperty("pid")&&(K=ce.pid);var be=Ir+"&gid="+d.galleryUID+"&pid="+K;us||ba.hash.indexOf(be)===-1&&(gr=!0);var ye=ba.href.split("#")[0]+"#"+be;Bl?"#"+be!==window.location.hash&&history[us?"replaceState":"pushState"]("",document.title,ye):us?ba.replace(ye):ba.hash=be,us=!0,Fa=setTimeout(function(){Pa=!1},60)};Ge("History",{publicMethods:{initHistory:function(){if(a.extend(d,Lc,!0),!!d.history){ba=window.location,gr=!1,ja=!1,us=!1,Ir=so(),Bl="pushState"in history,Ir.indexOf("gid=")>-1&&(Ir=Ir.split("&gid=")[0],Ir=Ir.split("?gid=")[0]),Ae("afterChange",o.updateURL),Ae("unbindEvents",function(){a.unbind(window,"hashchange",o.onHashChange)});var K=function(){Ha=!0,ja||(gr?history.back():Ir?ba.hash=Ir:Bl?history.pushState("",document.title,ba.pathname+ba.search):ba.hash=""),Zs()};Ae("unbindEvents",function(){w&&K()}),Ae("destroy",function(){Ha||K()}),Ae("firstUpdate",function(){x=lo().pid});var ce=Ir.indexOf("pid=");ce>-1&&(Ir=Ir.substring(0,ce),Ir.slice(-1)==="&"&&(Ir=Ir.slice(0,-1))),setTimeout(function(){h&&a.bind(window,"hashchange",o.onHashChange)},40)}},onHashChange:function(){if(so()===Ir){ja=!0,o.close();return}Pa||(kn=!0,o.goTo(lo().pid),kn=!1)},updateURL:function(){Zs(),!kn&&(us?Gs=setTimeout(Fu,800):Fu())}}}),a.extend(o,Ia)};return t})})(Gm);var G_=Gm.exports,Zm={exports:{}};/*! PhotoSwipe Default UI - 4.1.3 - 2019-01-08
* http://photoswipe.com
* Copyright (c) 2019 Dmitry Semenov; */(function(b,u){(function(t,n){b.exports=n()})(ca,function(){var t=function(n,e){var r=this,i=!1,a=!0,o,l,c,d,v,h,g,w=!0,x,_,E,M,T,S,D,I,P={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(Ce,ne){return Ce.title?(ne.children[0].innerHTML=Ce.title,!0):(ne.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return n.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return n.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},B,$=function(Ce){if(B)return!0;Ce=Ce||window.event,I.timeToIdle&&I.mouseUsed&&!_&&Y();for(var ne=Ce.target||Ce.srcElement,me,ue=ne.getAttribute("class")||"",Te,ze=0;ze<Le.length;ze++)me=Le[ze],me.onTap&&ue.indexOf("pswp__"+me.name)>-1&&(me.onTap(),Te=!0);if(Te){Ce.stopPropagation&&Ce.stopPropagation(),B=!0;var We=e.features.isOldAndroid?600:30;setTimeout(function(){B=!1},We)}},q=function(){return!n.likelyTouchDevice||I.mouseUsed||screen.width>I.fitControlsWidth},G=function(Ce,ne,me){e[(me?"add":"remove")+"Class"](Ce,"pswp__"+ne)},H=function(){var Ce=I.getNumItemsFn()===1;Ce!==D&&(G(l,"ui--one-slide",Ce),D=Ce)},z=function(){G(g,"share-modal--hidden",w)},O=function(){return w=!w,w?(e.removeClass(g,"pswp__share-modal--fade-in"),setTimeout(function(){w&&z()},300)):(z(),setTimeout(function(){w||e.addClass(g,"pswp__share-modal--fade-in")},30)),w||ie(),!1},Q=function(Ce){Ce=Ce||window.event;var ne=Ce.target||Ce.srcElement;return n.shout("shareLinkClick",Ce,ne),ne.href?ne.hasAttribute("download")?!0:(window.open(ne.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),w||O(),!1):!1},ie=function(){for(var Ce="",ne,me,ue,Te,ze,We=0;We<I.shareButtons.length;We++)ne=I.shareButtons[We],ue=I.getImageURLForShare(ne),Te=I.getPageURLForShare(ne),ze=I.getTextForShare(ne),me=ne.url.replace("{{url}}",encodeURIComponent(Te)).replace("{{image_url}}",encodeURIComponent(ue)).replace("{{raw_image_url}}",ue).replace("{{text}}",encodeURIComponent(ze)),Ce+='<a href="'+me+'" target="_blank" class="pswp__share--'+ne.id+'"'+(ne.download?"download":"")+">"+ne.label+"</a>",I.parseShareButtonOut&&(Ce=I.parseShareButtonOut(ne,Ce));g.children[0].innerHTML=Ce,g.children[0].onclick=Q},L=function(Ce){for(var ne=0;ne<I.closeElClasses.length;ne++)if(e.hasClass(Ce,"pswp__"+I.closeElClasses[ne]))return!0},F,X,se=0,Y=function(){clearTimeout(X),se=0,_&&r.setIdle(!1)},j=function(Ce){Ce=Ce||window.event;var ne=Ce.relatedTarget||Ce.toElement;(!ne||ne.nodeName==="HTML")&&(clearTimeout(X),X=setTimeout(function(){r.setIdle(!0)},I.timeToIdleOutside))},fe=function(){I.fullscreenEl&&!e.features.isOldAndroid&&(o||(o=r.getFullscreenAPI()),o?(e.bind(document,o.eventK,r.updateFullscreen),r.updateFullscreen(),e.addClass(n.template,"pswp--supports-fs")):e.removeClass(n.template,"pswp--supports-fs"))},ve=function(){I.preloaderEl&&(ae(!0),E("beforeChange",function(){clearTimeout(S),S=setTimeout(function(){n.currItem&&n.currItem.loading?(!n.allowProgressiveImg()||n.currItem.img&&!n.currItem.img.naturalWidth)&&ae(!1):ae(!0)},I.loadingIndicatorDelay)}),E("imageLoadComplete",function(Ce,ne){n.currItem===ne&&ae(!0)}))},ae=function(Ce){T!==Ce&&(G(M,"preloader--active",!Ce),T=Ce)},J=function(Ce){var ne=Ce.vGap;if(q()){var me=I.barsSize;if(I.captionEl&&me.bottom==="auto")if(d||(d=e.createEl("pswp__caption pswp__caption--fake"),d.appendChild(e.createEl("pswp__caption__center")),l.insertBefore(d,c),e.addClass(l,"pswp__ui--fit")),I.addCaptionHTMLFn(Ce,d,!0)){var ue=d.clientHeight;ne.bottom=parseInt(ue,10)||44}else ne.bottom=me.top;else ne.bottom=me.bottom==="auto"?0:me.bottom;ne.top=me.top}else ne.top=ne.bottom=0},pe=function(){I.timeToIdle&&E("mouseUsed",function(){e.bind(document,"mousemove",Y),e.bind(document,"mouseout",j),F=setInterval(function(){se++,se===2&&r.setIdle(!0)},I.timeToIdle/2)})},Ee=function(){E("onVerticalDrag",function(ne){a&&ne<.95?r.hideControls():!a&&ne>=.95&&r.showControls()});var Ce;E("onPinchClose",function(ne){a&&ne<.9?(r.hideControls(),Ce=!0):Ce&&!a&&ne>.9&&r.showControls()}),E("zoomGestureEnded",function(){Ce=!1,Ce&&!a&&r.showControls()})},Le=[{name:"caption",option:"captionEl",onInit:function(Ce){c=Ce}},{name:"share-modal",option:"shareEl",onInit:function(Ce){g=Ce},onTap:function(){O()}},{name:"button--share",option:"shareEl",onInit:function(Ce){h=Ce},onTap:function(){O()}},{name:"button--zoom",option:"zoomEl",onTap:n.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(Ce){v=Ce}},{name:"button--close",option:"closeEl",onTap:n.close},{name:"button--arrow--left",option:"arrowEl",onTap:n.prev},{name:"button--arrow--right",option:"arrowEl",onTap:n.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){o.isFullscreen()?o.exit():o.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(Ce){M=Ce}}],Re=function(){var Ce,ne,me,ue=function(ze){if(!!ze)for(var We=ze.length,et=0;et<We;et++){Ce=ze[et],ne=Ce.className;for(var Ke=0;Ke<Le.length;Ke++)me=Le[Ke],ne.indexOf("pswp__"+me.name)>-1&&(I[me.option]?(e.removeClass(Ce,"pswp__element--disabled"),me.onInit&&me.onInit(Ce)):e.addClass(Ce,"pswp__element--disabled"))}};ue(l.children);var Te=e.getChildByClass(l,"pswp__top-bar");Te&&ue(Te.children)};r.init=function(){e.extend(n.options,P,!0),I=n.options,l=e.getChildByClass(n.scrollWrap,"pswp__ui"),E=n.listen,Ee(),E("beforeChange",r.update),E("doubleTap",function(Ce){var ne=n.currItem.initialZoomLevel;n.getZoomLevel()!==ne?n.zoomTo(ne,Ce,333):n.zoomTo(I.getDoubleTapZoom(!1,n.currItem),Ce,333)}),E("preventDragEvent",function(Ce,ne,me){var ue=Ce.target||Ce.srcElement;ue&&ue.getAttribute("class")&&Ce.type.indexOf("mouse")>-1&&(ue.getAttribute("class").indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(ue.tagName))&&(me.prevent=!1)}),E("bindEvents",function(){e.bind(l,"pswpTap click",$),e.bind(n.scrollWrap,"pswpTap",r.onGlobalTap),n.likelyTouchDevice||e.bind(n.scrollWrap,"mouseover",r.onMouseOver)}),E("unbindEvents",function(){w||O(),F&&clearInterval(F),e.unbind(document,"mouseout",j),e.unbind(document,"mousemove",Y),e.unbind(l,"pswpTap click",$),e.unbind(n.scrollWrap,"pswpTap",r.onGlobalTap),e.unbind(n.scrollWrap,"mouseover",r.onMouseOver),o&&(e.unbind(document,o.eventK,r.updateFullscreen),o.isFullscreen()&&(I.hideAnimationDuration=0,o.exit()),o=null)}),E("destroy",function(){I.captionEl&&(d&&l.removeChild(d),e.removeClass(c,"pswp__caption--empty")),g&&(g.children[0].onclick=null),e.removeClass(l,"pswp__ui--over-close"),e.addClass(l,"pswp__ui--hidden"),r.setIdle(!1)}),I.showAnimationDuration||e.removeClass(l,"pswp__ui--hidden"),E("initialZoomIn",function(){I.showAnimationDuration&&e.removeClass(l,"pswp__ui--hidden")}),E("initialZoomOut",function(){e.addClass(l,"pswp__ui--hidden")}),E("parseVerticalMargin",J),Re(),I.shareEl&&h&&g&&(w=!0),H(),pe(),fe(),ve()},r.setIdle=function(Ce){_=Ce,G(l,"ui--idle",Ce)},r.update=function(){a&&n.currItem?(r.updateIndexIndicator(),I.captionEl&&(I.addCaptionHTMLFn(n.currItem,c),G(c,"caption--empty",!n.currItem.title)),i=!0):i=!1,w||O(),H()},r.updateFullscreen=function(Ce){Ce&&setTimeout(function(){n.setScrollOffset(0,e.getScrollY())},50),e[(o.isFullscreen()?"add":"remove")+"Class"](n.template,"pswp--fs")},r.updateIndexIndicator=function(){I.counterEl&&(v.innerHTML=n.getCurrentIndex()+1+I.indexIndicatorSep+I.getNumItemsFn())},r.onGlobalTap=function(Ce){Ce=Ce||window.event;var ne=Ce.target||Ce.srcElement;if(!B){if(Ce.detail&&Ce.detail.pointerType==="mouse"){if(L(ne)){n.close();return}e.hasClass(ne,"pswp__img")&&(n.getZoomLevel()===1&&n.getZoomLevel()<=n.currItem.fitRatio?I.clickToCloseNonZoomable&&n.close():n.toggleDesktopZoom(Ce.detail.releasePoint))}else if(I.tapToToggleControls&&(a?r.hideControls():r.showControls()),I.tapToClose&&(e.hasClass(ne,"pswp__img")||L(ne))){n.close();return}}},r.onMouseOver=function(Ce){Ce=Ce||window.event;var ne=Ce.target||Ce.srcElement;G(l,"ui--over-close",L(ne))},r.hideControls=function(){e.addClass(l,"pswp__ui--hidden"),a=!1},r.showControls=function(){a=!0,i||r.update(),e.removeClass(l,"pswp__ui--hidden")},r.supportsFullscreen=function(){var Ce=document;return!!(Ce.exitFullscreen||Ce.mozCancelFullScreen||Ce.webkitExitFullscreen||Ce.msExitFullscreen)},r.getFullscreenAPI=function(){var Ce=document.documentElement,ne,me="fullscreenchange";return Ce.requestFullscreen?ne={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:me}:Ce.mozRequestFullScreen?ne={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+me}:Ce.webkitRequestFullscreen?ne={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+me}:Ce.msRequestFullscreen&&(ne={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),ne&&(ne.enter=function(){if(x=I.closeOnScroll,I.closeOnScroll=!1,this.enterK==="webkitRequestFullscreen")n.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT);else return n.template[this.enterK]()},ne.exit=function(){return I.closeOnScroll=x,document[this.exitK]()},ne.isFullscreen=function(){return document[this.elementK]}),ne}};return t})})(Zm);var Z_=Zm.exports;var Y_=function(){function b(u,t){Fe(this,b),this.pswp=void 0,this.editor=void 0,this.prevStatus="default",this.nextStatus="default",this.zoomInStatus="default",this.zoomOutStatus="default",this.originSizeStatus="default",this.bestSizeStatus="default",this.editor=u,this.pswp=t}return Be(b,[{key:"init",value:function(){var t=this;this.pswp.on("afterzoom",function(){t.afterZoom()}),this.pswp.on("afterchange",function(){t.afterChange()}),this.pswp.on("resize",function(){setTimeout(function(){t.afterChange(),t.afterZoom()},333)}),this.render()}},{key:"renderTemplate",value:function(){var t=this,n=V(`
        <div class="data-pswp-tool-bar">
            <div class="pswp-toolbar-content"></div>
        </div>
        `),e=n.find(".pswp-toolbar-content"),r=this.editor.language.get("image");return e.append(this.renderBtn("arrow-left",r.prev,this.prevStatus,function(){t.prevStatus!=="disable"&&t.pswp.prev()})),e.append('<span class="data-pswp-counter"></span>'),e.append(this.renderBtn("arrow-right",r.next,this.nextStatus,function(){t.nextStatus!=="disable"&&t.pswp.next()})),e.append('<span class="separation"></span>'),e.append(this.renderBtn("zoom-in",r.zoomIn,this.zoomInStatus,function(){t.zoomInStatus!=="disable"&&t.pswp.zoomIn()})),e.append(this.renderBtn("zoom-out",r.zoomOut,this.zoomOutStatus,function(){t.zoomOutStatus!=="disable"&&t.pswp.zoomOut()})),e.append(this.renderBtn("origin-size",r.originSize,this.originSizeStatus,function(){t.originSizeStatus!=="disable"&&t.pswp.zoomToOriginSize()})),e.append(this.renderBtn("best-size",r.bestSize,this.bestSizeStatus,function(){t.bestSizeStatus!=="disable"&&t.pswp.zoomToBestSize()})),n}},{key:"afterZoom",value:function(){var t=this.pswp.getCurrentZoomLevel(),n=this.pswp.getInitialZoomLevel(),e="default";t===n&&(e="activated"),n===1&&(e="disable"),this.zoomOutStatus=t===.05?"disable":"default",this.zoomInStatus=t===5?"disable":"default",this.originSizeStatus=t===1?"activated":"default",this.bestSizeStatus=e,this.render()}},{key:"afterChange",value:function(){var t=this.pswp.getCount();this.nextStatus=t===1?"disable":"default",this.prevStatus=t===1?"disable":"default",this.render()}},{key:"renderBtn",value:function(t,n,e,r){var i=V('<span class="data-pswp-'.concat(t," btn ").concat(e,'"></span>'));return i.on("mouseenter",function(){An.show(i,n)}),i.on("mouseleave",function(){An.hide()}),i.on("mousedown",function(a){a.stopPropagation(),An.hide()}),i.on("click",r),i}},{key:"render",value:function(){this.pswp.barUI.empty(),this.pswp.barUI.append(this.renderTemplate())}}]),b}();function Ym(b,u){u===void 0&&(u={});var t=u.insertAt;if(!(!b||typeof document=="undefined")){var n=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",t==="top"&&n.firstChild?n.insertBefore(e,n.firstChild):n.appendChild(e),e.styleSheet?e.styleSheet.cssText=b:e.appendChild(document.createTextNode(b))}}var K_=`.pswp .data-pswp-tool-bar {\r
    position: absolute;\r
    top: initial;\r
    margin: 0 auto;\r
    bottom: 20px;\r
    vertical-align: middle;\r
    height: 54px;\r
    width: 100%;\r
    text-align: center;\r
   \r
}\r
\r
.pswp .data-pswp-tool-bar .separation {\r
    width: 1px;\r
    margin: 0px 10px;\r
    display: inline-block;\r
    height: 20px;\r
    border: 0.5px solid #383838;\r
   \r
}\r
\r
.pswp .data-pswp-tool-bar .btn {\r
    color: #f8f9fa;\r
    display: inline-block;\r
    width: 32px;\r
    height: 32px;\r
    padding: 6px;\r
    margin: 0 6px;\r
    border: 1px solid #383838;\r
    border-radius: 2px;\r
   \r
}\r
\r
.pswp .data-pswp-tool-bar .btn::before {\r
    width: 20px;\r
    height: 20px;\r
    margin: 0 auto;\r
    content: ' ';\r
    display: inline-block;\r
    background-repeat: no-repeat;\r
    opacity: 0.65;\r
    background-position: -1px -1px;\r
   \r
}\r
\r
.pswp .data-pswp-tool-bar .data-pswp-arrow-left {\r
    padding: 8px;\r
   \r
}\r
\r
.pswp .data-pswp-tool-bar .data-pswp-arrow-right {\r
    padding: 8px;\r
   \r
}\r
\r
.pswp .data-pswp-tool-bar .data-pswp-arrow-left::before {\r
    width: 16px;\r
    height: 16px;\r
    background-size: 16px 16px;\r
    background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjIgKDc4MTgxKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT5sZWZ0LWNpcmNsZTwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxnIGlkPSJsZWZ0LWNpcmNsZSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9ImxlZnQiIGZpbGwtcnVsZT0ibm9uemVybyI+CiAgICAgICAgICAgIDxyZWN0IGlkPSLnn6nlvaIiIGZpbGw9IiMwMDAwMDAiIG9wYWNpdHk9IjAiIHg9IjAiIHk9IjAiIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PC9yZWN0PgogICAgICAgICAgICA8cGF0aCBkPSJNMTQuMTQwNjI1LDQuMjYzNjcxODggTDE0LjE0MDYyNSwyLjc1MzkwNjI1IEMxNC4xNDA2MjUsMi42MjMwNDY4OCAxMy45OTAyMzQ0LDIuNTUwNzgxMjUgMTMuODg4NjcxOSwyLjYzMDg1OTM3IEw1LjA4Mzk4NDM4LDkuNTA3ODEyNSBDNC43NjM2NzE4OCw5Ljc1NzgxMjUgNC43NjM2NzE4OCwxMC4yNDAyMzQ0IDUuMDgzOTg0MzgsMTAuNDkwMjM0NCBMMTMuODg4NjcxOSwxNy4zNjcxODc1IEMxMy45OTIxODc1LDE3LjQ0NzI2NTYgMTQuMTQwNjI1LDE3LjM3NSAxNC4xNDA2MjUsMTcuMjQ0MTQwNiBMMTQuMTQwNjI1LDE1LjczNDM3NSBDMTQuMTQwNjI1LDE1LjYzODY3MTkgMTQuMDk1NzAzMSwxNS41NDY4NzUgMTQuMDIxNDg0NCwxNS40ODgyODEzIEw2Ljk5MDIzNDM4LDEwIEwxNC4wMjE0ODQ0LDQuNTA5NzY1NjMgQzE0LjA5NTcwMzEsNC40NTExNzE4OCAxNC4xNDA2MjUsNC4zNTkzNzUgMTQuMTQwNjI1LDQuMjYzNjcxODggWiIgaWQ9Iui3r+W+hCIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+');\r
   \r
}\r
\r
.pswp .data-pswp-tool-bar .data-pswp-arrow-right::before {\r
    width: 16px;\r
    height: 16px;\r
    background-size: 16px 16px;\r
    background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjIgKDc4MTgxKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT5yaWdodC1jaXJjbGU8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZyBpZD0icmlnaHQtY2lyY2xlIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0icmlnaHQiIGZpbGwtcnVsZT0ibm9uemVybyI+CiAgICAgICAgICAgIDxyZWN0IGlkPSLnn6nlvaIiIGZpbGw9IiMwMDAwMDAiIG9wYWNpdHk9IjAiIHg9IjAiIHk9IjAiIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PC9yZWN0PgogICAgICAgICAgICA8cGF0aCBkPSJNMTQuOTU1MDc4MSw5LjUwNzgxMjUgTDYuMTUwMzkwNjIsMi42MzA4NTkzNyBDNi4wNDY4NzUsMi41NTA3ODEyNSA1Ljg5ODQzNzUsMi42MjMwNDY4NyA1Ljg5ODQzNzUsMi43NTM5MDYyNSBMNS44OTg0Mzc1LDQuMjYzNjcxODggQzUuODk4NDM3NSw0LjM1OTM3NSA1Ljk0MzM1OTM4LDQuNDUxMTcxODggNi4wMTc1NzgxMiw0LjUwOTc2NTYyIEwxMy4wNDg4MjgxLDEwIEw2LjAxNzU3ODEyLDE1LjQ5MDIzNDQgQzUuOTQxNDA2MjUsMTUuNTQ4ODI4MSA1Ljg5ODQzNzUsMTUuNjQwNjI1IDUuODk4NDM3NSwxNS43MzYzMjgxIEw1Ljg5ODQzNzUsMTcuMjQ2MDkzOCBDNS44OTg0Mzc1LDE3LjM3Njk1MzEgNi4wNDg4MjgxMiwxNy40NDkyMTg4IDYuMTUwMzkwNjIsMTcuMzY5MTQwNiBMMTQuOTU1MDc4MSwxMC40OTIxODc1IEMxNS4yNzUzOTA2LDEwLjI0MjE4NzUgMTUuMjc1MzkwNiw5Ljc1NzgxMjUgMTQuOTU1MDc4MSw5LjUwNzgxMjUgWiIgaWQ9Iui3r+W+hCIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+');\r
   \r
}\r
\r
.pswp .data-pswp-tool-bar .data-pswp-zoom-in::before {\r
    background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjEgKDc4MTM2KSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT56b29tIGluPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGcgaWQ9Inpvb20taW4iIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGZpbGwtcnVsZT0ibm9uemVybyI+CiAgICAgICAgICAgIDxyZWN0IGlkPSLnn6nlvaIiIGZpbGw9IiMwMDAwMDAiIG9wYWNpdHk9IjAiIHg9IjAiIHk9IjAiIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PC9yZWN0PgogICAgICAgICAgICA8cGF0aCBkPSJNMTIuNDQxNDA2Myw4LjY1MjM0Mzc1IEwxMC4xMzY3MTg4LDguNjUyMzQzNzUgTDEwLjEzNjcxODgsNi4wMzUxNTYyNSBDMTAuMTM2NzE4OCw1Ljk0OTIxODc1IDEwLjA2NjQwNjMsNS44Nzg5MDYyNSA5Ljk4MDQ2ODc1LDUuODc4OTA2MjUgTDguODA4NTkzNzUsNS44Nzg5MDYyNSBDOC43MjI2NTYyNSw1Ljg3ODkwNjI1IDguNjUyMzQzNzUsNS45NDkyMTg3NSA4LjY1MjM0Mzc1LDYuMDM1MTU2MjUgTDguNjUyMzQzNzUsOC42NTIzNDM3NSBMNi4zNDc2NTYyNSw4LjY1MjM0Mzc1IEM2LjI2MTcxODc1LDguNjUyMzQzNzUgNi4xOTE0MDYyNSw4LjcyMjY1NjI1IDYuMTkxNDA2MjUsOC44MDg1OTM3NSBMNi4xOTE0MDYyNSw5Ljk4MDQ2ODc1IEM2LjE5MTQwNjI1LDEwLjA2NjQwNjMgNi4yNjE3MTg3NSwxMC4xMzY3MTg4IDYuMzQ3NjU2MjUsMTAuMTM2NzE4OCBMOC42NTIzNDM3NSwxMC4xMzY3MTg4IEw4LjY1MjM0Mzc1LDEyLjc1MzkwNjMgQzguNjUyMzQzNzUsMTIuODM5ODQzNyA4LjcyMjY1NjI1LDEyLjkxMDE1NjMgOC44MDg1OTM3NSwxMi45MTAxNTYzIEw5Ljk4MDQ2ODc1LDEyLjkxMDE1NjMgQzEwLjA2NjQwNjMsMTIuOTEwMTU2MyAxMC4xMzY3MTg4LDEyLjgzOTg0MzcgMTAuMTM2NzE4OCwxMi43NTM5MDYzIEwxMC4xMzY3MTg4LDEwLjEzNjcxODggTDEyLjQ0MTQwNjMsMTAuMTM2NzE4OCBDMTIuNTI3MzQzNywxMC4xMzY3MTg4IDEyLjU5NzY1NjMsMTAuMDY2NDA2MyAxMi41OTc2NTYzLDkuOTgwNDY4NzUgTDEyLjU5NzY1NjMsOC44MDg1OTM3NSBDMTIuNTk3NjU2Myw4LjcyMjY1NjI1IDEyLjUyNzM0MzcsOC42NTIzNDM3NSAxMi40NDE0MDYzLDguNjUyMzQzNzUgWiBNMTcuOTg4MjgxMywxNi45MzM1OTM4IEwxNS4xMzY3MTg4LDE0LjA4MjAzMTMgQzE3LjUyMTQ4NDQsMTEuMTczODI4MSAxNy4zNTU0Njg4LDYuODY1MjM0MzggMTQuNjI4OTA2Myw0LjE0MDYyNSBDMTEuNzM4MjgxMywxLjI0ODA0Njg4IDcuMDQyOTY4NzUsMS4yNDgwNDY4OCA0LjE0MDYyNSw0LjE0MDYyNSBDMS4yNDgwNDY4OCw3LjA0Mjk2ODc1IDEuMjQ4MDQ2ODgsMTEuNzM4MjgxMyA0LjE0MDYyNSwxNC42Mjg5MDYzIEM2Ljg2NTIzNDM4LDE3LjM1NTQ2ODggMTEuMTczODI4MSwxNy41MjE0ODQ0IDE0LjA4MjAzMTMsMTUuMTM2NzE4OCBMMTYuOTMzNTkzOCwxNy45ODgyODEzIEMxNi45OTYwOTM4LDE4LjA0Mjk2ODggMTcuMDk1NzAzMSwxOC4wNDI5Njg4IDE3LjE0ODQzNzUsMTcuOTg4MjgxMyBMMTcuOTg4MjgxMywxNy4xNDg0Mzc1IEMxOC4wNDI5Njg4LDE3LjA5NTcwMzEgMTguMDQyOTY4OCwxNi45OTYwOTM4IDE3Ljk4ODI4MTMsMTYuOTMzNTkzOCBaIE0xMy41OTM3NSwxMy41OTM3NSBDMTEuMjczNDM3NSwxNS45MTIxMDk0IDcuNTE1NjI1LDE1LjkxMjEwOTQgNS4xOTUzMTI1LDEzLjU5Mzc1IEMyLjg3Njk1MzEzLDExLjI3MzQzNzUgMi44NzY5NTMxMyw3LjUxNTYyNSA1LjE5NTMxMjUsNS4xOTUzMTI1IEM3LjUxNTYyNSwyLjg3Njk1MzEzIDExLjI3MzQzNzUsMi44NzY5NTMxMyAxMy41OTM3NSw1LjE5NTMxMjUgQzE1LjkxMjEwOTQsNy41MTU2MjUgMTUuOTEyMTA5NCwxMS4yNzM0Mzc1IDEzLjU5Mzc1LDEzLjU5Mzc1IFoiIGlkPSLlvaLnirYiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==');\r
   \r
}\r
\r
.pswp .data-pswp-tool-bar .data-pswp-zoom-out::before {\r
    background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjEgKDc4MTM2KSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT56b29tIG91dDwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxnIGlkPSJ6b29tLW91dCIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgZmlsbC1ydWxlPSJub256ZXJvIj4KICAgICAgICAgICAgPHJlY3QgaWQ9IuefqeW9oiIgZmlsbD0iIzAwMDAwMCIgb3BhY2l0eT0iMCIgeD0iMCIgeT0iMCIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIj48L3JlY3Q+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi40NDE0MDYzLDguNjUyMzQzNzUgTDYuMzQ3NjU2MjUsOC42NTIzNDM3NSBDNi4yNjE3MTg3NSw4LjY1MjM0Mzc1IDYuMTkxNDA2MjUsOC43MjI2NTYyNSA2LjE5MTQwNjI1LDguODA4NTkzNzUgTDYuMTkxNDA2MjUsOS45ODA0Njg3NSBDNi4xOTE0MDYyNSwxMC4wNjY0MDYzIDYuMjYxNzE4NzUsMTAuMTM2NzE4OCA2LjM0NzY1NjI1LDEwLjEzNjcxODggTDEyLjQ0MTQwNjMsMTAuMTM2NzE4OCBDMTIuNTI3MzQzNywxMC4xMzY3MTg4IDEyLjU5NzY1NjMsMTAuMDY2NDA2MyAxMi41OTc2NTYzLDkuOTgwNDY4NzUgTDEyLjU5NzY1NjMsOC44MDg1OTM3NSBDMTIuNTk3NjU2Myw4LjcyMjY1NjI1IDEyLjUyNzM0MzcsOC42NTIzNDM3NSAxMi40NDE0MDYzLDguNjUyMzQzNzUgWiBNMTcuOTg4MjgxMywxNi45MzM1OTM4IEwxNS4xMzY3MTg4LDE0LjA4MjAzMTMgQzE3LjUyMTQ4NDQsMTEuMTczODI4MSAxNy4zNTU0Njg4LDYuODY1MjM0MzggMTQuNjI4OTA2Myw0LjE0MDYyNSBDMTEuNzM4MjgxMywxLjI0ODA0Njg4IDcuMDQyOTY4NzUsMS4yNDgwNDY4OCA0LjE0MDYyNSw0LjE0MDYyNSBDMS4yNDgwNDY4OCw3LjA0Mjk2ODc1IDEuMjQ4MDQ2ODgsMTEuNzM4MjgxMyA0LjE0MDYyNSwxNC42Mjg5MDYzIEM2Ljg2NTIzNDM4LDE3LjM1NTQ2ODggMTEuMTczODI4MSwxNy41MjE0ODQ0IDE0LjA4MjAzMTMsMTUuMTM2NzE4OCBMMTYuOTMzNTkzOCwxNy45ODgyODEzIEMxNi45OTYwOTM4LDE4LjA0Mjk2ODggMTcuMDk1NzAzMSwxOC4wNDI5Njg4IDE3LjE0ODQzNzUsMTcuOTg4MjgxMyBMMTcuOTg4MjgxMywxNy4xNDg0Mzc1IEMxOC4wNDI5Njg4LDE3LjA5NTcwMzEgMTguMDQyOTY4OCwxNi45OTYwOTM4IDE3Ljk4ODI4MTMsMTYuOTMzNTkzOCBaIE0xMy41OTM3NSwxMy41OTM3NSBDMTEuMjczNDM3NSwxNS45MTIxMDk0IDcuNTE1NjI1LDE1LjkxMjEwOTQgNS4xOTUzMTI1LDEzLjU5Mzc1IEMyLjg3Njk1MzEzLDExLjI3MzQzNzUgMi44NzY5NTMxMyw3LjUxNTYyNSA1LjE5NTMxMjUsNS4xOTUzMTI1IEM3LjUxNTYyNSwyLjg3Njk1MzEzIDExLjI3MzQzNzUsMi44NzY5NTMxMyAxMy41OTM3NSw1LjE5NTMxMjUgQzE1LjkxMjEwOTQsNy41MTU2MjUgMTUuOTEyMTA5NCwxMS4yNzM0Mzc1IDEzLjU5Mzc1LDEzLjU5Mzc1IFoiIGlkPSLlvaLnirYiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==');\r
   \r
}\r
\r
.pswp .data-pswp-tool-bar .data-pswp-origin-size::before {\r
    background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjEgKDc4MTM2KSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT5hY3R1YWwgc2l6ZTwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxnIGlkPSJhY3R1YWwtc2l6ZSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9Iue8lue7hC0yIj4KICAgICAgICAgICAgPGcgaWQ9Iue8lue7hCI+CiAgICAgICAgICAgICAgICA8cmVjdCBpZD0i55+p5b2iIiB4PSIwIiB5PSIwIiB3aWR0aD0iMjAiIGhlaWdodD0iMjAiPjwvcmVjdD4KICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8cGF0aCBkPSJNNS45Mzc1LDE1LjM5MDYyNSBMNC4xMTY3NzYzMiwxNS4zOTA2MjUgTDQuMTE2Nzc2MzIsNy40NDU3MDk3NSBMMS44NzUsNy40NDU3MDk3NSBMMS44NzUsNi40MjA3NTQ5NCBDMi42NjcxNzc2LDYuNDE3MjcwNjUgMy4zMDI5MzEwOCw2LjI2Mzg2MzM2IDMuNzc5NjI2MzcsNS45NTM5MDU1MyBDNC4yMzAwNDk4Miw1LjY2MTAzMDIxIDQuNTI4ODg0MSw1LjIwODg0ODQxIDQuNjc2MDQ5NzgsNC42MDkzNzUgTDUuOTM3NSw0LjYwOTM3NSBMNS45Mzc1LDE1LjM5MDYyNSBaIE05LjY4NzUsNy41MzkwNjI1IEwxMS40MDYyNSw3LjUzOTA2MjUgTDExLjQwNjI1LDkuNTcwMzEyNSBMOS42ODc1LDkuNTcwMzEyNSBMOS42ODc1LDcuNTM5MDYyNSBaIE05LjY4NzUsMTMuMzU5Mzc1IEwxMS40MDYyNSwxMy4zNTkzNzUgTDExLjQwNjI1LDE1LjM5MDYyNSBMOS42ODc1LDE1LjM5MDYyNSBMOS42ODc1LDEzLjM1OTM3NSBaIE0xNy41LDE1LjM5MDYyNSBMMTcuNSw0LjYwOTM3NSBMMTYuMjM4NTQ5OCw0LjYwOTM3NSBDMTYuMDkxMzg0MSw1LjIwODg0ODQxIDE1Ljc5MjU0OTgsNS42NjEwMzAyMSAxNS4zNDIxMjY0LDUuOTUzOTA1NTMgQzE0Ljg2NTQzMTEsNi4yNjM4NjMzNiAxNC4yMjk2Nzc2LDYuNDE3MjcwNjUgMTMuNDM3NSw2LjQyMDc1NDk0IEwxMy40Mzc1LDcuNDQ1NzA5NzUgTDE1LjY3OTI3NjMsNy40NDU3MDk3NSBMMTUuNjc5Mjc2MywxNS4zOTA2MjUgTDE3LjUsMTUuMzkwNjI1IFoiIGlkPSLlvaLnirbnu5PlkIgiIGZpbGw9IiNGRkZGRkYiIGZpbGwtcnVsZT0ibm9uemVybyI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+');\r
   \r
}\r
\r
.pswp .data-pswp-tool-bar .data-pswp-best-size::before {\r
    background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjIgKDc4MTgxKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT5maXQgc2NyZWVuPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGcgaWQ9ImZpdC1zY3JlZW4iIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJhcnJhd3NhbHQiIGZpbGwtcnVsZT0ibm9uemVybyI+CiAgICAgICAgICAgIDxyZWN0IGlkPSLnn6nlvaIiIGZpbGw9IiMwMDAwMDAiIG9wYWNpdHk9IjAiIHg9IjAiIHk9IjAiIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PC9yZWN0PgogICAgICAgICAgICA8cGF0aCBkPSJNMTYuNjk5MjE4OCwzLjEyNjk1MzEyIEwxMy4wMDM5MDYzLDMuNTg1OTM3NSBDMTIuODc1LDMuNjAxNTYyNSAxMi44MjIyNjU2LDMuNzU3ODEyNSAxMi45MTIxMDk0LDMuODQ5NjA5MzcgTDEzLjk4MDQ2ODgsNC45MTc5Njg3NSBMMTAuOTgyNDIxOSw3LjkxNjAxNTYyIEMxMC45MjE4NzUsNy45NzY1NjI1IDEwLjkyMTg3NSw4LjA3NjE3MTg3IDEwLjk4MjQyMTksOC4xMzY3MTg3NSBMMTEuODYzMjgxMyw5LjAxNzU3ODEyIEMxMS45MjM4MjgxLDkuMDc4MTI1IDEyLjAyMzQzNzUsOS4wNzgxMjUgMTIuMDgzOTg0NCw5LjAxNzU3ODEyIEwxNS4wODM5ODQ0LDYuMDE3NTc4MTIgTDE2LjE1MjM0MzgsNy4wODU5Mzc1IEMxNi4yNDQxNDA2LDcuMTc3NzM0MzcgMTYuNDAwMzkwNiw3LjEyMzA0Njg3IDE2LjQxNjAxNTYsNi45OTQxNDA2MiBMMTYuODczMDQ2OSwzLjMwMDc4MTI1IEMxNi44ODY3MTg4LDMuMTk5MjE4NzUgMTYuODAwNzgxMywzLjExMzI4MTI1IDE2LjY5OTIxODgsMy4xMjY5NTMxMiBaIE04LjEzNjcxODc1LDEwLjk4MjQyMTkgQzguMDc2MTcxODgsMTAuOTIxODc1IDcuOTc2NTYyNSwxMC45MjE4NzUgNy45MTYwMTU2MywxMC45ODI0MjE5IEw0LjkxNzk2ODc1LDEzLjk4MjQyMTkgTDMuODQ5NjA5MzgsMTIuOTE0MDYyNSBDMy43NTc4MTI1LDEyLjgyMjI2NTYgMy42MDE1NjI1LDEyLjg3Njk1MzEgMy41ODU5Mzc1LDEzLjAwNTg1OTQgTDMuMTI2OTUzMTMsMTYuNjk5MjE4OCBDMy4xMTUyMzQzOCwxNi44MDA3ODEyIDMuMTk5MjE4NzUsMTYuODg0NzY1NiAzLjMwMDc4MTI1LDE2Ljg3MzA0NjkgTDYuOTk2MDkzNzUsMTYuNDE0MDYyNSBDNy4xMjUsMTYuMzk4NDM3NSA3LjE3NzczNDM4LDE2LjI0MjE4NzUgNy4wODc4OTA2MywxNi4xNTAzOTA2IEw2LjAxOTUzMTI1LDE1LjA4MjAzMTIgTDkuMDE5NTMxMjUsMTIuMDgyMDMxMiBDOS4wODAwNzgxMywxMi4wMjE0ODQ0IDkuMDgwMDc4MTMsMTEuOTIxODc1IDkuMDE5NTMxMjUsMTEuODYxMzI4MSBMOC4xMzY3MTg3NSwxMC45ODI0MjE5IEw4LjEzNjcxODc1LDEwLjk4MjQyMTkgWiIgaWQ9IuW9oueKtiIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+');\r
   \r
}\r
\r
.pswp .data-pswp-tool-bar .btn:not(.disable):hover {\r
    cursor: pointer;\r
   \r
}\r
\r
.pswp .data-pswp-tool-bar .btn:not(.disable):hover::before {\r
    opacity: 1;\r
   \r
}\r
\r
.pswp .data-pswp-tool-bar .btn.disable {\r
    background: none;\r
   \r
}\r
\r
.pswp .data-pswp-tool-bar .btn.activated {\r
    background: #454545;\r
   \r
}\r
\r
.pswp .data-pswp-tool-bar .btn.activated::before {\r
    opacity: 1;\r
   \r
}\r
\r
.pswp .data-pswp-tool-bar .btn.disable::before {\r
    opacity: 0.25;\r
   \r
}\r
\r
.pswp .data-pswp-tool-bar .disable:hover {\r
    cursor: not-allowed;\r
   \r
}\r
\r
.pswp .data-pswp-tool-bar .pswp-toolbar-content {\r
    display: inline-block;\r
    width: auto;\r
    background: #252525;\r
    border-radius: 4px;\r
    padding: 12px;\r
   \r
}\r
\r
.pswp .data-pswp-tool-bar .pswp-toolbar-content .data-pswp-counter {\r
    -webkit-user-select: none;\r
    -moz-user-select: none;\r
    -ms-user-select: none;\r
    user-select: none;\r
    display: inline-block;\r
    font-size: 16px;\r
    vertical-align: top;\r
    line-height: 34px;\r
    color: #DEDEDE;\r
    margin: 0 2px;\r
   \r
}\r
\r
.pswp.data-pswp-mobile .data-pswp-tool-bar {\r
    display: none;\r
   \r
}\r
\r
.pswp__ui {\r
   -webkit-font-smoothing: auto;\r
   visibility: visible;\r
   opacity: 1;\r
   z-index: 1550;\r
}\r
\r
.pswp__button {\r
   width: 44px;\r
   height: 44px;\r
   position: relative;\r
   background: none;\r
   cursor: pointer;\r
   overflow: visible;\r
   display: block;\r
   border: 0;\r
   padding: 0;\r
   margin: 0;\r
   float: right;\r
   opacity: 0.75;\r
   -webkit-transition: opacity 0.2s;\r
   transition: opacity 0.2s;\r
   box-shadow: none;\r
}\r
\r
.pswp-fade-out {\r
   opacity: 0;\r
   -webkit-animation: fadeOut 0.333s;\r
           animation: fadeOut 0.333s;\r
}\r
\r
.pswp .data-pswp-button-close {\r
   margin: 32px;\r
   margin-right: 0px;\r
   width: 40px;\r
   height: 40px;\r
   z-index: 999999;\r
   position: relative;\r
   background: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNDBweCIgaGVpZ2h0PSI0MHB4IiB2aWV3Qm94PSIwIDAgNDAgNDAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjIgKDc4MTgxKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT5jbG9zZS1kZWZhdWx0PC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGcgaWQ9Iuafpeeci+WbvueJh+S8mOWMljQuMCIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9IueUu+advyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTQ4LjAwMDAwMCwgLTczNS4wMDAwMDApIj4KICAgICAgICAgICAgPGcgaWQ9ImNsb3NlLWRlZmF1bHQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQ4LjAwMDAwMCwgNzM1LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IuefqeW9oiIgZmlsbD0iIzFBMUExQSIgb3BhY2l0eT0iMC4zNSIgeD0iMCIgeT0iMCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiByeD0iNCI+PC9yZWN0PgogICAgICAgICAgICAgICAgPGcgaWQ9ImNsb3NlIiBvcGFjaXR5PSIwLjY1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg4LjAwMDAwMCwgOC4wMDAwMDApIj4KICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0i55+p5b2iIiBmaWxsPSIjMDAwMDAwIiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjAiIHg9IjAiIHk9IjAiIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMy4yMTQwNjI1LDEyIEwxOS4zNjY0MDYyLDQuNjY2NDA2MjUgQzE5LjQ2OTUzMTIsNC41NDQ1MzEyNSAxOS4zODI4MTI1LDQuMzU5Mzc1IDE5LjIyMzQzNzUsNC4zNTkzNzUgTDE3LjM1MzEyNSw0LjM1OTM3NSBDMTcuMjQyOTY4Nyw0LjM1OTM3NSAxNy4xMzc1LDQuNDA4NTkzNzUgMTcuMDY0ODQzNyw0LjQ5Mjk2ODc1IEwxMS45OTA2MjUsMTAuNTQyMTg3NSBMNi45MTY0MDYyNSw0LjQ5Mjk2ODc1IEM2Ljg0NjA5Mzc1LDQuNDA4NTkzNzUgNi43NDA2MjUsNC4zNTkzNzUgNi42MjgxMjUsNC4zNTkzNzUgTDQuNzU3ODEyNSw0LjM1OTM3NSBDNC41OTg0Mzc1LDQuMzU5Mzc1IDQuNTExNzE4NzUsNC41NDQ1MzEyNSA0LjYxNDg0Mzc1LDQuNjY2NDA2MjUgTDEwLjc2NzE4NzUsMTIgTDQuNjE0ODQzNzUsMTkuMzMzNTkzNyBDNC41MTE3MTg3NSwxOS40NTU0Njg4IDQuNTk4NDM3NSwxOS42NDA2MjUgNC43NTc4MTI1LDE5LjY0MDYyNSBMNi42MjgxMjUsMTkuNjQwNjI1IEM2LjczODI4MTI1LDE5LjY0MDYyNSA2Ljg0Mzc1LDE5LjU5MTQwNjIgNi45MTY0MDYyNSwxOS41MDcwMzEyIEwxMS45OTA2MjUsMTMuNDU3ODEyNSBMMTcuMDY0ODQzNywxOS41MDcwMzEyIEMxNy4xMzUxNTYyLDE5LjU5MTQwNjIgMTcuMjQwNjI1LDE5LjY0MDYyNSAxNy4zNTMxMjUsMTkuNjQwNjI1IEwxOS4yMjM0Mzc1LDE5LjY0MDYyNSBDMTkuMzgyODEyNSwxOS42NDA2MjUgMTkuNDY5NTMxMiwxOS40NTU0Njg4IDE5LjM2NjQwNjIsMTkuMzMzNTkzNyBMMTMuMjE0MDYyNSwxMiBaIiBpZD0i6Lev5b6EIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==');\r
}\r
\r
`;Ym(K_);var V_=function(b){ft(t,b);var u=ht(t);function t(n,e){var r;return Fe(this,t),r=u.call(this),r.editor=void 0,r.options=void 0,r.timeouts=[],r.pswpUI=void 0,r.zoom=void 0,r.isDestroy=!0,r.zoomUI=void 0,r.root=void 0,r.barUI=void 0,r.closeUI=void 0,r.reset=function(){r.root.removeClass(mt?"data-pswp-mobile":"data-pswp-pc"),r.root.addClass(mt?"data-pswp-mobile":"data-pswp-pc"),r.unbindKeyboardEvnet(),r.unbindControllerFadeInAndOut(),mt||(r.bindKeyboardEvnet(),r.bindControllerFadeInAndOut())},r.onBarMouseEnter=function(){r.removeFadeOut(r.barUI,"barFadeInAndOut"),r.removeFadeOut(r.closeUI,"closeFadeInAndOut")},r.onBarMouseLeave=function(){r.fadeOut(r.barUI,"barFadeInAndOut"),r.fadeOut(r.closeUI,"closeFadeInAndOut")},r.onCloseMouseEnter=function(){r.removeFadeOut(r.barUI,"barFadeInAndOut"),r.removeFadeOut(r.closeUI,"closeFadeInAndOut")},r.onCloseMouseLeave=function(){r.fadeOut(r.barUI,"barFadeInAndOut"),r.fadeOut(r.closeUI,"closeFadeInAndOut")},r.onKeyboardEvent=function(i){(i.metaKey||i.ctrlKey)&&i.keyCode===187&&(i.preventDefault(),r.zoomIn()),yt("mod+-",i)&&(i.preventDefault(),r.zoomOut())},r.close=function(){var i;(i=r.pswpUI)===null||i===void 0||i.close()},r.editor=n,r.options=Ie({shareEl:!1,fullscreenEl:!1,zoomEl:!1,history:!1,closeOnScroll:!1,preloaderEl:!1,captionEl:!1,counterEl:!1,clickToCloseNonZoomable:!1,showAnimationDuration:0,hideAnimationDuration:0,closeOnVerticalDrag:mt,tapToClose:!0,bgOpacity:.8,barsSize:{top:44,bottom:80}},e),r.isDestroy=!0,r.root=r.renderTemplate(),r.barUI=r.root.find(".data-pswp-custom-top-bar"),r.closeUI=r.root.find(".data-pswp-button-close"),V(document.body).append(r.root),r.zoomUI=new Y_(r.editor,Ye(r)),r.zoomUI.render(),r.reset(),r.bindClickEvent(),window.addEventListener("resize",r.reset),r}return Be(t,[{key:"renderTemplate",value:function(){var e=V(`
        <div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="pswp__bg"></div>
            <div class="pswp__scroll-wrap">
                <div class="pswp__container">
                    <div class="pswp__item"></div>
                    <div class="pswp__item"></div>
                    <div class="pswp__item"></div>
                </div>
                <div class="pswp__ui pswp__ui--hidden">
                    <button class="pswp__button data-pswp-button-close" title="Close (Esc)"></button>
                    <div class="data-pswp-custom-top-bar"></div>
                </div>
            </div>
        </div>`);return e}},{key:"bindControllerFadeInAndOut",value:function(){this.barUI.on("mouseenter",this.onBarMouseEnter),this.barUI.on("mouseleave",this.onBarMouseLeave),this.closeUI.on("mouseenter",this.onCloseMouseEnter),this.closeUI.on("mouseleave",this.onCloseMouseLeave)}},{key:"unbindControllerFadeInAndOut",value:function(){this.barUI.off("mouseenter",this.onBarMouseEnter),this.barUI.off("mouseleave",this.onBarMouseLeave),this.closeUI.off("mouseenter",this.onCloseMouseEnter),this.closeUI.off("mouseleave",this.onCloseMouseLeave)}},{key:"removeFadeOut",value:function(e,r){this.timeouts[r]&&clearTimeout(this.timeouts[r]),e.removeClass("pswp-fade-out")}},{key:"fadeOut",value:function(e,r){this.timeouts[r]&&clearTimeout(this.timeouts[r]),this.timeouts[r]=setTimeout(function(){e.addClass("pswp-fade-out")},3e3)}},{key:"bindClickEvent",value:function(){var e=this,r=function(a){var o=window.TouchEvent&&a instanceof TouchEvent?V(a.touches[0].target):V(a.target||[]);o.hasClass("pswp__img")&&setTimeout(function(){e.zoom=void 0,e.afterZoom()},366),(o.hasClass("pswp__bg")||o.hasClass("data-pswp-tool-bar"))&&e.close()};this.root.on("click",r),this.closeUI.on("click",this.close)}},{key:"prev",value:function(){var e;(e=this.pswpUI)===null||e===void 0||e.prev()}},{key:"next",value:function(){var e;(e=this.pswpUI)===null||e===void 0||e.next()}},{key:"renderCounter",value:function(){var e,r;this.barUI.find(".data-pswp-counter").html("".concat((((e=this.pswpUI)===null||e===void 0?void 0:e.getCurrentIndex())||0)+1," / ").concat(((r=this.pswpUI)===null||r===void 0?void 0:r.items.length)||""))}},{key:"getCurrentZoomLevel",value:function(){return this.zoom&&+this.zoom.toFixed(2)||this.pswpUI&&+this.pswpUI.getZoomLevel().toFixed(2)||0}},{key:"zoomTo",value:function(e){!this.pswpUI||(this.pswpUI.zoomTo(e,{x:this.pswpUI.viewportSize.x/2,y:this.pswpUI.viewportSize.y/2},100),this.zoom=e,this.afterZoom())}},{key:"zoomIn",value:function(){var e=this.getCurrentZoomLevel(),r=(e||0)+.2;e!==5&&(r>5&&(r=5),this.zoomTo(r))}},{key:"zoomOut",value:function(){var e=this.getCurrentZoomLevel();if(e!==.05&&e!==void 0){var r=e-.2;.05>r&&(r=.05),this.zoomTo(r)}}},{key:"bindKeyboardEvnet",value:function(){this.root.on("keydown",this.onKeyboardEvent)}},{key:"unbindKeyboardEvnet",value:function(){this.root.off("keydown",this.onKeyboardEvent)}},{key:"zoomToOriginSize",value:function(){this.zoomTo(1)}},{key:"zoomToBestSize",value:function(){var e=this.getInitialZoomLevel();!e||this.zoomTo(e)}},{key:"updateCursor",value:function(){var e=this.root,r=this.getCurrentZoomLevel(),i=this.getInitialZoomLevel();r===1?e.addClass("pswp--zoomed-in"):i===i&&e.removeClass("pswp--zoomed-in")}},{key:"getInitialZoomLevel",value:function(){var e;return this.pswpUI?+(((e=this.pswpUI.currItem.initialZoomLevel)===null||e===void 0?void 0:e.toFixed(2))||0):0}},{key:"afterZoom",value:function(){this.updateCursor(),this.emit("afterzoom")}},{key:"getCount",value:function(){var e;return((e=this.pswpUI)===null||e===void 0?void 0:e.items.length)||0}},{key:"afterChange",value:function(){var e=this;if(!mt){var r=this.getInitialZoomLevel();this.renderCounter(),this.zoom=r,setTimeout(function(){e.afterZoom()},100),this.emit("afterchange"),this.zoom=this.getInitialZoomLevel()}this.setWhiteBackground()}},{key:"bindPswpEvent",value:function(){var e,r=this,i,a,o;(e=this.pswpUI)===null||e===void 0||e.listen("afterChange",function(){r.afterChange()}),(i=this.pswpUI)===null||i===void 0||i.listen("destroy",function(){r.isDestroy=!0}),(a=this.pswpUI)===null||a===void 0||a.listen("resize",function(){r.emit("resize")}),(o=this.pswpUI)===null||o===void 0||o.listen("imageLoadComplete",function(){r.setWhiteBackground()})}},{key:"setWhiteBackground",value:function(){this.root.find(".pswp__img").each(function(e){var r=e;r.complete?(r.style.background="white",r.style["box-shadow"]="0 0 10px rgba(0, 0, 0, 0.5)"):r.onload=function(){r.style.background="white",r.style["box-shadow"]="0 0 10px rgba(0, 0, 0, 0.5)"}})}},{key:"open",value:function(e,r){if(this.isDestroy===!0){var i=this.root,a=new G_(this.root.get(),Z_,e,Ie({index:r},this.options));a.items=e,a.init(),this.pswpUI=a,this.isDestroy=!1,mt||(this.barUI.removeClass("pswp-fade-out"),this.fadeOut(this.barUI,"barFadeInAndOut"),this.closeUI.removeClass("pswp-fade-out"),this.fadeOut(this.closeUI,"closeFadeInAndOut")),i.removeClass("pswp-fade-in"),i.addClass("pswp-fade-in"),this.afterChange(),this.bindPswpEvent()}}},{key:"destroy",value:function(){window.removeEventListener("resize",this.reset),this.close()}}]),t}(rs.exports.EventEmitter2),Q_=`.am-engine [data-card-key="image"].card-selected [data-card-element="center"].data-card-border-selected {\r
    outline: none;\r
}\r
\r
.am-engine [data-card-key="image"].card-selected [data-card-element="center"].data-card-border-selected .data-image-disable-resize {\r
    outline: 2px solid #1890FF;\r
}\r
\r
.data-image {\r
    position: relative;\r
    display: inline-block;\r
    font-size: 14px;\r
    text-align: left;\r
    border-radius: 3px 3px;\r
    line-height: 24px;\r
    text-indent: 0;\r
    -webkit-user-select: none;\r
    -moz-user-select: none;\r
        -ms-user-select: none;\r
            user-select: none;\r
}\r
\r
.data-image-blcok {\r
    display: flex;\r
    margin: 0 auto;\r
    width: -webkit-max-content;\r
    width: -moz-max-content;\r
    width: max-content;\r
}\r
\r
.data-image-blcok.data-image-disable-resize {\r
    width: 100%;\r
    display: block;\r
}\r
\r
.data-image-detail {\r
  display: inline-block;\r
}\r
\r
.data-image-blcok .data-image-detail {\r
    display: block;\r
}\r
\r
.data-image-meta {\r
    position: relative;\r
    color: #595959;\r
    line-height: 0;\r
}\r
\r
.data-image-progress {\r
    padding-left: 8px;\r
    color: rgba(255, 255, 255, 0.9);\r
}\r
\r
.data-image-progress .data-anticon {\r
    color: rgba(255, 255, 255, 0.9);\r
    line-height: 24px;\r
    margin-right: 10px;\r
}\r
\r
.data-image-maximize {\r
    position: absolute;\r
    z-index: 2;\r
    right: 10px;\r
    top: 10px;\r
    background-color: rgba(0, 0, 0, 0.65);\r
    width: 20px;\r
    height: 20px;\r
    text-align: center;\r
    font-size: 16px;\r
    color: #fff;\r
    line-height: 20px;\r
    border-radius: 4px;\r
    box-shadow: 0px 2px 8px 0px rgba(0, 0, 0, 0.08);\r
    cursor: pointer;\r
}\r
\r
.data-image-maximize .data-icon-maximize {\r
    margin-left: 1px;\r
}\r
\r
.data-image-loading , .data-image-loaded {\r
    display: inline-block;\r
    border-radius: 0 0;\r
    padding: 0 0;\r
    background: transparent;\r
    border-color: transparent;\r
}\r
\r
.data-image-blcok .data-image-loading, .data-image-blcok .data-image-loaded {\r
    display: block;\r
}\r
\r
.data-image-loading .data-image-meta, .data-image-loaded .data-image-meta {\r
    display: inline-block;\r
}\r
\r
.data-image-blcok .data-image-loading .data-image-meta, .data-image-blcok .data-image-loaded .data-image-meta {\r
    display: block;\r
}\r
\r
.data-image-loading .data-image-meta img,.data-image-loaded .data-image-meta img {\r
    border-radius: 2px 2px;\r
    display: inline-block;\r
    width: 100%;\r
    opacity: 0.6;\r
    text-align: left;\r
    cursor: pointer;\r
    transition: opacity 0.3s ease-in-out, box-shadow 0.3s ease-in-out;\r
}\r
\r
.data-image-blcok .data-image-loading .data-image-meta img, .data-image-blcok .data-image-loaded .data-image-meta img {\r
    display: block;\r
}\r
\r
.data-image-loading .data-image-meta img , .data-image-blcok .data-image-loading .data-image-meta img {\r
    display: none;\r
}\r
\r
.data-image-loading  .data-image-meta .data-image-progress,.data-image-loaded .data-image-meta .data-image-progress {\r
    font-family: 'Lucida Console', Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;\r
    position: absolute;\r
    bottom: 8px;\r
    right: 8px;\r
    font-size: 12px;\r
    line-height: 24px;\r
    color: rgba(255, 255, 255, 0.9);\r
    padding: 0px 6px;\r
    border-radius: 2px 2px;\r
    background: rgba(0, 0, 0, 0.8);\r
    white-space: nowrap;\r
}\r
\r
.data-image-loaded .data-image-meta img {\r
    opacity: 1;\r
}\r
\r
.data-image-error {\r
    padding: 2px 4px;\r
    background: #f5f5f5;\r
    display: flex;\r
    border-radius: 4px;\r
    max-width: 200px;\r
    overflow: hidden;\r
    text-overflow: ellipsis;\r
    white-space: nowrap;\r
    font-size: 12px;\r
    align-items: center;\r
    -webkit-user-select: none;\r
       -moz-user-select: none;\r
        -ms-user-select: none;\r
            user-select: none;\r
}\r
\r
.data-image-error .data-icon {\r
    font-size: 12px;\r
}\r
\r
.data-image-error .data-icon-error {\r
    color: red;\r
    margin-right: 8px;\r
}\r
\r
.data-image-error .data-icon-copy {\r
    margin-left: 8px;\r
    cursor: pointer;\r
}\r
\r
.am-engine [data-card-key="image"].card-selected [data-card-element=center].data-card-background-selected {\r
    border-radius: 4px;\r
}\r
\r
.data-image-bg {\r
    display: none;\r
    border-radius: 2px;\r
    opacity: 0.6;\r
    background-size:100% 100%;\r
    background-color: #FAFAFA;\r
    background-repeat: no-repeat;\r
    background-position: center;\r
    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjhweCIgaGVpZ2h0PSIyMnB4IiB2aWV3Qm94PSIwIDAgMjggMjIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjIgKDc4MTgxKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT5pbWFnZS1maWxs5aSH5Lu9PC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGcgaWQ9Iuafpeeci+WbvueJh+S8mOWMljQuMCIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9IuWKoOi9veWbvueJhyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTU3Mi4wMDAwMDAsIC01MDYuMDAwMDAwKSI+CiAgICAgICAgICAgIDxnIGlkPSJpbWFnZS1maWxs5aSH5Lu9IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1NzAuMDAwMDAwLCA1MDEuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlIiBmaWxsPSIjMDAwMDAwIiBvcGFjaXR5PSIwIiB4PSIwIiB5PSIwIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiPjwvcmVjdD4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0yOSw1IEwzLDUgQzIuNDQ2ODc1LDUgMiw1LjQ0Njg3NSAyLDYgTDIsMjYgQzIsMjYuNTUzMTI1IDIuNDQ2ODc1LDI3IDMsMjcgTDI5LDI3IEMyOS41NTMxMjUsMjcgMzAsMjYuNTUzMTI1IDMwLDI2IEwzMCw2IEMzMCw1LjQ0Njg3NSAyOS41NTMxMjUsNSAyOSw1IFogTTEwLjU2MjUsOS41IEMxMS42NjU2MjUsOS41IDEyLjU2MjUsMTAuMzk2ODc1IDEyLjU2MjUsMTEuNSBDMTIuNTYyNSwxMi42MDMxMjUgMTEuNjY1NjI1LDEzLjUgMTAuNTYyNSwxMy41IEM5LjQ1OTM3NSwxMy41IDguNTYyNSwxMi42MDMxMjUgOC41NjI1LDExLjUgQzguNTYyNSwxMC4zOTY4NzUgOS40NTkzNzUsOS41IDEwLjU2MjUsOS41IFogTTI2LjYyMTg3NSwyMy4xNTkzNzUgQzI2LjU3ODEyNSwyMy4xOTY4NzUgMjYuNTE4NzUsMjMuMjE4NzUgMjYuNDU5Mzc1LDIzLjIxODc1IEw1LjUzNzUsMjMuMjE4NzUgQzUuNCwyMy4yMTg3NSA1LjI4NzUsMjMuMTA2MjUgNS4yODc1LDIyLjk2ODc1IEM1LjI4NzUsMjIuOTA5Mzc1IDUuMzA5Mzc1LDIyLjg1MzEyNSA1LjM0Njg3NSwyMi44MDYyNSBMMTAuNjY4NzUsMTYuNDkzNzUgQzEwLjc1NjI1LDE2LjM4NzUgMTAuOTE1NjI1LDE2LjM3NSAxMS4wMjE4NzUsMTYuNDYyNSBDMTEuMDMxMjUsMTYuNDcxODc1IDExLjA0Mzc1LDE2LjQ4MTI1IDExLjA1MzEyNSwxNi40OTM3NSBMMTQuMTU5Mzc1LDIwLjE4MTI1IEwxOS4xLDE0LjMyMTg3NSBDMTkuMTg3NSwxNC4yMTU2MjUgMTkuMzQ2ODc1LDE0LjIwMzEyNSAxOS40NTMxMjUsMTQuMjkwNjI1IEMxOS40NjI1LDE0LjMgMTkuNDc1LDE0LjMwOTM3NSAxOS40ODQzNzUsMTQuMzIxODc1IEwyNi42NTkzNzUsMjIuODA5Mzc1IEMyNi43NDA2MjUsMjIuOTEyNSAyNi43MjgxMjUsMjMuMDcxODc1IDI2LjYyMTg3NSwyMy4xNTkzNzUgWiIgaWQ9IlNoYXBlIiBmaWxsPSIjRThFOEU4Ij48L3BhdGg+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==);\r
}\r
\r
.data-image-loading .data-image-bg {\r
    display: inline-block;\r
}\r
\r
.data-image-blcok .data-image-loading .data-image-bg {\r
    display: block;\r
}\r
\r
.data-image-loading .data-image-maximize {\r
    display: none;\r
}`;Ym(Q_);var Jg=window.devicePixelRatio,em=void 0,X_=function(){function b(u,t){var n=this;Fe(this,b),this.editor=void 0,this.options=void 0,this.root=void 0,this.progress=void 0,this.image=void 0,this.detail=void 0,this.meta=void 0,this.maximize=void 0,this.bg=void 0,this.resizer=void 0,this.pswp=void 0,this.src=void 0,this.status=void 0,this.size=void 0,this.maxWidth=void 0,this.maxHeight=void 0,this.rate=1,this.isLoad=!1,this.message=void 0,this.onWindowResize=function(){if(!!ge(n.editor)){n.maxWidth=n.getMaxWidth(),n.resetSize();var e=n.image.get();if(!!e){var r=e.clientWidth,i=e.clientHeight;n.resizer&&(n.resizer.maxWidth=n.maxWidth,n.resizer.setSize(r,i))}}},this.getSrc=function(){var e=n.options.onBeforeRender;return e&&n.status!=="error"?e(n.status,n.src):n.src},this.openZoom=function(e){e.preventDefault(),e.stopPropagation();var r=[],i=n.editor.card.closest(n.root),a=0;n.editor.container.find('[data-card-key="image"]').toArray().filter(function(o){return o.find("img").length>0}).forEach(function(o,l){var c=n.editor.card.find(o),d=c==null?void 0:c.getValue();if(!(!c||!d)){var v=c.getCenter().find("img"),h=parseInt(v.css("width")),g=parseInt(v.css("height")),w=d.size,x=w?w.naturalWidth||n.size.naturalWidth:h*Jg,_=w?w.naturalHeight||n.size.naturalHeight:g*Jg,E=d.src,M=n.options.onBeforeRender;M&&(E=M("done",E));var T=v.attributes("src");r.push({src:E,msrc:T,w:x,h:_}),i!=null&&i.equal(o)&&(a=l)}}),n.pswp.open(r,a)},this.focus=function(){!ge(n.editor)||(n.root.addClass("data-image-active"),n.status==="done"&&(n.destroyEditor(),n.renderEditor()))},this.blur=function(){!ge(n.editor)||(n.root.removeClass("data-image-active"),n.status==="done"&&n.destroyEditor())},this.editor=u,this.options=t,this.src=this.options.src,this.size=this.options.size||{width:0,height:0,naturalHeight:0,naturalWidth:0},this.maxHeight=this.options.maxHeight,this.status=this.options.status,this.root=V(this.renderTemplate()),this.progress=this.root.find(".data-image-progress"),this.image=this.root.find("img"),this.detail=this.root.find(".data-image-detail"),this.meta=this.root.find(".data-image-meta"),this.maximize=this.root.find(".data-image-maximize"),this.bg=this.root.find(".data-image-bg"),this.maxWidth=this.getMaxWidth(),this.pswp=em||new V_(this.editor),this.message=this.options.message,em=this.pswp}return Be(b,[{key:"renderTemplate",value:function(t){var n=this.options,e=n.link,r=n.percent,i=n.className,a=n.onBeforeRender;if(this.status==="error")return'<span class="data-image-error" style="max-width:'.concat(this.maxWidth,'px"><span class="data-icon data-icon-error"></span>').concat(t||this.options.message,'<span class="data-icon data-icon-copy"></span></span>');var o=a?a(this.status,this.options.src):this.options.src,l=`<span class="data-image-progress">
                            <i class="data-anticon">
                                <svg viewBox="0 0 1024 1024" class="data-anticon-spin" data-icon="loading" width="1em" height="1em" fill="currentColor" aria-hidden="true">
                                    <path d="M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 0 0-94.3-139.9 437.71 437.71 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"></path>
                                </svg>
                            </i>
                            <span class="percent">`.concat(r||0,`%</span>
                        </span>`),c=Sr(this.options.alt||""),d=c?' alt="'.concat(c,'" title="').concat(c,'" '):"",v='<img src="'.concat(_l(o),'" class="').concat(i||"",' data-drag-image" ').concat(d,"/>");if(e&&!ge(this.editor)){var h=e.target||"_blank";v='<a href="'.concat(_l(e.href),'" target="').concat(h,'">').concat(v,"</a>")}var g='<span class="data-image-maximize" style="display: none;"><span class="data-icon data-icon-maximize"></span></span>';return`
        <span class="data-image">
            <span class="data-image-content data-image-loading">
                <span class="data-image-detail">
                    <span class="data-image-meta">
                        `.concat(v,`
                        `).concat(l,`
						<span class="data-image-bg"></span>
                        `).concat(g,`
                    </span>
                </span>
            </span>
        </span>`)}},{key:"bindErrorEvent",value:function(t){var n=this,e=t.find(".data-icon-copy");e.on("mouseenter",function(){An.show(e,n.editor.language.get("image","errorMessageCopy").toString())}),e.on("mouseleave",function(){An.hide()}),e.on("click",function(r){r.stopPropagation(),r.preventDefault(),An.hide(),n.editor.clipboard.copy(n.options.message||"Error message"),n.editor.messageSuccess(n.editor.language.get("copy","success").toString())})}},{key:"setProgressPercent",value:function(t){this.progress.find(".percent").html("".concat(t,"%"))}},{key:"imageLoadCallback",value:function(){var t=this.editor.card.closest(this.root);if(!(!t||this.status==="uploading")){if(this.status==="done"){var n=this.root.find(".data-image-content");n.addClass("data-image-loaded"),n.removeClass("data-image-loading")}var e=this.image.get();if(!!e){var r=e.naturalWidth,i=e.naturalHeight;this.rate=i/r,this.size.naturalWidth=r,this.size.naturalHeight=i,this.size.width||(this.size.width=r),this.size.height||(this.size.height=i),this.resetSize(),this.image.css("visibility","visible"),this.detail.css("height",""),this.detail.css("width","");var a=this.options.onChange;ge(this.editor)&&a&&a(this.size,!0),window.removeEventListener("resize",this.onWindowResize),window.addEventListener("resize",this.onWindowResize),this.editor.off("editor:resize",this.onWindowResize),this.editor.on("editor:resize",this.onWindowResize),this.resizer&&this.resizer.setSize(e.clientWidth,e.clientHeight),this.isLoad=!0}}}},{key:"imageLoadError",value:function(){if(this.status!=="uploading"){this.status="error";var t=this.options.container;t.empty(),t.append(this.renderTemplate(this.editor.language.get("image","loadError").toString())),this.detail.css("width",""),this.detail.css("height",""),this.bindErrorEvent(t);var n=this.options.onError;n&&n(),this.isLoad=!0}}},{key:"getMaxWidth",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.root,n=this.editor.block.closest(t).get();return n?n.clientWidth-6:0}},{key:"resetSize",value:function(){this.meta.css({"background-color":"",width:""}),this.image.css({width:""});var t=this.image.get();if(!!t){var n=this.size,e=n.width,r=n.height;if(!r)r=Math.round(this.rate*e);else if(!e)e=Math.round(r/this.rate);else if(e&&r)r=Math.round(this.rate*e),this.size.height=r;else{var i=t.clientWidth,a=t.clientHeight;e=i,r=a;var o=this.size,l=o.naturalWidth,c=o.naturalHeight;this.isSvg()&&l&&c&&(e=l,r=c)}e>this.maxWidth&&(e=this.maxWidth,r=Math.round(e*this.rate)),this.options.enableResizer===!1?this.image.css("width",""):this.image.css("width","".concat(e,"px"))}}},{key:"changeSize",value:function(t,n){t<24&&(t=24,n=t*this.rate),t>this.maxWidth&&(t=this.maxWidth,n=t*this.rate),n<24&&(n=24,t=n/this.rate),t=Math.round(t),n=Math.round(n),this.size.width=t,this.size.height=n,this.image.css({width:"".concat(t,"px")});var e=this.options.onChange;e&&e(this.size),this.destroyEditor(),this.renderEditor()}},{key:"changeUrl",value:function(t){this.src!==t&&(this.src=t,this.isLoad=!1,this.image.attributes("src",this.getSrc()))}},{key:"isSvg",value:function(){return this.src.split("?")[0].endsWith(".svg")||this.src.startsWith("data:image/svg+xml")}},{key:"closeZoom",value:function(){var t;(t=this.pswp)===null||t===void 0||t.close()}},{key:"renderEditor",value:function(){var t=this,n=this.image.get();if(!!n){var e=n.clientWidth,r=n.clientHeight;if(!(!e||!r)&&(this.maxWidth=this.getMaxWidth(),this.rate=r/e,!(mt||!ge(this.editor)||this.editor.readonly)&&this.options.enableResizer!==!1)){var i=new Om({imgUrl:this.getSrc(),width:e,height:r,rate:this.rate,maxWidth:this.maxWidth,onChange:function(l){var c=l.width,d=l.height;return t.changeSize(c,d)}}),a=i.render();this.root.find(".data-image-detail").append(a),this.resizer=i,this.resizer.on("dblclick",this.openZoom)}}}},{key:"destroyEditor",value:function(){var t,n;(t=this.resizer)===null||t===void 0||t.off("dblclick",this.openZoom),(n=this.resizer)===null||n===void 0||n.destroy()}},{key:"destroy",value:function(){window.removeEventListener("resize",this.onWindowResize),this.editor.off("editor:resize",this.onWindowResize),this.destroyEditor(),this.image.off("click",this.openZoom),this.image.off("dblclick",this.openZoom),this.maximize.off("click",this.openZoom)}},{key:"render",value:function(t){var n=this,e=this.options,r=e.container,i=e.display,a=e.enableResizer;if(i===un.BLOCK&&this.root.addClass("data-image-blcok"),a===!1&&this.root.addClass("data-image-disable-resize"),this.status==="error"&&ge(this.editor)){this.root=V(this.renderTemplate(this.message||this.editor.language.get("image","uploadError"))),this.bindErrorEvent(this.root),r.empty().append(this.root),this.progress.remove();return}if(this.status==="uploading"?(this.progress.show(),r.empty().append(this.root)):this.progress.remove(),this.status==="done"&&this.isLoad){var o=this.root.find(".data-image-content");o.addClass("data-image-loaded"),o.removeClass("data-image-loading")}this.status==="done"&&!this.isLoad&&(this.root.inEditor()||r.empty().append(this.root)),this.maxWidth=this.getMaxWidth();var l=this.size,c=l.width,d=l.height;if(c&&d||!this.src){if(c>this.maxWidth?(c=this.maxWidth,d=Math.round(c*d/this.size.width)):!this.src&&!c&&!d&&(c=this.maxWidth,d=this.maxWidth/2),this.src){this.options.enableResizer===!1?this.image.css({width:"100%"}):this.image.css({width:c+"px"});var v=this.options.onChange;c>0&&d>0&&(this.size=Ie(Ie({},this.size),{},{width:c,height:d}),v&&v(this.size))}this.options.enableResizer===!1?this.bg.css({width:"100%"}):this.bg.css({width:c+"px",height:d+"px"}),t&&this.bg.css("background-image","url(".concat(t,")"))}if(this.image.on("load",function(){return n.imageLoadCallback()}),this.image.on("error",function(){return n.imageLoadError()}),ge(this.editor)||!this.root.inEditor()){if(mt||(this.root.on("mouseenter",function(){n.maximize.show()}),this.root.on("mouseleave",function(){n.maximize.hide()})),!ge(this.editor)||this.editor.readonly){var h=this.image.closest("a");h.length===0&&this.image.on("click",this.openZoom)}this.image.on("dblclick",this.openZoom),this.maximize.on("click",this.openZoom)}}}]),b}(),Gh=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.image=void 0,n.widthInput=void 0,n.heightInput=void 0,n.isLocalError=void 0,n}return Be(t,[{key:"setProgressPercent",value:function(e){var r;(r=this.image)===null||r===void 0||r.setProgressPercent(e),this.setValue({percent:e})}},{key:"setSize",value:function(e,r){r||this.setValue({size:e}),this.widthInput&&(this.widthInput.get().value=e.width.toString()),this.heightInput&&(this.heightInput.get().value=e.height.toString())}},{key:"onInputChange",value:function(e,r){var i,a=this.getValue();if(typeof e=="string"){if(!/^[1-9]+(\d+)?$/.test(e)&&this.widthInput){var o,l;e=(a==null||(o=a.size)===null||o===void 0?void 0:o.width)||(a==null||(l=a.size)===null||l===void 0?void 0:l.naturalWidth)||0,this.widthInput.get().value=e.toString()}e=parseInt(e.toString(),10)}if(typeof r=="string"){if(!/^[1-9]+(\d+)?$/.test(r)&&this.heightInput){var c,d;r=(a==null||(c=a.size)===null||c===void 0?void 0:c.height)||(a==null||(d=a.size)===null||d===void 0?void 0:d.naturalHeight)||0,this.heightInput.get().value=r.toString()}r=parseInt(r.toString(),10)}(i=this.image)===null||i===void 0||i.changeSize(parseInt(e.toString(),10),r)}},{key:"toolbar",value:function(){var e,r,i,a=this,o,l,c,d;if(!ge(this.editor)||this.editor.readonly)return[];var v=this.editor.language,h=this.getValue();if(this.isLocalError===!0||((e=h)===null||e===void 0?void 0:e.status)!=="done")return[{type:"delete"}];var g=[{type:"copy"},{type:"delete"}];if(mt)return g;var w=[{type:"input",placeholder:v.get("image","toolbbarWidthTitle").toString(),prefix:"W:",value:((r=h)===null||r===void 0||(i=r.size)===null||i===void 0?void 0:i.width)||0,didMount:function(M){a.widthInput=M.find("input[type=input]")},onChange:function(M){var T,S=Math.round(parseInt(M,10)*(((T=a.image)===null||T===void 0?void 0:T.rate)||1));a.onInputChange(M,S)}},{type:"input",placeholder:v.get("image","toolbbarHeightTitle").toString(),prefix:"H:",value:((o=h)===null||o===void 0||(l=o.size)===null||l===void 0?void 0:l.height)||0,didMount:function(M){a.heightInput=M.find("input[type=input]")},onChange:function(M){var T,S=Math.round(parseInt(M,10)/(((T=a.image)===null||T===void 0?void 0:T.rate)||1));a.onInputChange(S,M)}},{type:"button",content:'<span class="data-icon data-icon-huanyuan"></span>',title:v.get("image","toolbarReductionTitle"),onClick:function(){var M,T,S,D;h=a.getValue(),a.onInputChange(((M=h)===null||M===void 0||(T=M.size)===null||T===void 0?void 0:T.naturalWidth)||0,((S=h)===null||S===void 0||(D=S.size)===null||D===void 0?void 0:D.naturalHeight)||0)}}],x=[{type:"button",content:'<span class="data-icon data-icon-block-image"></span>',title:v.get("image","displayBlockTitle"),onClick:function(){a.type=un.BLOCK}},{type:"button",content:'<span class="data-icon data-icon-inline-image"></span>',title:v.get("image","displayInlineTitle"),onClick:function(){a.type=un.INLINE}}],_=this.editor.plugin.findPlugin("image");return g.concat([].concat(Hn((_==null||(c=_.options)===null||c===void 0?void 0:c.enableResizer)===!1?[]:w),Hn((_==null||(d=_.options)===null||d===void 0?void 0:d.enableTypeSwitch)===!1?[]:x)))}},{key:"onActivate",value:function(e){var r,i;At(St(t.prototype),"onActivate",this).call(this,e),e?(r=this.image)===null||r===void 0||r.focus():(i=this.image)===null||i===void 0||i.blur()}},{key:"onSelectByOther",value:function(e,r){var i,a,o;(i=this.image)===null||i===void 0||(a=i.root)===null||a===void 0||a.css("outline",e?"2px solid "+r.color:"");var l="card-selected-other";return e?this.root.addClass(l):this.root.removeClass(l),(o=this.image)===null||o===void 0?void 0:o.root}},{key:"render",value:function(e){var r=this,i=this.getValue();if(!!i){if(!this.image||this.image.root.length===0){var a,o,l=this.editor.plugin.findPlugin("image");this.image=new X_(this.editor,{root:this.root,container:this.getCenter(),status:i.status||"done",src:i.src,size:i.size,alt:i.alt,link:i.link,display:this.type,percent:i.percent,message:i.message,enableResizer:l==null||(a=l.options)===null||a===void 0?void 0:a.enableResizer,onBeforeRender:function(h,g){var w=r.editor.plugin.findPlugin("image");if(w){var x=w.options||{},_=x.onBeforeRender;if(_)return _(h,g)}return g},onChange:function(h,g){ge(r.editor)&&!r.editor.readonly&&h&&r.setSize(h,g)},onError:function(){r.isLocalError=!0,r.didUpdate()},maxHeight:l==null||(o=l.options)===null||o===void 0?void 0:o.maxHeight})}else{var c,d;this.image.changeUrl(i.src),this.image.status=i.status||"done",this.image.message=i.message,this.image.size.width=((c=i.size)===null||c===void 0?void 0:c.width)||0,this.image.size.height=((d=i.size)===null||d===void 0?void 0:d.height)||0,i.percent&&this.image.setProgressPercent(i.percent)}this.image.render(e)}}},{key:"didUpdate",value:function(){var e,r,i,a;At(St(t.prototype),"didUpdate",this).call(this),(e=this.toolbarModel)===null||e===void 0||(r=e.getContainer())===null||r===void 0||r.remove(),(i=this.toolbarModel)===null||i===void 0||i.create(),(a=this.toolbarModel)===null||a===void 0||a.setDefaultAlign("top")}},{key:"didRender",value:function(){var e;At(St(t.prototype),"didRender",this).call(this),(e=this.toolbarModel)===null||e===void 0||e.setDefaultAlign("top")}}],[{key:"cardName",get:function(){return"image"}},{key:"cardType",get:function(){return un.INLINE}}]),t}(ni),Km=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.cardComponents={},n.loadCounts={},n.extensionNames={svg:"image/svg+xml",png:"image/png",bmp:"image/bmp",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",tif:"image/tiff",tiff:"image/tiff",emf:"image/emf",webp:"image/webp"},n.dropFiles=function(a){if(!!ge(n.editor)&&(a=a.filter(function(o){return n.isImage(o)}),a.length!==0))return n.editor.command.execute("image-uploader",a),!1},n.pasteSchema=function(a){a.add({type:"inline",name:"img",isVoid:!0,attributes:{src:{required:!0,value:"@url"},width:"@number",height:"@number",style:{"max-width":"@length","max-height":"@length",width:"@length",height:"@length"},alt:"*",title:"*","data-size":"@number","data-width":"@number","data-height":"@number"}})},n.pasteFiles=function(a){var o=a.files;if(!!ge(n.editor)&&(o=o.filter(function(l){return n.isImage(l)}),o.length!==0))return n.editor.command.execute("image-uploader",o),!1},n.pasteEach=function(a){var o=n.options.isRemote;if(a.isCard()&&a.attributes(_n)){if(a.attributes(_n)!=="image")return;var l=wr(a.attributes(er));if(!l||!l.src){a.remove();return}o&&o(l.src)?(l.status="uploading",l.percent=0,n.editor.card.replaceNode(a,"image",l)):l.status==="uploading"&&(l.percent=0,a.attributes(er,Rs(Ie(Ie({},l),{},{status:"done"}))));return}if(a.name==="img"){var c=a.attributes(),d=c.src||c["data-src"],v=c.alt;if(!d){a.remove();return}var h=n.editor.plugin.findPlugin("image"),g=a.css("width"),w=a.css("height"),x=c["data-type"]||(h==null?void 0:h.options.defaultType),_=un.INLINE;if(x==="block"){var E=a.parent();E&&E.name==="p"&&n.editor.node.unwrap(a),_=un.BLOCK}n.editor.card.replaceNode(a,"image",{type:_,src:d,status:o&&o(d)||/^data:image\//i.test(d)?"uploading":"done",alt:v,percent:0,size:{width:tn(g),height:tn(w)}}),a.remove()}},n.pasteAfter=function(){n.editor.container.find("[data-card-key=image]").each(function(a,o){var l=n.editor.card.find(a);if(!(!l||!ge(n.editor))){var c=l.getValue();if(!((c==null?void 0:c.status)!=="uploading"||Object.keys(n.cardComponents).find(function(_){return n.cardComponents[_].id===l.id}))){var d=c.src;if(/^data:image\//i.test(d)){var v=n.dataURIToFile(d),h=Of(v),g=h?"image.".concat(h):"image",w=new globalThis.File([v],g);w.uid=new Date().getTime()+"-"+If(),n.editor.command.execute("image-uploader",[w]),n.cardComponents[w.uid]=l;return}var x=n.options.isRemote;x&&x(d)&&n.uploadAddress(d,l)}}})},n.markdown=function(a){if(!(!ge(n.editor)||n.options.markdown===!1)){var o=n.editor.change,l=o.range.get();if(!(!l.collapsed||o.isComposing()||!n.markdown)){var c=l.cloneRange();c.shrinkToTextNode();var d=c.startNode;if(!!d.isText()){var v=d.text(),h=/!\[([^\]]{0,})\]\((https?:\/\/[^\)]{5,})\)/.exec(v);if(h){c.setStart(d,h.index),o.range.select(c),a.preventDefault();var g=h[1].split("|"),w=h[2],x=g[1];(x==="center"||x==="right")&&n.editor.command.execute("alignment",x),n.insertRemote(w,g[0])}}}}},n.checkMarkdownMath=function(a){var o;return!(!((o=n.checkMarkdown(a))===null||o===void 0)&&o.match)},n.checkMarkdown=function(a){if(!(!ge(n.editor)||!n.markdown||!a.isText())){var o=a.text();if(!!o){var l=/(\[!\[([^\]]{0,})\]\((\S{0,})(https?:\/\/[^\)]{5,})\)\]\(([\S]+?)\))|(!\[([^\]]{0,})\]\((https?:\/\/[^\)]{5,})\))/i,c=l.exec(o);if(!c){//![aomao-preview](https://user-images.githubusercontent.com/55792257/125074830-62d79300-e0f0-11eb-8d0f-bb96a7775568.png)
l=/(!\[([^\]]{0,})\]\((\S{0,})(https?:\/\/[^\)]{5,})\))/i,c=l.exec(o)}return{reg:l,match:c}}}},n.pasteMarkdown=function(a){var o=n.checkMarkdown(a);if(!!o){var l=n.options.isRemote,c=o.reg,d=o.match;if(!!d){for(var v="",h=a.clone(!0).get(),g=n.editor.card;h.textContent&&(d=c.exec(h.textContent));){var w,x=h.splitText(d.index);v+=h.textContent,h=x.splitText(d[0].length);var _=d[0].startsWith("["),E=d[2]||d[6],M=d[4]||d[8],T=_?d[5]:"",S=n.editor.plugin.findPlugin("image"),D=g.replaceNode(V(x),"image",{src:M,status:l&&l(M)||/^data:image\//i.test(M)?"uploading":"done",alt:E,percent:0,link:T?{href:T,target:l&&l(T)?"_blank":""}:void 0,type:(S==null?void 0:S.options.defaultType)||un.INLINE});x.remove(),v+=(w=D.get())===null||w===void 0?void 0:w.outerHTML}v+=h.textContent,a.text(v)}}},n}return Be(t,[{key:"init",value:function(){ge(this.editor)&&(this.editor.on("keydown:space",this.markdown),this.editor.on("drop:files",this.dropFiles),this.editor.on("paste:event",this.pasteFiles),this.editor.on("paste:schema",this.pasteSchema),this.editor.on("paste:each",this.pasteEach),this.editor.on("paste:after",this.pasteAfter),this.editor.on("paste:markdown-check",this.checkMarkdownMath),this.editor.on("paste:markdown",this.pasteMarkdown));var e=this.options.file||{},r=e.accept;if(typeof r=="string"&&(r=r.split(",")),Array.isArray(r)){var i=[];(r||[]).forEach(function(a){a=a.trim();var o=a.split(".").pop();o&&i.push(o)}),i.length>0&&(this.extensionNames=i)}else Jn(r)==="object"&&(this.extensionNames=r)}},{key:"isImage",value:function(e){var r=Of(e),i=Array.isArray(this.extensionNames)?this.extensionNames:Object.keys(this.extensionNames);return i.indexOf("*")>=0||i.indexOf(r)>=0}},{key:"dataURIToFile",value:function(e){var r;e.split(",")[0].indexOf("base64")>=0?r=atob(e.split(",")[1]):r=unescape(e.split(",")[1]);for(var i=e.split(",")[0].split(":")[1].split(";")[0],a=new Uint8Array(r.length),o=0;o<r.length;o++)a[o]=r.charCodeAt(o);return new Blob([a],{type:i})}},{key:"getUrl",value:function(e){var r=this.editor.plugin.components.image;if(r){var i=r.options||{},a=i.onBeforeRender;if(a)return a(e.status,e.src)}return e.src}},{key:"loadImage",value:function(e,r){var i=this;this.loadCounts[e]||(this.loadCounts[e]=1);var a=new Image;a.src=this.getUrl(r),a.onload=function(){delete i.loadCounts[e],i.editor.card.update(e,r)},a.onerror=function(){i.loadCounts[e]<=3?setTimeout(function(){i.loadCounts[e]++,i.loadImage(e,r)},500):(delete i.loadCounts[e],r.status="error",i.editor.card.update(e,r))}}},{key:"execute",value:function(){var n=zr(Qt.mark(function r(i){var a=this,o,l,c,d,v,h,g,w,x,_,E,M,T,S,D,I,P;return Qt.wrap(function($){for(;;)switch($.prev=$.next){case 0:if(ge(this.editor)){$.next=2;break}return $.abrupt("return");case 2:if(o=this.editor,l=o.request,c=o.card,d=o.language,v=this.options.file,h=v.action,g=v.data,w=v.type,x=v.contentType,_=v.multiple,E=v.crossOrigin,M=v.withCredentials,T=v.headers,S=v.name,D=this.options.parse,I=this.options.file.limitSize||5242880,!(!Array.isArray(i)&&typeof i!="string")){$.next=13;break}return P=Array.isArray(this.extensionNames)?"."+this.extensionNames.join(",."):Object.values(this.extensionNames).join(","),$.next=10,l.getFiles({event:i,accept:Df?"image/*":P.length>0?P:"",multiple:_});case 10:i=$.sent,$.next=16;break;case 13:if(typeof i!="string"){$.next=16;break}return this.insertRemote(i),$.abrupt("return");case 16:if(i.length!==0){$.next=18;break}return $.abrupt("return");case 18:return l.upload({url:h,crossOrigin:E,withCredentials:M,headers:typeof T=="function"?T():T,data:g,type:w,contentType:x,onBefore:function(G){return G.size>I?(a.editor.messageError(d.get("image","uploadLimitError").toString().replace("$size",(I/1024/1024).toFixed(0)+"M")),!1):!0},onReady:function(G){if(!(!ge(a.editor)||!!a.cardComponents[G.uid])){var H=G.src||"",z=typeof H!="string"?window.btoa(String.fromCharCode.apply(String,Hn(new Uint8Array(H)))):H,O=function(ie){var L,F=a.editor.plugin.findPlugin("image"),X=c.insert("image",Ie(Ie({},ie),{},{status:"uploading",type:ie.type||(F==null||(L=F.options)===null||L===void 0?void 0:L.defaultType)}),z);a.cardComponents[G.uid]=X};return new Promise(function(Q){var ie=new Image;ie.src=z;var L=a.editor.plugin.findPlugin("image");ie.onload=function(){var F,X=ie.naturalWidth,se=ie.naturalHeight,Y=ie.height,j=ie.width,fe=j,ve=Y,ae=L==null||(F=L.options)===null||F===void 0?void 0:F.maxHeight;ae&&se>X&&Y>ae&&(ve=ae,fe=X*(ae/se)),O({src:"",size:{width:fe,height:ve,naturalHeight:ie.naturalHeight,naturalWidth:ie.naturalWidth}}),Q()},ie.onerror=function(){O({src:""}),Q()}})}},onUploading:function(G,H){var z=H.percent,O=a.cardComponents[G.uid||""];!O||O.setProgressPercent(z)},onSuccess:function(G,H){var z=a.cardComponents[H.uid||""];if(!!z){var O=G.url||G.data&&G.data.url||G.src||G.data&&G.data.src,Q=D?D(G):O?{result:!0,data:O}:{result:!1};Q.result?O=Q.data:c.update(z.id,{status:"error",message:Q.data||a.editor.language.get("image","uploadError")});var ie={status:"done"};O&&(ie.src=O,a.loadImage(z.id,ie)),delete a.cardComponents[H.uid||""]}},onError:function(G,H){var z=a.cardComponents[H.uid||""];!z||(c.update(z.id,{status:"error",message:G.message||a.editor.language.get("image","uploadError")}),delete a.cardComponents[H.uid||""])}},i,S),$.abrupt("return");case 20:case"end":return $.stop()}},r,this)}));function e(r){return n.apply(this,arguments)}return e}()},{key:"uploadAddress",value:function(e,r){var i=this;if(!!ge(this.editor)){var a=this.options.remote,o=a.action,l=a.type,c=a.data,d=a.contentType,v=a.crossOrigin,h=a.withCredentials,g=a.headers,w=a.name,x=this.options.parse,_=w||"url";this.editor.request.ajax({url:o,method:"POST",contentType:d||"application/json",type:l===void 0?"json":l,crossOrigin:v,withCredentials:h,headers:typeof g=="function"?g():g,data:Ie(Ie({},c),{},Yt({},_,e)),success:function(M){var T=M.url||M.data&&M.data.url||M.src||M.data&&M.data.src,S=x?x(M):T?{result:!0,data:T}:{result:!1};S.result?T=S.data:i.editor.card.update(r.id,{status:"error",message:S.data||i.editor.language.get("image","uploadError")});var D={status:"done"};T&&(D.src=T,i.loadImage(r.id,D))},error:function(M){i.editor.card.update(r.id,{status:"error",message:M.message||i.editor.language.get("image","uploadError")})}})}}},{key:"insertRemote",value:function(e,r){var i=this.editor.plugin.findPlugin("image"),a={src:e,alt:r,status:"uploading",type:(i==null?void 0:i.options.defaultType)||un.INLINE},o=this.options.isRemote;if(o&&o(e)){var l=this.editor.card.insert("image",a);this.uploadAddress(e,l);return}a.status="done",this.editor.card.insert("image",a)}},{key:"destroy",value:function(){ge(this.editor)&&(this.editor.off("keydown:space",this.markdown),this.editor.off("drop:files",this.dropFiles),this.editor.off("paste:event",this.pasteFiles),this.editor.off("paste:schema",this.pasteSchema),this.editor.off("paste:each",this.pasteEach),this.editor.off("paste:after",this.pasteAfter),this.editor.off("paste:markdown-check",this.checkMarkdownMath),this.editor.off("paste:markdown",this.pasteMarkdown))}}],[{key:"pluginName",get:function(){return"image-uploader"}}]),t}(Rr),J_={image:{next:"Next",prev:"Previous",zoomIn:"Zoom In",zoomOut:"Zoom Out",originSize:"Origin Size",bestSize:"Best Size",errorMessageCopy:"Copy error message",loadError:"The picture failed to load!",uploadError:"The picture failed to upload!",uploadLimitError:"Upload image size is limited to $size",toolbarReductionTitle:"Reduction size",toolbarWidthTitle:"Width",toolbarHeightTitle:"Height",displayBlockTitle:"Block",displayInlineTitle:"In line"}},e2={image:{next:"\u4E0B\u4E00\u5F20",prev:"\u4E0A\u4E00\u5F20",zoomIn:"\u653E\u5927",zoomOut:"\u7F29\u5C0F",originSize:"\u5B9E\u9645\u5C3A\u5BF8",bestSize:"\u9002\u5E94\u5C4F\u5E55",errorMessageCopy:"\u590D\u5236\u9519\u8BEF\u4FE1\u606F",loadError:"\u56FE\u7247\u52A0\u8F7D\u5931\u8D25\uFF01",uploadError:"\u4E0A\u4F20\u56FE\u7247\u5931\u8D25\uFF01",uploadLimitError:"\u4E0A\u4F20\u56FE\u7247\u5927\u5C0F\u9650\u5236\u4E3A $size",toolbarReductionTitle:"\u8FD8\u539F",toolbarWidthTitle:"\u5BBD\u5EA6",toolbarHeightTitle:"\u5BBD\u5EA6",displayBlockTitle:"\u72EC\u5360\u4E00\u884C",displayInlineTitle:"\u5D4C\u5165\u884C\u5185"}},t2={"en-US":J_,"zh-CN":e2},Vm=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.parseHtml=function(a,o){var l=[];return a.find("[".concat(Gt,'="').concat(Gh.cardName,'"],[').concat(_n,'="').concat(Gh.cardName,'"]')).each(function(c){var d=V(c),v=n.editor.card.find(d),h=(v==null?void 0:v.getValue())||wr(d.attributes(er));if((h==null?void 0:h.src)&&h.status==="done"){var g=d.find(".data-image-meta img"),w=g.length>0?g.clone(!0):V("<img />");d.empty();var x=h.src,_=n.options.onBeforeRender;_&&(x=_(h.status,h.src));var E=d.attributes(gi);w.attributes("src",x),w.css("visibility","visible");var M=h.size;M!=null&&M.width&&w.css("width","".concat(M.width,"px")),M!=null&&M.height&&w.css("height","".concat(M.height,"px")),w.removeAttributes("class"),w.attributes("data-type",E),o&&(w=o(w,h)),E===un.BLOCK&&(w=n.editor.node.wrap(w,V('<p style="text-align:center;"></p>'))),d.replaceWith(w),l.push(w)}else d.remove()}),l},n}return Be(t,[{key:"init",value:function(){this.editor.language.add(t2),this.editor.on("parse:html",this.parseHtml)}},{key:"execute",value:function(e,r,i){var a={status:e,src:r,alt:i};e==="error"&&(a.src="",a.message=r),this.editor.card.insert("image",a)}},{key:"waiting",value:function(){var n=zr(Qt.mark(function r(i){var a=this,o,l,c,d;return Qt.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return o=this.editor.card,l=function(w){var x;return w.root.inEditor()&&w.name===Gh.cardName&&((x=w.getValue())===null||x===void 0?void 0:x.status)==="uploading"},c=function(){return o.components.find(l)},d=function(w){var x=6e4;return new Promise(function(_,E){if(i){var M=i(a.constructor.pluginName,w);if(M===!1)return E({name:a.constructor.pluginName,card:w});typeof M=="number"&&(x=M)}var T=new Date().getTime(),S=new Date().getTime(),D=function I(){if(S-T>=x)return _();setTimeout(function(){l(w)?I():_()},10)};D()})},h.abrupt("return",new Promise(function(){var g=zr(Qt.mark(function w(x,_){var E,M;return Qt.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:E=c(),M=function D(I){d(I).then(function(){var P=c();P?D(P):x()}).catch(_)},E?M(E):x();case 3:case"end":return S.stop()}},w)}));return function(w,x){return g.apply(this,arguments)}}()));case 5:case"end":return h.stop()}},r,this)}));function e(r){return n.apply(this,arguments)}return e}()},{key:"destroy",value:function(){this.editor.off("parse:html",this.parseHtml)}}],[{key:"pluginName",get:function(){return"image"}}]),t}(Rr);function n2(b){var u=typeof b;return b!=null&&(u=="object"||u=="function")}var Qm=n2,r2=typeof ca=="object"&&ca&&ca.Object===Object&&ca,i2=r2,a2=i2,o2=typeof self=="object"&&self&&self.Object===Object&&self,s2=a2||o2||Function("return this")(),Xm=s2,l2=Xm,u2=function(){return l2.Date.now()},d2=u2,c2=/\s/;function f2(b){for(var u=b.length;u--&&c2.test(b.charAt(u)););return u}var h2=f2,v2=h2,p2=/^\s+/;function g2(b){return b&&b.slice(0,v2(b)+1).replace(p2,"")}var m2=g2,b2=Xm,y2=b2.Symbol,Jm=y2,tm=Jm,e0=Object.prototype,w2=e0.hasOwnProperty,k2=e0.toString,wf=tm?tm.toStringTag:void 0;function x2(b){var u=w2.call(b,wf),t=b[wf];try{b[wf]=void 0;var n=!0}catch{}var e=k2.call(b);return n&&(u?b[wf]=t:delete b[wf]),e}var C2=x2,E2=Object.prototype,_2=E2.toString;function S2(b){return _2.call(b)}var M2=S2,nm=Jm,T2=C2,A2=M2,N2="[object Null]",D2="[object Undefined]",rm=nm?nm.toStringTag:void 0;function I2(b){return b==null?b===void 0?D2:N2:rm&&rm in Object(b)?T2(b):A2(b)}var L2=I2;function O2(b){return b!=null&&typeof b=="object"}var z2=O2,R2=L2,F2=z2,B2="[object Symbol]";function P2(b){return typeof b=="symbol"||F2(b)&&R2(b)==B2}var H2=P2,j2=m2,im=Qm,W2=H2,am=0/0,U2=/^[-+]0x[0-9a-f]+$/i,q2=/^0b[01]+$/i,$2=/^0o[0-7]+$/i,G2=parseInt;function Z2(b){if(typeof b=="number")return b;if(W2(b))return am;if(im(b)){var u=typeof b.valueOf=="function"?b.valueOf():b;b=im(u)?u+"":u}if(typeof b!="string")return b===0?b:+b;b=j2(b);var t=q2.test(b);return t||$2.test(b)?G2(b.slice(2),t?2:8):U2.test(b)?am:+b}var t0=Z2,Y2=Qm,ap=d2,om=t0,K2="Expected a function",V2=Math.max,Q2=Math.min;function X2(b,u,t){var n,e,r,i,a,o,l=0,c=!1,d=!1,v=!0;if(typeof b!="function")throw new TypeError(K2);u=om(u)||0,Y2(t)&&(c=!!t.leading,d="maxWait"in t,r=d?V2(om(t.maxWait)||0,u):r,v="trailing"in t?!!t.trailing:v);function h(D){var I=n,P=e;return n=e=void 0,l=D,i=b.apply(P,I),i}function g(D){return l=D,a=setTimeout(_,u),c?h(D):i}function w(D){var I=D-o,P=D-l,B=u-I;return d?Q2(B,r-P):B}function x(D){var I=D-o,P=D-l;return o===void 0||I>=u||I<0||d&&P>=r}function _(){var D=ap();if(x(D))return E(D);a=setTimeout(_,w(D))}function E(D){return a=void 0,v&&n?h(D):(n=e=void 0,i)}function M(){a!==void 0&&clearTimeout(a),l=0,n=o=e=a=void 0}function T(){return a===void 0?i:E(ap())}function S(){var D=ap(),I=x(D);if(n=arguments,e=this,o=D,I){if(a===void 0)return g(o);if(d)return clearTimeout(a),a=setTimeout(_,u),h(o)}return a===void 0&&(a=setTimeout(_,u)),i}return S.cancel=M,S.flush=T,S}var J2=X2,xp=function(u){return u.language.get("math")},eS=function(){function b(u,t){Fe(this,b),this.editor=void 0,this.options=void 0,this.container=void 0,this.editor=u,this.options=t}return Be(b,[{key:"focus",value:function(){var t,n;(t=this.container)===null||t===void 0||(n=t.find("textarea").get())===null||n===void 0||n.focus()}},{key:"render",value:function(t,n){this.destroy(),this.container=V('<div class="data-card-math-editor'.concat(mt?" data-card-math-editor-mobile":"",'" ').concat(lt,'="').concat(Gn,'" ').concat(Dc,'="').concat(t,'"></div>'));var e=xp(this.editor),r=this.options,i=r.onBlur,a=r.onFocus,o=r.onChange,l=r.onOk,c=r.tips,d=V("<textarea>".concat(n||"","</textarea>"));d.on("focus",function(){a&&a()}),d.on("blur",function(){i&&i()}),d.on("input",function(w){o&&o(w.target.value)}),d.on("mousedown",function(){var w;(w=d.get())===null||w===void 0||w.focus()}),d.on("keydown",function(w){l&&yt("mod+enter",w)&&l(w)}),this.container.append(d);var v=V('<div class="data-math-editor-toolbar"></div>');c&&v.append(V('<div class="data-math-editor-toolbar-tips">'.concat(c,"</div>")));var h=V('<div class="data-math-editor-toolbar-button"><a class="data-embed-toolbar-btn">'.concat(e.ok,"</div>")),g=h.find("a");return g.on("mouseenter",function(){An.show(g,e.buttonTips)}),g.on("mouseleave",function(){An.hide()}),g.on("mousedown",function(){An.hide()}),l&&g.on("click",l),v.append(h),this.container.append(v),this.container}},{key:"destroy",value:function(){var t;(t=this.container)===null||t===void 0||t.remove();var n=this.options.onDestroy;n&&n()}}]),b}();function tS(b,u){u===void 0&&(u={});var t=u.insertAt;if(!(!b||typeof document=="undefined")){var n=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",t==="top"&&n.firstChild?n.insertBefore(e,n.firstChild):n.appendChild(e),e.styleSheet?e.styleSheet.cssText=b:e.appendChild(document.createTextNode(b))}}var nS=`\r
.am-engine .data-math-content-tmp,\r
.am-engine-view .data-math-content-tmp {\r
    padding: 0 6px;\r
    border-radius: 3px 3px;\r
    height: 100%;\r
    color: rgba(0, 0, 0, 0.25);\r
    display: inline-block;\r
    white-space:nowrap;\r
  }\r
  .am-engine span[data-card-key="math"]:not(.card-selected) .data-math-content-tmp {\r
    background: #f5f5f5;\r
  }\r
  .am-engine-view span[data-card-key="math"] .data-math-content-tmp {\r
    background: #f5f5f5;\r
  }\r
\r
.am-engine span[data-card-key="math"] [data-card-element="center"] {\r
    max-width: calc(100% - 2px);\r
}\r
  .am-engine span[data-card-key="math"] .data-math-container {\r
    display: inline-block;\r
    cursor: pointer;\r
    border: 2px solid transparent; \r
  }\r
  .am-engine span[data-card-key="math"] ::-moz-selection {\r
    background: transparent !important;\r
}\r
  .am-engine span[data-card-key="math"] ::selection {\r
    background: transparent !important;\r
}\r
 .data-card-math-editor {\r
    outline: none;\r
    width: 420px;\r
    border-radius: 3px 3px;\r
    position: absolute;\r
    border: 1px solid #e8e8e8;\r
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.12);\r
    z-index: 125;\r
    text-indent: 0;\r
  }\r
.data-card-math-editor-mobile {\r
    width: calc(100vw - 40px);\r
}\r
  .data-card-math-editor textarea {\r
    width: 100%;\r
    border: none;\r
    min-width: 400px;\r
    min-height: 88px;\r
    padding: 6px 6px;\r
    line-height: 24px;\r
    color: #595959;\r
    outline: none;\r
    font-family: 'Lucida Console', Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;\r
    vertical-align: bottom;\r
    font-size: 14px;\r
    font-weight: 400;\r
  }\r
\r
  .data-card-math-editor-mobile textarea{\r
    min-width:auto;\r
  }\r
  .data-card-math-editor .data-math-editor-toolbar {\r
    position: relative;\r
    background: #f9f9f9;\r
    border-top: 1px solid #e8e8e8;\r
    padding: 2px 8px;\r
    text-align: left;\r
    text-indent: 0;\r
    display: flex;\r
    justify-content: space-between;\r
  }\r
\r
  .data-card-math-editor .data-math-editor-toolbar .data-math-editor-toolbar-tips a {\r
    font-size: 12px;\r
    color: #8c8c8c;\r
    vertical-align: middle;\r
  }\r
\r
  .data-card-math-editor .data-math-editor-toolbar .data-math-editor-toolbar-tips a:hover {\r
      color: #595959;\r
  }\r
\r
  .data-card-math-editor .data-math-editor-toolbar .data-math-editor-toolbar-tips .data-icon {\r
    vertical-align: middle;\r
    margin-right: 4px;\r
    color: #8c8c8c;\r
  }\r
  .data-card-math-editor .data-math-editor-toolbar .data-math-editor-toolbar-button .data-embed-toolbar-btn {\r
    font-size: 14px;\r
    display: block;\r
  }\r
\r
  .am-engine span[data-card-key="math"].card-selected [data-card-element="center"].data-card-border-selected {\r
    outline: none;\r
  }\r
\r
  .am-engine span[data-card-key="math"] .data-card-border-selected .data-math-container {\r
    border: 2px solid #1890FF;\r
    border-radius: 4px;\r
}`;tS(nS);var Qa=Mt("position"),xl=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),Object.defineProperty(Ye(n),Qa,{writable:!0,value:void 0}),n.container=void 0,n.editorContainer=void 0,n.mathEditor=void 0,n.isSaving=!1,n.queryMath=J2(function(a){return n.renderMath(a)},300),n.onWindowResize=function(){n.updateMaxWidth()},n.updateMaxWidth=function(){var a,o,l=n.getMaxWidth();(a=n.container)===null||a===void 0||(o=a.find("img"))===null||o===void 0||o.css("max-width",Math.max(l,0)+"px")},n}return Be(t,[{key:"init",value:function(){var e=this;At(St(t.prototype),"init",this).call(this);var r=xp(this.editor).tips,i=this.editor.card;oe(this,Qa)[Qa]||(oe(this,Qa)[Qa]=new Mu(this.editor)),!this.mathEditor&&(this.mathEditor=new eS(this.editor,{tips:'<a class="tips-text" href="'.concat(r.href,'" target="_blank"><span class="data-icon data-icon-question-circle-o"></span>').concat(r.text,"</a>"),onFocus:function(){var o;(o=e.editorContainer)===null||o===void 0||o.addClass("textarea-focus")},onBlur:function(){var o;(o=e.editorContainer)===null||o===void 0||o.removeClass("textarea-focus")},onChange:this.queryMath,onOk:function(o){o.stopPropagation(),o.preventDefault(),i.activate(V(document.body)),i.focus(e)},onDestroy:function(){var o;(o=oe(e,Qa)[Qa])===null||o===void 0||o.destroy()}}))}},{key:"query",value:function(e,r,i){var a=this.editor.command;a.executeMethod("math","action","query",this.id,e,r,i)}},{key:"getMaxWidth",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.root,r=this.editor.block.closest(e).get();if(!r)return 0;var i=window.getComputedStyle(r),a=parseInt(i.width)-parseInt(i["padding-left"])-parseInt(i["padding-right"]);return ge(this.editor)?a-2:a}},{key:"focusTextarea",value:function(){var e;(e=this.mathEditor)===null||e===void 0||e.focus()}},{key:"onActivate",value:function(e){var r;At(St(t.prototype),"onActivate",this).call(this,e),!(!ge(this.editor)||this.editor.readonly)&&(e?this.renderEditor():(r=this.mathEditor)===null||r===void 0||r.destroy())}},{key:"renderPureText",value:function(e){var r,i,a=this.getMaxWidth();(r=this.container)===null||r===void 0||r.html('<span class="data-math-content-tmp" style="max-width: '.concat(a,'px">').concat(e,"</span>")),(i=oe(this,Qa)[Qa])===null||i===void 0||i.update()}},{key:"renderMath",value:function(e){var r=this;this.isSaving=!0,this.query(e,function(i){var a=new Image;a.src=i,a.onload=function(){var o,l;r.renderImage(V(a)),(o=r.container)===null||o===void 0||o.empty(),(l=r.container)===null||l===void 0||l.append(a)},r.setValue({url:i,code:e}),r.isSaving=!1},function(){r.renderPureText(e),r.setValue({url:"",code:e}),r.isSaving=!1})}},{key:"renderImage",value:function(e){var r,i=this.getMaxWidth(),a=e.get(),o=a.naturalWidth,l=a.naturalHeight,c=parseInt("".concat(14/17.4*o)),d=parseInt("".concat(14/17.4*l));e.css("width","".concat(c,"px")),e.css("height","".concat(d,"px")),e.css("max-width","".concat(i,"px")),(r=oe(this,Qa)[Qa])===null||r===void 0||r.update()}},{key:"renderView",value:function(){var e=this,r=this.getValue(),i=xp(this.editor),a=r||{url:"",code:""},o=a.url,l=a.code;if(this.container||(this.container=V('<span class="data-math-container"></span>'),this.getCenter().empty().append(this.container)),o){var c=this.container.find("img");c.length===0?(c=V('<img src="'.concat(o,'" />')),this.container.empty().append(c)):c.attributes("src",o),c.on("load",function(){e.renderImage(c)}),c.on("error",function(){e.renderMath(l)})}else l?ge(this.editor)?this.renderMath(l):this.renderPureText(l):this.renderPureText(i.placeholder);(!ge(this.editor)||this.editor.readonly)&&(this.container.css("cursor","pointer"),this.container.attributes("draggable","true"),this.container.css("user-select","none"))}},{key:"renderEditor",value:function(){var e;if(!!this.mathEditor){var r=this.getValue();!r||!r.id||(this.editorContainer=this.mathEditor.render(r.id,r.code),this.container&&((e=oe(this,Qa)[Qa])===null||e===void 0||e.bind(this.editorContainer,this.container)))}}},{key:"render",value:function(){this.renderView()}},{key:"didRender",value:function(){At(St(t.prototype),"didRender",this).call(this),window.addEventListener("resize",this.onWindowResize),this.editor.on("editor:resize",this.onWindowResize)}},{key:"destroy",value:function(){var e;At(St(t.prototype),"destroy",this).call(this),(e=this.mathEditor)===null||e===void 0||e.destroy(),window.removeEventListener("resize",this.onWindowResize),this.editor.off("editor:resize",this.onWindowResize)}}],[{key:"cardName",get:function(){return"math"}},{key:"cardType",get:function(){return un.INLINE}},{key:"autoSelected",get:function(){return!1}}]),t}(ni),rS={math:{errorMessageCopy:"Copy error message",getError:"Failed to get svg code",placeholder:"Add Tex formula",ok:"Ok",buttonTips:"".concat(Eo?"\u2318":"Ctrl"," + Enter"),tips:{text:"Understand LaTeX syntax",href:"https://math.meta.stackexchange.com/questions/5020/mathjax-basic-tutorial-and-quick-reference"}}},iS={math:{errorMessageCopy:"\u590D\u5236\u9519\u8BEF\u4FE1\u606F",getError:"\u83B7\u53D6svg\u4EE3\u7801\u5931\u8D25",placeholder:"\u6DFB\u52A0 Tex \u516C\u5F0F",ok:"\u786E\u5B9A",buttonTips:"".concat(Eo?"\u2318":"Ctrl"," + Enter"),tips:{text:"\u4E86\u89E3 LaTeX \u8BED\u6CD5",href:"https://math.meta.stackexchange.com/questions/5020/mathjax-basic-tutorial-and-quick-reference"}}},aS={"en-US":rS,"zh-CN":iS},kf=Mt("request"),n0=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),Object.defineProperty(Ye(n),kf,{writable:!0,value:{}}),n.pasteSchema=function(a){a.add({type:"inline",name:"span",attributes:{"data-type":{required:!0,value:xl.cardName},"data-value":"*"}})},n.pasteHtml=function(a){if(!!ge(n.editor)){if(a.isElement()){var o=a.attributes(),l=o["data-type"];if(l===xl.cardName){var c=o["data-value"],d=wr(c);return d.url?(n.editor.card.replaceNode(a,xl.cardName,d),a.remove(),!1):void 0}}return!0}},n.parseHtml=function(a,o){var l=[];return a.find("[".concat(Gt,'="').concat(xl.cardName,'"],[').concat(_n,'="').concat(xl.cardName,'"]')).each(function(c){var d=V(c),v=n.editor.card.find(d),h=(v==null?void 0:v.getValue())||wr(d.attributes(er));if(h){var g=V("<img />");d.empty(),g.attributes("src",h.url),g.css("visibility","visible"),g.css("vertical-align","middle");var w=V('<span data-type="'.concat(xl.cardName,'" data-value="').concat(Rs(h),'"></span>'));o&&(g=o(g,h)),w.append(g),d.replaceWith(w),l.push(w)}else d.remove()}),l},n}return Be(t,[{key:"init",value:function(){this.editor.language.add(aS),this.editor.on("parse:html",this.parseHtml),this.editor.on("paste:each",this.pasteHtml),this.editor.on("paste:schema",this.pasteSchema)}},{key:"execute",value:function(){var e=this.editor.card,r=e.insert(xl.cardName,{code:(arguments.length<=0?void 0:arguments[0])||"",url:(arguments.length<=1?void 0:arguments[1])||""});e.activate(r.root),window.setTimeout(function(){r.focusTextarea()},10)}},{key:"action",value:function(e){switch(e){case"query":for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];var o=i[0],l=i[1],c=i[2],d=i[3];return this.query(o,l,c,d)}}},{key:"query",value:function(e,r,i,a){var o,l=this,c=this.editor.request,d=this.options,v=d.action,h=d.type,g=d.contentType,w=d.data,x=d.parse;(o=oe(this,kf)[kf][e])===null||o===void 0||o.abort(),oe(this,kf)[kf][e]=c.ajax({url:v,method:"POST",contentType:g||"application/json",type:h===void 0?"json":h,data:Ie(Ie({},w),{},{content:r}),success:function(E){var M=E.url||E.data&&E.data.url,T=x?x(E):M?{result:!0,data:M}:{result:!1};if(T.result){var S=T.data.indexOf("http")===0||T.data.indexOf("/")===0,D=T.data;S||(D=l.exConvertToPx(T.data),D=(D.indexOf("data:")<0?"data:image/svg+xml,":"")+encodeURIComponent(D).replace(/'/g,"%27").replace(/"/g,"%22")),i(D)}else a(T.data)},error:function(E){a(E.message||l.editor.language.get("image","uploadError"))}})}},{key:"exConvertToPx",value:function(e){var r=/width="([\d\.]+ex)"/,i=r.exec(e),a=i?i[1]:null,o=/height="([\d\.]+ex)"/,l=o.exec(e),c=l?l[1]:null;if(a){var d=parseFloat(a.substring(0,a.length-2))*9;e=e.replace('width="'.concat(a,'"'),'width="'.concat(d,'px"'))}if(c){var v=parseFloat(c.substring(0,c.length-2))*9;e=e.replace('height="'.concat(c,'"'),'height="'.concat(v,'px"'))}return e}},{key:"waiting",value:function(){var n=zr(Qt.mark(function r(i){var a=this,o,l,c,d;return Qt.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return o=this.editor.card,l=function(w){return w.root.inEditor()&&w.name===xl.cardName&&w.isSaving},c=function(){return o.components.find(l)},d=function(w){var x=6e4;return new Promise(function(_,E){if(i){var M=i(a.constructor.pluginName,w);if(M===!1)return E({name:a.constructor.pluginName,card:w});typeof M=="number"&&(x=M)}var T=new Date().getTime(),S=new Date().getTime(),D=function I(){if(S-T>=x)return _();setTimeout(function(){l(w)?I():_()},10)};D()})},h.abrupt("return",new Promise(function(){var g=zr(Qt.mark(function w(x,_){var E,M;return Qt.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:E=c(),M=function D(I){d(I).then(function(){var P=c();P?D(P):x()}).catch(_)},E?M(E):x();case 3:case"end":return S.stop()}},w)}));return function(w,x){return g.apply(this,arguments)}}()));case 5:case"end":return h.stop()}},r,this)}));function e(r){return n.apply(this,arguments)}return e}()},{key:"destroy",value:function(){this.editor.off("parse:html",this.parseHtml),this.editor.off("paste:each",this.pasteHtml),this.editor.off("paste:schema",this.pasteSchema)}}],[{key:"pluginName",get:function(){return"math"}}]),t}(Rr);function oS(b,u){if(b==null)return{};var t={},n=Object.keys(b),e,r;for(r=0;r<n.length;r++)e=n[r],!(u.indexOf(e)>=0)&&(t[e]=b[e]);return t}function Cp(b,u){if(b==null)return{};var t=oS(b,u),n,e;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(b);for(e=0;e<r.length;e++)n=r[e],!(u.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(b,n)||(t[n]=b[n]))}return t}var wd=Mt("position"),Xa=Mt("scrollbar"),sS=function(){function b(u,t){var n=this;Fe(this,b),this.engine=void 0,this.root=void 0,this.target=void 0,this.otpions=void 0,this.SCOPE_NAME="data-mention-component",Object.defineProperty(this,wd,{writable:!0,value:void 0}),Object.defineProperty(this,Xa,{writable:!0,value:void 0}),this.renderEmpty=function(){return'<div class="data-mention-item"><span class="data-mention-item-text">Empty Data</span></div>'},this.getPluginOptions=function(){var e=n.engine.plugin.findPlugin("mention");return e==null?void 0:e.options},this.handlePreventDefault=function(e){var r;if(((r=n.root)===null||r===void 0?void 0:r.closest("body").length)!==0)return e.preventDefault(),!1},this.bindItem=function(e,r){var i=n.otpions.onSelect;e.addClass("data-mention-item");var a=r.key,o=r.name;return a?e.attributes({"data-key":Sr(a)}):e.removeAttributes("data-key"),e.attributes({"data-name":Sr(o)}),e.removeAllEvents(),e.on("click",function(l){!a||(l.stopPropagation(),l.preventDefault(),i&&i(l,r))},{once:!0}),e.on("mouseenter",function(){var l;!a||((l=n.root)===null||l===void 0||l.find(".data-mention-item-active").removeClass("data-mention-item-active"),e.addClass("data-mention-item-active"))}),e},this.otpions=t,this.engine=u,oe(this,wd)[wd]=new Mu(this.engine)}return Be(b,[{key:"select",value:function(t){var n,e,r;(n=this.root)===null||n===void 0||n.find(".data-mention-item-active").removeClass("data-mention-item-active"),(e=this.root)===null||e===void 0||(r=e.find(".data-mention-item").eq(t))===null||r===void 0||r.addClass("data-mention-item-active")}},{key:"scroll",value:function(t){if(!!this.root){var n=this.root.find(".data-mention-item").toArray();if(n.length!==0){var e=n.find(function(o){return o.hasClass("data-mention-item-active")})||n[0],r=e;for(e=t==="up"?e.prev():e.next();e||(e=t==="up"?n[n.length-1]:n[0]),!(!!e.attributes("data-key")||r.equal(e));)e=t==="up"?e.prev():e.next();if(!e||!e.attributes("data-key")){this.select(-1);return}this.select(n.findIndex(function(o){return o.equal(e)}));var i=0;this.root.find(".data-mention-item").each(function(o){var l;if(!((l=e)===null||l===void 0)&&l.equal(o))return!1;i+=o.clientHeight});var a=this.root.get();a.scrollTop=i-a.clientHeight/2}}}},{key:"unbindEvents",value:function(){var t;Aa.exports.deleteScope(this.SCOPE_NAME),Aa.exports.unbind("enter",this.SCOPE_NAME),Aa.exports.unbind("up",this.SCOPE_NAME),Aa.exports.unbind("down",this.SCOPE_NAME),Aa.exports.unbind("esc",this.SCOPE_NAME),this.engine.off("keydown:enter",this.handlePreventDefault),(t=oe(this,wd)[wd])===null||t===void 0||t.destroy()}},{key:"bindEvents",value:function(){var t=this,n;this.unbindEvents(),Aa.exports.setScope(this.SCOPE_NAME),ku("enter",this.SCOPE_NAME,function(e){var r,i,a;if(((r=t.root)===null||r===void 0?void 0:r.closest("body").length)!==0){e.preventDefault();var o=(i=t.root)===null||i===void 0?void 0:i.find(".data-mention-item-active");o==null||(a=o.get())===null||a===void 0||a.click()}}),ku("up",this.SCOPE_NAME,function(e){var r;((r=t.root)===null||r===void 0?void 0:r.closest("body").length)!==0&&(e.preventDefault(),t.scroll("up"))}),ku("down",this.SCOPE_NAME,function(e){var r;((r=t.root)===null||r===void 0?void 0:r.closest("body").length)!==0&&(e.preventDefault(),t.scroll("down"))}),ku("esc",this.SCOPE_NAME,function(e){e.preventDefault(),t.unbindEvents();var r=t.otpions.onCancel;r&&r()}),this.engine.on("keydown:enter",this.handlePreventDefault),!(!this.root||!this.target||this.target.length===0)&&((n=oe(this,wd)[wd])===null||n===void 0||n.bind(this.root,this.target))}},{key:"remove",value:function(){var t;!this.root||this.root.length===0||((t=oe(this,Xa)[Xa])===null||t===void 0||t.destroy(),this.unbindEvents(),this.root.remove(),this.root=void 0)}},{key:"renderTemplate",value:function(t){var n=t.name,e=t.avatar;return`<div class="data-mention-item">
            `.concat(e?'<span class="data-mention-item-avatar"><img src="'.concat(e,'" /></span>'):"",`
            <span class="data-mention-item-text">`).concat(Ai(n),`</span>
        </div>`)}},{key:"getBody",value:function(){var t;return(t=this.root)===null||t===void 0?void 0:t.find(".data-mention-component-body")}},{key:"createRoot",value:function(){this.root=V('<div class="data-mention-component-list" '.concat(lt,'="').concat(Gn,'"><div class="data-mention-component-body"></div></div>'))}},{key:"renderRootEmpty",value:function(){var t,n=this.getBody(),e=n==null?void 0:n.children();if(n&&n.length>0&&((e==null?void 0:e.length)===0||(e==null?void 0:e.length)===1&&((t=e.eq(0))===null||t===void 0?void 0:t.hasClass("data-scrollbar")))){var r;(r=this.root)===null||r===void 0||r.addClass("data-mention-component-empty")}else{var i;(i=this.root)===null||i===void 0||i.removeClass("data-mention-component-empty")}}},{key:"render",value:function(t,n){var e=this,r;if(this.root||this.createRoot(),!!this.root){this.target=t;var i=this.getBody(),a=null,o=this.getPluginOptions();if(typeof n=="boolean"&&n===!0){var l;a=o!=null&&o.onLoading?o.onLoading(this.root):this.engine.trigger("mention:loading",this.root),i=this.getBody(),a&&((l=i)===null||l===void 0||l.empty().append(a))}else if(n.filter(function(h){return!!h.key}).length===0){var c,d=this.engine.trigger("mention:empty",this.root)||(o!=null&&o.onEmpty?o==null?void 0:o.onEmpty(this.root):this.renderEmpty(this.root));i=this.getBody(),d&&((c=i)===null||c===void 0||c.empty().append(d))}else if((o==null?void 0:o.onRender)||(a=this.engine.trigger("mention:render",this.root,n,this.bindItem))){(o!=null&&o.onRender?o.onRender(this.root,n,this.bindItem):a).then(function(h){var g,w,x=e.getBody();h&&(x==null||x.empty().append(h)),(g=oe(e,Xa)[Xa])===null||g===void 0||g.destroy(),x&&(oe(e,Xa)[Xa]=new bp(x,!1,!0,!1)),e.select(0),e.bindEvents(),(w=oe(e,Xa)[Xa])===null||w===void 0||w.refresh()}),this.renderRootEmpty();return}else{var v;(!i||i.length===0)&&(this.createRoot(),i=this.getBody()),(v=i)===null||v===void 0||v.empty(),n.forEach(function(h){var g,w=e.engine.trigger("mention:render-item",h,e.root),x=w||(o!=null&&o.onRenderItem?o.onRenderItem(h,e.root):e.renderTemplate(h));!x||(g=i)===null||g===void 0||g.append(e.bindItem(V(x),h))}),this.select(0)}this.renderRootEmpty(),i&&(oe(this,Xa)[Xa]=new bp(i,!1,!0,!1)),this.bindEvents(),(r=oe(this,Xa)[Xa])===null||r===void 0||r.refresh()}}}]),b}();function lS(b,u){u===void 0&&(u={});var t=u.insertAt;if(!(!b||typeof document=="undefined")){var n=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",t==="top"&&n.firstChild?n.insertBefore(e,n.firstChild):n.appendChild(e),e.styleSheet?e.styleSheet.cssText=b:e.appendChild(document.createTextNode(b))}}var uS=`.am-engine .data-mention-component, .am-engine-view .data-mention-component {\r
    color: #1890ff !important;\r
    cursor: pointer;\r
    overflow: hidden;\r
    white-space: nowrap;\r
    text-overflow: ellipsis;\r
    display: inline-block;\r
    vertical-align: top;\r
}\r
\r
.am-engine [data-card-key="mention"].card-selected [data-card-element="center"].data-card-border-selected {\r
    outline: 0 none;\r
}\r
\r
.am-engine [data-card-key="mention"].card-activated ::-moz-selection {\r
    background: transparent !important;\r
}\r
\r
.am-engine [data-card-key="mention"].card-activated ::selection {\r
    background: transparent !important;\r
}\r
\r
.data-mention-component-list {\r
    position: absolute;\r
    font-size: 12px;\r
    background: #ffffff;\r
    border: 1px solid #e8e8e8;\r
    border-radius: 3px 3px;\r
    box-shadow: 0 2px 10px rgb(0 0 0 / 12%);\r
    transition: all 0.25s cubic-bezier(0.3, 1.2, 0.2, 1);\r
    z-index: 999;\r
    overflow: hidden;\r
    padding: 5px 0;\r
    max-width: 250px;\r
}\r
\r
.data-mention-component-empty {\r
    padding: 0;\r
    box-shadow: none;\r
    border: none;\r
}\r
\r
.data-mention-component-body {\r
    max-height: calc(40vh);\r
    overflow: hidden;\r
}\r
\r
.data-mention-component-placeholder {\r
    color: rgba(0,0,0,0.25);\r
    pointer-events: none;\r
    min-width: 78px;\r
}\r
\r
.data-mention-item {\r
    display: flex;\r
    cursor: pointer;\r
    padding: 4px 16px;\r
    min-width: 160px;\r
    align-items: center;\r
}\r
\r
.data-mention-item .data-mention-item-text {\r
    display: block;\r
    text-align: left;\r
    margin-left: 8px;\r
    color: #595959;\r
    line-height: 24px;\r
    font-size: 14px;\r
    font-weight: normal;\r
}\r
\r
.data-mention-item.data-mention-item-active {\r
    background-color: #f4f4f4;\r
}\r
\r
.data-mention-item-avatar img {\r
    max-width: 38px;\r
}\r
\r
.data-mention-component-body.data-scrollable.scroll-y {\r
    padding-right: 0 !important;\r
}\r
\r
.data-mention-hover-layout {\r
  position: absolute;\r
  font-size: 12px;\r
  background: #ffffff;\r
  border: 1px solid #e8e8e8;\r
  border-radius: 3px 3px;\r
  box-shadow: 0 2px 10px rgb(0 0 0 / 12%);\r
  transition: all 0.25s cubic-bezier(0.3, 1.2, 0.2, 1);\r
  z-index: 999;\r
}`;lS(uS);var dS=["id","key","name","marks","type"],cS=["id","key","name"],Pt=Mt("container"),ur=Mt("keyword"),kd=Mt("placeholder"),Zo=Mt("position"),xd=Mt("showTimeout"),Yo=Mt("hideTimeout"),hi=Mt("enterLayout"),xf=Mt("request"),Ds=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.component=void 0,Object.defineProperty(Ye(n),Pt,{writable:!0,value:void 0}),Object.defineProperty(Ye(n),ur,{writable:!0,value:void 0}),Object.defineProperty(Ye(n),kd,{writable:!0,value:void 0}),Object.defineProperty(Ye(n),Zo,{writable:!0,value:void 0}),Object.defineProperty(Ye(n),xd,{writable:!0,value:void 0}),Object.defineProperty(Ye(n),Yo,{writable:!0,value:void 0}),Object.defineProperty(Ye(n),hi,{writable:!0,value:void 0}),Object.defineProperty(Ye(n),xf,{writable:!0,value:void 0}),n.getMaxWidth=function(){var a=n.editor.block.closest(n.root);return a.get().clientWidth-4},n.onWindowResize=function(){n.updateMaxWidth()},n.updateMaxWidth=function(){var a,o=n.getMaxWidth();(a=oe(Ye(n),Pt)[Pt])===null||a===void 0||a.css("max-width",Math.max(o,0)+"px")},n.getPluginOptions=function(){var a=n.editor.plugin.findPlugin("mention");return a==null?void 0:a.options},n.search=function(a){var o=n.getPluginOptions();if(o&&o.onSearch)return o.onSearch(a);var l=n.editor.trigger("mention:search",a);if(l!==void 0)return l;var c=n.editor.request;return new Promise(function(d){if(o!=null&&o.action){var v,h=o.type,g=o.contentType,w=o.parse;(v=oe(Ye(n),xf)[xf])===null||v===void 0||v.abort(),oe(Ye(n),xf)[xf]=c.ajax({url:o.action,contentType:g||"",type:h===void 0?"json":h,data:{keyword:a},success:function(_){var E=w?w(_):_,M=E.result,T=E.data;!M||d(T)},method:"GET"})}else d([])})},n.hideEnter=function(){oe(Ye(n),Yo)[Yo]=setTimeout(function(){var a,o;(a=oe(Ye(n),Zo)[Zo])===null||a===void 0||a.destroy(),(o=oe(Ye(n),hi)[hi])===null||o===void 0||o.remove()},200)},n.showEnter=function(){var a=n.getPluginOptions();if(!(!oe(Ye(n),Pt)[Pt]||!(a!=null&&a.onMouseEnter))){var o=n.getValue();if(!!(o!=null&&o.name)){o.id;var l=o.key,c=o.name;o.marks,o.type;var d=Cp(o,dS);oe(Ye(n),Yo)[Yo]&&clearTimeout(oe(Ye(n),Yo)[Yo]),oe(Ye(n),xd)[xd]&&clearTimeout(oe(Ye(n),xd)[xd]),!(oe(Ye(n),hi)[hi]&&oe(Ye(n),hi)[hi].length>0)&&(oe(Ye(n),xd)[xd]=setTimeout(function(){!oe(Ye(n),Pt)[Pt]||(oe(Ye(n),hi)[hi]=V('<div class="data-mention-hover-layout" '.concat(lt,'="').concat(Gn,'"></div>')),oe(Ye(n),hi)[hi].on("mouseenter",function(){oe(Ye(n),Yo)[Yo]&&clearTimeout(oe(Ye(n),Yo)[Yo])}),oe(Ye(n),hi)[hi].on("mouseleave",n.hideEnter),n.editor.trigger("mention:enter",oe(Ye(n),hi)[hi],Ie({key:Ai(l||""),name:Ai(c)},d)),a.onMouseEnter(oe(Ye(n),hi)[hi],Ie({key:Ai(l||""),name:Ai(c)},d)),setTimeout(function(){var v;(v=oe(Ye(n),Zo)[Zo])===null||v===void 0||v.bind(oe(Ye(n),hi)[hi],oe(Ye(n),Pt)[Pt])},10))},200))}}},n}return Be(t,[{key:"init",value:function(){var e=this;if(oe(this,Zo)[Zo]||(oe(this,Zo)[Zo]=new Mu(this.editor)),!(!ge(this.editor)||Vh)&&(At(St(t.prototype),"init",this).call(this),!this.component)){var r=this.getPluginOptions();this.component=new sS(this.editor,{onCancel:function(){e.changeToText()},onSelect:function(a,o){var l,c,d=e.editor.trigger("mention:select",o)||{};delete d.id,r!=null&&r.onSelect&&(d=r.onSelect(o)||{},delete d.id);var v=e.editor.card,h=e.getValue();(l=e.component)===null||l===void 0||l.remove(),e.component=void 0,(c=oe(e,ur)[ur])===null||c===void 0||c.remove(),v.focus(e,!1);var g=v.insert(t.cardName,Ie(Ie({},o),{},{marks:h.marks},d));if(v.removeNode(e),e.editor.trigger("mention:insert",g),r!=null&&r.onInsert&&r.onInsert(g),ge(e.editor)){var w=e.editor.change,x=w.range.get().cloneRange();x.setStartAfter(g.root.get()),x.collapse(!0),w.range.select(x)}else v.focus(g,!1)}})}}},{key:"remove",value:function(){var e,r;!ge(this.editor)||((e=this.component)===null||e===void 0||e.remove(),(r=oe(this,ur)[ur])===null||r===void 0||r.remove(),this.editor.card.remove(this.id))}},{key:"changeToText",value:function(){var e,r;if(!(!this.root.inEditor()||!ge(this.editor))){var i=((e=oe(this,ur)[ur])===null||e===void 0||(r=e.get())===null||r===void 0?void 0:r.innerText)||"";this.remove(),this.editor.node.insertText(i)}}},{key:"activate",value:function(e){if(At(St(t.prototype),"activate",this).call(this,e),!e&&oe(this,ur)[ur]&&oe(this,ur)[ur].length>0){var r;(r=this.component)===null||r===void 0||r.unbindEvents(),this.changeToText()}}},{key:"handleInput",value:function(){var e,r,i,a,o=this;if(!!ge(this.editor)){var l=this.editor,c=l.change,d=l.card;if(!c.isComposing()){var v=((e=oe(this,ur)[ur])===null||e===void 0||(r=e.get())===null||r===void 0?void 0:r.innerText.replace(/[\r\n]/g,""))||"";if(v===""){var h;(h=this.component)===null||h===void 0||h.remove(),d.remove(this.id);return}var g=v.substr(1),w=this.editor.trigger("mention:default")||((i=this.getPluginOptions())===null||i===void 0?void 0:i.defaultData);if(g===""&&w){var x;(x=this.component)===null||x===void 0||x.render(this.root,w);return}(a=this.component)===null||a===void 0||a.render(this.root,!0),this.editor.trigger("mention:search",g),this.search(g).then(function(_){var E;(E=o.component)===null||E===void 0||E.render(o.root,_)})}}}},{key:"resetPlaceHolder",value:function(){var e,r,i,a;((e=oe(this,ur)[ur])===null||e===void 0||(r=e.get())===null||r===void 0?void 0:r.innerText)==="@"?(i=oe(this,kd)[kd])===null||i===void 0||i.show():(a=oe(this,kd)[kd])===null||a===void 0||a.hide()}},{key:"executeMark",value:function(e,r){var i=this;if(!!oe(this,Pt)[Pt]){var a=oe(this,Pt)[Pt].children();if(!e)this.editor.mark.unwrapByNodes(this.queryMarks(!1)),this.setValue({marks:[]});else if(r){a.each(function(c,d){var v=a.eq(d);v&&i.editor.mark.wrapByNode(v,e)});var o=this.queryMarks().map(function(c){var d;return((d=c.clone().get())===null||d===void 0?void 0:d.outerHTML)||""});this.setValue({marks:o})}else{this.editor.mark.unwrapByNodes(this.queryMarks(!1),e);var l=this.queryMarks().map(function(c){var d;return((d=c.get())===null||d===void 0?void 0:d.outerHTML)||""});this.setValue({marks:l})}}}},{key:"queryMarks",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return oe(this,Pt)[Pt]?oe(this,Pt)[Pt].allChildren().filter(function(r){return r.isElement()}).map(function(r){return e?r.clone():r}):[]}},{key:"render",value:function(){var e=this,r=this.getValue();if((r==null?void 0:r.name)&&!oe(this,Pt)[Pt]){r.id;var i=r.key,a=r.name,o=Cp(r,cS);oe(this,Pt)[Pt]=V('<span class="data-mention-component">@'.concat(Ai(a),"</span>")),(r.marks||[]).forEach(function(_){e.executeMark(V(_),!0)}),oe(this,Pt)[Pt].on("click",function(){!oe(e,Pt)[Pt]||(e.editor.trigger("mention:item-click",oe(e,Pt)[Pt],Ie({key:Ai(i||""),name:Ai(a)},o)),d!=null&&d.itemClick&&(d==null||d.itemClick(oe(e,Pt)[Pt],Ie({key:Ai(i||""),name:Ai(a)},o))))}),oe(this,Pt)[Pt].on("mouseenter",this.showEnter),oe(this,Pt)[Pt].on("mouseleave",this.hideEnter)}else if(oe(this,Pt)[Pt]){r&&(oe(this,Pt)[Pt].html("@".concat(Ai(r.name||""))),((r==null?void 0:r.marks)||[]).forEach(function(_){e.executeMark(V(_),!0)}));return}if(!ge(this.editor))return oe(this,Pt)[Pt];var l=this.editor.language.get("mention"),c=void 0,d=this.getPluginOptions();if(oe(this,Pt)[Pt]){var x;return(x=this.component)===null||x===void 0||x.remove(),oe(this,Pt)[Pt]}else{var v,h;oe(this,Pt)[Pt]=V('<span class="data-mention-component-keyword data-mention-component" '.concat(Hi,'="true">@</span><span class="data-mention-component-placeholder">').concat(l.placeholder,"</span>")),oe(this,ur)[ur]=oe(this,Pt)[Pt].eq(0),oe(this,kd)[kd]=oe(this,Pt)[Pt].eq(1),(v=oe(this,ur)[ur])===null||v===void 0||v.on("keydown",function(_){yt("enter",_)&&_.preventDefault()});var g=Date.now();if((h=oe(this,ur)[ur])===null||h===void 0||h.on("input",function(){if(e.resetPlaceHolder(),Date.now()-g<200){var _,E=(_=oe(e,ur)[ur])===null||_===void 0?void 0:_.allChildren().find(function(S){return S.isText()});if(E&&E.isText()&&E[0].nodeValue==="@@"){var M,T=(M=E.get())===null||M===void 0?void 0:M.splitText(1);T==null||T.remove()}}c&&clearTimeout(c),c=setTimeout(function(){e.handleInput()},100)}),this.getCenter().append(oe(this,Pt)[Pt]),setTimeout(function(){if(ge(e.editor)){var _,E=e.editor.change.range.get();oe(e,ur)[ur]=(_=oe(e,Pt)[Pt])===null||_===void 0?void 0:_.eq(0),E.select(oe(e,ur)[ur],!0).collapse(!1);var M=window.getSelection();M==null||M.removeAllRanges(),M==null||M.addRange(E.toRange())}},10),!(d!=null&&d.defaultData?d==null?void 0:d.defaultData:this.editor.trigger("mention:default")))setTimeout(function(){e.handleInput()},50);else{var w;(w=this.component)===null||w===void 0||w.render(this.root,this.editor.trigger("mention:default")||(d==null?void 0:d.defaultData)||[])}}}},{key:"didRender",value:function(){At(St(t.prototype),"didRender",this).call(this),this.updateMaxWidth(),window.addEventListener("resize",this.onWindowResize),this.editor.on("editor:resize",this.onWindowResize)}},{key:"destroy",value:function(){var e,r;(e=this.component)===null||e===void 0||e.remove(),(r=oe(this,Zo)[Zo])===null||r===void 0||r.destroy(),window.removeEventListener("resize",this.onWindowResize),this.editor.off("editor:resize",this.onWindowResize)}}],[{key:"cardName",get:function(){return"mention"}},{key:"cardType",get:function(){return un.INLINE}},{key:"autoSelected",get:function(){return!1}},{key:"selectStyleType",get:function(){return zs.NONE}}]),t}(ni),fS={mention:{placeholder:"User name"}},hS={mention:{placeholder:"\u7528\u6237\u540D"}},vS={"en-US":fS,"zh-CN":hS},pS=["key","name"],r0=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.paserValue=function(a){if(a.isCard()&&a.attributes("name")===Ds.cardName){var o=a.attributes("value"),l=wr(o);if(!l||!l.name)return!1}return!0},n.renderTime=Date.now(),n.onAt=function(a){if(!!ge(n.editor)){if(Date.now()-n.renderTime<200)return!1;var o=n.editor.change,l=o.range.get();if(n.options.spaceTrigger){var c=l.createSelection();if(c.anchor){var d=V(c.anchor).prev(),v=d&&d.isText()?d[0].nodeValue:"";if(c.move(),v&&/[^\s@]$/.test(v))return}}if(a.preventDefault(),l.collapsed){a.preventDefault();var h=n.editor.card.insert(Ds.cardName);h.root.attributes(Id,"true"),n.editor.card.activate(h.root),l=o.range.get();var g=h.find(".data-mention-component-keyword");l.select(g,!0),l.collapse(!1),o.range.select(l)}return n.renderTime=Date.now(),!1}},n.pasteSchema=function(a){a.add({type:"inline",name:"span",attributes:{"data-type":{required:!0,value:Ds.cardName},"data-value":"*"}})},n.pasteHtml=function(a){if(!!ge(n.editor)){if(a.isElement()){var o=a.attributes(),l=o["data-type"];if(l===Ds.cardName){var c=o["data-value"],d=wr(c);return d.name?(n.editor.card.replaceNode(a,Ds.cardName,d),a.remove(),!1):void 0}}return!0}},n.parseHtml=function(a,o){var l=[];return a.find("[".concat(Gt,'="').concat(Ds.cardName,'"],[').concat(_n,'="').concat(Ds.cardName,'"]')).each(function(c){var d=V(c),v=n.editor.card.find(d),h=(v==null?void 0:v.getValue())||wr(d.attributes(er));if((h==null?void 0:h.id)&&h.name){var g='<span data-type="'.concat(Ds.cardName,'" data-value="').concat(Rs(h),'" style="color:#1890ff"></span>'),w=h.marks||[],x=V("<div>@".concat(h.name,"</div>")),_=x.first();w.forEach(function(M){var T=V(M);_=n.editor.node.wrap(_,T)}),d.empty();var E=V(g);E.append(_),o&&(E=o(E,h)),d.replaceWith(E),l.push(E)}else d.remove()}),l},n}return Be(t,[{key:"init",value:function(){this.editor.on("parse:value",this.paserValue),this.editor.on("parse:html",this.parseHtml),this.editor.on("paste:each",this.pasteHtml),this.editor.on("paste:schema",this.pasteSchema),ge(this.editor)&&this.editor.on("keydown:at",this.onAt),this.editor.language.add(vS)}},{key:"getList",value:function(){var e=[];return this.editor.card.each(function(r){if(r.name===Ds.cardName){var i=r.getValue()||{},a=i.key,o=i.name,l=Cp(i,pS);o&&a&&e.push(Ie({key:Ai(a),name:Ai(o)},l))}}),e}},{key:"execute",value:function(){}},{key:"destroy",value:function(){this.editor.off("parse:value",this.paserValue),this.editor.off("parse:html",this.parseHtml),this.editor.off("paste:each",this.pasteHtml),this.editor.off("paste:schema",this.pasteSchema),ge(this.editor)&&this.editor.off("keydown:at",this.onAt)}}],[{key:"pluginName",get:function(){return"mention"}}]),t}(Rr),kl=Mt("color"),Cd=Mt("value"),gS=function(){function b(u){Fe(this,b),this.options=void 0,this.container=void 0,Object.defineProperty(this,kl,{writable:!0,value:void 0}),Object.defineProperty(this,Cd,{writable:!0,value:void 0}),this.options=u}return Be(b,[{key:"focus",value:function(){var t,n;(t=this.container)===null||t===void 0||(n=t.find("input").get())===null||n===void 0||n.focus()}},{key:"change",value:function(){var t=this.options.onChange;t&&t(oe(this,Cd)[Cd],oe(this,kl)[kl])}},{key:"updateActive",value:function(t){var n,e=(n=this.container)===null||n===void 0?void 0:n.find("svg");e==null||e.css("display","none");var r=this.options.colors.findIndex(function(a){return a.background===t.background&&a.color===t.color});if(r>-1){var i;e==null||(i=e.eq(r))===null||i===void 0||i.css("display","block")}else oe(this,kl)[kl]=void 0}},{key:"render",value:function(t,n,e){var r=this;this.destroy(),oe(this,Cd)[Cd]=n,oe(this,kl)[kl]=e,this.container=V('<div class="data-card-status-editor'.concat(mt?" data-card-status-editor-mobile":"",'" ').concat(lt,'="').concat(Gn,'" ').concat(Dc,'="').concat(t,'"></div>'));var i=this.options,a=i.colors,o=i.onBlur,l=i.onFocus,c=i.onOk,d=V('<input value="'.concat(n,'" />'));d.on("focus",function(){l&&l()}),d.on("blur",function(){o&&o()}),d.on("input",function(h){oe(r,Cd)[Cd]=h.target.value,r.change()}),d.on(mt?"touchstart":"mousedown",function(h){}),c&&d.on("keydown",function(h){[13,27].indexOf(h.keyCode)!==-1&&c(h)}),this.container.append(d);var v=V('<div class="data-status-editor-color-panle"></div>');return a.forEach(function(h){var g=V('<span><span style="background-color:'.concat(h.background,`"><svg 
            style="fill: `).concat(h.background.toUpperCase()==="#8C8C8C"?"#FFFFFF":"#8C8C8C",`; 
            display: `).concat(h.background===e.background&&h.color===e.color?"block":"none",`;" 
            viewBox="0 0 18 18"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z" /></svg></span></span>`));g.on("mousedown",function(w){w.preventDefault(),oe(r,kl)[kl]=h,r.change()}),v.append(g)}),this.container.append(v),this.container}},{key:"destroy",value:function(){var t;(t=this.container)===null||t===void 0||t.remove();var n=this.options.onDestroy;n&&n()}}]),b}();function mS(b,u){u===void 0&&(u={});var t=u.insertAt;if(!(!b||typeof document=="undefined")){var n=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",t==="top"&&n.firstChild?n.insertBefore(e,n.firstChild):n.appendChild(e),e.styleSheet?e.styleSheet.cssText=b:e.appendChild(document.createTextNode(b))}}var bS=`.am-engine [data-card-key="status"].card-selected:not(.card-activated) [data-card-element="center"] .data-label-container::before\r
{\r
    content: "";\r
    position: absolute;\r
    top: 0;\r
    left: 0;\r
    width: 100%;\r
    height: 100%;\r
    background: #1890FF;\r
    opacity: 0.2;\r
    border-radius: 2px;\r
}\r
\r
.am-engine [data-card-key="status"].card-activated ::-moz-selection {\r
    background: transparent !important;\r
}\r
\r
.am-engine [data-card-key="status"].card-activated ::selection {\r
    background: transparent !important;\r
}\r
\r
.data-label-container {\r
    overflow: hidden;\r
    max-width: 200px;\r
    white-space: nowrap;\r
    text-overflow: ellipsis;\r
    cursor: pointer;\r
    -webkit-user-select: none;\r
       -moz-user-select: none;\r
        -ms-user-select: none;\r
            user-select: none;\r
    display: inline-block;\r
    border-radius: 4px;\r
    vertical-align: top;\r
}\r
\r
.data-label-container * {\r
    display: inline-block;\r
}\r
\r
.data-label-container .data-label-background {\r
    padding: 0 3px;\r
}\r
\r
.data-label-container.data-label-empty {\r
    opacity: 0.45;\r
}\r
\r
.data-card-status-editor {\r
    outline: none;\r
    width: 162px;\r
    border-radius: 3px 3px;\r
    position: absolute;\r
    border: 1px solid #e8e8e8;\r
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.12);\r
    z-index: 125;\r
    text-indent: 0;\r
    top:0;\r
    padding: 8px;\r
    background: #fff;\r
}\r
\r
.data-card-status-editor-mobile {\r
    width: calc(100vw - 40px);\r
}\r
  \r
.data-card-status-editor input {\r
    box-sizing: border-box;\r
    margin: 0;\r
    font-variant: tabular-nums;\r
    list-style: none;\r
    font-feature-settings: "tnum","tnum";\r
    position: relative;\r
    display: inline-block;\r
    width: 100%;\r
    min-width: 0;\r
    padding: 4px 11px;\r
    color: #595959;\r
    font-size: 14px;\r
    line-height: 24px;\r
    background-color: #fff;\r
    background-image: none;\r
    border: 1px solid #d9d9d9;\r
    border-radius: 2px;\r
    transition: all .3s;\r
}\r
\r
.data-card-status-editor input:focus\r
{\r
    border-color: #5c9dff;\r
    border-right-width: 1px!important;\r
    outline: 0;\r
    box-shadow: 0 0 0 2px rgba(52,126,255,.2)\r
}\r
\r
.data-card-status-editor-mobile input{\r
    min-width:auto;\r
}\r
\r
.data-card-status-editor .data-status-editor-color-panle {\r
    position: relative;\r
    text-align: left;\r
    text-indent: 0;\r
    display: flex;\r
    justify-content: space-between;\r
    width: 100%;\r
    height: auto;\r
    margin-top: 8px;\r
}\r
\r
.data-status-editor-color-panle > span {\r
    width: 24px;\r
    height: 24px;\r
    display: inline-block;\r
    cursor: pointer;\r
    background-color: rgb(255, 255, 255);\r
    padding: 2px;\r
    border-radius: 3px;\r
    border-width: 1px;\r
    border-style: solid;\r
    border-color: transparent;\r
    -o-border-image: initial;\r
       border-image: initial;\r
    flex: 0 0 auto;\r
}\r
\r
.data-status-editor-color-panle > span > span\r
{\r
    position: relative;\r
    width: 18px;\r
    height: 18px;\r
    display: block;\r
    border-radius: 2px;\r
    border-width: 1px;\r
    border-style: solid;\r
    border-color: transparent;\r
    -o-border-image: initial;\r
       border-image: initial;\r
}\r
\r
.data-status-editor-color-panle > span > span > svg {\r
    position: absolute;\r
    top: -1px;\r
    left: 1px;\r
    width: 12px;\r
    height: 12px;\r
}`;mS(bS);var Ja=Mt("position"),On=Mt("container"),Cf=Mt("editorContainer"),Bi=Mt("statusEditor"),bu=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),Object.defineProperty(Ye(n),Ja,{writable:!0,value:void 0}),n.defaultColors=[{background:"#FFE8E6",color:"#820014"},{background:"#FCFCCA",color:"#614700"},{background:"#E4F7D2",color:"#135200"},{background:"#E9E9E9",color:"#595959"},{background:"#D4EEFC",color:"#003A8C"},{background:"#DEE8FC",color:"#061178"}],Object.defineProperty(Ye(n),On,{writable:!0,value:void 0}),Object.defineProperty(Ye(n),Cf,{writable:!0,value:void 0}),Object.defineProperty(Ye(n),Bi,{writable:!0,value:void 0}),n.getMaxWidth=function(){var a=n.editor.block.closest(n.root);return a.get().clientWidth-4},n.onWindowResize=function(){n.updateMaxWidth()},n.updateMaxWidth=function(){var a=n.getMaxWidth();n.root.find(".data-label-container").css("max-width",Math.max(a,0)+"px")},n}return Be(t,[{key:"getColors",value:function(){var e=this.editor.plugin.findPlugin("status");return(e==null?void 0:e.options.colors)||this.defaultColors}},{key:"init",value:function(){var e=this;At(St(t.prototype),"init",this).call(this);var r=this.editor.card;oe(this,Ja)[Ja]||(oe(this,Ja)[Ja]=new Mu(this.editor)),!oe(this,Bi)[Bi]&&(oe(this,Bi)[Bi]=new gS({colors:this.getColors(),onChange:function(a,o){o&&e.setColor(o),e.setValue({text:a}),e.updateContent()},onOk:function(a){a.stopPropagation(),a.preventDefault(),r.activate(V(document.body)),r.focus(e)},onDestroy:function(){var a;(a=oe(e,Ja)[Ja])===null||a===void 0||a.destroy()}}))}},{key:"setColor",value:function(e){var r=this.editor.plugin,i=r.findMarkPlugin("backcolor");if(i){var a=i.createElement(e.background);this.executeMark(a,!0)}var o=r.findMarkPlugin("fontcolor");if(o){var l=o.createElement(e.color);this.executeMark(l,!0)}}},{key:"getColor",value:function(){var e,r=this,i,a=this.queryMarks(),o=((e=a.find(function(c){var d;return((d=r.editor.mark.findPlugin(c))===null||d===void 0?void 0:d.name)==="backcolor"}))===null||e===void 0?void 0:e.css("background-color"))||"",l=((i=a.find(function(c){var d;return((d=r.editor.mark.findPlugin(c))===null||d===void 0?void 0:d.name)==="fontcolor"}))===null||i===void 0?void 0:i.css("color"))||"";return{background:Qh(o),color:Qh(l)}}},{key:"updateContent",value:function(){var e=this;if(!!oe(this,On)[On]){var r=this.getValue(),i=r||{text:"",marks:[]},a=i.text,o=i.marks;oe(this,On)[On].removeClass("data-label-empty"),a||(a=this.editor.language.get("status").defaultValue,oe(this,On)[On].addClass("data-label-empty")),oe(this,On)[On].html(a);var l=this.getDefaultColor();this.setColor(l),(o||[]).forEach(function(c){e.executeMark(V(c),!0)})}}},{key:"getDefaultColor",value:function(){var e=this.getColors();return e.length>0?e[0]:{background:"#FFFFFF",color:"#222222"}}},{key:"getSelectionNodes",value:function(){return oe(this,On)[On]?[oe(this,On)[On]]:[]}},{key:"executeMark",value:function(e,r){var i=this,a;if(!!oe(this,On)[On]){var o=oe(this,On)[On].children();if(e)if(r){var d=this.editor.mark.findPlugin(e);(d==null?void 0:d.name)==="backcolor"&&e.addClass("data-label-background"),o.each(function(w,x){var _=o.eq(x);_&&i.editor.mark.wrapByNode(_,e)});var v=this.queryMarks().map(function(w){var x;return((x=w.clone().get())===null||x===void 0?void 0:x.outerHTML)||""});this.setValue({marks:v})}else{var h=this.editor.mark.findPlugin(e);if((h==null?void 0:h.name)==="backcolor")return;this.editor.mark.unwrapByNodes(this.queryMarks(!1),e);var g=this.queryMarks().map(function(w){var x;return((x=w.get())===null||x===void 0?void 0:x.outerHTML)||""});this.setValue({marks:g})}else{var l=this.queryMarks(!1),c=!1;this.editor.mark.unwrapByNodes(l.filter(function(w){if(c)return!0;var x=i.editor.mark.findPlugin(w);return(x==null?void 0:x.name)==="backcolor"?(c=!0,!1):!0})),this.setValue({marks:[]})}(a=oe(this,Bi)[Bi])===null||a===void 0||a.updateActive(this.getColor())}}},{key:"queryMarks",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return oe(this,On)[On]?oe(this,On)[On].allChildren().filter(function(r){return r.isElement()}).map(function(r){if(e){var i=r.clone();return i.removeClass("data-label-background"),i}return r}):[]}},{key:"focusEditor",value:function(){var e;(e=oe(this,Bi)[Bi])===null||e===void 0||e.focus()}},{key:"onActivate",value:function(e){var r;At(St(t.prototype),"onActivate",this).call(this,e),!(!ge(this.editor)||this.editor.readonly)&&(e?this.renderEditor():(r=oe(this,Bi)[Bi])===null||r===void 0||r.destroy())}},{key:"renderEditor",value:function(){var e,r;if(!!oe(this,Bi)[Bi]){var i=this.getValue();if(!(!i||!i.id)){(e=oe(this,Ja)[Ja])===null||e===void 0||e.destroy();var a=this.getDefaultColor(),o=this.getColor();oe(this,Cf)[Cf]=oe(this,Bi)[Bi].render(i.id,i.text||"",Ie(Ie({},a),o)),oe(this,On)[On]&&((r=oe(this,Ja)[Ja])===null||r===void 0||r.bind(oe(this,Cf)[Cf],oe(this,On)[On]))}}}},{key:"render",value:function(){if(oe(this,On)[On]){this.updateContent();return}return oe(this,On)[On]=V('<span class="data-label-container"></span>'),this.updateContent(),ge(this.editor)&&oe(this,On)[On].attributes("draggable","true"),oe(this,On)[On]}},{key:"didRender",value:function(){At(St(t.prototype),"didRender",this).call(this),this.updateMaxWidth(),window.addEventListener("resize",this.onWindowResize),this.editor.on("editor:resize",this.onWindowResize)}},{key:"destroy",value:function(){var e,r;(e=oe(this,Bi)[Bi])===null||e===void 0||e.destroy(),(r=oe(this,Ja)[Ja])===null||r===void 0||r.destroy(),window.removeEventListener("resize",this.onWindowResize),this.editor.off("editor:resize",this.onWindowResize)}}],[{key:"cardName",get:function(){return"status"}},{key:"cardType",get:function(){return un.INLINE}},{key:"autoSelected",get:function(){return!1}},{key:"selectStyleType",get:function(){return zs.NONE}}]),t}(ni),yS={status:{defaultValue:"SET A STATUS"}},wS={status:{defaultValue:"\u8BBE\u7F6E\u72B6\u6001"}},kS={"en-US":yS,"zh-CN":wS},xS=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.pasteSchema=function(a){a.add({type:"inline",name:"span",attributes:{"data-type":{required:!0,value:bu.cardName},"data-value":"*"}})},n.pasteHtml=function(a){if(!!ge(n.editor)){if(a.isElement()){var o=a.attributes(),l=o["data-type"];if(l===bu.cardName){var c=o["data-value"],d=wr(c);return n.editor.card.replaceNode(a,bu.cardName,d),a.remove(),!1}}return!0}},n.parseHtml=function(a,o){var l=[];return a.find("[".concat(Gt,'="').concat(bu.cardName,'"],[').concat(_n,'="').concat(bu.cardName,'"]')).each(function(c){var d=V(c),v=n.editor.card.find(d),h=(v==null?void 0:v.getValue())||wr(d.attributes(er));if(h!=null&&h.text){var g='<span data-type="'.concat(bu.cardName,'" data-value="').concat(Rs(h),'"></span>'),w=h.marks||[],x=V("<div>".concat(h.text,"</div>")),_=x.first();w.forEach(function(M){var T=V(M);_=n.editor.node.wrap(_,T)}),d.empty();var E=V(g);E.append(_),E.css({"font-weight":400,overflow:"hidden","max-width":"200px","white-space":"nowrap","border-radius":"4px",border:"2px solid transparent",padding:"0 3px","text-overflow":"ellipsis"}),o&&(E=o(E,h)),d.replaceWith(E),l.push(E)}else d.remove()}),l},n}return Be(t,[{key:"init",value:function(){this.editor.language.add(kS),this.editor.on("parse:html",this.parseHtml),this.editor.on("paste:each",this.pasteHtml),this.editor.on("paste:schema",this.pasteSchema)}},{key:"execute",value:function(){if(!!ge(this.editor)){var e=this.editor.card,r=e.insert(bu.cardName);e.activate(r.root),setTimeout(function(){r.focusEditor()},50)}}},{key:"hotkey",value:function(){return this.options.hotkey||""}},{key:"destroy",value:function(){this.editor.off("parse:html",this.parseHtml),this.editor.off("paste:each",this.pasteHtml),this.editor.off("paste:schema",this.pasteSchema)}}],[{key:"pluginName",get:function(){return"status"}}]),t}(Rr),CS=t0,sm=1/0,ES=17976931348623157e292;function _S(b){if(!b)return b===0?b:0;if(b=CS(b),b===sm||b===-sm){var u=b<0?-1:1;return u*ES}return b===b?b:0}var SS=_S,MS=SS;function TS(b){var u=MS(b),t=u%1;return u===u?t?u-t:u:0}var AS=TS,NS=AS;function DS(b){return typeof b=="number"&&b==NS(b)}var lm=DS,Ep="table-wrapper",_p="table-overflow",i0="data-table",a0="table-cols-header",o0="table-cols-header-item",s0="cols-trigger",IS="cols-addition-header",l0="table-rows-header",u0="table-rows-header-item",d0="rows-trigger",Sp="table-header",c0="table-menubar",f0="table-menubar-item",h0="table-menubar-item-input",v0="table-viewport",p0="data-table-reader",g0="table-placeholder",LS="multi-addition",m0="table-highlight",b0="table-row-delete-button",y0="table-col-delete-button",w0="table-row-add-button",k0="table-row-add-split-button",x0="table-col-add-button",C0="table-col-add-split-button",E0="table-main-content",_0="table-main-bg",qe=function(){function b(u){Fe(this,b),this.isReadonly=!1,this.table=void 0,this.table=u}return Be(b,[{key:"getEmptyCell",value:function(){return b.EmptyCell(this.isReadonly)}},{key:"renderRowsHeader",value:function(t){return"<div ".concat(lt,'="').concat(Gn,'" class="').concat(l0,'">')+'<div class="'.concat(b0,'"><span class="data-icon data-icon-delete"></span></div>')+'<div class="'.concat(w0,'"><span class="data-icon data-icon-plus"></span><div class="').concat(k0,'"></div></div>')+'<div class="'.concat(u0,`" draggable="true">
                <div class="row-dragger">
                    <span class="data-icon data-icon-drag"></span>
                    <span class="drag-info"></span>
                </div>
                <div class="`).concat(d0,`"></div>
            </div>`).repeat(t)+`
        </div>`}},{key:"renderColsHeader",value:function(t){return"<div ".concat(lt,'="').concat(Gn,'" class="').concat(a0,'">')+'<div class="'.concat(y0,'"><span class="data-icon data-icon-delete"></span></div>')+'<div class="'.concat(x0,'"><span class="data-icon data-icon-plus"></span><div class="').concat(C0,'"></div></div>')+'<div class="'.concat(o0,`" draggable="true">
            <div class="col-dragger">
                <span class="data-icon data-icon-drag"></span>
                <p class="drag-info"></p>
            </div>
            <div class="`).concat(s0,`"></div>
        </div>`).repeat(t)+`
    </div>`}},{key:"htmlEdit",value:function(t,n){var e=t.rows,r=t.cols,i=t.html,a=t.noBorder,o=t.overflow;r=r===-1/0?1:r,e=e===-1/0?1:e,r=r===1/0?10:r,e=e===1/0?10:e;var l="<td ".concat(ua,'="table-cell-selection">').concat(this.getEmptyCell(),"</td>").repeat(r),c="<tr>".concat(l,"</tr>").repeat(e),d="<col />".repeat(r),v="<colgroup>".concat(d,"</colgroup>"),h="<div ".concat(lt,'="').concat(Gn,'" class="').concat(m0,'"></div>'),g="<div ".concat(lt,'="').concat(Gn,'" class="').concat(Sp,'"><div class="').concat(Sp,'-item"></div></div>'),w="<div ".concat(lt,'="').concat(Gn,'" class="').concat(g0,'"></div>'),x=n.map(function(D){var I;if(D.split)return'<div class="split"></div>';var P=D.text;switch(D.action){case"insertColLeft":case"insertColRight":case"insertRowUp":case"insertRowDown":P=((I=P)===null||I===void 0?void 0:I.replace("$data",`<input type='text' class="`.concat(h0,'" />')))||"";break}return'<div class="'.concat(f0,'" ').concat(lt,'="').concat(Gn,'" data-action="').concat(D.action,`">
                <span class="data-icon data-icon-table-`).concat(D.icon,'"></span>').concat(P,"</div>")});if(x=["<div ".concat(lt,'="').concat(Gn,'" class="').concat(c0,'">').concat(x.join(""),"</div>")],i){var _=i.indexOf("<colgroup")>-1;if(i=Ld(i)||i,!_){var E;i=(E=i)===null||E===void 0?void 0:E.replace(/^(<table[^>]+>)/,function(D){return D+v})}var M=this.table.helper.normalize(V(i)),T=M.find("tr");e=T.length,i=M.get().outerHTML}var S=i||'<table class="'.concat(i0,'"').concat(a===!0?" data-table-no-border='true'":""," ").concat(ua,'="class">').concat(v).concat(c,"</table>");return"<div ".concat(ua,'="*" class="').concat(Ep," ").concat(o!==!1?_p:"",'" ').concat(ua,'="*">').concat(g,"<div ").concat(ua,'="*" class="').concat(v0,'">').concat(this.renderColsHeader(r)).concat(S).concat(w).concat(h,"</div>").concat(this.renderRowsHeader(e)).concat(x,"</div>")}},{key:"htmlView",value:function(t){var n=t.html,e=t.noBorder,r=t.overflow;return'<div class="'.concat(Ep," ").concat(r!==!1?_p:"",'"><div class="').concat(p0,'"').concat(e===!0?" data-table-no-border='true'":"",">").concat(Ld(n||""),"</div></div>")}}],[{key:"EmptyCell",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return'<div class="'.concat(E0,'" ').concat(ua,'="').concat(Hi,'" ').concat(Hi,'="').concat(t?"false":"true",'" ').concat(lt,'="').concat(Dd,'"><p><br /></p></div>').concat(b.CellBG)}}]),b}();qe.TABLE_WRAPPER_CLASS=".".concat(Ep);qe.TABLE_OVERFLOW_CLASS=".".concat(_p);qe.TABLE_CLASS=".".concat(i0);qe.COLS_HEADER_CLASS=".".concat(a0);qe.COLS_HEADER_ITEM_CLASS=".".concat(o0);qe.COLS_HEADER_TRIGGER_CLASS=".".concat(s0);qe.COLS_ADDITION_HEADER_CLASS=".".concat(IS);qe.ROWS_HEADER_CLASS=".".concat(l0);qe.ROWS_HEADER_ITEM_CLASS=".".concat(u0);qe.ROWS_HEADER_TRIGGER_CLASS=".".concat(d0);qe.HEADER_CLASS=".".concat(Sp);qe.MENUBAR_CLASS=".".concat(c0);qe.MENUBAR_ITEM_CLASS=".".concat(f0);qe.MENUBAR_ITEM_INPUT_CALSS=".".concat(h0);qe.VIEWPORT=".".concat(v0);qe.VIEWPORT_READER=".".concat(p0);qe.PLACEHOLDER_CLASS=".".concat(g0);qe.MULTI_ADDITION_CLASS=".".concat(LS);qe.TABLE_HIGHLIGHT_CLASS=".".concat(m0);qe.ROW_DELETE_BUTTON_CLASS=".".concat(b0);qe.COL_DELETE_BUTTON_CLASS=".".concat(y0);qe.ROW_ADD_BUTTON_CLASS=".".concat(w0);qe.COL_ADD_BUTTON_CLASS=".".concat(x0);qe.ROW_ADD_BUTTON_SPLIT_CLASS=".".concat(k0);qe.COL_ADD_BUTTON_SPLIT_CLASS=".".concat(C0);qe.TABLE_TD_CONTENT_CLASS=".".concat(E0);qe.TABLE_TD_BG_CLASS=".".concat(_0);qe.CellBG='<div class="'.concat(_0,'"><div class="table-main-border-top"></div><div class="table-main-border-right"></div><div class="table-main-border-bottom"></div><div class="table-main-border-left"></div></div>');var aa=Mt("editor"),S0=function(){function b(u){Fe(this,b),this.clipboard=void 0,Object.defineProperty(this,aa,{writable:!0,value:void 0}),oe(this,aa)[aa]=u}return Be(b,[{key:"isEmptyModelCol",value:function(t){return t&&t.isEmpty}},{key:"getTableModel",value:function(t){for(var n=[],e=t.get(),r=e.rows,i=(r==null?void 0:r.length)||0,a=0;a<i;a++)for(var o=r[a],l=o.cells,c=l.length,d=0;d<c;d++){var v=l[d],h=v.rowSpan,g=v.colSpan;h=h===void 0?1:h,g=g===void 0?1:g;var w=h>1||g>1;n[a]=n[a]||[];for(var x=d;n[a][x];)x++;if(n[a][x]={rowSpan:h,colSpan:g,isMulti:w,element:v},w)for(var _=h;_>0;){for(var E=g;E>0;){if(E!==1||_!==1){var M=a+_-1,T=x+E-1;n[M]=n[M]||[],n[M][T]={isEmpty:!0,parent:{row:a,col:x},element:null}}E--}_--}}var S=n.map(function(P){return P.length}),D=Math.max.apply(Math,Hn(S));n.forEach(function(P){if(P.length<D)for(var B=D-P.length;B--;)P.push({rowSpan:1,colSpan:1,isShadow:!0,element:null});for(var $=0;$<D;$++)P[$]||(P[$]={rowSpan:1,colSpan:1,isShadow:!0,element:null})});var I={rows:n.length,cols:D,width:e.offsetWidth,height:e.offsetHeight,table:n};return I}},{key:"normalize",value:function(t){var n=this;this.trimStartTr(t),this.fixNumberTr(t),t.addClass("data-table"),t.attributes(ua,"class");var e=t.css("width");parseInt(e)===0&&t.css("width","auto"),t.css("background-color","");var r=this.getTableModel(t),i=t.find("col");if(i.length!==0){for(var a=i.length-1;a>=0;a--){var o,l=i[a],c=(o=i.eq(a))===null||o===void 0?void 0:o.attributes("width");if(c){var d;(d=i.eq(a))===null||d===void 0||d.attributes("width",parseInt(c))}if(l.span>1)for(var v=l.span-1;v--;){var h;(h=i[a].parentNode)===null||h===void 0||h.insertBefore(i[a].cloneNode(),i[a])}}if(i=t.find("col"),i.length<r.cols)for(var g=i.length-1,w=r.cols-i.length;w--;){var x;(x=i[0].parentNode)===null||x===void 0||x.appendChild(i[g].cloneNode())}t.find("col").attributes("span",1)}else{var _=t.find("colgroup")[0];_||(_=document.createElement("colgroup")),t.prepend(_);for(var E=function(B){var $=B.find("tr")[0],q=V($).find("td"),G=[];q.each(function(z,O){var Q=q.eq(O);if(!!Q){var ie=Q.attributes("data-colwidth"),L=Q.attributes("width"),F=Q[0].colSpan;ie?ie=ie.split(","):L&&(L=parseInt(L)/F);for(var X=0;F>X;X++)ie&&ie[X]?G.push(parseInt(ie[X])):L?G.push(parseInt(L.toString())):G.push(void 0)}});var H=B.find("td");return H.removeAttributes("data-colwidth"),H.removeAttributes("width"),G}(t),M=document.createElement("col"),T=0;r.cols>T;T++){var S=M.cloneNode();E[T]&&S.setAttribute("width",(E[T]||"").toString()),_.appendChild(S)}}var D=t.get();r.table.forEach(function(B,$){D.rows[$]||D.insertRow($);for(var q=B.filter(function(H){return n.isEmptyModelCol(H)?!1:H.isShadow}),G=q.length;G--;)$===0?D.rows[$].insertCell(0):D.rows[$].insertCell()});var I=t.find("tr");I.each(function(B,$){var q,G=I.eq($);if(!!G){var H=parseInt(G.css("height"));H=H||((q=oe(n,aa)[aa].plugin.findPlugin("table"))===null||q===void 0?void 0:q.options.rowMinHeight)||0,G.css("height",H+"px")}});var P=t.find("td");return P.each(function(B,$){var q=P.eq($);if(!!q){q.attributes(ua,"table-cell-selection");var G=q.find(Nn);if(G.length===0){var H=q.html();q.empty(),q.append(qe.EmptyCell(!ge(oe(n,aa)[aa])||oe(n,aa)[aa].readonly)),G=q.find(Nn),G.html(H)}G.find("p").each(function(z){z.childNodes.length===0&&z.appendChild(document.createElement("br"))})}}),t}},{key:"trimStartTr",value:function(t){var n=t.find("tr"),e=n.eq(0);e&&e.children().length===0&&e.remove()}},{key:"fixNumberTr",value:function(t){for(var n=t.get(),e=n.rows,r=(e==null?void 0:e.length)||0,i=[],a=0,o=[],l=0,c=0,d=0,v=0;v<r;v++){for(var h=e[v],g=h.cells,w=0,x=0;x<g.length;x++){var _=g[x],E=_.rowSpan,M=_.colSpan;l+=E*M,w+=M,E>1&&(c+=(E-1)*M)}o[v]=w,v===0&&(a=w),d=Math.max(w,d)}var T=lm(l/a),S=a===d,D=T&&S;if(D){var I=0;if(o.forEach(function(F){I+=d-F}),I!==c){var P=c-I;if(lm(P/d)){for(var B=[],$=0;$<r;$++){for(var q=e[$],G=q.cells,H=$+B.length;i[H]===d;)B.push(H),H++;for(var z=0;z<G.length;z++){var O=G[z],Q=O.rowSpan,ie=O.colSpan;if(Q>1)for(var L=1;L<Q;L++)i[H+L]=(i[H+L]||0)+ie}}B.forEach(function(F){n.insertRow(F)})}}}}},{key:"fixDragEvent",value:function(t){var n,e;(n=t.dataTransfer)===null||n===void 0||n.clearData(),(e=t.dataTransfer)===null||e===void 0||e.setData("aomao",""),t.dataTransfer&&(t.dataTransfer.effectAllowed="all")}},{key:"copyCss",value:function(t,n){Ht(t)&&(t=V(t)),Ht(n)&&(n=V(n)),n.css("text-align",t.css("text-align")),n.css("vertical-align",t.css("vertical-align"));var e=t.css("background-color");e=e!=="rgba(0, 0, 0, 0)"?e:"#fff",n.css("background-color",e),n.css("color",t.css("color")),n.css("font-weight",t.css("font-weight"))}},{key:"copyTo",value:function(t,n){Ht(t)&&(t=V(t)),Ht(n)&&(n=V(n));var e=n.find(Nn);e.length===0&&(n.html(qe.EmptyCell(!ge(oe(this,aa)[aa])||oe(this,aa)[aa].readonly)),e=n.find(Nn)),e.html(Ld(t.html())),n.name==="td"&&n.find(qe.TABLE_TD_BG_CLASS).length===0&&n.append(V(qe.CellBG)),n.name==="td"&&n.attributes("data-transient-attributes","table-cell-selection")}},{key:"copyHTML",value:function(t){var n;this.clipboard={html:t,text:((n=V(t).get())===null||n===void 0?void 0:n.innerText)||""}}},{key:"getCopyData",value:function(){return this.clipboard}},{key:"trimBlankSpan",value:function(t){for(var n=t.length,e=[],r=0,i=n-1;t[r]&&t[r].tagName.toLowerCase()==="span"&&t[r].innerText.trim()==="";)r++;for(;t[i]&&t[i].tagName.toLowerCase()==="span"&&t[i].innerText.trim()==="";)i--;if(r<=i)for(var a=r;a<=i;a++)e.push(t[a]);return e.length?V(e):t}},{key:"normalizeTable",value:function(t){var n=this;this.trimStartTr(t),this.fixNumberTr(t),t.addClass("data-table");var e=t.css("width");parseInt(e)===0?t.css("width","auto"):e.endsWith("%")||t.css("width",parseInt(e,10)+"px"),t.css("background-color","");var r=this.getTableModel(t),i=t.find("col");if(i.length!==0){for(var a=i.length-1;a>=0;a--){var o,l=i[a],c=(o=i.eq(a))===null||o===void 0?void 0:o.attributes("width");if(c&&!c.endsWith("%")){var d,v=parseInt(c);v!==NaN&&((d=i.eq(a))===null||d===void 0||d.attributes("width",v))}if(l.span>1)for(var h=l.span-1;h--;){var g;(g=i[a].parentNode)===null||g===void 0||g.insertBefore(i[a].cloneNode(),i[a])}}if(i=t.find("col"),i.length<r.cols)for(var w=i.length-1,x=r.cols-i.length;x--;){var _;(_=i[0].parentNode)===null||_===void 0||_.appendChild(i[w].cloneNode())}t.find("col").attributes("span",1)}else{var E=t.find("colgroup")[0];E||(E=document.createElement("colgroup")),t.prepend(E);for(var M=function(B){var $=B.find("tr")[0],q=V($).find("td"),G=[];q.each(function(z,O){var Q=q.eq(O);if(!!Q){var ie=Q.attributes("data-colwidth"),L=Q.attributes("width"),F=Q[0].colSpan;ie?ie=ie.split(","):L&&(L=parseInt(L)/F);for(var X=0;F>X;X++)ie&&ie[X]?G.push(parseInt(ie[X])):L?G.push(parseInt(L.toString())):G.push(void 0)}});var H=B.find("td");return H.removeAttributes("data-colwidth"),H.removeAttributes("width"),G}(t),T=document.createElement("col"),S=0;r.cols>S;S++){var D=T.cloneNode();M[S]&&D.setAttribute("width",(M[S]||"").toString()),E.appendChild(D)}}var I=t.get();r.table.forEach(function(B,$){I.rows[$]||I.insertRow($);for(var q=B.filter(function(H){return H.isShadow}),G=q.length;G--;)I.rows[$].insertCell()});var P=t.find("tr");return P.each(function(B,$){var q,G=P.eq($);if(!!G){var H=parseInt(G.css("height"));H=H||((q=oe(n,aa)[aa].plugin.findPlugin("table"))===null||q===void 0?void 0:q.options.rowMinHeight)||0,G.css("height",H+"px")}}),t}}]),b}(),OS=function(b){return[{action:"cut",icon:"cut",text:b.cut},{action:"copy",icon:"copy",text:b.copy},{action:"mockPaste",icon:"paste",text:b.paste},{split:!0},{action:"insertColLeft",icon:"insert-col-left",text:b.insertColLeft},{action:"insertColRight",icon:"insert-col-right",text:b.insertColRight},{action:"insertRowUp",icon:"insert-row-up",text:b.insertRowUp},{action:"insertRowDown",icon:"insert-row-down",text:b.insertRowDown},{split:!0},{action:"mergeCell",icon:"merge-cell",text:b.mergeCell},{action:"splitCell",icon:"split-cell",text:b.splitCell},{split:!0},{action:"removeCol",icon:"remove-col",text:b.removeCol},{action:"removeRow",icon:"remove-row",text:b.removeRow},{split:!0},{action:"removeTable",icon:"remove-table",text:b.removeTable},{split:!0},{action:"clear",icon:"clear",text:b.clear}]},zS=function(b){ft(t,b);var u=ht(t);function t(n,e,r){var i;return Fe(this,t),i=u.call(this),i.editor=void 0,i.table=void 0,i.COL_MIN_WIDTH=void 0,i.ROW_MIN_HEIGHT=void 0,i.tableRoot=void 0,i.colsHeader=void 0,i.rowsHeader=void 0,i.tableHeader=void 0,i.menuBar=void 0,i.dragging=void 0,i.draggingHeader=void 0,i.changeSize=void 0,i.viewport=void 0,i.placeholder=void 0,i.contextVisible=!1,i.rowDeleteButton=void 0,i.colDeleteButton=void 0,i.colAddButton=void 0,i.colAddAlign=void 0,i.colAddButtonSplit=void 0,i.moveColIndex=-1,i.hideColAddButtonTimeount=void 0,i.rowAddButton=void 0,i.rowAddAlign=void 0,i.rowAddButtonSplit=void 0,i.moveRowIndex=-1,i.hideRowAddButtonTimeount=void 0,i.onMouseDownColsHeader=function(a){var o=V(a.target||[]).closest(qe.COLS_HEADER_TRIGGER_CLASS);if(o.length===0){a instanceof MouseEvent&&a.button===2&&i.showContextMenu(a);return}i.startChangeCol(o,a)},i.onMouseDownRowsHeader=function(a){var o=V(a.target||[]).closest(qe.ROWS_HEADER_TRIGGER_CLASS);if(o.length===0){a instanceof MouseEvent&&a.button===2&&i.showContextMenu(a);return}i.startChangeRow(o,a)},i.onClickColsHeader=function(a){var o,l=i.table.selection,c=V(a.target||[]).closest(qe.COLS_HEADER_TRIGGER_CLASS);if(!(c.length>0)){var d=V(a.target||[]).closest(qe.COLS_HEADER_ITEM_CLASS);if(d.length!==0){var v=(o=i.colsHeader)===null||o===void 0?void 0:o.find(qe.COLS_HEADER_ITEM_CLASS).toArray().findIndex(function(h){return h.equal(d)});v!==void 0&&l.selectCol(v)}}},i.onClickRowsHeader=function(a){var o,l=i.table.selection,c=V(a.target||[]).closest(qe.ROWS_HEADER_TRIGGER_CLASS);if(!(c.length>0)){var d=V(a.target||[]).closest(qe.ROWS_HEADER_ITEM_CLASS);if(d.length!==0){var v=(o=i.rowsHeader)===null||o===void 0?void 0:o.find(qe.ROWS_HEADER_ITEM_CLASS).toArray().findIndex(function(h){return h.equal(d)});v!==void 0&&l.selectRow(v)}}},i.onClickTableHeader=function(a){var o;a.preventDefault();var l=i.table.selection;if(!((o=i.tableHeader)===null||o===void 0)&&o.hasClass("selected"))l.clearSelect();else{var c=l.tableModel;if(!c)return;l.select({row:0,col:0},{row:c.rows-1,col:c.cols-1})}},i.onChangeSize=function(a){!i.dragging||(i.dragging.y>-1?i.onChangeRowHeight(a):i.dragging.x>-1&&i.onChangeColWidth(a),i.emit("sizeChanging"))},i.onChangeSizeEnd=function(a){if(!(a.type==="mouseleave"&&i.table.getCenter().contains(a.toElement))){if(i.dragging&&i.changeSize){var o=i.changeSize.trigger,l=o.width,c=o.height,d=o.element;d.removeClass("dragging"),i.dragging.x>-1&&d.css("height","".concat(c,"px")),i.dragging.y>-1&&d.css("width","".concat(l,"px")),i.dragging=void 0,i.renderRowBars(),i.emit("sizeChanged")}i.unbindChangeSizeEvent()}},i.onDragStartColsHeader=function(a){var o,l;a.stopPropagation();var c=i.table.selection,d=c.getSelectArea();if(!(!a.target||!d.allRow)){var v=V(a.target).closest(qe.COLS_HEADER_ITEM_CLASS);if(v.length!==0){var h=(o=i.colsHeader)===null||o===void 0?void 0:o.find(qe.COLS_HEADER_ITEM_CLASS).toArray().findIndex(function(w){return w.equal(v)});if(h!==void 0){var g=h;g<d.begin.col||g>d.end.col||(i.draggingHeader={element:v,minIndex:d.begin.col,maxIndex:d.end.col,count:d.end.col-d.begin.col+1},v.addClass("dragging"),v.find(".drag-info").html(i.editor.language.get("table","draggingCol").replace("$data",i.draggingHeader.count.toString())),(l=i.colsHeader)===null||l===void 0||l.addClass("dragging"),i.table.helper.fixDragEvent(a),i.bindDragColEvent())}}}},i.onDragStartRowsHeader=function(a){var o,l;a.stopPropagation();var c=i.table.selection,d=c.getSelectArea();if(!(!a.target||!d.allCol)){var v=V(a.target).closest(qe.ROWS_HEADER_ITEM_CLASS);if(v.length!==0){var h=(o=i.rowsHeader)===null||o===void 0?void 0:o.find(qe.ROWS_HEADER_ITEM_CLASS).toArray().findIndex(function(w){return w.equal(v)});if(h!==void 0){var g=h;g<d.begin.row||g>d.end.row||(i.draggingHeader={element:v,minIndex:d.begin.row,maxIndex:d.end.row,count:d.end.row-d.begin.row+1},v.addClass("dragging"),v.find(".drag-info").html(i.editor.language.get("table","draggingRow").replace("$data",i.draggingHeader.count.toString())),(l=i.rowsHeader)===null||l===void 0||l.addClass("dragging"),i.table.helper.fixDragEvent(a),i.bindDragRowEvent())}}}},i.onDragCol=function(a){var o;if(a.stopPropagation(),!(!i.draggingHeader||!a.target)&&(i.dragging===void 0&&(i.dragging={x:a.offsetX,y:a.offsetY}),a.dataTransfer&&(a.dataTransfer.dropEffect="move"),!(Math.abs(i.dragging.x-a.offsetX)<3))){i.dragging.x=a.offsetX,i.draggingHeader.element.removeClass("dragging");var l=V(a.target).closest("td"),c=V(a.target).closest(qe.COLS_HEADER_ITEM_CLASS);if(!(l.length===0&&c.length===0)){if(c.length>0){var d,v=(d=i.colsHeader)===null||d===void 0?void 0:d.find(qe.COLS_HEADER_ITEM_CLASS).toArray().findIndex(function(B){return B.equal(c)});if(v===void 0)return;var h=v,g=a.offsetX>c.get().offsetWidth/2?h+1:h;i.showPlaceHolder(g,g!==h);return}var w=(o=i.colsHeader)===null||o===void 0?void 0:o.find(qe.COLS_HEADER_ITEM_CLASS);if(!!w){var x=l.get(),_=x.colSpan,E=i.table.selection.getCellPoint(l),M=Ta(E,2);M[0];for(var T=M[1],S=T,D=0,I=0;I<_;I++){var P=w.eq(T+I).get();if(D+P.offsetWidth/2>a.offsetX){S=T+I;break}if(D+P.offsetWidth>a.offsetX){S=T+I+1;break}D+=P.offsetWidth}i.showPlaceHolder(S,S!==T)}}}},i.onDragColEnd=function(){var a,o;i.unbindDragColEvent();var l=i.draggingHeader||{},c=l.index,d=l.count,v=l.isNext;if(!(!i.draggingHeader||c===void 0||d===void 0)){var h=i.table,g=h.command,w=h.selection,x=w.getSelectArea(),_=(a=i.table.wrapper)===null||a===void 0?void 0:a.find(qe.COLS_HEADER_ITEM_CLASS);if(!!_){for(var E=[],M=x.begin.col;M<=x.end.col;M++){var T,S;E.push(((T=_.eq(M))===null||T===void 0||(S=T.get())===null||S===void 0?void 0:S.offsetWidth)||0)}g.mockCopy(),x.begin.col>c?(g.insertColAt(v?c-1:c,d,v,E,!0),w.selectCol(c,c+d-1),g.mockPaste(!0),setTimeout(function(){w.selectCol(x.begin.col+d,x.end.col+d),g.removeCol(),w.selectCol(c,c+d-1)},10)):(g.insertColAt(v?c-1:c,d,v,E,!0),w.selectCol(c,c+d-1),g.mockPaste(!0),setTimeout(function(){w.selectCol(x.begin.col,x.end.col),g.removeCol(),w.selectCol(c-d,c-1)},10)),(o=i.placeholder)===null||o===void 0||o.css("display","none"),i.draggingHeader=void 0,i.dragging=void 0}}},i.onDragRow=function(a){var o;if(a.stopPropagation(),!(!i.draggingHeader||!a.target)&&(i.dragging===void 0&&(i.dragging={x:a.offsetX,y:a.offsetY}),!(Math.abs(i.dragging.y-a.offsetY)<3))){i.dragging.y=a.offsetY,i.draggingHeader.element.removeClass("dragging");var l=V(a.target).closest("td"),c=V(a.target).closest(qe.ROWS_HEADER_ITEM_CLASS);if(!(l.length===0&&c.length===0)){if(c.length>0){var d,v=(d=i.rowsHeader)===null||d===void 0?void 0:d.find(qe.ROWS_HEADER_ITEM_CLASS).toArray().findIndex(function(P){return P.equal(c)});if(v===void 0)return;var h=v,g=a.offsetY>c.get().offsetHeight/2?h+1:h;i.showPlaceHolder(g,g!==h);return}var w=(o=i.rowsHeader)===null||o===void 0?void 0:o.find(qe.ROWS_HEADER_ITEM_CLASS);if(!!w){for(var x=l.get().rowSpan,_=i.table.selection.getCellPoint(l),E=Ta(_,1),M=E[0],T=M,S=0,D=0;D<x;D++){var I=w[M+D];if(S+I.offsetHeight/2>a.offsetY){T=M+D;break}if(S+I.offsetHeight>a.offsetY){T=M+D+1;break}S+=I.offsetHeight}i.showPlaceHolder(T,T!==M)}}}},i.onDragRowEnd=function(){var a;i.unbindDragRowEvent();var o=i.draggingHeader||{},l=o.index,c=o.count,d=o.isNext;if(!(!i.draggingHeader||l===void 0||c===void 0)){var v=i.table,h=v.command,g=v.selection,w=g.getSelectArea(),x=w.begin,_=w.end;h.mockCopy(),x.row>l?(h.insertRowAt(d?l-1:l,c,!d,!0),g.selectRow(l,l+c-1),setTimeout(function(){h.mockPaste(!0),g.selectRow(x.row+c,_.row+c),h.removeRow(),g.selectRow(l,l+c-1)},10)):(h.insertRowAt(d?l-1:l,c,!d,!0),g.selectRow(l,l+c-1),setTimeout(function(){h.mockPaste(!0),g.selectRow(x.row,_.row),h.removeRow(),g.selectRow(l-c,l-1)},10)),(a=i.placeholder)===null||a===void 0||a.css("display","none"),i.draggingHeader=void 0,i.dragging=void 0}},i.onMenuInputMousedown=function(a){a.stopPropagation()},i.handleHighlightRow=function(){var a=i.table.selection,o=a.tableModel;if(!!o){var l=Ie({},a.getSelectArea());l.allCol=!0,l.begin={row:l.begin.row,col:0},l.end={row:l.end.row,col:o.cols-1},a.showHighlight(l)}},i.handleHighlightCol=function(){var a=i.table.selection,o=a.tableModel;if(!!o){var l=Ie({},a.getSelectArea());l.allRow=!0,l.begin={row:0,col:l.begin.col},l.end={row:o.rows-1,col:l.end.col},a.showHighlight(l)}},i.handleHighlightTable=function(){var a=i.table.selection,o=a.tableModel;if(!!o){var l=Ie({},a.getSelectArea());l.allRow=!0,l.allCol=!0,l.begin={row:0,col:0},l.end={row:o.rows-1,col:o.cols-1},a.showHighlight(l)}},i.table=e,i.editor=n,i.COL_MIN_WIDTH=r.col_min_width,i.ROW_MIN_HEIGHT=r.row_min_height,i}return Be(t,[{key:"init",value:function(){var e=this.table.wrapper;!e||(this.tableRoot=e.find(qe.TABLE_CLASS),this.colsHeader=e.find(qe.COLS_HEADER_CLASS),this.rowsHeader=e.find(qe.ROWS_HEADER_CLASS),this.tableHeader=e.find(qe.HEADER_CLASS),this.viewport=e.find(qe.VIEWPORT),this.menuBar=e.find(qe.MENUBAR_CLASS),this.placeholder=e.find(qe.PLACEHOLDER_CLASS),this.renderRowBars(),this.renderColBars(),this.bindEvents())}},{key:"renderRowBars",value:function(){var e,r,i,a,o,l,c,d=this,v,h,g,w,x,_=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,E=arguments.length>1?arguments[1]:void 0,M=(e=this.tableRoot)===null||e===void 0?void 0:e.get();if(!!M){(r=this.rowDeleteButton)===null||r===void 0||r.removeAllEvents(),this.rowDeleteButton=(i=this.rowsHeader)===null||i===void 0?void 0:i.find(qe.ROW_DELETE_BUTTON_CLASS),(a=this.rowAddButton)===null||a===void 0||a.removeAllEvents(),this.rowAddButton=(o=this.rowsHeader)===null||o===void 0?void 0:o.find(qe.ROW_ADD_BUTTON_CLASS),this.rowAddButtonSplit=(l=this.rowAddButton)===null||l===void 0?void 0:l.find(qe.ROW_ADD_BUTTON_SPLIT_CLASS),(c=this.rowDeleteButton)===null||c===void 0||c.on("mouseover",function(G){return d.handleHighlightRow()}).on("mouseleave",function(G){return d.hideHighlight(G)}).on("mousedown",function(G){G.preventDefault(),d.table.command.removeRow()}),(v=this.rowAddButton)===null||v===void 0||v.on("mouseenter",function(){var G;d.hideRowAddButtonTimeount&&clearTimeout(d.hideRowAddButtonTimeount),(G=d.rowsHeader)===null||G===void 0||G.css("z-index",128)}).on("mouseleave",function(){d.hideRowAddButtonTimeount=setTimeout(function(){var G,H;(G=d.rowAddButton)===null||G===void 0||G.hide(),(H=d.rowsHeader)===null||H===void 0||H.css("z-index",1),d.moveRowIndex=-1},200)}).on("mousedown",function(G){G.preventDefault(),d.table.command.insertRowAt(d.moveRowIndex,1,d.rowAddAlign!=="down")});var T=M.rows;E=E||(T==null?void 0:T.length)||0;for(var S=(h=this.rowsHeader)===null||h===void 0?void 0:h.find(qe.ROWS_HEADER_ITEM_CLASS),D=_;D<E;D++){var I;S==null||(I=S.eq(D))===null||I===void 0||I.css("height",Xo(T[D],"height"))}var P=(g=this.rowsHeader)===null||g===void 0?void 0:g.find(qe.ROWS_HEADER_TRIGGER_CLASS),B=this.tableRoot.width(),$=((w=this.table.wrapper)===null||w===void 0?void 0:w.width())||0,q=B<$?B:$;P==null||P.css("width","".concat(q+(((x=this.rowsHeader)===null||x===void 0?void 0:x.width())||0)-1,"px"))}}},{key:"renderColBars",value:function(){var e,r,i,a,o,l,c,d=this,v,h,g,w,x,_,E,M=(e=this.tableRoot)===null||e===void 0?void 0:e.get();if(!!M){var T=tn(Xo(M,"width"));(r=this.colDeleteButton)===null||r===void 0||r.removeAllEvents(),this.colDeleteButton=(i=this.table.wrapper)===null||i===void 0?void 0:i.find(qe.COL_DELETE_BUTTON_CLASS),(a=this.colAddButton)===null||a===void 0||a.removeAllEvents(),this.colAddButton=(o=this.colsHeader)===null||o===void 0?void 0:o.find(qe.COL_ADD_BUTTON_CLASS),this.colAddButtonSplit=(l=this.colAddButton)===null||l===void 0?void 0:l.find(qe.COL_ADD_BUTTON_SPLIT_CLASS),(c=this.colDeleteButton)===null||c===void 0||c.on("mouseover",function(fe){return d.handleHighlightCol()}).on("mouseleave",function(fe){return d.hideHighlight(fe)}).on("mousedown",function(fe){fe.preventDefault(),d.table.command.removeCol()}),(v=this.colAddButton)===null||v===void 0||v.on("mouseenter",function(){d.hideColAddButtonTimeount&&clearTimeout(d.hideColAddButtonTimeount)}).on("mouseleave",function(){d.hideColAddButtonTimeount=setTimeout(function(){var fe;(fe=d.colAddButton)===null||fe===void 0||fe.hide(),d.moveColIndex=-1},200)}).on("mousedown",function(fe){fe.preventDefault(),d.moveColIndex>-1&&d.table.command.insertColAt(d.moveColIndex,1,d.colAddAlign!=="right")}),(h=this.tableRoot)===null||h===void 0||h.css("width","".concat(T,"px")),(g=this.colsHeader)===null||g===void 0||g.css("width","".concat(T,"px"));var S=(w=this.tableRoot)===null||w===void 0?void 0:w.find("col");if(!!S){var D=!0,I={},P=0,B=0;S.each(function(fe,ve){var ae=tn(V(fe).attributes("width"));ae?(I[ve]=ae,P+=ae,D=!1):B++});var $=(x=this.colsHeader)===null||x===void 0?void 0:x.find(qe.COLS_HEADER_ITEM_CLASS);if(!!$){var q=this.table.selection.tableModel;if(D){var G,H=[];q==null||(G=q.table)===null||G===void 0||G.forEach(function(fe){fe.forEach(function(ve,ae){!H[ae]&&!d.table.helper.isEmptyModelCol(ve)&&!ve.isMulti&&ve.element&&(H[ae]=tn(Xo(ve.element,"width")))})});for(var z=0,O=0,Q=0;Q<S.length;Q++)H[Q]?O+=H[Q]:z++;var ie=0;z>0&&(ie=Math.round(Math.round((T-O)/z)*1e4)/1e4);for(var L=0;L<S.length;L++){var F,X,se=H[L]||ie;(F=$.eq(L))===null||F===void 0||F.css("width",se+"px"),(X=S.eq(L))===null||X===void 0||X.attributes("width",se)}}else if(B){var Y=Math.round((T-P)/B*1e4)/1e4;S.each(function(fe,ve){var ae,J,pe=I[ve]===void 0?Y:I[ve];(ae=$.eq(ve))===null||ae===void 0||ae.css("width",pe+"px"),(J=S.eq(ve))===null||J===void 0||J.attributes("width",pe)})}else S.each(function(fe,ve){var ae,J,pe=Math.round(T*I[ve]/P*1e4)/1e4;(ae=$.eq(ve))===null||ae===void 0||ae.css("width",pe+"px"),(J=S.eq(ve))===null||J===void 0||J.attributes("width",pe)});var j=(_=this.colsHeader)===null||_===void 0?void 0:_.find(qe.COLS_HEADER_TRIGGER_CLASS);j==null||j.css("height","".concat(((q==null?void 0:q.height)||0)+(((E=this.colsHeader)===null||E===void 0?void 0:E.height())||0),"px"))}}}}},{key:"bindEvents",value:function(){var e,r,i,a,o,l,c,d,v=this,h,g,w,x,_,E;(e=this.colsHeader)===null||e===void 0||e.on(mt?"touchstart":"mousedown",this.onMouseDownColsHeader).on("click",this.onClickColsHeader).on("dragstart",this.onDragStartColsHeader),(r=this.rowsHeader)===null||r===void 0||r.on(mt?"touchstart":"mousedown",this.onMouseDownRowsHeader).on("click",this.onClickRowsHeader).on("dragstart",this.onDragStartRowsHeader),(i=this.tableHeader)===null||i===void 0||i.on("mousedown",this.onClickTableHeader),(a=this.table.wrapper)===null||a===void 0||a.on("contextmenu",function(M){return M.preventDefault()}),(o=this.tableRoot)===null||o===void 0||o.on("contextmenu",function(M){return M.preventDefault()}),(l=this.colsHeader)===null||l===void 0||l.on("contextmenu",function(M){return M.preventDefault()}),(c=this.rowsHeader)===null||c===void 0||c.on("contextmenu",function(M){return M.preventDefault()}),(d=this.tableRoot)===null||d===void 0||d.on("mousedown",function(M){return v.onTableMouseDown(M)}),(h=this.menuBar)===null||h===void 0||h.on("click",function(M){return v.handleClickMenu(M)}),(g=this.menuBar)===null||g===void 0||g.on("mouseover",function(M){return v.handleHoverMenu(M)}),(w=this.menuBar)===null||w===void 0||w.on("mouseleave",function(M){return v.hideHighlight(M)}),(x=this.viewport)===null||x===void 0||x.on(mt?"touchstart":"mousedown",function(M){var T;if(!!M.target){var S=V(M.target);if(!(!ge(v.editor)||!M.target||!(!((T=v.viewport)===null||T===void 0)&&T.equal(S)))){M.preventDefault(),M.stopPropagation();var D=v.editor.change,I=D.range.get();v.editor.card.focusPrevBlock(v.table,I,!0),v.editor.card.activate(I.startNode,Os.MOUSE_DOWN),D.range.select(I)}}}),(_=this.colsHeader)===null||_===void 0||_.on("mouseenter",function(){v.hideColAddButtonTimeount&&clearTimeout(v.hideColAddButtonTimeount)}).on("mousemove",function(M){return v.onMouseMoveColsHeader(M)}).on("mouseleave",function(){v.hideColAddButtonTimeount=setTimeout(function(){var M;(M=v.colAddButton)===null||M===void 0||M.hide()},200)}),(E=this.rowsHeader)===null||E===void 0||E.on("mouseenter",function(){v.hideRowAddButtonTimeount&&clearTimeout(v.hideRowAddButtonTimeount)}).on("mousemove",function(M){var T;v.onMouseMoveRowsHeader(M),(T=v.rowsHeader)===null||T===void 0||T.css("z-index",128)}).on("mouseleave",function(){v.hideRowAddButtonTimeount=setTimeout(function(){var M,T;(M=v.rowsHeader)===null||M===void 0||M.css("z-index",""),(T=v.rowAddButton)===null||T===void 0||T.hide()},200)})}},{key:"onTableMouseDown",value:function(e){if(!!e.target){var r=V(e.target).closest("td");r.length>0&&e.button===2&&this.table.activated?this.showContextMenu(e):this.hideContextMenu()}}},{key:"onMouseMoveColsHeader",value:function(e){var r,i;if(!(!e.target||!this.colAddButton||!this.colAddButtonSplit)){var a=V(e.target),o=a.closest(qe.COLS_HEADER_ITEM_CLASS);if(o.length!==0){var l=this.colsHeader.find(qe.COLS_HEADER_ITEM_CLASS).toArray(),c=o.width(),d=this.colAddButton.width(),v=o.get().offsetLeft,h=l.findIndex(function(_){return _.equal(o)}),g=e.offsetX>c/2||a.hasClass("cols-trigger"),w=l[l.length-1].equal(o);g&&(v+=w?c-d/2:c),this.colAddAlign=g?"left":"right",this.moveColIndex=h,(r=this.colAddButton)===null||r===void 0||r.show("flex"),this.colAddButton.css("left","".concat(v,"px")),this.colAddButton.css("z-index",128);var x=(((i=this.table.selection.tableModel)===null||i===void 0?void 0:i.height)||0)+o.height()+4;this.colAddButtonSplit.css("height","".concat(x,"px")),this.colAddButtonSplit.css("left","".concat(w&&g?d-3+"px":""))}}}},{key:"onMouseMoveRowsHeader",value:function(e){var r;if(!(!e.target||!this.rowAddButton||!this.rowAddButtonSplit)){var i=V(e.target),a=i.closest(qe.ROWS_HEADER_ITEM_CLASS);if(a.length!==0){var o=this.rowsHeader.find(qe.ROWS_HEADER_ITEM_CLASS).toArray(),l=a.height(),c=a.get().offsetTop,d=o.findIndex(function(g){return g.equal(a)}),v=e.offsetY>l/2||i.hasClass("rows-trigger");v&&(c+=l),this.moveRowIndex=d,this.rowAddButton.show("flex"),this.rowAddButton.css("top","".concat(c,"px")),this.rowAddAlign=v?"down":"up";var h=(((r=this.table.selection.tableModel)===null||r===void 0?void 0:r.width)||0)+a.width()+4;this.rowAddButtonSplit.css("width","".concat(h,"px"))}}}},{key:"activeHeader",value:function(){var e,r,i=this.table.selection.getSelectArea();this.clearActiveStatus();for(var a=(e=this.colsHeader)===null||e===void 0?void 0:e.find(qe.COLS_HEADER_ITEM_CLASS),o=(r=this.rowsHeader)===null||r===void 0?void 0:r.find(qe.ROWS_HEADER_ITEM_CLASS),l=i.begin,c=i.end,d=i.allCol,v=i.allRow,h=l.row;h<=c.row;h++)if(d){var g,w;o==null||(g=o.eq(h))===null||g===void 0||g.addClass("selected"),v&&(o==null||(w=o.eq(h))===null||w===void 0||w.addClass("no-dragger"))}for(var x=l.col;x<=c.col;x++)if(v){var _,E;a==null||(_=a.eq(x))===null||_===void 0||_.addClass("selected"),d&&(a==null||(E=a.eq(x))===null||E===void 0||E.addClass("no-dragger"))}if(d&&v){var M;(M=this.tableHeader)===null||M===void 0||M.addClass("selected")}else{var T;(T=this.tableHeader)===null||T===void 0||T.removeClass("selected")}if(d&&!v){var S,D=(S=this.tableRoot)===null||S===void 0?void 0:S.find("tr").eq(l.row);if(D){var I,P,B=D.get().offsetTop;(I=this.rowDeleteButton)===null||I===void 0||I.show("flex"),(P=this.rowDeleteButton)===null||P===void 0||P.css("top","".concat(B-this.rowDeleteButton.height(),"px"))}}else{var $;($=this.rowDeleteButton)===null||$===void 0||$.hide()}if(!d&&v){for(var q,G,H,z,O=0,Q=l.col;Q<=c.col;Q++){var ie;O+=(a==null||(ie=a.eq(Q))===null||ie===void 0?void 0:ie.width())||0}var L=(a==null||(q=a.eq(l.col))===null||q===void 0||(G=q.get())===null||G===void 0?void 0:G.offsetLeft)||0;(H=this.colDeleteButton)===null||H===void 0||H.show("flex"),(z=this.colDeleteButton)===null||z===void 0||z.css("left","".concat(L+O/2,"px"))}else{var F;(F=this.colDeleteButton)===null||F===void 0||F.hide()}}},{key:"clearActiveStatus",value:function(){var e,r,i,a=(e=this.colsHeader)===null||e===void 0?void 0:e.find(qe.COLS_HEADER_ITEM_CLASS),o=(r=this.rowsHeader)===null||r===void 0?void 0:r.find(qe.ROWS_HEADER_ITEM_CLASS);a==null||a.removeClass("selected"),a==null||a.removeClass("no-dragger"),o==null||o.removeClass("selected"),o==null||o.removeClass("no-dragger"),(i=this.tableHeader)===null||i===void 0||i.removeClass("selected")}},{key:"refresh",value:function(){this.renderColBars(),this.renderRowBars(),this.activeHeader()}},{key:"startChangeCol",value:function(e,r){var i,a,o;r.stopPropagation(),r.preventDefault();var l=e.parent(),c=l.get();this.table.selection.clearSelect(),this.dragging={x:r instanceof MouseEvent?r.clientX:r.touches[0].clientX,y:-1};var d=((i=this.colsHeader)===null||i===void 0?void 0:i.find(qe.COLS_HEADER_ITEM_CLASS).toArray().findIndex(function(v){return v.equal(l)}))||0;this.changeSize={trigger:{element:e,height:tn(Xo(e.get(),"height")),width:tn(Xo(e.get(),"width"))},element:l,width:tn(Xo(c,"width")),height:-1,index:d,table:{width:((a=this.table.selection.tableModel)===null||a===void 0?void 0:a.width)||0,height:((o=this.table.selection.tableModel)===null||o===void 0?void 0:o.height)||0}},this.bindChangeSizeEvent()}},{key:"startChangeRow",value:function(e,r){var i,a,o;r.stopPropagation(),r.preventDefault();var l=e.parent(),c=l.get();this.table.selection.clearSelect(),this.dragging={x:-1,y:r instanceof MouseEvent?r.clientY:r.touches[0].clientY};var d=((i=this.rowsHeader)===null||i===void 0?void 0:i.find(qe.ROWS_HEADER_ITEM_CLASS).toArray().findIndex(function(v){return v.equal(l)}))||0;this.changeSize={trigger:{element:e,height:tn(Xo(e.get(),"height")),width:tn(Xo(e.get(),"width"))},element:l,width:-1,height:tn(Xo(c,"height")),index:d,table:{width:((a=this.table.selection.tableModel)===null||a===void 0?void 0:a.width)||0,height:((o=this.table.selection.tableModel)===null||o===void 0?void 0:o.height)||0}},this.bindChangeSizeEvent()}},{key:"bindChangeSizeEvent",value:function(){var e,r;(e=this.colsHeader)===null||e===void 0||e.addClass("resize"),(r=this.rowsHeader)===null||r===void 0||r.addClass("resize"),document.addEventListener(mt?"touchmove":"mousemove",this.onChangeSize),document.addEventListener(mt?"touchend":"mouseup",this.onChangeSizeEnd),mt||document.addEventListener("mouseleave",this.onChangeSizeEnd)}},{key:"unbindChangeSizeEvent",value:function(){var e,r;(e=this.colsHeader)===null||e===void 0||e.removeClass("resize"),(r=this.rowsHeader)===null||r===void 0||r.removeClass("resize"),document.removeEventListener(mt?"touchmove":"mousemove",this.onChangeSize),document.removeEventListener(mt?"touchend":"mouseup",this.onChangeSizeEnd),mt||document.removeEventListener("mouseleave",this.onChangeSizeEnd)}},{key:"onChangeColWidth",value:function(e){var r,i,a,o,l;if(!(!this.dragging||!this.changeSize)){var c=(e instanceof MouseEvent?e.clientX:e.touches[0].clientX)-this.dragging.x,d=Math.max(this.COL_MIN_WIDTH,this.changeSize.width+c);c=d-this.changeSize.width;var v=this.changeSize.table.width+c;this.changeSize.element.css("width",d+"px");var h=this.changeSize.element.get();(r=this.colsHeader)===null||r===void 0||r.css("width",v+"px");var g=(i=this.viewport)===null||i===void 0?void 0:i.get(),w=h.offsetLeft+h.offsetWidth;w-g.scrollLeft+20>g.offsetWidth?g.scrollLeft=w+20-g.offsetWidth:g.scrollLeft+g.offsetWidth===g.scrollWidth&&(g.scrollLeft=Math.max(0,v+34-g.offsetWidth)),this.clearActiveStatus(),this.hideContextMenu(),this.renderRowBars(),this.renderColSplitBars(this.changeSize.element,this.changeSize.trigger.element),(a=this.tableRoot)===null||a===void 0||(o=a.find("col").eq(this.changeSize.index))===null||o===void 0||o.attributes("width",d),(l=this.tableRoot)===null||l===void 0||l.css("width","".concat(v,"px"))}}},{key:"onChangeRowHeight",value:function(e){var r,i;if(!(!this.dragging||!this.changeSize)){var a=(e instanceof MouseEvent?e.clientY:e.touches[0].clientY)-this.dragging.y,o=Math.max(this.ROW_MIN_HEIGHT,this.changeSize.height+a);a=o-this.changeSize.height,this.changeSize.element.css("height",o+"px"),this.clearActiveStatus(),this.hideContextMenu(),this.renderRowSplitBars(this.changeSize.element,this.changeSize.trigger.element),(r=this.tableRoot)===null||r===void 0||(i=r.find("tr").eq(this.changeSize.index))===null||i===void 0||i.css("height","".concat(o,"px"))}}},{key:"renderColSplitBars",value:function(e,r){var i,a=((i=this.table.selection.tableModel)===null||i===void 0?void 0:i.height)||0;r.addClass("dragging").css("height","".concat(a+e.height(),"px"))}},{key:"renderRowSplitBars",value:function(e,r){var i,a,o=(i=this.viewport)===null||i===void 0?void 0:i.get(),l=((a=this.table.selection.tableModel)===null||a===void 0?void 0:a.width)||0,c=Math.min(o.offsetWidth,l);r.addClass("dragging").css("width","".concat(c+e.width(),"px"))}},{key:"bindDragColEvent",value:function(){var e=this.table.wrapper;e==null||e.on("dragover",this.onDragCol),e==null||e.on("drop",this.onDragColEnd),e==null||e.on("dragend",this.onDragColEnd)}},{key:"unbindDragColEvent",value:function(){var e,r,i=this.table.wrapper,a=(e=this.colsHeader)===null||e===void 0?void 0:e.find(qe.COLS_HEADER_ITEM_CLASS);a==null||a.removeClass("dragging"),(r=this.colsHeader)===null||r===void 0||r.removeClass("dragging"),i==null||i.off("dragover",this.onDragCol),i==null||i.off("drop",this.onDragColEnd),i==null||i.off("dragend",this.onDragColEnd)}},{key:"bindDragRowEvent",value:function(){var e=this.table.wrapper;e==null||e.on("dragover",this.onDragRow),e==null||e.on("drop",this.onDragRowEnd),e==null||e.on("dragend",this.onDragRowEnd)}},{key:"unbindDragRowEvent",value:function(){var e,r,i=this.table.wrapper,a=(e=this.rowsHeader)===null||e===void 0?void 0:e.find(qe.ROWS_HEADER_ITEM_CLASS);a==null||a.removeClass("dragging"),(r=this.rowsHeader)===null||r===void 0||r.removeClass("dragging"),i==null||i.off("dragover",this.onDragRow),i==null||i.off("drop",this.onDragRowEnd),i==null||i.off("dragend",this.onDragRowEnd)}},{key:"showPlaceHolder",value:function(e,r){if(!!this.draggingHeader){var i=this.draggingHeader,a=i.element,o=i.minIndex,l=i.maxIndex;if(a.closest(qe.COLS_HEADER_CLASS).length>0){var c,d,v,h,g,w,x,_,E,M;if(e===this.draggingHeader.index)return;if(o<=e&&e<=l+1){var T;delete this.draggingHeader.index,delete this.draggingHeader.isNext,(T=this.placeholder)===null||T===void 0||T.css("display","none");return}this.draggingHeader.isNext=r,this.draggingHeader.index=e;var S=(c=this.colsHeader)===null||c===void 0?void 0:c.find(qe.COLS_HEADER_ITEM_CLASS);if(!S)return;var D=this.draggingHeader.index!==S.length?S.eq(this.draggingHeader.index).get().offsetLeft+2:S.eq(this.draggingHeader.index-1).get().offsetLeft+S.eq(this.draggingHeader.index-1).get().offsetWidth+2,I=(d=this.viewport)===null||d===void 0?void 0:d.get(),P=I.scrollLeft,B=I.offsetWidth;D<P&&(I.scrollLeft=D-5),D>P+B&&(I.scrollLeft=D-B+5);var $=(((v=this.table.selection.tableModel)===null||v===void 0?void 0:v.height)||0)+S.height(),q=(h=this.viewport)===null||h===void 0?void 0:h.css("padding-top"),G=((g=this.viewport)===null||g===void 0?void 0:g.css("padding-left"))||"0";(w=this.placeholder)===null||w===void 0||w.css("width","2px"),(x=this.placeholder)===null||x===void 0||x.css("height","".concat($,"px")),(_=this.placeholder)===null||_===void 0||_.css("left",D-4+tn(G)+"px"),(E=this.placeholder)===null||E===void 0||E.css("top",q),(M=this.placeholder)===null||M===void 0||M.css("display","block")}else if(a.closest(qe.ROWS_HEADER_CLASS).length>0){var H,z,O,Q,ie,L,F,X,se,Y;if(e===this.draggingHeader.index)return;if(o<=e&&e<=l+1){var j;delete this.draggingHeader.index,delete this.draggingHeader.isNext,(j=this.placeholder)===null||j===void 0||j.css("display","none");return}this.draggingHeader.index=e,this.draggingHeader.isNext=r;var fe=(H=this.rowsHeader)===null||H===void 0?void 0:H.find(qe.ROWS_HEADER_ITEM_CLASS);if(!fe)return;var ve=this.draggingHeader.index!==fe.length?fe.eq(this.draggingHeader.index).get().offsetTop+2:fe.eq(this.draggingHeader.index-1).get().offsetTop+fe.eq(this.draggingHeader.index-1).get().offsetHeight-2,ae=((z=this.table.selection.tableModel)===null||z===void 0?void 0:z.width)||0,J=(O=this.viewport)===null||O===void 0?void 0:O.css("padding-top"),pe=((Q=this.viewport)===null||Q===void 0?void 0:Q.css("padding-left"))||"0",Ee=(ie=this.colsHeader)===null||ie===void 0?void 0:ie.find(qe.COLS_HEADER_ITEM_CLASS);(L=this.placeholder)===null||L===void 0||L.css("height","2px"),(F=this.placeholder)===null||F===void 0||F.css("width","".concat(ae,"px")),(X=this.placeholder)===null||X===void 0||X.css("left",pe),(se=this.placeholder)===null||se===void 0||se.css("top",ve+tn(J||"0")+((Ee==null?void 0:Ee.height())||0)-2+"px"),(Y=this.placeholder)===null||Y===void 0||Y.css("display","block")}}}},{key:"removeRow",value:function(e){var r,i,a,o,l=(r=this.rowsHeader)===null||r===void 0?void 0:r.find(qe.ROWS_HEADER_ITEM_CLASS),c=l==null||(i=l.eq(e))===null||i===void 0?void 0:i.get();c&&((a=this.rowsHeader)===null||a===void 0||(o=a.get())===null||o===void 0||o.removeChild(c))}},{key:"removeCol",value:function(e){var r,i,a,o,l,c,d=(r=this.colsHeader)===null||r===void 0?void 0:r.find(qe.COLS_HEADER_ITEM_CLASS),v=(i=this.colsHeader)===null||i===void 0?void 0:i.get(),h=d==null||(a=d.eq(e))===null||a===void 0?void 0:a.get();!v||!h||((o=this.colsHeader)===null||o===void 0||o.css("width",v.offsetWidth-h.offsetWidth+"px"),v.removeChild(h),(l=this.tableRoot)===null||l===void 0||l.css("width",(c=this.colsHeader)===null||c===void 0?void 0:c.css("width")))}},{key:"showContextMenu",value:function(e){var r=this;if(!(!this.menuBar||!e.target||!this.table.wrapper||!this.editor.scrollNode)){e.preventDefault();var i=this.table.selection,a=this.menuBar.find(qe.MENUBAR_ITEM_CLASS);a.removeClass("disabled"),a.each(function(T){var S=V(T),D=S.attributes("data-action");if(r.getMenuDisabled(D))S.addClass("disabled");else{var I=S.find("input".concat(qe.MENUBAR_ITEM_INPUT_CALSS));if(I.length===0)return;var P=I.get();I.on("blur",function(){P.value=(parseInt(P.value,10)||1).toString()}).on("keydown",function(G){yt("enter",G)&&r.handleTriggerMenu(S)});var B=i.getSelectArea(),$=["insertColLeft","insertColRight"].indexOf(D)>-1,q=["insertRowUp","insertRowDown"].indexOf(D)>-1;$&&(P.value="".concat(B.end.col-B.begin.col+1)),q&&(P.value="".concat(B.end.row-B.begin.row+1)),I.on("mousedown",r.onMenuInputMousedown)}});var o=this.menuBar.find("div.split");o.each(function(T){for(var S=V(T),D=S.prev();D;){if(D.hasClass("split")){S.remove();break}if(!D.hasClass("disabled"))break;D=D.prev()}D||S.remove()});for(var l=V(e.target),c=l.getBoundingClientRect()||{top:0,left:0},d=l.parent(),v=0,h=0;d&&d.closest(qe.TABLE_WRAPPER_CLASS).length>0;){var g=d.getBoundingClientRect()||{top:0,left:0};v+=c.top-g.top,h+=c.left-g.left,c=g,d=d.parent()}var w=this.table.wrapper.get().getBoundingClientRect(),x=this.editor.scrollNode.getViewport();v+=e.offsetY;var _=this.menuBar.height(),E=w.top+v+_+4;if(E>x.bottom){var M=E-x.bottom;v-M<0&&w.top+v-M<x.top&&(M=w.top+v-x.top),v-=M}this.menuBar.css("left",h+e.offsetX+"px"),this.menuBar.css("top",v+"px"),this.contextVisible=!0}}},{key:"hideContextMenu",value:function(){var e,r;if(!!this.contextVisible){var i=(e=this.menuBar)===null||e===void 0?void 0:e.find(qe.MENUBAR_ITEM_CLASS);i==null||i.removeClass("disabled"),i==null||i.each(function(a){var o=V(a),l=o.find("input".concat(qe.MENUBAR_ITEM_INPUT_CALSS));l.length!==0&&l.removeAllEvents()}),this.contextVisible=!1,(r=this.menuBar)===null||r===void 0||r.css({top:"-99999px",left:"-99999px"})}}},{key:"getMenuDisabled",value:function(e){var r=this.table,i=r.selection,a=r.command;switch(e){case"cut":case"copy":return!i.selectArea||i.selectArea.count<=1;case"splitCell":return!i.hasMergeCell();case"mergeCell":return!i.selectArea;case"mockPaste":return!a.hasCopyData();case"removeCol":case"insertColLeft":case"insertColRight":return i.isColSelected();case"removeRow":case"insertRowUp":case"insertRowDown":return i.isRowSelected();default:return!1}}},{key:"handleClickMenu",value:function(e){if(!!e.target){var r=V(e.target),i=r.closest(".table-menubar-item");i.length===0||r.name==="input"||(e.stopPropagation(),this.handleTriggerMenu(i))}}},{key:"handleTriggerMenu",value:function(e){if(!e.hasClass("disabled")){var r=e.attributes("data-action"),i=e.find("input".concat(qe.MENUBAR_ITEM_INPUT_CALSS)),a=void 0;if(i.length>0){var o;a=parseInt(((o=i.get())===null||o===void 0?void 0:o.value)||"1",10)}this.table.command[r](a)}this.hideContextMenu()}},{key:"handleHoverMenu",value:function(e){if(!!e.target){var r=V(e.target).closest(".table-menubar-item");if(r.length!==0){e.stopPropagation();var i=this.table.selection;if(!r.hasClass("disabled")){var a=r.attributes("data-action");switch(a){case"removeCol":this.handleHighlightCol();break;case"removeRow":this.handleHighlightRow();break;case"removeTable":this.handleHighlightTable();break;default:i.hideHighlight()}}}}}},{key:"hideHighlight",value:function(e){e.stopPropagation(),this.table.selection.hideHighlight()}},{key:"drawBackgroundColor",value:function(e){var r=this.table,i=r.selection,a=r.helper;i.each(function(o){!a.isEmptyModelCol(o)&&o.element&&(!e||e==="transparent"?o.element.style.removeProperty("background-color"):o.element.style.backgroundColor=e)})}},{key:"setAlign",value:function(e){var r=this.table,i=r.selection,a=r.helper;i.each(function(o){!a.isEmptyModelCol(o)&&o.element&&(!e||e==="top"?o.element.style.removeProperty("vertical-align"):o.element.style.verticalAlign=e)})}},{key:"destroy",value:function(){var e,r,i,a,o,l,c,d,v,h,g,w,x;(e=this.colsHeader)===null||e===void 0||e.removeAllEvents(),(r=this.rowsHeader)===null||r===void 0||r.removeAllEvents(),(i=this.tableHeader)===null||i===void 0||i.removeAllEvents(),(a=this.table.wrapper)===null||a===void 0||a.removeAllEvents(),(o=this.tableRoot)===null||o===void 0||o.removeAllEvents(),(l=this.menuBar)===null||l===void 0||l.removeAllEvents(),(c=this.viewport)===null||c===void 0||c.removeAllEvents(),(d=this.rowDeleteButton)===null||d===void 0||d.removeAllEvents(),(v=this.colDeleteButton)===null||v===void 0||v.removeAllEvents(),(h=this.colAddButton)===null||h===void 0||h.removeAllEvents(),(g=this.colsHeader)===null||g===void 0||g.removeAllEvents(),(w=this.rowAddButton)===null||w===void 0||w.removeAllEvents(),(x=this.rowsHeader)===null||x===void 0||x.removeAllEvents()}}]),t}(rs.exports.EventEmitter2),RS=function(b){ft(t,b);var u=ht(t);function t(n,e){var r;return Fe(this,t),r=u.call(this),r.editor=void 0,r.table=void 0,r.tableRoot=void 0,r.colsHeader=void 0,r.rowsHeader=void 0,r.tableHeader=void 0,r.tableModel=void 0,r.selectArea=void 0,r.selectRange=void 0,r.dragging=void 0,r.isShift=!1,r.prevMouseDownTd=void 0,r.prevOverTd=void 0,r.highlight=void 0,r.beginAllRow=void 0,r.beginAllCol=void 0,r.onTdMouseDown=function(i){if(r.selectRange=void 0,!(!i.target||!ge(r.editor))){var a=r.editor.change,o=V(i.target),l=o.closest("td");if(l.length!==0){var c=a.range.get(),d=r.getCellPoint(l),v=Ta(d,2),h=v[0],g=v[1],w=!!l.attributes("table-cell-selection");if(r.isShift){var x={row:0,col:0};if(r.prevMouseDownTd){var _=r.getCellPoint(r.prevMouseDownTd),E=Ta(_,2),M=E[0],T=E[1];x={row:M,col:T}}else if(r.selectArea&&(x=r.selectArea.begin,r.tableModel)){var S=r.tableModel.table[x.row][x.col];!r.table.helper.isEmptyModelCol(S)&&S.element&&(r.prevMouseDownTd=V(S.element))}r.select(x,{row:h,col:g});return}else r.prevMouseDownTd=l,i instanceof MouseEvent&&i.button!==2&&r.select({row:h,col:g},{row:h,col:g});if(o.name==="td"&&(w||!c.startNode.closest("td").equal(l)||!c.endNode.closest("td").equal(l))){if(i instanceof MouseEvent&&i.button===2&&!!o.attributes("table-cell-selection"))return;i.preventDefault(),r.focusCell(l)}else o.name==="td"&&i.preventDefault();if(i instanceof MouseEvent&&i.button===2){o.attributes("table-cell-selection")&&i.preventDefault();return}else if(o.name==="td"){var D=l.find(Nn);if(D.length>0){var I=D.last();if(I){var P,B;if(!I.isBlockCard()||(((P=I.get())===null||P===void 0?void 0:P.offsetTop)||0)+(((B=I.get())===null||B===void 0?void 0:B.clientHeight)||0)>(i instanceof MouseEvent?i:i.touches[0]).clientY)return;var $=V("<p><br /></p>");D.append($);var q=r.editor.change.range.get();q.select($,!0).collapse(!1),r.editor.change.apply(q)}}}r.select({row:h,col:g},{row:h,col:g}),r.dragging={trigger:{element:l}},r.addDragEvent()}}},r.removeDragEvent=function(){var i,a,o;(i=r.tableRoot)===null||i===void 0||i.removeClass("drag-select"),(a=r.table.wrapper)===null||a===void 0||a.removeClass("drag-selecting"),(o=r.table.wrapper)===null||o===void 0||o.off(mt?"touchend":"mouseup",r.removeDragEvent).off(mt?"touchmove":"mousemove",r.onDragMove),r.dragging=void 0},r.onDragMove=function(i){if(!(!r.dragging||!i.target)){var a=V(i.target).closest("td");if(!(a.length===0||r.prevOverTd&&a.equal(r.prevOverTd)))if(r.prevOverTd=a,r.dragging.trigger.element.equal(a)){var l;(l=r.table.wrapper)===null||l===void 0||l.removeClass("drag-selecting"),r.clearSelect()}else{var o;(o=r.table.wrapper)===null||o===void 0||o.addClass("drag-selecting"),r.selectCell(r.dragging.trigger.element,a)}}},r.onShiftKeydown=function(i){!i.target||!r.tableModel||!ge(r.editor)||yt("shift",i)&&(r.isShift=!0)},r.onKeydown=function(i){if(!(!i.target||!r.tableModel||!ge(r.editor))){var a=V(i.target).closest("td");if(a.length!==0){var o=r.getCellPoint(a),l=Ta(o,2),c=l[0],d=l[1];if(!(c<0||d<0))if(yt("shift+left",i)?r.selectLeft(i,a):yt("shift+right",i)?r.selectRigth(i,a):yt("shift+up",i)?r.selectUp(i,a):yt("shift+down",i)&&r.selectDown(i,a),yt("shift",i))r.isShift=!0;else{if(r.selectRange&&(r.isShift=!1,r.selectRange=void 0),yt("tab",i)||yt("mod",i)||yt("opt",i)||yt("shift",i)||i.ctrlKey||i.metaKey||i.shiftKey||i.altKey)return;setTimeout(function(){r.clearSelect()},50)}}}},r.onShiftKeyup=function(i){r.isShift===!1&&r.selectRange&&(r.selectRange=void 0,r.clearSelect()),r.isShift=!1},r.table=e,r.editor=n,r}return Be(t,[{key:"init",value:function(){var e=this.table.wrapper;!e||(this.tableRoot=e.find(qe.TABLE_CLASS),this.colsHeader=e.find(qe.COLS_HEADER_CLASS),this.rowsHeader=e.find(qe.ROWS_HEADER_CLASS),this.tableHeader=e.find(qe.HEADER_CLASS),this.highlight=e.find(qe.TABLE_HIGHLIGHT_CLASS),this.render("init"),this.bindEvents())}},{key:"render",value:function(e){this.refreshModel();var r=this.tableModel;if(!!r){var i=this.getSelectArea(),a=i.begin,o=i.end;if(e==="mergeCell"||e==="splitCell"){var l=a.row<0?0:Math.min(a.row,r.rows-1),c=a.col<0?0:Math.min(a.col,r.cols-1),d=r.table[l][c];this.table.helper.isEmptyModelCol(d)&&(d=r.table[d.parent.row][d.parent.col]),!this.table.helper.isEmptyModelCol(d)&&d.element&&e==="mergeCell"&&(this.clearSelect(),this.selectCellRange(d.element))}else if(e==="removeRow"){var v=a.row<0?0:Math.min(a.row,r.rows-1),h=r.table[v][0];!this.table.helper.isEmptyModelCol(h)&&h.element&&this.focusCell(h.element)}else if(e==="removeCol"){var g=a.col<0?0:Math.min(a.col,r.cols-1),w=r.table[0][g];!this.table.helper.isEmptyModelCol(w)&&w.element&&this.focusCell(w.element)}else this.select(a,o);this.renderBorder()}}},{key:"renderBorder",value:function(){var e=this,r=this.tableModel;!r||r.table.forEach(function(i,a){i.forEach(function(o,l){if(!e.table.helper.isEmptyModelCol(o)){if(!o.element)return;var c=a===r.rows-1,d=l===r.cols-1;o.isMulti&&(l+o.colSpan===r.cols&&(d=!0),a+o.rowSpan===r.rows&&(c=!0)),c?o.element.classList.add("table-last-column"):o.element.classList.remove("table-last-column"),d?o.element.classList.add("table-last-row"):o.element.classList.remove("table-last-row")}})})}},{key:"bindEvents",value:function(){var e;document.addEventListener("keydown",this.onShiftKeydown),document.addEventListener("keyup",this.onShiftKeyup),(e=this.table.wrapper)===null||e===void 0||e.on(mt?"touchstart":"mousedown",this.onTdMouseDown).on("keydown",this.onKeydown)}},{key:"unbindEvents",value:function(){var e;document.removeEventListener("keydown",this.onShiftKeydown),document.removeEventListener("keyup",this.onShiftKeyup),(e=this.table.wrapper)===null||e===void 0||e.off(mt?"touchstart":"mousedown",this.onTdMouseDown).off("keydown",this.onKeydown)}},{key:"refreshModel",value:function(){!this.tableRoot||this.tableRoot.length===0||(this.tableModel=this.table.helper.getTableModel(this.tableRoot))}},{key:"each",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=this.tableModel;if(!!i){var a=this.getSelectArea(),o=a.begin,l=a.end;if(!(o.row<0||o.col<0))if(r)for(var c=l.row;c>-1&&c>=o.row;c--)for(var d=l.col;d>-1&&d>=o.col;d--){var v=i.table[c][d];e(v,c,d)}else for(var h=o.row;h>-1&&h<=l.row;h++)for(var g=o.col;g>-1&&g<=l.col;g++){var w=i.table[h][g];e(w,h,g)}}}},{key:"getCellPoint",value:function(e){var r,i,a=this;if(e.name!=="td")return[-1,-1];var o=(r=e.parent())===null||r===void 0?void 0:r.index();if(o===void 0||o<0)return[-1,-1];var l=(i=this.tableModel)===null||i===void 0?void 0:i.table[o].findIndex(function(c){var d;return e.equal((a.table.helper.isEmptyModelCol(c)?(d=a.tableModel)===null||d===void 0?void 0:d.table[c.parent.row][c.parent.col]:c).element)});return l===void 0||l<0?[-1,-1]:[o,l]}},{key:"getCellIndex",value:function(e,r){if(!this.tableModel)return 0;for(var i=this.tableModel.table[e],a=0,o=0;o<r;o++){var l=i[o];!this.table.helper.isEmptyModelCol(l)&&l.element&&a++}return a}},{key:"getSingleCell",value:function(){return this.prevMouseDownTd?this.prevMouseDownTd:null}},{key:"getSingleCellPoint",value:function(){var e=this.getSingleCell();return e?this.getCellPoint(e):[-1,-1]}},{key:"getSelectArea",value:function(){if(this.selectArea)return this.selectArea;var e=this.getSingleCellPoint();if(!this.tableModel||e[0]===-1)return{begin:{row:-1,col:-1},end:{row:-1,col:-1},count:0,allCol:!1,allRow:!1};var r=this.tableModel,i=r.cols,a=r.rows,o=r.table,l=o[e[0]][e[1]];return this.table.helper.isEmptyModelCol(l)&&(l=o[l.parent.row][l.parent.col],l.element&&(e=this.getCellPoint(V(l.element)))),{begin:{row:e[0],col:e[1]},end:{row:e[0],col:e[1]},count:e[0]===-1?0:1,allCol:i===1,allRow:a===1}}},{key:"selectCol",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e;if(!!this.tableModel){if(this.isShift){if(this.beginAllCol)e<this.beginAllCol?r=this.beginAllCol:e=this.beginAllCol;else if(this.prevMouseDownTd){var i=this.getCellPoint(this.prevMouseDownTd),a=Ta(i,2);a[0];var o=a[1];e=o,this.beginAllCol=o}else if(this.selectArea&&(e=this.selectArea.begin.col,this.tableModel)){var l=this.tableModel.table[this.selectArea.begin.row][this.selectArea.begin.col];!this.table.helper.isEmptyModelCol(l)&&l.element&&this.focusCell(l.element)}}this.select({row:0,col:e},{row:this.tableModel.rows-1,col:r})}}},{key:"selectRow",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e;if(!!this.tableModel){if(this.isShift){if(this.beginAllRow)e<this.beginAllRow?r=this.beginAllRow:e=this.beginAllRow;else if(this.prevMouseDownTd){var i=this.getCellPoint(this.prevMouseDownTd),a=Ta(i,2),o=a[0];a[1],e=o,this.beginAllRow=o}else if(this.selectArea&&(e=this.selectArea.begin.row,this.tableModel)){var l=this.tableModel.table[this.selectArea.begin.row][this.selectArea.begin.col];!this.table.helper.isEmptyModelCol(l)&&l.element&&this.focusCell(l.element)}}this.select({row:e,col:0},{row:r,col:this.tableModel.cols-1})}}},{key:"selectCell",value:function(e,r){if(!(e.name!=="td"||r.name!=="td")){var i=this.getCellPoint(e),a=this.getCellPoint(r);this.select({row:i[0],col:i[1]},{row:a[0],col:a[1]})}}},{key:"clearSelect",value:function(){this.select({row:-1,col:-1},{row:-1,col:-1})}},{key:"select",value:function(e,r){var i;if(!!this.tableModel){var a=e.row===r.row&&e.col===r.col,o=Math.min(e.row,r.row),l=Math.max(e.row,r.row),c=Math.min(e.col,r.col),d=Math.max(e.col,r.col);(i=this.tableRoot)===null||i===void 0||i.find("td[table-cell-selection]").removeAttributes("table-cell-selection");for(var v=o,h=l,g=c,w=d,x=v;x>-1&&x<=h;x++)for(var _=g;_>-1&&_<=w;_++){var E=this.tableModel.table[x][_];if(!!E)if(this.table.helper.isEmptyModelCol(E)){o>E.parent.row&&(o=E.parent.row),c>=E.parent.col&&(c=E.parent.col);var M=this.tableModel.table[E.parent.row][E.parent.col];this.table.helper.isEmptyModelCol(M)||(M.rowSpan>1&&l<M.rowSpan-1+E.parent.row&&(l=M.rowSpan-1+E.parent.row),M.colSpan>1&&d<M.colSpan-1+E.parent.col&&(d=M.colSpan-1+E.parent.col))}else this.table.helper.isEmptyModelCol(E)||(E.rowSpan>1&&l<E.rowSpan-1+x&&(l=E.rowSpan-1+x),E.colSpan>1&&d<E.colSpan-1+_&&(d=E.colSpan-1+_))}var T=0;if(o>=0&&c>=0&&l<this.tableModel.rows&&d<this.tableModel.cols)for(var S=o;S<=l;S++)for(var D=c;D<=d;D++){var I=this.tableModel.table[S][D];I&&!this.table.helper.isEmptyModelCol(I)&&(!a&&I.element&&V(I.element).attributes("table-cell-selection","true"),T++)}if(a&&e.row>-1&&e.col>-1){var P,B=this.tableModel.table[e.row][e.col];B&&!this.table.helper.isEmptyModelCol(B)&&B.element&&!(!((P=this.prevMouseDownTd)===null||P===void 0)&&P.equal(B.element))&&this.focusCell(B.element)}var $=c===0&&d===this.tableModel.cols-1,q=o===0&&l===this.tableModel.rows-1;$&&!this.beginAllRow?this.beginAllRow=o:!$&&this.beginAllRow&&(this.beginAllRow=void 0),q&&!this.beginAllCol?this.beginAllCol=c:!q&&this.beginAllCol&&(this.beginAllCol=void 0),this.selectArea=T===0||a?void 0:{begin:{row:o,col:c},end:{row:l,col:d},count:T,allCol:$,allRow:q},this.emit("select",this.selectArea)}}},{key:"focusCell",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!!ge(this.editor)){var i=this.editor.change;Ht(e)&&(e=V(e));var a=i.range.get(),o=e.find(Nn);if(o.length>0){var l;a.select(o,!0).shrinkToElementNode().shrinkToTextNode().collapse(r),setTimeout(function(){i.range.select(a)},20),(l=o.get())===null||l===void 0||l.focus(),this.prevMouseDownTd=e,this.selectCell(e,e)}}}},{key:"selectCellRange",value:function(e){var r;if(!!ge(this.editor)){var i=this.editor.change;Ht(e)&&(e=V(e));var a=i.range.get(),o=e.find(Nn);if(o.length!==0){a.select(o,!0).shrinkToElementNode();var l=o.children(),c=l.eq(0);if(l.length===1&&(c==null||(r=c.first())===null||r===void 0?void 0:r.name)==="br"){var d;a.collapse(!1),i.range.select(a),(d=o.get())===null||d===void 0||d.focus()}else i.range.select(a);this.prevMouseDownTd=e,this.selectCell(e,e)}}}},{key:"addDragEvent",value:function(){var e,r;(e=this.tableRoot)===null||e===void 0||e.addClass("drag-select"),(r=this.table.wrapper)===null||r===void 0||r.on(mt?"touchend":"mouseup",this.removeDragEvent).on(mt?"touchmove":"mousemove",this.onDragMove)}},{key:"selectLeft",value:function(e,r){var i,a,o;if(!!ge(this.editor)){var l=this.getCellPoint(r),c=Ta(l,2),d=c[0],v=c[1];if(!(d<0||v<0)){var h=((i=this.selectArea)===null||i===void 0?void 0:i.count)||0,g=this.editor.change.range.get();if(h===0){if(this.selectRange&&this.selectRange.type==="right"&&g.endOffset!==this.selectRange.startOffset)return;this.selectRange={type:"left",startOffset:g.startOffset,endOffset:g.endOffset};var w=g.startNode;if(g.startOffset!==0||w.prev())return;for(var x=w.parent();x&&!x.isEditable();){if(x.prev())return;x=x.parent()}}var _=((a=this.selectArea)===null||a===void 0?void 0:a.begin)||{row:d,col:v},E=((o=this.selectArea)===null||o===void 0?void 0:o.end)||{row:d,col:v},M=_.col!==v,T=M?_.col-1:E.col-1;T<0||(e.preventDefault(),T===v&&h===2&&(T=-1),M?this.select(Ie(Ie({},_),{},{col:T}),E):this.select(_,Ie(Ie({},E),{},{col:T})))}}}},{key:"selectRigth",value:function(e,r){var i,a,o;if(!(!ge(this.editor)||!this.tableModel)){e.stopPropagation();var l=this.getCellPoint(r),c=Ta(l,2),d=c[0],v=c[1];if(!(d<0||v<0)){var h=((i=this.selectArea)===null||i===void 0?void 0:i.count)||0,g=this.editor.change.range.get();if(h===0){var w;if(this.selectRange&&this.selectRange.type==="left"&&g.startOffset!==this.selectRange.endOffset)return;this.selectRange={type:"right",startOffset:g.startOffset,endOffset:g.endOffset};var x=g.endNode;if(x.isText()&&g.endOffset!==x.text().length)return;var _=x.children();if(x.isElement()&&g.endOffset!==_.length&&((w=x.last())===null||w===void 0?void 0:w.name)!=="br"||x.next())return;for(var E=x.parent();E&&!E.isEditable();){if(E.next())return;E=E.parent()}}var M=this.tableModel.cols,T=((a=this.selectArea)===null||a===void 0?void 0:a.begin)||{row:d,col:v},S=((o=this.selectArea)===null||o===void 0?void 0:o.end)||{row:d,col:v},D=T.col!==v,I=D?T.col+1:S.col+1;I>M-1||(e.preventDefault(),I===v&&h===2&&(I=-1),D?this.select(Ie(Ie({},T),{},{col:I}),S):this.select(T,Ie(Ie({},S),{},{col:I})))}}}},{key:"selectUp",value:function(e,r){var i,a,o;if(!(!ge(this.editor)||!this.tableModel)){var l=this.getCellPoint(r),c=Ta(l,2),d=c[0],v=c[1];if(!(d<0||v<0)){var h=((i=this.selectArea)===null||i===void 0?void 0:i.count)||0,g=this.editor.change.range.get();if(h===0){if(this.selectRange&&this.selectRange.type==="bottom"&&g.endOffset!==this.selectRange.startOffset)return;this.selectRange={type:"top",startOffset:g.startOffset,endOffset:g.endOffset};var w=g.getBoundingClientRect(),x=r.find(Nn).getBoundingClientRect();if(w.width!==0&&w.height===0&&w.top-((x==null?void 0:x.top)||0)>10)return}var _=((a=this.selectArea)===null||a===void 0?void 0:a.begin)||{row:d,col:v},E=((o=this.selectArea)===null||o===void 0?void 0:o.end)||{row:d,col:v},M=_.row!==d,T=M?_.row-1:E.row-1;e.preventDefault(),!(T<0)&&(T===d&&h===2&&(T=-1),M?this.select(Ie(Ie({},_),{},{row:T}),E):this.select(_,Ie(Ie({},E),{},{row:T})))}}}},{key:"selectDown",value:function(e,r){var i,a,o;if(!(!ge(this.editor)||!this.tableModel)){var l=this.getCellPoint(r),c=Ta(l,2),d=c[0],v=c[1];if(!(d<0||v<0)){var h=((i=this.selectArea)===null||i===void 0?void 0:i.count)||0,g=this.editor.change.range.get();if(g.shrinkToElementNode(),h===0){if(this.selectRange&&this.selectRange.type==="top"&&g.startOffset!==this.selectRange.endOffset)return;this.selectRange={type:"bottom",startOffset:g.startOffset,endOffset:g.endOffset};var w=g.getBoundingClientRect(),x=r.find(Nn).getBoundingClientRect();if(w.width!==0&&w.height===0&&((x==null?void 0:x.bottom)||0)-w.bottom>10)return}var _=this.tableModel.rows,E=((a=this.selectArea)===null||a===void 0?void 0:a.begin)||{row:d,col:v},M=((o=this.selectArea)===null||o===void 0?void 0:o.end)||{row:d,col:v},T=E.row!==d,S=T?E.row+1:M.row+1;S>_-1||(e.preventDefault(),S===d&&h===2&&(S=-1),T?this.select(Ie(Ie({},E),{},{row:S}),M):this.select(E,Ie(Ie({},M),{},{row:S})))}}}},{key:"getSelectionHtml",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,r=this.tableModel,i=this.table.helper;if(!r||!this.tableRoot)return null;var a={row:0,col:0},o={row:r.rows-1,col:r.cols-1};if(!e){var l=this.getSelectArea();a=l.begin,o=l.end}for(var c=this.tableRoot.find("col"),d=[],v=0,h=a.col;h<=o.col;h++){var g,w=(g=c.eq(h))===null||g===void 0?void 0:g.get();!w||(d.push('<col width="'.concat(w.width,'" />')),v+=parseInt(w.width))}for(var x="<colgroup>".concat(d.join(""),"</colgroup>"),_=[],E=a.row;E<=o.row;E++){for(var M=[],T=void 0,S=a.col;S<=o.col;S++){var D=r.table[E][S],I=void 0,P=void 0,B=void 0;if(!i.isEmptyModelCol(D)&&D.element&&(B=D.element.cloneNode(!0),D.element.parentElement&&(T=V(D.element.parentElement).css("height"))),!i.isEmptyModelCol(D)&&D.isMulti&&(I=Math.min(E+D.rowSpan-1,o.row)-E+1,P=Math.min(S+D.colSpan-1,o.col)-S+1),i.isEmptyModelCol(D)){var $=r.table[D.parent.row][D.parent.col];if(D.parent.row===E&&D.parent.col<a.col&&S===a.col){var q=a.col-D.parent.col;if(!i.isEmptyModelCol($)){var G;P=Math.min($.colSpan-q,o.col-a.col+1),I=$.rowSpan,B=(G=$.element)===null||G===void 0?void 0:G.cloneNode(!0)}}if(D.parent.col===S&&D.parent.row<a.row&&E===a.row){var H=a.row-D.parent.row;if(!i.isEmptyModelCol($)){var z;I=Math.min($.rowSpan-H,o.row-a.row+1),P=$.colSpan,B=(z=$.element)===null||z===void 0?void 0:z.cloneNode(!0)}}}if(B){B=B,I&&B.setAttribute("rowspan","".concat(I)),P&&B.setAttribute("colspan","".concat(P));var O=B.firstChild;if(O.classList.contains("table-main-content")){var Q=B.cloneNode(!1);Q.innerHTML=O.innerHTML,M.push(Q.outerHTML)}else M.push(B.outerHTML)}}var ie=V("<tr>".concat(M.join(""),"</tr>"));T&&ie.css("height",T),_.push(ie.get().outerHTML)}return'<table style="width:'.concat(v,'px">').concat(x).concat(_.join(""),"</table>")}},{key:"hasMergeCell",value:function(){var e=this.table,r=this.tableModel;if(!r)return!1;var i=this.getSelectArea(),a=i.begin;i.end;var o=i.count;if(o!==1)return!1;var l=r.table[a.row][a.col];return!e.helper.isEmptyModelCol(l)&&l.isMulti===!0}},{key:"isRowSelected",value:function(){return!!this.selectArea&&this.selectArea.allRow}},{key:"isColSelected",value:function(){return!!this.selectArea&&this.selectArea.allCol}},{key:"isTableSelected",value:function(){return!!this.selectArea&&this.selectArea.allCol&&this.selectArea.allRow}},{key:"showHighlight",value:function(e){var r,i,a,o,l,c,d,v=this.table.helper,h=this.tableModel;if(!!h){var g=e.begin,w=e.end,x=e.allCol,_=e.allRow;if(!(g.row<0||g.col<0)){var E=g.row,M=w.row,T=g.col,S=w.col;this.hideHighlight();for(var D=(r=this.colsHeader)===null||r===void 0?void 0:r.find(qe.COLS_HEADER_ITEM_CLASS),I=(i=this.rowsHeader)===null||i===void 0?void 0:i.find(qe.ROWS_HEADER_ITEM_CLASS),P=E;P<=M;P++)for(var B=T;B<=S;B++){var $=h.table[P][B];if(this.table.helper.isEmptyModelCol($)){g.row>$.parent.row&&(g.row=$.parent.row),g.col>=$.parent.col&&(g.col=$.parent.col);var q=h.table[$.parent.row][$.parent.col];this.table.helper.isEmptyModelCol(q)||(q.rowSpan>1&&w.row<q.rowSpan-1+$.parent.row&&(w.row=q.rowSpan-1+$.parent.row),q.colSpan>1&&w.col<q.colSpan-1+$.parent.col&&(w.col=q.colSpan-1+$.parent.col))}else this.table.helper.isEmptyModelCol($)||($.rowSpan>1&&w.row<$.rowSpan-1+P&&(w.row=$.rowSpan-1+P),$.colSpan>1&&w.col<$.colSpan-1+B&&(w.col=$.colSpan-1+B))}for(var G=0,H=0,z=g.row;z<=w.row;z++){var O=h.table[z][g.col];if(!v.isEmptyModelCol(O)&&O.element){var Q;G+=O.element.offsetHeight,I==null||(Q=I.eq(z))===null||Q===void 0||Q.addClass("active")}}for(var ie=g.col;ie<=w.col;ie++){var L=h.table[g.row][ie];if(!v.isEmptyModelCol(L)&&L.element){var F;H+=L.element.offsetWidth,D==null||(F=D.eq(ie))===null||F===void 0||F.addClass("active")}}if(w.row===h.rows-1&&w.col===h.cols-1){var X;(X=this.tableHeader)===null||X===void 0||X.addClass("active")}var se=h.table[g.row][g.col],Y=0,j=0;if(!v.isEmptyModelCol(se)&&se.element){var fe,ve=(fe=this.tableRoot)===null||fe===void 0?void 0:fe.parent(),ae=ve==null?void 0:ve.getBoundingClientRect(),J=se.element.getBoundingClientRect();Y+=J.top-((ae==null?void 0:ae.top)||0)-13,j+=J.left-((ae==null?void 0:ae.left)||0)}var pe=tn(((a=this.table.wrapper)===null||a===void 0||(o=a.find(".data-scrollbar"))===null||o===void 0?void 0:o.css("left"))||"0")+tn(((l=this.table.wrapper)===null||l===void 0?void 0:l.css("margin-left"))||"0");j+=pe;var Ee=((c=this.colsHeader)===null||c===void 0||(d=c.find(qe.COLS_HEADER_ITEM_CLASS).get())===null||d===void 0?void 0:d.offsetHeight)||0;if(Y+=Ee,G>0&&H>0){var Le,Re,Ce,ne,me,ue;if((Le=this.highlight)===null||Le===void 0||Le.css("width","".concat(H,"px")),(Re=this.highlight)===null||Re===void 0||Re.css("height","".concat(G,"px")),(Ce=this.highlight)===null||Ce===void 0||Ce.css("top","".concat(Y,"px")),(ne=this.highlight)===null||ne===void 0||ne.css("left","".concat(j,"px")),(me=this.highlight)===null||me===void 0||me.show("block"),(ue=this.table.wrapper)===null||ue===void 0||ue.addClass("data-table-highlight"),x){var Te;(Te=this.table.wrapper)===null||Te===void 0||Te.addClass("data-table-highlight-row")}if(_){var ze;(ze=this.table.wrapper)===null||ze===void 0||ze.addClass("data-table-highlight-col")}if(x&&_){var We;(We=this.table.wrapper)===null||We===void 0||We.addClass("data-table-highlight-all")}}}}}},{key:"hideHighlight",value:function(){var e,r,i,a,o,l,c,d;(e=this.highlight)===null||e===void 0||e.hide(),(r=this.colsHeader)===null||r===void 0||r.find(".active").removeClass("active"),(i=this.rowsHeader)===null||i===void 0||i.find(".active").removeClass("active"),(a=this.tableHeader)===null||a===void 0||a.removeClass("active"),(o=this.table.wrapper)===null||o===void 0||o.removeClass("data-table-highlight"),(l=this.table.wrapper)===null||l===void 0||l.removeClass("data-table-highlight-row"),(c=this.table.wrapper)===null||c===void 0||c.removeClass("data-table-highlight-col"),(d=this.table.wrapper)===null||d===void 0||d.removeClass("data-table-highlight-all")}},{key:"destroy",value:function(){this.unbindEvents()}}]),t}(rs.exports.EventEmitter2),FS=function(b){ft(t,b);var u=ht(t);function t(n,e){var r;return Fe(this,t),r=u.call(this),r.editor=void 0,r.table=void 0,r.tableCleared=!1,r.rowCleared=!1,r.colCleared=!1,r.tableRoot=void 0,r.colsHeader=void 0,r.rowsHeader=void 0,r.tableHeader=void 0,r.viewport=void 0,r.clearFormat=function(){var i=r.table,a=i.selection,o=i.helper;a.getSelectArea(),a.each(function(l){!o.isEmptyModelCol(l)&&l.element&&l.element.removeAttribute("style")}),r.emit("actioned","clearFormat")},r.hasCopyData=function(){return!!r.table.helper.getCopyData()},r.editor=n,r.table=e,r}return Be(t,[{key:"init",value:function(){var e=this.table.wrapper;!e||(this.tableRoot=e.find(qe.TABLE_CLASS),this.colsHeader=e.find(qe.COLS_HEADER_CLASS),this.rowsHeader=e.find(qe.ROWS_HEADER_CLASS),this.tableHeader=e.find(qe.HEADER_CLASS),this.viewport=e.find(qe.VIEWPORT))}},{key:"insertColAt",value:function(e,r,i,a){var o,l,c=this,d=this.table,v=d.selection,h=d.wrapper,g=v.tableModel;if(!(!h||!g||!this.tableRoot)){var w=e,x=i?"after":"before",_=h.find(qe.COLS_HEADER_ITEM_CLASS),E=(o=_.eq(w))===null||o===void 0?void 0:o.get(),M=i?w+1:w,T=h.find(qe.COLS_HEADER_CLASS),S=0;a||(a=E.offsetWidth),Array.isArray(a)?a.forEach(function(L){S+=L}):typeof a=="number"&&(S=r*a),T.css("width",T.get().offsetWidth+S+"px");var D=this.tableRoot.find("colgroup"),I=h.find("tr"),P=this.tableRoot.find("col"),B=(l=P.eq(w))===null||l===void 0?void 0:l.clone();if(!!B){for(var $=r;$>0;){var q=V(E.outerHTML);V(E)[x](q);var G=Array.isArray(a)?a[r-$]:a;q.css({width:"".concat(G,"px")});var H=B==null?void 0:B.clone();H.removeAttributes(fn),H.attributes("width",G),this.editor.nodeId.create(H);var z=P[e];x==="after"?V(z).after(H):D[0].insertBefore(H[0],z),$--}I.each(function(L,F){for(var X=v.getCellIndex(F,M),se=0;se<r;se++){var Y=L.insertCell(X);Y.innerHTML=c.table.template.getEmptyCell(),V(Y).attributes(ua,"table-cell-selection")}});for(var O=arguments.length,Q=new Array(O>4?O-4:0),ie=4;ie<O;ie++)Q[ie-4]=arguments[ie];this.emit.apply(this,["actioned","insertCol"].concat(Q)),v.selectArea&&v.selectCol(e,e+r-1)}}}},{key:"insertCol",value:function(e){var r,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,a=this.table,o=a.selection,l=a.wrapper,c=o.tableModel;if(!(!l||!c)){var d=o.getSelectArea(),v=e==="left",h=e==="end"||!e,g=l.find(qe.COLS_HEADER_ITEM_CLASS),w=c.cols-1;h||(w=v?d.begin.col:d.end.col);var x=v?w-1:w+1;x<0?(x=0,v=!1):!v&&w===c.cols-1&&(x--,v=!0);for(var _=(r=g.eq(w))===null||r===void 0?void 0:r.get().offsetWidth,E=arguments.length,M=new Array(E>2?E-2:0),T=2;T<E;T++)M[T-2]=arguments[T];if(this.insertColAt.apply(this,[x,i,v,_].concat(M)),h){var S,D=(S=this.viewport)===null||S===void 0?void 0:S.get();if(!D)return;D.scrollLeft=D.scrollWidth-D.offsetWidth}}}},{key:"removeCol",value:function(){var e=this,r=this.table,i=r.selection,a=r.conltrollBar,o=r.helper,l=i.tableModel;if(!(!l||!this.tableRoot)){var c=l.table,d=Ie({},i.getSelectArea());i.each(function(S){o.isEmptyModelCol(S)||(d.end.col+=S.colSpan-1)});var v=d.end.col-d.begin.col+1,h=this.tableRoot.find("colgroup"),g=this.tableRoot.find("tr"),w=h.find("col");if(d.allCol){this.removeTable();return}for(var x=d.end.col;x>=d.begin.col;x--){var _;a.removeCol(x),(_=w.eq(x))===null||_===void 0||_.remove()}c.forEach(function(S,D){for(var I=d.end.col;I>=d.begin.col;I--){var P=S[I];if(o.isEmptyModelCol(P)){var B=c[P.parent.row][P.parent.col];if(!o.isEmptyModelCol(B)&&P.parent.col<d.begin.col){var $=Math.min(v,P.parent.col+B.colSpan-d.begin.col);B.element&&(B.element.colSpan=B.colSpan-$)}continue}else{var q;if(P.isMulti){var G=I+P.colSpan-1>d.end.col,H=d.end.col+1-I;if(G){for(var z,O,Q=0,ie=0;ie<=d.end.col;ie++)o.isEmptyModelCol(S[ie])||Q++;var L=(z=g.eq(D))===null||z===void 0||(O=z.get())===null||O===void 0?void 0:O.insertCell(Q);if(!L)return;L.setAttribute(ua,"table-cell-selection"),L.innerHTML=e.table.template.getEmptyCell(),L.colSpan=P.colSpan-H,L.rowSpan=P.rowSpan}}(q=P.element)===null||q===void 0||q.remove()}}});for(var E=arguments.length,M=new Array(E),T=0;T<E;T++)M[T]=arguments[T];this.emit.apply(this,["actioned","removeCol"].concat(M))}}},{key:"insertColLeft",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.insertCol("left",e)}},{key:"insertColRight",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.insertCol("right",e)}},{key:"insertRowAt",value:function(e,r,i){var a=this,o=this.table,l=o.wrapper,c=o.selection,d=o.helper,v=c.tableModel;if(!(!l||!v)){var h=i?"after":"before",g=e,w=l.find(qe.ROWS_HEADER_ITEM_CLASS),x=w[g],_=i?g:g+1,E=[],M=v.table[g];M.forEach(function(B,$){if(!d.isEmptyModelCol(B)&&B.isMulti){!i&&B.rowSpan>1&&_<=g+B.rowSpan-1?B.element.rowSpan=B.rowSpan+r:E.push({tdBase:B.element});return}if(d.isEmptyModelCol(B)){var q=v.table[B.parent.row][B.parent.col];!d.isEmptyModelCol(q)&&B.parent.row<_&&B.parent.row+q.rowSpan-1>=_?q.element.rowSpan=q.rowSpan+r:!d.isEmptyModelCol(q)&&B.parent.row<g&&B.parent.col===$&&E.push({tdBase:q.element});return}E.push({tdBase:B.element})});for(var T=r,S=function(){var $,q,G=($=a.tableRoot)===null||$===void 0||(q=$.get())===null||q===void 0?void 0:q.insertRow(_);!G||(E.forEach(function(H){var z=G.insertCell();z.setAttribute(ua,"table-cell-selection"),z.innerHTML=a.table.template.getEmptyCell(),z.colSpan=H.tdBase.colSpan}),V(x)[h](V(x.outerHTML)),T--)};T>0;)S();for(var D=arguments.length,I=new Array(D>3?D-3:0),P=3;P<D;P++)I[P-3]=arguments[P];this.emit.apply(this,["actioned","insertRow"].concat(I)),c.selectArea&&c.selectRow(e,e+r-1)}}},{key:"insertRow",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,i=this.table,a=i.selection,o=i.helper,l=a.tableModel;if(!!l){var c=a.getSelectArea(),d=e==="up",v=e==="end"||!e,h=l.rows-1;if(!v){var g=c.end.row;a.each(function(M){o.isEmptyModelCol(M)||(g+=M.rowSpan-1)}),h=d?c.begin.row:g}for(var w=h,x=arguments.length,_=new Array(x>2?x-2:0),E=2;E<x;E++)_[E-2]=arguments[E];this.insertRowAt.apply(this,[w,r,d].concat(_))}}},{key:"insertRowUp",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.insertRow("up",e)}},{key:"insertRowDown",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.insertRow("down",e)}},{key:"removeRow",value:function(){var e=this,r=this.table,i=r.selection,a=r.conltrollBar,o=r.helper,l=i.tableModel;if(!(!l||!this.tableRoot)){var c=l.table,d=Ie({},i.getSelectArea()),v=d.begin,h=d.end;i.each(function(I){o.isEmptyModelCol(I)||(h.row+=I.rowSpan-1)});var g=h.row-v.row+1,w=this.tableRoot.find("tr");if(d.allRow){this.removeTable();return}for(var x=function(P){var B=c[P];B.forEach(function($,q){if(!o.isEmptyModelCol($)&&$.isMulti&&$.rowSpan>1&&P+$.rowSpan-1>h.row){var G=i.getCellIndex(h.row+1,q),H=w[h.row+1].insertCell(G),z=h.row-P+1;H.setAttribute(ua,"table-cell-selection"),H.innerHTML=e.table.template.getEmptyCell(),H.colSpan=$.colSpan,H.rowSpan=$.rowSpan-z}if(o.isEmptyModelCol($)){var O=c[$.parent.row][$.parent.col];if(!o.isEmptyModelCol(O)&&$.parent.row<v.row){var Q=Math.min(g,$.parent.row+O.rowSpan-v.row);O.element.rowSpan=O.rowSpan-Q}}})},_=v.row;_<=h.row;_++)x(_);for(var E=h.row;E>=v.row;E--){var M;(M=this.tableRoot.get())===null||M===void 0||M.deleteRow(E),a.removeRow(E)}for(var T=arguments.length,S=new Array(T),D=0;D<T;D++)S[D]=arguments[D];this.emit.apply(this,["actioned","removeRow"].concat(S))}}},{key:"removeTable",value:function(){ge(this.editor)||this.emit("tableRemoved"),this.editor.card.remove(this.table.id)}},{key:"copy",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,r=this.table,i=r.selection,a=r.helper,o=i.getSelectionHtml(e);!o||(this.editor.clipboard.copy(V(o)[0]),a.copyHTML(o))}},{key:"mockCopy",value:function(){var e=this.table,r=e.selection,i=e.helper,a=r.getSelectionHtml();!a||i.copyHTML(a)}},{key:"shortcutCopy",value:function(e){var r,i,a,o=this.table,l=o.selection,c=o.helper,d=l.getSelectionHtml();!d||((r=e.clipboardData)===null||r===void 0||r.clearData(),(i=e.clipboardData)===null||i===void 0||i.setData("text/plain",V(d).html()),(a=e.clipboardData)===null||a===void 0||a.setData("text/html",d),c.copyHTML(d),e.preventDefault())}},{key:"cut",value:function(){this.copy(),this.clear()}},{key:"shortcutCut",value:function(e){this.shortcutCopy(e),this.clear()}},{key:"clear",value:function(){var e=this,r=this.table,i=r.selection,a=r.helper,o=i.getSelectArea();if(o.allCol&&o.allRow){if(this.tableCleared){this.removeTable(),this.tableCleared=!1;return}this.tableCleared=!0}if(o.allRow){if(this.rowCleared){this.removeRow(),this.rowCleared=!1;return}this.rowCleared=!0}if(o.allCol){if(this.colCleared){this.removeCol(),this.colCleared=!1;return}this.colCleared=!0}i.each(function(l){!a.isEmptyModelCol(l)&&l.element&&(l.element.innerHTML=e.table.template.getEmptyCell())}),this.emit("actioned","clear")}},{key:"mockPaste",value:function(){var e=this.table.helper.getCopyData();if(!!e){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];this.paste.apply(this,[e].concat(i))}}},{key:"shortcutPaste",value:function(e){e.preventDefault(),e.stopPropagation();var r=this.editor.clipboard.getData(e);this.paste(r)}},{key:"paste",value:function(e){var r=this.table,i=r.selection,a=r.helper,o=i.tableModel;if(!!o){var l=i.getSelectArea(),c=l.begin,d=l.end,v=c.row===d.row&&c.col===d.col,h=e.html;if(e.text,!!h){var g=this.editor,w=g.schema,x=g.conversion,_=new _o(h,this.editor).toValue(w,x),E=a.trimBlankSpan(V(_));this.editor.nodeId.generateAll(E,!0);for(var M=arguments.length,T=new Array(M>1?M-1:0),S=1;S<M;S++)T[S-1]=arguments[S];if(E.name==="table"){a.normalizeTable(E);var D=a.getTableModel(E),I=D.rows,P=D.cols,B=D.table[0][0],$=o.table[c.row][c.col];if(a.isEmptyModelCol(B)||a.isEmptyModelCol($))return;var q=B.rowSpan,G=B.colSpan,H=q===I&&G===P;if(H&&!l&&B.element){a.copyTo(B.element,$.element),this.emit.apply(this,["actioned","paste"].concat(T));return}if(v){if(P+c.col>o.cols){var z=P+c.col-o.cols;this.insertCol("end",z,!0)}if(I+c.row>o.rows){var O=I+c.row-o.rows;this.insertRow("end",O,!0)}i.select(c,{row:c.row+I-1,col:c.col+P-1})}var Q=i.getSelectArea();T[0]||this.splitCell(!0),i.each(function(ie,L,F){var X=(L-Q.begin.row)%I,se=(F-Q.begin.col)%P,Y=D.table[X][se];if(!!Y){if(!a.isEmptyModelCol(Y)&&Y.isMulti&&!a.isEmptyModelCol(ie)){var j=ie.element;j.rowSpan=Math.min(Y.rowSpan,Q.end.row-L+1),j.colSpan=Math.min(Y.colSpan,Q.end.col-F+1),a.copyTo(Y.element,j);return}if(a.isEmptyModelCol(Y)){if(!a.isEmptyModelCol(ie)){var fe;(fe=ie.element)===null||fe===void 0||fe.remove()}return}Y.element&&!a.isEmptyModelCol(ie)&&ie.element&&a.copyTo(Y.element,ie.element)}})}else this.mergeCell(!0);this.emit.apply(this,["actioned","paste"].concat(T))}}}},{key:"mergeCell",value:function(){var e=this.table,r=e.selection,i=e.helper,a=r.selectArea,o=r.tableModel;if(!(!a||!o)){var l=a.begin,c=a.end,d=c.row-l.row+1,v=c.col-l.col+1,h=[],g=null;if(this.splitCell(),r.select(l,c),r.each(function(T,S,D){if(!i.isEmptyModelCol(T)){if(D===l.col&&S===l.row){g=T.element,g.rowSpan=d,g.colSpan=v;return}T.element&&(T.element.innerText.trim()!==""&&h.unshift(V(T.element).find(qe.TABLE_TD_CONTENT_CLASS).html()),T.element.remove())}}),g){var w=V(g),x=w.find(qe.TABLE_TD_CONTENT_CLASS);x.html(x.html()+h.join(""));for(var _=arguments.length,E=new Array(_),M=0;M<_;M++)E[M]=arguments[M];this.emit.apply(this,["actioned","mergeCell"].concat(E))}}}},{key:"splitCell",value:function(){var e=this,r=this.table,i=r.selection,a=r.helper,o=i.tableModel;if(!(!o||!this.tableRoot)){var l=this.tableRoot.find("tr");i.each(function(h,g,w){if(!a.isEmptyModelCol(h))for(var x=g+h.rowSpan,_=w+h.colSpan,E=x-1;E>=g;E--){E>=l.length&&e.insertRowAt(g,1);for(var M=E>=l.length?e.tableRoot.find("tr")[E]:l[E],T=_-1;T>=w;T--){var S=o.table[E][T];if(!a.isEmptyModelCol(S)&&S.isMulti)S.element=S.element,S.element.colSpan=1,S.element.rowSpan=1;else if(a.isEmptyModelCol(S)){var D=i.getCellIndex(E,T),I=M.insertCell(D);e.editor.nodeId.generate(I),I.setAttribute(ua,"table-cell-selection"),I.innerHTML=e.table.template.getEmptyCell()}}}});for(var c=arguments.length,d=new Array(c),v=0;v<c;v++)d[v]=arguments[v];this.emit.apply(this,["actioned","splitCell"].concat(d))}}}]),t}(rs.exports.EventEmitter2),Da=function b(){Fe(this,b)};Da.colors=void 0;Da._map=void 0;Da.getStroke=void 0;Da.getColors=void 0;Da.colors=[["#000000","#262626","#595959","#8C8C8C","#BFBFBF","#D9D9D9","#E9E9E9","#F5F5F5","#FAFAFA","#FFFFFF"],["#F5222D","#FA541C","#FA8C16","#FADB14","#52C41A","#13C2C2","#1890FF","#2F54EB","#722ED1","#EB2F96"],["#FFE8E6","#FFECE0","#FFEFD1","#FCFCCA","#E4F7D2","#D3F5F0","#D4EEFC","#DEE8FC","#EFE1FA","#FAE1EB"],["#FFA39E","#FFBB96","#FFD591","#FFFB8F","#B7EB8F","#87E8DE","#91D5FF","#ADC6FF","#D3ADF7","#FFADD2"],["#FF4D4F","#FF7A45","#FFA940","#FFEC3D","#73D13D","#36CFC9","#40A9FF","#597EF7","#9254DE","#F759AB"],["#CF1322","#D4380D","#D46B08","#D4B106","#389E0D","#08979C","#096DD9","#1D39C4","#531DAB","#C41D7F"],["#820014","#871400","#873800","#614700","#135200","#00474F","#003A8C","#061178","#22075E","#780650"]];Da._map=function(){for(var b={},u=Da.colors,t=0,n=u.length;t<n;t++)for(var e=u[t],r=0,i=e.length;r<i;r++){var a=u[t][r];b[a]={y:t,x:r}}return b}();Da.getStroke=function(b){var u=Da._map[b];return u&&(u.y===2||u.y===3&&u.x>2&&u.x<5)?this.colors[4][u.x]:b};Da.getColors=function(){return this.colors};var Ed=Mt("editor"),Ko=Mt("options"),oa=Mt("color"),sa=Mt("button"),Ef=Mt("cardId"),Pi=Mt("container"),_d=Mt("position"),BS=function(){function b(u,t,n){var e=this;Fe(this,b),Object.defineProperty(this,Ed,{writable:!0,value:void 0}),Object.defineProperty(this,Ko,{writable:!0,value:void 0}),Object.defineProperty(this,oa,{writable:!0,value:void 0}),Object.defineProperty(this,sa,{writable:!0,value:void 0}),Object.defineProperty(this,Ef,{writable:!0,value:void 0}),Object.defineProperty(this,Pi,{writable:!0,value:void 0}),Object.defineProperty(this,_d,{writable:!0,value:void 0}),this.windowClick=function(r){var i=r.target;!i||V(i).closest(".data-table-color-tool,.table-color-dropdown-arrow").length===0&&e.remove()},oe(this,Ed)[Ed]=u,oe(this,Ef)[Ef]=t,oe(this,Ko)[Ko]=n,oe(this,_d)[_d]=new Mu(oe(this,Ed)[Ed]),oe(this,oa)[oa]=n.defaultColor||"transparent",oe(this,sa)[sa]=V(`<div class="table-color-dropdown-trigger">
        <button class="table-color-dropdown-button-text">
            <svg width="16px" height="16px" viewBox="0 0 16 16" style="margin-bottom: `.concat(oe(this,oa)[oa]==="transparent"?-5:-3,`">
                <g ="none" strokeWidth="1" fill="none" fillRule="evenodd">
                    <path d="M11.9745711,7.921875 C11.9745711,7.921875 13.2147672,9.2863447 13.2147672,10.1226326 C13.2147672,10.8142992 12.6566789,11.3802083 11.9745711,11.3802083 C11.2924632,11.3802083 10.734375,10.8142992 10.734375,10.1226326 C10.734375,9.2863447 11.9745711,7.921875 11.9745711,7.921875 Z M9.07958999,6.47535893 L6.28501575,3.68078468 L3.4904415,6.47535893 L9.07958999,6.47535893 Z M5.3326566,3.04215357 L4.28223263,1.9917296 C4.22692962,1.93642659 4.22692962,1.84676271 4.28223263,1.7914597 L5.03228902,1.0414033 C5.08759203,0.986100299 5.17725591,0.986100299 5.23255892,1.0414033 L6.4546098,2.26345418 C6.46530408,2.27146914 6.4755605,2.28033918 6.48528564,2.29006432 L10.4848531,6.28963174 C10.5954591,6.40023775 10.5954591,6.57956552 10.4848531,6.69017153 L6.4838816,10.691143 C6.37327559,10.801749 6.19394782,10.801749 6.08334181,10.691143 L2.08377439,6.69157557 C1.97316838,6.58096956 1.97316838,6.40164179 2.08377439,6.29103578 L5.3326566,3.04215357 Z" fill="#595959"/>
                    <rect stroke="`).concat(Da.getStroke(oe(this,oa)[oa]),'" fill="').concat(oe(this,oa)[oa],`" strokeWidth="0.5" x="2" y="12.75" width="12" height="1.5" rx="0.125" />
                </g>
            </svg>
        </button>
        <button class="table-color-dropdown-arrow">
            <span class="table-color-dropdown-empty"></span>
            <span class="data-icon data-icon-arrow"></span>
        </button>
        </div>`)),oe(this,sa)[sa].find(".table-color-dropdown-arrow").on("mousedown",function(r){r.preventDefault(),oe(e,Pi)[Pi]!==void 0&&oe(e,Pi)[Pi].length>0?e.remove():e.render()}),oe(this,sa)[sa].find(".table-color-dropdown-button-text").on("mousedown",function(r){r.preventDefault();var i=oe(e,Ko)[Ko].onChange;i&&i(oe(e,oa)[oa])})}return Be(b,[{key:"getButton",value:function(){return oe(this,sa)[sa]}},{key:"select",value:function(t){var n=Da.getStroke(t),e=oe(this,sa)[sa].find("rect");e.attributes("stroke",n),e.attributes("fill",t),oe(this,sa)[sa].find("svg").css("margin-bottom",t==="transparent"?-5:-3)}},{key:"change",value:function(t){oe(this,oa)[oa]=t,this.select(t);var n=oe(this,Ko)[Ko].onChange;n&&n(t)}},{key:"toState",value:function(t,n){var e=t.hex?to(t.hex):to(t),r=e.toHsl(),i=e.toHsv(),a=e.toRgb(),o=e.toHex();r.s===0&&(r.h=n||0,i.h=n||0);var l=o==="000000"&&a.a===0;return{hsl:r,hex:l?"transparent":"#".concat(o),rgb:a,hsv:i,oldHue:t.h||n||r.h,source:t.source}}},{key:"render",value:function(){var t=this,n;oe(this,Pi)[Pi]=V('<div class="data-table-color-tool'.concat(mt?" data-table-color-tool-mobile":"",'" ').concat(lt,'="').concat(Gn,'" ').concat(Dc,'="').concat(oe(this,Ef)[Ef],'"></div>'));var e=V('<div class="data-table-color-tool-panle"></div>'),r=oe(this,Ko)[Ko].colors,i=function(d,v){var h=t.toState(d.color||"#FFFFFF"),g=["#ffffff","#fafafa","transparent"].indexOf(h.hex)>=0,w=V('<span class="data-table-color-tool-item'.concat(g?" data-table-color-tool-border":"",'"><span style="background-color:').concat(d.color).concat(d.border?";".concat(g?"":"border:1px solid ".concat(d.border)):"",`"><svg
            style="fill: `).concat(d.color.toUpperCase()==="#8C8C8C"?"#FFFFFF":"#8C8C8C",`;
            display: `).concat(d.color===oe(t,oa)[oa]&&v!==!1?"block":"none",`;"
            viewBox="0 0 18 18"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z" /></svg></span></span>`));return w.on("mousedown",function(x){x.preventDefault(),x.stopPropagation(),e.find("svg").each(function(_){_.style.display="none"}),v!==!1&&w.find("svg").css("display","block"),t.change(d.color)}),w},a=V('<div class="data-table-color-tool-group data-table-color-tool-default"></div>'),o=i({color:"transparent"},!1);a.append(o),a.on("mousedown",function(c){c.preventDefault(),e.find("svg").each(function(d){d.style.display="none"}),t.change("transparent")});var l=oe(this,Ed)[Ed].language.get("table","color","nonFillText");a.append(V('<span class="data-table-color-tool-default-text">'.concat(l,"</span>"))),oe(this,Pi)[Pi].append(a),r.forEach(function(c){var d=V('<div class="data-table-color-tool-group"></div>');c.forEach(function(v){var h=i(v);d.append(h)}),e.append(d)}),oe(this,Pi)[Pi].append(e),(n=oe(this,_d)[_d])===null||n===void 0||n.bind(oe(this,Pi)[Pi],oe(this,sa)[sa]),document.addEventListener("mousedown",this.windowClick,!0)}},{key:"remove",value:function(){var t,n;(t=oe(this,Pi)[Pi])===null||t===void 0||t.remove(),(n=oe(this,_d)[_d])===null||n===void 0||n.destroy(),document.removeEventListener("mousedown",this.windowClick,!0),oe(this,Pi)[Pi]=void 0}},{key:"destroy",value:function(){this.remove();var t=oe(this,Ko)[Ko].onDestroy;t&&t()}}]),b}();function M0(b,u){u===void 0&&(u={});var t=u.insertAt;if(!(!b||typeof document=="undefined")){var n=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",t==="top"&&n.firstChild?n.insertBefore(e,n.firstChild):n.appendChild(e),e.styleSheet?e.styleSheet.cssText=b:e.appendChild(document.createTextNode(b))}}var PS=`.table-color-dropdown-trigger {\r
    display: flex;\r
}\r
\r
.table-color-dropdown-trigger:hover {\r
    background: transparent !important;\r
}\r
\r
.table-color-dropdown-trigger .table-color-dropdown-button-text, .table-color-dropdown-trigger .table-color-dropdown-arrow {\r
    display: inline-block;\r
    width: auto;\r
    margin: 0;\r
    text-align: center;\r
    background-color: transparent;\r
    border: 1px solid transparent;\r
    border-radius: 3px 3px;\r
    font-size: 16px;\r
    cursor: pointer;\r
    color: #595959;\r
    outline: none;\r
    margin-right: 0;\r
    min-width: 26px;\r
    border-radius: 3px 0 0 3px;\r
    padding: 0 4px;\r
}\r
\r
.table-color-dropdown-trigger:hover .table-color-dropdown-button-text, .table-color-dropdown-trigger:hover .table-color-dropdown-arrow\r
{\r
    border: 1px solid #e8e8e8;\r
}\r
\r
.table-color-dropdown-trigger .table-color-dropdown-button-text:hover, .table-color-dropdown-trigger .table-color-dropdown-arrow:hover {\r
    background-color: #f5f5f5;\r
}\r
\r
.table-color-dropdown-trigger .table-color-dropdown-arrow {\r
    margin-left: -1px;\r
    min-width: 17px;\r
    text-align: center;\r
    border-radius: 0 3px 3px 0;\r
}\r
\r
.table-color-dropdown-trigger .table-color-dropdown-arrow .table-color-dropdown-empty {\r
    display: inline-block;\r
}\r
\r
.table-color-dropdown-trigger .table-color-dropdown-arrow .data-icon-arrow {\r
    position: absolute;\r
    right: 5px;\r
    top: 12px;\r
    width: 8px;\r
    height: 8px;\r
    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjhweCIgaGVpZ2h0PSI1cHgiIHZpZXdCb3g9IjAgMCA4IDUiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA1Mi41ICg2NzQ2OSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPkdyb3VwIENvcHkgNjwvdGl0bGU+DQogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+DQogICAgPGcgaWQ9IlN5bWJvbHMiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIG9wYWNpdHk9IjAuNDUiPg0KICAgICAgICA8ZyBpZD0idG9vbGJhciIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMyOC4wMDAwMDAsIC0xOC4wMDAwMDApIj4NCiAgICAgICAgICAgIDxnIGlkPSJwYXJhZ3JhcGgtc3R5bGUiPg0KICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIyNi4wMDAwMDAsIDQuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgICAgIDxnIGlkPSJHcm91cC1Db3B5LTYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMi4wMDAwMDAsIDEyLjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZSIgeD0iMCIgeT0iMCIgd2lkdGg9IjgiIGhlaWdodD0iOCI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTAuNTk2MDkzNzUsMi41NTcwMzEyNSBMMy43NDUzMTI1LDYuMzc4MTI1IEMzLjg3NzM0Mzc1LDYuNTI1NzgxMjUgNC4xMDg1OTM3NSw2LjUyNTc4MTI1IDQuMjQwNjI1LDYuMzc4MTI1IEw3LjQwNTQ2ODc1LDIuNTU3MDMxMjUgQzcuNTk2MDkzNzUsMi4zNDI5Njg3NSA3LjQ0NDUzMTI1LDIuMDAzOTA2MjUgNy4xNTc4MTI1LDIuMDAzOTA2MjUgTDAuODQ0NTMxMjUsMi4wMDM5MDYyNSBDMC41NTcwMzEyNSwyLjAwMzkwNjI1IDAuNDA0Njg3NSwyLjM0Mjk2ODc1IDAuNTk2MDkzNzUsMi41NTcwMzEyNSBaIiBpZD0iU2hhcGUiIGZpbGw9IiMwMDAwMDAiIGZpbGwtcnVsZT0ibm9uemVybyI+PC9wYXRoPg0KICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgPC9nPg0KICAgICAgICA8L2c+DQogICAgPC9nPg0KPC9zdmc+);\r
    background-repeat: no-repeat;\r
    transition: all 0.25s cubic-bezier(0.3, 1.2, 0.2, 1);\r
}\r
\r
.data-table-color-tool {\r
    outline: none;\r
    width: auto;\r
    border-radius: 3px 3px;\r
    position: absolute;\r
    border: 1px solid #e8e8e8;\r
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.12);\r
    z-index: 130;\r
    text-indent: 0;\r
    top:0;\r
    padding: 8px 0;\r
    background: #fff;\r
}\r
\r
.data-table-color-tool-mobile {\r
    width: calc(100vw - 20px);\r
}\r
\r
.data-table-color-tool .data-table-color-tool-panle {\r
    position: relative;\r
    text-align: left;\r
    text-indent: 0;\r
    width: 100%;\r
    height: auto;\r
    margin-top: 8px;\r
    padding: 0 8px;\r
}\r
\r
.data-table-color-tool .data-table-color-tool-group\r
{\r
    display: flex;\r
}\r
\r
.data-table-color-tool .data-table-color-tool-group > span {\r
    width: 24px;\r
    height: 24px;\r
    display: inline-block;\r
    cursor: pointer;\r
    background-color: rgb(255, 255, 255);\r
    padding: 2px;\r
    border-radius: 3px;\r
    border-width: 1px;\r
    border-style: solid;\r
    border-color: transparent;\r
    -o-border-image: initial;\r
       border-image: initial;\r
    flex: 0 0 auto;\r
    position: relative;\r
}\r
\r
.data-table-color-tool span.data-table-color-tool-border > span {\r
    border: 1px solid #e8e8e8 !important;\r
}\r
\r
.data-table-color-tool .data-table-color-tool-group > span > span\r
{\r
    position: relative;\r
    width: 18px;\r
    height: 18px;\r
    display: block;\r
    border-radius: 2px;\r
    border-width: 1px;\r
    border-style: solid;\r
    border-color: transparent;\r
    -o-border-image: initial;\r
       border-image: initial;\r
}\r
\r
.data-table-color-tool .data-table-color-tool-group > span > span > svg {\r
    position: absolute;\r
    top: -1px;\r
    left: 1px;\r
    width: 12px;\r
    height: 12px;\r
}\r
\r
.data-table-color-tool .data-table-color-tool-default {\r
    display: flex;\r
    align-items: center;\r
    margin: 2px 0 8px;\r
    border-radius: 2px;\r
    cursor: pointer;\r
    padding: 2px 8px;\r
}   \r
\r
.data-table-color-tool .data-table-color-tool-default:hover {\r
    background: #f5f5f5;\r
}\r
\r
.data-table-color-tool .data-table-color-tool-default > span:first-child::after {\r
    content: "";\r
    display: block;\r
    position: absolute;\r
    top: 10px;\r
    left: 0px;\r
    width: 22px;\r
    height: 0;\r
    border-bottom: 2px solid #ff5151;\r
    transform: rotate(45deg);\r
}\r
\r
.data-table-color-tool .data-table-color-tool-default .data-table-color-tool-default-text {\r
    width: auto;\r
    margin-left: 8px;\r
    height: auto;\r
    background: transparent;\r
}`;M0(PS);var Sd=Mt("changeTimeout"),Is=function(b){ft(t,b);var u=ht(t);function t(){var n,e,r,i;Fe(this,t);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return i=u.call.apply(u,[this].concat(o)),i.contenteditable=["div".concat(qe.TABLE_TD_CONTENT_CLASS)],i.colMinWidth=((n=i.editor.plugin.findPlugin("table"))===null||n===void 0?void 0:n.options.colMinWidth)||40,i.rowMinHeight=((e=i.editor.plugin.findPlugin("table"))===null||e===void 0?void 0:e.options.rowMinHeight)||35,i.wrapper=void 0,i.helper=new S0(i.editor),i.template=new qe(Ye(i)),i.selection=new RS(i.editor,Ye(i)),i.conltrollBar=new zS(i.editor,Ye(i),{col_min_width:i.colMinWidth,row_min_height:i.rowMinHeight}),i.command=new FS(i.editor,Ye(i)),i.scrollbar=void 0,i.viewport=void 0,i.colorTool=void 0,i.noBorderToolButton=void 0,i.alignToolButton=void 0,Object.defineProperty(Ye(i),Sd,{writable:!0,value:void 0}),i.doChange=function(){i.remoteRefresh(),i.handleChange("local")},i.handleChange=function(){var c,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"local";if(!!ge(i.editor)){i.conltrollBar.refresh(),i.selection.render("change");var v=At((r=Ye(i),St(t.prototype)),"getValue",r).call(r);if(v!=null&&v.noBorder){var h;(h=i.noBorderToolButton)===null||h===void 0||h.addClass("active")}else(c=i.noBorderToolButton)===null||c===void 0||c.removeClass("active");if(d==="local"&&ge(i.editor)){var g=i.getValue();g&&i.setValue(g)}}},i.onChange=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"local";ge(i.editor)&&c==="local"&&i.editor.ot.isStopped()||(oe(Ye(i),Sd)[Sd]&&clearTimeout(oe(Ye(i),Sd)[Sd]),oe(Ye(i),Sd)[Sd]=setTimeout(function(){i.handleChange(c),c==="remote"&&i.remoteRefresh()},50))},i.updateScrollbar=function(){var c,d,v,h;if(!!i.scrollbar){var g=(((c=i.wrapper)===null||c===void 0||(d=c.getBoundingClientRect())===null||d===void 0?void 0:d.bottom)||0)-(((v=i.wrapper)===null||v===void 0?void 0:v.getViewport().bottom)||0);(h=i.wrapper)===null||h===void 0||h.find(".data-scrollbar-x").css({bottom:"".concat(g>0?g+2:0,"px")})}},i.isChanged=!1,i}return Be(t,[{key:"init",value:function(){var e=this,r;At(St(t.prototype),"init",this).call(this),ge(this.editor)&&(this.editor.event.listeners["keydown:tab"]||(this.editor.event.listeners["keydown:tab"]=[]),this.editor.event.listeners["keydown:tab"].unshift(function(i){if(!!ge(e.editor)){var a=e.editor,o=a.change,l=a.block,c=a.node,d=a.card,v=o.range.get(),h=v.endNode.closest("td");if(h.length!==0){var g=d.closest(h,!0);if(!!(g!=null&&g.equal(e.root))){var w=l.closest(v.endNode);if(h.length>0&&(l.isLastOffset(v,"end")||w.name!=="li"&&c.isEmptyWidthChild(w))){var x=h.next();if(!x){var _,E=(_=h.parent())===null||_===void 0?void 0:_.next();if(E)x=E.find("td:first-child")||null;else{var M,T;e.command.insertRowDown(),x=((M=h.parent())===null||M===void 0||(T=M.next())===null||T===void 0?void 0:T.find("td:first-child"))||null}}if(x)return i.preventDefault(),e.selection.focusCell(x),!1}h.length>0&&setTimeout(function(){var S;(S=e.scrollbar)===null||S===void 0||S.refresh()},0)}}}}),this.editor.on("keydown:down",function(i){if(!!ge(e.editor)){var a=e.editor,o=a.change,l=a.card,c=o.range.get(),d=c.endNode.closest("td");if(d.length!==0){var v=l.closest(d,!0);if(!!(v!=null&&v.equal(e.root))){var h=d.find(".table-main-content");if(!!h){var g=h.get().getBoundingClientRect(),w=c.getBoundingClientRect();if(d.length>0&&(w.bottom===0||g.bottom-w.bottom<10)){var x,_=d.index(),E=(x=d.parent())===null||x===void 0?void 0:x.next();if(E){var M,T=0,S=E.find("td:last-child");if((M=e.selection.tableModel)===null||M===void 0||M.table[E.index()].some(function(B){return!e.helper.isEmptyModelCol(B)&&T>=_&&B.element?(S=V(B.element),!0):(T++,!1)}),S)return i.preventDefault(),e.selection.focusCell(S,!0),!1}else{i.preventDefault();var D=c.cloneRange(),I=e.root.next(),P=I?l.find(I):void 0;return P!=null&&P.onSelectDown?P.onSelectDown(i):(l.focusNextBlock(e,D,!1),o.range.select(D)),!1}}d.length>0&&setTimeout(function(){var B;(B=e.scrollbar)===null||B===void 0||B.refresh()},0)}}}}}),this.editor.on("keydown:up",function(i){if(!!ge(e.editor)){var a=e.editor,o=a.change,l=a.card,c=o.range.get(),d=c.endNode.closest("td");if(d.length!==0){var v=l.closest(d,!0);if(!!(v!=null&&v.equal(e.root))){var h=d.find(".table-main-content");if(!!h){var g=h.get().getBoundingClientRect(),w=c.getBoundingClientRect();if(d.length>0&&(w.top===0||w.top-g.top<10)){var x,_=d.index(),E=(x=d.parent())===null||x===void 0?void 0:x.prev();if(E){var M,T=0,S=E.find("td:first-child");if((M=e.selection.tableModel)===null||M===void 0||M.table[E.index()].some(function(B){return!e.helper.isEmptyModelCol(B)&&T>=_&&B.element?(S=V(B.element),!0):(T++,!1)}),S)return i.preventDefault(),e.selection.focusCell(S),!1}else{i.preventDefault();var D=c.cloneRange(),I=e.root.prev(),P=I?l.find(I):void 0;return P!=null&&P.onSelectUp?P.onSelectUp(i):(l.focusPrevBlock(e,D,!1),o.range.select(D)),!1}}d.length>0&&setTimeout(function(){var B;(B=e.scrollbar)===null||B===void 0||B.refresh()},0)}}}}}),this.editor.on("keydown:left",function(){if(!!ge(e.editor)){var i=e.editor,a=i.change,o=i.card,l=a.range.get(),c=l.endNode.closest("td");if(c.length!==0){var d=o.closest(c,!0);if(!!(d!=null&&d.equal(e.root))){var v=c.find(".table-main-content");!v||c.length>0&&setTimeout(function(){var h;(h=e.scrollbar)===null||h===void 0||h.refresh()},0)}}}}),this.editor.on("keydown:right",function(){if(!!ge(e.editor)){var i=e.editor,a=i.change,o=i.card,l=a.range.get(),c=l.endNode.closest("td");if(c.length!==0){var d=o.closest(c,!0);if(!!(d!=null&&d.equal(e.root))){var v=c.find(".table-main-content");!v||c.length>0&&setTimeout(function(){var h;(h=e.scrollbar)===null||h===void 0||h.refresh()},0)}}}})),!this.colorTool&&(this.colorTool=new BS(this.editor,this.id,{colors:t.colors,defaultColor:(r=At(St(t.prototype),"getValue",this).call(this))===null||r===void 0?void 0:r.color,onChange:function(a){e.conltrollBar.drawBackgroundColor(a);var o=e.getValue();e.setValue(Ie(Ie({},o),{},{color:a}))}}))}},{key:"toolbar",value:function(){var e=this,r;if(!ge(this.editor)||this.editor.readonly)return[{type:"maximize"}];var i=this.editor.language.get("table"),a=[{type:"node",title:this.editor.language.get("table","color","title"),node:this.colorTool.getButton()},{type:"button",title:i.noBorder,content:'<span class="data-icon data-icon-no-border"></span>',didMount:function(c){var d=At(St(t.prototype),"getValue",e).call(e);(d==null?void 0:d.noBorder)===!0&&c.addClass("active"),e.noBorderToolButton=c},onClick:function(c,d){var v,h=At(St(t.prototype),"getValue",e).call(e);e.setValue({noBorder:!(h!=null&&h.noBorder)});var g=(v=e.wrapper)===null||v===void 0?void 0:v.find(".data-table");(h==null?void 0:h.noBorder)===!0?(g==null||g.removeAttributes("data-table-no-border"),d.removeClass("active")):(g==null||g.attributes("data-table-no-border","true"),d.addClass("active"))}},{type:"dropdown",content:'<span class="data-icon data-icon-align-top" />',title:i.verticalAlign.title,didMount:function(c){e.alignToolButton=c.find(".data-toolbar-btn")},items:[{type:"button",content:'<span class="data-icon data-icon-align-top"></span> '.concat(i.verticalAlign.top),onClick:function(c){return e.updateAlign(c,"top")}},{type:"button",content:'<span class="data-icon data-icon-align-middle"></span> '.concat(i.verticalAlign.middle),onClick:function(c){return e.updateAlign(c,"middle")}},{type:"button",content:'<span class="data-icon data-icon-align-bottom"></span> '.concat(i.verticalAlign.bottom),onClick:function(c){return e.updateAlign(c,"bottom")}}]},{type:"button",title:i.mergeCell,content:'<span class="data-icon data-icon-merge-cells"></span>',disabled:this.conltrollBar.getMenuDisabled("mergeCell"),onClick:function(){e.command.mergeCell()}},{type:"button",title:i.splitCell,content:'<span class="data-icon data-icon-solit-cells"></span>',disabled:this.conltrollBar.getMenuDisabled("splitCell"),onClick:function(){e.command.splitCell()}}];if(this.isMaximize)return a;var o=[{type:"maximize"},{type:"copy",onClick:function(){e.command.copy(!0),e.editor.messageSuccess(e.editor.language.get("copy","success"))}},{type:"delete"},{type:"separator"}].concat(a);return tn(((r=this.wrapper)===null||r===void 0?void 0:r.css("margin-left"))||"0")===0&&o.unshift({type:"dnd"}),o}},{key:"onSelectLeft",value:function(e){var r=this.selection.tableModel;if(!!r)for(var i=r.rows-1;i>=0;i--)for(var a=r.cols-1;a>=0;a--){var o=r.table[i][a];if(!this.helper.isEmptyModelCol(o)&&o.element)return e.preventDefault(),this.selection.focusCell(o.element,!1),!1}}},{key:"onSelectRight",value:function(e){var r=this.selection.tableModel;if(!!r)for(var i=0;i<r.rows;i++)for(var a=0;a<r.cols;a++){var o=r.table[i][a];if(!this.helper.isEmptyModelCol(o)&&o.element)return e.preventDefault(),this.selection.focusCell(o.element),!1}}},{key:"onSelectUp",value:function(e){var r=this.selection.tableModel;if(!!r)for(var i=r.rows-1;i>=0;i--)for(var a=0;a<r.cols;a++){var o=r.table[i][a];if(!this.helper.isEmptyModelCol(o)&&o.element)return e.preventDefault(),this.selection.focusCell(o.element,!1),!1}}},{key:"onSelectDown",value:function(e){var r=this.selection.tableModel;if(!!r)for(var i=0;i<r.rows;i++)for(var a=0;a<r.cols;a++){var o=r.table[i][a];if(!this.helper.isEmptyModelCol(o)&&o.element)return e.preventDefault(),this.selection.focusCell(o.element),!1}}},{key:"updateAlign",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"top";e.preventDefault(),this.conltrollBar.setAlign(r),this.updateAlignText(r)}},{key:"updateAlignText",value:function(){var e,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"top",i='<span class="data-icon data-icon-align-'.concat(r,'"></span>');(e=this.alignToolButton)===null||e===void 0||e.html(i)}},{key:"getValue",value:function(){var e=this,r=At(St(t.prototype),"getValue",this).call(this);if(!this.wrapper)return r;var i=this.wrapper.find(qe.TABLE_CLASS);if(!i)return r;var a=this.selection.tableModel;if(!a)return r;var o=this.editor,l=o.schema,c=o.conversion,d=V("<div></div>");d.append(i.clone(!0));var v=new _o(d,this.editor,function(E){E.find(qe.TABLE_TD_BG_CLASS).remove(),E.find(Nn).each(function(M){e.editor.node.unwrap(V(M))})}),h=a.rows,g=a.cols,w=a.height,x=a.width,_=v.toValue(l,c,!1,!1);return ge(this.editor)?Ie(Ie({},r),{},{rows:h,cols:g,height:w,width:x,html:_}):Ie(Ie({},r),{},{html:_})}},{key:"updateBackgroundSelection",value:function(e){var r=this.selection,i=r.selectArea,a=r.tableModel;if(i&&i.count>1&&a){var o=i.begin,l=i.end,c=a.table[o.row][o.col];!this.helper.isEmptyModelCol(c)&&c.element&&e.setStart(c.element,0);var d=a.table[l.row][l.col];!this.helper.isEmptyModelCol(d)&&d.element&&e.setEnd(d.element,0)}}},{key:"drawBackground",value:function(e,r){var i,a,o,l,c=e.get().getBoundingClientRect(),d=new DOMRect(c.x,c.y,0,0),v=r.startNode,h=r.endNode,g=v.closest("td"),w=h.closest("td");if(!(g.name!=="td"||w.name!=="td"||g.equal(w))){var x=g.get().getBoundingClientRect(),_=(((i=this.viewport)===null||i===void 0||(a=i.getBoundingClientRect())===null||a===void 0?void 0:a.left)||0)+(this.activated?13:0);d.x=Math.max(x.left-c.left,_-(((o=this.editor.root.getBoundingClientRect())===null||o===void 0?void 0:o.left)||0)),d.y=x.top-c.top,d.width=x.right-x.left,d.height=x.bottom-x.top;var E=w.get().getBoundingClientRect();return d.width=Math.min(E.right-(x.left<_?_:x.left),(((l=this.viewport)===null||l===void 0?void 0:l.width())||0)-(this.activated?13:0)),d.width<0&&(d.width=0),d.height=E.bottom-x.top,d}}},{key:"activate",value:function(e){var r;if(At(St(t.prototype),"activate",this).call(this,e),e){var i;(i=this.wrapper)===null||i===void 0||i.addClass("active")}else{var a;this.selection.clearSelect(),this.conltrollBar.hideContextMenu(),(a=this.wrapper)===null||a===void 0||a.removeClass("active")}(r=this.scrollbar)===null||r===void 0||r.refresh()}},{key:"maximize",value:function(){var e;At(St(t.prototype),"maximize",this).call(this),(e=this.scrollbar)===null||e===void 0||e.refresh()}},{key:"minimize",value:function(){var e;At(St(t.prototype),"minimize",this).call(this),(e=this.scrollbar)===null||e===void 0||e.refresh()}},{key:"getSelectionNodes",value:function(){var e=this,r=[];return this.selection.each(function(i){!e.helper.isEmptyModelCol(i)&&i.element&&r.push(V(i.element).find(Nn))}),r.length===1&&r[0].closest("[table-cell-selection=true]").length===0?[]:r}},{key:"overflow",value:function(e){var r,i,a=((r=this.wrapper)===null||r===void 0||(i=r.find(".data-table"))===null||i===void 0?void 0:i.width())||0,o=this.getCenter().width(),l=a-o;if(l>0&&!this.isMaximize){var c;(c=this.wrapper)===null||c===void 0||c.css("margin-right","-".concat(l>e?e:l,"px"))}else if(l<0||this.isMaximize){var d;(d=this.wrapper)===null||d===void 0||d.css("margin-right","")}}},{key:"didRender",value:function(){var e,r,i,a,o=this,l,c;At(St(t.prototype),"didRender",this).call(this),this.editor.on("undo",this.doChange),this.editor.on("redo",this.doChange),this.viewport=ge(this.editor)?(e=this.wrapper)===null||e===void 0?void 0:e.find(qe.VIEWPORT):(r=this.wrapper)===null||r===void 0?void 0:r.find(qe.VIEWPORT_READER),this.selection.init(),this.conltrollBar.init(),this.command.init(),!ge(this.editor)||this.editor.readonly?(i=this.toolbarModel)===null||i===void 0||i.setOffset([0,0]):(a=this.toolbarModel)===null||a===void 0||a.setOffset([0,-28,0,-6]);var d=this.editor.plugin.findPlugin("table"),v=(d==null?void 0:d.options.overflow)||{};if(this.viewport){this.selection.refreshModel();var h=v.maxLeftWidth?{onScrollX:function(S){var D;o.isMaximize&&(S=0);var I=v.maxLeftWidth();return(D=o.wrapper)===null||D===void 0||D.css("margin-left","-".concat(S>I?I:S,"px")),S>0?o.editor.root.find(".data-card-dnd").hide():o.editor.root.find(".data-card-dnd").show(),S-I},getScrollLeft:function(S){var D;return S-tn(((D=o.wrapper)===null||D===void 0?void 0:D.css("margin-left"))||"0")},getOffsetWidth:function(S){var D;return S+tn(((D=o.wrapper)===null||D===void 0?void 0:D.css("margin-left"))||"0")}}:void 0;this.scrollbar=new bp(this.viewport,!0,!1,!0,h),this.scrollbar.setContentNode(this.viewport.find(".data-table")),this.scrollbar.on("display",function(T){if(T==="block"){var S;(S=o.wrapper)===null||S===void 0||S.addClass("scrollbar-show")}else{var D;(D=o.wrapper)===null||D===void 0||D.removeClass("scrollbar-show")}});var g=null,w=function(){g&&clearTimeout(g),g=setTimeout(function(){ge(o.editor)&&(o.editor.ot.refreshSelection(!1),o.conltrollBar.refresh())},20)};if(this.scrollbar.on("change",w),mt||window.addEventListener("scroll",this.updateScrollbar),window.addEventListener("resize",this.updateScrollbar),ge(this.editor)&&!mt){var x;(x=this.editor.scrollNode)===null||x===void 0||x.on("scroll",this.updateScrollbar)}}this.selection.on("select",function(){var T,S;if(o.conltrollBar.refresh(),setTimeout(function(){o.isChanged=!0},200),!!ge(o.editor)){var D=o.selection,I=D.selectArea,P=D.tableModel;I&&I.count>1&&P&&o.editor.ot.updateSelection();var B=(T=o.selection.getSingleCell())===null||T===void 0?void 0:T.css("vertical-align");o.updateAlignText(B),(S=o.toolbarModel)===null||S===void 0||S.update()}}),this.conltrollBar.on("sizeChanged",function(){var T;o.selection.refreshModel(),o.onChange(),(T=o.scrollbar)===null||T===void 0||T.refresh()}),this.conltrollBar.on("sizeChanging",function(){var T;(T=o.scrollbar)===null||T===void 0||T.refresh(),o.editor.trigger("editor:resize"),o.updateScrollbar()}),this.command.on("actioned",function(T,S){var D,I;T==="paste"&&o.editor.card.render(o.wrapper),["splitCell","mergeCell"].includes(T)&&o.editor.trigger("editor:resize"),o.selection.render(T),(D=o.toolbarModel)===null||D===void 0||D.update(),S||o.onChange(),v.maxRightWidth&&o.overflow(v.maxRightWidth()),(I=o.scrollbar)===null||I===void 0||I.refresh()});var _=(l=this.wrapper)===null||l===void 0?void 0:l.find(qe.TABLE_CLASS);if(!!_){var E=At(St(t.prototype),"getValue",this).call(this);if(!(E!=null&&E.html)){var M=this.getValue();M&&ge(this.editor)&&this.setValue(M),this.onChange()}v.maxRightWidth&&this.overflow(v.maxRightWidth()),(c=this.scrollbar)===null||c===void 0||c.refresh()}}},{key:"remoteRefresh",value:function(){var e,r=this;if(!(!this.wrapper||this.wrapper.length===0||!this.wrapper[0].parentNode)){var i=this.wrapper.find(qe.COLS_HEADER_CLASS),a=At(St(t.prototype),"getValue",this).call(this),o=i.find(qe.COLS_HEADER_ITEM_CLASS),l=o.length;if(a.cols>l)i.append(V(this.template.renderColsHeader(a.cols-l)).find(qe.COLS_HEADER_ITEM_CLASS)),o=i.find(qe.COLS_HEADER_ITEM_CLASS);else if(a.cols<l)for(var c=l;c>a.cols;c--){var d;(d=o.eq(c-1))===null||d===void 0||d.remove()}var v=a.html?V(a.html):this.wrapper.find("table"),h=v.find("col").toArray();h.forEach(function(T,S){var D,I=T.attributes("width");(D=o.eq(S))===null||D===void 0||D.css("width","".concat(I,"px"))});var g=this.wrapper.find(qe.ROWS_HEADER_CLASS),w=g.find(qe.ROWS_HEADER_ITEM_CLASS),x=w.length;if(a.rows>x)g.append(V(this.template.renderRowsHeader(a.rows-x)).find(qe.ROWS_HEADER_ITEM_CLASS)),w=g.find(qe.ROWS_HEADER_ITEM_CLASS);else if(a.rows<x)for(var _=x;_>a.rows;_--){var E;(E=w.eq(_-1))===null||E===void 0||E.remove()}var M=v.find("tr").toArray();M.forEach(function(T,S){var D;(D=w.eq(S))===null||D===void 0||D.css("height",tn(Xo(T.get(),"height")))}),this.conltrollBar.refresh(),(e=this.scrollbar)===null||e===void 0||e.refresh(),setTimeout(function(){var T;(T=r.wrapper)===null||T===void 0||T.find(Nn).each(function(S){var D=S;D.hasAttribute(Hi)||D.setAttribute(Hi,r.template.isReadonly?"false":"true")})},10)}}},{key:"render",value:function(){if(this.template.isReadonly=!ge(this.editor)||this.editor.readonly,this.wrapper&&this.wrapper.length>0&&!!this.wrapper[0].parentNode){this.remoteRefresh();return}var e=this.getValue();if(!e)return"Error value";if(e.html){var r=V(e.html);r&&r.name!=="table"&&(r=r.toArray().find(function(a){return a.name==="table"}),r?e.html=r.get().outerHTML:(e.html="<table><tr><td>".concat(e.html,"</td></tr></table>"),r=V(e.html)));var i=this.helper.getTableModel(r);e.rows=i.rows,e.cols=i.cols}return this.wrapper=ge(this.editor)?V(this.template.htmlEdit(e,OS(this.editor.language.get("table")))):V(this.template.htmlView(e)),ge(this.editor)||this.wrapper.find("table").addClass("data-table").addClass("data-table-view"),e.rows=this.wrapper.find("tr").length,e.width&&this.wrapper.find("table").css("width","".concat(e.width,"px")),this.wrapper}},{key:"destroy",value:function(){var e;At(St(t.prototype),"destroy",this).call(this),(e=this.scrollbar)===null||e===void 0||e.destroy(),this.command.removeAllListeners(),this.selection.removeAllListeners(),this.selection.destroy(),this.conltrollBar.removeAllListeners(),this.conltrollBar.destroy(),this.editor.off("undo",this.doChange),this.editor.off("redo",this.doChange)}}],[{key:"cardName",get:function(){return"table"}},{key:"cardType",get:function(){return un.BLOCK}},{key:"selectStyleType",get:function(){return zs.BACKGROUND}},{key:"autoSelected",get:function(){return!1}},{key:"lazyRender",get:function(){return!0}}]),t}(ni);Is.colors=Da.getColors().map(function(b){return b.map(function(u){return{color:u,border:Da.getStroke(u)}})});var HS={table:{insertColLeft:"Insert column(s) $data left",insertColRight:"Insert column(s) $data right",insertRowUp:"Insert row(s) $data up",insertRowDown:"Insert row(s) $data down",mergeCell:"Merge cells",splitCell:"Unmerge cells",removeCol:"Delete selected column(s)",removeRow:"Delete selected row(s)",removeTable:"Delete table",copy:"Copy",cut:"Cut",paste:"Paste",clear:"Clear",draggingCol:"Moving $data column",draggingRow:"Moving $data row",color:{title:"Cell background color",nonFillText:"No fill color"},noBorder:"Hide border",verticalAlign:{title:"Vertical align",top:"Align top",middle:"Align middle",bottom:"Align bottom"}}},jS={table:{insertColLeft:"\u5DE6\u8FB9\u63D2\u5165 $data \u5217",insertColRight:"\u53F3\u8FB9\u63D2\u5165 $data \u5217",insertRowUp:"\u4E0A\u65B9\u63D2\u5165 $data \u884C",insertRowDown:"\u4E0B\u65B9\u63D2\u5165 $data \u884C",mergeCell:"\u5408\u5E76\u5355\u5143\u683C",splitCell:"\u62C6\u5206\u5355\u5143\u683C",removeCol:"\u5220\u9664\u9009\u4E2D\u5217",removeRow:"\u5220\u9664\u9009\u4E2D\u884C",removeTable:"\u5220\u9664\u8868\u683C",copy:"\u590D\u5236",cut:"\u526A\u5207",paste:"\u7C98\u8D34",clear:"\u6E05\u7A7A\u5185\u5BB9",draggingCol:"\u6B63\u5728\u79FB\u52A8 $data \u5217",draggingRow:"\u6B63\u5728\u79FB\u52A8 $data \u884C",color:{title:"\u5355\u5143\u683C\u80CC\u666F\u8272",nonFillText:"\u65E0\u586B\u5145\u8272"},noBorder:"\u9690\u85CF\u8FB9\u6846",verticalAlign:{title:"\u5782\u76F4\u5BF9\u9F50",top:"\u9876\u5BF9\u9F50",middle:"\u5782\u76F4\u5C45\u4E2D",bottom:"\u5E95\u5BF9\u9F50"}}},WS={"en-US":HS,"zh-CN":jS},US=`div[dnd-trigger-key="table"], div[toolbar-trigger-key="table"] {\r
    margin-left: -13px;\r
    margin-top: -13px;\r
}\r
\r
.data-table {\r
    border: none;\r
    position: relative;\r
    z-index: 1;\r
    table-layout: fixed;\r
    white-space: pre-wrap;\r
    width: 100%;\r
    border-collapse: collapse;\r
    background-color: #ffffff;\r
}\r
\r
div[data-card-key="table"].card-selected .data-table, div[data-card-key="table"].card-selected-other .data-table {\r
  background: transparent\r
}\r
\r
.am-engine [data-card-key="table"].card-selected [data-card-element="center"].data-card-background-selected {\r
    background: transparent;\r
}\r
\r
.am-engine [data-card-key="table"].card-selected [data-card-element="center"].data-card-background-selected .table-wrapper {\r
    background: rgba(27, 162, 227, 0.2);\r
}\r
\r
.am-engine-mobile div[data-card-key="table"].card-activated {\r
  margin-left: 20px;\r
}\r
\r
.data-table tr,.data-table td {\r
    position: relative;\r
}\r
\r
.data-table tr {\r
    height: 35px;\r
}\r
\r
.data-table tr td {\r
    border: none;\r
    vertical-align: top;\r
    cursor: text;\r
}\r
\r
.data-table tr td[table-cell-selection]:after {\r
    content: ' ';\r
    position: absolute;\r
    top: 0;\r
    left: 0;\r
    right: 0;\r
    bottom: 0;\r
    background-color: rgba(180, 213, 254, 0.5);\r
    pointer-events: none;\r
    z-index: 2;\r
}\r
\r
.drag-selecting .data-table, .data-table tr td[table-cell-selection] {\r
    caret-color:transparent\r
}\r
\r
.data-table tr td[table-cell-selection] ::-moz-selection{\r
    background: transparent !important;\r
}\r
\r
.data-table tr td[table-cell-selection] ::selection{\r
    background: transparent !important;\r
}\r
\r
.table-wrapper {\r
    position: relative;\r
    cursor: default;\r
}\r
\r
.table-wrapper.active {\r
    margin-top: -42px;\r
    width: 100%;\r
}\r
\r
.table-wrapper.scrollbar-show {\r
    margin-bottom: -10px;\r
}\r
\r
.table-wrapper.data-table-highlight tr td[table-cell-selection]:after {\r
    background: transparent;\r
}\r
\r
.table-wrapper .table-header {\r
    position: absolute;\r
    visibility: hidden;\r
    left: -13px;\r
    top: 28px;\r
    width: 14px;\r
    height: 14px;\r
    cursor: pointer;\r
    z-index: 4;\r
    background-color: #ffffff;\r
}\r
\r
.table-wrapper .table-header .table-header-item {\r
    border: 1px solid #dfdfdf;\r
    background-color: #f2f3f5;\r
    border-top-left-radius: 50%;\r
    width: 100%;\r
    height: 100%;\r
}\r
\r
.table-wrapper .table-header:hover {\r
    background-color: #ffffff;\r
}\r
\r
.table-wrapper.data-table-highlight-all .table-header .table-header-item {\r
    background: rgba(255, 77, 79, 0.4) !important;\r
}\r
\r
.table-wrapper .table-header-item:hover{\r
    background-color: #e2e4e6;\r
}\r
\r
.table-wrapper.active .table-header {\r
    visibility:visible\r
}\r
\r
.table-wrapper .table-header.selected .table-header-item {\r
    background: #4daaff;\r
    border-color: #4daaff;\r
}\r
\r
.table-wrapper .table-cols-header {\r
    position: relative;\r
    height: 13px;\r
    display: none;\r
    width: 100%;\r
    cursor: default;\r
}\r
\r
.table-wrapper.active .table-cols-header {\r
    display: flex;\r
}\r
\r
.table-wrapper .table-cols-header .table-cols-header-item {\r
    position: relative;\r
    height: 13px;\r
    width: auto;\r
    border: 1px solid #dfdfdf;\r
    border-bottom: 0 none;\r
    overflow: visible;\r
    background: #f2f3f5;\r
    cursor: pointer;\r
    border-right: 0 none;\r
}\r
\r
.table-wrapper .table-cols-header .table-cols-header-item:hover{\r
    background-color: #e2e4e6;\r
}\r
\r
.table-wrapper .table-cols-header .table-cols-header-item:first-child {\r
    border-top-left-radius: 2px;\r
    border-bottom-left-radius: 2px;\r
}\r
.table-wrapper .table-cols-header .table-cols-header-item:last-child {\r
    border-top-right-radius: 2px;\r
    border-bottom-right-radius: 2px;\r
    border-right: 1px solid #dfdfdf;\r
}\r
.table-wrapper.data-table-highlight-col .table-cols-header .table-cols-header-item.active, .table-wrapper.data-table-highlight-all .table-cols-header .table-cols-header-item {\r
    background: rgba(255, 77, 79, 0.4) !important;\r
}\r
.table-wrapper .table-cols-header .table-cols-header-item.selected {\r
    background: #fff;\r
    z-index: 1;\r
    border-radius: 0;\r
    border-bottom: 0;\r
    cursor: move;\r
}\r
.table-wrapper .table-cols-header .table-cols-header-item.selected .col-dragger {\r
    display: flex;\r
    position: absolute;\r
    left: -1px;\r
    top: -1px;\r
    right: -1px;\r
    bottom: -1px;\r
    background: #4daaff;\r
    border-radius: 0;\r
    z-index: 1;\r
    justify-content: center;\r
    align-items: center;\r
}\r
\r
.table-wrapper.data-table-highlight-col .table-cols-header .table-cols-header-item .col-dragger,.table-wrapper.data-table-highlight-all .table-cols-header .table-cols-header-item .col-dragger {\r
    background: transparent !important;\r
}\r
.table-wrapper .table-cols-header .table-cols-header-item.selected .col-dragger .drag-info {\r
    display: none;\r
}\r
.table-wrapper .table-cols-header .table-cols-header-item.no-dragger .col-dragger .data-icon {\r
    display: none;\r
}\r
.table-wrapper .table-cols-header .table-cols-header-item.dragging .col-dragger {\r
    height: 50px;\r
}\r
.table-wrapper .table-cols-header .table-cols-header-item.dragging .col-dragger .drag-info {\r
    display: block;\r
    color: #fff;\r
}\r
.table-wrapper .table-cols-header .table-cols-header-item .cols-trigger {\r
    position: absolute;\r
    right: -1px;\r
    top: -1px;\r
    width: 2px;\r
    height: 14px;\r
    z-index: 10;\r
    cursor: col-resize;\r
}\r
\r
.am-engine-mobile .table-wrapper .table-cols-header .table-cols-header-item .cols-trigger {\r
  right: -3px;\r
  width: 6px;\r
}\r
\r
.am-engine:not(.am-engine-mobile) .table-wrapper .table-cols-header .table-cols-header-item .cols-trigger:hover {\r
    background: #0589f3;\r
}\r
\r
.am-engine:not(.am-engine-mobile) .table-wrapper .table-cols-header .table-cols-header-item .cols-trigger.dragging {\r
    width: 2px;\r
    background: #0589f3;\r
    right: -1px;\r
}\r
\r
.table-wrapper .table-cols-header .table-cols-header-item .col-dragger {\r
    text-align: center;\r
    display: none;\r
}\r
.table-wrapper .table-cols-header .table-cols-header-item .col-dragger .data-icon-drag {\r
    font-size: 10px;\r
    color: #fff;\r
}\r
\r
.table-wrapper .table-cols-header .table-cols-header-item .col-dragger .data-icon-drag::before {\r
    transform: rotate(90deg);\r
    display: inline-block;\r
}\r
\r
.table-wrapper.data-table-highlight-col .table-cols-header .table-cols-header-item .col-dragger .data-icon-drag,.table-wrapper.data-table-highlight-all .table-cols-header .table-cols-header-item .col-dragger .data-icon-drag{\r
    display: none;\r
}\r
.table-wrapper .table-cols-header.dragging .table-cols-header-item .cols-trigger,.table-wrapper.drag-selecting .table-cols-header-item .cols-trigger{\r
    display: none;\r
}\r
.table-wrapper .table-cols-header.resize .table-cols-header-item {\r
    cursor: col-resize;\r
}\r
.table-wrapper .table-rows-header {\r
    position: absolute;\r
    left: -13px;\r
    top: 41px;\r
    width: 14px;\r
    z-index: 128;\r
    border-right: 0;\r
    display: none;\r
}\r
\r
.table-wrapper.active .table-rows-header {\r
    display: block;\r
}\r
\r
.table-wrapper .table-rows-header .table-rows-header-item {\r
    position: relative;\r
    width: 100%;\r
    border: 1px solid #dfdfdf;\r
    border-bottom: 0;\r
    background: #f2f3f5;\r
    cursor: pointer;\r
}\r
\r
.table-wrapper .table-rows-header .table-rows-header-item:hover\r
{\r
    background-color: #e2e4e6;\r
}\r
\r
/* .table-wrapper .table-rows-header .table-rows-header-item:nth-child(3) {\r
    border-top: 0 none;\r
} */\r
\r
.table-wrapper .table-rows-header .table-rows-header-item:last-child{\r
    border-bottom: 1px solid #dfdfdf;\r
}\r
\r
.table-wrapper.data-table-highlight-row .table-rows-header .table-rows-header-item.active,.table-wrapper.data-table-highlight-all .table-rows-header .table-rows-header-item {\r
    background: rgba(255, 77, 79, 0.4) !important;\r
}\r
\r
.table-wrapper .table-rows-header .table-rows-header-item.selected {\r
    width: 14px;\r
    background: #fff;\r
    cursor: move;\r
}\r
.table-wrapper .table-rows-header .table-rows-header-item.selected .row-dragger {\r
    display: flex;\r
    position: absolute;\r
    align-items: center;\r
    text-align: left;\r
    white-space: nowrap;\r
    content: ' ';\r
    left: -1px;\r
    top: -1px;\r
    bottom: -1px;\r
    right: -1px;\r
    background: #4daaff;\r
    border-radius: 0;\r
    z-index: 1;\r
}\r
.table-wrapper.data-table-highlight-row .table-rows-header .table-rows-header-item .row-dragger,.table-wrapper.data-table-highlight-all .table-rows-header .table-rows-header-item .row-dragger{\r
    background: transparent !important;\r
}\r
.table-wrapper .table-rows-header .table-rows-header-item.selected .row-dragger .drag-info {\r
    display: none;\r
}\r
.table-wrapper .table-rows-header .table-rows-header-item.no-dragger .row-dragger .data-icon {\r
    display: none;\r
}\r
.table-wrapper .table-rows-header .table-rows-header-item.dragging .row-dragger {\r
    width: 150px;\r
}\r
.table-wrapper .table-rows-header .table-rows-header-item.dragging .row-dragger .drag-info {\r
    margin-left: 5px;\r
    display: flex;\r
    padding: 10px;\r
    color: #fff;\r
}\r
.table-wrapper .table-rows-header .table-rows-header-item .rows-trigger {\r
    position: absolute;\r
    bottom: -1px;\r
    height: 2px;\r
    width: 14px;\r
    left: -1px;\r
    z-index: 10;\r
    cursor: row-resize;\r
}\r
\r
.am-engine-mobile .table-wrapper .table-rows-header .table-rows-header-item .rows-trigger {\r
  bottom: -3px;\r
  height: 6px;\r
}\r
\r
.am-engine:not(.am-engine-mobile) .table-wrapper .table-rows-header .table-rows-header-item .rows-trigger:hover {\r
    background: #0589f3;\r
}\r
\r
.am-engine:not(.am-engine-mobile) .table-wrapper .table-rows-header .table-rows-header-item .rows-trigger.dragging {\r
    height: 2px;\r
    background: #0589f3;\r
    bottom: -1px;\r
}\r
\r
.table-wrapper .table-rows-header .table-rows-header-item .row-dragger {\r
    display: none;\r
}\r
.table-wrapper .table-rows-header .table-rows-header-item .row-dragger .data-icon-drag {\r
    font-size: 10px;\r
    color: #fff;\r
    margin-left: 1px;\r
}\r
\r
.table-wrapper.data-table-highlight-row .table-rows-header .table-rows-header-item .row-dragger .data-icon-drag,.table-wrapper.data-table-highlight-all .table-rows-header .table-rows-header-item .row-dragger .data-icon-drag{\r
    display: none;\r
}\r
\r
.table-wrapper .table-rows-header .table-rows-header-item .row-dragger .drag-info {\r
    height: 100%;\r
    display: flex;\r
    align-items: center;\r
}\r
.table-wrapper .table-rows-header.dragging .table-rows-header-item .rows-trigger,.table-wrapper.drag-selecting .table-rows-header-item .rows-trigger {\r
    display: none;\r
}\r
.table-wrapper .table-rows-header.resize .table-rows-header-item {\r
    cursor: row-resize;\r
}\r
\r
.table-wrapper .table-viewport {\r
    position: relative;\r
    overflow: hidden;\r
    overflow-y: hidden;\r
    cursor: text;\r
}\r
\r
.table-wrapper.active .table-viewport{\r
    padding-top: 28px;\r
    padding-left: 13px;\r
    margin-left: -13px;\r
}\r
\r
.table-wrapper .table-viewport .scrollbar-shadow-left {\r
    top: 0;\r
    bottom: 10px;\r
}\r
\r
.table-wrapper.active .table-viewport .scrollbar-shadow-left {\r
    top: 28px;\r
    margin-left: 14px;\r
}\r
\r
.table-wrapper .table-viewport .scrollbar-shadow-right {\r
    top: 0;\r
    bottom: 10px;\r
}\r
\r
.table-wrapper.active .table-viewport .scrollbar-shadow-right {\r
    top: 28px;\r
}\r
\r
.table-wrapper .table-placeholder {\r
    position: absolute;\r
    border: 1px solid #008dff;\r
    background: #008dff;\r
    display: none;\r
    z-index: 126;\r
}\r
.table-wrapper .table-menubar {\r
    position: absolute;\r
    top: -99999px;\r
    left: -99999px;\r
    padding: 4px 0;\r
    border-radius: 4px;\r
    border: 1px solid #e9e9e9;\r
    box-shadow: 0px 1px 4px 0px rgba(0, 0, 0, 0.08);\r
    background: #fff;\r
    /* \\u4ee3\\u7801\\u5757\\u7684 codemirror \\u9ed8\\u8ba4\\u7ed9\\u6bcf\\u884c\\u4ee3\\u7801\\u7684 pre \\u8bbe\\u7f6e\\u4e86 z-index 2, \\u5982\\u679c\\u8868\\u683c\\u5728\\u4ee3\\u7801\\u5757\\u524d\\u9762\\uff0c\\u9020\\u6210\\u53f3\\u952e\\u83dc\\u5355\\u65e0\\u6cd5\\u70b9\\u51fb */\r
    z-index: 130;\r
    min-width: 240px;\r
}\r
.table-wrapper .table-menubar .table-menubar-item {\r
    padding: 6px 16px;\r
    cursor: default;\r
}\r
.table-wrapper .table-menubar .table-menubar-item:hover {\r
    background: #f0f0f0;\r
}\r
\r
.table-wrapper .table-menubar .table-menubar-item.disabled {\r
    color: #aaa;\r
    display: none;\r
}\r
\r
.table-wrapper .table-menubar .table-menubar-item .table-menubar-item-input {\r
    width: 46px;\r
    line-height: 12px;\r
    font-size: 12px;\r
    outline: none;\r
    border: 1px solid #dadada;\r
    border-radius: 4px;\r
    text-align: center;\r
}\r
\r
.table-wrapper .table-menubar .table-menubar-item .table-menubar-item-input::-moz-selection {\r
    color: inherit;\r
    background:transparent\r
}\r
\r
.table-wrapper .table-menubar .table-menubar-item .table-menubar-item-input::selection {\r
    color: inherit;\r
    background:transparent\r
}\r
\r
.table-wrapper .table-menubar .table-menubar-item .table-menubar-item-input:focus::-moz-selection\r
{\r
    color: #fff;\r
    background: #1890ff;\r
}\r
\r
.table-wrapper .table-menubar .table-menubar-item .table-menubar-item-input:focus::selection\r
{\r
    color: #fff;\r
    background: #1890ff;\r
}\r
\r
.table-wrapper .table-menubar .split {\r
    height: 0;\r
    border-top: 1px solid #e8e8e8;\r
    margin: 2px 0;\r
}\r
\r
.table-wrapper .table-main-content {\r
    margin: 2px 2px;\r
    padding: 4px 4px;\r
    position: relative;\r
    z-index: 3;\r
}\r
\r
.table-wrapper .table-main-content [data-card-key] {\r
    max-width: 100%;\r
}\r
\r
.table-wrapper .table-main-bg {\r
    position: absolute;\r
    top: 0;\r
    left: 0;\r
    right: 0;\r
    z-index: 1;\r
    bottom: 0;\r
    pointer-events: none;\r
}\r
\r
.table-wrapper .table-main-bg .table-main-border-top {\r
    position: absolute;\r
    top: 0;\r
    left: 0;\r
    right: 0;\r
    z-index: 1;\r
    height: 0;\r
    border-top: 1px solid rgb(217, 217, 217);\r
}\r
\r
.table-wrapper:not(.active) [data-table-no-border="true"] .table-main-bg .table-main-border-top {\r
    border-top-color: transparent;\r
}\r
\r
.table-wrapper.active [data-table-no-border="true"] .table-main-bg .table-main-border-top {\r
    border-top-style: dashed;\r
}\r
\r
.table-wrapper .table-main-bg .table-main-border-right {\r
    display: none;\r
    position: absolute;\r
    top: 0;\r
    bottom: 0;\r
    right: -1px;\r
    z-index: 1;\r
    width: 0;\r
    border-right: 1px solid rgb(217, 217, 217);\r
}\r
\r
.table-wrapper:not(.active) [data-table-no-border="true"] .table-main-bg .table-main-border-right {\r
    border-right-color: transparent;\r
}\r
\r
.table-wrapper.active [data-table-no-border="true"] .table-main-bg .table-main-border-right {\r
    border-right-style: dashed;\r
}\r
\r
.table-wrapper tr td.table-last-row .table-main-bg .table-main-border-right {\r
    display: block;\r
    right: 0;\r
}\r
\r
.table-wrapper .table-main-bg .table-main-border-bottom {\r
    display: none;\r
    position: absolute;\r
    bottom: -1px;\r
    left: 0;\r
    right: 0;\r
    z-index: 1;\r
    height: 0;\r
    border-bottom: 1px solid rgb(217, 217, 217);\r
}\r
\r
.table-wrapper:not(.active) [data-table-no-border="true"] .table-main-bg .table-main-border-bottom {\r
    border-bottom-color: transparent;\r
}\r
\r
.table-wrapper.active [data-table-no-border="true"] .table-main-bg .table-main-border-bottom {\r
    border-bottom-style: dashed;\r
}\r
\r
.table-wrapper tr td.table-last-column .table-main-bg .table-main-border-bottom{\r
    display: block;\r
    bottom: 0;\r
}\r
\r
.table-wrapper .table-main-bg .table-main-border-left {\r
    position: absolute;\r
    top: 0;\r
    bottom: 0;\r
    left: 0;\r
    z-index: 1;\r
    width: 0;\r
    border-left: 1px solid rgb(217, 217, 217);\r
}\r
\r
.table-wrapper:not(.active) [data-table-no-border="true"] .table-main-bg .table-main-border-left {\r
    border-left-color: transparent;\r
}\r
\r
.table-wrapper.active [data-table-no-border="true"] .table-main-bg .table-main-border-left {\r
    border-left-style: dashed;\r
}\r
\r
.table-wrapper .table-highlight {\r
    background: #ff4d4f;\r
    opacity: 0.08;\r
    position: absolute;\r
    z-index: 2;\r
    pointer-events: none;\r
    display: none;\r
}\r
\r
.table-wrapper.scrollbar-show .data-scrollable.scroll-x {\r
    padding-bottom: 10px;\r
}\r
\r
.table-wrapper .data-scrollable.scroll-x {\r
    padding-bottom: 0;\r
}\r
\r
.table-wrapper .data-scrollable.scroll-x:hover {\r
    overflow: hidden;\r
}\r
\r
.table-wrapper.scrollbar-show .data-scrollable.scroll-x .data-scrollbar-x{\r
    margin-bottom: 2px;\r
}\r
\r
.table-wrapper .data-scrollable .data-scrollbar.data-scrollbar-x {\r
    height: 6px;\r
    z-index: 5;\r
}\r
\r
.table-wrapper .data-scrollable .data-scrollbar.data-scrollbar-x .data-scrollbar-trigger {\r
    height: 6px;\r
}\r
\r
.table-wrapper .table-rows-header .table-row-delete-button,.table-wrapper .table-rows-header .table-row-add-button {\r
    position: absolute;\r
    right: 100%;\r
    display: none;\r
    justify-content: center;\r
    align-items: center;\r
    z-index: 2;\r
    width: 24px;\r
    height: 24px;\r
    border: 1px solid #e4e4e4;\r
    border-radius: 2px;\r
    cursor: pointer;\r
    background-color: #fff;\r
    background-position: center center;\r
    background-repeat: no-repeat;\r
\r
    left: 14px;\r
    margin-left: 2px;\r
    margin-top: -2px;\r
}\r
\r
.table-wrapper .table-rows-header .table-row-delete-button .data-icon,.table-wrapper .table-rows-header .table-row-add-button .data-icon {\r
    font-size: 12px;\r
}\r
\r
.table-wrapper .table-rows-header .table-row-add-button {\r
    left: -30px;\r
    margin-top: -12px;\r
}\r
\r
.table-wrapper .table-rows-header .table-row-delete-button:hover,.table-wrapper .table-col-delete-button:hover {\r
    color:#ff4d4f;\r
}\r
\r
.table-wrapper .table-col-delete-button, .table-wrapper .table-col-add-button {\r
    position: absolute;\r
    bottom: 100%;\r
    display: none;\r
    justify-content: center;\r
    align-items: center;\r
    z-index: 128;\r
    margin-bottom: 4px;\r
    width: 24px;\r
    height: 24px;\r
    border: 1px solid #e4e4e4;\r
    border-radius: 2px;\r
    cursor: pointer;\r
    background: #fff;\r
    background-position: center center;\r
    background-repeat: no-repeat;\r
    margin-left: -12px;\r
}\r
\r
.table-wrapper .table-col-delete-button .data-icon, .table-wrapper .table-col-add-button .data-icon {\r
    font-size: 12px;\r
}\r
\r
.table-wrapper .table-cols-header .table-col-add-button .table-col-add-split-button {\r
    position: absolute;\r
    width: 2px;\r
    left: 10px;\r
    top: 22px;\r
    background: #008dff;\r
    display: none;\r
}\r
\r
.table-wrapper .table-rows-header .table-row-add-button .table-row-add-split-button {\r
    position: absolute;\r
    height: 2px;\r
    left: 22px;\r
    background: #008dff;\r
    display: none;\r
}\r
\r
.table-wrapper .table-col-add-button:hover, .table-wrapper .table-row-add-button:hover {\r
    color: #008dff;\r
}\r
\r
.table-wrapper .table-col-add-button:hover .table-col-add-split-button{\r
    display: block;\r
}\r
\r
.table-wrapper .table-row-add-button:hover .table-row-add-split-button{\r
    display: block;\r
}\r
\r
.data-table-reader .data-table tr td {\r
    border: 1px solid rgb(217, 217, 217);\r
    cursor: auto;\r
    padding: 4px 8px;\r
}\r
\r
.data-table-reader .data-table[data-table-no-border="true"] tr td {\r
    border:0 none\r
}\r
\r
.data-table-reader.data-scrollable.scroll-x {\r
    padding-bottom: 10px;\r
}\r
\r
.data-table-reader .scrollbar-shadow-left, .data-table-reader .scrollbar-shadow-right {\r
    bottom: 10px;\r
}\r
\r
.data-table-reader.scrollbar-show.data-scrollable.scroll-x .data-scrollbar-x{\r
    margin-bottom: 2px;\r
}\r
\r
.data-table-reader.data-scrollable .data-scrollbar.data-scrollbar-x {\r
    height: 6px;\r
}\r
\r
.data-table-reader.data-scrollable .data-scrollbar.data-scrollbar-x .data-scrollbar-trigger {\r
    height: 6px;\r
}\r
\r
[data-card-key="table"].data-card-block-max > [data-card-element="body"] > [data-card-element="center"] {\r
    padding: 48px;\r
    margin-top: 4px;\r
}\r
/**\r
\u8868\u683C\u53EF\u6EA2\u51FA\u6837\u5F0F\r
**/\r
.table-wrapper.table-overflow {\r
    width: auto;\r
}`;M0(US);var qS=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.onCopy=function(a){if(!ge(n.editor))return!0;var o=n.editor,l=o.change,c=o.card,d=l.range.get(),v=c.find(d.commonAncestorNode,!0);if(v&&v.getSelectionNodes&&v.name===Is.cardName){var h=v.getSelectionNodes();if(h.length>1)return a.preventDefault(),v.command.copy(),n.editor.messageSuccess(n.editor.language.get("copy","success")),!1}return!0},n.onCut=function(a){if(!ge(n.editor))return!0;var o=n.editor,l=o.change,c=o.card,d=l.range.get(),v=c.find(d.commonAncestorNode,!0);if(v&&v.getSelectionNodes&&v.name===Is.cardName){var h=v.getSelectionNodes();if(h.length>1)return a.preventDefault(),v.command.cut(),!1}return!0},n.onPaste=function(a){if(!ge(n.editor))return!0;var o=n.editor,l=o.change,c=o.card,d=l.range.get(),v=c.find(d.commonAncestorNode,!0);return v&&v.getSelectionNodes&&v.name===Is.cardName&&v.command.hasCopyData()?(a.preventDefault(),v.command.mockPaste(),!1):!0},n.pasteSchema=function(a){a.data.blocks.forEach(function(o){o.allowIn||(o.allowIn=[]),o.allowIn.indexOf("td")<0&&o.allowIn.push("td")}),a.find(function(o){return o.name==="table"})[0].attributes={class:["data-table"],"data-table-no-border":"*","data-wdith":"@length",style:{width:"@length",background:"@color","background-color":"@color"}},a.find(function(o){return o.name==="tr"})[0].attributes={class:["data-table"],"data-table-no-border":"*",style:{height:"@length",background:"@color","background-color":"@color",display:"*"}},a.find(function(o){return o.name==="td"})[0].attributes={colspan:"@number",rowspan:"@number",class:["table-last-column","table-last-row","table-last-column","table-cell-selection"],style:{"background-color":"@color",background:"@color","vertical-align":["top","middle","bottom"],valign:["top","middle","bottom"]}}},n.pasteHtml=function(a){if(!!ge(n.editor)){var o=function(x){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"width",E=x.attributes("data-width"),M=E||x.css(_);M.endsWith("%")&&x.css(_,""),M.endsWith("pt")&&x.css(_,n.convertToPX(M))},l=a.find("table");if(l.length!==0){var c=new S0(n.editor),d=n.editor.change,v=d.range.get(),h=function(x){var _=x.find("thead"),E=_.find("th,td").toArray();E.forEach(function(D){x.before(D.children())});var M=x.find("tr").toArray();M.forEach(function(D){var I=D.find("td").toArray();I.forEach(function(P){n.editor.node.isEmpty(P)||x.before(P.children())})});var T=x.find("tfoot"),S=T.find("th,td").toArray();S.forEach(function(D){x.after(D.children())}),x.remove()},g=v.startNode.closest(Nn).length>0;l.each(function(w,x){var _,E,M,T=l.eq(x);if(!!T){if(g||((_=T.parent())===null||_===void 0?void 0:_.name)==="td"){h(T);return}var S=T.find("tr");S.each(function(Q){var ie=V(Q),L=ie.css("display");L==="none"?ie.remove():ie.css("display","");var F=ie.children();F.each(function(X){var se=V(X),Y=se.text();if(se.name!=="td"&&[`
`,`\r
`].includes(Y.trim())){var j=V("<td></td>");se.before(j),j.append(se)}})}),T=c.normalizeTable(T),o(T),o(T,"height");var D=T.find("tbody"),I=T.find("thead");I&&I.length>0&&D.prepend(I.children()),I.remove();var P=T.find("tfoot");P&&P.length>0&&D.append(P.children()),P.remove();var B=T.find("th");B.each(function(Q,ie){var L=B.eq(ie);L==null||L.replaceWith(V("<td>".concat(L.html(),"</td>")))});var $=T.find("td"),q=vr().createDocumentFragment();$.each(function(Q,ie){q=vr().createDocumentFragment();var L=$.eq(ie);if(!!L){o(L),o(L,"height");var F=L.css("background");F&&L.css("background-color",F);var X=L.attributes("valign");X&&L.attributes("vertical-align",X);for(var se=L.children(),Y=0;Y<se.length;Y++){var j=se.eq(Y);j&&q.appendChild(j[0])}var fe=V(q);L==null||L.empty().append(n.editor.node.normalize(fe))}});var G=((E=T)===null||E===void 0?void 0:E.css("background"))||((M=T)===null||M===void 0?void 0:M.css("background-color"));G&&$.css("background",G),S=T.find("tr");var H=1;S.each(function(Q){var ie=V(Q),L=ie==null?void 0:ie.find("td");if((L==null?void 0:L.length)===0&&H<2&&(ie==null||ie.remove()),L&&(L==null?void 0:L.length)>0){var F=L.toArray().map(function(se){return se[0].rowSpan});H=Math.max.apply(Math,Hn(F))}ie&&(o(ie),o(ie,"height"));var X=(ie==null?void 0:ie.css("background"))||(ie==null?void 0:ie.css("background-color"));X&&(L==null||L.css("background",X))}),n.editor.nodeId.generateAll(T,!0);var z=T.allChildren();z.forEach(function(Q){n.editor.node.isInline(Q)&&n.editor.inline.repairCursor(Q)});var O=T.get().outerHTML.replace(/\n|\r\n/g,"").replace(/>\s+</g,"><");n.editor.card.replaceNode(T,Is.cardName,{html:O})}})}}},n.parseHtml=function(a,o){var l=[];return a.find("[".concat(Gt,'="').concat(Is.cardName,'"],[').concat(_n,'="').concat(Is.cardName,'"]')).each(function(c){var d=V(c),v=d.find("table"),h=wr(d.attributes(er));if(v.length===0){if(!h||!h.html)return;if(v=V(Ld(h.html)),v.length===0){d.remove();return}else n.editor.trigger("parse:html",v)}var g=v.attributes("width")||v.css("width");v.css({outline:"none","border-collapse":"collapse",width:"100%"}),v.attributes("data-width",g);var w=v.find("td");w.each(function(x,_){var E=w.eq(_);E==null||E.css({"min-width":"auto","white-space":"flat","word-wrap":"break-word",margin:"4px 8px",border:v.attributes("data-table-no-border")?"0 none":"1px solid #d9d9d9",padding:"4px 8px",cursor:"default","vertical-align":E.css("vertical-align")||"top"})}),v.find(qe.TABLE_TD_BG_CLASS).remove(),v.find(qe.TABLE_TD_CONTENT_CLASS).each(function(x){n.editor.node.unwrap(V(x))}),o&&(v=o(v,h)),d.replaceWith(v),l.push(v)}),l},n.checkMarkdownMath=function(a){var o;return!(!((o=n.checkMarkdown(a))===null||o===void 0)&&o.match)},n.checkMarkdown=function(a){if(!(!ge(n.editor)||n.options.markdown===!1||!a.isText())){var o=a.text();if(!!o){var l=/\n\s*(\|?(\s*:?-+:?\s*)+\|?)+\s*(\n|$)/,c=l.exec(o);if(!(!c||c[0].indexOf("|")<0))return{reg:l,match:c}}}},n.pasteMarkdown=function(a){var o=n.checkMarkdown(a);if(!!o){var l=o.reg,c=o.match;if(!!c){var d=function v(h){var g=h.text();if(!!g){var w=l.exec(g);if(!(!w||w[0].indexOf("|")<0)){var x=h.clone(!0).get(),_=w[0].split("|").filter(function(H){return H.trim()!==""&&H.includes("-")}).length,E=x.splitText(w.index),M=new RegExp("(\\|?([^\\|\\n]+)\\|?){".concat(_,",}\\s*$")),T=(x.textContent||"").split(/\n/),S=M.exec(T.length>0?T[T.length-1]:"");if(!(!S||S[0].indexOf("|")<0)){T.pop(),x.splitText(T.join(`
`).length+S.index);var D=E.splitText(w[0].length),I=x.textContent||"",P=n.getMarkdownCell(S);if(P.length===_){var B=[];B.push("<tr>".concat(P.map(function(H){return"<td>".concat(H,"</td>")}).join(""),"</tr>"));for(var $=new RegExp("^\\n*(\\|?([^\\|\\n]+)\\|?){1,".concat(_,"}(?:\\n|$)"));S&&(S=$.exec(D.textContent||""),!(!S||S[0].indexOf("|")<0||S[0].startsWith(`

`)));){var q=n.getMarkdownCell(S,_);if(q.length===0)break;if(q.length<_)for(;_-q.length>0;)q.push("");B.push("<tr>".concat(q.map(function(H){return"<td>".concat(H,"</td>")}).join(""),"</tr>")),D=D.splitText(S[0].length)}var G=function(z){var O,Q=V("<table>".concat(z.join(""),"</table>"));return(O=Q.get())===null||O===void 0?void 0:O.outerHTML};I+=G(B)+`
`,I+=D.textContent,h.text(I),v(h)}}}}};d(a)}}},n}return Be(t,[{key:"init",value:function(){var e=this.editor;if(this.options.colMinWidth||(this.options.colMinWidth=40),this.options.rowMinHeight||(this.options.rowMinHeight=30),e.language.add(WS),e.schema.add(this.schema()),e.conversion.add("th","td"),e.on("parse:html",this.parseHtml),e.on("paste:each-after",this.pasteHtml),e.on("paste:schema",this.pasteSchema),e.on("paste:markdown-check",this.checkMarkdownMath),e.on("paste:markdown-after",this.pasteMarkdown),ge(e)){e.change.event.onDocument("copy",this.onCopy,0),e.change.event.onDocument("cut",this.onCut,0),e.change.event.onDocument("paste",this.onPaste,0);var r={};e.history.onFilter(function(i){if(i.id&&("od"in i&&(i.od.startsWith("width")||i.od===i.id||i.od.startsWith("data:")||/^\d+$/.test(i.od))||"oi"in i&&(i.oi.startsWith("width")||i.oi===i.id||i.oi.startsWith("data:")||/^\d+$/.test(i.oi)))){var a,o=r[i.id];if(!o||!o.root.parent()){var l=V("[".concat(fn,'="').concat(i.id,'"]'));delete r[i.id],l.length>0&&(o=e.card.find(l))}if(((a=o)===null||a===void 0?void 0:a.name)===Is.cardName&&!o.isChanged)return i.nl=!0,!0}return!1})}}},{key:"hotkey",value:function(){return this.options.hotkey||""}},{key:"schema",value:function(){return[{name:"table",type:"block",attributes:{class:["data-table"],"data-table-no-border":"*",style:{width:"@length"}}},{name:"colgroup",type:"block",allowIn:["table"]},{name:"col",type:"block",isVoid:!0,attributes:{width:"@number",span:"@number"},allowIn:["colgroup"]},{name:"thead",type:"block",allowIn:["table"]},{name:"tbody",type:"block",allowIn:["table"]},{name:"tr",type:"block",attributes:{style:{height:"@length"}},allowIn:["tbody","thead","tfoot"]},{name:"td",type:"block",attributes:{colspan:"@number",rowspan:"@number",class:["table-last-column","table-last-row","table-last-column","table-cell-selection"],style:{"background-color":"@color","vertical-align":["top","middle","bottom"]}},allowIn:["tr"]},{name:"th",type:"block",attributes:{colspan:"@number",rowspan:"@number"},allowIn:["tr"]}]}},{key:"execute",value:function(e,r){if(!!ge(this.editor)){var i=this.editor.change,a=i.range.get();a.startNode.closest(Nn).length>0||this.editor.card.insert(Is.cardName,{rows:e||3,cols:r||3,overflow:!!this.options.overflow})}}},{key:"convertToPX",value:function(e){var r=/([\d\.]+)(pt|px)$/i.exec(e);return r&&r[2]==="pt"?String(Math.round(parseInt(r[1],10)*96/72))+"px":e}},{key:"getMarkdownCell",value:function(e,r){var i=e[0].split("|"),a=e[0].trim().replace(/\n/,"");a.endsWith("|")&&i.pop(),a.startsWith("|")&&i.shift();var o=[];return i.some(function(l){return r!==void 0&&o.length===r?!0:(o.push(l),!1)}),o}},{key:"destroy",value:function(){this.editor.off("parse:html",this.parseHtml),this.editor.off("paste:each-after",this.pasteHtml),this.editor.off("paste:schema",this.pasteSchema),this.editor.off("paste:markdown-check",this.checkMarkdownMath),this.editor.off("paste:markdown-after",this.pasteMarkdown)}}],[{key:"pluginName",get:function(){return"table"}}]),t}(Rr);function T0(b,u){u===void 0&&(u={});var t=u.insertAt;if(!(!b||typeof document=="undefined")){var n=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",t==="top"&&n.firstChild?n.insertBefore(e,n.firstChild):n.appendChild(e),e.styleSheet?e.styleSheet.cssText=b:e.appendChild(document.createTextNode(b))}}var $S=`.data-checkbox {\r
	font-size: 14px;\r
	font-variant: tabular-nums;\r
	color: rgba(0, 0, 0, 0.65);\r
	box-sizing: border-box;\r
	margin: 0;\r
	padding: 0;\r
	width: 16px;\r
	height: 16px;\r
	max-width: 16px !important;\r
	list-style: none;\r
	white-space: nowrap;\r
	cursor: pointer;\r
	outline: none;\r
	display: inline-block;\r
	line-height: 1;\r
	position: relative;\r
}\r
\r
.data-checkbox-checked:after {\r
	position: absolute;\r
	top: 0;\r
	left: 0;\r
	width: 100%;\r
	height: 100%;\r
	border-radius: 2px;\r
	border: 1px solid #347eff;\r
	content: "";\r
	visibility: hidden;\r
}\r
\r
.data-checkbox:not(.data-checkbox-mobile):focus .data-checkbox-inner,.data-checkbox:not(.data-checkbox-mobile) .data-checkbox-inner {\r
    border-color: #347eff\r
}\r
\r
.data-checkbox:hover:after{\r
	visibility: visible;\r
}\r
\r
.data-checkbox-inner {\r
	position: relative;\r
	top: 0;\r
	left: 0;\r
	width: 100%;\r
	height: 100%;\r
    display: inline-block;\r
	border: 1px solid #d9d9d9;\r
	border-radius: 2px;\r
	background-color: #fff;\r
	-webkit-transition: all 0.3s;\r
	transition: all 0.3s;\r
	border-collapse: separate;\r
}\r
\r
.data-checkbox-inner:after {\r
	-webkit-transform: rotate(45deg) scale(0);\r
	-ms-transform: rotate(45deg) scale(0);\r
	transform: rotate(45deg) scale(0);\r
	position: absolute;\r
	left: 4.57142857px;\r
	top: 1.14285714px;\r
	display: table;\r
	width: 5.71428571px;\r
	height: 9.14285714px;\r
	border: 2px solid #fff;\r
	border-top: 0;\r
	border-left: 0;\r
	content: ' ';\r
	-webkit-transition: all 0.1s cubic-bezier(0.71, -0.46, 0.88, 0.6), opacity 0.1s;\r
	transition: all 0.1s cubic-bezier(0.71, -0.46, 0.88, 0.6), opacity 0.1s;\r
	opacity: 0;\r
}\r
\r
.data-checkbox-checked .data-checkbox-inner:after {\r
	-webkit-transform: rotate(45deg) scale(1);\r
	-ms-transform: rotate(45deg) scale(1);\r
	transform: rotate(45deg) scale(1);\r
	position: absolute;\r
	display: table;\r
	border: 2px solid #fff;\r
	border-top: 0;\r
	border-left: 0;\r
	content: ' ';\r
	-webkit-transition: all 0.2s cubic-bezier(0.12, 0.4, 0.29, 1.46) 0.1s;\r
	transition: all 0.2s cubic-bezier(0.12, 0.4, 0.29, 1.46) 0.1s;\r
	opacity: 1;\r
}\r
\r
.data-checkbox-checked .data-checkbox-inner {\r
	background-color: #347eff;\r
    border-color: #347eff;\r
}\r
\r
.data-checkbox-disabled {\r
	cursor: not-allowed;\r
}\r
\r
.data-checkbox-disabled.data-checkbox-checked .data-checkbox-inner:after {\r
	-webkit-animation-name: none;\r
	animation-name: none;\r
	border-color: rgba(0, 0, 0, 0.25);\r
}\r
\r
.data-checkbox-disabled .data-checkbox-input {\r
	cursor: not-allowed;\r
}\r
\r
.data-checkbox-disabled .data-checkbox-inner {\r
	border-color: #d9d9d9 !important;\r
	background-color: #f5f5f5;\r
}\r
\r
.data-checkbox-disabled .data-checkbox-inner:after {\r
	-webkit-animation-name: none;\r
	animation-name: none;\r
	border-color: #f5f5f5;\r
	border-collapse: separate;\r
}\r
\r
.data-checkbox-disabled + span {\r
	color: rgba(0, 0, 0, 0.25);\r
	cursor: not-allowed;\r
}\r
`;T0($S);var um="data-checkbox",GS="data-checkbox-inner",op="data-checkbox-checked",vi=Mt("container"),A0=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),Object.defineProperty(Ye(n),vi,{writable:!0,value:void 0}),n.update=function(a){var o=a===void 0?n.isChecked():a,l=n.root.parent();if(o){var c;(c=oe(Ye(n),vi)[vi])===null||c===void 0||c.removeClass(op),l==null||l.removeAttributes("checked")}else{var d;(d=oe(Ye(n),vi)[vi])===null||d===void 0||d.addClass(op),l==null||l.attributes("checked","true")}return o},n.isChecked=function(){var a;return!!(!((a=oe(Ye(n),vi)[vi])===null||a===void 0)&&a.hasClass(op))},n.onClick=function(a){a.preventDefault(),a.stopPropagation();var o=n.update();n.setValue({checked:!o})},n}return Be(t,[{key:"onSelectByOther",value:function(){}},{key:"onSelect",value:function(){}},{key:"onActivateByOther",value:function(){}},{key:"render",value:function(){var e=`
        <span class="`.concat(um).concat(mt?" ".concat(um,"-mobile"):"",`">
                <span class="`).concat(GS,`"></span>
            </span>`),r=this.getValue();oe(this,vi)[vi]?oe(this,vi)[vi]=this.getCenter().first():(oe(this,vi)[vi]=V(e),this.getCenter().append(oe(this,vi)[vi])),this.update(!(r!=null&&r.checked)),!(!ge(this.editor)||this.editor.readonly)&&oe(this,vi)[vi].on("mousedown",this.onClick)}},{key:"destroy",value:function(){var e;(e=oe(this,vi)[vi])===null||e===void 0||e.off("mousedown",this.onClick)}}],[{key:"cardName",get:function(){return"checkbox"}},{key:"cardType",get:function(){return un.INLINE}},{key:"singleSelectable",get:function(){return!1}},{key:"autoSelected",get:function(){return!1}},{key:"collab",get:function(){return!1}},{key:"focus",get:function(){return!1}}]),t}(ni),ZS=`.am-engine .data-list-item [data-card-key="checkbox"],.am-engine-view .data-list-item [data-card-key="checkbox"] {\r
	margin-left: 0;\r
}\r
\r
.am-engine .data-list-task,.am-engine-view .data-list-task {\r
	list-style: none;\r
	text-indent: 0;\r
}\r
\r
.am-engine .data-list-task [data-card-key="checkbox"],.am-engine-view .data-list-task [data-card-key="checkbox"] {\r
    margin-left: -22px;\r
    height: 16px;\r
    display: inline-block;\r
    width: 22px;\r
    vertical-align: middle;\r
    height: 100%;\r
}\r
\r
.am-engine .data-list-task [data-card-key="checkbox"] [data-card-element="center"],.am-engine .data-list-task [data-card-key="checkbox"] [data-card-element="body"],.am-engine-view .data-list-task [data-card-key="checkbox"] [data-card-element="center"]{\r
    height: 16px;\r
    width: 16px;\r
    vertical-align: unset;\r
}`;T0(ZS);var YS=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.cardName="checkbox",n.tagName="ul",n.attributes={class:"@var0","data-indent":"@var1"},n.variable={"@var0":{required:!0,value:[n.editor.list.CUSTOMZIE_UL_CLASS,"data-list-task"]},"@var1":"@number"},n.allowIn=["blockquote","$root"],n.parseHtml=function(a,o){var l=function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return'<span style="'.concat(v?"background:#347eff;position:relative;":"background:#fff;",'width: 16px;height: 16px;display: inline-block;border: 1px solid #347eff;border-radius: 2px;transition: all 0.3s;border-collapse: separate;">').concat(v,"</span>")},c=[];return a.find("[".concat(Gt,'="checkbox"]')).each(function(d){var v=V(d),h=V("<span>".concat(v.find(".data-checkbox-checked").length>0?l('<span style="transform: rotate(45deg) scale(1);position: absolute;display: block;border: 2px solid #fff;border-top: 0;border-left: 0;width:5.71428571px;height:9.14285714px;transition: all 0.2s cubic-bezier(0.12, 0.4, 0.29, 1.46) 0.1s;opacity: 1;left:3.57142857px;top:0.14285714px;"></span>'):l(),"</span>"));if(h.css({margin:"3px 0.5ex","vertical-align":"middle",width:"16px",height:"16px",color:"color: rgba(0, 0, 0, 0.65)"}),v.empty(),o){var g=n.editor.card.find(v),w=(g==null?void 0:g.getValue())||wr(v.attributes(er));w&&(h=o(h,w))}v.append(h),c.push(v)}),a.find(".data-list-task").css({"list-style":"none"}),c},n.markdown=function(a,o,l){var c=n.options.markdown;if(!(!ge(n.editor)||c===!1)){var d=n.editor,v=d.node,h=d.command,g=n.editor.block,w=g.findPlugin(l);if(!(l.name!=="p"||w&&w.constructor.pluginName==="heading")){var x=["[]","[ ]","[x]"];if(Array.isArray(c)&&(x=c),!(x.indexOf(o)<0))return a.preventDefault(),g.removeLeftText(l),v.isEmpty(l)&&(l.empty(),l.append("<br />")),h.execute(n.constructor.pluginName,o==="[x]"?{checked:!0}:void 0),!1}}},n.checkMarkdownMath=function(a){var o;return!(!((o=n.checkMarkdown(a))===null||o===void 0)&&o.match)},n.checkMarkdown=function(a){if(!(!ge(n.editor)||!n.markdown||!a.isText())){var o=a.text();if(!!o){var l=/(^|\r\n|\n)(-\s*)?(\[[\sx]{0,1}\])/,c=l.exec(o);return{reg:l,match:c}}}},n.pasteEachAfter=function(a){var o=a.find("li.".concat(n.editor.list.CUSTOMZIE_LI_CLASS));o.each(function(l,c){var d=o.eq(c);if(!!d){var v=d.first();if(v&&v.name===A0.cardName){var h=n.editor.card.find(v);if(h){var g=d.parent();g==null||g.addClass("data-list-task");var w=h.getValue();w&&w.checked?g==null||g.attributes("checked","true"):g==null||g.removeAttributes("checked")}}}})},n.pasteMarkdown=function(a){var o=n.checkMarkdown(a);if(!!o){var l=o.match;if(!!l){var c=n.editor,d=c.list,v=c.card,h=function(T,S){var D,I=V("<".concat(n.tagName,' class="').concat(d.CUSTOMZIE_UL_CLASS,' data-list-task">').concat(T.join(""),"</").concat(n.tagName,">"));return S&&I.attributes(n.editor.list.INDENT_KEY,S),d.addBr(I),(D=I.get())===null||D===void 0?void 0:D.outerHTML},g=a.text(),w=l[1]||"",x=g.split(/\n|\r\n/),_=[],E=0;x.forEach(function(M){var T=/^(\s*)(-\s*)?(\[[\sx]{0,1}\])/.exec(M);if(T&&!/(\[(.*)\]\(([\S]+?)\))/.test(M)){var S,D=T[0].length,I=M.substr(/^\s+/.test(M.substr(D))?D+1:D),P=V("<span />"),B=v.replaceNode(P,n.cardName,{checked:T[0].indexOf("x")>0});P.remove(),T[1].length!==E&&_.length>0&&(w+=h(_,E),_=[],E=Math.ceil(T[1].length/2)),_.push('<li class="'.concat(d.CUSTOMZIE_LI_CLASS,'">').concat((S=B.get())===null||S===void 0?void 0:S.outerHTML).concat(I,"</li>"))}else _.length>0?(w+=h(_,E)+`
`+M+`
`,_=[]):w+=M+`
`}),_.length>0&&(w+=h(_,E)+`
`),a.text(w)}}},n}return Be(t,[{key:"init",value:function(){At(St(t.prototype),"init",this).call(this),this.editor.on("parse:html",this.parseHtml),ge(this.editor)&&(this.editor.on("paste:markdown-check",this.checkMarkdownMath),this.editor.on("paste:markdown",this.pasteMarkdown),this.editor.on("paste:each-after",this.pasteEachAfter))}},{key:"schema",value:function(){var e=At(St(t.prototype),"schema",this).call(this);return[e,{name:"li",type:"block",attributes:{class:{required:!0,value:this.editor.list.CUSTOMZIE_LI_CLASS},checked:["true","false"]},allowIn:["ul"]}]}},{key:"isCurrent",value:function(e){var r;return e.name==="li"?e.hasClass(this.editor.list.CUSTOMZIE_LI_CLASS)&&((r=e.first())===null||r===void 0?void 0:r.attributes(Gt))==="checkbox":e.hasClass("data-list")&&e.hasClass("data-list-task")}},{key:"execute",value:function(e){var r=this;if(!!ge(this.editor)){var i=this.editor,a=i.change,o=i.list,l=i.block;o.split();var c=a.range.get(),d=l.findBlocks(c);if(d){var v=c.createSelection("tasklist-execute");if(o.isSpecifiedType(d,"ul","checkbox"))o.unwrap(d);else{var h=o.toCustomize(d,"checkbox",e);h.forEach(function(w){r.editor.node.isList(w)&&w.addClass("data-list-task")})}if(v.move(),c.collapsed&&c.startContainer.nodeType===Node.ELEMENT_NODE&&c.startContainer.childNodes.length===0&&c.startContainer.parentNode){var g=document.createElement("br");c.startNode.before(g),c.startContainer.parentNode.removeChild(c.startContainer),c.select(g),c.collapse(!1)}a.apply(c),o.merge()}}}},{key:"hotkey",value:function(){return this.options.hotkey||"mod+shift+9"}},{key:"destroy",value:function(){At(St(t.prototype),"destroy",this).call(this),this.editor.off("parse:html",this.parseHtml),ge(this.editor)&&(this.editor.off("paste:markdown-check",this.checkMarkdownMath),this.editor.off("paste:markdown",this.pasteMarkdown),this.editor.off("paste:each-after",this.pasteEachAfter))}}],[{key:"pluginName",get:function(){return"tasklist"}}]),t}(zp);function KS(b,u){u===void 0&&(u={});var t=u.insertAt;if(!(!b||typeof document=="undefined")){var n=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",t==="top"&&n.firstChild?n.insertBefore(e,n.firstChild):n.appendChild(e),e.styleSheet?e.styleSheet.cssText=b:e.appendChild(document.createTextNode(b))}}var VS=`.data-video {\r
  margin: 0 auto;\r
  position: relative;\r
  cursor: pointer;\r
}\r
  .data-video-content {\r
    position: relative;\r
    height: 420px;\r
    background: #f7f7f7;\r
  }\r
  .data-video-content video {\r
    width: 100%;\r
    height: 100%;\r
    outline: none;\r
    position: relative;\r
    z-index: 1;\r
    background: #000;\r
  }\r
  .data-video-uploading,\r
  .data-video-uploaded,\r
  .data-video-error {\r
    border: 1px solid #e6e6e6;\r
    background: #f6f6f6;\r
  }\r
  .data-video-content .data-video-mask {\r
    width: 100%;\r
    height: 100%;\r
    position: absolute;\r
    left: 0;\r
    top: 0;\r
    z-index: 1;\r
  }\r
  .data-video-done {\r
    height: auto;\r
    border: none;\r
    background: none;\r
    line-height: 0;\r
  }\r
  .data-video-active {\r
    -webkit-user-select: none;\r
       -moz-user-select: none;\r
        -ms-user-select: none;\r
            user-select: none;\r
  }\r
  .data-video-center {\r
    position: absolute;\r
    top: 50%;\r
    margin-top: -48px;\r
    width: 100%;\r
    height: 96px;\r
  }\r
  .data-video-center .data-video-icon,\r
  .data-video-center .data-video-name,\r
  .data-video-center .data-video-message,\r
  .data-video-center .data-video-progress,\r
  .data-video-center .data-video-transcoding {\r
    text-align: center;\r
  }\r
  .data-video-center .data-video-icon {\r
    font-size: 24px;\r
    color: #BFBFBF;\r
    margin-bottom: 12px;\r
  }\r
  .data-video-center .data-video-name {\r
    color: #595959;\r
    margin-bottom: 12px;\r
  }\r
  .data-video-center .data-video-message {\r
    color: #595959;\r
  }\r
  .data-video-center .data-video-anticon {\r
    display: inline-block;\r
    font-style: normal;\r
    vertical-align: -0.125em;\r
    text-align: center;\r
    text-transform: none;\r
    line-height: 0;\r
    text-rendering: optimizeLegibility;\r
    -webkit-font-smoothing: antialiased;\r
    margin-right: 5px;\r
  }\r
  .data-video-center .data-video-anticon .data-video-anticon-spin {\r
    display: inline-block;\r
    -webkit-animation: loadingCircle 1s infinite linear;\r
    animation: loadingCircle 1s infinite linear;\r
  }\r
  .data-video-center .data-error-icon {\r
    width: 16px;\r
    height: 16px;\r
    display: inline-block;\r
    background: #F5222D;\r
    text-align: center;\r
    font-size: 12px;\r
    color: #ffffff;\r
    padding: 1px 0 0 0;\r
    line-height: 16px;\r
    border-radius: 100%;\r
    vertical-align: middle;\r
    margin: -2px 5px 0 0;\r
  }\r
\r
.data-video-title {\r
  text-align: center;\r
}\r
.data-video-title::-moz-selection {\r
  background: transparent\r
}\r
.data-video-title::selection {\r
  background: transparent\r
}\r
.data-video .data-resizer {\r
  z-index: inherit;\r
}\r
.data-video .data-resizer .data-resizer-holder {\r
  z-index: 2;\r
}\r
\r
.data-video .data-resizing {\r
  z-index: 3;\r
}`;KS(VS);var yu=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.maxWidth=0,n.resizer=void 0,n.video=void 0,n.rate=1,n.isLoad=!1,n.container=void 0,n.videoContainer=void 0,n.title=void 0,n.mask=void 0,n.onBeforeRender=function(a,o){var l=n.editor.plugin.findPlugin("video");if(l){var c=l.options||{},d=c.onBeforeRender;if(d)return d(a,o)}return o},n.downloadFile=function(){var a=n.getValue();!(a!=null&&a.download)||window.open(_l(n.onBeforeRender("download",a.url)))},n.onWindowResize=function(){if(!!ge(n.editor)&&(n.maxWidth=n.getMaxWidth(),n.resetSize(),n.resizer)){var a,o;n.resizer.maxWidth=n.maxWidth,n.resizer.setSize(((a=n.videoContainer)===null||a===void 0?void 0:a.width())||0,((o=n.videoContainer)===null||o===void 0?void 0:o.height())||0)}},n.handleClick=function(a){ge(n.editor)&&!n.activated&&n.editor.card.activate(n.root,Os.MOUSE_DOWN,a)},n}return Be(t,[{key:"getLocales",value:function(){return this.editor.language.get("video")}},{key:"renderTemplate",value:function(e){var r=e.name,i=e.status,a=e.size,o=e.message,l=e.percent,c=this.getLocales(),d={video:`<div class="data-video-icon">
                <svg width="32px" height="24px" viewBox="0 0 32 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" fill-opacity="0.25"><g transform="translate(-704.000000, -550.000000)" fill="#000000" fill-rule="nonzero">  <g transform="translate(704.000000, 550.000000)">    <g>      <path d="M13.09375,17.30625 L20.65625,12.375 C20.95,12.16875 20.95,11.809375 20.65625,11.603125 L13.09375,6.696875 C12.66875,6.4 12,6.6375 12,7.084375 L12,16.921875 C12,17.365625 12.671875,17.603125 13.09375,17.30625 Z" id="Path"></path>      <path d="M30,0 L2,0 C0.896875,0 0,0.896875 0,2 L0,22 C0,23.103125 0.896875,24 2,24 L30,24 C31.103125,24 32,23.103125 32,22 L32,2 C32,0.896875 31.103125,0 30,0 Z M5.25,21.25 C5.25,21.525 5.025,21.75 4.75,21.75 L2.5,21.75 C2.225,21.75 2,21.525 2,21.25 L2,18.5 C2,18.225 2.225,18 2.5,18 L4.75,18 C5.025,18 5.25,18.225 5.25,18.5 L5.25,21.25 Z M5.25,13.375 C5.25,13.65 5.025,13.875 4.75,13.875 L2.5,13.875 C2.225,13.875 2,13.65 2,13.375 L2,10.625 C2,10.35 2.225,10.125 2.5,10.125 L4.75,10.125 C5.025,10.125 5.25,10.35 5.25,10.625 L5.25,13.375 Z M5.25,5.5 C5.25,5.775 5.025,6 4.75,6 L2.5,6 C2.225,6 2,5.775 2,5.5 L2,2.75 C2,2.475 2.225,2.25 2.5,2.25 L4.75,2.25 C5.025,2.25 5.25,2.475 5.25,2.75 L5.25,5.5 Z M24.75,21.75 L7.25,21.75 L7.25,2.25 L24.75,2.25 L24.75,21.75 Z M30,21.25 C30,21.525 29.775,21.75 29.5,21.75 L27.25,21.75 C26.975,21.75 26.75,21.525 26.75,21.25 L26.75,18.5 C26.75,18.225 26.975,18 27.25,18 L29.5,18 C29.775,18 30,18.225 30,18.5 L30,21.25 Z M30,13.375 C30,13.65 29.775,13.875 29.5,13.875 L27.25,13.875 C26.975,13.875 26.75,13.65 26.75,13.375 L26.75,10.625 C26.75,10.35 26.975,10.125 27.25,10.125 L29.5,10.125 C29.775,10.125 30,10.35 30,10.625 L30,13.375 Z M30,5.5 C30,5.775 29.775,6 29.5,6 L27.25,6 C26.975,6 26.75,5.775 26.75,5.5 L26.75,2.75 C26.75,2.475 26.975,2.25 27.25,2.25 L29.5,2.25 C29.775,2.25 30,2.475 30,2.75 L30,5.5 Z" id="Shape"></path>    </g>  </g></g> </g></svg></div>`,spin:'<i class="data-video-anticon"><svg viewBox="0 0 1024 1024" class="data-video-anticon-spin" data-icon="loading" width="1em" height="1em" fill="currentColor" aria-hidden="true"> <path d="M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 0 0-94.3-139.9 437.71 437.71 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"></path></svg></i>',warn:'<div class="data-video-icon"><svg width="41px" height="29px" viewBox="0 0 41 29" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(-704.000000, -550.000000)">  <g id="Group-2" transform="translate(704.000000, 550.000000)">    <g id="video" fill="#000000" fill-rule="nonzero" opacity="0.449999988">      <path d="M13.09375,17.30625 C12.671875,17.603125 12,17.365625 12,16.921875 L12,7.084375 C12,6.6375 12.66875,6.4 13.09375,6.696875 L20.65625,11.603125 C20.95,11.809375 20.95,12.16875 20.65625,12.375 L13.09375,17.30625 Z M30,0 C31.103125,0 32,0.896875 32,2 L32,22 C32,23.103125 31.103125,24 30,24 L2,24 C0.896875,24 0,23.103125 0,22 L0,2 C0,0.896875 0.896875,0 2,0 L30,0 Z M5.25,21.25 L5.25,18.5 C5.25,18.225 5.025,18 4.75,18 L2.5,18 C2.225,18 2,18.225 2,18.5 L2,21.25 C2,21.525 2.225,21.75 2.5,21.75 L4.75,21.75 C5.025,21.75 5.25,21.525 5.25,21.25 Z M5.25,13.375 L5.25,10.625 C5.25,10.35 5.025,10.125 4.75,10.125 L2.5,10.125 C2.225,10.125 2,10.35 2,10.625 L2,13.375 C2,13.65 2.225,13.875 2.5,13.875 L4.75,13.875 C5.025,13.875 5.25,13.65 5.25,13.375 Z M5.25,5.5 L5.25,2.75 C5.25,2.475 5.025,2.25 4.75,2.25 L2.5,2.25 C2.225,2.25 2,2.475 2,2.75 L2,5.5 C2,5.775 2.225,6 2.5,6 L4.75,6 C5.025,6 5.25,5.775 5.25,5.5 Z M24.75,21.75 L24.75,2.25 L7.25,2.25 L7.25,21.75 L24.75,21.75 Z M30,21.25 L30,18.5 C30,18.225 29.775,18 29.5,18 L27.25,18 C26.975,18 26.75,18.225 26.75,18.5 L26.75,21.25 C26.75,21.525 26.975,21.75 27.25,21.75 L29.5,21.75 C29.775,21.75 30,21.525 30,21.25 Z M30,13.375 L30,10.625 C30,10.35 29.775,10.125 29.5,10.125 L27.25,10.125 C26.975,10.125 26.75,10.35 26.75,10.625 L26.75,13.375 C26.75,13.65 26.975,13.875 27.25,13.875 L29.5,13.875 C29.775,13.875 30,13.65 30,13.375 Z M30,5.5 L30,2.75 C30,2.475 29.775,2.25 29.5,2.25 L27.25,2.25 C26.975,2.25 26.75,2.475 26.75,2.75 L26.75,5.5 C26.75,5.775 26.975,6 27.25,6 L29.5,6 C29.775,6 30,5.775 30,5.5 Z" id="Combined-Shape"></path>    </g>    <g id="error-fill" transform="translate(21.000000, 10.000000)">      <rect id="Rectangle" fill="#000000" opacity="0" x="0" y="0" width="20" height="20"></rect>      <path d="M19.0267927,16.510301 L19.0272631,16.5111171 C19.4269215,17.2064579 18.9263267,18.0729167 18.125,18.0729167 L1.875,18.0729167 C1.07367326,18.0729167 0.573078461,17.2064579 0.973207261,16.510301 L9.0970084,2.44988987 C9.28650026,2.11750251 9.63068515,1.92708333 10,1.92708333 C10.368224,1.92708333 10.7098796,2.11659543 10.9017927,2.447801 L19.0267927,16.510301 Z" id="Path" stroke="#FFFFFF" stroke-width="0.833333333" fill="#FFFFFF"></path>      <path d="M18.6660156,16.71875 L10.5410156,2.65625 C10.4199219,2.44726562 10.2109375,2.34375 10,2.34375 C9.7890625,2.34375 9.578125,2.44726562 9.45898438,2.65625 L1.33398438,16.71875 C1.09375,17.1367188 1.39453125,17.65625 1.875,17.65625 L18.125,17.65625 C18.6054688,17.65625 18.90625,17.1367188 18.6660156,16.71875 Z M9.375,8.125 C9.375,8.0390625 9.4453125,7.96875 9.53125,7.96875 L10.46875,7.96875 C10.5546875,7.96875 10.625,8.0390625 10.625,8.125 L10.625,11.71875 C10.625,11.8046875 10.5546875,11.875 10.46875,11.875 L9.53125,11.875 C9.4453125,11.875 9.375,11.8046875 9.375,11.71875 L9.375,8.125 Z M10,15 C9.48242188,15 9.0625,14.5800781 9.0625,14.0625 C9.0625,13.5449219 9.48242188,13.125 10,13.125 C10.5175781,13.125 10.9375,13.5449219 10.9375,14.0625 C10.9375,14.5800781 10.5175781,15 10,15 Z" id="Shape" fill="#FAAD14" fill-rule="nonzero"></path></g></g></g> </g></svg></div>',error:'<span class="data-error-icon">X</span>'};if(i==="error")return`
            <div class="data-video">
                <div class="data-video-content data-video-error">
                    <div class="data-video-center">
                        <div class="data-video-name">`.concat(Sr(r),`</div>
                        <div class="data-video-message">
                            `).concat(d.error,`
                            `).concat(o||c.loadError,`
                        </div>
                    </div>
                </div>
            </div>`);var v=a?Im(a):"",h=r?'<div class="data-video-title">'.concat(Sr(r),"</div>"):"";if(i==="uploading")return`
            <div class="data-video">
                <div class="data-video-content data-video-uploading">
                    <div class="data-video-center">
                        `.concat(d.video,`
                        <div class="data-video-name">
                        `).concat(Sr(r)," (").concat(Sr(v),`)
                        </div>
                        <div class="data-video-progress">
                            `).concat(d.spin,`
                            <span class="percent">`).concat(l||0,`%<span>
                        </div>
                    </div>
                </div>
            </div>`);var g=typeof i=="undefined";if(i==="transcoding"||g)return`
            <div class="data-video">
                <div class="data-video-content data-video-uploaded">
                    <div class="data-video-center">
                        `.concat(d.video,`
                        <div class="data-video-name">
                        `).concat(Sr(r)," (").concat(Sr(v),`)
                        </div>
                        <div class="data-video-transcoding">
                            `).concat(d.spin,`
                            <span class="transcoding">`).concat(g?c.loading:c.transcoding,`%<span>
                        </div>
                    </div>
                </div>
            </div>
            `);var w=this.editor.plugin.components.video;return`
        <div class="data-video">
            <div class="data-video-content data-video-done"></div>
			`.concat(w&&w.options.showTitle!==!1?h:"",`
        </div>
        `)}},{key:"initPlayer",value:function(){var e,r,i=this,a,o=this.getValue();if(!!o){var l=_l(this.onBeforeRender("query",o.url)),c=document.createElement("video");c.preload="metadata",c.setAttribute("src",l),c.setAttribute("webkit-playsinline","webkit-playsinline"),c.setAttribute("playsinline","playsinline");var d=o.cover;d&&(c.poster=_l(this.onBeforeRender("cover",d))),this.maxWidth=this.getMaxWidth(),o.naturalHeight&&o.naturalWidth&&(this.rate=o.naturalHeight/o.naturalWidth);var v=(e=this.container)===null||e===void 0?void 0:e.find(".data-video-content");!v||(v.append(c),this.mask=V('<div class="data-video-mask" />'),v.append(this.mask),this.videoContainer=(r=this.container)===null||r===void 0?void 0:r.find(".data-video-content"),c.oncontextmenu=function(){return!1},c.onloadedmetadata=function(){var h=i.editor.plugin.findPlugin("video"),g=h==null?void 0:h.options.fullEditor,w=i.editor.container.width()-tn(i.editor.container.css("padding-left"))-tn(i.editor.container.css("padding-right"));if(!o.naturalWidth){var x;o.naturalWidth=c.videoWidth||((x=i.video)===null||x===void 0?void 0:x.width()),i.setValue({naturalWidth:o.naturalWidth})}if(o.naturalWidth&&!o.naturalHeight){var _;i.rate=(c.videoHeight||((_=i.video)===null||_===void 0?void 0:_.height())||1)/o.naturalWidth}if(typeof g=="number"?i.rate=g/w:g!==!0&&(i.rate=c.videoHeight/c.videoWidth,i.setValue({naturalWidth:c.videoWidth,naturalHeight:c.videoHeight})),g&&o.naturalWidth&&(o.naturalWidth<w||typeof g=="number")){var E=w*i.rate;i.setValue({naturalWidth:w,naturalHeight:E})}i.resetSize()},this.video=V(c),this.title=(a=this.container)===null||a===void 0?void 0:a.find(".data-video-title"),this.resetSize(),setTimeout(function(){c.controls=!0,ge(i.editor)||(c.controlsList="nodownload")},0))}}},{key:"toolbar",value:function(){var e=[],r=this.getValue();if(!r)return e;var i=r.status,a=r.download,o=this.getLocales();return i==="done"&&(a&&e.push({type:"button",content:'<span class="data-icon data-icon-download" />',title:o.download,onClick:this.downloadFile}),ge(this.editor)&&!this.editor.readonly&&(e.push({type:"copy"}),e.push({type:"separator"}))),ge(this.editor)&&!this.editor.readonly&&e.push({type:"delete"}),e}},{key:"setProgressPercent",value:function(e){var r;(r=this.container)===null||r===void 0||r.find(".percent").html("".concat(e,"%"))}},{key:"getMaxWidth",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getCenter(),r=this.editor.block.closest(e).get();return r?r.clientWidth:0}},{key:"resetSize",value:function(){var e,r,i;if(!!this.videoContainer){var a=this.getValue();if(!!a){this.videoContainer.css({width:"",height:""}),(e=this.container)===null||e===void 0||e.css({width:""});var o=(r=this.video)===null||r===void 0?void 0:r.get();if(!!o){var l=a.width,c=a.height,d=a.naturalWidth,v=a.naturalHeight;d||(d=o.videoWidth),v||(v=o.videoHeight),c?l?l&&c?c=Math.round(this.rate*l):(l=d,c=v):(c=v,l=Math.round(c/this.rate)):(l=d,c=Math.round(this.rate*l)),l>this.maxWidth&&(l=this.maxWidth,c=Math.round(l*this.rate)),(i=this.container)===null||i===void 0||i.css({width:l>0?"".concat(l,"px"):""}),this.videoContainer.css("width",l>0?"".concat(l,"px"):"");var h=this.editor.plugin.findPlugin("video"),g=h==null?void 0:h.options.fullEditor;typeof g=="number"&&this.videoContainer.css("height",c>0?"".concat(c,"px"):"")}}}}},{key:"changeSize",value:function(e,r){var i,a,o;e<24&&(e=24,r=e*this.rate),e>this.maxWidth&&(e=this.maxWidth,r=e*this.rate),r<24&&(r=24,e=r/this.rate),e=Math.round(e),r=Math.round(r),(i=this.videoContainer)===null||i===void 0||i.css({width:e>0?"".concat(e,"px"):""});var l=this.editor.plugin.findPlugin("video"),c=l==null?void 0:l.options.fullEditor;if(typeof c=="number"){var d;(d=this.videoContainer)===null||d===void 0||d.css({height:"".concat(r,"px")})}(a=this.container)===null||a===void 0||a.css({width:e>0?"".concat(e,"px"):""}),this.setValue({width:e,height:r}),(o=this.resizer)===null||o===void 0||o.destroy(),this.initResizer()}},{key:"initResizer",value:function(){var e=this,r,i=this.getValue();if(!!i){var a=i.naturalHeight,o=i.naturalWidth,l=i.status;if(!(!o||l!=="done")){var c=i.width,d=i.height,v=i.cover;this.maxWidth=this.getMaxWidth(),a?this.rate=a/o:a=Math.round(this.rate*o);var h=new Om({imgUrl:v,width:c||o,height:d||a,rate:this.rate,maxWidth:this.maxWidth,onChange:function(x){var _=x.width,E=x.height;return e.changeSize(_,E)}});this.resizer=h;var g=h.render();(r=this.videoContainer)===null||r===void 0||r.append(g)}}}},{key:"onActivate",value:function(e){if(e){var r,i;(r=this.container)===null||r===void 0||r.addClass("data-video-active"),(i=this.mask)===null||i===void 0||i.hide(),this.initResizer()}else{var a,o,l;(a=this.container)===null||a===void 0||a.removeClass("data-video-active"),(o=this.mask)===null||o===void 0||o.show(),(l=this.resizer)===null||l===void 0||l.destroy()}}},{key:"onSelectByOther",value:function(e,r){var i;(i=this.container)===null||i===void 0||i.css("outline",e?"2px solid "+r.color:"");var a="card-selected-other";return e?this.root.addClass(a):this.root.removeClass(a),this.container}},{key:"checker",value:function(e,r,i){var a=this.editor.command,o=function l(){a.executeMethod("video-uploader","query",e,function(c){c&&c.status!=="done"?setTimeout(l,3e3):r(c)},function(c){i(c)})};o()}},{key:"render",value:function(){var e=this,r=this.getValue();if(!(!r||this.container&&this.container.inEditor())){var i=this.getCenter();i.empty();var a=this.editor,o=a.command,l=a.plugin,c=r.video_id,d=r.status,v=this.getLocales();if(this.maxWidth=this.getMaxWidth(),ge(this.editor))if(d==="transcoding"){if(this.container=V(this.renderTemplate(r)),!c)throw"video id is undefined";return this.checker(c,function(g){var w=Ie(Ie({},r),{},{url:g!=null&&g.url?g.url:r.url,name:g!=null&&g.name?g.name:r.name,cover:g!=null&&g.cover?g.cover:r.cover,download:g!=null&&g.download?g.download:r.download,status:"done"});e.setValue(w),e.container=V(e.renderTemplate(w)),i.empty(),i.append(e.container),e.initPlayer()},function(g){var w=Ie(Ie({},r),{},{status:"error",message:g||v.loadError});e.setValue(w),e.container=V(e.renderTemplate(w)),i.empty(),i.append(e.container)}),this.container}else return d==="done"?(this.container=V(this.renderTemplate(Ie(Ie({},r),{},{status:void 0}))),o.executeMethod("video-uploader","query",c,function(g){var w=Ie(Ie({},r),{},{url:g!=null&&g.url?g.url:r.url,name:g!=null&&g.name?g.name:r.name,cover:g!=null&&g.cover?g.cover:r.cover,download:g!=null&&g.download?g.download:r.download});e.container=V(e.renderTemplate(w)),e.video=e.container.find("video"),i.empty(),i.append(e.container),e.initPlayer()},function(g){e.container=V(e.renderTemplate(Ie(Ie({},r),{},{status:"error",message:g||v.loadError}))),i.empty(),i.append(e.container)}),this.container):(this.container=V(this.renderTemplate(r)),this.container);else if(d==="done"){this.container=V(this.renderTemplate(Ie(Ie({},r),{},{status:void 0})));var h=function(w){var x=Ie(Ie({},r),{},{url:w!=null&&w.url?w.url:r.url,name:w!=null&&w.name?w.name:r.name,cover:w!=null&&w.cover?w.cover:r.cover,download:w!=null&&w.download?w.download:r.download});e.container=V(e.renderTemplate(x)),i.empty(),i.append(e.container),e.initPlayer()};return l.components["video-uploader"]?o.executeMethod("video-uploader","query",c,function(g){h(g)},function(g){e.container=V(e.renderTemplate(Ie(Ie({},r),{},{status:"error",message:g||v.loadError}))),i.empty(),i.append(e.container)}):h(),this.container}else if(d==="error")return V(this.renderTemplate(Ie(Ie({},r),{},{message:r.message||v.loadError})))}}},{key:"didUpdate",value:function(){var e;At(St(t.prototype),"didUpdate",this).call(this),(e=this.toolbarModel)===null||e===void 0||e.setDefaultAlign("top")}},{key:"didRender",value:function(){var e,r;if(At(St(t.prototype),"didRender",this).call(this),window.addEventListener("resize",this.onWindowResize),this.editor.on("editor:resize",this.onWindowResize),(e=this.toolbarModel)===null||e===void 0||e.setDefaultAlign("top"),(r=this.container)===null||r===void 0||r.on("mousedown",this.handleClick),!ge(this.editor)||this.editor.readonly){var i;(i=this.mask)===null||i===void 0||i.hide()}}},{key:"destroy",value:function(){var e;At(St(t.prototype),"destroy",this).call(this),(e=this.container)===null||e===void 0||e.off("mousedown",this.handleClick),window.removeEventListener("resize",this.onWindowResize),this.editor.off("editor:resize",this.onWindowResize)}}],[{key:"cardName",get:function(){return"video"}},{key:"cardType",get:function(){return un.BLOCK}},{key:"autoSelected",get:function(){return!1}}]),t}(ni),N0=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.cardComponents={},n.extensionNames={mp4:"video/mpeg4"},n.dropFiles=function(a){if(!!ge(n.editor)&&(a=a.filter(function(o){return n.isVideo(o)}),a.length!==0))return n.editor.command.execute("video-uploader",a),!1},n.pasteFiles=function(a){var o=a.files;if(!!ge(n.editor)&&(o=o.filter(function(l){return n.isVideo(l)}),o.length!==0))return n.editor.command.execute("video-uploader",o.filter(function(l){return n.isVideo(l)}),o),!1},n.pasteEach=function(a){if(a.isCard()&&a.attributes(_n)){if(a.attributes(_n)!=="video")return;var o=wr(a.attributes(er));if(!o||!o.url){a.remove();return}o.status==="uploading"&&(o.percent=0,a.attributes(er,Rs(Ie(Ie({},o),{},{status:"done"}))));return}},n}return Be(t,[{key:"init",value:function(){ge(this.editor)&&(this.editor.on("drop:files",this.dropFiles),this.editor.on("paste:event",this.pasteFiles),this.editor.on("paste:each",this.pasteEach));var e=this.options.file||{},r=e.accept;if(typeof r=="string"&&(r=r.split(",")),Array.isArray(r)){var i=[];(r||[]).forEach(function(a){a=a.trim();var o=a.split(".").pop();o&&i.push(o)}),i.length>0&&(this.extensionNames=i)}else Jn(r)==="object"&&(this.extensionNames=r)}},{key:"isVideo",value:function(e){var r=Of(e),i=Array.isArray(this.extensionNames)?this.extensionNames:Object.keys(this.extensionNames);return i.indexOf("*")>=0||i.indexOf(r)>=0}},{key:"execute",value:function(){var n=zr(Qt.mark(function r(i){var a=this,o,l,c,d,v,h,g,w,x,_,E,M,T,S,D,I,P,B=arguments;return Qt.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(typeof i!="string"){q.next=6;break}q.t0=i,q.next=q.t0==="query"?4:5;break;case 4:return q.abrupt("return",this.query(B.length<=1?void 0:B[1],B.length<=2?void 0:B[2],B.length<=3?void 0:B[3]));case 5:return q.abrupt("return");case 6:if(o=this.editor,l=o.request,c=o.card,d=o.language,v=this.options,h=v.action,g=v.data,w=v.type,x=v.contentType,_=v.multiple,E=v.crossOrigin,M=v.withCredentials,T=v.headers,S=v.name,D=this.options.parse,I=this.options.limitSize||5242880,Array.isArray(i)){q.next=15;break}return P=Array.isArray(this.extensionNames)?"."+this.extensionNames.join(",."):Object.values(this.extensionNames).join(","),q.next=14,l.getFiles({event:i,accept:Df?"video/*":P.length>0?P:"",multiple:_});case 14:i=q.sent;case 15:if(i.length!==0){q.next=17;break}return q.abrupt("return");case 17:return l.upload({url:h,data:g,type:w,contentType:x,crossOrigin:E,withCredentials:M,headers:typeof T=="function"?T():T,onBefore:function(H){return H.size>I?(a.editor.messageError(d.get("video","uploadLimitError").toString().replace("$size",(I/1024/1024).toFixed(0)+"M")),!1):!0},onReady:function(H){if(!(!ge(a.editor)||!!a.cardComponents[H.uid])){var z=c.insert("video",{status:"uploading",name:H.name,size:H.size});a.cardComponents[H.uid]=z}},onUploading:function(H,z){var O=z.percent,Q=a.cardComponents[H.uid||""];!Q||Q.setProgressPercent(O)},onSuccess:function(H,z){var O=a.cardComponents[z.uid||""];if(!!O){var Q=H.id||H.data&&H.data.id,ie=H.url||H.data&&H.data.url,L=H.cover||H.data&&H.data.cover,F=H.download||H.data&&H.data.download,X=H.width||H.data&&H.data.width,se=H.height||H.data&&H.data.height,Y=H.status||H.data&&H.data.status;Y=Y==="transcoding"?"transcoding":"done";var j={result:!0,data:{video_id:Q,url:ie,cover:L,download:F,status:Y,width:X,height:se}};if(D){var fe=D(H);if(fe.result){var ve=j.data;typeof fe.data=="string"?j.data=Ie(Ie({},ve),{},{url:fe.data}):(ve.url=fe.data.url,fe.data.status!==void 0&&(ve=Ie(Ie({},ve),{},{status:fe.data.status})),fe.data.id!==void 0&&(ve=Ie(Ie({},ve),{},{video_id:fe.data.id})),fe.data.cover!==void 0&&(ve=Ie(Ie({},ve),{},{cover:fe.data.cover})),fe.data.width!==void 0&&(ve=Ie(Ie({},ve),{},{width:fe.data.width})),fe.data.height!==void 0&&(ve=Ie(Ie({},ve),{},{height:fe.data.height})),j.data=Ie({},ve))}else j={result:!1,data:fe.data.toString()}}else ie||(j={result:!1,data:H.data});j.result?a.editor.card.update(O.id,typeof j.data=="string"?{url:j.data}:Ie(Ie({},j.data),{},{naturalWidth:j.data.width,naturalHeight:j.data.height})):c.update(O.id,{status:"error",message:typeof j.data=="string"?j.data:a.editor.language.get("video","uploadError")}),delete a.cardComponents[z.uid||""]}},onError:function(H,z){var O=a.cardComponents[z.uid||""];!O||(c.update(O.id,{status:"error",message:H.message||a.editor.language.get("video","uploadError")}),delete a.cardComponents[z.uid||""])}},i,S),q.abrupt("return");case 19:case"end":return q.stop()}},r,this)}));function e(r){return n.apply(this,arguments)}return e}()},{key:"query",value:function(e,r){var i=this,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},o=this.editor.request,l=this.options,c=l.query,d=l.parse;if(!c||!e)return r();var v=c.action,h=c.type,g=c.contentType,w=c.data;o.ajax({url:v,contentType:g||"",type:h===void 0?"json":h,data:Ie(Ie({},w),{},{id:e}),success:function(_){var E=_.result,M=_.data;if(!E)a(M);else{var T=d?d(_):_;T.result===!1?a(T.data||i.editor.language.get("video","loadError")):r(Ie(Ie({},T.data),{},{status:T.data.status!=="transcoding"?"done":"transcoding"}))}},error:function(_){a(_.message||i.editor.language.get("video","loadError"))},method:"GET"})}},{key:"destroy",value:function(){ge(this.editor)&&(this.editor.off("drop:files",this.dropFiles),this.editor.off("paste:event",this.pasteFiles),this.editor.off("paste:each",this.pasteEach))}}],[{key:"pluginName",get:function(){return"video-uploader"}}]),t}(Rr),QS={video:{errorMessageCopy:"Copy error message",loadError:"The video failed to load!",uploadError:"The video failed to upload!",uploadLimitError:"Upload video size is limited to $size",download:"Download",preview:"Preview",loading:"Loading...",transcoding:"Transcoding..."}},XS={video:{errorMessageCopy:"\u590D\u5236\u9519\u8BEF\u4FE1\u606F",loadError:"\u89C6\u9891\u52A0\u8F7D\u5931\u8D25\uFF01",uploadError:"\u4E0A\u4F20\u89C6\u9891\u5931\u8D25\uFF01",uploadLimitError:"\u4E0A\u4F20\u89C6\u9891\u5927\u5C0F\u9650\u5236\u4E3A $size",download:"\u4E0B\u8F7D",preview:"\u9884\u89C8",loading:"\u52A0\u8F7D\u4E2D...",transcoding:"\u8F6C\u7801\u4E2D..."}},JS={"en-US":QS,"zh-CN":XS},D0=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.pasteSchema=function(a){a.add({type:"block",name:"div",attributes:{"data-value":"*","data-type":{required:!0,value:yu.cardName}}})},n.pasteHtml=function(a){if(!!ge(n.editor)){if(a.isElement()){var o=a.attributes("data-type");if(o===yu.cardName){var l=a.attributes("data-value"),c=wr(l);return c.url?(n.editor.card.replaceNode(a,yu.cardName,c),a.remove(),!1):void 0}}return!0}},n.parseHtml=function(a,o){var l=[];return a.find("[".concat(Gt,'="').concat(yu.cardName,'"],[').concat(_n,'="').concat(yu.cardName,'"]')).each(function(c){var d=V(c),v=n.editor.card.find(d),h=(v==null?void 0:v.getValue())||wr(d.attributes(er));if((h==null?void 0:h.url)&&h.status==="done"){var g=n.options.onBeforeRender,w=h.cover,x=h.url,_='<div data-type="'.concat(yu.cardName,'"  data-value="').concat(Rs(h),'"><video controls src="').concat(_l(g?g("query",x):x),'" poster="').concat(w?_l(g?g("cover",w):w):"none",'" webkit-playsinline="webkit-playsinline" playsinline="playsinline" style="outline:none;" /></div>');d.empty();var E=V(_);o&&(E=o(E,h)),d.replaceWith(E),l.push(E)}else d.remove()}),l},n}return Be(t,[{key:"init",value:function(){this.editor.language.add(JS),this.editor.on("parse:html",this.parseHtml),this.editor.on("paste:each",this.pasteHtml),this.editor.on("paste:schema",this.pasteSchema)}},{key:"execute",value:function(e,r,i,a,o,l,c,d,v,h,g){var w={status:e,video_id:a,cover:o,url:r,name:i||r,size:l,download:c,width:h,height:g,naturalWidth:d,naturalHeight:v};e==="error"&&(w.url="",w.message=r),this.editor.card.insert("video",w)}},{key:"waiting",value:function(){var n=zr(Qt.mark(function r(i){var a=this,o,l,c,d;return Qt.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return o=this.editor.card,l=function(w){var x;return w.root.inEditor()&&w.name===yu.cardName&&((x=w.getValue())===null||x===void 0?void 0:x.status)==="uploading"},c=function(){return o.components.find(l)},d=function(w){var x=6e4;return new Promise(function(_,E){if(i){var M=i(a.constructor.pluginName,w);if(M===!1)return E({name:a.constructor.pluginName,card:w});typeof M=="number"&&(x=M)}var T=new Date().getTime(),S=new Date().getTime(),D=function I(){if(S-T>=x)return _();setTimeout(function(){l(w)?I():_()},10)};D()})},h.abrupt("return",new Promise(function(){var g=zr(Qt.mark(function w(x,_){var E,M;return Qt.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:E=c(),M=function D(I){d(I).then(function(){var P=c();P?D(P):x()}).catch(_)},E?M(E):x();case 3:case"end":return S.stop()}},w)}));return function(w,x){return g.apply(this,arguments)}}()));case 5:case"end":return h.stop()}},r,this)}));function e(r){return n.apply(this,arguments)}return e}()},{key:"destroy",value:function(){this.editor.off("parse:html",this.parseHtml),this.editor.off("paste:each",this.pasteHtml),this.editor.off("paste:schema",this.pasteSchema)}}],[{key:"pluginName",get:function(){return"video"}}]),t}(Rr),eM=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.kind="block",n.style={"text-align":"@var0","list-style-position":"@var1"},n.variable={"@var0":["center","right","justify"],"@var1":["outside","inside"]},n.onBackspace=function(a){if(!!ge(n.editor)){var o=n.editor,l=o.change,c=o.block,d=l.range.get();if(!(c.isLastOffset(d,"end")||!c.isFirstOffset(d,"start")||l.blocks.length>1)){var v=n.queryState();if(v==="center")return a.preventDefault(),n.editor.command.execute(n.constructor.pluginName,"left"),!1;if(v==="right")return a.preventDefault(),n.editor.command.execute(n.constructor.pluginName,"center"),!1}}},n}return Be(t,[{key:"init",value:function(){At(St(t.prototype),"init",this).call(this),this.editor.on("keydown:backspace",this.onBackspace)}},{key:"execute",value:function(e){var r=this;if(!(!ge(this.editor)||this.editor.readonly)){var i=this.editor,a=i.change,o=i.block;o.setBlocks({style:{"text-align":!e||["left"].indexOf(e)>-1?"":e}}),a.blocks.forEach(function(l){l.name==="li"&&r.editor.list.addAlign(l,e)})}}},{key:"queryState",value:function(){if(!!ge(this.editor)){var e=this.editor,r=e.change,i=e.schema,a=r.blocks;if(a.length!==0){var o=a[0],l=i.getAllowInTags();l.indexOf(o.name)>-1&&(o=a[1]||o.first()||o);var c=o.css("text-align");return c==="start"&&(c="left"),c==="end"&&(c="right"),c}}}},{key:"hotkey",value:function(){var e,r,i,a,o=((e=this.options.hotkey)===null||e===void 0?void 0:e.left)||"mod+shift+l",l=((r=this.options.hotkey)===null||r===void 0?void 0:r.center)||"mod+shift+c",c=((i=this.options.hotkey)===null||i===void 0?void 0:i.right)||"mod+shift+r",d=((a=this.options.hotkey)===null||a===void 0?void 0:a.justify)||"mod+shift+j";return[{key:o,args:"left"},{key:l,args:"center"},{key:c,args:"right"},{key:d,args:"justify"}]}},{key:"destroy",value:function(){this.editor.off("keydown:backspace",this.onBackspace)}}],[{key:"pluginName",get:function(){return"alignment"}}]),t}(av),tM=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.mergeLeval=2,n.tagName="span",n.style={"background-color":"@var0"},n.variable={"@var0":{required:!0,value:"@color"}},n}return Be(t,[{key:"schema",value:function(){var e=At(St(t.prototype),"schema",this).call(this);return e.attributes.style.background="@color",e}},{key:"conversion",value:function(){var e=this;return[{from:function(i,a){return i===e.tagName&&!!a.background},to:function(i,a,o){var l=V("<".concat(i," />")),c=a.background;return delete a.background,a["background-color"]=c,l.css(a),Object.keys(o).forEach(function(d){l.attributes(d,o[d])}),l}}]}},{key:"isTrigger",value:function(e,r){return r===void 0||e!==r}},{key:"hotkey",value:function(){return this.options.hotkey||[]}}],[{key:"pluginName",get:function(){return"backcolor"}}]),t}(is),nM=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.tagName="strong",n.markdown=n.options.markdown===void 0?"**":n.options.markdown,n}return Be(t,[{key:"hotkey",value:function(){return this.options.hotkey||"mod+b"}},{key:"conversion",value:function(){return[{from:{span:{style:{"font-weight":["bold","700"]}}},to:this.tagName},{from:"b",to:this.tagName}]}}],[{key:"pluginName",get:function(){return"bold"}}]),t}(is);function rM(b,u){u===void 0&&(u={});var t=u.insertAt;if(!(!b||typeof document=="undefined")){var n=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",t==="top"&&n.firstChild?n.insertBefore(e,n.firstChild):n.appendChild(e),e.styleSheet?e.styleSheet.cssText=b:e.appendChild(document.createTextNode(b))}}var iM=`.am-engine code, .am-engine-view code {
    font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;
    font-size: inherit;
    background-color: rgba(0, 0, 0, 0.06);
    padding: 0 2px;
    border-radius: 6px;
    line-height: inherit;
    word-wrap: break-word;
    text-indent: 0;
}`;rM(iM);var aM=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.tagName="code",n.markdown=n.options.markdown===void 0?"`":n.options.markdown,n.parseHtml=function(a){a.find(n.tagName).css({"font-family":"monospace","font-size":"inherit","background-color":"rgba(0,0,0,.06)",padding:"0 2px","border-radius":"6px","line-height":"inherit","overflow-wrap":"break-word","text-indent":"0"})},n}return Be(t,[{key:"init",value:function(){At(St(t.prototype),"init",this).call(this),this.editor.on("parse:html",this.parseHtml)}},{key:"hotkey",value:function(){return this.options.hotkey||"mod+e"}},{key:"destroy",value:function(){At(St(t.prototype),"destroy",this).call(this),this.editor.off("parse:html",this.parseHtml)}}],[{key:"pluginName",get:function(){return"code"}}]),t}(Nm),oM=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.mergeLeval=3,n.tagName="span",n.style={color:"@var0"},n.variable={"@var0":{required:!0,value:"@color"}},n}return Be(t,[{key:"isTrigger",value:function(e,r){return r===void 0||e!==r}},{key:"hotkey",value:function(){return this.options.hotkey||[]}}],[{key:"pluginName",get:function(){return"fontcolor"}}]),t}(is),Vo=Mt("styleName"),I0=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.tagName="span",Object.defineProperty(Ye(n),Vo,{writable:!0,value:"font-family"}),n.style=Yt({},oe(Ye(n),Vo)[Vo],"@var0"),n.variable={"@var0":{required:!0,value:"*"}},n.pasteEach=function(a){if(a.name===n.tagName){var o=a.css(),l=o[oe(Ye(n),Vo)[Vo]];if(!l)return;var c=n.options.filter;if(c){var d=c(l);d===!1?a.css(oe(Ye(n),Vo)[Vo],""):typeof d=="string"&&a.css(oe(Ye(n),Vo)[Vo],d)}else a.css(oe(Ye(n),Vo)[Vo],"");var v=n.editor.node;v.isMark(a)||v.unwrap(a)}},n}return Be(t,[{key:"init",value:function(){At(St(t.prototype),"init",this).call(this),ge(this.editor)&&this.editor.on("paste:each",this.pasteEach)}},{key:"isTrigger",value:function(e){var r=this.queryState();return r?!!e:!0}},{key:"execute",value:function(e){var r=this.editor;if(!!ge(r)){var i=r.change,a=r.mark,o=V("<".concat(this.tagName," />")),l=this.queryState();if(e&&(!l||e!==l[0])){if(this.setStyle(o,e),!this.followStyle&&i.range.get().collapsed)return;a.wrap(o);return}l&&(this.setStyle(o,l[0]),a.unwrap(o))}}},{key:"hotkey",value:function(){return this.options.hotkey||[]}},{key:"destroy",value:function(){At(St(t.prototype),"destroy",this).call(this),ge(this.editor)&&this.editor.off("paste:each",this.pasteEach)}}],[{key:"pluginName",get:function(){return"fontfamily"}}]),t}(is),Qo=Mt("styleName"),L0=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.mergeLeval=4,n.tagName="span",n.style={"font-size":"@var0"},n.variable={"@var0":{required:!0,value:/[\d\.]+(pt|px)$/}},Object.defineProperty(Ye(n),Qo,{writable:!0,value:"font-size"}),n.pasteEach=function(a){if(a.name===n.tagName){var o=a.css(oe(Ye(n),Qo)[Qo]);if(!o)return;var l=n.convertToPX(o);if(o.endsWith("pt")&&a.css(oe(Ye(n),Qo)[Qo],l),l!==n.options.defaultSize){var c=n.options.filter;if(c){var d=c(l);d===!1?a.css(oe(Ye(n),Qo)[Qo],""):typeof d=="string"&&a.css(oe(Ye(n),Qo)[Qo],d)}else a.css(oe(Ye(n),Qo)[Qo],"");var v=n.editor.node;v.isMark(a)||v.unwrap(a)}}},n}return Be(t,[{key:"init",value:function(){At(St(t.prototype),"init",this).call(this),ge(this.editor)&&this.editor.on("paste:each",this.pasteEach)}},{key:"isTrigger",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.defaultSize||this.editor.container.css("font-size")||"14px";return e!==r}},{key:"hotkey",value:function(){return this.options.hotkey||[]}},{key:"convertToPX",value:function(e){var r=/([\d\.]+)(pt|px)$/i.exec(e);return r&&r[2]==="pt"?String(Math.round(parseInt(r[1],10)*96/72))+"px":e}},{key:"destroy",value:function(){At(St(t.prototype),"destroy",this).call(this),ge(this.editor)&&this.editor.off("paste:each",this.pasteEach)}}],[{key:"pluginName",get:function(){return"fontsize"}}]),t}(is);function sM(b,u){u===void 0&&(u={});var t=u.insertAt;if(!(!b||typeof document=="undefined")){var n=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",t==="top"&&n.firstChild?n.insertBefore(e,n.firstChild):n.appendChild(e),e.styleSheet?e.styleSheet.cssText=b:e.appendChild(document.createTextNode(b))}}var lM=`.data-anchor-button {\r
	position: absolute;\r
	width: 24px;\r
	height: 24px;\r
	line-height: 24px;\r
	text-align: center;\r
	font-size: 14px;\r
	display: block;\r
	background: rgba(255, 255, 255, 0.9);\r
	color: #BFBFBF;\r
	border-radius: 2px 2px;\r
	cursor: pointer;\r
	-webkit-user-select: none;\r
	-moz-user-select: none;\r
	-ms-user-select: none;\r
	user-select: none;\r
	opacity: 0;\r
	visibility: hidden;\r
	-webkit-transition: opacity 0.3s ease-in-out;\r
	transition: opacity 0.3s ease-in-out;\r
}\r
\r
.data-anchor-button.data-anchor-button-active {\r
	opacity: 1;\r
	visibility: visible;\r
}\r
\r
.data-anchor-button .data-icon {\r
	width: 18px;\r
}\r
\r
.data-anchor-button:hover {\r
	background: #f4f4f4;\r
	color: #595959;\r
}\r
\r
.am-engine-view h1,.am-engine-view h2,.am-engine-view h3,.am-engine-view h4,.am-engine-view h5,.am-engine-view h6 {\r
    position: relative;\r
}\r
\r
.am-engine-view h1 .data-anchor-button,.am-engine-view h2 .data-anchor-button,.am-engine-view h3 .data-anchor-button,.am-engine-view h4 .data-anchor-button,.am-engine-view h5 .data-anchor-button,.am-engine-view h6 .data-anchor-button{\r
    position: absolute;\r
    left: -24px;\r
    display: none;\r
}\r
\r
.am-engine-view h1:hover .data-anchor-button,.am-engine-view h2:hover .data-anchor-button,.am-engine-view h3:hover .data-anchor-button,.am-engine-view h4:hover .data-anchor-button,.am-engine-view h5:hover .data-anchor-button,.am-engine-view h6:hover .data-anchor-button {\r
    display: inline-block;\r
    opacity: 1;\r
    visibility: visible;\r
}\r
\r
.am-engine-view h1 , .am-engine h1,.am-engine-view h2 , .am-engine h2,.am-engine-view h3 , .am-engine h3,.am-engine-view h4 , .am-engine h4,.am-engine-view h5 , .am-engine h5,.am-engine-view h6 , .am-engine h6 {\r
    margin: 0;\r
    word-spacing: 1px;\r
    color: #262626;\r
    font-weight: bold;\r
    padding:0;\r
}\r
\r
.am-engine-view h1 , .am-engine h1 {\r
    font-size: 28px;\r
    line-height: 36px;\r
    padding: 7px 0;\r
}\r
\r
.am-engine-view h2 , .am-engine h2 {\r
    font-size: 24px;\r
    line-height: 32px;\r
    padding: 7px 0;\r
}\r
\r
.am-engine-view h3 , .am-engine h3 {\r
    font-size: 20px;\r
    line-height: 28px;\r
    padding: 7px 0;\r
}\r
\r
.am-engine-view h4 , .am-engine h4 {\r
    font-size: 16px;\r
    line-height: 24px;\r
    padding: 7px 0;\r
}\r
\r
.am-engine-view h5 , .am-engine h5 {\r
    font-size: 14px;\r
    line-height: 24px;\r
    padding: 7px 0;\r
}\r
\r
.am-engine-view h6 , .am-engine h6 {\r
    font-size: 14px;\r
    line-height: 24px;\r
    padding: 7px 0;\r
    font-weight: normal;\r
}`;sM(lM);var uM=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.attributes={id:"@var0"},n.variable={"@var0":/^[\w\.\-]+$/},n.tagName=["h1","h2","h3","h4","h5","h6"].filter(function(a){return!n.options.enableTypes||n.options.enableTypes.indexOf(a)>-1}),n.allowIn=["blockquote","$root"],n.disableMark=n.options.disableMark||["fontsize","bold"],n.onRender=function(a){var o=n.editor.language,l=V(a);n.tagName.length!==0&&l.find(n.tagName.join(",")).each(function(c){var d=V(c),v=d.attributes("id");if(v){d.find(".data-anchor-button").remove(),An.hide();var h=V('<a class="data-anchor-button" '.concat(lt,'="').concat(Gn,'"><span class="data-icon data-icon-').concat(d.name,'"></span></a>'));d.height()!==24&&h.css({top:(d.height()-24)/2+"px"}),h.on("mouseenter",function(){An.show(h,o.get("copyAnchor","title").toString())}),h.on("mouseleave",function(){An.hide()}),h.on("click",function(g){g.preventDefault(),g.stopPropagation();var w=n.options.anchorCopy?n.options.anchorCopy(v):window.location.href+"/"+v;n.editor.clipboard.copy(w)?n.editor.messageSuccess(o.get("copy","success").toString()):n.editor.messageError(o.get("copy","error").toString())}),d.prepend(h)}})},n.updateId=function(){n.tagName.length!==0&&n.editor.container.find(n.tagName.join(",")).each(function(a){var o,l=V(a);if(!(!((o=l.parent())===null||o===void 0)&&o.isEditable())){l.removeAttributes("id");return}var c=l.attributes("id");(!c||V('[id="'.concat(c,'"]')).length>1)&&(c=l.attributes(fn)||Lp(l),l.attributes("id",c))})},n.realtimeChange=function(){n.updateId(),n.showAnchor()},n.updateAnchorPosition=function(){var a;if(!!ge(n.editor)){var o=n.editor,l=o.change,c=o.root,d=c.find(".data-anchor-button");if(d.length!==0){var v=l.range.get(),h=v.startNode.closest("h1,h2,h3,h4,h5,h6");if(h.length===0){d.remove(),An.hide();return}var g=((a=c.get())===null||a===void 0?void 0:a.getBoundingClientRect())||{left:0,top:0},w=h.get().getBoundingClientRect(),x=Math.round(w.left-g.left-d.get().clientWidth-1),_=Math.round(w.top-g.top+w.height/2-d.get().clientHeight/2);d.css({top:"".concat(_,"px"),left:"".concat(x,"px")})}}},n.showAnchor=function(){var a,o;if(!(!ge(n.editor)||n.tagName.length===0)){var l=n.editor,c=l.change,d=l.root,v=l.clipboard,h=l.language,g=l.card,w=c.range.get(),x=d.find(".data-anchor-button"),_=w.startNode.closest(n.tagName.join(","));if((_.length===0||x.length>0&&x.find(".data-icon-".concat(_.name)).length===0||!n.editor.isFocus())&&(x.remove(),An.hide()),!(_.length===0||g.closest(_,!0)||!n.editor.isFocus())&&!!(!((a=_.parent())===null||a===void 0)&&a.isEditable())){if(x.find(".data-icon-".concat(_.name)).length>0){n.updateAnchorPosition();return}x=V('<span class="data-anchor-button" '.concat(lt,'="').concat(Gn,'"><span class="data-icon data-icon-').concat(_.name,'"></span></span>')),d.append(x);var E=((o=d.get())===null||o===void 0?void 0:o.getBoundingClientRect())||{left:0,top:0},M=_.get().getBoundingClientRect(),T=Math.round(M.left-E.left-x.get().clientWidth-1),S=Math.round(M.top-E.top+M.height/2-x.get().clientHeight/2);x.css({top:"".concat(S,"px"),left:"".concat(T,"px")}),x.addClass("data-anchor-button-active"),x.on("mouseenter",function(){An.show(x,h.get("copyAnchor","title").toString())}),x.on("mouseleave",function(){An.hide()}),x.on("click",function(D){D.preventDefault(),D.stopPropagation();var I=_.attributes("id"),P=n.options.anchorCopy?n.options.anchorCopy(I):window.location.href+"/"+I;v.copy(P)?n.editor.messageSuccess(h.get("copy","success").toString()):n.editor.messageError(h.get("copy","error").toString())})}}},n.checkMarkdownMath=function(a){var o;return!(!((o=n.checkMarkdown(a))===null||o===void 0)&&o.match)},n.checkMarkdown=function(a){if(!(!ge(n.editor)||!n.markdown||!a.isText())){var o=a.text(),l=/(^|\r\n|\n)(#{1,6})(.*)/,c=l.exec(o);return{reg:l,match:c}}},n.pasteMarkdown=function(a){var o=n.checkMarkdown(a);if(!!o){var l=o.reg,c=o.match;if(!!c){for(var d="",v=a.clone(!0).get(),h=n.options.enableTypes;v.textContent&&(c=l.exec(v.textContent));){var g=c[2].length,w=v.splitText(c.index);d+=v.textContent,v=w.splitText(c[0].length),h&&h.indexOf("h".concat(g))<0?d+=c[2]+c[3]:d+=c[1]+"<h".concat(g,">").concat(c[3].trim(),"</h").concat(g,`>
`)}d+=v.textContent,a.text(d)}}},n.onBackspace=function(a){var o;if(!!ge(n.editor)){var l=n.editor,c=l.change,d=l.node,v=c.range.get();if(!!v.collapsed){var h=n.editor.block;if(!!h.isFirstOffset(v,"start")){var g=h.closest(v.startNode);if(n.tagName.indexOf(g.name)>-1&&d.isEmptyWithTrim(g)&&((o=g.parent())===null||o===void 0?void 0:o.isEditable()))return a.preventDefault(),h.setBlocks("<p />"),!1;var w=g.parent();if(n.tagName.indexOf(g.name)>-1&&(!w||!d.isBlock(w)))return a.preventDefault(),c.mergeAfterDelete(g),!1}}}},n}return Be(t,[{key:"init",value:function(){At(St(t.prototype),"init",this).call(this),!ge(this.editor)&&this.options.showAnchor!==!1&&this.editor.on("render",this.onRender),ge(this.editor)&&(this.editor.on("keydown:backspace",this.onBackspace),this.editor.on("paste:markdown-check",this.checkMarkdownMath),this.editor.on("paste:markdown",this.pasteMarkdown)),!(!ge(this.editor)||this.options.showAnchor===!1)&&(this.editor.on("setValue",this.updateId),this.editor.on("realtimeChange",this.realtimeChange),this.editor.on("select",this.showAnchor),this.editor.on("blur",this.showAnchor),window.addEventListener("resize",this.updateAnchorPosition))}},{key:"execute",value:function(e){if(!!ge(this.editor)){(!e||e===this.queryState())&&(e="p");var r=this.options.enableTypes;if(!(e!=="p"&&r&&r.indexOf(e)<0)){var i=this.editor,a=i.list,o=i.block;a.split(),o.setBlocks("<".concat(e," />"))}}}},{key:"queryState",value:function(){if(!!ge(this.editor)){var e=this.editor.change,r=e.blocks;if(r.length===0)return"";var i=this.tagName.find(function(a){return r.some(function(o){return o.name===a})});return i||""}}},{key:"hotkey",value:function(){var e,r,i,a,o,l,c=((e=this.options.hotkey)===null||e===void 0?void 0:e.h1)||"mod+opt+1",d=((r=this.options.hotkey)===null||r===void 0?void 0:r.h2)||"mod+opt+2",v=((i=this.options.hotkey)===null||i===void 0?void 0:i.h3)||"mod+opt+3",h=((a=this.options.hotkey)===null||a===void 0?void 0:a.h4)||"mod+opt+4",g=((o=this.options.hotkey)===null||o===void 0?void 0:o.h5)||"mod+opt+5",w=((l=this.options.hotkey)===null||l===void 0?void 0:l.h6)||"mod+opt+6",x=this.options.enableTypes;return[{key:c,args:"h1"},{key:d,args:"h2"},{key:v,args:"h3"},{key:h,args:"h4"},{key:g,args:"h5"},{key:w,args:"h6"}].filter(function(_){return!x||x.indexOf(_.key)>-1})}},{key:"markdown",value:function(e,r,i){if(!ge(this.editor)||this.options.markdown===!1)return!1;var a="";switch(r){case"#":a="h1";break;case"##":a="h2";break;case"###":a="h3";break;case"####":a="h4";break;case"#####":a="h5";break;case"######":a="h6";break}if(!a)return!0;var o=this.options.enableTypes;return o&&o.indexOf(a)<0?!0:(e.preventDefault(),this.editor.block.removeLeftText(i),this.editor.node.isEmpty(i)&&(i.empty(),i.append("<br />")),this.editor.command.execute(this.constructor.pluginName,a),!1)}},{key:"destroy",value:function(){!ge(this.editor)&&this.options.showAnchor!==!1&&this.editor.off("render",this.onRender),ge(this.editor)&&(this.editor.off("keydown:backspace",this.onBackspace),this.editor.off("paste:markdown-check",this.checkMarkdownMath),this.editor.off("paste:markdown",this.pasteMarkdown)),!(!ge(this.editor)||this.options.showAnchor===!1)&&(this.editor.off("setValue",this.updateId),this.editor.off("realtimeChange",this.realtimeChange),this.editor.off("select",this.showAnchor),this.editor.off("blur",this.showAnchor),window.removeEventListener("resize",this.updateAnchorPosition))}}],[{key:"pluginName",get:function(){return"heading"}}]),t}(Op),Ti="text-indent",dM=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.onBackspace=function(a){if(!!ge(n.editor)){var o=n.editor,l=o.change,c=o.list,d=o.node,v=n.editor.block,h=l.range.get(),g=n.editor.block.closest(h.startNode);if(!!d.isBlock(g)){var w=g.parent(),x=l.blocks;if(w&&d.isBlock(w)&&(x=x.filter(function(_){return!_.equal(w)})),g.name==="li"){if(h.collapsed&&!c.isFirst(h))return;if(!h.collapsed)return}else{if((h.collapsed&&v.isLastOffset(h,"end")||!v.isFirstOffset(h,"start"))&&!d.isEmptyWidthChild(g)||x.length>1)return;if(!h.collapsed)return}if(n.queryState())return a.preventDefault(),n.editor.command.execute(n.constructor.pluginName,"out"),!1}}},n.onTab=function(a){if(!!ge(n.editor)){var o=n.editor,l=o.change,c=o.list,d=o.block,v=l.range.get();if(v.collapsed&&c.isFirst(v))return a.preventDefault(),n.editor.command.execute(n.constructor.pluginName,"in"),!1;if(!v.collapsed||d.isFirstOffset(v,"start"))return a.preventDefault(),n.editor.command.execute(n.constructor.pluginName,"in",!0),!1}},n.onShiftTab=function(a){if(!!ge(n.editor))return a.preventDefault(),n.editor.command.execute(n.constructor.pluginName,"out"),!1},n.pasteEach=function(a){if(a.isElement()&&!a.isCard()&&n.editor.node.isBlock(a)){var o=a.css(),l=o[Ti];if(!!l&&l.endsWith("pt")){var c=n.convertToPX(l);if(c){var d=n.options.maxPadding||50,v=tn(c),h=a.width();h=h===0?n.editor.root.width():h;var g=a.css("font-size");g=!g||g.endsWith("em")?n.editor.root.css("font-size"):g,g.endsWith("em")&&(g=V(document.body).css("font-size")),g.endsWith("px")||(g="16px");var w=h>0?h/tn(g):d;v=Math.min(c.endsWith("px")?v/tn(g):v,d,w),v<=0?a.css(Ti,""):a.css(Ti,Vv(v>0?v:0,"em"))}}}},n}return Be(t,[{key:"init",value:function(){var e=this;this.editor.schema.add(this.schema()),this.conversion().forEach(function(r){var i=r.from,a=r.to;e.editor.conversion.add(i,a)}),this.editor.on("keydown:backspace",this.onBackspace),this.editor.on("keydown:tab",this.onTab),this.editor.on("keydown:shift-tab",this.onShiftTab),ge(this.editor)&&this.editor.on("paste:each",this.pasteEach)}},{key:"execute",value:function(){var e=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"in";if(!!ge(this.editor)){var i=this.editor,a=i.change,o=i.list,l=i.block;o.split();var c=a.range.get(),d=l.findBlocks(c);if(!!d){var v=this.options.maxPadding||50;d.forEach(function(h){e.addPadding(h,r==="in"?2:-2,v)}),o.merge()}}}},{key:"queryState",value:function(){if(!!ge(this.editor)){var e=this.editor,r=e.change,i=e.list,a=e.node,o=r.range.get();if(!o.startNode.inEditor())return 0;var l=this.editor.block.closest(o.startNode);return l.name==="li"?i.getIndent(l.closest("ul,ol")):a.isRootBlock(l)||a.isNestedBlock(l)?tn(l.css(Ti)):0}}},{key:"addPadding",value:function(e,r,i){var a=this.editor,o=a.list,l=a.node;if(e.name!=="li"){if(l.isList(e))o.addIndent(e,r,i);else if(l.isRootBlock(e)||l.isNestedBlock(e))if(r>0)if(tn(e.css(Ti))){var c=e.css(Ti),d=tn(c)+r,v=e.width();v=v===0?this.editor.root.width():v;var h=e.css("font-size");h=!h||h.endsWith("em")?this.editor.root.css("font-size"):h,h.endsWith("em")&&(h=V(document.body).css("font-size")),h.endsWith("px")||(h="16px");var g=v>0?v/tn(h):i;d=Math.min(c.endsWith("px")?d/tn(h):d,i,g),d<=0?e.css(Ti,""):e.css(Ti,Vv(d>0?d:0,"em"))}else e.css(Ti,"".concat(r,"em"));else{var w=e.css(Ti),x=tn(w)+r;x<=0?e.css(Ti,""):e.css(Ti,Vv(x>0?x:0,"em"))}}}},{key:"hotkey",value:function(){var e,r,i=((e=this.options.hotkey)===null||e===void 0?void 0:e.in)||"mod+]",a=((r=this.options.hotkey)===null||r===void 0?void 0:r.out)||"mod+[";return[{key:i,args:"in"},{key:a,args:"out"}]}},{key:"schema",value:function(){return{type:"block",attributes:{style:Yt({},Ti,"@length")}}}},{key:"conversion",value:function(){var e=this;return[{from:function(i,a,o){return!!a["padding-left"]||!!o[Ti]},to:function(i,a,o){var l=V("<".concat(i," />")),c=a["padding-left"]||o[Ti];if(c.endsWith("pt")&&(c=e.convertToPX(c)),c.endsWith("px")){var d=a["font-size"];d=!d||d.endsWith("em")?e.editor.root.css("font-size"):d,d.endsWith("em")&&(d=V(document.body).css("font-size")),d.endsWith("px")||(d="16px");var v=tn(c)/tn(d);a[Ti]="".concat(v,"em")}else c.endsWith("em")&&(a[Ti]=c);return delete a["padding-left"],delete o[Ti],l.css(a),Object.keys(o).forEach(function(h){l.attributes(h,o[h])}),l}}]}},{key:"convertToPX",value:function(e){var r=/([\d\.]+)(pt|px)$/i.exec(e);return r&&r[2]==="pt"?String(Math.round(parseInt(r[1],10)*96/72))+"px":e}},{key:"destroy",value:function(){this.editor.off("keydown:backspace",this.onBackspace),this.editor.off("keydown:tab",this.onTab),this.editor.off("keydown:shift-tab",this.onShiftTab),ge(this.editor)&&this.editor.off("paste:each",this.pasteEach)}}],[{key:"pluginName",get:function(){return"indent"}}]),t}(Rr),O0=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.tagName="em",n.markdown=n.options.markdown===void 0?"_":n.options.markdown,n}return Be(t,[{key:"hotkey",value:function(){return this.options.hotkey||"mod+i"}},{key:"conversion",value:function(){return[{from:{span:{style:{"font-style":"italic"}}},to:this.tagName},{from:"i",to:this.tagName}]}}],[{key:"pluginName",get:function(){return"italic"}}]),t}(is),la=Mt("styleName"),z0=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),Object.defineProperty(Ye(n),la,{writable:!0,value:"line-height"}),n.pasteEach=function(a){if(!a.isCard()&&n.editor.node.isBlock(a)){var o=a.css(oe(Ye(n),la)[la]);if(!o)return;var l=n.convertToPX(o);o.endsWith("pt")&&a.css(oe(Ye(n),la)[la],l);var c=n.options.filter;if(c){var d=c(l);d===!1?a.css(oe(Ye(n),la)[la],""):typeof d=="string"&&a.css(oe(Ye(n),la)[la],d)}else a.css(oe(Ye(n),la)[la],"");var v=n.editor.node;v.isBlock(a)||v.unwrap(a)}},n}return Be(t,[{key:"init",value:function(){this.editor.schema.add(this.schema()),ge(this.editor)&&this.editor.on("paste:each",this.pasteEach)}},{key:"execute",value:function(e){var r=this;if(!!ge(this.editor)){e==="default"&&(e="");var i=this.editor,a=i.change,o=i.block,l=a.range.get(),c=o.findBlocks(l);!c||c.forEach(function(d){r.addLineHeight(d,e)})}}},{key:"queryState",value:function(){var e=this;if(!!ge(this.editor)){var r=this.editor,i=r.change,a=r.node,o=i.range.get();if(!o.startNode.inEditor())return["default"];var l=i.blocks,c=[];return l.forEach(function(d){if(a.isNestedBlock(d)){var v,h=((v=d.get())===null||v===void 0?void 0:v.style.lineHeight)||"";if(!h)return;var g=e.convertToPX(h),w=e.options.filter;if(w){var x=w(g);if(x===!1)return;typeof x=="string"?c.push(x):c.push(g)}}}),c.length===0?["default"]:c}}},{key:"addLineHeight",value:function(e,r){var i=this.editor.node;!i.isNestedBlock(e)||e.css(oe(this,la)[la],r||"")}},{key:"schema",value:function(){return{type:"block",attributes:{style:Yt({},oe(this,la)[la],"@length")}}}},{key:"convertToPX",value:function(e){var r=/([\d\.]+)(pt|px)$/i.exec(e);return r&&r[2]==="pt"?String(Math.round(parseInt(r[1],10)*96/72))+"px":e}},{key:"destroy",value:function(){ge(this.editor)&&this.editor.off("paste:each",this.pasteEach)}}],[{key:"pluginName",get:function(){return"line-height"}}]),t}(Rr);var Kp=or({name:"am-link-editor",components:{AConfigProvider:Z1,AInput:Y1,AButton:K1},props:{language:{type:Object,required:!0},defaultText:String,defaultLink:String,className:String,onLoad:Function,onOk:Function},setup:function(u){var t=cn(u.defaultText),n=cn(u.defaultLink),e=cn(null),r=u.language.get("link","text"),i=u.language.get("link","text_placeholder"),a=u.language.get("link","link"),o=u.language.get("link","link_placeholder"),l=u.language.get("link","ok_button"),c=function(h){t.value=h},d=function(h){n.value=h};return Od(function(){var v;(v=e.value)===null||v===void 0||v.focus(),setTimeout(function(){u.onLoad&&u.onLoad()},200)}),{text:t,link:n,textTitle:r,textPlaceholder:i,linkTitle:a,linkPlaceholder:o,buttonTitle:l,onTextChange:c,onLinkChange:d,linkRef:e}}});function cM(b,u,t,n,e,r){var i=Tn("a-input"),a=Tn("a-button"),o=Tn("a-config-provider");return ct(),hr(o,{"auto-insert-space-in-button":!1},{default:Pn(function(){return[jt("div",{"data-element":"ui",class:ti(["data-link-editor",b.className])},[jt("p",null,pi(b.textTitle),1),jt("p",null,[rr(i,{class:"data-link-input",value:b.text,placeholder:b.textPlaceholder,onChange:u[0]||(u[0]=function(l){return b.onTextChange(l.target.value)})},null,8,["value","placeholder"])]),jt("p",null,pi(b.linkTitle),1),jt("p",null,[rr(i,{ref:"linkRef",class:"data-link-input",value:b.link,placeholder:b.linkPlaceholder,onChange:u[1]||(u[1]=function(l){return b.onLinkChange(l.target.value)})},null,8,["value","placeholder"])]),jt("p",null,[rr(a,{class:"data-link-button",onClick:u[2]||(u[2]=function(l){return b.onOk(b.text,b.link)}),disabled:b.link.trim()===""},{default:Pn(function(){return[Nc(pi(b.buttonTitle),1)]}),_:1},8,["disabled"])])],2)]}),_:1})}Kp.render=cM;Kp.__file="src/toolbar/editor.vue";var Vp=or({name:"am-link-preview",components:{ATooltip:Mp},props:{language:{type:Object,required:!0},href:String,className:String,onEdit:Function,onRemove:Function,onLoad:Function},setup:function(u){var t=u.language.get("link","link_open"),n=u.language.get("link","link_edit"),e=u.language.get("link","link_remove");return Od(function(){u.onLoad&&u.onLoad()}),{openTitle:t,editTitle:n,removeTitle:e,isMobile:mt}}}),fM={class:"data-link-preview","data-element":"ui"},hM=["href"],vM={class:"data-link-op"};function pM(b,u,t,n,e,r){var i=Tn("a-tooltip");return ct(),zt("div",fM,[rr(i,{title:b.openTitle},{default:Pn(function(){return[jt("a",{class:"data-icon data-icon-link data-link-preview-open",href:b.href,target:"_blank"},pi(b.href),9,hM)]}),_:1},8,["title"]),jt("div",vM,[b.isMobile?yn("v-if",!0):(ct(),hr(i,{key:0,title:b.editTitle},{default:Pn(function(){return[jt("a",{class:"data-icon data-icon-edit",onClick:u[0]||(u[0]=function(){return b.onEdit&&b.onEdit.apply(b,arguments)})})]}),_:1},8,["title"])),b.isMobile?(ct(),zt("a",{key:1,class:"data-icon data-icon-edit",onClick:u[1]||(u[1]=function(){return b.onEdit&&b.onEdit.apply(b,arguments)})})):yn("v-if",!0),b.isMobile?yn("v-if",!0):(ct(),hr(i,{key:2,title:b.removeTitle},{default:Pn(function(){return[jt("a",{class:"data-icon data-icon-unlink",onClick:u[2]||(u[2]=function(){return b.onRemove&&b.onRemove.apply(b,arguments)})})]}),_:1},8,["title"])),b.isMobile?(ct(),zt("a",{key:3,class:"data-icon data-icon-unlink",onClick:u[3]||(u[3]=function(){return b.onRemove&&b.onRemove.apply(b,arguments)})})):yn("v-if",!0)])])}Vp.render=pM;Vp.__file="src/toolbar/preview.vue";var gM=function(){function b(u,t){var n=this;Fe(this,b),this.engine=void 0,this.root=void 0,this.target=void 0,this.options=void 0,this.mouseInContainer=!1,this.vm=void 0,this.position=void 0,this.engine=u;var e=this.engine.change;this.options=t,this.position=new Mu(this.engine),e.event.onWindow("mousedown",function(r){if(!!r.target){var i=V(r.target),a=i.closest(".data-link-container");n.mouseInContainer=a&&a.length>0,!i.inEditor()&&!n.mouseInContainer&&n.hide()}})}return Be(b,[{key:"create",value:function(){var t;if(!!this.target){var n=V(".data-link-container");n.length===0&&(n=V("<div ".concat(lt,'="').concat(Gn,'" class="data-link-container').concat(mt?" data-link-container-mobile":"",'"></div>'))),this.root=n;var e=(t=this.target.get())===null||t===void 0?void 0:t.getBoundingClientRect();!e||this.root.css({top:"".concat(window.pageYOffset+e.bottom+4,"px"),left:"".concat(window.pageXOffset,"px"),position:"absolute","z-index":125})}}},{key:"onOk",value:function(){var u=zr(Qt.mark(function n(e,r){var i,a,o,l,c,d,v,h,g,w,x;return Qt.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(this.target){E.next=2;break}return E.abrupt("return");case 2:if(i=this.engine.change,a=i.range.get(),i.rangePathBeforeCommand||(a.startNode.inEditor()||(a.select(this.target,!0),i.range.select(a)),i.cacheRangeBeforeCommand()),o=this.options||{},l=o.onConfirm,!l){E.next=12;break}return E.next=9,l(e,r);case 9:c=E.sent,e=c.text,r=c.link;case 12:if(this.target.attributes("href",r),e=e.trim()===""?r:e,d=this.target.text(),d===e){E.next=45;break}if(h=this.target.children(),!(h.length<3)){E.next=21;break}this.target.text(e),E.next=45;break;case 21:if(!(h.length===3&&((v=h.eq(1))===null||v===void 0?void 0:v.isText()))){E.next=25;break}this.target.text(e),E.next=45;break;case 25:if(h.length!==3){E.next=44;break}g=h.eq(1);case 27:if(!g){E.next=42;break}if(x=g.children(),!(x.length>1||x.length===0)){E.next=34;break}return g.text(e),E.abrupt("break",42);case 34:if(!(!((w=x.eq(0))===null||w===void 0)&&w.isText())){E.next=39;break}return g.text(e),E.abrupt("break",42);case 39:g=x;case 40:E.next=27;break;case 42:E.next=45;break;case 44:this.target.text(e);case 45:this.engine.inline.repairCursor(this.target),a.setStart(this.target.next(),1),a.setEnd(this.target.next(),1),i.apply(a),this.mouseInContainer=!1,this.hide();case 51:case"end":return E.stop()}},n,this)}));function t(n,e){return u.apply(this,arguments)}return t}()},{key:"editor",value:function(t,n,e){var r=this,i=xu(Kp,{language:this.engine.language,defaultText:t,defaultLink:n,onLoad:function(){r.mouseInContainer=!0,e&&e(),r.engine.trigger("select")},onOk:function(o,l){return r.onOk(o,l)}});return i}},{key:"preview",value:function(t,n){var e=this,r=this.engine,i=r.change,a=r.inline,o=r.language,l=xu(Vp,{language:o,href:t,onLoad:function(){n&&n()},onEdit:function(){!e.target||(e.mouseInContainer=!1,e.hide(void 0,!1),e.show(e.target,!0))},onRemove:function(){if(!!e.target){var d=i.range.get();d.select(e.target,!0),a.repairRange(d),i.range.select(d),i.cacheRangeBeforeCommand(),a.unwrap(),e.mouseInContainer=!1,e.target=void 0,e.hide()}}});return l}},{key:"show",value:function(t,n){var e,r,i,a=this;if(!(((e=this.target)===null||e===void 0?void 0:e.equal(t))&&!!(!((r=this.root)===null||r===void 0||(i=r.parent())===null||i===void 0)&&i.length))){this.target=t,this.create();var o=t.text().replace(/\u200B/g,""),l=t.attributes("href"),c=this.root.get(),d=!l||n?"am-link-editor":"am-link-preview";if(this.vm&&this.vm._component.name===d){var v,h;if(!this.root||!this.target)return;(v=this.position)===null||v===void 0||v.destroy(),(h=this.position)===null||h===void 0||h.bind(this.root,this.target);return}else if(this.vm){var g;this.vm.unmount(),this.vm=void 0,(g=this.position)===null||g===void 0||g.destroy()}setTimeout(function(){var w,x;(w=a.position)===null||w===void 0||w.destroy(),(x=a.position)===null||x===void 0||x.bind(a.root,a.target),a.vm=!l||n?a.editor(o,l,function(){var _;(_=a.position)===null||_===void 0||_.update()}):a.preview(l,function(){var _;(_=a.position)===null||_===void 0||_.update()}),a.vm.mount(c)},20)}}},{key:"hide",value:function(t,n){var e;if(!(t&&this.target&&t.equal(this.target))){var r=(e=this.root)===null||e===void 0?void 0:e.get();if(r&&!this.mouseInContainer){if(this.vm){var i;this.vm.unmount(),this.vm=void 0,(i=this.position)===null||i===void 0||i.destroy()}if(this.root=void 0,this.target&&!this.target.attributes("href")){var a=this.engine,o=a.change,l=a.inline,c=o.range.get();c.select(this.target,!0),o.range.select(c),l.unwrap()}n!==!1&&(this.target=void 0)}}}}]),b}(),mM={link:{text:"Text",link:"Link",text_placeholder:"Description text",link_placeholder:"Link address",link_open:"Open link",link_edit:"Edit link",link_remove:"Remove link",ok_button:"OK"}},bM={link:{text:"\u6587\u672C",link:"\u94FE\u63A5",text_placeholder:"\u63CF\u8FF0\u6587\u672C",link_placeholder:"\u94FE\u63A5\u5730\u5740",link_open:"\u6253\u5F00\u94FE\u63A5",link_edit:"\u7F16\u8F91\u94FE\u63A5",link_remove:"\u79FB\u9664\u94FE\u63A5",ok_button:"\u786E\u5B9A"}},yM={"en-US":mM,"zh-CN":bM};function wM(b,u){u===void 0&&(u={});var t=u.insertAt;if(!(!b||typeof document=="undefined")){var n=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",t==="top"&&n.firstChild?n.insertBefore(e,n.firstChild):n.appendChild(e),e.styleSheet?e.styleSheet.cssText=b:e.appendChild(document.createTextNode(b))}}var kM=`.data-link-container {\r
    max-width: 398px;\r
    display: inline-block;\r
    border: 1px solid #E8E8E8;\r
    border-radius: 4px;\r
    box-shadow: rgba(221, 221, 221, 0.5) 0px 1px 3px;\r
    background: white;\r
}\r
\r
.data-link-container-mobile {\r
    max-width: calc(100vw - 20px);;\r
}\r
\r
.data-link-container .data-link-editor {\r
    min-width: 365px;\r
    padding: 16px 12px;\r
    padding-bottom: 4px;\r
}\r
\r
.data-link-container-mobile .data-link-editor {\r
    min-width: calc(100vw - 40px);\r
    padding: 8px 6px;\r
}\r
\r
.data-link-container p {\r
    margin-top: 0;\r
    margin-bottom: 14px;\r
}\r
\r
.data-link-container .itellyou-icon {\r
    color: #8590A6;\r
    font-size: 16px;\r
}\r
.data-link-preview {\r
    line-height: 16px;\r
    padding: 6px 8px;\r
    vertical-align: middle;\r
    white-space: nowrap;\r
    display: flex;\r
    justify-content:space-between;\r
}\r
.data-link-preview > * {\r
    display: block;\r
}\r
\r
.data-link-preview a {\r
    display: inline-block;\r
    color: #595959;\r
    margin: 0px 0px 0px 8px;\r
    padding: 4px;\r
}\r
.data-link-preview a:hover {\r
    background: #F4F4F4;\r
    cursor: pointer;\r
}\r
.data-link-preview a.data-link-preview-open {\r
    color: #1890FF;\r
    max-width: 292px;\r
    overflow: hidden;\r
    text-overflow: ellipsis;\r
    white-space: nowrap;\r
    text-decoration: none;\r
    font-size: 14px;\r
    letter-spacing: 1.2px;\r
    vertical-align: middle;\r
    margin: 0;\r
}\r
.data-link-container-mobile .data-link-preview a.data-link-preview-open {\r
    max-width: 70%;\r
}\r
.data-link-preview a.data-link-preview-open::before\r
{\r
    vertical-align: middle;\r
    margin-right: 2px;\r
}\r
\r
.data-link-preview a.data-link-preview-open:hover{\r
    background: transparent;\r
}`;wM(kM);var xM=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.toolbar=void 0,n.attributes={target:"@var0",href:"@var1"},n.variable={"@var0":["_blank","_parent","_top","_self"],"@var1":{required:!0,value:"*"}},n.tagName="a",n.markdown=n.options.markdown===void 0?"[^!]\\[(.+?)\\]\\(s*([\\S]+?)\\s*\\)$":n.options.markdown,n.bindQuery=function(){n.query()},n.query=function(){var a;if(!!ge(n.editor)){var o=n.editor.change,l=o.inlines.find(function(h){return n.isSelf(h)});if((a=n.toolbar)===null||a===void 0||a.hide(l),l&&l.length>0&&!l.isCard()){var c=o.range.get();if(c.collapsed||l.contains(c.startNode)&&l.contains(c.endNode)){var d;return(d=n.toolbar)===null||d===void 0||d.show(l),!0}else{var v;(v=n.toolbar)===null||v===void 0||v.hide()}}return!1}},n.checkMarkdown=function(a){if(!(!ge(n.editor)||!n.markdown||!a.isText())){var o=a.text();if(!!o){var l=/(\[(.+?)\]\(\s*([\S]+?)\s*\))/,c=l.exec(o);return{reg:l,match:c}}}},n.pasteMarkdown=function(a){var o=n.checkMarkdown(a);if(!!o){var l=o.reg,c=o.match;if(!!c){for(var d="",v=a.clone(!0).get();v.textContent&&(c=l.exec(v.textContent));){var h,g=v.splitText(c.index);if(v.textContent.endsWith("!")||c[2].startsWith("!")){d+=v.textContent,v=g.splitText(c[0].length),d+=g.textContent;continue}d+=v.textContent,v=g.splitText(c[0].length);var w=c[2],x=c[3],_=V("<".concat(n.tagName," />"));n.setAttributes(_,"_blank",(x||"").trim()),_.html(w||x),d+=(h=_.get())===null||h===void 0?void 0:h.outerHTML}d+=v.textContent,a.text(d)}}},n.parseHtml=function(a){a.find(n.tagName).css({"font-family":"monospace","font-size":"inherit","background-color":"rgba(0,0,0,.06)",padding:"0 2px",border:"1px solid rgba(0,0,0,.08)","border-radius":"2px 2px","line-height":"inherit","overflow-wrap":"break-word","text-indent":"0"})},n.pasteHtml=function(a){if(a.isText()){var o=a.text(),l=n.editor,c=l.node,d=l.inline;if(/^https?:\/\/\S+$/.test(o.toLowerCase().trim())&&!d.closest(a).equal(a))return c.wrap(a,V("<".concat(n.tagName,' target="_blank" href="').concat(o,'"></a>'))),!1}return!0},n}return Be(t,[{key:"init",value:function(){At(St(t.prototype),"init",this).call(this);var e=this.editor;ge(e)&&(this.toolbar=new gM(e,{onConfirm:this.options.onConfirm})),e.on("paste:each",this.pasteHtml),e.on("parse:html",this.parseHtml),e.on("select",this.bindQuery),e.language.add(yM)}},{key:"hotkey",value:function(){return this.options.hotkey||{key:"mod+k",args:["_blank"]}}},{key:"execute",value:function(){var e=this;if(!!ge(this.editor)){var r=this.editor,i=r.inline,a=r.change;if(this.queryState()){var v=a.inlines.find(function(h){return e.isSelf(h)});v&&v.length>0&&i.unwrap(v)}else{var o=V("<".concat(this.tagName," />"));this.setStyle.apply(this,[o].concat(Array.prototype.slice.call(arguments))),this.setAttributes.apply(this,[o].concat(Array.prototype.slice.call(arguments)));var l=arguments.length>2?arguments[2]:"";l?(o.text(l),i.insert(o)):i.wrap(o);var c=a.range.get();if(!c.collapsed&&a.inlines.length>0){var d;(d=this.toolbar)===null||d===void 0||d.show(a.inlines[0])}}}}},{key:"queryState",value:function(){return this.query()}},{key:"triggerMarkdown",value:function(e,r,i){var a=this.editor;if(!(!ge(a)||!this.markdown)){var o=new RegExp(this.markdown).exec(r);if(o){var l=a.command;e.preventDefault();var c=o[1],d=o[2],v=i.get().splitText(i.text().length-o[0].length);return v.splitText(o[0].length),V(v).remove(),l.execute(this.constructor.pluginName,"_blank",d,c),a.node.insertText("\xA0"),!1}}}},{key:"destroy",value:function(){At(St(t.prototype),"destroy",this).call(this),this.editor.off("paste:each",this.pasteHtml),this.editor.off("parse:html",this.parseHtml),this.editor.off("select",this.bindQuery)}}],[{key:"pluginName",get:function(){return"link"}}]),t}(Nm);function CM(b,u){u===void 0&&(u={});var t=u.insertAt;if(!(!b||typeof document=="undefined")){var n=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",t==="top"&&n.firstChild?n.insertBefore(e,n.firstChild):n.appendChild(e),e.styleSheet?e.styleSheet.cssText=b:e.appendChild(document.createTextNode(b))}}var EM=`.am-engine mark,\r
.am-engine-view mark {\r
    padding: 0;\r
    background: #ff0;\r
}`;CM(EM);var _M=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.tagName="mark",n.markdown=n.options.markdown===void 0?"==":n.options.markdown,n}return Be(t,[{key:"hotkey",value:function(){return this.options.hotkey||""}}],[{key:"pluginName",get:function(){return"mark"}}]),t}(is);const SM={class:"mention-container"},MM=jt("p",null,"\u914D\u7F6E mention \u63D2\u4EF6\u7684 onMouseEnter \u65B9\u6CD5",-1),TM=jt("p",null,"\u6B64\u5904\u4F7F\u7528 createApp().mount \u81EA\u5B9A\u4E49\u6E32\u67D3",-1),AM=jt("p",null,"Use createApp().mount to customize rendering here",-1),NM=or({name:"AmMention"}),DM=or(ud(hl({},NM),{props:{name:null},setup(b){return(u,t)=>(ct(),zt("div",SM,[jt("p",null,"This is name: "+pi(b.name),1),MM,TM,AM]))}}));var IM=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.tagName="ol",n.attributes={start:"@var0","data-indent":"@var1"},n.variable={"@var0":"@number","@var1":"@number"},n.allowIn=["blockquote","$root"],n.pasteMarkdown=function(a){var o=n.checkMarkdown(a);if(!!o){var l=o.match;if(!!l){var c=n.editor.list,d=function(M,T,S){var D,I=V("<".concat(n.tagName,">").concat(M.join(""),"</").concat(n.tagName,">"));return T&&I.attributes("start",T),S&&I.attributes(n.editor.list.INDENT_KEY,S),c.addBr(I),(D=I.get())===null||D===void 0?void 0:D.outerHTML},v=a.text(),h=l[1]||"",g=v.split(/\n|\r\n/),w=[],x=0,_=void 0;g.forEach(function(E){var M=/^(\s*)(\d{1,9}\.)/.exec(E);if(M){var T=M[2].length;_===void 0&&(_=parseInt(M[2].substr(0,T-1),10));var S=E.substr((/^\s+/.test(E.substr(T))?T+1:T)+M[1].length);M[1].length!==x&&w.length>0&&(h+=d(w,void 0,x),w=[],x=Math.ceil(M[1].length/2)),w.push("<li>".concat(S,"</li>"))}else w.length>0?(h+=d(w,_,x)+`
`+E+`
`,w=[],_=void 0):h+=E+`
`}),w.length>0&&(h+=d(w,_,x)+`
`),a.text(h)}}},n}return Be(t,[{key:"init",value:function(){At(St(t.prototype),"init",this).call(this),ge(this.editor)&&this.editor.on("paste:markdown",this.pasteMarkdown)}},{key:"schema",value:function(){var e=At(St(t.prototype),"schema",this).call(this);return[e,{name:"ol",type:"block"},{name:"li",type:"block",allowIn:["ol"]}]}},{key:"isCurrent",value:function(e){var r=this.editor.list;return!e.hasClass(r.CUSTOMZIE_UL_CLASS)&&e.name==="ol"}},{key:"execute",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;if(!!ge(this.editor)){var r=this.editor,i=r.change,a=r.list,o=r.block;a.split();var l=i.range.get(),c=o.findBlocks(l);if(c){var d=l.createSelection();a.getPluginNameByNodes(c)==="orderedlist"?a.unwrap(c):a.toNormal(c,"ol",e),d.move(),i.range.select(l),a.merge()}}}},{key:"hotkey",value:function(){return this.options.hotkey||"mod+shift+7"}},{key:"markdown",value:function(e,r,i){if(!(!ge(this.editor)||this.options.markdown===!1)&&i.name==="p"&&!!/^\d{1,9}\.$/.test(r))return e.preventDefault(),this.editor.block.removeLeftText(i),this.editor.node.isEmpty(i)&&(i.empty(),i.append("<br />")),this.editor.command.execute(this.constructor.pluginName,parseInt(r.replace(/\./,""),10)),!1}},{key:"checkMarkdown",value:function(e){if(!(!ge(this.editor)||!this.markdown||!e.isText())){var r=e.text();if(!!r){var i=/(^|\r\n|\n)\s*(\d{1,9}\.\s+)/,a=i.exec(r);return{reg:i,match:a}}}}},{key:"destroy",value:function(){At(St(t.prototype),"destroy",this).call(this),ge(this.editor)&&this.editor.off("paste:markdown",this.pasteMarkdown)}}],[{key:"pluginName",get:function(){return"orderedlist"}}]),t}(zp);function LM(b,u){u===void 0&&(u={});var t=u.insertAt;if(!(!b||typeof document=="undefined")){var n=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",t==="top"&&n.firstChild?n.insertBefore(e,n.firstChild):n.appendChild(e),e.styleSheet?e.styleSheet.cssText=b:e.appendChild(document.createTextNode(b))}}var OM=`.am-engine.data-paintformat-mode,\r
.am-engine-view.data-paintformat-mode {\r
    cursor: text;\r
    cursor: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAUCAYAAACTQC2+AAAABGdBTUEAALGPC/xhBQAAATtJREFUSA3dlTFLA0EQhU+jlSkEG63EYGdlZZFG7QUbSyG/QP/C/Q0rqzQWQX+BwUKwtrexEFRQtFSI35NZWDa3soOHhQ8eM/v2zWw2N9xVVVUdwXUYoFxaq5il2wa8hvtG5dJaxYx16xFvLN8i3lmehiFC6Y94wbsTGsxZosajKA/7aewjrKZiyTocJO9DSYHT82r+YXyQs0eRfYBrD/Y1DB58OMyfeM/hrWq8N9qlZkmFBXiPPd6D7ikWUxwjrKWirTeJkzDeNYttKIxhDUuxiFGjfAnfMkUX3hs19emYqFt9P48mU6zVLEQPFjCfwgk8gyuwEd6pS5t0EQYmHhCXLZ8Kvz1oqmFO+H8HxVOXfZC5vwNd46y3xbx5ni1mQ4+dJ6NyDw4xX0GN9484YfcRhg+fcmmt408+5V99wSyVTWN94gAAAABJRU5ErkJggg==) 5 10, text;\r
}`;LM(OM);var zM="data-paintformat-mode",RM=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.activeMarks=void 0,n.activeBlocks=void 0,n.type=void 0,n.event=void 0,n.isFormat=!1,n.onBeforeCommandExecute=function(a){a!=="paintformat"&&!n.isFormat&&n.event&&n.removeActiveNodes(n.editor.container[0].ownerDocument)},n.onContainerMouseUp=function(a){if(!(!n.activeMarks||!a.target)){if(n.editor.card.closest(V(a.target))){n.removeActiveNodes(n.editor.container[0].ownerDocument);return}n.isFormat=!0,n.paintFormat(n.activeMarks,n.activeBlocks),n.isFormat=!1,n.type==="single"&&n.removeActiveNodes(n.editor.container[0].ownerDocument)}},n}return Be(t,[{key:"init",value:function(){!ge(this.editor)||(this.editor.on("beforeCommandExecute",this.onBeforeCommandExecute),this.editor.container.on("mouseup",this.onContainerMouseUp))}},{key:"removeActiveNodes",value:function(e){Ht(e)&&(e=V(e)),this.editor.container.removeClass(zM),this.activeMarks=void 0,this.activeBlocks=void 0,this.event&&(e.off("keydown",this.event),this.event=void 0),ge(this.editor)&&this.editor.trigger("select")}},{key:"bindEvent",value:function(e){var r=this,i=e[0].ownerDocument,a=function o(l){l.metaKey||l.ctrlKey||l.shiftKey||(r.event=void 0,(l.key==="Escape"||l.keyCode===27)&&(e.off("keydown",o),i&&r.removeActiveNodes(i)))};i&&(V(i).on("keydown",a),this.event=a)}},{key:"paintFormat",value:function(e,r){var i=this;if(!!ge(this.editor)){var a=this.editor,o=a.change,l=a.command,c=a.block,d=o.range.get(),v=this.options.removeCommand||"removeformat";if(d.collapsed){var h=V("<img ".concat(lt,'="').concat(Gn,'" role="format-dummy" style="display: none;" />'));d.insertNode(h[0]);var g=c.closest(d.startNode);d.select(g,!0),o.range.select(d),typeof v=="function"?v(d):l.execute(v),this.paintMarks(e);var w=c.getBlocks(d);r&&w.forEach(function(_){i.paintBlocks(_,r)}),h=g.find('img[role="format-dummy"]'),d.select(h),d.collapse(!0),h.remove(),o.apply(d)}else{typeof v=="function"?v(d):l.execute(v),this.paintMarks(e);var x=c.getBlocks(d);r&&x.forEach(function(_){i.paintBlocks(_,r)})}this.editor.mark.merge(d)}}},{key:"paintMarks",value:function(e){for(var r=this.editor.mark,i=e.length-1;i>=0;i--){var a=e[i];r.wrap(this.editor.node.clone(a,!1,!1))}}},{key:"paintBlocks",value:function(e,r){var i=this;if(!(!ge(this.editor)||!e.inEditor())){var a=this.editor,o=a.node,l=a.change,c=this.editor.block,d=l.range.get(),v=d.createSelection("removeformat");r.forEach(function(h){if(!!e.inEditor()){if(i.options.paintBlock){var g=i.options.paintBlock(e,h);if(g===!1)return}if(h.name!==e.name){if(d.select(e).shrinkToElementNode(),l.blocks=[e],h.name==="p"){var w=c.findPlugin(e);w&&w.execute(h.name)}else if(o.isRootBlock(h)){var x=c.findPlugin(h);x&&x.execute(h.name)}else if(o.isList(h)&&h.name!=="li"){var _=c.findPlugin(h),E=c.findPlugin(e.name==="li"?e.parent():e);_&&E!==_&&_.execute()}}var M=h.css();Object.keys(M).length>0&&c.setBlocks({style:M})}}),v.move()}}},{key:"execute",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"single";if(!!ge(this.editor)){if(this.activeMarks){this.removeActiveNodes(this.editor.container);return}this.type=e,this.bindEvent(this.editor.container);var r=this.editor,i=r.change,a=r.mark,o=r.block,l=i.range.get();this.activeMarks=a.findMarks(l),this.activeBlocks=o.findBlocks(l),this.editor.trigger("select"),this.editor.container.addClass("data-paintformat-mode")}}},{key:"queryState",value:function(){return!!this.activeMarks}},{key:"destroy",value:function(){this.editor.off("beforeCommandExecute",this.onBeforeCommandExecute),this.editor.container.off("mouseup",this.onContainerMouseUp)}}],[{key:"pluginName",get:function(){return"paintformat"}}]),t}(Rr);function FM(b,u){u===void 0&&(u={});var t=u.insertAt;if(!(!b||typeof document=="undefined")){var n=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",t==="top"&&n.firstChild?n.insertBefore(e,n.firstChild):n.appendChild(e),e.styleSheet?e.styleSheet.cssText=b:e.appendChild(document.createTextNode(b))}}var BM=`.am-engine blockquote, .am-engine-view blockquote {\r
    margin: 5px 0 5px 0;\r
    border-left: 3px solid #eee;\r
    color: #8C8C8C;\r
}\r
\r
.am-engine blockquote + blockquote, .am-engine-view blockquote + blockquote {\r
    margin-top: -5px;\r
}\r
\r
.am-engine blockquote > *, .am-engine-view blockquote > * {\r
    margin-left: 14px;\r
    color: #8C8C8C;\r
}\r
\r
.am-engine blockquote *, .am-engine-view blockquote * {\r
    color: #8C8C8C;\r
}\r
\r
.am-engine blockquote a, .am-engine blockquote a:hover, .am-engine-view blockquote a, .am-engine-view blockquote a:hover {\r
  color: #1890ff !important;\r
}`;FM(BM);var PM=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.tagName="blockquote",n.canMerge=!0,n.markdown=function(a,o,l){if(!(n.options.markdown===!1||!ge(n.editor))){var c=n.editor,d=c.node,v=c.command,h=n.editor.block,g=h.findPlugin(l);if(!(l.name!=="p"||g&&g.constructor.pluginName==="heading")&&!([">"].indexOf(o)<0))return a.preventDefault(),h.removeLeftText(l),d.isEmpty(l)&&(l.empty(),l.append("<br />")),v.execute(n.constructor.pluginName),!1}},n.pasteEach=function(a){var o;a.isText()&&((o=a.parent())===null||o===void 0?void 0:o.name)===n.tagName&&n.editor.node.wrap(a,V("<p></p>"))},n.checkMarkdownMath=function(a){var o;return!(!((o=n.checkMarkdown(a))===null||o===void 0)&&o.match)},n.checkMarkdown=function(a){if(!(!ge(n.editor)||!n.markdown||!a.isText())){var o=a.text();if(!!o){var l=/(^|\r\n|\n)([>]{1,})/,c=l.exec(o);return{reg:l,match:c}}}},n.pasteMarkdown=function(a){var o=n.checkMarkdown(a);if(!!o){var l=o.match;if(!!l){var c=a.text(),d=l[1]||"",v=c.split(/\n|\r\n/),h=[];v.forEach(function(g){var w=/^([>]{1,})/.exec(g);if(w){var x,_=w[1].length,E=g.substr(/^\s+/.test(g.substr(_))?_+1:_),M=V("<div></div>");M.html(E);var T=M.children();T.length>1||T.length===1&&!n.editor.node.isBlock(T[0])&&!(!((x=T.eq(0))===null||x===void 0)&&x.isBlockCard())?h.push("<p>".concat(E,"</p>")):h.push(E)}else h.length>0?(d+="<".concat(n.tagName,">").concat(h.join(""),"</").concat(n.tagName,">")+`
`+g+`
`,h=[]):d+=g+`
`}),h.length>0&&(d+="<".concat(n.tagName,">").concat(h.join(""),"</").concat(n.tagName,">")+`
`),a.text(d)}}},n.onBackspace=function(a){if(!!ge(n.editor)){var o=n.editor,l=o.change,c=o.node,d=l.range.get(),v=n.editor.block,h=v.isLastOffset(d,"end");if(h&&!d.collapsed){var g=v.closest(d.startNode),w=v.closest(d.endNode),x=g.parent(),_=w.parent();if(x&&_&&_.name==="blockquote"&&!x.equal(_)){_.remove();return}}var E=v.isFirstOffset(d,"start");if(!!E){var M=v.closest(d.startNode),T=M.parent();if(T&&T.name==="blockquote"&&c.isBlock(M)){if(a.preventDefault(),M.prevElement())l.mergeAfterDelete(M);else if(c.isEmpty(T)){var S=V("<p><br/></p>");T.replaceWith(S),d.select(S,!0).collapse(!1),l.apply(d)}else v.unwrap("<blockquote />");return!1}}}},n.onEnter=function(a){if(!!ge(n.editor)){var o=n.editor.change,l=n.editor.block,c=o.range.get(),d=l.closest(c.endNode),v=d.parent();if((v==null?void 0:v.name)===n.tagName&&d.name==="p"&&d.nextElement())return a.preventDefault(),l.insertOrSplit(c,d),!1}},n.parseHtml=function(a){a.find("blockquote").css({"margin-top":"5px","margin-bottom":"5px","padding-left":"1em","margin-left":"0px","border-left":"3px solid #eee",opacity:"0.6"})},n.pasteHtml=function(a){if(!!ge(n.editor)){if(a.name===n.tagName){var o=n.editor.node;return a.css("padding-left",""),a.css("text-indent",""),o.isEmpty(a)&&a.append("<p><br/></p>"),n.editor.normalize(a),!1}return!0}},n}return Be(t,[{key:"init",value:function(){At(St(t.prototype),"init",this).call(this),this.editor.schema.addAllowIn(this.tagName),this.editor.on("parse:html",this.parseHtml),ge(this.editor)&&(this.editor.on("paste:each",this.pasteHtml),this.editor.on("keydown:backspace",this.onBackspace),this.editor.on("keydown:enter",this.onEnter),this.editor.on("paste:markdown",this.pasteMarkdown),this.editor.on("paste:each",this.pasteEach),this.editor.on("paste:markdown-check",this.checkMarkdownMath))}},{key:"execute",value:function(){if(!!ge(this.editor)){var e=this.editor,r=e.change,i=e.block,a=e.node;if(!this.queryState())i.wrap("<".concat(this.tagName," />"));else{var o=r.range.get(),l=r.blocks[0].closest(this.tagName),c=o.createSelection();a.unwrap(l),c.move(),r.range.select(o);return}}}},{key:"queryState",value:function(){if(!!ge(this.editor)){var e=this.editor.change,r=e.blocks;if(r.length===0)return!1;var i=r[0].closest(this.tagName);return this.isSelf(i)}}},{key:"hotkey",value:function(){return this.options.hotkey||"mod+shift+u"}},{key:"destroy",value:function(){this.editor.off("parse:html",this.parseHtml),ge(this.editor)&&(this.editor.off("paste:each",this.pasteHtml),this.editor.off("keydown:backspace",this.onBackspace),this.editor.off("keydown:enter",this.onEnter),this.editor.off("paste:markdown",this.pasteMarkdown),this.editor.off("paste:each",this.pasteEach),this.editor.off("paste:markdown-check",this.checkMarkdownMath))}}],[{key:"pluginName",get:function(){return"quote"}}]),t}(Op);const HM={};function jM(b,u){return ct(),zt("div",null,[Nd(b.$slots,"default")])}var WM=ev(HM,[["render",jM]]),UM=function(b){ft(t,b);var u=ht(t);function t(){return Fe(this,t),u.apply(this,arguments)}return Be(t,[{key:"execute",value:function(){!ge(this.editor)||this.editor.readonly||this.editor.history.redo()}},{key:"queryState",value:function(){if(!(!ge(this.editor)||this.editor.readonly))return this.editor.history.hasRedo()}},{key:"hotkey",value:function(){return this.options.hotkey||["mod+y","shift+mod+y"]}}],[{key:"pluginName",get:function(){return"redo"}}]),t}(Rr),qM=function(b){ft(t,b);var u=ht(t);function t(){return Fe(this,t),u.apply(this,arguments)}return Be(t,[{key:"execute",value:function(){if(!!ge(this.editor)){var e=this.editor,r=e.change,i=e.block,a=e.mark,o=e.inline,l=i,c=r.range.get(),d=l.getBlocks(c),v=a.findMarks(c),h=o.findInlines(c);if(v.length>0)a.unwrap();else if(h.length>0)o.unwrap();else{var g=c.createSelection("removeformat");d.forEach(function(w){var x=l.findPlugin(w.name==="li"?w.parent():w);x&&(c.select(w).shrinkToElementNode(),x.execute()),w.removeAttributes("style")}),g.move()}}}},{key:"hotkey",value:function(){return this.options.hotkey||"mod+\\"}}],[{key:"pluginName",get:function(){return"removeformat"}}]),t}(Rr),$M=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.onSelectAll=function(a){var o=n.editor.command;a.preventDefault(),o.execute("selectall")},n}return Be(t,[{key:"init",value:function(){this.editor.on("keydown:all",this.onSelectAll)}},{key:"execute",value:function(){if(!!ge(this.editor)){var e=this.editor.change,r=e.range.get(),i=r.startNode.closest(Nn);i.length>0?r.select(i,!0):r.select(this.editor.container,!0),e.range.select(r),this.editor.trigger("select")}}},{key:"destroy",value:function(){this.editor.off("keydown:all",this.onSelectAll)}}],[{key:"pluginName",get:function(){return"selectall"}}]),t}(Rr),GM=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.tagName="del",n.markdown=n.options.markdown===void 0?"~~":n.options.markdown,n}return Be(t,[{key:"hotkey",value:function(){return this.options.hotkey||"mod+shift+x"}},{key:"conversion",value:function(){var e=this;return[{from:function(i,a){return i==="span"&&(a["text-decoration"]||"").includes("line-through")},to:function(i,a,o){var l=V("<".concat(e.tagName," />"));return a["text-decoration"]=a["text-decoration"].split(/\s+/).filter(function(c){return c!=="line-through"}).join(" ").trim(),l.css(a),l.attributes(o),l}},{from:"s",to:this.tagName},{from:"strike",to:this.tagName}]}}],[{key:"pluginName",get:function(){return"strikethrough"}}]),t}(is),ZM=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.tagName="sub",n.markdown=n.options.markdown===void 0?"~":n.options.markdown,n}return Be(t,[{key:"conversion",value:function(){var e=this;return[{from:function(i,a){return i==="span"&&(a["vertical-align"]||"")==="sub"},to:function(i,a,o){var l=V("<".concat(e.tagName," />"));return delete a["vertical-align"],l.css(a),l.attributes(o),l}}]}},{key:"hotkey",value:function(){return this.options.hotkey||"mod+,"}}],[{key:"pluginName",get:function(){return"sub"}}]),t}(is),YM=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.tagName="sup",n.markdown=n.options.markdown===void 0?"^":n.options.markdown,n}return Be(t,[{key:"conversion",value:function(){var e=this;return[{from:function(i,a){return i==="span"&&(a["vertical-align"]||"")==="super"},to:function(i,a,o){var l=V("<".concat(e.tagName," />"));return delete a["vertical-align"],l.css(a),l.attributes(o),l}}]}},{key:"hotkey",value:function(){return this.options.hotkey||"mod+."}}],[{key:"pluginName",get:function(){return"sup"}}]),t}(is),KM=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.tagName="u",n}return Be(t,[{key:"hotkey",value:function(){return this.options.hotkey||"mod+u"}},{key:"conversion",value:function(){var e=this;return[{from:function(i,a){return i==="span"&&(a["text-decoration"]||"").includes("underline")},to:function(i,a,o){var l=V("<".concat(e.tagName," />"));return a["text-decoration"]=a["text-decoration"].split(/\s+/).filter(function(c){return c!=="underline"}).join(" ").trim(),l.css(a),l.attributes(o),l}}]}}],[{key:"pluginName",get:function(){return"underline"}}]),t}(is),VM=function(b){ft(t,b);var u=ht(t);function t(){return Fe(this,t),u.apply(this,arguments)}return Be(t,[{key:"execute",value:function(){!ge(this.editor)||this.editor.readonly||this.editor.history.undo()}},{key:"queryState",value:function(){if(!(!ge(this.editor)||this.editor.readonly))return this.editor.history.hasUndo()}},{key:"hotkey",value:function(){return this.options.hotkey||["mod+z","shift+mod+z"]}}],[{key:"pluginName",get:function(){return"undo"}}]),t}(Rr),QM=function(b){ft(t,b);var u=ht(t);function t(){var n;Fe(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=u.call.apply(u,[this].concat(r)),n.tagName="ul",n.attributes={"data-indent":"@var0"},n.variable={"@var0":"@number"},n.allowIn=["blockquote","$root"],n.checkMarkdownMath=function(a){var o;return!(!((o=n.checkMarkdown(a))===null||o===void 0)&&o.match)},n.pasteMarkdown=function(a){var o=n.checkMarkdown(a);if(!!o){var l=o.match;if(!!l){var c=n.editor.list,d=function(E,M,T){var S,D=V("<".concat(n.tagName,">").concat(E.join(""),"</").concat(n.tagName,">"));return M&&D.attributes("start",M),T&&D.attributes(n.editor.list.INDENT_KEY,T),c.addBr(D),(S=D.get())===null||S===void 0?void 0:S.outerHTML},v=a.text(),h=l[1]||"",g=v.split(/\n|\r\n/),w=[],x=0;g.forEach(function(_){var E=/^(\s*)([\*\-\+]{1,}\s+)/.exec(_);if(E){var M=E[2].length,T=_.substr(M+E[1].length);E[1].length!==x&&w.length>0&&(h+=d(w,void 0,x),w=[],x=Math.ceil(E[1].length/2)),w.push("<li>".concat(T,"</li>"))}else w.length>0?(h+=d(w,void 0,x)+`
`+_+`
`,w=[]):h+=_+`
`}),w.length>0&&(h+=d(w,void 0,x)+`
`),a.text(h)}}},n}return Be(t,[{key:"init",value:function(){At(St(t.prototype),"init",this).call(this),ge(this.editor)&&(this.editor.on("paste:markdown-check",this.checkMarkdownMath),this.editor.on("paste:markdown",this.pasteMarkdown))}},{key:"schema",value:function(){var e=At(St(t.prototype),"schema",this).call(this);return[e,{name:"ul",type:"block"},{name:"li",type:"block",allowIn:["ul"]}]}},{key:"isCurrent",value:function(e){return!e.hasClass(this.editor.list.CUSTOMZIE_UL_CLASS)&&e.name==="ul"}},{key:"execute",value:function(){if(!!ge(this.editor)){var e=this.editor,r=e.change,i=e.list,a=e.block;i.split();var o=r.range.get(),l=a.findBlocks(o);if(l){var c=o.createSelection();i.getPluginNameByNodes(l)==="unorderedlist"?i.unwrap(l):i.toNormal(l,"ul"),c.move(),r.range.select(o),i.merge()}}}},{key:"hotkey",value:function(){return this.options.hotkey||"mod+shift+8"}},{key:"markdown",value:function(e,r,i){if(!(!ge(this.editor)||this.options.markdown===!1)){var a=this.editor,o=a.node,l=a.command,c=this.editor.block,d=c.findPlugin(i);if(!(i.name!=="p"||d&&d.constructor.pluginName==="heading")&&!(["*","-","+"].indexOf(r)<0))return e.preventDefault(),c.removeLeftText(i),o.isEmpty(i)&&(i.empty(),i.append("<br />")),l.execute(this.constructor.pluginName),!1}}},{key:"checkMarkdown",value:function(e){if(!(!ge(this.editor)||!this.markdown||!e.isText())){var r=e.text();if(!!r){var i=/(^|\r\n|\n)\s*([\*\-\+]{1,}\s+)/g,a=i.exec(r);return{reg:i,match:a}}}}},{key:"destroy",value:function(){At(St(t.prototype),"destroy",this).call(this),ge(this.editor)&&(this.editor.off("paste:markdown-check",this.checkMarkdownMath),this.editor.off("paste:markdown",this.pasteMarkdown))}}],[{key:"pluginName",get:function(){return"unorderedlist"}}]),t}(zp);const Ec="https://editor.aomao.com/api",XM=[UM,VM,nM,aM,tM,oM,L0,O0,KM,$_,YS,IM,QM,dM,uM,GM,ZM,YM,eM,_M,PM,RM,qM,$M,xM,R_,Vm,Km,qS,W_,$m,D0,N0,n0,Hm,I0,xS,z0,r0],JM=[$h,A0,Sc,Gh,Is,mu,yu,xl,kp,bu,Ds],eT={[Hm.pluginName]:{popup:{items:[["bold","strikethrough","fontcolor"],{icon:"text",items:["italic","underline","backcolor","moremark"]},[{type:"button",name:"image-uploader",icon:"image"},"link","tasklist","heading"],{icon:"more",items:[{type:"button",name:"video-uploader",icon:"video"},{type:"button",name:"file-uploader",icon:"attachment"},{type:"button",name:"table",icon:"table"},{type:"button",name:"math",icon:"math"},{type:"button",name:"codeblock",icon:"codeblock"},{type:"button",name:"orderedlist",icon:"ordered-list"},{type:"button",name:"unordered-list",icon:"unordered-list"},{type:"button",name:"hr",icon:"hr"},{type:"button",name:"quote",icon:"quote"}]}]}},[O0.pluginName]:{markdown:"*"},[Vm.pluginName]:{onBeforeRender:(b,u)=>u.startsWith("data:image/")?u:u+"?token=12323"},[Km.pluginName]:{file:{action:`${Ec}/upload/image`,headers:{Authorization:213434}},remote:{action:`${Ec}/upload/image`},isRemote:b=>b.indexOf(Ec)<0},[$m.pluginName]:{action:`${Ec}/upload/file`},[N0.pluginName]:{action:`${Ec}/upload/video`,limitSize:1024*1024*50},[D0.pluginName]:{onBeforeRender:(b,u)=>u+"?token=12323"},[n0.pluginName]:{action:"https://g.aomao.com/latex",parse:b=>b.success?{result:!0,data:b.svg}:{result:!1}},[r0.pluginName]:{action:`${Ec}/user/search`,onLoading:b=>{xu(ek).mount(b.get())},onEmpty:b=>{xu(WM).mount(b.get())},onClick:(b,{key:u,name:t})=>{console.log("mention click:",u,"-",t)},onMouseEnter:(b,{name:u})=>{xu(DM,{name:u}).mount(b.get())}},[L0.pluginName]:{filter:b=>["12px","13px","14px","15px","16px","19px","22px","24px","29px","32px","40px","48px"].indexOf(b)>-1},[I0.pluginName]:{filter:b=>{const u=Bm.find(t=>b.split(",").some(n=>t.value.toLowerCase().indexOf(n.replace(/"/,"").toLowerCase())>-1));return u?u.value:!1}},[z0.pluginName]:{filter:b=>b==="14px"?"1":b==="16px"?"1.15":b==="21px"?"1.5":b==="28px"?"2":b==="35px"?"2.5":b==="42px"?"3":["1","1.15","1.5","2","2.5","3"].indexOf(b)>-1}},tT=`<h2 data-id="h2666-1" style="text-align: center;">\u6742\u8C08\u5C0F\u8BB0</h2><p><br /></p><h3 data-id="h3666-1" style="text-align: center;">\u4E00\u3001\u590D\u6742\u7684\u9152\u610F</h3><p data-id="p6666-a001" style="text-indent: 2em;">\u9152\uFF0C\u4ECE\u6765\u90FD\u662F\u4E00\u4E2A<strong>\u590D\u6742</strong>\u7684\u610F\u8C61\u3002
\u662F\u63A8\u676F\u6362\u76CF\uFF0C\u662F\u9169\u914A\u5927\u9189\uFF0C\u662F\u5F97\u610F\u65F6\u770B\u904D\u957F\u5B89\u82B1\uFF0C\u662F\u5931\u610F\u65F6<span style="color: rgb(255, 77, 79);">\u5FC3\u96E8\u503E\u76C6\u4E0B</span>\u3002\u4E70\u9189\u4E0E\u75DB\u82E6\uFF0C\u773C\u6CEA\u4E0E\u9152\u7CBE\u9F50\u98DE\u3002</p><p><br /></p>
<h3 data-id="h3666-2" style="text-align: center;">\u4E8C\u3001\u5FAE\u91BA\u7CFB\u5217</h3><p contenteditable="false" data-id="p6666-a002" style="text-indent: 2em;">RIO\u7684\u5FAE\u91BA\u7CFB\u5217\uFF0C\u5728\u4EA7\u54C1\u5B9A\u4F4D\u4E0A\uFF0C\u5C31\u5254\u9664\u4E86\u8FD9\u79CD\u7EAF\u7CB9\u75DB\u4E0E\u4E50\u7684\u60C5\u7EEA\uFF0C\u9009\u62E9\u4E86\u4ECB\u4E8E\u6E05\u9192\u4E0E\u8FF7\u4E71\u4E4B\u95F4\u7684\u5FAE\u91BA\u3002
\u521B\u610F\u4EE5<span style="background-color: rgb(250, 219, 20);">\u5C11\u5973\u7684\u6697\u604B</span>\u6765\u5B9A\u4F4D\u8FD9\u79CD\u6726\u80E7\u7F8E\u597D\uFF0C\u7EA0\u7ED3\u82E6\u6DA9\u7684\u60C5\u7EEA\u3002</p>

<h4>2.1\u3001\u5FAE\u91BA\u7CFB\u5217\u4E00</h4><p style="text-indent: 2em;">rio\u9E21\u5C3E\u9152\u5FAE\u91BA\u7CFB\u5217\u6709\u4E94\u6B3E\uFF0C\u5305\u62EC\u767D\u6843\u3001\u8461\u8404\u3001\u4E73\u9178\u83CC\u3001\u67E0\u6AAC\u3001\u897F\u67DA\u4E94\u79CD\u53E3\u5473\uFF0C\u5176\u4E3B\u6253\u4E00\u4EBA\u996E\u9152\uFF0C\u5C5E\u4E8E\u4E00\u4EBA\u7684\u5FAE\u91BA\u65F6\u5149\uFF0C\u4E94\u79CD\u53E3\u5473\u53EF\u4EE5\u8BA9\u4F60\u4E00\u5468\u7684\u5C0F\u9152\u65F6\u5149\u5145\u6EE1\u65B0\u9C9C\u7684\u611F\u89C9\uFF0C\u966A\u4F34\u4F60\u6BCF\u4E2A\u5C0F\u60C5\u7EEA\uFF0C\u4E0D\u8BBA\u4F60\u662F\u4EC0\u4E48\u6837\u7684\u5FC3\u60C5\uFF1A\u5F00\u5FC3\u7684\u3001\u7EA0\u7ED3\u7684\u3001\u65E0\u804A\u7684\u3001\u751C\u871C\u7684\u3001\u5174\u594B\u7684\u8FD8\u662F\u5176\u4ED6\uFF0C\u90FD\u80FD\u591F\u5728RIO\u5FAE\u91BA\u6DE1\u6DE1\u9152\u7CBE\u7684\u4F5C\u7528\u4E0B\u5F97\u5230\u4E00\u79CD\u91CA\u653E\uFF0C\u611F\u53D7\u5230\u4E00\u79CD\u6109\u60A6\u548C\u653E\u677E\u3002</p>
<h4>2.2\u3001\u5FAE\u91BA\u7CFB\u5217\u4E8C</h4><p style="text-indent: 2em;">RIO\u5FAE\u91BA\uFF0C\u4EE5\u6D53\u90C1\u7684\u679C\u5473\u3001\u72EC\u7279\u7684\u4E73\u9178\u83CC\u53E3\u5473\u4E0E\u6717\u59C6\u3001\u767D\u5170\u5730\u3001\u4F0F\u7279\u52A0\u76F8\u78B0\u649E\uFF0C\u4EE4\u4EBA\u5370\u8C61\u6DF1\u523B\uFF0C\u6253\u5F00\u4E00\u7F50RIO\u5FAE\u91BA\uFF0C\u6DE1\u6DE1\u7684\u9999\u6C14\u6EA2\u51FA\uFF0C\u8F7B\u8F7B\u62BF\u4E00\u53E3\uFF0C\u5FAE\u5FAE\u7684\u6C14\u6CE1\u4E0E\u9152\u610F\uFF0C\u8BA9\u4EBA\u89C9\u5F97\u8212\u7F13\u653E\u677E\uFF0C\u4E3A\u72EC\u5904\u65F6\u5149\u589E\u52A0\u4E86\u4E00\u62B9\u8272\u5F69\u3002\u51ED\u6B64RIO\u5FAE\u91BA\u5DF2\u7ECF\u4FD8\u83B7\u4E86\u4E0D\u5C11\u6D88\u8D39\u8005\u7684\u559C\u7231\uFF0C\u5F88\u591A\u6D88\u8D39\u8005\u7EB7\u7EB7\u5728\u5FAE\u535A\u3001\u6296\u97F3\u3001\u5C0F\u7EA2\u4E66\u7B49\u5E73\u53F0\u6652\u56FE\u5B89\u5229\uFF0C\u8868\u8FBE\u81EA\u5DF1\u5BF9RIO\u5FAE\u91BA\u7684\u559C\u7231\uFF0C\u7279\u522B\u662F\u4E73\u9178\u83CC\u53E3\u5473\u548C\u767D\u6843\u53E3\u5473\u7684RIO\u5FAE\u91BA\uFF0C\u4FE8\u7136\u4E00\u79CD\u7F51\u7EA2\u7206\u6B3E\u7684\u8D8B\u52BF\u3002</p>
<h4>2,3\u3001\u5FAE\u91BA\u7CFB\u5217\u4E09</h4><p style="text-indent: 2em;">\u9510\u6FB3\u5FAE\u91BA\u7CFB\u5217\u9152\u5EA6\u6570\u57283\u5EA6\uFF0C\u4EE5\u6D53\u90C1\u7684\u679C\u5473\u3001\u72EC\u7279\u7684\u4E73\u9178\u83CC\u53E3\u5473\u4E0E\u6717\u59C6\u3001\u767D\u5170\u5730\u3001\u4F0F\u7279\u52A0\u76F8\u78B0\u649E\uFF0C\u4EE4\u4EBA\u5370\u8C61\u6DF1\u523B\uFF0C\u6253\u5F00\u4E00\u7F50RIO\u5FAE\u91BA\uFF0C\u6DE1\u6DE1\u7684\u9999\u6C14\u6EA2\u51FA\uFF0C\u8F7B\u8F7B\u62BF\u4E00\u53E3\uFF0C\u5FAE\u5FAE\u7684\u6C14\u6CE1\u4E0E\u9152\u610F\uFF0C\u8BA9\u4EBA\u89C9\u5F97\u8212\u7F13\u653E\u677E\uFF0C\u4E3A\u72EC\u5904\u65F6\u5149\u589E\u52A0\u4E86\u4E00\u62B9\u8272\u5F69\u3002</p>
<h4>2.4\u3001\u5FAE\u91BA\u7CFB\u5217\u56DB</h4><p style="text-indent: 2em;">\u6BCF\u4E00\u6B3E\u53E3\u5473\u90FD\u662F\u4EE5\u4E0D\u540C\u79CD\u7C7B\u7684\u6C34\u679C\u4E3A\u4E3B\uFF0C\u65E0\u8BBA\u662F\u4ECE\u5305\u88C5\u8FD8\u662F\u53E3\u611F\uFF0C\u90FD\u5404\u6709\u7279\u8272\uFF0C\u4E0D\u8BBA\u662F\u4F60\u5F00\u5FC3\u7EA0\u7ED3\u65E0\u804A\u8FD8\u662F\u751C\u871C\u65F6\uFF0C\u90FD\u53EF\u4EE5\u9009\u62E9\u4EFB\u610F\u4E00\u6B3E\u8FDB\u884C\uFF0C\u5E73\u5E38\u80FD\u591F\u5F97\u5230\u4E00\u79CD\u7CBE\u795E\u7684\u91CA\u653E\uFF0C\u611F\u53D7\u5230\u4E86\u4E00\u79CD\u6109\u60A6\u548C\u653E\u677E\u611F\u3002\u6D53\u90C1\u7684\u679C\u9999\u5473\u9053\uFF0C\u72EC\u7279\u7684\u4E73\u9178\u83CC\uFF0C\u518D\u52A0\u4E0A\u4E00\u5B9A\u7684\u6D0B\u9152\u76F8\u4E92\u78B0\u649E\uFF0C\u64E6\u51FA\u4E86\u70ED\u70C8\u7684\u706B\u82B1\uFF0C\u4EE4\u4EBA\u5370\u8C61\u6781\u5176\u6DF1\u523B\uFF0C\u6253\u5F00\u4E00\u7F50\u9510\u6FB3\u5FAE\u91BA\uFF0C\u6709\u6DE1\u6DE1\u7684\u9999\u6C14\uFF0C\u94FA\u6EE1\u6574\u4E2A\u9F3B\u8154\uFF0C\u8F7B\u8F7B\u62BF\u4E00\u53E3\uFF0C\u8BA9\u4EBA\u66F4\u52A0\u89C9\u5F97\u8212\u7F13\u653E\u677E\u3002</p>
<h4>2.4\u3001\u5FAE\u91BA\u7CFB\u5217\u4E94</h4><p style="text-indent: 2em;">\u5FB7\u56FD\u8461\u8404\u9152\u54C1\u8D28\u4F18\u5F02\uFF0C\u7D20\u4EE5\u751C\u767D\u8461\u8404\u9152\u8457\u79F0\uFF0C\u5728\u5F88\u957F\u4E00\u6BB5\u65F6\u95F4\u91CC\uFF0C\u5FB7\u56FD\u7684\u751C\u767D\u8461\u8404\u9152\u53EF\u4EE5\u8BF4\u662F\u79F0\u51A0\u5168\u7403\u3002\u5982\u4ECA\uFF0C\u5FB7\u56FD\u7684\u8461\u8404\u9152\u4E2D\u670970%\u662F\u767D\u8461\u8404\u9152\uFF0C\u5176\u4E2D\u751C\u767D\u8461\u8404\u9152\u548C\u4E0D\u751C\u767D\u8461\u8404\u9152\u5404\u5360\u534A\u58C1\u6C5F\u5C71\u3002\u5FB7\u56FD\u7EA2\u8461\u8404\u9152\u867D\u7136\u4EA7\u91CF\u8F83\u5C11\uFF0C\u4F46\u8FD1\u5E74\u6765\u5176\u54C1\u8D28\u4E5F\u51FA\u73B0\u4E86\u53EF\u559C\u7684\u4E0A\u5347\u8D8B\u52BF\u3002</p>
<h4>2.5\u3001\u5FAE\u91BA\u7CFB\u5217\u516D</h4><p>\u5FB7\u56FD\u662F\u5168\u4E16\u754C\u6700\u5317\u7684\u8461\u8404\u9152\u4EA7\u533A\uFF08\u5317\u7EAC47\u81F355\u5EA6\uFF09\uFF0C\u5DF2\u7ECF\u5230\u8FBE\u4E86\u683D\u57F9\u8461\u8404\u7684\u7EAC\u5EA6\u6781\u9650\u3002\u5927\u897F\u6D0B\u7684\u58A8\u897F\u54E5\u6E7E\u6696\u6D41\u6700\u5317\u53EA\u80FD\u5230\u8FBE\u5FB7\u56FD\uFF0C\u4F7F\u5FB7\u56FD\u7684\u5E73\u5747\u6C14\u6E29\u4E0D\u4F1A\u4F4E\u4E8E9\u2103\uFF0C\u800C\u4F4E\u4E8E\u8FD9\u4E2A\u6E29\u5EA6\u7684\u8BDD\uFF0C\u8461\u8404\u9152\u65E0\u6CD5\u751F\u957F\u4E86\u3002\u6B64\u5916\uFF0C\u5FB7\u56FD\u7684\u8461\u8404\u56ED\u591A\u4F4D\u4E8E\u83B1\u8335\u6CB3\u7554\uFF0C\u79CB\u5B63\u6CB3\u6C34\u4E2D\u5347\u8D77\u7684\u6D53\u96FE\u5BF9\u8461\u8404\u6811\u8D77\u5230\u4FDD\u6696\u7684\u4F5C\u7528\u3002</p>
<p style="text-indent: 2em;">\u5FB7\u56FD\u7684\u65E5\u7167\u65F6\u95F4\u6BD4\u8F83\u77ED\uFF0C\u8FD9\u5C31\u4F7F\u5F97\u5F53\u5730\u7684\u8461\u8404\u6210\u719F\u65F6\u95F4\u8981\u6BD4\u5176\u4ED6\u5730\u65B9\u957F\u4E00\u4E2A\u6708\u5DE6\u53F3\u3002\u8F83\u957F\u7684\u6210\u719F\u65F6\u95F4\u4F7F\u8461\u8404\u53EF\u4EE5\u5145\u5206\u5438\u6536\u571F\u58E4\u4E2D\u7684\u77FF\u7269\u8D28\u3002\u53E6\u5916\uFF0C\u5728\u7F13\u6162\u7684\u6210\u719F\u8FC7\u7A0B\u4E2D\uFF0C\u8461\u8404\u679C\u5B9E\u4E2D\u4E5F\u4F1A\u53D1\u5C55\u51FA\u66F4\u591A\u7684\u9178\u5473\u3002\u6B63\u662F\u56E0\u4E3A\u7EAC\u5EA6\u3001\u6D0B\u6D41\u548C\u65E5\u7167\u7B49\u539F\u56E0\u7684\u7EFC\u5408\u4F5C\u7528\uFF0C\u624D\u9020\u5C31\u4E86\u5FB7\u56FD\u8461\u8404\u9152\u8FF7\u4EBA\u7684\u9178\u5473\u548C\u72EC\u7279\u7684\u9999\u6C14\u3002</p>


<h3 data-id="h3666-3" style="text-align: center;">\u4E09\u3001\u51E1\u5C14\u8D5B\u6587\u5B66</h3><p data-id="p6666-a003" style="text-indent: 2em;">\u6240\u8C13\u201C\u51E1\u5C14\u8D5B\u6587\u5B66\u201D\uFF0C\u4E00\u53E5\u8BDD\u6982\u62EC\u5C31\u662F\u4E0D\u7ECF\u610F\u95F4\u5730\u70AB\u8000\u51FA\u4F18\u8D8A\u611F\u3002\u7528\u4E3B\u6301\u4EBA\u4F55\u7085\u7684\u8BDD\u8BF4\u5C31\u662F\u201C\u7528\u6700\u4F4E\u8C03\u7684\u8BDD\uFF0C\u70AB\u6700\u9AD8\u8C03\u7684\u8000\u3002\u201D</p>
<p data-id="p6666-a004" style="text-indent: 2em;">\u5E26\u4F60\u771F\u6B63\u4E86\u89E3\u51E1\u5C14\u8D5B\uFF0C\u5B9E\u9645\u4E0A\uFF0C\u51E1\u5C14\u8D5B\uFF08Versailles\uFF09\u539F\u6307\u6CD5\u56FD\u8D35\u65CF\u5BAB\u6BBF\uFF0C\u4E5F\u5C31\u662F\u51E1\u5C14\u8D5B\u5BAB\uFF0C\u5B83\u662F\u5DF4\u9ECE\u8457\u540D\u7684\u5BAB\u6BBF\u4E4B\u4E00\uFF0C\u4E5F\u662F\u4E16\u754C\u4E94\u5927\u5BAB\u6BBF\u4E4B\u4E00\uFF0C1979\u5E74\u88AB\u5217\u4E3A\u300A\u4E16\u754C\u6587\u5316\u9057\u4EA7\u540D\u5F55\u300B\u3002</p>
<p data-id="p6666-a005" style="text-indent: 2em;">\u51E1\u5C14\u8D5B\u662F\u6CD5\u56FD\u5DF4\u9ECE\u7684\u536B\u661F\u57CE\u4EE5\u53CA\u4F0A\u592B\u6797\u7701\u7701\u4F1A\uFF0C\u66FE\u662F\u6CD5\u5170\u897F\u738B\u671D\u7684\u884C\u653F\u4E2D\u5FC3\u3002\u4F4D\u4E8E\u5DF4\u9ECE\u897F\u535715\u5343\u7C73\u5904\uFF0C\u4E3A\u4E00\u5EA7\u827A\u672F\u57CE\u5E02\u3002</p><p><br /></p>
<h3 data-id="h3666-4" style="text-align: center;">\u56DB\u3001\u604B\u7231\u7269\u8BED</h3><p data-id="p6666-a006" style="text-indent: 2em;">\u6587\u6848\u4ECE\u6765\u4E0D\u53EA\u662F\u6587\u5B57\uFF0C\u753B\u9762\u66F4\u4E3A\u6587\u6848\u6DFB\u5F69\u3002\u5FAE\u91BA\u7684\u604B\u7231\u7269\u8BED\uFF0C\u90FD\u5728\u8FD9\u51E0\u5F20\u6D77\u62A5\u91CC\u4E86\u3002</p>`,nT=()=>({height:"auto",width:"700px",margin:"70px 0 35px 0",padding:"0",background:"#fff",border:"1px solid #f0f0f0",overflowY:"auto",boxShadow:"rgba(158, 161, 165, 0.4) 0px 2px 12px 0px",minHeight:"calc(100vh - 36px)",fontFamily:'SimSun, \u5B8B\u4F53, "Songti SC", NSimSun, STSong, serif'}),rT=[["collapse"],["undo","redo","paintformat","removeformat"],["heading","fontfamily","fontsize"],["bold","italic","strikethrough","underline","moremark"],["fontcolor","backcolor"],["alignment"],["unorderedlist","orderedlist","tasklist","indent","line-height"],["link","quote","hr"]],iT=[["undo","redo"],{icon:"text",items:["bold","italic","strikethrough","underline","moremark"]},[{type:"button",name:"image-uploader",icon:"image"},"link","tasklist","heading"],{icon:"more",items:[{type:"button",name:"video-uploader",icon:"video"},{type:"button",name:"file-uploader",icon:"attachment"},{type:"button",name:"table",icon:"table"},{type:"button",name:"math",icon:"math"},{type:"button",name:"codeblock",icon:"codeblock"},{type:"button",name:"orderedlist",icon:"orderedlist"},{type:"button",name:"unorderedlist",icon:"unorderedlist"},{type:"button",name:"hr",icon:"hr"}]}],aT=b=>b?[...iT]:[...rT];const R0=b=>(dm("data-v-192a6bd0"),b=b(),cm(),b),oT={class:"editor-wrap"},sT={class:"editor-body"},lT=R0(()=>jt("div",{class:"doc-wrap"},[jt("div",{class:"title"},"\u7814\u53D1\u73AF\u5883\u90E8\u7F72"),jt("div",{class:"sub-title"},"\u6280\u672F\u6587\u6863 | \u7814\u53D1\u90E8")],-1)),uT={class:"operate"},dT=Nc(" \u4E3B\u9875 "),cT=Nc(" \u5E03\u5C40 "),fT=Nc(" \u56DE\u6536\u7AD9 "),hT={class:"editor-container text-left"},vT={class:"editor-content"},pT=R0(()=>jt("div",{class:"ant-back-top-inner"},"UP",-1)),gT=or({name:"RedaxeEditor"}),mT=or(ud(hl({},gT),{props:{modelValue:{default:tT},styleOption:{default:()=>({})},items:{default:()=>aT(mt)},customToolbarItems:{default:()=>[]}},emits:["update:modelValue","change","changeHTML","changeJSON","onSelect","confirm","message"],setup(b,{expose:u,emit:t}){const n=b;V1(h=>({e157f8ec:a.value.padding,"25fba1d6":a.value.background,"483499d0":a.value.overflowY,"192b130c":a.value.fontFamily}));const e=cn("2"),r=cn([{value:"1",label:"\u53EA\u8BFB"},{value:"2",label:"\u4FEE\u8BA2"}]),i=()=>{c.value.options.readonly=e.value==="1"},a=cn(hl(hl({},nT()),n.styleOption)),o=cn([...n.items,n.customToolbarItems]),l=cn(null),c=cn(null),d=cn(!0);u({engine:c,container:l});const v=()=>{const h=document.querySelector("div.am-engine");h.setAttribute("contenteditable",!1),h.style.userSelect="none";const g=document.querySelector('div.am-engine p[data-id="p6666-a002"]');g.setAttribute("contenteditable",!0),g.style.userSelect="";const w=document.createElement("span");w.innerHTML='<svg style="position: absolute;right: -15px;bottom: 4px;cursor: pointer; width: 20px; height: 20px;" t="1648298084608" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2196" width="200" height="200"><path d="M785.066667 416H381.866667v-121.6c0-74.666667 61.866667-134.4 138.666666-134.4 59.733333 0 113.066667 36.266667 132.266667 91.733333 6.4 17.066667 23.466667 25.6 40.533333 19.2 17.066667-6.4 25.6-23.466667 19.2-40.533333-27.733333-81.066667-104.533333-134.4-192-134.4-110.933333 0-202.666667 89.6-202.666666 198.4v121.6h-78.933334c-55.466667 0-100.266667 44.8-100.266666 100.266667v311.466666c0 55.466667 44.8 100.266667 100.266666 100.266667h546.133334c55.466667 0 100.266667-44.8 100.266666-100.266667V516.266667c0-55.466667-44.8-100.266667-100.266666-100.266667z m36.266666 411.733333c0 19.2-17.066667 36.266667-36.266666 36.266667H238.933333c-19.2 0-36.266667-17.066667-36.266666-36.266667V516.266667c0-19.2 17.066667-36.266667 36.266666-36.266667h546.133334c19.2 0 36.266667 17.066667 36.266666 36.266667v311.466666z" p-id="2197"></path><path d="M512 544c-17.066667 0-32 14.933333-32 32v106.666667c0 17.066667 14.933333 32 32 32s32-14.933333 32-32v-106.666667c0-17.066667-14.933333-32-32-32z" p-id="2198"></path></svg>',g.style.position="relative",g.appendChild(w)};return Od(()=>{if(l.value){const h=new JC(l.value,{plugins:XM,cards:JM,config:eT});h.messageSuccess=w=>{t("message",{type:"success",msg:w})},h.messageError=w=>{t("message",{type:"error",msg:w})},h.messageConfirm=w=>new Promise((x,_)=>{t("confirm",w).then(x,_)}),h.on("card:maximize",()=>{V(".editor-toolbar").css("z-index","9999").css("top","55px")}),h.on("card:minimize",()=>{V(".editor-toolbar").css("z-index","").css("top","")});const g=n.modelValue;h.setValue(g,()=>{d.value=!1}),h.on("change",()=>{t("change",{html:h.getHtml(),json:h.getJsonValue()}),t("update:modelValue",h.getHtml()),t("changeHTML",h.getHtml()),t("changeJSON",h.getJsonValue())}),h.on("select",()=>{t("onSelect",h.change)}),v(),c.value=h}}),Jh(()=>{c.value&&c.value.destroy()}),(h,g)=>{const w=Tn("a-select"),x=Tn("a-avatar"),_=Tn("a-layout-header"),E=Tn("a-menu-item"),M=Tn("a-menu"),T=Tn("a-layout-sider"),S=Tn("a-layout-content"),D=Tn("a-layout"),I=Tn("a-back-top");return ct(),zt("div",oT,[jt("div",sT,[rr(D,{class:"h-full"},{default:Pn(()=>[rr(_,null,{default:Pn(()=>[lT,jt("ul",uT,[jt("li",null,[rr(w,{value:e.value,"onUpdate:value":g[0]||(g[0]=P=>e.value=P),style:{width:"120px"},options:r.value,onChange:i},null,8,["value","options"])]),jt("li",null,[rr(x,{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"})])])]),_:1}),rr(D,null,{default:Pn(()=>[rr(T,{collapsed:!0,collapsible:"",trigger:null},{default:Pn(()=>[rr(M,{mode:"inline"},{default:Pn(()=>[rr(E,{key:"1"},{icon:Pn(()=>[rr(Td(Q1))]),default:Pn(()=>[dT]),_:1}),rr(E,{key:"2"},{icon:Pn(()=>[rr(Td(X1))]),default:Pn(()=>[cT]),_:1}),rr(E,{key:"3"},{icon:Pn(()=>[rr(Td(J1))]),default:Pn(()=>[fT]),_:1})]),_:1})]),_:1}),rr(S,{class:"overflow-auto"},{default:Pn(()=>[c.value?(ct(),hr(Td(Ad),{key:0,engine:c.value,items:o.value},null,8,["engine","items"])):yn("",!0),jt("div",{class:ti(["editor-wrapper",{"editor-mobile":Td(mt)}])},[jt("div",hT,[jt("div",vT,[jt("div",{ref_key:"container",ref:l},null,512)])])],2)]),_:1}),rr(T,{class:"revise-sider"},{default:Pn(()=>[rr(mk)]),_:1})]),_:1})]),_:1}),rr(I,null,{default:Pn(()=>[pT]),_:1})])])}}}));var Zh=ev(mT,[["__scopeId","data-v-192a6bd0"]]);Zh.install=function(b){b.component(Zh.name,Zh)};const bT=or({name:"DocsPage"}),xT=or(ud(hl({},bT),{setup(b){return(u,t)=>(ct(),hr(Td(Zh)))}}));export{xT as default};
